(self.webpackChunkquickshare=self.webpackChunkquickshare||[]).push([[792],{76:(wa,fs,Cn)=>{"use strict";Cn.d(fs,{Am:()=>Ya,Bd:()=>$,FA:()=>Qe,Fy:()=>st,I9:()=>ao,Im:()=>un,Ku:()=>wl,Ll:()=>We,T9:()=>tr,Uj:()=>tn,XA:()=>ot,ZQ:()=>Oe,bD:()=>$r,c1:()=>qe,cY:()=>ft,eX:()=>me,g:()=>ye,gR:()=>Nn,hp:()=>ea,jZ:()=>ke,lT:()=>Pn,lV:()=>nt,mS:()=>xi,nr:()=>sr,p7:()=>te,sr:()=>Be,tD:()=>qr,u:()=>Ue,zW:()=>Q,zw:()=>Xt});const ve=function(q){const X=[];let Z=0;for(let ne=0;ne<q.length;ne++){let fe=q.charCodeAt(ne);fe<128?X[Z++]=fe:fe<2048?(X[Z++]=fe>>6|192,X[Z++]=63&fe|128):55296==(64512&fe)&&ne+1<q.length&&56320==(64512&q.charCodeAt(ne+1))?(fe=65536+((1023&fe)<<10)+(1023&q.charCodeAt(++ne)),X[Z++]=fe>>18|240,X[Z++]=fe>>12&63|128,X[Z++]=fe>>6&63|128,X[Z++]=63&fe|128):(X[Z++]=fe>>12|224,X[Z++]=fe>>6&63|128,X[Z++]=63&fe|128)}return X},Ii={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray(q,X){if(!Array.isArray(q))throw Error("encodeByteArray takes an array as a parameter");this.init_();const Z=X?this.byteToCharMapWebSafe_:this.byteToCharMap_,ne=[];for(let fe=0;fe<q.length;fe+=3){const Wt=q[fe],Mt=fe+1<q.length,Zi=Mt?q[fe+1]:0,Xr=fe+2<q.length,vn=Xr?q[fe+2]:0;let ws=(15&Zi)<<2|vn>>6,El=63&vn;Xr||(El=64,Mt||(ws=64)),ne.push(Z[Wt>>2],Z[(3&Wt)<<4|Zi>>4],Z[ws],Z[El])}return ne.join("")},encodeString(q,X){return this.HAS_NATIVE_SUPPORT&&!X?btoa(q):this.encodeByteArray(ve(q),X)},decodeString(q,X){return this.HAS_NATIVE_SUPPORT&&!X?atob(q):function(q){const X=[];let Z=0,ne=0;for(;Z<q.length;){const fe=q[Z++];if(fe<128)X[ne++]=String.fromCharCode(fe);else if(fe>191&&fe<224){const Wt=q[Z++];X[ne++]=String.fromCharCode((31&fe)<<6|63&Wt)}else if(fe>239&&fe<365){const Xr=((7&fe)<<18|(63&q[Z++])<<12|(63&q[Z++])<<6|63&q[Z++])-65536;X[ne++]=String.fromCharCode(55296+(Xr>>10)),X[ne++]=String.fromCharCode(56320+(1023&Xr))}else{const Wt=q[Z++],Mt=q[Z++];X[ne++]=String.fromCharCode((15&fe)<<12|(63&Wt)<<6|63&Mt)}}return X.join("")}(this.decodeStringToByteArray(q,X))},decodeStringToByteArray(q,X){this.init_();const Z=X?this.charToByteMapWebSafe_:this.charToByteMap_,ne=[];for(let fe=0;fe<q.length;){const Wt=Z[q.charAt(fe++)],Zi=fe<q.length?Z[q.charAt(fe)]:0;++fe;const vn=fe<q.length?Z[q.charAt(fe)]:64;++fe;const yn=fe<q.length?Z[q.charAt(fe)]:64;if(++fe,null==Wt||null==Zi||null==vn||null==yn)throw new ri;ne.push(Wt<<2|Zi>>4),64!==vn&&(ne.push(Zi<<4&240|vn>>2),64!==yn&&ne.push(vn<<6&192|yn))}return ne},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let q=0;q<this.ENCODED_VALS.length;q++)this.byteToCharMap_[q]=this.ENCODED_VALS.charAt(q),this.charToByteMap_[this.byteToCharMap_[q]]=q,this.byteToCharMapWebSafe_[q]=this.ENCODED_VALS_WEBSAFE.charAt(q),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[q]]=q,q>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(q)]=q,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(q)]=q)}}};class ri extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const tn=function(q){return function(q){const X=ve(q);return Ii.encodeByteArray(X,!0)}(q).replace(/\./g,"")},Ue=function(q){try{return Ii.decodeString(q,!0)}catch(X){console.error("base64Decode failed: ",X)}return null};function Xt(q,X){if(!(X instanceof Object))return X;switch(X.constructor){case Date:return new Date(X.getTime());case Object:void 0===q&&(q={});break;case Array:q=[];break;default:return X}for(const Z in X)!X.hasOwnProperty(Z)||!Kn(Z)||(q[Z]=Xt(q[Z],X[Z]));return q}function Kn(q){return"__proto__"!==q}function xi(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}const Wn=()=>{try{return xi().__FIREBASE_DEFAULTS__||(()=>{if(typeof process>"u"||typeof process.env>"u")return;const q=process.env.__FIREBASE_DEFAULTS__;return q?JSON.parse(q):void 0})()||(()=>{if(typeof document>"u")return;let q;try{q=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const X=q&&Ue(q[1]);return X&&JSON.parse(X)})()}catch(q){return void console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${q}`)}},tr=()=>{var q;return null===(q=Wn())||void 0===q?void 0:q.config},ot=q=>{var X;return null===(X=Wn())||void 0===X?void 0:X[`_${q}`]};class ft{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((X,Z)=>{this.resolve=X,this.reject=Z})}wrapCallback(X){return(Z,ne)=>{Z?this.reject(Z):this.resolve(ne),"function"==typeof X&&(this.promise.catch(()=>{}),1===X.length?X(Z):X(Z,ne))}}}function st(q,X){if(q.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const ne=X||"demo-project",fe=q.iat||0,Wt=q.sub||q.user_id;if(!Wt)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const Mt=Object.assign({iss:`https://securetoken.google.com/${ne}`,aud:ne,iat:fe,exp:fe+3600,auth_time:fe,sub:Wt,user_id:Wt,firebase:{sign_in_provider:"custom",identities:{}}},q);return[tn(JSON.stringify({alg:"none",type:"JWT"})),tn(JSON.stringify(Mt)),""].join(".")}function Oe(){return typeof navigator<"u"&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function ke(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Oe())}function We(){var q;const X=null===(q=Wn())||void 0===q?void 0:q.forceEnvironment;if("node"===X)return!0;if("browser"===X)return!1;try{return"[object process]"===Object.prototype.toString.call(global.process)}catch{return!1}}function $(){return typeof window<"u"||te()}function te(){return typeof WorkerGlobalScope<"u"&&typeof self<"u"&&self instanceof WorkerGlobalScope}function qe(){return typeof navigator<"u"&&"Cloudflare-Workers"===navigator.userAgent}function Be(){const q="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof q&&void 0!==q.id}function nt(){return"object"==typeof navigator&&"ReactNative"===navigator.product}function Pn(){const q=Oe();return q.indexOf("MSIE ")>=0||q.indexOf("Trident/")>=0}function sr(){return!We()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function Q(){try{return"object"==typeof indexedDB}catch{return!1}}function me(){return new Promise((q,X)=>{try{let Z=!0;const ne="validate-browser-context-for-indexeddb-analytics-module",fe=self.indexedDB.open(ne);fe.onsuccess=()=>{fe.result.close(),Z||self.indexedDB.deleteDatabase(ne),q(!0)},fe.onupgradeneeded=()=>{Z=!1},fe.onerror=()=>{var Wt;X((null===(Wt=fe.error)||void 0===Wt?void 0:Wt.message)||"")}}catch(Z){X(Z)}})}class ye extends Error{constructor(X,Z,ne){super(Z),this.code=X,this.customData=ne,this.name="FirebaseError",Object.setPrototypeOf(this,ye.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Qe.prototype.create)}}class Qe{constructor(X,Z,ne){this.service=X,this.serviceName=Z,this.errors=ne}create(X,...Z){const ne=Z[0]||{},fe=`${this.service}/${X}`,Wt=this.errors[X],Mt=Wt?function Ge(q,X){return q.replace(ge,(Z,ne)=>{const fe=X[ne];return null!=fe?String(fe):`<${ne}?>`})}(Wt,ne):"Error";return new ye(fe,`${this.serviceName}: ${Mt} (${fe}).`,ne)}}const ge=/\{\$([^}]+)}/g;function Nn(q,X){return Object.prototype.hasOwnProperty.call(q,X)}function un(q){for(const X in q)if(Object.prototype.hasOwnProperty.call(q,X))return!1;return!0}function $r(q,X){if(q===X)return!0;const Z=Object.keys(q),ne=Object.keys(X);for(const fe of Z){if(!ne.includes(fe))return!1;const Wt=q[fe],Mt=X[fe];if(Ea(Wt)&&Ea(Mt)){if(!$r(Wt,Mt))return!1}else if(Wt!==Mt)return!1}for(const fe of ne)if(!Z.includes(fe))return!1;return!0}function Ea(q){return null!==q&&"object"==typeof q}function Ya(q){const X=[];for(const[Z,ne]of Object.entries(q))Array.isArray(ne)?ne.forEach(fe=>{X.push(encodeURIComponent(Z)+"="+encodeURIComponent(fe))}):X.push(encodeURIComponent(Z)+"="+encodeURIComponent(ne));return X.length?"&"+X.join("&"):""}function ao(q){const X={};return q.replace(/^\?/,"").split("&").forEach(ne=>{if(ne){const[fe,Wt]=ne.split("=");X[decodeURIComponent(fe)]=decodeURIComponent(Wt)}}),X}function ea(q){const X=q.indexOf("?");if(!X)return"";const Z=q.indexOf("#",X);return q.substring(X,Z>0?Z:void 0)}function qr(q,X){const Z=new lo(q,X);return Z.subscribe.bind(Z)}class lo{constructor(X,Z){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=Z,this.task.then(()=>{X(this)}).catch(ne=>{this.error(ne)})}next(X){this.forEachObserver(Z=>{Z.next(X)})}error(X){this.forEachObserver(Z=>{Z.error(X)}),this.close(X)}complete(){this.forEachObserver(X=>{X.complete()}),this.close()}subscribe(X,Z,ne){let fe;if(void 0===X&&void 0===Z&&void 0===ne)throw new Error("Missing Observer.");fe=function Qa(q,X){if("object"!=typeof q||null===q)return!1;for(const Z of X)if(Z in q&&"function"==typeof q[Z])return!0;return!1}(X,["next","error","complete"])?X:{next:X,error:Z,complete:ne},void 0===fe.next&&(fe.next=kr),void 0===fe.error&&(fe.error=kr),void 0===fe.complete&&(fe.complete=kr);const Wt=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?fe.error(this.finalError):fe.complete()}catch{}}),this.observers.push(fe),Wt}unsubscribeOne(X){void 0===this.observers||void 0===this.observers[X]||(delete this.observers[X],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(X){if(!this.finalized)for(let Z=0;Z<this.observers.length;Z++)this.sendOne(Z,X)}sendOne(X,Z){this.task.then(()=>{if(void 0!==this.observers&&void 0!==this.observers[X])try{Z(this.observers[X])}catch(ne){typeof console<"u"&&console.error&&console.error(ne)}})}close(X){this.finalized||(this.finalized=!0,void 0!==X&&(this.finalError=X),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function kr(){}function wl(q){return q&&q._delegate?q._delegate:q}},292:(wa,fs,Cn)=>{"use strict";function H(n){return"function"==typeof n}function _n(n){const t=n(i=>{Error.call(i),i.stack=(new Error).stack});return t.prototype=Object.create(Error.prototype),t.prototype.constructor=t,t}const Gt=_n(n=>function(t){n(this),this.message=t?`${t.length} errors occurred during unsubscription:\n${t.map((i,r)=>`${r+1}) ${i.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=t});function ve(n,e){if(n){const t=n.indexOf(e);0<=t&&n.splice(t,1)}}class on{constructor(e){this.initialTeardown=e,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let e;if(!this.closed){this.closed=!0;const{_parentage:t}=this;if(t)if(this._parentage=null,Array.isArray(t))for(const s of t)s.remove(this);else t.remove(this);const{initialTeardown:i}=this;if(H(i))try{i()}catch(s){e=s instanceof Gt?s.errors:[s]}const{_finalizers:r}=this;if(r){this._finalizers=null;for(const s of r)try{Ci(s)}catch(o){e=e??[],o instanceof Gt?e=[...e,...o.errors]:e.push(o)}}if(e)throw new Gt(e)}}add(e){var t;if(e&&e!==this)if(this.closed)Ci(e);else{if(e instanceof on){if(e.closed||e._hasParent(this))return;e._addParent(this)}(this._finalizers=null!==(t=this._finalizers)&&void 0!==t?t:[]).push(e)}}_hasParent(e){const{_parentage:t}=this;return t===e||Array.isArray(t)&&t.includes(e)}_addParent(e){const{_parentage:t}=this;this._parentage=Array.isArray(t)?(t.push(e),t):t?[t,e]:e}_removeParent(e){const{_parentage:t}=this;t===e?this._parentage=null:Array.isArray(t)&&ve(t,e)}remove(e){const{_finalizers:t}=this;t&&ve(t,e),e instanceof on&&e._removeParent(this)}}on.EMPTY=(()=>{const n=new on;return n.closed=!0,n})();const Ii=on.EMPTY;function ri(n){return n instanceof on||n&&"closed"in n&&H(n.remove)&&H(n.add)&&H(n.unsubscribe)}function Ci(n){H(n)?n():n.unsubscribe()}const tn={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1},Ue={setTimeout(n,e,...t){const{delegate:i}=Ue;return i?.setTimeout?i.setTimeout(n,e,...t):setTimeout(n,e,...t)},clearTimeout(n){const{delegate:e}=Ue;return(e?.clearTimeout||clearTimeout)(n)},delegate:void 0};function rt(n){Ue.setTimeout(()=>{const{onUnhandledError:e}=tn;if(!e)throw n;e(n)})}function Xt(){}const Kn=wi("C",void 0,void 0);function wi(n,e,t){return{kind:n,value:e,error:t}}let xn=null;function Wn(n){if(tn.useDeprecatedSynchronousErrorHandling){const e=!xn;if(e&&(xn={errorThrown:!1,error:null}),n(),e){const{errorThrown:t,error:i}=xn;if(xn=null,t)throw i}}else n()}class rs extends on{constructor(e){super(),this.isStopped=!1,e?(this.destination=e,ri(e)&&e.add(this)):this.destination=$}static create(e,t,i){return new st(e,t,i)}next(e){this.isStopped?We(function ns(n){return wi("N",n,void 0)}(e),this):this._next(e)}error(e){this.isStopped?We(function xi(n){return wi("E",void 0,n)}(e),this):(this.isStopped=!0,this._error(e))}complete(){this.isStopped?We(Kn,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(e){this.destination.next(e)}_error(e){try{this.destination.error(e)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}}const tr=Function.prototype.bind;function ot(n,e){return tr.call(n,e)}class ft{constructor(e){this.partialObserver=e}next(e){const{partialObserver:t}=this;if(t.next)try{t.next(e)}catch(i){Oe(i)}}error(e){const{partialObserver:t}=this;if(t.error)try{t.error(e)}catch(i){Oe(i)}else Oe(e)}complete(){const{partialObserver:e}=this;if(e.complete)try{e.complete()}catch(t){Oe(t)}}}class st extends rs{constructor(e,t,i){let r;if(super(),H(e)||!e)r={next:e??void 0,error:t??void 0,complete:i??void 0};else{let s;this&&tn.useDeprecatedNextContext?(s=Object.create(e),s.unsubscribe=()=>this.unsubscribe(),r={next:e.next&&ot(e.next,s),error:e.error&&ot(e.error,s),complete:e.complete&&ot(e.complete,s)}):r=e}this.destination=new ft(r)}}function Oe(n){tn.useDeprecatedSynchronousErrorHandling?function is(n){tn.useDeprecatedSynchronousErrorHandling&&xn&&(xn.errorThrown=!0,xn.error=n)}(n):rt(n)}function We(n,e){const{onStoppedNotification:t}=tn;t&&Ue.setTimeout(()=>t(n,e))}const $={closed:!0,next:Xt,error:function ke(n){throw n},complete:Xt},te="function"==typeof Symbol&&Symbol.observable||"@@observable";function qe(n){return n}function nt(n){return 0===n.length?qe:1===n.length?n[0]:function(t){return n.reduce((i,r)=>r(i),t)}}let xt=(()=>{class n{constructor(t){t&&(this._subscribe=t)}lift(t){const i=new n;return i.source=this,i.operator=t,i}subscribe(t,i,r){const s=function Fi(n){return n&&n instanceof rs||function Ei(n){return n&&H(n.next)&&H(n.error)&&H(n.complete)}(n)&&ri(n)}(t)?t:new st(t,i,r);return Wn(()=>{const{operator:o,source:a}=this;s.add(o?o.call(s,a):a?this._subscribe(s):this._trySubscribe(s))}),s}_trySubscribe(t){try{return this._subscribe(t)}catch(i){t.error(i)}}forEach(t,i){return new(i=Pn(i))((r,s)=>{const o=new st({next:a=>{try{t(a)}catch(l){s(l),o.unsubscribe()}},error:s,complete:r});this.subscribe(o)})}_subscribe(t){var i;return null===(i=this.source)||void 0===i?void 0:i.subscribe(t)}[te](){return this}pipe(...t){return nt(t)(this)}toPromise(t){return new(t=Pn(t))((i,r)=>{let s;this.subscribe(o=>s=o,o=>r(o),()=>i(s))})}}return n.create=e=>new n(e),n})();function Pn(n){var e;return null!==(e=n??tn.Promise)&&void 0!==e?e:Promise}const sr=_n(n=>function(){n(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});let Q=(()=>{class n extends xt{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(t){const i=new me(this,this);return i.operator=t,i}_throwIfClosed(){if(this.closed)throw new sr}next(t){Wn(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(const i of this.currentObservers)i.next(t)}})}error(t){Wn(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=t;const{observers:i}=this;for(;i.length;)i.shift().error(t)}})}complete(){Wn(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;const{observers:t}=this;for(;t.length;)t.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var t;return(null===(t=this.observers)||void 0===t?void 0:t.length)>0}_trySubscribe(t){return this._throwIfClosed(),super._trySubscribe(t)}_subscribe(t){return this._throwIfClosed(),this._checkFinalizedStatuses(t),this._innerSubscribe(t)}_innerSubscribe(t){const{hasError:i,isStopped:r,observers:s}=this;return i||r?Ii:(this.currentObservers=null,s.push(t),new on(()=>{this.currentObservers=null,ve(s,t)}))}_checkFinalizedStatuses(t){const{hasError:i,thrownError:r,isStopped:s}=this;i?t.error(r):s&&t.complete()}asObservable(){const t=new xt;return t.source=this,t}}return n.create=(e,t)=>new me(e,t),n})();class me extends Q{constructor(e,t){super(),this.destination=e,this.source=t}next(e){var t,i;null===(i=null===(t=this.destination)||void 0===t?void 0:t.next)||void 0===i||i.call(t,e)}error(e){var t,i;null===(i=null===(t=this.destination)||void 0===t?void 0:t.error)||void 0===i||i.call(t,e)}complete(){var e,t;null===(t=null===(e=this.destination)||void 0===e?void 0:e.complete)||void 0===t||t.call(e)}_subscribe(e){var t,i;return null!==(i=null===(t=this.source)||void 0===t?void 0:t.subscribe(e))&&void 0!==i?i:Ii}}function Ae(n){return H(n?.lift)}function re(n){return e=>{if(Ae(e))return e.lift(function(t){try{return n(t,this)}catch(i){this.error(i)}});throw new TypeError("Unable to lift unknown Observable type")}}function ye(n,e,t,i,r){return new Qe(n,e,t,i,r)}class Qe extends rs{constructor(e,t,i,r,s,o){super(e),this.onFinalize=s,this.shouldUnsubscribe=o,this._next=t?function(a){try{t(a)}catch(l){e.error(l)}}:super._next,this._error=r?function(a){try{r(a)}catch(l){e.error(l)}finally{this.unsubscribe()}}:super._error,this._complete=i?function(){try{i()}catch(a){e.error(a)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var e;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){const{closed:t}=this;super.unsubscribe(),!t&&(null===(e=this.onFinalize)||void 0===e||e.call(this))}}}function Ge(n,e){return re((t,i)=>{let r=0;t.subscribe(ye(i,s=>{i.next(n.call(e,s,r++))}))})}var ge=Cn(635);const Ie=n=>n&&"number"==typeof n.length&&"function"!=typeof n;function ae(n){return H(n?.then)}function De(n){return H(n[te])}function Ve(n){return Symbol.asyncIterator&&H(n?.[Symbol.asyncIterator])}function At(n){return new TypeError(`You provided ${null!==n&&"object"==typeof n?"an invalid object":`'${n}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}const Vt=function Tt(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}();function Nn(n){return H(n?.[Vt])}function fi(n){return(0,ge.AQ)(this,arguments,function*(){const t=n.getReader();try{for(;;){const{value:i,done:r}=yield(0,ge.N3)(t.read());if(r)return yield(0,ge.N3)(void 0);yield yield(0,ge.N3)(i)}}finally{t.releaseLock()}})}function un(n){return H(n?.getReader)}function Mi(n){if(n instanceof xt)return n;if(null!=n){if(De(n))return function $r(n){return new xt(e=>{const t=n[te]();if(H(t.subscribe))return t.subscribe(e);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}(n);if(Ie(n))return function Ea(n){return new xt(e=>{for(let t=0;t<n.length&&!e.closed;t++)e.next(n[t]);e.complete()})}(n);if(ae(n))return function Fc(n){return new xt(e=>{n.then(t=>{e.closed||(e.next(t),e.complete())},t=>e.error(t)).then(null,rt)})}(n);if(Ve(n))return ao(n);if(Nn(n))return function Ya(n){return new xt(e=>{for(const t of n)if(e.next(t),e.closed)return;e.complete()})}(n);if(un(n))return function ea(n){return ao(fi(n))}(n)}throw At(n)}function ao(n){return new xt(e=>{(function ta(n,e){var t,i,r,s;return(0,ge.sH)(this,void 0,void 0,function*(){try{for(t=(0,ge.xN)(n);!(i=yield t.next()).done;)if(e.next(i.value),e.closed)return}catch(o){r={error:o}}finally{try{i&&!i.done&&(s=t.return)&&(yield s.call(t))}finally{if(r)throw r.error}}e.complete()})})(n,e).catch(t=>e.error(t))})}function qr(n,e,t,i=0,r=!1){const s=e.schedule(function(){t(),r?n.add(this.schedule(null,i)):this.unsubscribe()},i);if(n.add(s),!r)return s}function Pr(n,e,t=1/0){return H(e)?Pr((i,r)=>Ge((s,o)=>e(i,s,r,o))(Mi(n(i,r))),t):("number"==typeof e&&(t=e),re((i,r)=>function lo(n,e,t,i,r,s,o,a){const l=[];let c=0,u=0,d=!1;const p=()=>{d&&!l.length&&!c&&e.complete()},m=x=>c<i?v(x):l.push(x),v=x=>{s&&e.next(x),c++;let b=!1;Mi(t(x,u++)).subscribe(ye(e,w=>{r?.(w),s?m(w):e.next(w)},()=>{b=!0},void 0,()=>{if(b)try{for(c--;l.length&&c<i;){const w=l.shift();o?qr(e,o,()=>v(w)):v(w)}p()}catch(w){e.error(w)}}))};return n.subscribe(ye(e,m,()=>{d=!0,p()})),()=>{a?.()}}(i,r,n,t)))}function Qa(n=1/0){return Pr(qe,n)}const kr=new xt(n=>n.complete());function Lc(n){return n&&H(n.schedule)}function co(n){return n[n.length-1]}function Vc(n){return H(co(n))?n.pop():void 0}function jl(n){return Lc(co(n))?n.pop():void 0}function uo(n,e=0){return re((t,i)=>{t.subscribe(ye(i,r=>qr(i,n,()=>i.next(r),e),()=>qr(i,n,()=>i.complete(),e),r=>qr(i,n,()=>i.error(r),e)))})}function ho(n,e=0){return re((t,i)=>{i.add(n.schedule(()=>t.subscribe(i),e))})}function id(n,e){if(!n)throw new Error("Iterable cannot be null");return new xt(t=>{qr(t,e,()=>{const i=n[Symbol.asyncIterator]();qr(t,e,()=>{i.next().then(r=>{r.done?t.complete():t.next(r.value)})},0,!0)})})}function q(n,e){return e?function wl(n,e){if(null!=n){if(De(n))return function Uc(n,e){return Mi(n).pipe(ho(e),uo(e))}(n,e);if(Ie(n))return function Bc(n,e){return new xt(t=>{let i=0;return e.schedule(function(){i===n.length?t.complete():(t.next(n[i++]),t.closed||this.schedule())})})}(n,e);if(ae(n))return function nd(n,e){return Mi(n).pipe(ho(e),uo(e))}(n,e);if(Ve(n))return id(n,e);if(Nn(n))return function Ip(n,e){return new xt(t=>{let i;return qr(t,e,()=>{i=n[Vt](),qr(t,e,()=>{let r,s;try{({value:r,done:s}=i.next())}catch(o){return void t.error(o)}s?t.complete():t.next(r)},0,!0)}),()=>H(i?.return)&&i.return()})}(n,e);if(un(n))return function rd(n,e){return id(fi(n),e)}(n,e)}throw At(n)}(n,e):Mi(n)}function X(...n){const e=jl(n),t=function $s(n,e){return"number"==typeof co(n)?n.pop():e}(n,1/0),i=n;return i.length?1===i.length?Mi(i[0]):Qa(t)(q(i,e)):kr}class Z extends Q{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){const t=super._subscribe(e);return!t.closed&&e.next(this._value),t}getValue(){const{hasError:e,thrownError:t,_value:i}=this;if(e)throw t;return this._throwIfClosed(),i}next(e){super.next(this._value=e)}}function ne(...n){return q(n,jl(n))}function fe(n={}){const{connector:e=(()=>new Q),resetOnError:t=!0,resetOnComplete:i=!0,resetOnRefCountZero:r=!0}=n;return s=>{let o,a,l,c=0,u=!1,d=!1;const p=()=>{a?.unsubscribe(),a=void 0},m=()=>{p(),o=l=void 0,u=d=!1},v=()=>{const x=o;m(),x?.unsubscribe()};return re((x,b)=>{c++,!d&&!u&&p();const w=l=l??e();b.add(()=>{c--,0===c&&!d&&!u&&(a=Wt(v,r))}),w.subscribe(b),!o&&c>0&&(o=new st({next:T=>w.next(T),error:T=>{d=!0,p(),a=Wt(m,t,T),w.error(T)},complete:()=>{u=!0,p(),a=Wt(m,i),w.complete()}}),Mi(x).subscribe(o))})(s)}}function Wt(n,e,...t){if(!0===e)return void n();if(!1===e)return;const i=new st({next:()=>{i.unsubscribe(),n()}});return Mi(e(...t)).subscribe(i)}function Mt(n,e){return re((t,i)=>{let r=null,s=0,o=!1;const a=()=>o&&!r&&i.complete();t.subscribe(ye(i,l=>{r?.unsubscribe();let c=0;const u=s++;Mi(n(l,u)).subscribe(r=ye(i,d=>i.next(e?e(l,d,u,c++):d),()=>{r=null,a()}))},()=>{o=!0,a()}))})}function Zi(n,e=qe){return n=n??Xr,re((t,i)=>{let r,s=!0;t.subscribe(ye(i,o=>{const a=e(o);(s||!n(r,a))&&(s=!1,r=a,i.next(o))}))})}function Xr(n,e){return n===e}function vn(n){for(let e in n)if(n[e]===vn)return e;throw Error("Could not find renamed property on target object.")}function Br(n,e){for(const t in e)e.hasOwnProperty(t)&&!n.hasOwnProperty(t)&&(n[t]=e[t])}function yn(n){if("string"==typeof n)return n;if(Array.isArray(n))return"["+n.map(yn).join(", ")+"]";if(null==n)return""+n;if(n.overriddenName)return`${n.overriddenName}`;if(n.name)return`${n.name}`;const e=n.toString();if(null==e)return""+e;const t=e.indexOf("\n");return-1===t?e:e.substring(0,t)}function ws(n,e){return null==n||""===n?null===e?"":e:null==e||""===e?n:n+" "+e}const El=vn({__forward_ref__:vn});function ki(n){return n.__forward_ref__=ki,n.toString=function(){return yn(this())},n}function Tn(n){return Ja(n)?n():n}function Ja(n){return"function"==typeof n&&n.hasOwnProperty(El)&&n.__forward_ref__===ki}function sd(n){return n&&!!n.\u0275providers}const Tl="https://g.co/ng/security#xss";class Ce extends Error{constructor(e,t){super(function xe(n,e){return`NG0${Math.abs(n)}${e?": "+e:""}`}(e,t)),this.code=e}}function Y(n){return"string"==typeof n?n:null==n?"":String(n)}function Gn(n,e){throw new Ce(-201,!1)}function na(n,e){null==n&&function An(n,e,t,i){throw new Error(`ASSERTION ERROR: ${n}`+(null==i?"":` [Expected=> ${t} ${i} ${e} <=Actual]`))}(e,n,null,"!=")}function dt(n){return{token:n.token,providedIn:n.providedIn||null,factory:n.factory,value:void 0}}function jn(n){return{providers:n.providers||[],imports:n.imports||[]}}function Dp(n){return ov(n,Eh)||ov(n,zc)}function ov(n,e){return n.hasOwnProperty(e)?n[e]:null}function Rp(n){return n&&(n.hasOwnProperty(av)||n.hasOwnProperty(Nx))?n[av]:null}const Eh=vn({\u0275prov:vn}),av=vn({\u0275inj:vn}),zc=vn({ngInjectableDef:vn}),Nx=vn({ngInjectorDef:vn});var ti=function(n){return n[n.Default=0]="Default",n[n.Host=1]="Host",n[n.Self=2]="Self",n[n.SkipSelf=4]="SkipSelf",n[n.Optional=8]="Optional",n}(ti||{});let lv;function fo(n){const e=lv;return lv=n,e}function kp(n,e,t){const i=Dp(n);return i&&"root"==i.providedIn?void 0===i.value?i.value=i.factory():i.value:t&ti.Optional?null:void 0!==e?e:void Gn(yn(n))}const Yi=globalThis;class Fe{constructor(e,t){this._desc=e,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof t?this.__NG_ELEMENT_ID__=t:void 0!==t&&(this.\u0275prov=dt({token:this,providedIn:t.providedIn||"root",factory:t.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}}const Sh={},Ah="__NG_DI_FLAG__",$l="ngTempTokenPath",fv=/\n/gm,Ta="__source";let od;function ql(n){const e=od;return od=n,e}function mv(n,e=ti.Default){if(void 0===od)throw new Ce(-203,!1);return null===od?kp(n,void 0,e):od.get(n,e&ti.Optional?null:void 0,e)}function ue(n,e=ti.Default){return(function Pp(){return lv}()||mv)(Tn(n),e)}function bt(n,e=ti.Default){return ue(n,Fp(e))}function Fp(n){return typeof n>"u"||"number"==typeof n?n:0|(n.optional&&8)|(n.host&&1)|(n.self&&2)|(n.skipSelf&&4)}function Ih(n){const e=[];for(let t=0;t<n.length;t++){const i=Tn(n[t]);if(Array.isArray(i)){if(0===i.length)throw new Ce(900,!1);let r,s=ti.Default;for(let o=0;o<i.length;o++){const a=i[o],l=xC(a);"number"==typeof l?-1===l?r=a.token:s|=l:r=a}e.push(ue(r,s))}else e.push(ue(i))}return e}function Sa(n,e){return n[Ah]=e,n.prototype[Ah]=e,n}function xC(n){return n[Ah]}function Xl(n){return{toString:n}.toString()}var ad=function(n){return n[n.OnPush=0]="OnPush",n[n.Default=1]="Default",n}(ad||{}),Kr=function(n){return n[n.Emulated=0]="Emulated",n[n.None=2]="None",n[n.ShadowDom=3]="ShadowDom",n}(Kr||{});const qs={},ui=[],Mh=vn({\u0275cmp:vn}),Lp=vn({\u0275dir:vn}),Vp=vn({\u0275pipe:vn}),Bx=vn({\u0275mod:vn}),po=vn({\u0275fac:vn}),Dh=vn({__NG_ELEMENT_ID__:vn}),Rh=vn({__NG_ENV_ID__:vn});function gv(n,e,t){let i=n.length;for(;;){const r=n.indexOf(e,t);if(-1===r)return r;if(0===r||n.charCodeAt(r-1)<=32){const s=e.length;if(r+s===i||n.charCodeAt(r+s)<=32)return r}t=r+1}}function Up(n,e,t){let i=0;for(;i<t.length;){const r=t[i];if("number"==typeof r){if(0!==r)break;i++;const s=t[i++],o=t[i++],a=t[i++];n.setAttribute(e,o,a,s)}else{const s=r,o=t[++i];Po(s)?n.setProperty(e,s,o):n.setAttribute(e,s,o),i++}}return i}function Bp(n){return 3===n||4===n||6===n}function Po(n){return 64===n.charCodeAt(0)}function ld(n,e){if(null!==e&&0!==e.length)if(null===n||0===n.length)n=e.slice();else{let t=-1;for(let i=0;i<e.length;i++){const r=e[i];"number"==typeof r?t=r:0===t||zx(n,t,r,null,-1===t||2===t?e[++i]:null)}}return n}function zx(n,e,t,i,r){let s=0,o=n.length;if(-1===e)o=-1;else for(;s<n.length;){const a=n[s++];if("number"==typeof a){if(a===e){o=-1;break}if(a>e){o=s-1;break}}}for(;s<n.length;){const a=n[s];if("number"==typeof a)break;if(a===t){if(null===i)return void(null!==r&&(n[s+1]=r));if(i===n[s+1])return void(n[s+2]=r)}s++,null!==i&&s++,null!==r&&s++}-1!==o&&(n.splice(o,0,e),s=o+1),n.splice(s++,0,t),null!==i&&n.splice(s++,0,i),null!==r&&n.splice(s++,0,r)}const zp="ng-template";function Hp(n,e,t){let i=0,r=!0;for(;i<n.length;){let s=n[i++];if("string"==typeof s&&r){const o=n[i++];if(t&&"class"===s&&-1!==gv(o.toLowerCase(),e,0))return!0}else{if(1===s){for(;i<n.length&&"string"==typeof(s=n[i++]);)if(s.toLowerCase()===e)return!0;return!1}"number"==typeof s&&(r=!1)}}return!1}function _v(n){return 4===n.type&&n.value!==zp}function Hx(n,e,t){return e===(4!==n.type||t?n.value:zp)}function EC(n,e,t){let i=4;const r=n.attrs||[],s=function yv(n){for(let e=0;e<n.length;e++)if(Bp(n[e]))return e;return n.length}(r);let o=!1;for(let a=0;a<e.length;a++){const l=e[a];if("number"!=typeof l){if(!o)if(4&i){if(i=2|1&i,""!==l&&!Hx(n,l,t)||""===l&&1===e.length){if(ko(i))return!1;o=!0}}else{const c=8&i?l:e[++a];if(8&i&&null!==n.attrs){if(!Hp(n.attrs,c,t)){if(ko(i))return!1;o=!0}continue}const d=vv(8&i?"class":l,r,_v(n),t);if(-1===d){if(ko(i))return!1;o=!0;continue}if(""!==c){let p;p=d>s?"":r[d+1].toLowerCase();const m=8&i?p:null;if(m&&-1!==gv(m,c,0)||2&i&&c!==p){if(ko(i))return!1;o=!0}}}}else{if(!o&&!ko(i)&&!ko(l))return!1;if(o&&ko(l))continue;o=!1,i=l|1&i}}return ko(i)||o}function ko(n){return 0==(1&n)}function vv(n,e,t,i){if(null===e)return-1;let r=0;if(i||!t){let s=!1;for(;r<e.length;){const o=e[r];if(o===n)return r;if(3===o||6===o)s=!0;else{if(1===o||2===o){let a=e[++r];for(;"string"==typeof a;)a=e[++r];continue}if(4===o)break;if(0===o){r+=4;continue}}r+=s?1:2}return-1}return function Gx(n,e){let t=n.indexOf(4);if(t>-1)for(t++;t<n.length;){const i=n[t];if("number"==typeof i)return-1;if(i===e)return t;t++}return-1}(e,n)}function Gp(n,e,t=!1){for(let i=0;i<e.length;i++)if(EC(n,e[i],t))return!0;return!1}function bv(n,e){e:for(let t=0;t<e.length;t++){const i=e[t];if(n.length===i.length){for(let r=0;r<n.length;r++)if(n[r]!==i[r])continue e;return!0}}return!1}function xv(n,e){return n?":not("+e.trim()+")":e}function wv(n){let e=n[0],t=1,i=2,r="",s=!1;for(;t<n.length;){let o=n[t];if("string"==typeof o)if(2&i){const a=n[++t];r+="["+o+(a.length>0?'="'+a+'"':"")+"]"}else 8&i?r+="."+o:4&i&&(r+=" "+o);else""!==r&&!ko(o)&&(e+=xv(s,r),r=""),i=o,s=s||!ko(i);t++}return""!==r&&(e+=xv(s,r)),e}function hr(n){return Xl(()=>{const e=$x(n),t={...e,decls:n.decls,vars:n.vars,template:n.template,consts:n.consts||null,ngContentSelectors:n.ngContentSelectors,onPush:n.changeDetection===ad.OnPush,directiveDefs:null,pipeDefs:null,dependencies:e.standalone&&n.dependencies||null,getStandaloneInjector:null,signals:n.signals??!1,data:n.data||{},encapsulation:n.encapsulation||Kr.Emulated,styles:n.styles||ui,_:null,schemas:n.schemas||null,tView:null,id:""};$p(t);const i=n.dependencies;return t.directiveDefs=qp(i,!1),t.pipeDefs=qp(i,!0),t.id=function TC(n){let e=0;const t=[n.selectors,n.ngContentSelectors,n.hostVars,n.hostAttrs,n.consts,n.vars,n.decls,n.encapsulation,n.standalone,n.signals,n.exportAs,JSON.stringify(n.inputs),JSON.stringify(n.outputs),Object.getOwnPropertyNames(n.type.prototype),!!n.contentQueries,!!n.viewQuery].join("|");for(const r of t)e=Math.imul(31,e)+r.charCodeAt(0)<<0;return e+=2147483648,"c"+e}(t),t})}function Wx(n){return mi(n)||ss(n)}function Sv(n){return null!==n}function ni(n){return Xl(()=>({type:n.type,bootstrap:n.bootstrap||ui,declarations:n.declarations||ui,imports:n.imports||ui,exports:n.exports||ui,transitiveCompileScopes:null,schemas:n.schemas||null,id:n.id||null}))}function jx(n,e){if(null==n)return qs;const t={};for(const i in n)if(n.hasOwnProperty(i)){let r=n[i],s=r;Array.isArray(r)&&(s=r[1],r=r[0]),t[r]=i,e&&(e[r]=s)}return t}function St(n){return Xl(()=>{const e=$x(n);return $p(e),e})}function ps(n){return{type:n.type,name:n.name,factory:null,pure:!1!==n.pure,standalone:!0===n.standalone,onDestroy:n.type.prototype.ngOnDestroy||null}}function mi(n){return n[Mh]||null}function ss(n){return n[Lp]||null}function ms(n){return n[Vp]||null}function Xs(n,e){const t=n[Bx]||null;if(!t&&!0===e)throw new Error(`Type ${yn(n)} does not have '\u0275mod' property.`);return t}function $x(n){const e={};return{type:n.type,providersResolver:null,factory:null,hostBindings:n.hostBindings||null,hostVars:n.hostVars||0,hostAttrs:n.hostAttrs||null,contentQueries:n.contentQueries||null,declaredInputs:e,inputTransforms:null,inputConfig:n.inputs||qs,exportAs:n.exportAs||null,standalone:!0===n.standalone,signals:!0===n.signals,selectors:n.selectors||ui,viewQuery:n.viewQuery||null,features:n.features||null,setInput:null,findHostDirectiveDefs:null,hostDirectives:null,inputs:jx(n.inputs,e),outputs:jx(n.outputs)}}function $p(n){n.features?.forEach(e=>e(n))}function qp(n,e){if(!n)return null;const t=e?ms:Wx;return()=>("function"==typeof n?n():n).map(i=>t(i)).filter(Sv)}const fr=0,kt=1,Fn=2,pr=3,Oo=4,Ph=5,gs=6,cd=7,zr=8,tl=9,ud=10,Ln=11,Hc=12,qx=13,Yl=14,Hr=15,Gc=16,dd=17,ia=18,kh=19,Xp=20,Ql=21,Aa=22,Oh=23,Wc=24,di=25,Kp=1,Yp=2,nl=7,jc=9,Es=11;function mo(n){return Array.isArray(n)&&"object"==typeof n[Kp]}function Ks(n){return Array.isArray(n)&&!0===n[Kp]}function Xx(n){return 0!=(4&n.flags)}function hd(n){return n.componentOffset>-1}function Cv(n){return 1==(1&n.flags)}function No(n){return!!n.template}function Mv(n){return 0!=(512&n[Fn])}function $c(n,e){return n.hasOwnProperty(po)?n[po]:null}const qc=Symbol("SIGNAL");function m2(n,e){return(null===n||"object"!=typeof n)&&Object.is(n,e)}let mr=null,Zp=!1;function ra(n){const e=mr;return mr=n,e}const Xc={version:0,dirty:!1,producerNode:void 0,producerLastReadVersion:void 0,producerIndexOfThis:void 0,nextProducerIndex:0,liveConsumerNode:void 0,liveConsumerIndexOfThis:void 0,consumerAllowSignalWrites:!1,consumerIsAlwaysLive:!1,producerMustRecompute:()=>!1,producerRecomputeValue:()=>{},consumerMarkedDirty:()=>{}};function Jx(n){if(Zp)throw new Error("");if(null===mr)return;const e=mr.nextProducerIndex++;il(mr),e<mr.producerNode.length&&mr.producerNode[e]!==n&&pd(mr)&&Kc(mr.producerNode[e],mr.producerIndexOfThis[e]),mr.producerNode[e]!==n&&(mr.producerNode[e]=n,mr.producerIndexOfThis[e]=pd(mr)?iw(n,mr,e):0),mr.producerLastReadVersion[e]=n.version}function Gr(n){if(!pd(n)||n.dirty){if(!n.producerMustRecompute(n)&&!nw(n))return void(n.dirty=!1);n.producerRecomputeValue(n),n.dirty=!1}}function ew(n){if(void 0===n.liveConsumerNode)return;const e=Zp;Zp=!0;try{for(const t of n.liveConsumerNode)t.dirty||tw(t)}finally{Zp=e}}function Fh(){return!1!==mr?.consumerAllowSignalWrites}function tw(n){n.dirty=!0,ew(n),n.consumerMarkedDirty?.(n)}function Lh(n){return n&&(n.nextProducerIndex=0),ra(n)}function Pv(n,e){if(ra(e),n&&void 0!==n.producerNode&&void 0!==n.producerIndexOfThis&&void 0!==n.producerLastReadVersion){if(pd(n))for(let t=n.nextProducerIndex;t<n.producerNode.length;t++)Kc(n.producerNode[t],n.producerIndexOfThis[t]);for(;n.producerNode.length>n.nextProducerIndex;)n.producerNode.pop(),n.producerLastReadVersion.pop(),n.producerIndexOfThis.pop()}}function nw(n){il(n);for(let e=0;e<n.producerNode.length;e++){const t=n.producerNode[e],i=n.producerLastReadVersion[e];if(i!==t.version||(Gr(t),i!==t.version))return!0}return!1}function kv(n){if(il(n),pd(n))for(let e=0;e<n.producerNode.length;e++)Kc(n.producerNode[e],n.producerIndexOfThis[e]);n.producerNode.length=n.producerLastReadVersion.length=n.producerIndexOfThis.length=0,n.liveConsumerNode&&(n.liveConsumerNode.length=n.liveConsumerIndexOfThis.length=0)}function iw(n,e,t){if(Vh(n),il(n),0===n.liveConsumerNode.length)for(let i=0;i<n.producerNode.length;i++)n.producerIndexOfThis[i]=iw(n.producerNode[i],n,i);return n.liveConsumerIndexOfThis.push(t),n.liveConsumerNode.push(e)-1}function Kc(n,e){if(Vh(n),il(n),1===n.liveConsumerNode.length)for(let i=0;i<n.producerNode.length;i++)Kc(n.producerNode[i],n.producerIndexOfThis[i]);const t=n.liveConsumerNode.length-1;if(n.liveConsumerNode[e]=n.liveConsumerNode[t],n.liveConsumerIndexOfThis[e]=n.liveConsumerIndexOfThis[t],n.liveConsumerNode.length--,n.liveConsumerIndexOfThis.length--,e<n.liveConsumerNode.length){const i=n.liveConsumerIndexOfThis[e],r=n.liveConsumerNode[e];il(r),r.producerIndexOfThis[i]=e}}function pd(n){return n.consumerIsAlwaysLive||(n?.liveConsumerNode?.length??0)>0}function il(n){n.producerNode??=[],n.producerIndexOfThis??=[],n.producerLastReadVersion??=[]}function Vh(n){n.liveConsumerNode??=[],n.liveConsumerIndexOfThis??=[]}let Fv=function Nv(){throw new Error};function Lv(){Fv()}let sw=null;function Il(n,e){const t=Object.create(DC);function i(){return Jx(t),t.value}return t.value=n,e?.equal&&(t.equal=e.equal),i.set=aw,i.update=RC,i.mutate=Jp,i.asReadonly=PC,i[qc]=t,i}const DC=(()=>({...Xc,equal:m2,readonlyFn:void 0}))();function ow(n){n.version++,ew(n),sw?.()}function aw(n){const e=this[qc];Fh()||Lv(),e.equal(e.value,n)||(e.value=n,ow(e))}function RC(n){Fh()||Lv(),aw.call(this,n(this[qc].value))}function Jp(n){const e=this[qc];Fh()||Lv(),n(e.value),ow(e)}function PC(){const n=this[qc];if(void 0===n.readonlyFn){const e=()=>this();e[qc]=n,n.readonlyFn=e}return n.readonlyFn}const em=()=>{},OC=(()=>({...Xc,consumerIsAlwaysLive:!0,consumerAllowSignalWrites:!1,consumerMarkedDirty:n=>{n.schedule(n.ref)},hasRun:!1,cleanupFn:em}))();class NC{constructor(e,t,i){this.previousValue=e,this.currentValue=t,this.firstChange=i}isFirstChange(){return this.firstChange}}function Ps(){return Vv}function Vv(n){return n.type.prototype.ngOnChanges&&(n.setInput=LC),FC}function FC(){const n=tm(this),e=n?.current;if(e){const t=n.previous;if(t===qs)n.previous=e;else for(let i in e)t[i]=e[i];n.current=null,this.ngOnChanges(e)}}function LC(n,e,t,i){const r=this.declaredInputs[t],s=tm(n)||function VC(n,e){return n[cw]=e}(n,{previous:qs,current:null}),o=s.current||(s.current={}),a=s.previous,l=a[r];o[r]=new NC(l&&l.currentValue,e,a===qs),n[i]=e}Ps.ngInherit=!0;const cw="__ngSimpleChanges__";function tm(n){return n[cw]||null}const sa=function(n,e,t){},uw="svg";function $i(n){for(;Array.isArray(n);)n=n[fr];return n}function im(n,e){return $i(e[n])}function ks(n,e){return $i(e[n.index])}function Zl(n,e){return n.data[e]}function Jl(n,e){return n[e]}function Fo(n,e){const t=e[n];return mo(t)?t:t[fr]}function Cl(n,e){return null==e?null:n[e]}function dw(n){n[dd]=0}function HC(n){1024&n[Fn]||(n[Fn]|=1024,hw(n,1))}function rm(n){1024&n[Fn]&&(n[Fn]&=-1025,hw(n,-1))}function hw(n,e){let t=n[pr];if(null===t)return;t[Ph]+=e;let i=t;for(t=t[pr];null!==t&&(1===e&&1===i[Ph]||-1===e&&0===i[Ph]);)t[Ph]+=e,i=t,t=t[pr]}const Sn={lFrame:$h(null),bindingsEnabled:!0,skipHydrationRootTNode:null};function am(){return Sn.bindingsEnabled}function ec(){return null!==Sn.skipHydrationRootTNode}function Ke(){return Sn.lFrame.lView}function Ti(){return Sn.lFrame.tView}function Ts(n){return Sn.lFrame.contextLView=n,n[zr]}function Ys(n){return Sn.lFrame.contextLView=null,n}function Ss(){let n=lm();for(;null!==n&&64===n.type;)n=n.parent;return n}function lm(){return Sn.lFrame.currentTNode}function rl(n,e){const t=Sn.lFrame;t.currentTNode=n,t.isParent=e}function Wh(){return Sn.lFrame.isParent}function Hv(){Sn.lFrame.isParent=!1}function Yc(){return Sn.lFrame.bindingIndex++}function sl(n){const e=Sn.lFrame,t=e.bindingIndex;return e.bindingIndex=e.bindingIndex+n,t}function vw(n,e){const t=Sn.lFrame;t.bindingIndex=t.bindingRootIndex=n,$v(e)}function $v(n){Sn.lFrame.currentDirectiveIndex=n}function qv(n){const e=Sn.lFrame.currentDirectiveIndex;return-1===e?null:n[e]}function yw(){return Sn.lFrame.currentQueryIndex}function jh(n){Sn.lFrame.currentQueryIndex=n}function qC(n){const e=n[kt];return 2===e.type?e.declTNode:1===e.type?n[gs]:null}function bw(n,e,t){if(t&ti.SkipSelf){let r=e,s=n;for(;!(r=r.parent,null!==r||t&ti.Host||(r=qC(s),null===r||(s=s[Yl],10&r.type))););if(null===r)return!1;e=r,n=s}const i=Sn.lFrame=xw();return i.currentTNode=e,i.lView=n,!0}function um(n){const e=xw(),t=n[kt];Sn.lFrame=e,e.currentTNode=t.firstChild,e.lView=n,e.tView=t,e.contextLView=n,e.bindingIndex=t.bindingStartIndex,e.inI18n=!1}function xw(){const n=Sn.lFrame,e=null===n?null:n.child;return null===e?$h(n):e}function $h(n){const e={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:n,child:null,inI18n:!1};return null!==n&&(n.child=e),e}function ww(){const n=Sn.lFrame;return Sn.lFrame=n.parent,n.currentTNode=null,n.lView=null,n}const Ew=ww;function Xv(){const n=ww();n.isParent=!0,n.tView=null,n.selectedIndex=-1,n.contextLView=null,n.elementDepthCount=0,n.currentDirectiveIndex=-1,n.currentNamespace=null,n.bindingRootIndex=-1,n.bindingIndex=-1,n.currentQueryIndex=0}function Qs(){return Sn.lFrame.selectedIndex}function Qc(n){Sn.lFrame.selectedIndex=n}function Tr(){const n=Sn.lFrame;return Zl(n.tView,n.selectedIndex)}function Zc(){Sn.lFrame.currentNamespace=uw}function dm(){!function QC(){Sn.lFrame.currentNamespace=null}()}let Sw=!0;function qh(){return Sw}function tc(n){Sw=n}function hm(n,e){for(let t=e.directiveStart,i=e.directiveEnd;t<i;t++){const s=n.data[t].type.prototype,{ngAfterContentInit:o,ngAfterContentChecked:a,ngAfterViewInit:l,ngAfterViewChecked:c,ngOnDestroy:u}=s;o&&(n.contentHooks??=[]).push(-t,o),a&&((n.contentHooks??=[]).push(t,a),(n.contentCheckHooks??=[]).push(t,a)),l&&(n.viewHooks??=[]).push(-t,l),c&&((n.viewHooks??=[]).push(t,c),(n.viewCheckHooks??=[]).push(t,c)),null!=u&&(n.destroyHooks??=[]).push(t,u)}}function fm(n,e,t){mm(n,e,3,t)}function pm(n,e,t,i){(3&n[Fn])===t&&mm(n,e,t,i)}function Xh(n,e){let t=n[Fn];(3&t)===e&&(t&=8191,t+=1,n[Fn]=t)}function mm(n,e,t,i){const s=i??-1,o=e.length-1;let a=0;for(let l=void 0!==i?65535&n[dd]:0;l<o;l++)if("number"==typeof e[l+1]){if(a=e[l],null!=i&&a>=i)break}else e[l]<0&&(n[dd]+=65536),(a<s||-1==s)&&(Kv(n,t,e,l),n[dd]=(4294901760&n[dd])+l+2),l++}function Aw(n,e){sa(4,n,e);const t=ra(null);try{e.call(n)}finally{ra(t),sa(5,n,e)}}function Kv(n,e,t,i){const r=t[i]<0,s=t[i+1],a=n[r?-t[i]:t[i]];r?n[Fn]>>13<n[dd]>>16&&(3&n[Fn])===e&&(n[Fn]+=8192,Aw(a,s)):Aw(a,s)}const md=-1;class gd{constructor(e,t,i){this.factory=e,this.resolving=!1,this.canSeeViewProviders=t,this.injectImpl=i}}function gm(n){return n!==md}function Kh(n){return 32767&n}function Yh(n,e){let t=function eM(n){return n>>16}(n),i=e;for(;t>0;)i=i[Yl],t--;return i}let Jv=!0;function _m(n){const e=Jv;return Jv=n,e}const Dw=255,nM=5;let iM=0;const Ns={};function vm(n,e){const t=Rw(n,e);if(-1!==t)return t;const i=e[kt];i.firstCreatePass&&(n.injectorIndex=e.length,Qh(i.data,n),Qh(e,null),Qh(i.blueprint,null));const r=_d(n,e),s=n.injectorIndex;if(gm(r)){const o=Kh(r),a=Yh(r,e),l=a[kt].data;for(let c=0;c<8;c++)e[s+c]=a[o+c]|l[o+c]}return e[s+8]=r,s}function Qh(n,e){n.push(0,0,0,0,0,0,0,0,e)}function Rw(n,e){return-1===n.injectorIndex||n.parent&&n.parent.injectorIndex===n.injectorIndex||null===e[n.injectorIndex+8]?-1:n.injectorIndex}function _d(n,e){if(n.parent&&-1!==n.parent.injectorIndex)return n.parent.injectorIndex;let t=0,i=null,r=e;for(;null!==r;){if(i=Zh(r),null===i)return md;if(t++,r=r[Yl],-1!==i.injectorIndex)return i.injectorIndex|t<<16}return md}function ey(n,e,t){!function rM(n,e,t){let i;"string"==typeof t?i=t.charCodeAt(0)||0:t.hasOwnProperty(Dh)&&(i=t[Dh]),null==i&&(i=t[Dh]=iM++);const r=i&Dw;e.data[n+(r>>nM)]|=1<<r}(n,e,t)}function ym(n,e,t){if(t&ti.Optional||void 0!==n)return n;Gn()}function Pw(n,e,t,i){if(t&ti.Optional&&void 0===i&&(i=null),!(t&(ti.Self|ti.Host))){const r=n[tl],s=fo(void 0);try{return r?r.get(e,i,t&ti.Optional):kp(e,i,t&ti.Optional)}finally{fo(s)}}return ym(i,0,t)}function kw(n,e,t,i=ti.Default,r){if(null!==n){if(2048&e[Fn]&&!(i&ti.Self)){const o=function cM(n,e,t,i,r){let s=n,o=e;for(;null!==s&&null!==o&&2048&o[Fn]&&!(512&o[Fn]);){const a=bm(s,o,t,i|ti.Self,Ns);if(a!==Ns)return a;let l=s.parent;if(!l){const c=o[Xp];if(c){const u=c.get(t,Ns,i);if(u!==Ns)return u}l=Zh(o),o=o[Yl]}s=l}return r}(n,e,t,i,Ns);if(o!==Ns)return o}const s=bm(n,e,t,i,Ns);if(s!==Ns)return s}return Pw(e,t,i,r)}function bm(n,e,t,i,r){const s=function aM(n){if("string"==typeof n)return n.charCodeAt(0)||0;const e=n.hasOwnProperty(Dh)?n[Dh]:void 0;return"number"==typeof e?e>=0?e&Dw:ny:e}(t);if("function"==typeof s){if(!bw(e,n,i))return i&ti.Host?ym(r,0,i):Pw(e,t,i,r);try{let o;if(o=s(i),null!=o||i&ti.Optional)return o;Gn()}finally{Ew()}}else if("number"==typeof s){let o=null,a=Rw(n,e),l=md,c=i&ti.Host?e[Hr][gs]:null;for((-1===a||i&ti.SkipSelf)&&(l=-1===a?_d(n,e):e[a+8],l!==md&&ty(i,!1)?(o=e[kt],a=Kh(l),e=Yh(l,e)):a=-1);-1!==a;){const u=e[kt];if(Ow(s,a,u.data)){const d=oM(a,e,t,o,i,c);if(d!==Ns)return d}l=e[a+8],l!==md&&ty(i,e[kt].data[a+8]===c)&&Ow(s,a,e)?(o=u,a=Kh(l),e=Yh(l,e)):a=-1}}return r}function oM(n,e,t,i,r,s){const o=e[kt],a=o.data[n+8],u=xm(a,o,t,null==i?hd(a)&&Jv:i!=o&&0!=(3&a.type),r&ti.Host&&s===a);return null!==u?Jc(e,o,u,a):Ns}function xm(n,e,t,i,r){const s=n.providerIndexes,o=e.data,a=1048575&s,l=n.directiveStart,u=s>>20,p=r?a+u:n.directiveEnd;for(let m=i?a:a+u;m<p;m++){const v=o[m];if(m<l&&t===v||m>=l&&v.type===t)return m}if(r){const m=o[l];if(m&&No(m)&&m.type===t)return l}return null}function Jc(n,e,t,i){let r=n[t];const s=e.data;if(function Iw(n){return n instanceof gd}(r)){const o=r;o.resolving&&function Dt(n,e){const t=e?`. Dependency path: ${e.join(" > ")} > ${n}`:"";throw new Ce(-200,`Circular dependency in DI detected for ${n}${t}`)}(function _e(n){return"function"==typeof n?n.name||n.toString():"object"==typeof n&&null!=n&&"function"==typeof n.type?n.type.name||n.type.toString():Y(n)}(s[t]));const a=_m(o.canSeeViewProviders);o.resolving=!0;const c=o.injectImpl?fo(o.injectImpl):null;bw(n,i,ti.Default);try{r=n[t]=o.factory(void 0,s,n,i),e.firstCreatePass&&t>=i.directiveStart&&function ZC(n,e,t){const{ngOnChanges:i,ngOnInit:r,ngDoCheck:s}=e.type.prototype;if(i){const o=Vv(e);(t.preOrderHooks??=[]).push(n,o),(t.preOrderCheckHooks??=[]).push(n,o)}r&&(t.preOrderHooks??=[]).push(0-n,r),s&&((t.preOrderHooks??=[]).push(n,s),(t.preOrderCheckHooks??=[]).push(n,s))}(t,s[t],e)}finally{null!==c&&fo(c),_m(a),o.resolving=!1,Ew()}}return r}function Ow(n,e,t){return!!(t[e+(n>>nM)]&1<<n)}function ty(n,e){return!(n&ti.Self||n&ti.Host&&e)}class Zs{constructor(e,t){this._tNode=e,this._lView=t}get(e,t,i){return kw(this._tNode,this._lView,e,Fp(i),t)}}function ny(){return new Zs(Ss(),Ke())}function Or(n){return Xl(()=>{const e=n.prototype.constructor,t=e[po]||iy(e),i=Object.prototype;let r=Object.getPrototypeOf(n.prototype).constructor;for(;r&&r!==i;){const s=r[po]||iy(r);if(s&&s!==t)return s;r=Object.getPrototypeOf(r)}return s=>new s})}function iy(n){return Ja(n)?()=>{const e=iy(Tn(n));return e&&e()}:$c(n)}function Zh(n){const e=n[kt],t=e.type;return 2===t?e.declTNode:1===t?n[gs]:null}function vd(n){return function sM(n,e){if("class"===e)return n.classes;if("style"===e)return n.styles;const t=n.attrs;if(t){const i=t.length;let r=0;for(;r<i;){const s=t[r];if(Bp(s))break;if(0===s)r+=2;else if("number"==typeof s)for(r++;r<i&&"string"==typeof t[r];)r++;else{if(s===e)return t[r+1];r+=2}}}return null}(Ss(),n)}const bd="__parameters__";function xd(n,e,t){return Xl(()=>{const i=function ry(n){return function(...t){if(n){const i=n(...t);for(const r in i)this[r]=i[r]}}}(e);function r(...s){if(this instanceof r)return i.apply(this,s),this;const o=new r(...s);return a.annotation=o,a;function a(l,c,u){const d=l.hasOwnProperty(bd)?l[bd]:Object.defineProperty(l,bd,{value:[]})[bd];for(;d.length<=u;)d.push(null);return(d[u]=d[u]||[]).push(o),l}}return t&&(r.prototype=Object.create(t.prototype)),r.prototype.ngMetadataName=n,r.annotationCls=r,r})}function ol(n,e){n.forEach(t=>Array.isArray(t)?ol(t,e):e(t))}function ay(n,e,t){e>=n.length?n.push(t):n.splice(e,0,t)}function wm(n,e){return e>=n.length-1?n.pop():n.splice(e,1)[0]}function ru(n,e){const t=[];for(let i=0;i<n;i++)t.push(e);return t}function Qr(n,e,t){let i=wd(n,e);return i>=0?n[1|i]=t:(i=~i,function Fw(n,e,t,i){let r=n.length;if(r==e)n.push(t,i);else if(1===r)n.push(i,n[0]),n[0]=t;else{for(r--,n.push(n[r-1],n[r]);r>e;)n[r]=n[r-2],r--;n[e]=t,n[e+1]=i}}(n,i,e,t)),i}function Em(n,e){const t=wd(n,e);if(t>=0)return n[1|t]}function wd(n,e){return function Lw(n,e,t){let i=0,r=n.length>>t;for(;r!==i;){const s=i+(r-i>>1),o=n[s<<t];if(e===o)return s<<t;o>e?r=s:i=s+1}return~(r<<t)}(n,e,1)}const nc=Sa(xd("Optional"),8),tf=Sa(xd("SkipSelf"),4);function jw(n){return 128==(128&n.flags)}var Ed=function(n){return n[n.Important=1]="Important",n[n.DashCase=2]="DashCase",n}(Ed||{});const OK=/^>|^->|<!--|-->|--!>|<!-$/g,NK=/(<|>)/g,FK="\u200b$1\u200b";const _M=new Map;let LK=0;const yM="__ngContext__";function _o(n,e){mo(e)?(n[yM]=e[kh],function UK(n){_M.set(n[kh],n)}(e)):n[yM]=e}let bM;function xM(n,e){return bM(n,e)}function yy(n){const e=n[pr];return Ks(e)?e[pr]:e}function G2(n){return j2(n[Hc])}function W2(n){return j2(n[Oo])}function j2(n){for(;null!==n&&!Ks(n);)n=n[Oo];return n}function Im(n,e,t,i,r){if(null!=i){let s,o=!1;Ks(i)?s=i:mo(i)&&(o=!0,i=i[fr]);const a=$i(i);0===n&&null!==t?null==r?K2(e,t,a):nf(e,t,a,r||null,!0):1===n&&null!==t?nf(e,t,a,r||null,!0):2===n?function Zw(n,e,t){const i=Yw(n,e);i&&function rY(n,e,t,i){n.removeChild(e,t,i)}(n,i,e,t)}(e,a,o):3===n&&e.destroyNode(a),null!=s&&function aY(n,e,t,i,r){const s=t[nl];s!==$i(t)&&Im(e,n,i,s,r);for(let a=Es;a<t.length;a++){const l=t[a];xy(l[kt],l,n,e,i,s)}}(e,n,s,t,r)}}function wM(n,e){return n.createComment(function N2(n){return n.replace(OK,e=>e.replace(NK,FK))}(e))}function Xw(n,e,t){return n.createElement(e,t)}function q2(n,e){const t=n[jc],i=t.indexOf(e);rm(e),t.splice(i,1)}function Kw(n,e){if(n.length<=Es)return;const t=Es+e,i=n[t];if(i){const r=i[Gc];null!==r&&r!==n&&q2(r,i),e>0&&(n[t-1][Oo]=i[Oo]);const s=wm(n,Es+e);!function YK(n,e){xy(n,e,e[Ln],2,null,null),e[fr]=null,e[gs]=null}(i[kt],i);const o=s[ia];null!==o&&o.detachView(s[kt]),i[pr]=null,i[Oo]=null,i[Fn]&=-129}return i}function EM(n,e){if(!(256&e[Fn])){const t=e[Ln];e[Oh]&&kv(e[Oh]),e[Wc]&&kv(e[Wc]),t.destroyNode&&xy(n,e,t,3,null,null),function JK(n){let e=n[Hc];if(!e)return TM(n[kt],n);for(;e;){let t=null;if(mo(e))t=e[Hc];else{const i=e[Es];i&&(t=i)}if(!t){for(;e&&!e[Oo]&&e!==n;)mo(e)&&TM(e[kt],e),e=e[pr];null===e&&(e=n),mo(e)&&TM(e[kt],e),t=e&&e[Oo]}e=t}}(e)}}function TM(n,e){if(!(256&e[Fn])){e[Fn]&=-129,e[Fn]|=256,function iY(n,e){let t;if(null!=n&&null!=(t=n.destroyHooks))for(let i=0;i<t.length;i+=2){const r=e[t[i]];if(!(r instanceof gd)){const s=t[i+1];if(Array.isArray(s))for(let o=0;o<s.length;o+=2){const a=r[s[o]],l=s[o+1];sa(4,a,l);try{l.call(a)}finally{sa(5,a,l)}}else{sa(4,r,s);try{s.call(r)}finally{sa(5,r,s)}}}}}(n,e),function nY(n,e){const t=n.cleanup,i=e[cd];if(null!==t)for(let s=0;s<t.length-1;s+=2)if("string"==typeof t[s]){const o=t[s+3];o>=0?i[o]():i[-o].unsubscribe(),s+=2}else t[s].call(i[t[s+1]]);null!==i&&(e[cd]=null);const r=e[Ql];if(null!==r){e[Ql]=null;for(let s=0;s<r.length;s++)(0,r[s])()}}(n,e),1===e[kt].type&&e[Ln].destroy();const t=e[Gc];if(null!==t&&Ks(e[pr])){t!==e[pr]&&q2(t,e);const i=e[ia];null!==i&&i.detachView(n)}!function BK(n){_M.delete(n[kh])}(e)}}function SM(n,e,t){return function X2(n,e,t){let i=e;for(;null!==i&&40&i.type;)i=(e=i).parent;if(null===i)return t[fr];{const{componentOffset:r}=i;if(r>-1){const{encapsulation:s}=n.data[i.directiveStart+r];if(s===Kr.None||s===Kr.Emulated)return null}return ks(i,t)}}(n,e.parent,t)}function nf(n,e,t,i,r){n.insertBefore(e,t,i,r)}function K2(n,e,t){n.appendChild(e,t)}function Y2(n,e,t,i,r){null!==i?nf(n,e,t,i,r):K2(n,e,t)}function Yw(n,e){return n.parentNode(e)}function Q2(n,e,t){return J2(n,e,t)}let AM,Jw,DM,eE,J2=function Z2(n,e,t){return 40&n.type?ks(n,t):null};function Qw(n,e,t,i){const r=SM(n,i,e),s=e[Ln],a=Q2(i.parent||e[gs],i,e);if(null!=r)if(Array.isArray(t))for(let l=0;l<t.length;l++)Y2(s,r,t[l],a,!1);else Y2(s,r,t,a,!1);void 0!==AM&&AM(s,i,e,t,r)}function by(n,e){if(null!==e){const t=e.type;if(3&t)return ks(e,n);if(4&t)return IM(-1,n[e.index]);if(8&t){const i=e.child;if(null!==i)return by(n,i);{const r=n[e.index];return Ks(r)?IM(-1,r):$i(r)}}if(32&t)return xM(e,n)()||$i(n[e.index]);{const i=tV(n,e);return null!==i?Array.isArray(i)?i[0]:by(yy(n[Hr]),i):by(n,e.next)}}return null}function tV(n,e){return null!==e?n[Hr][gs].projection[e.projection]:null}function IM(n,e){const t=Es+n+1;if(t<e.length){const i=e[t],r=i[kt].firstChild;if(null!==r)return by(i,r)}return e[nl]}function CM(n,e,t,i,r,s,o){for(;null!=t;){const a=i[t.index],l=t.type;if(o&&0===e&&(a&&_o($i(a),i),t.flags|=2),32!=(32&t.flags))if(8&l)CM(n,e,t.child,i,r,s,!1),Im(e,n,r,a,s);else if(32&l){const c=xM(t,i);let u;for(;u=c();)Im(e,n,r,u,s);Im(e,n,r,a,s)}else 16&l?iV(n,e,i,t,r,s):Im(e,n,r,a,s);t=o?t.projectionNext:t.next}}function xy(n,e,t,i,r,s){CM(t,i,n.firstChild,e,r,s,!1)}function iV(n,e,t,i,r,s){const o=t[Hr],l=o[gs].projection[i.projection];if(Array.isArray(l))for(let c=0;c<l.length;c++)Im(e,n,r,l[c],s);else{let c=l;const u=o[pr];jw(i)&&(c.flags|=128),CM(n,e,c,u,r,s,!0)}}function rV(n,e,t){""===t?n.removeAttribute(e,"class"):n.setAttribute(e,"class",t)}function sV(n,e,t){const{mergedAttrs:i,classes:r,styles:s}=t;null!==i&&Up(n,e,i),null!==r&&rV(n,e,r),null!==s&&function cY(n,e,t){n.setAttribute(e,"style",t)}(n,e,s)}function Cm(n){return function MM(){if(void 0===Jw&&(Jw=null,Yi.trustedTypes))try{Jw=Yi.trustedTypes.createPolicy("angular",{createHTML:n=>n,createScript:n=>n,createScriptURL:n=>n})}catch{}return Jw}()?.createHTML(n)||n}function Mm(){if(void 0!==DM)return DM;if(typeof document<"u")return document;throw new Ce(210,!1)}function RM(){if(void 0===eE&&(eE=null,Yi.trustedTypes))try{eE=Yi.trustedTypes.createPolicy("angular#unsafe-bypass",{createHTML:n=>n,createScript:n=>n,createScriptURL:n=>n})}catch{}return eE}function oV(n){return RM()?.createHTML(n)||n}function lV(n){return RM()?.createScriptURL(n)||n}class rf{constructor(e){this.changingThisBreaksApplicationSecurity=e}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${Tl})`}}class pY extends rf{getTypeName(){return"HTML"}}class mY extends rf{getTypeName(){return"Style"}}class gY extends rf{getTypeName(){return"Script"}}class _Y extends rf{getTypeName(){return"URL"}}class vY extends rf{getTypeName(){return"ResourceURL"}}function Ma(n){return n instanceof rf?n.changingThisBreaksApplicationSecurity:n}function ic(n,e){const t=function yY(n){return n instanceof rf&&n.getTypeName()||null}(n);if(null!=t&&t!==e){if("ResourceURL"===t&&"URL"===e)return!0;throw new Error(`Required a safe ${e}, got a ${t} (see ${Tl})`)}return t===e}class SY{constructor(e){this.inertDocumentHelper=e}getInertBodyElement(e){e="<body><remove></remove>"+e;try{const t=(new window.DOMParser).parseFromString(Cm(e),"text/html").body;return null===t?this.inertDocumentHelper.getInertBodyElement(e):(t.removeChild(t.firstChild),t)}catch{return null}}}class AY{constructor(e){this.defaultDoc=e,this.inertDocument=this.defaultDoc.implementation.createHTMLDocument("sanitization-inert")}getInertBodyElement(e){const t=this.inertDocument.createElement("template");return t.innerHTML=Cm(e),t}}const CY=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:\/?#]*(?:[\/?#]|$))/i;function tE(n){return(n=String(n)).match(CY)?n:"unsafe:"+n}function au(n){const e={};for(const t of n.split(","))e[t]=!0;return e}function wy(...n){const e={};for(const t of n)for(const i in t)t.hasOwnProperty(i)&&(e[i]=!0);return e}const uV=au("area,br,col,hr,img,wbr"),dV=au("colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr"),hV=au("rp,rt"),PM=wy(uV,wy(dV,au("address,article,aside,blockquote,caption,center,del,details,dialog,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,h6,header,hgroup,hr,ins,main,map,menu,nav,ol,pre,section,summary,table,ul")),wy(hV,au("a,abbr,acronym,audio,b,bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,picture,q,ruby,rp,rt,s,samp,small,source,span,strike,strong,sub,sup,time,track,tt,u,var,video")),wy(hV,dV)),kM=au("background,cite,href,itemtype,longdesc,poster,src,xlink:href"),fV=wy(kM,au("abbr,accesskey,align,alt,autoplay,axis,bgcolor,border,cellpadding,cellspacing,class,clear,color,cols,colspan,compact,controls,coords,datetime,default,dir,download,face,headers,height,hidden,hreflang,hspace,ismap,itemscope,itemprop,kind,label,lang,language,loop,media,muted,nohref,nowrap,open,preload,rel,rev,role,rows,rowspan,rules,scope,scrolling,shape,size,sizes,span,srclang,srcset,start,summary,tabindex,target,title,translate,type,usemap,valign,value,vspace,width"),au("aria-activedescendant,aria-atomic,aria-autocomplete,aria-busy,aria-checked,aria-colcount,aria-colindex,aria-colspan,aria-controls,aria-current,aria-describedby,aria-details,aria-disabled,aria-dropeffect,aria-errormessage,aria-expanded,aria-flowto,aria-grabbed,aria-haspopup,aria-hidden,aria-invalid,aria-keyshortcuts,aria-label,aria-labelledby,aria-level,aria-live,aria-modal,aria-multiline,aria-multiselectable,aria-orientation,aria-owns,aria-placeholder,aria-posinset,aria-pressed,aria-readonly,aria-relevant,aria-required,aria-roledescription,aria-rowcount,aria-rowindex,aria-rowspan,aria-selected,aria-setsize,aria-sort,aria-valuemax,aria-valuemin,aria-valuenow,aria-valuetext")),MY=au("script,style,template");class DY{constructor(){this.sanitizedSomething=!1,this.buf=[]}sanitizeChildren(e){let t=e.firstChild,i=!0;for(;t;)if(t.nodeType===Node.ELEMENT_NODE?i=this.startElement(t):t.nodeType===Node.TEXT_NODE?this.chars(t.nodeValue):this.sanitizedSomething=!0,i&&t.firstChild)t=t.firstChild;else for(;t;){t.nodeType===Node.ELEMENT_NODE&&this.endElement(t);let r=this.checkClobberedElement(t,t.nextSibling);if(r){t=r;break}t=this.checkClobberedElement(t,t.parentNode)}return this.buf.join("")}startElement(e){const t=e.nodeName.toLowerCase();if(!PM.hasOwnProperty(t))return this.sanitizedSomething=!0,!MY.hasOwnProperty(t);this.buf.push("<"),this.buf.push(t);const i=e.attributes;for(let r=0;r<i.length;r++){const s=i.item(r),o=s.name,a=o.toLowerCase();if(!fV.hasOwnProperty(a)){this.sanitizedSomething=!0;continue}let l=s.value;kM[a]&&(l=tE(l)),this.buf.push(" ",o,'="',pV(l),'"')}return this.buf.push(">"),!0}endElement(e){const t=e.nodeName.toLowerCase();PM.hasOwnProperty(t)&&!uV.hasOwnProperty(t)&&(this.buf.push("</"),this.buf.push(t),this.buf.push(">"))}chars(e){this.buf.push(pV(e))}checkClobberedElement(e,t){if(t&&(e.compareDocumentPosition(t)&Node.DOCUMENT_POSITION_CONTAINED_BY)===Node.DOCUMENT_POSITION_CONTAINED_BY)throw new Error(`Failed to sanitize html because the element is clobbered: ${e.outerHTML}`);return t}}const RY=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,PY=/([^\#-~ |!])/g;function pV(n){return n.replace(/&/g,"&amp;").replace(RY,function(e){return"&#"+(1024*(e.charCodeAt(0)-55296)+(e.charCodeAt(1)-56320)+65536)+";"}).replace(PY,function(e){return"&#"+e.charCodeAt(0)+";"}).replace(/</g,"&lt;").replace(/>/g,"&gt;")}let nE;function mV(n,e){let t=null;try{nE=nE||function cV(n){const e=new AY(n);return function IY(){try{return!!(new window.DOMParser).parseFromString(Cm(""),"text/html")}catch{return!1}}()?new SY(e):e}(n);let i=e?String(e):"";t=nE.getInertBodyElement(i);let r=5,s=i;do{if(0===r)throw new Error("Failed to sanitize html because the input is unstable");r--,i=s,s=t.innerHTML,t=nE.getInertBodyElement(i)}while(i!==s);return Cm((new DY).sanitizeChildren(OM(t)||t))}finally{if(t){const i=OM(t)||t;for(;i.firstChild;)i.removeChild(i.firstChild)}}}function OM(n){return"content"in n&&function kY(n){return n.nodeType===Node.ELEMENT_NODE&&"TEMPLATE"===n.nodeName}(n)?n.content:null}var Fs=function(n){return n[n.NONE=0]="NONE",n[n.HTML=1]="HTML",n[n.STYLE=2]="STYLE",n[n.SCRIPT=3]="SCRIPT",n[n.URL=4]="URL",n[n.RESOURCE_URL=5]="RESOURCE_URL",n}(Fs||{});function iE(n){const e=Ty();return e?oV(e.sanitize(Fs.HTML,n)||""):ic(n,"HTML")?oV(Ma(n)):mV(Mm(),Y(n))}function Ey(n){const e=Ty();return e?e.sanitize(Fs.URL,n)||"":ic(n,"URL")?Ma(n):tE(Y(n))}function NM(n){const e=Ty();if(e)return lV(e.sanitize(Fs.RESOURCE_URL,n)||"");if(ic(n,"ResourceURL"))return lV(Ma(n));throw new Ce(904,!1)}function Ty(){const n=Ke();return n&&n[ud].sanitizer}const Sy=new Fe("ENVIRONMENT_INITIALIZER"),_V=new Fe("INJECTOR",-1),vV=new Fe("INJECTOR_DEF_TYPES");class FM{get(e,t=Sh){if(t===Sh){const i=new Error(`NullInjectorError: No provider for ${yn(e)}!`);throw i.name="NullInjectorError",i}return t}}function rE(n){return{\u0275providers:n}}function UY(...n){return{\u0275providers:yV(0,n),\u0275fromNgModule:!0}}function yV(n,...e){const t=[],i=new Set;let r;const s=o=>{t.push(o)};return ol(e,o=>{const a=o;sE(a,s,[],i)&&(r||=[],r.push(a))}),void 0!==r&&bV(r,s),t}function bV(n,e){for(let t=0;t<n.length;t++){const{ngModule:i,providers:r}=n[t];LM(r,s=>{e(s,i)})}}function sE(n,e,t,i){if(!(n=Tn(n)))return!1;let r=null,s=Rp(n);const o=!s&&mi(n);if(s||o){if(o&&!o.standalone)return!1;r=n}else{const l=n.ngModule;if(s=Rp(l),!s)return!1;r=l}const a=i.has(r);if(o){if(a)return!1;if(i.add(r),o.dependencies){const l="function"==typeof o.dependencies?o.dependencies():o.dependencies;for(const c of l)sE(c,e,t,i)}}else{if(!s)return!1;{if(null!=s.imports&&!a){let c;i.add(r);try{ol(s.imports,u=>{sE(u,e,t,i)&&(c||=[],c.push(u))})}finally{}void 0!==c&&bV(c,e)}if(!a){const c=$c(r)||(()=>new r);e({provide:r,useFactory:c,deps:ui},r),e({provide:vV,useValue:r,multi:!0},r),e({provide:Sy,useValue:()=>ue(r),multi:!0},r)}const l=s.providers;if(null!=l&&!a){const c=n;LM(l,u=>{e(u,c)})}}}return r!==n&&void 0!==n.providers}function LM(n,e){for(let t of n)sd(t)&&(t=t.\u0275providers),Array.isArray(t)?LM(t,e):e(t)}const BY=vn({provide:String,useValue:vn});function VM(n){return null!==n&&"object"==typeof n&&BY in n}function sf(n){return"function"==typeof n}const UM=new Fe("Set Injector scope."),oE={},HY={};let BM;function aE(){return void 0===BM&&(BM=new FM),BM}class Da{}class Dm extends Da{get destroyed(){return this._destroyed}constructor(e,t,i,r){super(),this.parent=t,this.source=i,this.scopes=r,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,HM(e,o=>this.processProvider(o)),this.records.set(_V,Rm(void 0,this)),r.has("environment")&&this.records.set(Da,Rm(void 0,this));const s=this.records.get(UM);null!=s&&"string"==typeof s.value&&this.scopes.add(s.value),this.injectorDefTypes=new Set(this.get(vV.multi,ui,ti.Self))}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{for(const t of this._ngOnDestroyHooks)t.ngOnDestroy();const e=this._onDestroyHooks;this._onDestroyHooks=[];for(const t of e)t()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear()}}onDestroy(e){return this.assertNotDestroyed(),this._onDestroyHooks.push(e),()=>this.removeOnDestroy(e)}runInContext(e){this.assertNotDestroyed();const t=ql(this),i=fo(void 0);try{return e()}finally{ql(t),fo(i)}}get(e,t=Sh,i=ti.Default){if(this.assertNotDestroyed(),e.hasOwnProperty(Rh))return e[Rh](this);i=Fp(i);const s=ql(this),o=fo(void 0);try{if(!(i&ti.SkipSelf)){let l=this.records.get(e);if(void 0===l){const c=function qY(n){return"function"==typeof n||"object"==typeof n&&n instanceof Fe}(e)&&Dp(e);l=c&&this.injectableDefInScope(c)?Rm(zM(e),oE):null,this.records.set(e,l)}if(null!=l)return this.hydrate(e,l)}return(i&ti.Self?aE():this.parent).get(e,t=i&ti.Optional&&t===Sh?null:t)}catch(a){if("NullInjectorError"===a.name){if((a[$l]=a[$l]||[]).unshift(yn(e)),s)throw a;return function wC(n,e,t,i){const r=n[$l];throw e[Ta]&&r.unshift(e[Ta]),n.message=function Ch(n,e,t,i=null){n=n&&"\n"===n.charAt(0)&&"\u0275"==n.charAt(1)?n.slice(2):n;let r=yn(e);if(Array.isArray(e))r=e.map(yn).join(" -> ");else if("object"==typeof e){let s=[];for(let o in e)if(e.hasOwnProperty(o)){let a=e[o];s.push(o+":"+("string"==typeof a?JSON.stringify(a):yn(a)))}r=`{${s.join(", ")}}`}return`${t}${i?"("+i+")":""}[${r}]: ${n.replace(fv,"\n  ")}`}("\n"+n.message,r,t,i),n.ngTokenPath=r,n[$l]=null,n}(a,e,"R3InjectorError",this.source)}throw a}finally{fo(o),ql(s)}}resolveInjectorInitializers(){const e=ql(this),t=fo(void 0);try{const r=this.get(Sy.multi,ui,ti.Self);for(const s of r)s()}finally{ql(e),fo(t)}}toString(){const e=[],t=this.records;for(const i of t.keys())e.push(yn(i));return`R3Injector[${e.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new Ce(205,!1)}processProvider(e){let t=sf(e=Tn(e))?e:Tn(e&&e.provide);const i=function WY(n){return VM(n)?Rm(void 0,n.useValue):Rm(EV(n),oE)}(e);if(sf(e)||!0!==e.multi)this.records.get(t);else{let r=this.records.get(t);r||(r=Rm(void 0,oE,!0),r.factory=()=>Ih(r.multi),this.records.set(t,r)),t=e,r.multi.push(e)}this.records.set(t,i)}hydrate(e,t){return t.value===oE&&(t.value=HY,t.value=t.factory()),"object"==typeof t.value&&t.value&&function $Y(n){return null!==n&&"object"==typeof n&&"function"==typeof n.ngOnDestroy}(t.value)&&this._ngOnDestroyHooks.add(t.value),t.value}injectableDefInScope(e){if(!e.providedIn)return!1;const t=Tn(e.providedIn);return"string"==typeof t?"any"===t||this.scopes.has(t):this.injectorDefTypes.has(t)}removeOnDestroy(e){const t=this._onDestroyHooks.indexOf(e);-1!==t&&this._onDestroyHooks.splice(t,1)}}function zM(n){const e=Dp(n),t=null!==e?e.factory:$c(n);if(null!==t)return t;if(n instanceof Fe)throw new Ce(204,!1);if(n instanceof Function)return function GY(n){const e=n.length;if(e>0)throw ru(e,"?"),new Ce(204,!1);const t=function Ox(n){return n&&(n[Eh]||n[zc])||null}(n);return null!==t?()=>t.factory(n):()=>new n}(n);throw new Ce(204,!1)}function EV(n,e,t){let i;if(sf(n)){const r=Tn(n);return $c(r)||zM(r)}if(VM(n))i=()=>Tn(n.useValue);else if(function wV(n){return!(!n||!n.useFactory)}(n))i=()=>n.useFactory(...Ih(n.deps||[]));else if(function xV(n){return!(!n||!n.useExisting)}(n))i=()=>ue(Tn(n.useExisting));else{const r=Tn(n&&(n.useClass||n.provide));if(!function jY(n){return!!n.deps}(n))return $c(r)||zM(r);i=()=>new r(...Ih(n.deps))}return i}function Rm(n,e,t=!1){return{factory:n,value:e,multi:t?[]:void 0}}function HM(n,e){for(const t of n)Array.isArray(t)?HM(t,e):t&&sd(t)?HM(t.\u0275providers,e):e(t)}const lE=new Fe("AppId",{providedIn:"root",factory:()=>XY}),XY="ng",TV=new Fe("Platform Initializer"),al=new Fe("Platform ID",{providedIn:"platform",factory:()=>"unknown"}),lu=new Fe("AnimationModuleType"),GM=new Fe("CSP nonce",{providedIn:"root",factory:()=>Mm().body?.querySelector("[ngCspNonce]")?.getAttribute("ngCspNonce")||null});let SV=(n,e,t)=>null;function QM(n,e,t=!1){return SV(n,e,t)}class rQ{}class CV{}class oQ{resolveComponentFactory(e){throw function sQ(n){const e=Error(`No component factory found for ${yn(n)}.`);return e.ngComponent=n,e}(e)}}let Om=(()=>{class n{static{this.NULL=new oQ}}return n})();function aQ(){return Nm(Ss(),Ke())}function Nm(n,e){return new Di(ks(n,e))}let Di=(()=>{class n{constructor(t){this.nativeElement=t}static{this.__NG_ELEMENT_ID__=aQ}}return n})();function lQ(n){return n instanceof Di?n.nativeElement:n}class Cy{}let rc=(()=>{class n{constructor(){this.destroyNode=null}static{this.__NG_ELEMENT_ID__=()=>function cQ(){const n=Ke(),t=Fo(Ss().index,n);return(mo(t)?t:n)[Ln]}()}}return n})(),uQ=(()=>{class n{static{this.\u0275prov=dt({token:n,providedIn:"root",factory:()=>null})}}return n})();class Td{constructor(e){this.full=e,this.major=e.split(".")[0],this.minor=e.split(".")[1],this.patch=e.split(".").slice(2).join(".")}}const DV=new Td("16.2.12"),eD={};function OV(n,e=null,t=null,i){const r=NV(n,e,t,i);return r.resolveInjectorInitializers(),r}function NV(n,e=null,t=null,i,r=new Set){const s=[t||ui,UY(n)];return i=i||("object"==typeof n?void 0:yn(n)),new Dm(s,e||aE(),i||null,r)}let Ls=(()=>{class n{static{this.THROW_IF_NOT_FOUND=Sh}static{this.NULL=new FM}static create(t,i){if(Array.isArray(t))return OV({name:""},i,t,"");{const r=t.name??"";return OV({name:r},t.parent,t.providers,r)}}static{this.\u0275prov=dt({token:n,providedIn:"any",factory:()=>ue(_V)})}static{this.__NG_ELEMENT_ID__=-1}}return n})();function nD(n){return n.ngOriginalError}class ll{constructor(){this._console=console}handleError(e){const t=this._findOriginalError(e);this._console.error("ERROR",e),t&&this._console.error("ORIGINAL ERROR",t)}_findOriginalError(e){let t=e&&nD(e);for(;t&&nD(t);)t=nD(t);return t||null}}function iD(n){return e=>{setTimeout(n,void 0,e)}}const gi=class vQ extends Q{constructor(e=!1){super(),this.__isAsync=e}emit(e){super.next(e)}subscribe(e,t,i){let r=e,s=t||(()=>null),o=i;if(e&&"object"==typeof e){const l=e;r=l.next?.bind(l),s=l.error?.bind(l),o=l.complete?.bind(l)}this.__isAsync&&(s=iD(s),r&&(r=iD(r)),o&&(o=iD(o)));const a=super.subscribe({next:r,error:s,complete:o});return e instanceof on&&e.add(a),a}};function LV(...n){}class mn{constructor({enableLongStackTrace:e=!1,shouldCoalesceEventChangeDetection:t=!1,shouldCoalesceRunChangeDetection:i=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new gi(!1),this.onMicrotaskEmpty=new gi(!1),this.onStable=new gi(!1),this.onError=new gi(!1),typeof Zone>"u")throw new Ce(908,!1);Zone.assertZonePatched();const r=this;r._nesting=0,r._outer=r._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(r._inner=r._inner.fork(new Zone.TaskTrackingZoneSpec)),e&&Zone.longStackTraceZoneSpec&&(r._inner=r._inner.fork(Zone.longStackTraceZoneSpec)),r.shouldCoalesceEventChangeDetection=!i&&t,r.shouldCoalesceRunChangeDetection=i,r.lastRequestAnimationFrameId=-1,r.nativeRequestAnimationFrame=function yQ(){const n="function"==typeof Yi.requestAnimationFrame;let e=Yi[n?"requestAnimationFrame":"setTimeout"],t=Yi[n?"cancelAnimationFrame":"clearTimeout"];if(typeof Zone<"u"&&e&&t){const i=e[Zone.__symbol__("OriginalDelegate")];i&&(e=i);const r=t[Zone.__symbol__("OriginalDelegate")];r&&(t=r)}return{nativeRequestAnimationFrame:e,nativeCancelAnimationFrame:t}}().nativeRequestAnimationFrame,function wQ(n){const e=()=>{!function xQ(n){n.isCheckStableRunning||-1!==n.lastRequestAnimationFrameId||(n.lastRequestAnimationFrameId=n.nativeRequestAnimationFrame.call(Yi,()=>{n.fakeTopEventTask||(n.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{n.lastRequestAnimationFrameId=-1,sD(n),n.isCheckStableRunning=!0,rD(n),n.isCheckStableRunning=!1},void 0,()=>{},()=>{})),n.fakeTopEventTask.invoke()}),sD(n))}(n)};n._inner=n._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(t,i,r,s,o,a)=>{if(function TQ(n){return!(!Array.isArray(n)||1!==n.length)&&!0===n[0].data?.__ignore_ng_zone__}(a))return t.invokeTask(r,s,o,a);try{return VV(n),t.invokeTask(r,s,o,a)}finally{(n.shouldCoalesceEventChangeDetection&&"eventTask"===s.type||n.shouldCoalesceRunChangeDetection)&&e(),UV(n)}},onInvoke:(t,i,r,s,o,a,l)=>{try{return VV(n),t.invoke(r,s,o,a,l)}finally{n.shouldCoalesceRunChangeDetection&&e(),UV(n)}},onHasTask:(t,i,r,s)=>{t.hasTask(r,s),i===r&&("microTask"==s.change?(n._hasPendingMicrotasks=s.microTask,sD(n),rD(n)):"macroTask"==s.change&&(n.hasPendingMacrotasks=s.macroTask))},onHandleError:(t,i,r,s)=>(t.handleError(r,s),n.runOutsideAngular(()=>n.onError.emit(s)),!1)})}(r)}static isInAngularZone(){return typeof Zone<"u"&&!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!mn.isInAngularZone())throw new Ce(909,!1)}static assertNotInAngularZone(){if(mn.isInAngularZone())throw new Ce(909,!1)}run(e,t,i){return this._inner.run(e,t,i)}runTask(e,t,i,r){const s=this._inner,o=s.scheduleEventTask("NgZoneEvent: "+r,e,bQ,LV,LV);try{return s.runTask(o,t,i)}finally{s.cancelTask(o)}}runGuarded(e,t,i){return this._inner.runGuarded(e,t,i)}runOutsideAngular(e){return this._outer.run(e)}}const bQ={};function rD(n){if(0==n._nesting&&!n.hasPendingMicrotasks&&!n.isStable)try{n._nesting++,n.onMicrotaskEmpty.emit(null)}finally{if(n._nesting--,!n.hasPendingMicrotasks)try{n.runOutsideAngular(()=>n.onStable.emit(null))}finally{n.isStable=!0}}}function sD(n){n.hasPendingMicrotasks=!!(n._hasPendingMicrotasks||(n.shouldCoalesceEventChangeDetection||n.shouldCoalesceRunChangeDetection)&&-1!==n.lastRequestAnimationFrameId)}function VV(n){n._nesting++,n.isStable&&(n.isStable=!1,n.onUnstable.emit(null))}function UV(n){n._nesting--,rD(n)}class EQ{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new gi,this.onMicrotaskEmpty=new gi,this.onStable=new gi,this.onError=new gi}run(e,t,i){return e.apply(t,i)}runGuarded(e,t,i){return e.apply(t,i)}runOutsideAngular(e){return e()}runTask(e,t,i,r){return e.apply(t,i)}}const BV=new Fe("",{providedIn:"root",factory:zV});function zV(){const n=bt(mn);let e=!0;return X(new xt(r=>{e=n.isStable&&!n.hasPendingMacrotasks&&!n.hasPendingMicrotasks,n.runOutsideAngular(()=>{r.next(e),r.complete()})}),new xt(r=>{let s;n.runOutsideAngular(()=>{s=n.onStable.subscribe(()=>{mn.assertNotInAngularZone(),queueMicrotask(()=>{!e&&!n.hasPendingMacrotasks&&!n.hasPendingMicrotasks&&(e=!0,r.next(!0))})})});const o=n.onUnstable.subscribe(()=>{mn.assertInAngularZone(),e&&(e=!1,n.runOutsideAngular(()=>{r.next(!1)}))});return()=>{s.unsubscribe(),o.unsubscribe()}}).pipe(fe()))}function HV(n){return n.ownerDocument.defaultView}function cu(n){return n instanceof Function?n():n}let oD=(()=>{class n{constructor(){this.renderDepth=0,this.handler=null}begin(){this.handler?.validateBegin(),this.renderDepth++}end(){this.renderDepth--,0===this.renderDepth&&this.handler?.execute()}ngOnDestroy(){this.handler?.destroy(),this.handler=null}static{this.\u0275prov=dt({token:n,providedIn:"root",factory:()=>new n})}}return n})();function My(n){for(;n;){n[Fn]|=64;const e=yy(n);if(Mv(n)&&!e)return n;n=e}return null}const qV=new Fe("",{providedIn:"root",factory:()=>!1});let gE=null;function QV(n,e){return n[e]??eU()}function ZV(n,e){const t=eU();t.producerNode?.length&&(n[e]=gE,t.lView=n,gE=JV())}const kQ={...Xc,consumerIsAlwaysLive:!0,consumerMarkedDirty:n=>{My(n.lView)},lView:null};function JV(){return Object.create(kQ)}function eU(){return gE??=JV(),gE}const $n={};function _t(n){tU(Ti(),Ke(),Qs()+n,!1)}function tU(n,e,t,i){if(!i)if(3==(3&e[Fn])){const s=n.preOrderCheckHooks;null!==s&&fm(e,s,t)}else{const s=n.preOrderHooks;null!==s&&pm(e,s,0,t)}Qc(t)}function J(n,e=ti.Default){const t=Ke();return null===t?ue(n,e):kw(Ss(),t,Tn(n),e)}function aD(){throw new Error("invalid")}function _E(n,e,t,i,r,s,o,a,l,c,u){const d=e.blueprint.slice();return d[fr]=r,d[Fn]=140|i,(null!==c||n&&2048&n[Fn])&&(d[Fn]|=2048),dw(d),d[pr]=d[Yl]=n,d[zr]=t,d[ud]=o||n&&n[ud],d[Ln]=a||n&&n[Ln],d[tl]=l||n&&n[tl]||null,d[gs]=s,d[kh]=function VK(){return LK++}(),d[Aa]=u,d[Xp]=c,d[Hr]=2==e.type?n[Hr]:d,d}function Vm(n,e,t,i,r){let s=n.data[e];if(null===s)s=function lD(n,e,t,i,r){const s=lm(),o=Wh(),l=n.data[e]=function zQ(n,e,t,i,r,s){let o=e?e.injectorIndex:-1,a=0;return ec()&&(a|=128),{type:t,index:i,insertBeforeIndex:null,injectorIndex:o,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:a,providerIndexes:0,value:r,attrs:s,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:e,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,o?s:s&&s.parent,t,e,i,r);return null===n.firstChild&&(n.firstChild=l),null!==s&&(o?null==s.child&&null!==l.parent&&(s.child=l):null===s.next&&(s.next=l,l.prev=s)),l}(n,e,t,i,r),function gw(){return Sn.lFrame.inI18n}()&&(s.flags|=32);else if(64&s.type){s.type=t,s.value=i,s.attrs=r;const o=function Gh(){const n=Sn.lFrame,e=n.currentTNode;return n.isParent?e:e.parent}();s.injectorIndex=null===o?-1:o.injectorIndex}return rl(s,!0),s}function Dy(n,e,t,i){if(0===t)return-1;const r=e.length;for(let s=0;s<t;s++)e.push(i),n.blueprint.push(i),n.data.push(null);return r}function nU(n,e,t,i,r){const s=QV(e,Oh),o=Qs(),a=2&i;try{Qc(-1),a&&e.length>di&&tU(n,e,di,!1),sa(a?2:0,r);const c=a?s:null,u=Lh(c);try{null!==c&&(c.dirty=!1),t(i,r)}finally{Pv(c,u)}}finally{a&&null===e[Oh]&&ZV(e,Oh),Qc(o),sa(a?3:1,r)}}function cD(n,e,t){if(Xx(e)){const i=ra(null);try{const s=e.directiveEnd;for(let o=e.directiveStart;o<s;o++){const a=n.data[o];a.contentQueries&&a.contentQueries(1,t[o],o)}}finally{ra(i)}}}function uD(n,e,t){am()&&(function XQ(n,e,t,i){const r=t.directiveStart,s=t.directiveEnd;hd(t)&&function tZ(n,e,t){const i=ks(e,n),r=iU(t);let o=16;t.signals?o=4096:t.onPush&&(o=64);const a=vE(n,_E(n,r,null,o,i,e,null,n[ud].rendererFactory.createRenderer(i,t),null,null,null));n[e.index]=a}(e,t,n.data[r+t.componentOffset]),n.firstCreatePass||vm(t,e),_o(i,e);const o=t.initialInputs;for(let a=r;a<s;a++){const l=n.data[a],c=Jc(e,n,a,t);_o(c,e),null!==o&&nZ(0,a-r,c,l,0,o),No(l)&&(Fo(t.index,e)[zr]=Jc(e,n,a,t))}}(n,e,t,ks(t,e)),64==(64&t.flags)&&lU(n,e,t))}function dD(n,e,t=ks){const i=e.localNames;if(null!==i){let r=e.index+1;for(let s=0;s<i.length;s+=2){const o=i[s+1],a=-1===o?t(e,n):n[o];n[r++]=a}}}function iU(n){const e=n.tView;return null===e||e.incompleteFirstPass?n.tView=hD(1,null,n.template,n.decls,n.vars,n.directiveDefs,n.pipeDefs,n.viewQuery,n.schemas,n.consts,n.id):e}function hD(n,e,t,i,r,s,o,a,l,c,u){const d=di+i,p=d+r,m=function NQ(n,e){const t=[];for(let i=0;i<e;i++)t.push(i<n?null:$n);return t}(d,p),v="function"==typeof c?c():c;return m[kt]={type:n,blueprint:m,template:t,queries:null,viewQuery:a,declTNode:e,data:m.slice().fill(null,d),bindingStartIndex:d,expandoStartIndex:p,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof s?s():s,pipeRegistry:"function"==typeof o?o():o,firstChild:null,schemas:l,consts:v,incompleteFirstPass:!1,ssrId:u}}let rU=n=>null;function sU(n,e,t,i){for(let r in n)if(n.hasOwnProperty(r)){t=null===t?{}:t;const s=n[r];null===i?oU(t,e,r,s):i.hasOwnProperty(r)&&oU(t,e,i[r],s)}return t}function oU(n,e,t,i){n.hasOwnProperty(t)?n[t].push(e,i):n[t]=[e,i]}function Ra(n,e,t,i,r,s,o,a){const l=ks(e,t);let u,c=e.inputs;!a&&null!=c&&(u=c[i])?(_D(n,t,u,i,r),hd(e)&&function WQ(n,e){const t=Fo(e,n);16&t[Fn]||(t[Fn]|=64)}(t,e.index)):3&e.type&&(i=function GQ(n){return"class"===n?"className":"for"===n?"htmlFor":"formaction"===n?"formAction":"innerHtml"===n?"innerHTML":"readonly"===n?"readOnly":"tabindex"===n?"tabIndex":n}(i),r=null!=o?o(r,e.value||"",i):r,s.setProperty(l,i,r))}function fD(n,e,t,i){if(am()){const r=null===i?null:{"":-1},s=function YQ(n,e){const t=n.directiveRegistry;let i=null,r=null;if(t)for(let s=0;s<t.length;s++){const o=t[s];if(Gp(e,o.selectors,!1))if(i||(i=[]),No(o))if(null!==o.findHostDirectiveDefs){const a=[];r=r||new Map,o.findHostDirectiveDefs(o,a,r),i.unshift(...a,o),pD(n,e,a.length)}else i.unshift(o),pD(n,e,0);else r=r||new Map,o.findHostDirectiveDefs?.(o,i,r),i.push(o)}return null===i?null:[i,r]}(n,t);let o,a;null===s?o=a=null:[o,a]=s,null!==o&&aU(n,e,t,o,r,a),r&&function QQ(n,e,t){if(e){const i=n.localNames=[];for(let r=0;r<e.length;r+=2){const s=t[e[r+1]];if(null==s)throw new Ce(-301,!1);i.push(e[r],s)}}}(t,i,r)}t.mergedAttrs=ld(t.mergedAttrs,t.attrs)}function aU(n,e,t,i,r,s){for(let c=0;c<i.length;c++)ey(vm(t,e),n,i[c].type);!function JQ(n,e,t){n.flags|=1,n.directiveStart=e,n.directiveEnd=e+t,n.providerIndexes=e}(t,n.data.length,i.length);for(let c=0;c<i.length;c++){const u=i[c];u.providersResolver&&u.providersResolver(u)}let o=!1,a=!1,l=Dy(n,e,i.length,null);for(let c=0;c<i.length;c++){const u=i[c];t.mergedAttrs=ld(t.mergedAttrs,u.hostAttrs),eZ(n,t,e,l,u),ZQ(l,u,r),null!==u.contentQueries&&(t.flags|=4),(null!==u.hostBindings||null!==u.hostAttrs||0!==u.hostVars)&&(t.flags|=64);const d=u.type.prototype;!o&&(d.ngOnChanges||d.ngOnInit||d.ngDoCheck)&&((n.preOrderHooks??=[]).push(t.index),o=!0),!a&&(d.ngOnChanges||d.ngDoCheck)&&((n.preOrderCheckHooks??=[]).push(t.index),a=!0),l++}!function HQ(n,e,t){const r=e.directiveEnd,s=n.data,o=e.attrs,a=[];let l=null,c=null;for(let u=e.directiveStart;u<r;u++){const d=s[u],p=t?t.get(d):null,v=p?p.outputs:null;l=sU(d.inputs,u,l,p?p.inputs:null),c=sU(d.outputs,u,c,v);const x=null===l||null===o||_v(e)?null:iZ(l,u,o);a.push(x)}null!==l&&(l.hasOwnProperty("class")&&(e.flags|=8),l.hasOwnProperty("style")&&(e.flags|=16)),e.initialInputs=a,e.inputs=l,e.outputs=c}(n,t,s)}function lU(n,e,t){const i=t.directiveStart,r=t.directiveEnd,s=t.index,o=function jv(){return Sn.lFrame.currentDirectiveIndex}();try{Qc(s);for(let a=i;a<r;a++){const l=n.data[a],c=e[a];$v(a),(null!==l.hostBindings||0!==l.hostVars||null!==l.hostAttrs)&&KQ(l,c)}}finally{Qc(-1),$v(o)}}function KQ(n,e){null!==n.hostBindings&&n.hostBindings(1,e)}function pD(n,e,t){e.componentOffset=t,(n.components??=[]).push(e.index)}function ZQ(n,e,t){if(t){if(e.exportAs)for(let i=0;i<e.exportAs.length;i++)t[e.exportAs[i]]=n;No(e)&&(t[""]=n)}}function eZ(n,e,t,i,r){n.data[i]=r;const s=r.factory||(r.factory=$c(r.type)),o=new gd(s,No(r),J);n.blueprint[i]=o,t[i]=o,function $Q(n,e,t,i,r){const s=r.hostBindings;if(s){let o=n.hostBindingOpCodes;null===o&&(o=n.hostBindingOpCodes=[]);const a=~e.index;(function qQ(n){let e=n.length;for(;e>0;){const t=n[--e];if("number"==typeof t&&t<0)return t}return 0})(o)!=a&&o.push(a),o.push(t,i,s)}}(n,e,i,Dy(n,t,r.hostVars,$n),r)}function sc(n,e,t,i,r,s){const o=ks(n,e);!function mD(n,e,t,i,r,s,o){if(null==s)n.removeAttribute(e,r,t);else{const a=null==o?Y(s):o(s,i||"",r);n.setAttribute(e,r,a,t)}}(e[Ln],o,s,n.value,t,i,r)}function nZ(n,e,t,i,r,s){const o=s[e];if(null!==o)for(let a=0;a<o.length;)cU(i,t,o[a++],o[a++],o[a++])}function cU(n,e,t,i,r){const s=ra(null);try{const o=n.inputTransforms;null!==o&&o.hasOwnProperty(i)&&(r=o[i].call(e,r)),null!==n.setInput?n.setInput(e,r,t,i):e[i]=r}finally{ra(s)}}function iZ(n,e,t){let i=null,r=0;for(;r<t.length;){const s=t[r];if(0!==s)if(5!==s){if("number"==typeof s)break;if(n.hasOwnProperty(s)){null===i&&(i=[]);const o=n[s];for(let a=0;a<o.length;a+=2)if(o[a]===e){i.push(s,o[a+1],t[r+1]);break}}r+=2}else r+=2;else r+=4}return i}function uU(n,e,t,i){return[n,!0,!1,e,null,0,i,t,null,null,null]}function dU(n,e){const t=n.contentQueries;if(null!==t)for(let i=0;i<t.length;i+=2){const s=t[i+1];if(-1!==s){const o=n.data[s];jh(t[i]),o.contentQueries(2,e[s],s)}}}function vE(n,e){return n[Hc]?n[qx][Oo]=e:n[Hc]=e,n[qx]=e,e}function gD(n,e,t){jh(0);const i=ra(null);try{e(n,t)}finally{ra(i)}}function hU(n){return n[cd]||(n[cd]=[])}function fU(n){return n.cleanup||(n.cleanup=[])}function pU(n,e,t){return(null===n||No(n))&&(t=function Bh(n){for(;Array.isArray(n);){if("object"==typeof n[Kp])return n;n=n[fr]}return null}(t[e.index])),t[Ln]}function mU(n,e){const t=n[tl],i=t?t.get(ll,null):null;i&&i.handleError(e)}function _D(n,e,t,i,r){for(let s=0;s<t.length;){const o=t[s++],a=t[s++];cU(n.data[o],e[o],i,a,r)}}function uu(n,e,t){const i=im(e,n);!function $2(n,e,t){n.setValue(e,t)}(n[Ln],i,t)}function rZ(n,e){const t=Fo(e,n),i=t[kt];!function sZ(n,e){for(let t=e.length;t<n.blueprint.length;t++)e.push(n.blueprint[t])}(i,t);const r=t[fr];null!==r&&null===t[Aa]&&(t[Aa]=QM(r,t[tl])),vD(i,t,t[zr])}function vD(n,e,t){um(e);try{const i=n.viewQuery;null!==i&&gD(1,i,t);const r=n.template;null!==r&&nU(n,e,r,1,t),n.firstCreatePass&&(n.firstCreatePass=!1),n.staticContentQueries&&dU(n,e),n.staticViewQueries&&gD(2,n.viewQuery,t);const s=n.components;null!==s&&function oZ(n,e){for(let t=0;t<e.length;t++)rZ(n,e[t])}(e,s)}catch(i){throw n.firstCreatePass&&(n.incompleteFirstPass=!0,n.firstCreatePass=!1),i}finally{e[Fn]&=-5,Xv()}}let gU=(()=>{class n{constructor(){this.all=new Set,this.queue=new Map}create(t,i,r){const s=typeof Zone>"u"?null:Zone.current,o=function kC(n,e,t){const i=Object.create(OC);t&&(i.consumerAllowSignalWrites=!0),i.fn=n,i.schedule=e;const r=o=>{i.cleanupFn=o};return i.ref={notify:()=>tw(i),run:()=>{if(i.dirty=!1,i.hasRun&&!nw(i))return;i.hasRun=!0;const o=Lh(i);try{i.cleanupFn(),i.cleanupFn=em,i.fn(r)}finally{Pv(i,o)}},cleanup:()=>i.cleanupFn()},i.ref}(t,c=>{this.all.has(c)&&this.queue.set(c,s)},r);let a;this.all.add(o),o.notify();const l=()=>{o.cleanup(),a?.(),this.all.delete(o),this.queue.delete(o)};return a=i?.onDestroy(l),{destroy:l}}flush(){if(0!==this.queue.size)for(const[t,i]of this.queue)this.queue.delete(t),i?i.run(()=>t.run()):t.run()}get isQueueEmpty(){return 0===this.queue.size}static{this.\u0275prov=dt({token:n,providedIn:"root",factory:()=>new n})}}return n})();function yE(n,e,t){let i=t?n.styles:null,r=t?n.classes:null,s=0;if(null!==e)for(let o=0;o<e.length;o++){const a=e[o];"number"==typeof a?s=a:1==s?r=ws(r,a):2==s&&(i=ws(i,a+": "+e[++o]+";"))}t?n.styles=i:n.stylesWithoutHost=i,t?n.classes=r:n.classesWithoutHost=r}function Ry(n,e,t,i,r=!1){for(;null!==t;){const s=e[t.index];null!==s&&i.push($i(s)),Ks(s)&&_U(s,i);const o=t.type;if(8&o)Ry(n,e,t.child,i);else if(32&o){const a=xM(t,e);let l;for(;l=a();)i.push(l)}else if(16&o){const a=tV(e,t);if(Array.isArray(a))i.push(...a);else{const l=yy(e[Hr]);Ry(l[kt],l,a,i,!0)}}t=r?t.projectionNext:t.next}return i}function _U(n,e){for(let t=Es;t<n.length;t++){const i=n[t],r=i[kt].firstChild;null!==r&&Ry(i[kt],i,r,e)}n[nl]!==n[fr]&&e.push(n[nl])}function bE(n,e,t,i=!0){const r=e[ud],s=r.rendererFactory,o=r.afterRenderEventManager;s.begin?.(),o?.begin();try{vU(n,e,n.template,t)}catch(l){throw i&&mU(e,l),l}finally{s.end?.(),r.effectManager?.flush(),o?.end()}}function vU(n,e,t,i){const r=e[Fn];if(256!=(256&r)){e[ud].effectManager?.flush(),um(e);try{dw(e),function mw(n){return Sn.lFrame.bindingIndex=n}(n.bindingStartIndex),null!==t&&nU(n,e,t,2,i);const o=3==(3&r);if(o){const c=n.preOrderCheckHooks;null!==c&&fm(e,c,null)}else{const c=n.preOrderHooks;null!==c&&pm(e,c,0,null),Xh(e,0)}if(function cZ(n){for(let e=G2(n);null!==e;e=W2(e)){if(!e[Yp])continue;const t=e[jc];for(let i=0;i<t.length;i++){HC(t[i])}}}(e),yU(e,2),null!==n.contentQueries&&dU(n,e),o){const c=n.contentCheckHooks;null!==c&&fm(e,c)}else{const c=n.contentHooks;null!==c&&pm(e,c,1),Xh(e,1)}!function OQ(n,e){const t=n.hostBindingOpCodes;if(null===t)return;const i=QV(e,Wc);try{for(let r=0;r<t.length;r++){const s=t[r];if(s<0)Qc(~s);else{const o=s,a=t[++r],l=t[++r];vw(a,o),i.dirty=!1;const c=Lh(i);try{l(2,e[o])}finally{Pv(i,c)}}}}finally{null===e[Wc]&&ZV(e,Wc),Qc(-1)}}(n,e);const a=n.components;null!==a&&xU(e,a,0);const l=n.viewQuery;if(null!==l&&gD(2,l,i),o){const c=n.viewCheckHooks;null!==c&&fm(e,c)}else{const c=n.viewHooks;null!==c&&pm(e,c,2),Xh(e,2)}!0===n.firstUpdatePass&&(n.firstUpdatePass=!1),e[Fn]&=-73,rm(e)}finally{Xv()}}}function yU(n,e){for(let t=G2(n);null!==t;t=W2(t))for(let i=Es;i<t.length;i++)bU(t[i],e)}function uZ(n,e,t){bU(Fo(e,n),t)}function bU(n,e){if(!function zC(n){return 128==(128&n[Fn])}(n))return;const t=n[kt],i=n[Fn];if(80&i&&0===e||1024&i||2===e)vU(t,n,t.template,n[zr]);else if(n[Ph]>0){yU(n,1);const r=t.components;null!==r&&xU(n,r,1)}}function xU(n,e,t){for(let i=0;i<e.length;i++)uZ(n,e[i],t)}class Py{get rootNodes(){const e=this._lView,t=e[kt];return Ry(t,e,t.firstChild,[])}constructor(e,t){this._lView=e,this._cdRefInjectingView=t,this._appRef=null,this._attachedToViewContainer=!1}get context(){return this._lView[zr]}set context(e){this._lView[zr]=e}get destroyed(){return 256==(256&this._lView[Fn])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const e=this._lView[pr];if(Ks(e)){const t=e[8],i=t?t.indexOf(this):-1;i>-1&&(Kw(e,i),wm(t,i))}this._attachedToViewContainer=!1}EM(this._lView[kt],this._lView)}onDestroy(e){!function sm(n,e){if(256==(256&n[Fn]))throw new Ce(911,!1);null===n[Ql]&&(n[Ql]=[]),n[Ql].push(e)}(this._lView,e)}markForCheck(){My(this._cdRefInjectingView||this._lView)}detach(){this._lView[Fn]&=-129}reattach(){this._lView[Fn]|=128}detectChanges(){bE(this._lView[kt],this._lView,this.context)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new Ce(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,function ZK(n,e){xy(n,e,e[Ln],2,null,null)}(this._lView[kt],this._lView)}attachToAppRef(e){if(this._attachedToViewContainer)throw new Ce(902,!1);this._appRef=e}}class dZ extends Py{constructor(e){super(e),this._view=e}detectChanges(){const e=this._view;bE(e[kt],e,e[zr],!1)}checkNoChanges(){}get context(){return null}}class wU extends Om{constructor(e){super(),this.ngModule=e}resolveComponentFactory(e){const t=mi(e);return new ky(t,this.ngModule)}}function EU(n){const e=[];for(let t in n)n.hasOwnProperty(t)&&e.push({propName:n[t],templateName:t});return e}class fZ{constructor(e,t){this.injector=e,this.parentInjector=t}get(e,t,i){i=Fp(i);const r=this.injector.get(e,eD,i);return r!==eD||t===eD?r:this.parentInjector.get(e,t,i)}}class ky extends CV{get inputs(){const e=this.componentDef,t=e.inputTransforms,i=EU(e.inputs);if(null!==t)for(const r of i)t.hasOwnProperty(r.propName)&&(r.transform=t[r.propName]);return i}get outputs(){return EU(this.componentDef.outputs)}constructor(e,t){super(),this.componentDef=e,this.ngModule=t,this.componentType=e.type,this.selector=function jp(n){return n.map(wv).join(",")}(e.selectors),this.ngContentSelectors=e.ngContentSelectors?e.ngContentSelectors:[],this.isBoundToModule=!!t}create(e,t,i,r){let s=(r=r||this.ngModule)instanceof Da?r:r?.injector;s&&null!==this.componentDef.getStandaloneInjector&&(s=this.componentDef.getStandaloneInjector(s)||s);const o=s?new fZ(e,s):e,a=o.get(Cy,null);if(null===a)throw new Ce(407,!1);const d={rendererFactory:a,sanitizer:o.get(uQ,null),effectManager:o.get(gU,null),afterRenderEventManager:o.get(oD,null)},p=a.createRenderer(null,this.componentDef),m=this.componentDef.selectors[0][0]||"div",v=i?function FQ(n,e,t,i){const s=i.get(qV,!1)||t===Kr.ShadowDom,o=n.selectRootElement(e,s);return function LQ(n){rU(n)}(o),o}(p,i,this.componentDef.encapsulation,o):Xw(p,m,function hZ(n){const e=n.toLowerCase();return"svg"===e?uw:"math"===e?"math":null}(m)),w=this.componentDef.signals?4608:this.componentDef.onPush?576:528;let T=null;null!==v&&(T=QM(v,o,!0));const S=hD(0,null,null,1,0,null,null,null,null,null,null),A=_E(null,S,null,w,null,null,d,p,o,null,T);let V,F;um(A);try{const P=this.componentDef;let D,I=null;P.findHostDirectiveDefs?(D=[],I=new Map,P.findHostDirectiveDefs(P,D,I),D.push(P)):D=[P];const M=function mZ(n,e){const t=n[kt],i=di;return n[i]=e,Vm(t,i,2,"#host",null)}(A,v),O=function gZ(n,e,t,i,r,s,o){const a=r[kt];!function _Z(n,e,t,i){for(const r of n)e.mergedAttrs=ld(e.mergedAttrs,r.hostAttrs);null!==e.mergedAttrs&&(yE(e,e.mergedAttrs,!0),null!==t&&sV(i,t,e))}(i,n,e,o);let l=null;null!==e&&(l=QM(e,r[tl]));const c=s.rendererFactory.createRenderer(e,t);let u=16;t.signals?u=4096:t.onPush&&(u=64);const d=_E(r,iU(t),null,u,r[n.index],n,s,c,null,null,l);return a.firstCreatePass&&pD(a,n,i.length-1),vE(r,d),r[n.index]=d}(M,v,P,D,A,d,p);F=Zl(S,di),v&&function yZ(n,e,t,i){if(i)Up(n,t,["ng-version",DV.full]);else{const{attrs:r,classes:s}=function Ev(n){const e=[],t=[];let i=1,r=2;for(;i<n.length;){let s=n[i];if("string"==typeof s)2===r?""!==s&&e.push(s,n[++i]):8===r&&t.push(s);else{if(!ko(r))break;r=s}i++}return{attrs:e,classes:t}}(e.selectors[0]);r&&Up(n,t,r),s&&s.length>0&&rV(n,t,s.join(" "))}}(p,P,v,i),void 0!==t&&function bZ(n,e,t){const i=n.projection=[];for(let r=0;r<e.length;r++){const s=t[r];i.push(null!=s?Array.from(s):null)}}(F,this.ngContentSelectors,t),V=function vZ(n,e,t,i,r,s){const o=Ss(),a=r[kt],l=ks(o,r);aU(a,r,o,t,null,i);for(let u=0;u<t.length;u++)_o(Jc(r,a,o.directiveStart+u,o),r);lU(a,r,o),l&&_o(l,r);const c=Jc(r,a,o.directiveStart+o.componentOffset,o);if(n[zr]=r[zr]=c,null!==s)for(const u of s)u(c,e);return cD(a,o,n),c}(O,P,D,I,A,[xZ]),vD(S,A,null)}finally{Xv()}return new pZ(this.componentType,V,Nm(F,A),A,F)}}class pZ extends rQ{constructor(e,t,i,r,s){super(),this.location=i,this._rootLView=r,this._tNode=s,this.previousInputValues=null,this.instance=t,this.hostView=this.changeDetectorRef=new dZ(r),this.componentType=e}setInput(e,t){const i=this._tNode.inputs;let r;if(null!==i&&(r=i[e])){if(this.previousInputValues??=new Map,this.previousInputValues.has(e)&&Object.is(this.previousInputValues.get(e),t))return;const s=this._rootLView;_D(s[kt],s,r,e,t),this.previousInputValues.set(e,t),My(Fo(this._tNode.index,s))}}get injector(){return new Zs(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(e){this.hostView.onDestroy(e)}}function xZ(){const n=Ss();hm(Ke()[kt],n)}function si(n){let e=function TU(n){return Object.getPrototypeOf(n.prototype).constructor}(n.type),t=!0;const i=[n];for(;e;){let r;if(No(n))r=e.\u0275cmp||e.\u0275dir;else{if(e.\u0275cmp)throw new Ce(903,!1);r=e.\u0275dir}if(r){if(t){i.push(r);const o=n;o.inputs=xE(n.inputs),o.inputTransforms=xE(n.inputTransforms),o.declaredInputs=xE(n.declaredInputs),o.outputs=xE(n.outputs);const a=r.hostBindings;a&&SZ(n,a);const l=r.viewQuery,c=r.contentQueries;if(l&&EZ(n,l),c&&TZ(n,c),Br(n.inputs,r.inputs),Br(n.declaredInputs,r.declaredInputs),Br(n.outputs,r.outputs),null!==r.inputTransforms&&(null===o.inputTransforms&&(o.inputTransforms={}),Br(o.inputTransforms,r.inputTransforms)),No(r)&&r.data.animation){const u=n.data;u.animation=(u.animation||[]).concat(r.data.animation)}}const s=r.features;if(s)for(let o=0;o<s.length;o++){const a=s[o];a&&a.ngInherit&&a(n),a===si&&(t=!1)}}e=Object.getPrototypeOf(e)}!function wZ(n){let e=0,t=null;for(let i=n.length-1;i>=0;i--){const r=n[i];r.hostVars=e+=r.hostVars,r.hostAttrs=ld(r.hostAttrs,t=ld(t,r.hostAttrs))}}(i)}function xE(n){return n===qs?{}:n===ui?[]:n}function EZ(n,e){const t=n.viewQuery;n.viewQuery=t?(i,r)=>{e(i,r),t(i,r)}:e}function TZ(n,e){const t=n.contentQueries;n.contentQueries=t?(i,r,s)=>{e(i,r,s),t(i,r,s)}:e}function SZ(n,e){const t=n.hostBindings;n.hostBindings=t?(i,r)=>{e(i,r),t(i,r)}:e}function wE(n){return!!yD(n)&&(Array.isArray(n)||!(n instanceof Map)&&Symbol.iterator in n)}function yD(n){return null!==n&&("function"==typeof n||"object"==typeof n)}function vo(n,e,t){return!Object.is(n[e],t)&&(n[e]=t,!0)}function af(n,e,t,i){const r=vo(n,e,t);return vo(n,e+1,i)||r}function or(n,e,t,i){const r=Ke();return vo(r,Yc(),e)&&(Ti(),sc(Tr(),r,n,e,t,i)),or}function Bm(n,e,t,i){return vo(n,Yc(),t)?e+Y(t)+i:$n}function zm(n,e,t,i,r,s){const a=af(n,function Ia(){return Sn.lFrame.bindingIndex}(),t,r);return sl(2),a?e+Y(t)+i+Y(r)+s:$n}function Yt(n,e,t,i,r,s,o,a){const l=Ke(),c=Ti(),u=n+di,d=c.firstCreatePass?function YZ(n,e,t,i,r,s,o,a,l){const c=e.consts,u=Vm(e,n,4,o||null,Cl(c,a));fD(e,t,u,Cl(c,l)),hm(e,u);const d=u.tView=hD(2,u,i,r,s,e.directiveRegistry,e.pipeRegistry,null,e.schemas,c,null);return null!==e.queries&&(e.queries.template(e,u),d.queries=e.queries.embeddedTView(u)),u}(u,c,l,e,t,i,r,s,o):c.data[u];rl(d,!1);const p=zU(c,l,d,n);qh()&&Qw(c,l,p,d),_o(p,l),vE(l,l[u]=uU(p,l,p,d)),Cv(d)&&uD(c,l,d),null!=o&&dD(l,d,a)}let zU=function HU(n,e,t,i){return tc(!0),e[Ln].createComment("")};function ul(n){return Jl(function Gv(){return Sn.lFrame.contextLView}(),di+n)}function gt(n,e,t){const i=Ke();return vo(i,Yc(),e)&&Ra(Ti(),Tr(),i,n,e,i[Ln],t,!1),gt}function SD(n,e,t,i,r){const o=r?"class":"style";_D(n,t,e.inputs[o],o,i)}function at(n,e,t,i){const r=Ke(),s=Ti(),o=di+n,a=r[Ln],l=s.firstCreatePass?function eJ(n,e,t,i,r,s){const o=e.consts,l=Vm(e,n,2,i,Cl(o,r));return fD(e,t,l,Cl(o,s)),null!==l.attrs&&yE(l,l.attrs,!1),null!==l.mergedAttrs&&yE(l,l.mergedAttrs,!0),null!==e.queries&&e.queries.elementStart(e,l),l}(o,s,r,e,t,i):s.data[o],c=GU(s,r,l,a,e,n);r[o]=c;const u=Cv(l);return rl(l,!0),sV(a,c,l),32!=(32&l.flags)&&qh()&&Qw(s,r,c,l),0===function Hh(){return Sn.lFrame.elementDepthCount}()&&_o(c,r),function WC(){Sn.lFrame.elementDepthCount++}(),u&&(uD(s,r,l),cD(s,l,r)),null!==i&&dD(r,l),at}function ct(){let n=Ss();Wh()?Hv():(n=n.parent,rl(n,!1));const e=n;(function Bv(n){return Sn.skipHydrationRootTNode===n})(e)&&function pw(){Sn.skipHydrationRootTNode=null}(),function jC(){Sn.lFrame.elementDepthCount--}();const t=Ti();return t.firstCreatePass&&(hm(t,n),Xx(n)&&t.queries.elementEnd(n)),null!=e.classesWithoutHost&&function Qv(n){return 0!=(8&n.flags)}(e)&&SD(t,e,Ke(),e.classesWithoutHost,!0),null!=e.stylesWithoutHost&&function Mw(n){return 0!=(16&n.flags)}(e)&&SD(t,e,Ke(),e.stylesWithoutHost,!1),ct}function Ri(n,e,t,i){return at(n,e,t,i),ct(),Ri}let GU=(n,e,t,i,r,s)=>(tc(!0),Xw(i,r,function Tw(){return Sn.lFrame.currentNamespace}()));function Vy(n,e,t){const i=Ke(),r=Ti(),s=n+di,o=r.firstCreatePass?function iJ(n,e,t,i,r){const s=e.consts,o=Cl(s,i),a=Vm(e,n,8,"ng-container",o);return null!==o&&yE(a,o,!0),fD(e,t,a,Cl(s,r)),null!==e.queries&&e.queries.elementStart(e,a),a}(s,r,i,e,t):r.data[s];rl(o,!0);const a=jU(r,i,o,n);return i[s]=a,qh()&&Qw(r,i,a,o),_o(a,i),Cv(o)&&(uD(r,i,o),cD(r,o,i)),null!=t&&dD(i,o),Vy}function Uy(){let n=Ss();const e=Ti();return Wh()?Hv():(n=n.parent,rl(n,!1)),e.firstCreatePass&&(hm(e,n),Xx(n)&&e.queries.elementEnd(n)),Uy}let jU=(n,e,t,i)=>(tc(!0),wM(e[Ln],""));function Dl(){return Ke()}function By(n){return!!n&&"function"==typeof n.then}function $U(n){return!!n&&"function"==typeof n.subscribe}function qn(n,e,t,i){const r=Ke(),s=Ti(),o=Ss();return function XU(n,e,t,i,r,s,o){const a=Cv(i),c=n.firstCreatePass&&fU(n),u=e[zr],d=hU(e);let p=!0;if(3&i.type||o){const x=ks(i,e),b=o?o(x):x,w=d.length,T=o?A=>o($i(A[i.index])):i.index;let S=null;if(!o&&a&&(S=function oJ(n,e,t,i){const r=n.cleanup;if(null!=r)for(let s=0;s<r.length-1;s+=2){const o=r[s];if(o===t&&r[s+1]===i){const a=e[cd],l=r[s+2];return a.length>l?a[l]:null}"string"==typeof o&&(s+=2)}return null}(n,e,r,i.index)),null!==S)(S.__ngLastListenerFn__||S).__ngNextListenerFn__=s,S.__ngLastListenerFn__=s,p=!1;else{s=YU(i,e,u,s,!1);const A=t.listen(b,r,s);d.push(s,A),c&&c.push(r,T,w,w+1)}}else s=YU(i,e,u,s,!1);const m=i.outputs;let v;if(p&&null!==m&&(v=m[r])){const x=v.length;if(x)for(let b=0;b<x;b+=2){const V=e[v[b]][v[b+1]].subscribe(s),F=d.length;d.push(s,V),c&&c.push(r,i.index,F,-(F+1))}}}(s,r,r[Ln],o,n,e,i),qn}function KU(n,e,t,i){try{return sa(6,e,t),!1!==t(i)}catch(r){return mU(n,r),!1}finally{sa(7,e,t)}}function YU(n,e,t,i,r){return function s(o){if(o===Function)return i;My(n.componentOffset>-1?Fo(n.index,e):e);let l=KU(e,t,i,o),c=s.__ngNextListenerFn__;for(;c;)l=KU(e,t,c,o)&&l,c=c.__ngNextListenerFn__;return r&&!1===l&&o.preventDefault(),l}}function pn(n=1){return function XC(n){return(Sn.lFrame.contextLView=function KC(n,e){for(;n>0;)e=e[Yl],n--;return e}(n,Sn.lFrame.contextLView))[zr]}(n)}function aJ(n,e){let t=null;const i=function Wp(n){const e=n.attrs;if(null!=e){const t=e.indexOf(5);if(!(1&t))return e[t+1]}return null}(n);for(let r=0;r<e.length;r++){const s=e[r];if("*"!==s){if(null===i?Gp(n,s,!0):bv(i,s))return r}else t=r}return t}function dl(n){const e=Ke()[Hr][gs];if(!e.projection){const i=e.projection=ru(n?n.length:1,null),r=i.slice();let s=e.child;for(;null!==s;){const o=n?aJ(s,n):0;null!==o&&(r[o]?r[o].projectionNext=s:i[o]=s,r[o]=s),s=s.next}}}function qi(n,e=0,t){const i=Ke(),r=Ti(),s=Vm(r,di+n,16,null,t||null);null===s.projection&&(s.projection=e),Hv(),(!i[Aa]||ec())&&32!=(32&s.flags)&&function oY(n,e,t){iV(e[Ln],0,e,t,SM(n,t,e),Q2(t.parent||e[gs],t,e))}(r,i,s)}function IE(n,e){return n<<17|e<<2}function Sd(n){return n>>17&32767}function ID(n){return 2|n}function lf(n){return(131068&n)>>2}function CD(n,e){return-131069&n|e<<2}function MD(n){return 1|n}function oB(n,e,t,i,r){const s=n[t+1],o=null===e;let a=i?Sd(s):lf(s),l=!1;for(;0!==a&&(!1===l||o);){const u=n[a+1];fJ(n[a],e)&&(l=!0,n[a+1]=i?MD(u):ID(u)),a=i?Sd(u):lf(u)}l&&(n[t+1]=i?ID(s):MD(s))}function fJ(n,e){return null===n||null==e||(Array.isArray(n)?n[1]:n)===e||!(!Array.isArray(n)||"string"!=typeof e)&&wd(n,e)>=0}const As={textEnd:0,key:0,keyEnd:0,value:0,valueEnd:0};function aB(n){return n.substring(As.key,As.keyEnd)}function lB(n,e){const t=As.textEnd;return t===e?-1:(e=As.keyEnd=function _J(n,e,t){for(;e<t&&n.charCodeAt(e)>32;)e++;return e}(n,As.key=e,t),Xm(n,e,t))}function Xm(n,e,t){for(;e<t&&n.charCodeAt(e)<=32;)e++;return e}function Ad(n,e,t){return Rl(n,e,t,!1),Ad}function _r(n,e){return Rl(n,e,null,!0),_r}function du(n){Pl(AJ,lc,n,!0)}function lc(n,e){for(let t=function mJ(n){return function uB(n){As.key=0,As.keyEnd=0,As.value=0,As.valueEnd=0,As.textEnd=n.length}(n),lB(n,Xm(n,0,As.textEnd))}(e);t>=0;t=lB(e,t))Qr(n,aB(e),!0)}function Rl(n,e,t,i){const r=Ke(),s=Ti(),o=sl(2);s.firstUpdatePass&&pB(s,n,o,i),e!==$n&&vo(r,o,e)&&gB(s,s.data[Qs()],r,r[Ln],n,r[o+1]=function CJ(n,e){return null==n||""===n||("string"==typeof e?n+=e:"object"==typeof n&&(n=yn(Ma(n)))),n}(e,t),i,o)}function Pl(n,e,t,i){const r=Ti(),s=sl(2);r.firstUpdatePass&&pB(r,null,s,i);const o=Ke();if(t!==$n&&vo(o,s,t)){const a=r.data[Qs()];if(vB(a,i)&&!fB(r,s)){let l=i?a.classesWithoutHost:a.stylesWithoutHost;null!==l&&(t=ws(l,t||"")),SD(r,a,o,t,i)}else!function IJ(n,e,t,i,r,s,o,a){r===$n&&(r=ui);let l=0,c=0,u=0<r.length?r[0]:null,d=0<s.length?s[0]:null;for(;null!==u||null!==d;){const p=l<r.length?r[l+1]:void 0,m=c<s.length?s[c+1]:void 0;let x,v=null;u===d?(l+=2,c+=2,p!==m&&(v=d,x=m)):null===d||null!==u&&u<d?(l+=2,v=u):(c+=2,v=d,x=m),null!==v&&gB(n,e,t,i,v,x,o,a),u=l<r.length?r[l]:null,d=c<s.length?s[c]:null}}(r,a,o,o[Ln],o[s+1],o[s+1]=function SJ(n,e,t){if(null==t||""===t)return ui;const i=[],r=Ma(t);if(Array.isArray(r))for(let s=0;s<r.length;s++)n(i,r[s],!0);else if("object"==typeof r)for(const s in r)r.hasOwnProperty(s)&&n(i,s,r[s]);else"string"==typeof r&&e(i,r);return i}(n,e,t),i,s)}}function fB(n,e){return e>=n.expandoStartIndex}function pB(n,e,t,i){const r=n.data;if(null===r[t+1]){const s=r[Qs()],o=fB(n,t);vB(s,i)&&null===e&&!o&&(e=!1),e=function xJ(n,e,t,i){const r=qv(n);let s=i?e.residualClasses:e.residualStyles;if(null===r)0===(i?e.classBindings:e.styleBindings)&&(t=zy(t=DD(null,n,e,t,i),e.attrs,i),s=null);else{const o=e.directiveStylingLast;if(-1===o||n[o]!==r)if(t=DD(r,n,e,t,i),null===s){let l=function wJ(n,e,t){const i=t?e.classBindings:e.styleBindings;if(0!==lf(i))return n[Sd(i)]}(n,e,i);void 0!==l&&Array.isArray(l)&&(l=DD(null,n,e,l[1],i),l=zy(l,e.attrs,i),function EJ(n,e,t,i){n[Sd(t?e.classBindings:e.styleBindings)]=i}(n,e,i,l))}else s=function TJ(n,e,t){let i;const r=e.directiveEnd;for(let s=1+e.directiveStylingLast;s<r;s++)i=zy(i,n[s].hostAttrs,t);return zy(i,e.attrs,t)}(n,e,i)}return void 0!==s&&(i?e.residualClasses=s:e.residualStyles=s),t}(r,s,e,i),function dJ(n,e,t,i,r,s){let o=s?e.classBindings:e.styleBindings,a=Sd(o),l=lf(o);n[i]=t;let u,c=!1;if(Array.isArray(t)?(u=t[1],(null===u||wd(t,u)>0)&&(c=!0)):u=t,r)if(0!==l){const p=Sd(n[a+1]);n[i+1]=IE(p,a),0!==p&&(n[p+1]=CD(n[p+1],i)),n[a+1]=function cJ(n,e){return 131071&n|e<<17}(n[a+1],i)}else n[i+1]=IE(a,0),0!==a&&(n[a+1]=CD(n[a+1],i)),a=i;else n[i+1]=IE(l,0),0===a?a=i:n[l+1]=CD(n[l+1],i),l=i;c&&(n[i+1]=ID(n[i+1])),oB(n,u,i,!0),oB(n,u,i,!1),function hJ(n,e,t,i,r){const s=r?n.residualClasses:n.residualStyles;null!=s&&"string"==typeof e&&wd(s,e)>=0&&(t[i+1]=MD(t[i+1]))}(e,u,n,i,s),o=IE(a,l),s?e.classBindings=o:e.styleBindings=o}(r,s,e,t,o,i)}}function DD(n,e,t,i,r){let s=null;const o=t.directiveEnd;let a=t.directiveStylingLast;for(-1===a?a=t.directiveStart:a++;a<o&&(s=e[a],i=zy(i,s.hostAttrs,r),s!==n);)a++;return null!==n&&(t.directiveStylingLast=a),i}function zy(n,e,t){const i=t?1:2;let r=-1;if(null!==e)for(let s=0;s<e.length;s++){const o=e[s];"number"==typeof o?r=o:r===i&&(Array.isArray(n)||(n=void 0===n?[]:["",n]),Qr(n,o,!!t||e[++s]))}return void 0===n?null:n}function AJ(n,e,t){const i=String(e);""!==i&&!i.includes(" ")&&Qr(n,i,t)}function gB(n,e,t,i,r,s,o,a){if(!(3&e.type))return;const l=n.data,c=l[a+1],u=function uJ(n){return 1==(1&n)}(c)?_B(l,e,t,r,lf(c),o):void 0;CE(u)||(CE(s)||function lJ(n){return 2==(2&n)}(c)&&(s=_B(l,null,t,r,a,o)),function lY(n,e,t,i,r){if(e)r?n.addClass(t,i):n.removeClass(t,i);else{let s=-1===i.indexOf("-")?void 0:Ed.DashCase;null==r?n.removeStyle(t,i,s):("string"==typeof r&&r.endsWith("!important")&&(r=r.slice(0,-10),s|=Ed.Important),n.setStyle(t,i,r,s))}}(i,o,im(Qs(),t),r,s))}function _B(n,e,t,i,r,s){const o=null===e;let a;for(;r>0;){const l=n[r],c=Array.isArray(l),u=c?l[1]:l,d=null===u;let p=t[r+1];p===$n&&(p=d?ui:void 0);let m=d?Em(p,i):u===i?p:void 0;if(c&&!CE(m)&&(m=Em(l,i)),CE(m)&&(a=m,o))return a;const v=n[r+1];r=o?Sd(v):lf(v)}if(null!==e){let l=s?e.residualClasses:e.residualStyles;null!=l&&(a=Em(l,i))}return a}function CE(n){return void 0!==n}function vB(n,e){return 0!=(n.flags&(e?8:16))}function zn(n,e=""){const t=Ke(),i=Ti(),r=n+di,s=i.firstCreatePass?Vm(i,r,1,e,null):i.data[r],o=yB(i,t,s,e,n);t[r]=o,qh()&&Qw(i,t,o,s),rl(s,!1)}let yB=(n,e,t,i,r)=>(tc(!0),function qw(n,e){return n.createText(e)}(e[Ln],i));function hu(n){return aa("",n,""),hu}function aa(n,e,t){const i=Ke(),r=Bm(i,n,e,t);return r!==$n&&uu(i,Qs(),r),aa}function RD(n,e,t,i,r){const s=Ke(),o=zm(s,n,e,t,i,r);return o!==$n&&uu(s,Qs(),o),RD}function Hy(n,e,t){const i=Ke();return vo(i,Yc(),e)&&Ra(Ti(),Tr(),i,n,e,i[Ln],t,!0),Hy}function PD(n,e,t){const i=Ke();if(vo(i,Yc(),e)){const s=Ti(),o=Tr();Ra(s,o,i,n,e,pU(qv(s.data),o,i),t,!0)}return PD}const cf=void 0;var KJ=["en",[["a","p"],["AM","PM"],cf],[["AM","PM"],cf,cf],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],cf,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],cf,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",cf,"{1} 'at' {0}",cf],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function XJ(n){const t=Math.floor(Math.abs(n)),i=n.toString().replace(/^[^.]*\.?/,"").length;return 1===t&&0===i?1:5}];let Km={};function Lo(n){const e=function YJ(n){return n.toLowerCase().replace(/_/g,"-")}(n);let t=VB(e);if(t)return t;const i=e.split("-")[0];if(t=VB(i),t)return t;if("en"===i)return KJ;throw new Ce(701,!1)}function VB(n){return n in Km||(Km[n]=Yi.ng&&Yi.ng.common&&Yi.ng.common.locales&&Yi.ng.common.locales[n]),Km[n]}var vr=function(n){return n[n.LocaleId=0]="LocaleId",n[n.DayPeriodsFormat=1]="DayPeriodsFormat",n[n.DayPeriodsStandalone=2]="DayPeriodsStandalone",n[n.DaysFormat=3]="DaysFormat",n[n.DaysStandalone=4]="DaysStandalone",n[n.MonthsFormat=5]="MonthsFormat",n[n.MonthsStandalone=6]="MonthsStandalone",n[n.Eras=7]="Eras",n[n.FirstDayOfWeek=8]="FirstDayOfWeek",n[n.WeekendRange=9]="WeekendRange",n[n.DateFormat=10]="DateFormat",n[n.TimeFormat=11]="TimeFormat",n[n.DateTimeFormat=12]="DateTimeFormat",n[n.NumberSymbols=13]="NumberSymbols",n[n.NumberFormats=14]="NumberFormats",n[n.CurrencyCode=15]="CurrencyCode",n[n.CurrencySymbol=16]="CurrencySymbol",n[n.CurrencyName=17]="CurrencyName",n[n.Currencies=18]="Currencies",n[n.Directionality=19]="Directionality",n[n.PluralCase=20]="PluralCase",n[n.ExtraData=21]="ExtraData",n}(vr||{});const Ym="en-US";let UB=Ym;function ND(n,e,t,i,r){if(n=Tn(n),Array.isArray(n))for(let s=0;s<n.length;s++)ND(n[s],e,t,i,r);else{const s=Ti(),o=Ke(),a=Ss();let l=sf(n)?n:Tn(n.provide);const c=EV(n),u=1048575&a.providerIndexes,d=a.directiveStart,p=a.providerIndexes>>20;if(sf(n)||!n.multi){const m=new gd(c,r,J),v=LD(l,e,r?u:u+p,d);-1===v?(ey(vm(a,o),s,l),FD(s,n,e.length),e.push(l),a.directiveStart++,a.directiveEnd++,r&&(a.providerIndexes+=1048576),t.push(m),o.push(m)):(t[v]=m,o[v]=m)}else{const m=LD(l,e,u+p,d),v=LD(l,e,u,u+p),b=v>=0&&t[v];if(r&&!b||!r&&!(m>=0&&t[m])){ey(vm(a,o),s,l);const w=function Xee(n,e,t,i,r){const s=new gd(n,t,J);return s.multi=[],s.index=e,s.componentProviders=0,d3(s,r,i&&!t),s}(r?qee:$ee,t.length,r,i,c);!r&&b&&(t[v].providerFactory=w),FD(s,n,e.length,0),e.push(l),a.directiveStart++,a.directiveEnd++,r&&(a.providerIndexes+=1048576),t.push(w),o.push(w)}else FD(s,n,m>-1?m:v,d3(t[r?v:m],c,!r&&i));!r&&i&&b&&t[v].componentProviders++}}}function FD(n,e,t,i){const r=sf(e),s=function zY(n){return!!n.useClass}(e);if(r||s){const l=(s?Tn(e.useClass):e).prototype.ngOnDestroy;if(l){const c=n.destroyHooks||(n.destroyHooks=[]);if(!r&&e.multi){const u=c.indexOf(t);-1===u?c.push(t,[i,l]):c[u+1].push(i,l)}else c.push(t,l)}}}function d3(n,e,t){return t&&n.componentProviders++,n.multi.push(e)-1}function LD(n,e,t,i){for(let r=t;r<i;r++)if(e[r]===n)return r;return-1}function $ee(n,e,t,i){return VD(this.multi,[])}function qee(n,e,t,i){const r=this.multi;let s;if(this.providerFactory){const o=this.providerFactory.componentProviders,a=Jc(t,t[kt],this.providerFactory.index,i);s=a.slice(0,o),VD(r,s);for(let l=o;l<a.length;l++)s.push(a[l])}else s=[],VD(r,s);return s}function VD(n,e){for(let t=0;t<n.length;t++)e.push((0,n[t])());return e}function Qi(n,e=[]){return t=>{t.providersResolver=(i,r)=>function jee(n,e,t){const i=Ti();if(i.firstCreatePass){const r=No(n);ND(t,i.data,i.blueprint,r,!0),ND(e,i.data,i.blueprint,r,!1)}}(i,r?r(n):n,e)}}class uf{}class h3{}class UD extends uf{constructor(e,t,i){super(),this._parent=t,this._bootstrapComponents=[],this.destroyCbs=[],this.componentFactoryResolver=new wU(this);const r=Xs(e);this._bootstrapComponents=cu(r.bootstrap),this._r3Injector=NV(e,t,[{provide:uf,useValue:this},{provide:Om,useValue:this.componentFactoryResolver},...i],yn(e),new Set(["environment"])),this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(e)}get injector(){return this._r3Injector}destroy(){const e=this._r3Injector;!e.destroyed&&e.destroy(),this.destroyCbs.forEach(t=>t()),this.destroyCbs=null}onDestroy(e){this.destroyCbs.push(e)}}class BD extends h3{constructor(e){super(),this.moduleType=e}create(e){return new UD(this.moduleType,e,[])}}class f3 extends uf{constructor(e){super(),this.componentFactoryResolver=new wU(this),this.instance=null;const t=new Dm([...e.providers,{provide:uf,useValue:this},{provide:Om,useValue:this.componentFactoryResolver}],e.parent||aE(),e.debugName,new Set(["environment"]));this.injector=t,e.runEnvironmentInitializers&&t.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(e){this.injector.onDestroy(e)}}function zD(n,e,t=null){return new f3({providers:n,parent:e,debugName:t,runEnvironmentInitializers:!0}).injector}let Qee=(()=>{class n{constructor(t){this._injector=t,this.cachedInjectors=new Map}getOrCreateStandaloneInjector(t){if(!t.standalone)return null;if(!this.cachedInjectors.has(t)){const i=yV(0,t.type),r=i.length>0?zD([i],this._injector,`Standalone[${t.type.name}]`):null;this.cachedInjectors.set(t,r)}return this.cachedInjectors.get(t)}ngOnDestroy(){try{for(const t of this.cachedInjectors.values())null!==t&&t.destroy()}finally{this.cachedInjectors.clear()}}static{this.\u0275prov=dt({token:n,providedIn:"environment",factory:()=>new n(ue(Da))})}}return n})();function kE(n){n.getStandaloneInjector=e=>e.get(Qee).getOrCreateStandaloneInjector(n)}function x3(n,e,t,i,r,s,o){const a=e+t;return af(n,a,r,s)?function oc(n,e,t){return n[e]=t}(n,a+2,o?i.call(o,r,s):i(r,s)):function Xy(n,e){const t=n[e];return t===$n?void 0:t}(n,a+2)}function A3(n,e,t,i){const r=n+di,s=Ke(),o=Jl(s,r);return function Ky(n,e){return n[kt].data[e].pure}(s,r)?x3(s,function Os(){const n=Sn.lFrame;let e=n.bindingRootIndex;return-1===e&&(e=n.bindingRootIndex=n.tView.bindingStartIndex),e}(),e,o.transform,t,i,o):o.transform(t,i)}function xte(){return this._results[Symbol.iterator]()}class Yy{get changes(){return this._changes||(this._changes=new gi)}constructor(e=!1){this._emitDistinctChangesOnly=e,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=null,this.length=0,this.first=void 0,this.last=void 0;const t=Yy.prototype;t[Symbol.iterator]||(t[Symbol.iterator]=xte)}get(e){return this._results[e]}map(e){return this._results.map(e)}filter(e){return this._results.filter(e)}find(e){return this._results.find(e)}reduce(e,t){return this._results.reduce(e,t)}forEach(e){this._results.forEach(e)}some(e){return this._results.some(e)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(e,t){const i=this;i.dirty=!1;const r=function gr(n){return n.flat(Number.POSITIVE_INFINITY)}(e);(this._changesDetected=!function hM(n,e,t){if(n.length!==e.length)return!1;for(let i=0;i<n.length;i++){let r=n[i],s=e[i];if(t&&(r=t(r),s=t(s)),s!==r)return!1}return!0}(i._results,r,t))&&(i._results=r,i.length=r.length,i.last=r[this.length-1],i.first=r[0])}notifyOnChanges(){this._changes&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}function Ete(n,e,t,i=!0){const r=e[kt];if(function eY(n,e,t,i){const r=Es+i,s=t.length;i>0&&(t[r-1][Oo]=e),i<s-Es?(e[Oo]=t[r],ay(t,Es+i,e)):(t.push(e),e[Oo]=null),e[pr]=t;const o=e[Gc];null!==o&&t!==o&&function tY(n,e){const t=n[jc];e[Hr]!==e[pr][pr][Hr]&&(n[Yp]=!0),null===t?n[jc]=[e]:t.push(e)}(o,e);const a=e[ia];null!==a&&a.insertView(n),e[Fn]|=128}(r,e,n,t),i){const s=IM(t,n),o=e[Ln],a=Yw(o,n[nl]);null!==a&&function QK(n,e,t,i,r,s){i[fr]=r,i[gs]=e,xy(n,i,t,1,r,s)}(r,n[gs],o,e,a,s)}}let cc=(()=>{class n{static{this.__NG_ELEMENT_ID__=Ate}}return n})();const Tte=cc,Ste=class extends Tte{constructor(e,t,i){super(),this._declarationLView=e,this._declarationTContainer=t,this.elementRef=i}get ssrId(){return this._declarationTContainer.tView?.ssrId||null}createEmbeddedView(e,t){return this.createEmbeddedViewImpl(e,t)}createEmbeddedViewImpl(e,t,i){const r=function wte(n,e,t,i){const r=e.tView,a=_E(n,r,t,4096&n[Fn]?4096:16,null,e,null,null,null,i?.injector??null,i?.hydrationInfo??null);a[Gc]=n[e.index];const c=n[ia];return null!==c&&(a[ia]=c.createEmbeddedView(r)),vD(r,a,t),a}(this._declarationLView,this._declarationTContainer,e,{injector:t,hydrationInfo:i});return new Py(r)}};function Ate(){return OE(Ss(),Ke())}function OE(n,e){return 4&n.type?new Ste(e,n,Nm(n,e)):null}let hl=(()=>{class n{static{this.__NG_ELEMENT_ID__=Pte}}return n})();function Pte(){return k3(Ss(),Ke())}const kte=hl,R3=class extends kte{constructor(e,t,i){super(),this._lContainer=e,this._hostTNode=t,this._hostLView=i}get element(){return Nm(this._hostTNode,this._hostLView)}get injector(){return new Zs(this._hostTNode,this._hostLView)}get parentInjector(){const e=_d(this._hostTNode,this._hostLView);if(gm(e)){const t=Yh(e,this._hostLView),i=Kh(e);return new Zs(t[kt].data[i+8],t)}return new Zs(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(e){const t=P3(this._lContainer);return null!==t&&t[e]||null}get length(){return this._lContainer.length-Es}createEmbeddedView(e,t,i){let r,s;"number"==typeof i?r=i:null!=i&&(r=i.index,s=i.injector);const a=e.createEmbeddedViewImpl(t||{},s,null);return this.insertImpl(a,r,false),a}createComponent(e,t,i,r,s){const o=e&&!function iu(n){return"function"==typeof n}(e);let a;if(o)a=t;else{const x=t||{};a=x.index,i=x.injector,r=x.projectableNodes,s=x.environmentInjector||x.ngModuleRef}const l=o?e:new ky(mi(e)),c=i||this.parentInjector;if(!s&&null==l.ngModule){const b=(o?c:this.parentInjector).get(Da,null);b&&(s=b)}mi(l.componentType??{});const m=l.create(c,r,null,s);return this.insertImpl(m.hostView,a,false),m}insert(e,t){return this.insertImpl(e,t,!1)}insertImpl(e,t,i){const r=e._lView;if(function Uv(n){return Ks(n[pr])}(r)){const l=this.indexOf(e);if(-1!==l)this.detach(l);else{const c=r[pr],u=new R3(c,c[gs],c[pr]);u.detach(u.indexOf(e))}}const o=this._adjustIndex(t),a=this._lContainer;return Ete(a,r,o,!i),e.attachToViewContainerRef(),ay(GD(a),o,e),e}move(e,t){return this.insert(e,t)}indexOf(e){const t=P3(this._lContainer);return null!==t?t.indexOf(e):-1}remove(e){const t=this._adjustIndex(e,-1),i=Kw(this._lContainer,t);i&&(wm(GD(this._lContainer),t),EM(i[kt],i))}detach(e){const t=this._adjustIndex(e,-1),i=Kw(this._lContainer,t);return i&&null!=wm(GD(this._lContainer),t)?new Py(i):null}_adjustIndex(e,t=0){return e??this.length+t}};function P3(n){return n[8]}function GD(n){return n[8]||(n[8]=[])}function k3(n,e){let t;const i=e[n.index];return Ks(i)?t=i:(t=uU(i,e,null,n),e[n.index]=t,vE(e,t)),O3(t,e,n,i),new R3(t,n,e)}let O3=function N3(n,e,t,i){if(n[nl])return;let r;r=8&t.type?$i(i):function Ote(n,e){const t=n[Ln],i=t.createComment(""),r=ks(e,n);return nf(t,Yw(t,r),i,function sY(n,e){return n.nextSibling(e)}(t,r),!1),i}(e,t),n[nl]=r};class WD{constructor(e){this.queryList=e,this.matches=null}clone(){return new WD(this.queryList)}setDirty(){this.queryList.setDirty()}}class jD{constructor(e=[]){this.queries=e}createEmbeddedView(e){const t=e.queries;if(null!==t){const i=null!==e.contentQueries?e.contentQueries[0]:t.length,r=[];for(let s=0;s<i;s++){const o=t.getByIndex(s);r.push(this.queries[o.indexInDeclarationView].clone())}return new jD(r)}return null}insertView(e){this.dirtyQueriesWithMatches(e)}detachView(e){this.dirtyQueriesWithMatches(e)}dirtyQueriesWithMatches(e){for(let t=0;t<this.queries.length;t++)null!==B3(e,t).matches&&this.queries[t].setDirty()}}class F3{constructor(e,t,i=null){this.predicate=e,this.flags=t,this.read=i}}class $D{constructor(e=[]){this.queries=e}elementStart(e,t){for(let i=0;i<this.queries.length;i++)this.queries[i].elementStart(e,t)}elementEnd(e){for(let t=0;t<this.queries.length;t++)this.queries[t].elementEnd(e)}embeddedTView(e){let t=null;for(let i=0;i<this.length;i++){const r=null!==t?t.length:0,s=this.getByIndex(i).embeddedTView(e,r);s&&(s.indexInDeclarationView=i,null!==t?t.push(s):t=[s])}return null!==t?new $D(t):null}template(e,t){for(let i=0;i<this.queries.length;i++)this.queries[i].template(e,t)}getByIndex(e){return this.queries[e]}get length(){return this.queries.length}track(e){this.queries.push(e)}}class qD{constructor(e,t=-1){this.metadata=e,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=t}elementStart(e,t){this.isApplyingToNode(t)&&this.matchTNode(e,t)}elementEnd(e){this._declarationNodeIndex===e.index&&(this._appliesToNextNode=!1)}template(e,t){this.elementStart(e,t)}embeddedTView(e,t){return this.isApplyingToNode(e)?(this.crossesNgTemplate=!0,this.addMatch(-e.index,t),new qD(this.metadata)):null}isApplyingToNode(e){if(this._appliesToNextNode&&1!=(1&this.metadata.flags)){const t=this._declarationNodeIndex;let i=e.parent;for(;null!==i&&8&i.type&&i.index!==t;)i=i.parent;return t===(null!==i?i.index:-1)}return this._appliesToNextNode}matchTNode(e,t){const i=this.metadata.predicate;if(Array.isArray(i))for(let r=0;r<i.length;r++){const s=i[r];this.matchTNodeWithReadOption(e,t,Lte(t,s)),this.matchTNodeWithReadOption(e,t,xm(t,e,s,!1,!1))}else i===cc?4&t.type&&this.matchTNodeWithReadOption(e,t,-1):this.matchTNodeWithReadOption(e,t,xm(t,e,i,!1,!1))}matchTNodeWithReadOption(e,t,i){if(null!==i){const r=this.metadata.read;if(null!==r)if(r===Di||r===hl||r===cc&&4&t.type)this.addMatch(t.index,-2);else{const s=xm(t,e,r,!1,!1);null!==s&&this.addMatch(t.index,s)}else this.addMatch(t.index,i)}}addMatch(e,t){null===this.matches?this.matches=[e,t]:this.matches.push(e,t)}}function Lte(n,e){const t=n.localNames;if(null!==t)for(let i=0;i<t.length;i+=2)if(t[i]===e)return t[i+1];return null}function Ute(n,e,t,i){return-1===t?function Vte(n,e){return 11&n.type?Nm(n,e):4&n.type?OE(n,e):null}(e,n):-2===t?function Bte(n,e,t){return t===Di?Nm(e,n):t===cc?OE(e,n):t===hl?k3(e,n):void 0}(n,e,i):Jc(n,n[kt],t,e)}function L3(n,e,t,i){const r=e[ia].queries[i];if(null===r.matches){const s=n.data,o=t.matches,a=[];for(let l=0;l<o.length;l+=2){const c=o[l];a.push(c<0?null:Ute(e,s[c],o[l+1],t.metadata.read))}r.matches=a}return r.matches}function XD(n,e,t,i){const r=n.queries.getByIndex(t),s=r.matches;if(null!==s){const o=L3(n,e,r,t);for(let a=0;a<s.length;a+=2){const l=s[a];if(l>0)i.push(o[a/2]);else{const c=s[a+1],u=e[-l];for(let d=Es;d<u.length;d++){const p=u[d];p[Gc]===p[pr]&&XD(p[kt],p,c,i)}if(null!==u[jc]){const d=u[jc];for(let p=0;p<d.length;p++){const m=d[p];XD(m[kt],m,c,i)}}}}}return i}function Ui(n){const e=Ke(),t=Ti(),i=yw();jh(i+1);const r=B3(t,i);if(n.dirty&&function BC(n){return 4==(4&n[Fn])}(e)===(2==(2&r.metadata.flags))){if(null===r.matches)n.reset([]);else{const s=r.crossesNgTemplate?XD(t,e,i,[]):L3(t,e,r,i);n.reset(s,lQ),n.notifyOnChanges()}return!0}return!1}function Vo(n,e,t){const i=Ti();i.firstCreatePass&&(U3(i,new F3(n,e,t),-1),2==(2&e)&&(i.staticViewQueries=!0)),V3(i,Ke(),e)}function Vs(n,e,t,i){const r=Ti();if(r.firstCreatePass){const s=Ss();U3(r,new F3(e,t,i),s.index),function Hte(n,e){const t=n.contentQueries||(n.contentQueries=[]);e!==(t.length?t[t.length-1]:-1)&&t.push(n.queries.length-1,e)}(r,n),2==(2&t)&&(r.staticContentQueries=!0)}V3(r,Ke(),t)}function Bi(){return function zte(n,e){return n[ia].queries[e].queryList}(Ke(),yw())}function V3(n,e,t){const i=new Yy(4==(4&t));(function BQ(n,e,t,i){const r=hU(e);r.push(t),n.firstCreatePass&&fU(n).push(i,r.length-1)})(n,e,i,i.destroy),null===e[ia]&&(e[ia]=new jD),e[ia].queries.push(new WD(i))}function U3(n,e,t){null===n.queries&&(n.queries=new $D),n.queries.track(new qD(e,t))}function B3(n,e){return n.queries.getByIndex(e)}function Qm(n,e){return OE(n,e)}const e1=new Fe("Application Initializer");let t1=(()=>{class n{constructor(){this.initialized=!1,this.done=!1,this.donePromise=new Promise((t,i)=>{this.resolve=t,this.reject=i}),this.appInits=bt(e1,{optional:!0})??[]}runInitializers(){if(this.initialized)return;const t=[];for(const r of this.appInits){const s=r();if(By(s))t.push(s);else if($U(s)){const o=new Promise((a,l)=>{s.subscribe({complete:a,error:l})});t.push(o)}}const i=()=>{this.done=!0,this.resolve()};Promise.all(t).then(()=>{i()}).catch(r=>{this.reject(r)}),0===t.length&&i(),this.initialized=!0}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275prov=dt({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),i4=(()=>{class n{log(t){console.log(t)}warn(t){console.warn(t)}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275prov=dt({token:n,factory:n.\u0275fac,providedIn:"platform"})}}return n})();const uc=new Fe("LocaleId",{providedIn:"root",factory:()=>bt(uc,ti.Optional|ti.SkipSelf)||function cne(){return typeof $localize<"u"&&$localize.locale||Ym}()});let LE=(()=>{class n{constructor(){this.taskId=0,this.pendingTasks=new Set,this.hasPendingTasks=new Z(!1)}add(){this.hasPendingTasks.next(!0);const t=this.taskId++;return this.pendingTasks.add(t),t}remove(t){this.pendingTasks.delete(t),0===this.pendingTasks.size&&this.hasPendingTasks.next(!1)}ngOnDestroy(){this.pendingTasks.clear(),this.hasPendingTasks.next(!1)}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275prov=dt({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();class hne{constructor(e,t){this.ngModuleFactory=e,this.componentFactories=t}}let r4=(()=>{class n{compileModuleSync(t){return new BD(t)}compileModuleAsync(t){return Promise.resolve(this.compileModuleSync(t))}compileModuleAndAllComponentsSync(t){const i=this.compileModuleSync(t),s=cu(Xs(t).declarations).reduce((o,a)=>{const l=mi(a);return l&&o.push(new ky(l)),o},[]);return new hne(i,s)}compileModuleAndAllComponentsAsync(t){return Promise.resolve(this.compileModuleAndAllComponentsSync(t))}clearCache(){}clearCacheFor(t){}getModuleId(t){}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275prov=dt({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();const l4=new Fe(""),UE=new Fe("");let a1,s1=(()=>{class n{constructor(t,i,r){this._ngZone=t,this.registry=i,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,a1||(function One(n){a1=n}(r),r.addToWindow(i)),this._watchAngularEvents(),t.run(()=>{this.taskTrackingZone=typeof Zone>"u"?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{mn.assertNotInAngularZone(),queueMicrotask(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())queueMicrotask(()=>{for(;0!==this._callbacks.length;){let t=this._callbacks.pop();clearTimeout(t.timeoutId),t.doneCb(this._didWork)}this._didWork=!1});else{let t=this.getPendingTasks();this._callbacks=this._callbacks.filter(i=>!i.updateCb||!i.updateCb(t)||(clearTimeout(i.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(t=>({source:t.source,creationLocation:t.creationLocation,data:t.data})):[]}addCallback(t,i,r){let s=-1;i&&i>0&&(s=setTimeout(()=>{this._callbacks=this._callbacks.filter(o=>o.timeoutId!==s),t(this._didWork,this.getPendingTasks())},i)),this._callbacks.push({doneCb:t,timeoutId:s,updateCb:r})}whenStable(t,i,r){if(r&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(t,i,r),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}registerApplication(t){this.registry.registerApplication(t,this)}unregisterApplication(t){this.registry.unregisterApplication(t)}findProviders(t,i,r){return[]}static{this.\u0275fac=function(i){return new(i||n)(ue(mn),ue(o1),ue(UE))}}static{this.\u0275prov=dt({token:n,factory:n.\u0275fac})}}return n})(),o1=(()=>{class n{constructor(){this._applications=new Map}registerApplication(t,i){this._applications.set(t,i)}unregisterApplication(t){this._applications.delete(t)}unregisterAllApplications(){this._applications.clear()}getTestability(t){return this._applications.get(t)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(t,i=!0){return a1?.findTestabilityInTree(this,t,i)??null}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275prov=dt({token:n,factory:n.\u0275fac,providedIn:"platform"})}}return n})(),Id=null;const c4=new Fe("AllowMultipleToken"),l1=new Fe("PlatformDestroyListeners"),c1=new Fe("appBootstrapListener");class d4{constructor(e,t){this.name=e,this.token=t}}function f4(n,e,t=[]){const i=`Platform: ${e}`,r=new Fe(i);return(s=[])=>{let o=u1();if(!o||o.injector.get(c4,!1)){const a=[...t,...s,{provide:r,useValue:!0}];n?n(a):function Lne(n){if(Id&&!Id.get(c4,!1))throw new Ce(400,!1);(function u4(){!function MC(n){Fv=n}(()=>{throw new Ce(600,!1)})})(),Id=n;const e=n.get(m4);(function h4(n){n.get(TV,null)?.forEach(t=>t())})(n)}(function p4(n=[],e){return Ls.create({name:e,providers:[{provide:UM,useValue:"platform"},{provide:l1,useValue:new Set([()=>Id=null])},...n]})}(a,i))}return function Une(n){const e=u1();if(!e)throw new Ce(401,!1);return e}()}}function u1(){return Id?.get(m4)??null}let m4=(()=>{class n{constructor(t){this._injector=t,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(t,i){const r=function Bne(n="zone.js",e){return"noop"===n?new EQ:"zone.js"===n?new mn(e):n}(i?.ngZone,function g4(n){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:n?.eventCoalescing??!1,shouldCoalesceRunChangeDetection:n?.runCoalescing??!1}}({eventCoalescing:i?.ngZoneEventCoalescing,runCoalescing:i?.ngZoneRunCoalescing}));return r.run(()=>{const s=function Yee(n,e,t){return new UD(n,e,t)}(t.moduleType,this.injector,function x4(n){return[{provide:mn,useFactory:n},{provide:Sy,multi:!0,useFactory:()=>{const e=bt(Hne,{optional:!0});return()=>e.initialize()}},{provide:b4,useFactory:zne},{provide:BV,useFactory:zV}]}(()=>r)),o=s.injector.get(ll,null);return r.runOutsideAngular(()=>{const a=r.onError.subscribe({next:l=>{o.handleError(l)}});s.onDestroy(()=>{BE(this._modules,s),a.unsubscribe()})}),function _4(n,e,t){try{const i=t();return By(i)?i.catch(r=>{throw e.runOutsideAngular(()=>n.handleError(r)),r}):i}catch(i){throw e.runOutsideAngular(()=>n.handleError(i)),i}}(o,r,()=>{const a=s.injector.get(t1);return a.runInitializers(),a.donePromise.then(()=>(function BB(n){na(n,"Expected localeId to be defined"),"string"==typeof n&&(UB=n.toLowerCase().replace(/_/g,"-"))}(s.injector.get(uc,Ym)||Ym),this._moduleDoBootstrap(s),s))})})}bootstrapModule(t,i=[]){const r=v4({},i);return function Nne(n,e,t){const i=new BD(t);return Promise.resolve(i)}(0,0,t).then(s=>this.bootstrapModuleFactory(s,r))}_moduleDoBootstrap(t){const i=t.injector.get(dc);if(t._bootstrapComponents.length>0)t._bootstrapComponents.forEach(r=>i.bootstrap(r));else{if(!t.instance.ngDoBootstrap)throw new Ce(-403,!1);t.instance.ngDoBootstrap(i)}this._modules.push(t)}onDestroy(t){this._destroyListeners.push(t)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new Ce(404,!1);this._modules.slice().forEach(i=>i.destroy()),this._destroyListeners.forEach(i=>i());const t=this._injector.get(l1,null);t&&(t.forEach(i=>i()),t.clear()),this._destroyed=!0}get destroyed(){return this._destroyed}static{this.\u0275fac=function(i){return new(i||n)(ue(Ls))}}static{this.\u0275prov=dt({token:n,factory:n.\u0275fac,providedIn:"platform"})}}return n})();function v4(n,e){return Array.isArray(e)?e.reduce(v4,n):{...n,...e}}let dc=(()=>{class n{constructor(){this._bootstrapListeners=[],this._runningTick=!1,this._destroyed=!1,this._destroyListeners=[],this._views=[],this.internalErrorHandler=bt(b4),this.zoneIsStable=bt(BV),this.componentTypes=[],this.components=[],this.isStable=bt(LE).hasPendingTasks.pipe(Mt(t=>t?ne(!1):this.zoneIsStable),Zi(),fe()),this._injector=bt(Da)}get destroyed(){return this._destroyed}get injector(){return this._injector}bootstrap(t,i){const r=t instanceof CV;if(!this._injector.get(t1).done)throw!r&&function Kl(n){const e=mi(n)||ss(n)||ms(n);return null!==e&&e.standalone}(t),new Ce(405,!1);let o;o=r?t:this._injector.get(Om).resolveComponentFactory(t),this.componentTypes.push(o.componentType);const a=function Fne(n){return n.isBoundToModule}(o)?void 0:this._injector.get(uf),c=o.create(Ls.NULL,[],i||o.selector,a),u=c.location.nativeElement,d=c.injector.get(l4,null);return d?.registerApplication(u),c.onDestroy(()=>{this.detachView(c.hostView),BE(this.components,c),d?.unregisterApplication(u)}),this._loadComponent(c),c}tick(){if(this._runningTick)throw new Ce(101,!1);try{this._runningTick=!0;for(let t of this._views)t.detectChanges()}catch(t){this.internalErrorHandler(t)}finally{this._runningTick=!1}}attachView(t){const i=t;this._views.push(i),i.attachToAppRef(this)}detachView(t){const i=t;BE(this._views,i),i.detachFromAppRef()}_loadComponent(t){this.attachView(t.hostView),this.tick(),this.components.push(t);const i=this._injector.get(c1,[]);i.push(...this._bootstrapListeners),i.forEach(r=>r(t))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(t=>t()),this._views.slice().forEach(t=>t.destroy())}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(t){return this._destroyListeners.push(t),()=>BE(this._destroyListeners,t)}destroy(){if(this._destroyed)throw new Ce(406,!1);const t=this._injector;t.destroy&&!t.destroyed&&t.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275prov=dt({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function BE(n,e){const t=n.indexOf(e);t>-1&&n.splice(t,1)}const b4=new Fe("",{providedIn:"root",factory:()=>bt(ll).handleError.bind(void 0)});function zne(){const n=bt(mn),e=bt(ll);return t=>n.runOutsideAngular(()=>e.handleError(t))}let Hne=(()=>{class n{constructor(){this.zone=bt(mn),this.applicationRef=bt(dc)}initialize(){this._onMicrotaskEmptySubscription||(this._onMicrotaskEmptySubscription=this.zone.onMicrotaskEmpty.subscribe({next:()=>{this.zone.run(()=>{this.applicationRef.tick()})}}))}ngOnDestroy(){this._onMicrotaskEmptySubscription?.unsubscribe()}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275prov=dt({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();let fu=(()=>{class n{static{this.__NG_ELEMENT_ID__=Wne}}return n})();function Wne(n){return function jne(n,e,t){if(hd(n)&&!t){const i=Fo(n.index,e);return new Py(i,i)}return 47&n.type?new Py(e[Hr],e):null}(Ss(),Ke(),16==(16&n))}class I4{constructor(){}supports(e){return wE(e)}create(e){return new Yne(e)}}const Kne=(n,e)=>e;class Yne{constructor(e){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=e||Kne}forEachItem(e){let t;for(t=this._itHead;null!==t;t=t._next)e(t)}forEachOperation(e){let t=this._itHead,i=this._removalsHead,r=0,s=null;for(;t||i;){const o=!i||t&&t.currentIndex<M4(i,r,s)?t:i,a=M4(o,r,s),l=o.currentIndex;if(o===i)r--,i=i._nextRemoved;else if(t=t._next,null==o.previousIndex)r++;else{s||(s=[]);const c=a-r,u=l-r;if(c!=u){for(let p=0;p<c;p++){const m=p<s.length?s[p]:s[p]=0,v=m+p;u<=v&&v<c&&(s[p]=m+1)}s[o.previousIndex]=u-c}}a!==l&&e(o,a,l)}}forEachPreviousItem(e){let t;for(t=this._previousItHead;null!==t;t=t._nextPrevious)e(t)}forEachAddedItem(e){let t;for(t=this._additionsHead;null!==t;t=t._nextAdded)e(t)}forEachMovedItem(e){let t;for(t=this._movesHead;null!==t;t=t._nextMoved)e(t)}forEachRemovedItem(e){let t;for(t=this._removalsHead;null!==t;t=t._nextRemoved)e(t)}forEachIdentityChange(e){let t;for(t=this._identityChangesHead;null!==t;t=t._nextIdentityChange)e(t)}diff(e){if(null==e&&(e=[]),!wE(e))throw new Ce(900,!1);return this.check(e)?this:null}onDestroy(){}check(e){this._reset();let r,s,o,t=this._itHead,i=!1;if(Array.isArray(e)){this.length=e.length;for(let a=0;a<this.length;a++)s=e[a],o=this._trackByFn(a,s),null!==t&&Object.is(t.trackById,o)?(i&&(t=this._verifyReinsertion(t,s,o,a)),Object.is(t.item,s)||this._addIdentityChange(t,s)):(t=this._mismatch(t,s,o,a),i=!0),t=t._next}else r=0,function PZ(n,e){if(Array.isArray(n))for(let t=0;t<n.length;t++)e(n[t]);else{const t=n[Symbol.iterator]();let i;for(;!(i=t.next()).done;)e(i.value)}}(e,a=>{o=this._trackByFn(r,a),null!==t&&Object.is(t.trackById,o)?(i&&(t=this._verifyReinsertion(t,a,o,r)),Object.is(t.item,a)||this._addIdentityChange(t,a)):(t=this._mismatch(t,a,o,r),i=!0),t=t._next,r++}),this.length=r;return this._truncate(t),this.collection=e,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let e;for(e=this._previousItHead=this._itHead;null!==e;e=e._next)e._nextPrevious=e._next;for(e=this._additionsHead;null!==e;e=e._nextAdded)e.previousIndex=e.currentIndex;for(this._additionsHead=this._additionsTail=null,e=this._movesHead;null!==e;e=e._nextMoved)e.previousIndex=e.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(e,t,i,r){let s;return null===e?s=this._itTail:(s=e._prev,this._remove(e)),null!==(e=null===this._unlinkedRecords?null:this._unlinkedRecords.get(i,null))?(Object.is(e.item,t)||this._addIdentityChange(e,t),this._reinsertAfter(e,s,r)):null!==(e=null===this._linkedRecords?null:this._linkedRecords.get(i,r))?(Object.is(e.item,t)||this._addIdentityChange(e,t),this._moveAfter(e,s,r)):e=this._addAfter(new Qne(t,i),s,r),e}_verifyReinsertion(e,t,i,r){let s=null===this._unlinkedRecords?null:this._unlinkedRecords.get(i,null);return null!==s?e=this._reinsertAfter(s,e._prev,r):e.currentIndex!=r&&(e.currentIndex=r,this._addToMoves(e,r)),e}_truncate(e){for(;null!==e;){const t=e._next;this._addToRemovals(this._unlink(e)),e=t}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(e,t,i){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(e);const r=e._prevRemoved,s=e._nextRemoved;return null===r?this._removalsHead=s:r._nextRemoved=s,null===s?this._removalsTail=r:s._prevRemoved=r,this._insertAfter(e,t,i),this._addToMoves(e,i),e}_moveAfter(e,t,i){return this._unlink(e),this._insertAfter(e,t,i),this._addToMoves(e,i),e}_addAfter(e,t,i){return this._insertAfter(e,t,i),this._additionsTail=null===this._additionsTail?this._additionsHead=e:this._additionsTail._nextAdded=e,e}_insertAfter(e,t,i){const r=null===t?this._itHead:t._next;return e._next=r,e._prev=t,null===r?this._itTail=e:r._prev=e,null===t?this._itHead=e:t._next=e,null===this._linkedRecords&&(this._linkedRecords=new C4),this._linkedRecords.put(e),e.currentIndex=i,e}_remove(e){return this._addToRemovals(this._unlink(e))}_unlink(e){null!==this._linkedRecords&&this._linkedRecords.remove(e);const t=e._prev,i=e._next;return null===t?this._itHead=i:t._next=i,null===i?this._itTail=t:i._prev=t,e}_addToMoves(e,t){return e.previousIndex===t||(this._movesTail=null===this._movesTail?this._movesHead=e:this._movesTail._nextMoved=e),e}_addToRemovals(e){return null===this._unlinkedRecords&&(this._unlinkedRecords=new C4),this._unlinkedRecords.put(e),e.currentIndex=null,e._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=e,e._prevRemoved=null):(e._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=e),e}_addIdentityChange(e,t){return e.item=t,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=e:this._identityChangesTail._nextIdentityChange=e,e}}class Qne{constructor(e,t){this.item=e,this.trackById=t,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class Zne{constructor(){this._head=null,this._tail=null}add(e){null===this._head?(this._head=this._tail=e,e._nextDup=null,e._prevDup=null):(this._tail._nextDup=e,e._prevDup=this._tail,e._nextDup=null,this._tail=e)}get(e,t){let i;for(i=this._head;null!==i;i=i._nextDup)if((null===t||t<=i.currentIndex)&&Object.is(i.trackById,e))return i;return null}remove(e){const t=e._prevDup,i=e._nextDup;return null===t?this._head=i:t._nextDup=i,null===i?this._tail=t:i._prevDup=t,null===this._head}}class C4{constructor(){this.map=new Map}put(e){const t=e.trackById;let i=this.map.get(t);i||(i=new Zne,this.map.set(t,i)),i.add(e)}get(e,t){const r=this.map.get(e);return r?r.get(e,t):null}remove(e){const t=e.trackById;return this.map.get(t).remove(e)&&this.map.delete(t),e}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function M4(n,e,t){const i=n.previousIndex;if(null===i)return i;let r=0;return t&&i<t.length&&(r=t[i]),i+e+r}class D4{constructor(){}supports(e){return e instanceof Map||yD(e)}create(){return new Jne}}class Jne{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(e){let t;for(t=this._mapHead;null!==t;t=t._next)e(t)}forEachPreviousItem(e){let t;for(t=this._previousMapHead;null!==t;t=t._nextPrevious)e(t)}forEachChangedItem(e){let t;for(t=this._changesHead;null!==t;t=t._nextChanged)e(t)}forEachAddedItem(e){let t;for(t=this._additionsHead;null!==t;t=t._nextAdded)e(t)}forEachRemovedItem(e){let t;for(t=this._removalsHead;null!==t;t=t._nextRemoved)e(t)}diff(e){if(e){if(!(e instanceof Map||yD(e)))throw new Ce(900,!1)}else e=new Map;return this.check(e)?this:null}onDestroy(){}check(e){this._reset();let t=this._mapHead;if(this._appendAfter=null,this._forEach(e,(i,r)=>{if(t&&t.key===r)this._maybeAddToChanges(t,i),this._appendAfter=t,t=t._next;else{const s=this._getOrCreateRecordForKey(r,i);t=this._insertBeforeOrAppend(t,s)}}),t){t._prev&&(t._prev._next=null),this._removalsHead=t;for(let i=t;null!==i;i=i._nextRemoved)i===this._mapHead&&(this._mapHead=null),this._records.delete(i.key),i._nextRemoved=i._next,i.previousValue=i.currentValue,i.currentValue=null,i._prev=null,i._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(e,t){if(e){const i=e._prev;return t._next=e,t._prev=i,e._prev=t,i&&(i._next=t),e===this._mapHead&&(this._mapHead=t),this._appendAfter=e,e}return this._appendAfter?(this._appendAfter._next=t,t._prev=this._appendAfter):this._mapHead=t,this._appendAfter=t,null}_getOrCreateRecordForKey(e,t){if(this._records.has(e)){const r=this._records.get(e);this._maybeAddToChanges(r,t);const s=r._prev,o=r._next;return s&&(s._next=o),o&&(o._prev=s),r._next=null,r._prev=null,r}const i=new eie(e);return this._records.set(e,i),i.currentValue=t,this._addToAdditions(i),i}_reset(){if(this.isDirty){let e;for(this._previousMapHead=this._mapHead,e=this._previousMapHead;null!==e;e=e._next)e._nextPrevious=e._next;for(e=this._changesHead;null!==e;e=e._nextChanged)e.previousValue=e.currentValue;for(e=this._additionsHead;null!=e;e=e._nextAdded)e.previousValue=e.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(e,t){Object.is(t,e.currentValue)||(e.previousValue=e.currentValue,e.currentValue=t,this._addToChanges(e))}_addToAdditions(e){null===this._additionsHead?this._additionsHead=this._additionsTail=e:(this._additionsTail._nextAdded=e,this._additionsTail=e)}_addToChanges(e){null===this._changesHead?this._changesHead=this._changesTail=e:(this._changesTail._nextChanged=e,this._changesTail=e)}_forEach(e,t){e instanceof Map?e.forEach(t):Object.keys(e).forEach(i=>t(e[i],i))}}class eie{constructor(e){this.key=e,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function R4(){return new GE([new I4])}let GE=(()=>{class n{static{this.\u0275prov=dt({token:n,providedIn:"root",factory:R4})}constructor(t){this.factories=t}static create(t,i){if(null!=i){const r=i.factories.slice();t=t.concat(r)}return new n(t)}static extend(t){return{provide:n,useFactory:i=>n.create(t,i||R4()),deps:[[n,new tf,new nc]]}}find(t){const i=this.factories.find(r=>r.supports(t));if(null!=i)return i;throw new Ce(901,!1)}}return n})();function P4(){return new Jy([new D4])}let Jy=(()=>{class n{static{this.\u0275prov=dt({token:n,providedIn:"root",factory:P4})}constructor(t){this.factories=t}static create(t,i){if(i){const r=i.factories.slice();t=t.concat(r)}return new n(t)}static extend(t){return{provide:n,useFactory:i=>n.create(t,i||P4()),deps:[[n,new tf,new nc]]}}find(t){const i=this.factories.find(r=>r.supports(t));if(i)return i;throw new Ce(901,!1)}}return n})();const iie=f4(null,"core",[]);let rie=(()=>{class n{constructor(t){}static{this.\u0275fac=function(i){return new(i||n)(ue(dc))}}static{this.\u0275mod=ni({type:n})}static{this.\u0275inj=jn({})}}return n})();let g1=null;function Cd(){return g1}class vie{}const _i=new Fe("DocumentToken");let _1=(()=>{class n{historyGo(t){throw new Error("Not implemented")}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275prov=dt({token:n,factory:function(){return bt(bie)},providedIn:"platform"})}}return n})();const yie=new Fe("Location Initialized");let bie=(()=>{class n extends _1{constructor(){super(),this._doc=bt(_i),this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return Cd().getBaseHref(this._doc)}onPopState(t){const i=Cd().getGlobalEventTarget(this._doc,"window");return i.addEventListener("popstate",t,!1),()=>i.removeEventListener("popstate",t)}onHashChange(t){const i=Cd().getGlobalEventTarget(this._doc,"window");return i.addEventListener("hashchange",t,!1),()=>i.removeEventListener("hashchange",t)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(t){this._location.pathname=t}pushState(t,i,r){this._history.pushState(t,i,r)}replaceState(t,i,r){this._history.replaceState(t,i,r)}forward(){this._history.forward()}back(){this._history.back()}historyGo(t=0){this._history.go(t)}getState(){return this._history.state}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275prov=dt({token:n,factory:function(){return new n},providedIn:"platform"})}}return n})();function v1(n,e){if(0==n.length)return e;if(0==e.length)return n;let t=0;return n.endsWith("/")&&t++,e.startsWith("/")&&t++,2==t?n+e.substring(1):1==t?n+e:n+"/"+e}function z4(n){const e=n.match(/#|\?|$/),t=e&&e.index||n.length;return n.slice(0,t-("/"===n[t-1]?1:0))+n.slice(t)}function pu(n){return n&&"?"!==n[0]?"?"+n:n}let hf=(()=>{class n{historyGo(t){throw new Error("Not implemented")}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275prov=dt({token:n,factory:function(){return bt(G4)},providedIn:"root"})}}return n})();const H4=new Fe("appBaseHref");let G4=(()=>{class n extends hf{constructor(t,i){super(),this._platformLocation=t,this._removeListenerFns=[],this._baseHref=i??this._platformLocation.getBaseHrefFromDOM()??bt(_i).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}prepareExternalUrl(t){return v1(this._baseHref,t)}path(t=!1){const i=this._platformLocation.pathname+pu(this._platformLocation.search),r=this._platformLocation.hash;return r&&t?`${i}${r}`:i}pushState(t,i,r,s){const o=this.prepareExternalUrl(r+pu(s));this._platformLocation.pushState(t,i,o)}replaceState(t,i,r,s){const o=this.prepareExternalUrl(r+pu(s));this._platformLocation.replaceState(t,i,o)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}static{this.\u0275fac=function(i){return new(i||n)(ue(_1),ue(H4,8))}}static{this.\u0275prov=dt({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),xie=(()=>{class n extends hf{constructor(t,i){super(),this._platformLocation=t,this._baseHref="",this._removeListenerFns=[],null!=i&&(this._baseHref=i)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}path(t=!1){let i=this._platformLocation.hash;return null==i&&(i="#"),i.length>0?i.substring(1):i}prepareExternalUrl(t){const i=v1(this._baseHref,t);return i.length>0?"#"+i:i}pushState(t,i,r,s){let o=this.prepareExternalUrl(r+pu(s));0==o.length&&(o=this._platformLocation.pathname),this._platformLocation.pushState(t,i,o)}replaceState(t,i,r,s){let o=this.prepareExternalUrl(r+pu(s));0==o.length&&(o=this._platformLocation.pathname),this._platformLocation.replaceState(t,i,o)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}static{this.\u0275fac=function(i){return new(i||n)(ue(_1),ue(H4,8))}}static{this.\u0275prov=dt({token:n,factory:n.\u0275fac})}}return n})(),jE=(()=>{class n{constructor(t){this._subject=new gi,this._urlChangeListeners=[],this._urlChangeSubscription=null,this._locationStrategy=t;const i=this._locationStrategy.getBaseHref();this._basePath=function Tie(n){if(new RegExp("^(https?:)?//").test(n)){const[,t]=n.split(/\/\/[^\/]+/);return t}return n}(z4(W4(i))),this._locationStrategy.onPopState(r=>{this._subject.emit({url:this.path(!0),pop:!0,state:r.state,type:r.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(t=!1){return this.normalize(this._locationStrategy.path(t))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(t,i=""){return this.path()==this.normalize(t+pu(i))}normalize(t){return n.stripTrailingSlash(function Eie(n,e){if(!n||!e.startsWith(n))return e;const t=e.substring(n.length);return""===t||["/",";","?","#"].includes(t[0])?t:e}(this._basePath,W4(t)))}prepareExternalUrl(t){return t&&"/"!==t[0]&&(t="/"+t),this._locationStrategy.prepareExternalUrl(t)}go(t,i="",r=null){this._locationStrategy.pushState(r,"",t,i),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+pu(i)),r)}replaceState(t,i="",r=null){this._locationStrategy.replaceState(r,"",t,i),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+pu(i)),r)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(t=0){this._locationStrategy.historyGo?.(t)}onUrlChange(t){return this._urlChangeListeners.push(t),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(i=>{this._notifyUrlChangeListeners(i.url,i.state)})),()=>{const i=this._urlChangeListeners.indexOf(t);this._urlChangeListeners.splice(i,1),0===this._urlChangeListeners.length&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(t="",i){this._urlChangeListeners.forEach(r=>r(t,i))}subscribe(t,i,r){return this._subject.subscribe({next:t,error:i,complete:r})}static{this.normalizeQueryParams=pu}static{this.joinWithSlash=v1}static{this.stripTrailingSlash=z4}static{this.\u0275fac=function(i){return new(i||n)(ue(hf))}}static{this.\u0275prov=dt({token:n,factory:function(){return function wie(){return new jE(ue(hf))}()},providedIn:"root"})}}return n})();function W4(n){return n.replace(/\/index.html$/,"")}var Bo=function(n){return n[n.Format=0]="Format",n[n.Standalone=1]="Standalone",n}(Bo||{}),ar=function(n){return n[n.Narrow=0]="Narrow",n[n.Abbreviated=1]="Abbreviated",n[n.Wide=2]="Wide",n[n.Short=3]="Short",n}(ar||{}),Pa=function(n){return n[n.Short=0]="Short",n[n.Medium=1]="Medium",n[n.Long=2]="Long",n[n.Full=3]="Full",n}(Pa||{}),os=function(n){return n[n.Decimal=0]="Decimal",n[n.Group=1]="Group",n[n.List=2]="List",n[n.PercentSign=3]="PercentSign",n[n.PlusSign=4]="PlusSign",n[n.MinusSign=5]="MinusSign",n[n.Exponential=6]="Exponential",n[n.SuperscriptingExponent=7]="SuperscriptingExponent",n[n.PerMille=8]="PerMille",n[n.Infinity=9]="Infinity",n[n.NaN=10]="NaN",n[n.TimeSeparator=11]="TimeSeparator",n[n.CurrencyDecimal=12]="CurrencyDecimal",n[n.CurrencyGroup=13]="CurrencyGroup",n}(os||{});function qE(n,e){return pl(Lo(n)[vr.DateFormat],e)}function XE(n,e){return pl(Lo(n)[vr.TimeFormat],e)}function KE(n,e){return pl(Lo(n)[vr.DateTimeFormat],e)}function fl(n,e){const t=Lo(n),i=t[vr.NumberSymbols][e];if(typeof i>"u"){if(e===os.CurrencyDecimal)return t[vr.NumberSymbols][os.Decimal];if(e===os.CurrencyGroup)return t[vr.NumberSymbols][os.Group]}return i}function $4(n){if(!n[vr.ExtraData])throw new Error(`Missing extra locale data for the locale "${n[vr.LocaleId]}". Use "registerLocaleData" to load new data. See the "I18n guide" on angular.io to know more.`)}function pl(n,e){for(let t=e;t>-1;t--)if(typeof n[t]<"u")return n[t];throw new Error("Locale data API: locale data undefined")}function b1(n){const[e,t]=n.split(":");return{hours:+e,minutes:+t}}const Vie=/^(\d{4,})-?(\d\d)-?(\d\d)(?:T(\d\d)(?::?(\d\d)(?::?(\d\d)(?:\.(\d+))?)?)?(Z|([+-])(\d\d):?(\d\d))?)?$/,e0={},Uie=/((?:[^BEGHLMOSWYZabcdhmswyz']+)|(?:'(?:[^']|'')*')|(?:G{1,5}|y{1,4}|Y{1,4}|M{1,5}|L{1,5}|w{1,2}|W{1}|d{1,2}|E{1,6}|c{1,6}|a{1,5}|b{1,5}|B{1,5}|h{1,2}|H{1,2}|m{1,2}|s{1,2}|S{1,3}|z{1,4}|Z{1,5}|O{1,4}))([\s\S]*)/;var mu=function(n){return n[n.Short=0]="Short",n[n.ShortGMT=1]="ShortGMT",n[n.Long=2]="Long",n[n.Extended=3]="Extended",n}(mu||{}),Xi=function(n){return n[n.FullYear=0]="FullYear",n[n.Month=1]="Month",n[n.Date=2]="Date",n[n.Hours=3]="Hours",n[n.Minutes=4]="Minutes",n[n.Seconds=5]="Seconds",n[n.FractionalSeconds=6]="FractionalSeconds",n[n.Day=7]="Day",n}(Xi||{}),Ki=function(n){return n[n.DayPeriods=0]="DayPeriods",n[n.Days=1]="Days",n[n.Months=2]="Months",n[n.Eras=3]="Eras",n}(Ki||{});function Bie(n,e,t,i){let r=function Kie(n){if(K4(n))return n;if("number"==typeof n&&!isNaN(n))return new Date(n);if("string"==typeof n){if(n=n.trim(),/^(\d{4}(-\d{1,2}(-\d{1,2})?)?)$/.test(n)){const[r,s=1,o=1]=n.split("-").map(a=>+a);return YE(r,s-1,o)}const t=parseFloat(n);if(!isNaN(n-t))return new Date(t);let i;if(i=n.match(Vie))return function Yie(n){const e=new Date(0);let t=0,i=0;const r=n[8]?e.setUTCFullYear:e.setFullYear,s=n[8]?e.setUTCHours:e.setHours;n[9]&&(t=Number(n[9]+n[10]),i=Number(n[9]+n[11])),r.call(e,Number(n[1]),Number(n[2])-1,Number(n[3]));const o=Number(n[4]||0)-t,a=Number(n[5]||0)-i,l=Number(n[6]||0),c=Math.floor(1e3*parseFloat("0."+(n[7]||0)));return s.call(e,o,a,l,c),e}(i)}const e=new Date(n);if(!K4(e))throw new Error(`Unable to convert "${n}" into a date`);return e}(n);e=gu(t,e)||e;let a,o=[];for(;e;){if(a=Uie.exec(e),!a){o.push(e);break}{o=o.concat(a.slice(1));const u=o.pop();if(!u)break;e=u}}let l=r.getTimezoneOffset();i&&(l=X4(i,l),r=function Xie(n,e,t){const i=t?-1:1,r=n.getTimezoneOffset();return function qie(n,e){return(n=new Date(n.getTime())).setMinutes(n.getMinutes()+e),n}(n,i*(X4(e,r)-r))}(r,i,!0));let c="";return o.forEach(u=>{const d=function $ie(n){if(w1[n])return w1[n];let e;switch(n){case"G":case"GG":case"GGG":e=yr(Ki.Eras,ar.Abbreviated);break;case"GGGG":e=yr(Ki.Eras,ar.Wide);break;case"GGGGG":e=yr(Ki.Eras,ar.Narrow);break;case"y":e=_s(Xi.FullYear,1,0,!1,!0);break;case"yy":e=_s(Xi.FullYear,2,0,!0,!0);break;case"yyy":e=_s(Xi.FullYear,3,0,!1,!0);break;case"yyyy":e=_s(Xi.FullYear,4,0,!1,!0);break;case"Y":e=eT(1);break;case"YY":e=eT(2,!0);break;case"YYY":e=eT(3);break;case"YYYY":e=eT(4);break;case"M":case"L":e=_s(Xi.Month,1,1);break;case"MM":case"LL":e=_s(Xi.Month,2,1);break;case"MMM":e=yr(Ki.Months,ar.Abbreviated);break;case"MMMM":e=yr(Ki.Months,ar.Wide);break;case"MMMMM":e=yr(Ki.Months,ar.Narrow);break;case"LLL":e=yr(Ki.Months,ar.Abbreviated,Bo.Standalone);break;case"LLLL":e=yr(Ki.Months,ar.Wide,Bo.Standalone);break;case"LLLLL":e=yr(Ki.Months,ar.Narrow,Bo.Standalone);break;case"w":e=x1(1);break;case"ww":e=x1(2);break;case"W":e=x1(1,!0);break;case"d":e=_s(Xi.Date,1);break;case"dd":e=_s(Xi.Date,2);break;case"c":case"cc":e=_s(Xi.Day,1);break;case"ccc":e=yr(Ki.Days,ar.Abbreviated,Bo.Standalone);break;case"cccc":e=yr(Ki.Days,ar.Wide,Bo.Standalone);break;case"ccccc":e=yr(Ki.Days,ar.Narrow,Bo.Standalone);break;case"cccccc":e=yr(Ki.Days,ar.Short,Bo.Standalone);break;case"E":case"EE":case"EEE":e=yr(Ki.Days,ar.Abbreviated);break;case"EEEE":e=yr(Ki.Days,ar.Wide);break;case"EEEEE":e=yr(Ki.Days,ar.Narrow);break;case"EEEEEE":e=yr(Ki.Days,ar.Short);break;case"a":case"aa":case"aaa":e=yr(Ki.DayPeriods,ar.Abbreviated);break;case"aaaa":e=yr(Ki.DayPeriods,ar.Wide);break;case"aaaaa":e=yr(Ki.DayPeriods,ar.Narrow);break;case"b":case"bb":case"bbb":e=yr(Ki.DayPeriods,ar.Abbreviated,Bo.Standalone,!0);break;case"bbbb":e=yr(Ki.DayPeriods,ar.Wide,Bo.Standalone,!0);break;case"bbbbb":e=yr(Ki.DayPeriods,ar.Narrow,Bo.Standalone,!0);break;case"B":case"BB":case"BBB":e=yr(Ki.DayPeriods,ar.Abbreviated,Bo.Format,!0);break;case"BBBB":e=yr(Ki.DayPeriods,ar.Wide,Bo.Format,!0);break;case"BBBBB":e=yr(Ki.DayPeriods,ar.Narrow,Bo.Format,!0);break;case"h":e=_s(Xi.Hours,1,-12);break;case"hh":e=_s(Xi.Hours,2,-12);break;case"H":e=_s(Xi.Hours,1);break;case"HH":e=_s(Xi.Hours,2);break;case"m":e=_s(Xi.Minutes,1);break;case"mm":e=_s(Xi.Minutes,2);break;case"s":e=_s(Xi.Seconds,1);break;case"ss":e=_s(Xi.Seconds,2);break;case"S":e=_s(Xi.FractionalSeconds,1);break;case"SS":e=_s(Xi.FractionalSeconds,2);break;case"SSS":e=_s(Xi.FractionalSeconds,3);break;case"Z":case"ZZ":case"ZZZ":e=ZE(mu.Short);break;case"ZZZZZ":e=ZE(mu.Extended);break;case"O":case"OO":case"OOO":case"z":case"zz":case"zzz":e=ZE(mu.ShortGMT);break;case"OOOO":case"ZZZZ":case"zzzz":e=ZE(mu.Long);break;default:return null}return w1[n]=e,e}(u);c+=d?d(r,t,l):"''"===u?"'":u.replace(/(^'|'$)/g,"").replace(/''/g,"'")}),c}function YE(n,e,t){const i=new Date(0);return i.setFullYear(n,e,t),i.setHours(0,0,0),i}function gu(n,e){const t=function Aie(n){return Lo(n)[vr.LocaleId]}(n);if(e0[t]=e0[t]||{},e0[t][e])return e0[t][e];let i="";switch(e){case"shortDate":i=qE(n,Pa.Short);break;case"mediumDate":i=qE(n,Pa.Medium);break;case"longDate":i=qE(n,Pa.Long);break;case"fullDate":i=qE(n,Pa.Full);break;case"shortTime":i=XE(n,Pa.Short);break;case"mediumTime":i=XE(n,Pa.Medium);break;case"longTime":i=XE(n,Pa.Long);break;case"fullTime":i=XE(n,Pa.Full);break;case"short":const r=gu(n,"shortTime"),s=gu(n,"shortDate");i=QE(KE(n,Pa.Short),[r,s]);break;case"medium":const o=gu(n,"mediumTime"),a=gu(n,"mediumDate");i=QE(KE(n,Pa.Medium),[o,a]);break;case"long":const l=gu(n,"longTime"),c=gu(n,"longDate");i=QE(KE(n,Pa.Long),[l,c]);break;case"full":const u=gu(n,"fullTime"),d=gu(n,"fullDate");i=QE(KE(n,Pa.Full),[u,d])}return i&&(e0[t][e]=i),i}function QE(n,e){return e&&(n=n.replace(/\{([^}]+)}/g,function(t,i){return null!=e&&i in e?e[i]:t})),n}function kl(n,e,t="-",i,r){let s="";(n<0||r&&n<=0)&&(r?n=1-n:(n=-n,s=t));let o=String(n);for(;o.length<e;)o="0"+o;return i&&(o=o.slice(o.length-e)),s+o}function _s(n,e,t=0,i=!1,r=!1){return function(s,o){let a=function Hie(n,e){switch(n){case Xi.FullYear:return e.getFullYear();case Xi.Month:return e.getMonth();case Xi.Date:return e.getDate();case Xi.Hours:return e.getHours();case Xi.Minutes:return e.getMinutes();case Xi.Seconds:return e.getSeconds();case Xi.FractionalSeconds:return e.getMilliseconds();case Xi.Day:return e.getDay();default:throw new Error(`Unknown DateType value "${n}".`)}}(n,s);if((t>0||a>-t)&&(a+=t),n===Xi.Hours)0===a&&-12===t&&(a=12);else if(n===Xi.FractionalSeconds)return function zie(n,e){return kl(n,3).substring(0,e)}(a,e);const l=fl(o,os.MinusSign);return kl(a,e,l,i,r)}}function yr(n,e,t=Bo.Format,i=!1){return function(r,s){return function Gie(n,e,t,i,r,s){switch(t){case Ki.Months:return function Mie(n,e,t){const i=Lo(n),s=pl([i[vr.MonthsFormat],i[vr.MonthsStandalone]],e);return pl(s,t)}(e,r,i)[n.getMonth()];case Ki.Days:return function Cie(n,e,t){const i=Lo(n),s=pl([i[vr.DaysFormat],i[vr.DaysStandalone]],e);return pl(s,t)}(e,r,i)[n.getDay()];case Ki.DayPeriods:const o=n.getHours(),a=n.getMinutes();if(s){const c=function kie(n){const e=Lo(n);return $4(e),(e[vr.ExtraData][2]||[]).map(i=>"string"==typeof i?b1(i):[b1(i[0]),b1(i[1])])}(e),u=function Oie(n,e,t){const i=Lo(n);$4(i);const s=pl([i[vr.ExtraData][0],i[vr.ExtraData][1]],e)||[];return pl(s,t)||[]}(e,r,i),d=c.findIndex(p=>{if(Array.isArray(p)){const[m,v]=p,x=o>=m.hours&&a>=m.minutes,b=o<v.hours||o===v.hours&&a<v.minutes;if(m.hours<v.hours){if(x&&b)return!0}else if(x||b)return!0}else if(p.hours===o&&p.minutes===a)return!0;return!1});if(-1!==d)return u[d]}return function Iie(n,e,t){const i=Lo(n),s=pl([i[vr.DayPeriodsFormat],i[vr.DayPeriodsStandalone]],e);return pl(s,t)}(e,r,i)[o<12?0:1];case Ki.Eras:return function Die(n,e){return pl(Lo(n)[vr.Eras],e)}(e,i)[n.getFullYear()<=0?0:1];default:throw new Error(`unexpected translation type ${t}`)}}(r,s,n,e,t,i)}}function ZE(n){return function(e,t,i){const r=-1*i,s=fl(t,os.MinusSign),o=r>0?Math.floor(r/60):Math.ceil(r/60);switch(n){case mu.Short:return(r>=0?"+":"")+kl(o,2,s)+kl(Math.abs(r%60),2,s);case mu.ShortGMT:return"GMT"+(r>=0?"+":"")+kl(o,1,s);case mu.Long:return"GMT"+(r>=0?"+":"")+kl(o,2,s)+":"+kl(Math.abs(r%60),2,s);case mu.Extended:return 0===i?"Z":(r>=0?"+":"")+kl(o,2,s)+":"+kl(Math.abs(r%60),2,s);default:throw new Error(`Unknown zone width "${n}"`)}}}const Wie=0,JE=4;function q4(n){return YE(n.getFullYear(),n.getMonth(),n.getDate()+(JE-n.getDay()))}function x1(n,e=!1){return function(t,i){let r;if(e){const s=new Date(t.getFullYear(),t.getMonth(),1).getDay()-1,o=t.getDate();r=1+Math.floor((o+s)/7)}else{const s=q4(t),o=function jie(n){const e=YE(n,Wie,1).getDay();return YE(n,0,1+(e<=JE?JE:JE+7)-e)}(s.getFullYear()),a=s.getTime()-o.getTime();r=1+Math.round(a/6048e5)}return kl(r,n,fl(i,os.MinusSign))}}function eT(n,e=!1){return function(t,i){return kl(q4(t).getFullYear(),n,fl(i,os.MinusSign),e)}}const w1={};function X4(n,e){n=n.replace(/:/g,"");const t=Date.parse("Jan 01, 1970 00:00:00 "+n)/6e4;return isNaN(t)?e:t}function K4(n){return n instanceof Date&&!isNaN(n.valueOf())}function J4(n,e){e=encodeURIComponent(e);for(const t of n.split(";")){const i=t.indexOf("="),[r,s]=-1==i?[t,""]:[t.slice(0,i),t.slice(i+1)];if(r.trim()===e)return decodeURIComponent(s)}return null}const C1=/\s+/,ez=[];let tz=(()=>{class n{constructor(t,i,r,s){this._iterableDiffers=t,this._keyValueDiffers=i,this._ngEl=r,this._renderer=s,this.initialClasses=ez,this.stateMap=new Map}set klass(t){this.initialClasses=null!=t?t.trim().split(C1):ez}set ngClass(t){this.rawClass="string"==typeof t?t.trim().split(C1):t}ngDoCheck(){for(const i of this.initialClasses)this._updateState(i,!0);const t=this.rawClass;if(Array.isArray(t)||t instanceof Set)for(const i of t)this._updateState(i,!0);else if(null!=t)for(const i of Object.keys(t))this._updateState(i,!!t[i]);this._applyStateDiff()}_updateState(t,i){const r=this.stateMap.get(t);void 0!==r?(r.enabled!==i&&(r.changed=!0,r.enabled=i),r.touched=!0):this.stateMap.set(t,{enabled:i,changed:!0,touched:!0})}_applyStateDiff(){for(const t of this.stateMap){const i=t[0],r=t[1];r.changed?(this._toggleClass(i,r.enabled),r.changed=!1):r.touched||(r.enabled&&this._toggleClass(i,!1),this.stateMap.delete(i)),r.touched=!1}}_toggleClass(t,i){(t=t.trim()).length>0&&t.split(C1).forEach(r=>{i?this._renderer.addClass(this._ngEl.nativeElement,r):this._renderer.removeClass(this._ngEl.nativeElement,r)})}static{this.\u0275fac=function(i){return new(i||n)(J(GE),J(Jy),J(Di),J(rc))}}static{this.\u0275dir=St({type:n,selectors:[["","ngClass",""]],inputs:{klass:["class","klass"],ngClass:"ngClass"},standalone:!0})}}return n})();class cre{constructor(e,t,i,r){this.$implicit=e,this.ngForOf=t,this.index=i,this.count=r}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let M1=(()=>{class n{set ngForOf(t){this._ngForOf=t,this._ngForOfDirty=!0}set ngForTrackBy(t){this._trackByFn=t}get ngForTrackBy(){return this._trackByFn}constructor(t,i,r){this._viewContainer=t,this._template=i,this._differs=r,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForTemplate(t){t&&(this._template=t)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const t=this._ngForOf;!this._differ&&t&&(this._differ=this._differs.find(t).create(this.ngForTrackBy))}if(this._differ){const t=this._differ.diff(this._ngForOf);t&&this._applyChanges(t)}}_applyChanges(t){const i=this._viewContainer;t.forEachOperation((r,s,o)=>{if(null==r.previousIndex)i.createEmbeddedView(this._template,new cre(r.item,this._ngForOf,-1,-1),null===o?void 0:o);else if(null==o)i.remove(null===s?void 0:s);else if(null!==s){const a=i.get(s);i.move(a,o),iz(a,r)}});for(let r=0,s=i.length;r<s;r++){const a=i.get(r).context;a.index=r,a.count=s,a.ngForOf=this._ngForOf}t.forEachIdentityChange(r=>{iz(i.get(r.currentIndex),r)})}static ngTemplateContextGuard(t,i){return!0}static{this.\u0275fac=function(i){return new(i||n)(J(hl),J(cc),J(GE))}}static{this.\u0275dir=St({type:n,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"},standalone:!0})}}return n})();function iz(n,e){n.context.$implicit=e.item}let _u=(()=>{class n{constructor(t,i){this._viewContainer=t,this._context=new ure,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=i}set ngIf(t){this._context.$implicit=this._context.ngIf=t,this._updateView()}set ngIfThen(t){rz("ngIfThen",t),this._thenTemplateRef=t,this._thenViewRef=null,this._updateView()}set ngIfElse(t){rz("ngIfElse",t),this._elseTemplateRef=t,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(t,i){return!0}static{this.\u0275fac=function(i){return new(i||n)(J(hl),J(cc))}}static{this.\u0275dir=St({type:n,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"},standalone:!0})}}return n})();class ure{constructor(){this.$implicit=null,this.ngIf=null}}function rz(n,e){if(e&&!e.createEmbeddedView)throw new Error(`${n} must be a TemplateRef, but received '${yn(e)}'.`)}class D1{constructor(e,t){this._viewContainerRef=e,this._templateRef=t,this._created=!1}create(){this._created=!0,this._viewContainerRef.createEmbeddedView(this._templateRef)}destroy(){this._created=!1,this._viewContainerRef.clear()}enforceState(e){e&&!this._created?this.create():!e&&this._created&&this.destroy()}}let n0=(()=>{class n{constructor(){this._defaultViews=[],this._defaultUsed=!1,this._caseCount=0,this._lastCaseCheckIndex=0,this._lastCasesMatched=!1}set ngSwitch(t){this._ngSwitch=t,0===this._caseCount&&this._updateDefaultCases(!0)}_addCase(){return this._caseCount++}_addDefault(t){this._defaultViews.push(t)}_matchCase(t){const i=t==this._ngSwitch;return this._lastCasesMatched=this._lastCasesMatched||i,this._lastCaseCheckIndex++,this._lastCaseCheckIndex===this._caseCount&&(this._updateDefaultCases(!this._lastCasesMatched),this._lastCaseCheckIndex=0,this._lastCasesMatched=!1),i}_updateDefaultCases(t){if(this._defaultViews.length>0&&t!==this._defaultUsed){this._defaultUsed=t;for(const i of this._defaultViews)i.enforceState(t)}}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275dir=St({type:n,selectors:[["","ngSwitch",""]],inputs:{ngSwitch:"ngSwitch"},standalone:!0})}}return n})(),R1=(()=>{class n{constructor(t,i,r){this.ngSwitch=r,r._addCase(),this._view=new D1(t,i)}ngDoCheck(){this._view.enforceState(this.ngSwitch._matchCase(this.ngSwitchCase))}static{this.\u0275fac=function(i){return new(i||n)(J(hl),J(cc),J(n0,9))}}static{this.\u0275dir=St({type:n,selectors:[["","ngSwitchCase",""]],inputs:{ngSwitchCase:"ngSwitchCase"},standalone:!0})}}return n})(),sz=(()=>{class n{constructor(t,i,r){r._addDefault(new D1(t,i))}static{this.\u0275fac=function(i){return new(i||n)(J(hl),J(cc),J(n0,9))}}static{this.\u0275dir=St({type:n,selectors:[["","ngSwitchDefault",""]],standalone:!0})}}return n})(),P1=(()=>{class n{constructor(t){this._viewContainerRef=t,this._viewRef=null,this.ngTemplateOutletContext=null,this.ngTemplateOutlet=null,this.ngTemplateOutletInjector=null}ngOnChanges(t){if(t.ngTemplateOutlet||t.ngTemplateOutletInjector){const i=this._viewContainerRef;if(this._viewRef&&i.remove(i.indexOf(this._viewRef)),this.ngTemplateOutlet){const{ngTemplateOutlet:r,ngTemplateOutletContext:s,ngTemplateOutletInjector:o}=this;this._viewRef=i.createEmbeddedView(r,s,o?{injector:o}:void 0)}else this._viewRef=null}else this._viewRef&&t.ngTemplateOutletContext&&this.ngTemplateOutletContext&&(this._viewRef.context=this.ngTemplateOutletContext)}static{this.\u0275fac=function(i){return new(i||n)(J(hl))}}static{this.\u0275dir=St({type:n,selectors:[["","ngTemplateOutlet",""]],inputs:{ngTemplateOutletContext:"ngTemplateOutletContext",ngTemplateOutlet:"ngTemplateOutlet",ngTemplateOutletInjector:"ngTemplateOutletInjector"},standalone:!0,features:[Ps]})}}return n})();const Ere=new Fe("DATE_PIPE_DEFAULT_TIMEZONE"),Tre=new Fe("DATE_PIPE_DEFAULT_OPTIONS");let az=(()=>{class n{constructor(t,i,r){this.locale=t,this.defaultTimezone=i,this.defaultOptions=r}transform(t,i,r,s){if(null==t||""===t||t!=t)return null;try{return Bie(t,i??this.defaultOptions?.dateFormat??"mediumDate",s||this.locale,r??this.defaultOptions?.timezone??this.defaultTimezone??void 0)}catch(o){throw function Ol(n,e){return new Ce(2100,!1)}()}}static{this.\u0275fac=function(i){return new(i||n)(J(uc,16),J(Ere,24),J(Tre,24))}}static{this.\u0275pipe=ps({name:"date",type:n,pure:!0,standalone:!0})}}return n})(),ff=(()=>{class n{static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275mod=ni({type:n})}static{this.\u0275inj=jn({})}}return n})();const cz="browser";function nT(n){return"server"===n}let Vre=(()=>{class n{static{this.\u0275prov=dt({token:n,providedIn:"root",factory:()=>new Ure(ue(_i),window)})}}return n})();class Ure{constructor(e,t){this.document=e,this.window=t,this.offset=()=>[0,0]}setOffset(e){this.offset=Array.isArray(e)?()=>e:e}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(e){this.supportsScrolling()&&this.window.scrollTo(e[0],e[1])}scrollToAnchor(e){if(!this.supportsScrolling())return;const t=function Bre(n,e){const t=n.getElementById(e)||n.getElementsByName(e)[0];if(t)return t;if("function"==typeof n.createTreeWalker&&n.body&&"function"==typeof n.body.attachShadow){const i=n.createTreeWalker(n.body,NodeFilter.SHOW_ELEMENT);let r=i.currentNode;for(;r;){const s=r.shadowRoot;if(s){const o=s.getElementById(e)||s.querySelector(`[name="${e}"]`);if(o)return o}r=i.nextNode()}}return null}(this.document,e);t&&(this.scrollToElement(t),t.focus())}setHistoryScrollRestoration(e){this.supportsScrolling()&&(this.window.history.scrollRestoration=e)}scrollToElement(e){const t=e.getBoundingClientRect(),i=t.left+this.window.pageXOffset,r=t.top+this.window.pageYOffset,s=this.offset();this.window.scrollTo(i-s[0],r-s[1])}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch{return!1}}}class uz{}class cse extends vie{constructor(){super(...arguments),this.supportsDOMEvents=!0}}class L1 extends cse{static makeCurrent(){!function _ie(n){g1||(g1=n)}(new L1)}onAndCancel(e,t,i){return e.addEventListener(t,i),()=>{e.removeEventListener(t,i)}}dispatchEvent(e,t){e.dispatchEvent(t)}remove(e){e.parentNode&&e.parentNode.removeChild(e)}createElement(e,t){return(t=t||this.getDefaultDocument()).createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,t){return"window"===t?window:"document"===t?e:"body"===t?e.body:null}getBaseHref(e){const t=function use(){return s0=s0||document.querySelector("base"),s0?s0.getAttribute("href"):null}();return null==t?null:function dse(n){sT=sT||document.createElement("a"),sT.setAttribute("href",n);const e=sT.pathname;return"/"===e.charAt(0)?e:`/${e}`}(t)}resetBaseElement(){s0=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return J4(document.cookie,e)}}let sT,s0=null,fse=(()=>{class n{build(){return new XMLHttpRequest}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275prov=dt({token:n,factory:n.\u0275fac})}}return n})();const V1=new Fe("EventManagerPlugins");let mz=(()=>{class n{constructor(t,i){this._zone=i,this._eventNameToPlugin=new Map,t.forEach(r=>{r.manager=this}),this._plugins=t.slice().reverse()}addEventListener(t,i,r){return this._findPluginFor(i).addEventListener(t,i,r)}getZone(){return this._zone}_findPluginFor(t){let i=this._eventNameToPlugin.get(t);if(i)return i;if(i=this._plugins.find(s=>s.supports(t)),!i)throw new Ce(5101,!1);return this._eventNameToPlugin.set(t,i),i}static{this.\u0275fac=function(i){return new(i||n)(ue(V1),ue(mn))}}static{this.\u0275prov=dt({token:n,factory:n.\u0275fac})}}return n})();class gz{constructor(e){this._doc=e}}const U1="ng-app-id";let _z=(()=>{class n{constructor(t,i,r,s={}){this.doc=t,this.appId=i,this.nonce=r,this.platformId=s,this.styleRef=new Map,this.hostNodes=new Set,this.styleNodesInDOM=this.collectServerRenderedStyles(),this.platformIsServer=nT(s),this.resetHostNodes()}addStyles(t){for(const i of t)1===this.changeUsageCount(i,1)&&this.onStyleAdded(i)}removeStyles(t){for(const i of t)this.changeUsageCount(i,-1)<=0&&this.onStyleRemoved(i)}ngOnDestroy(){const t=this.styleNodesInDOM;t&&(t.forEach(i=>i.remove()),t.clear());for(const i of this.getAllStyles())this.onStyleRemoved(i);this.resetHostNodes()}addHost(t){this.hostNodes.add(t);for(const i of this.getAllStyles())this.addStyleToHost(t,i)}removeHost(t){this.hostNodes.delete(t)}getAllStyles(){return this.styleRef.keys()}onStyleAdded(t){for(const i of this.hostNodes)this.addStyleToHost(i,t)}onStyleRemoved(t){const i=this.styleRef;i.get(t)?.elements?.forEach(r=>r.remove()),i.delete(t)}collectServerRenderedStyles(){const t=this.doc.head?.querySelectorAll(`style[${U1}="${this.appId}"]`);if(t?.length){const i=new Map;return t.forEach(r=>{null!=r.textContent&&i.set(r.textContent,r)}),i}return null}changeUsageCount(t,i){const r=this.styleRef;if(r.has(t)){const s=r.get(t);return s.usage+=i,s.usage}return r.set(t,{usage:i,elements:[]}),i}getStyleElement(t,i){const r=this.styleNodesInDOM,s=r?.get(i);if(s?.parentNode===t)return r.delete(i),s.removeAttribute(U1),s;{const o=this.doc.createElement("style");return this.nonce&&o.setAttribute("nonce",this.nonce),o.textContent=i,this.platformIsServer&&o.setAttribute(U1,this.appId),o}}addStyleToHost(t,i){const r=this.getStyleElement(t,i);t.appendChild(r);const s=this.styleRef,o=s.get(i)?.elements;o?o.push(r):s.set(i,{elements:[r],usage:1})}resetHostNodes(){const t=this.hostNodes;t.clear(),t.add(this.doc.head)}static{this.\u0275fac=function(i){return new(i||n)(ue(_i),ue(lE),ue(GM,8),ue(al))}}static{this.\u0275prov=dt({token:n,factory:n.\u0275fac})}}return n})();const B1={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},z1=/%COMP%/g,_se=new Fe("RemoveStylesOnCompDestroy",{providedIn:"root",factory:()=>!1});function yz(n,e){return e.map(t=>t.replace(z1,n))}let H1=(()=>{class n{constructor(t,i,r,s,o,a,l,c=null){this.eventManager=t,this.sharedStylesHost=i,this.appId=r,this.removeStylesOnCompDestroy=s,this.doc=o,this.platformId=a,this.ngZone=l,this.nonce=c,this.rendererByCompId=new Map,this.platformIsServer=nT(a),this.defaultRenderer=new G1(t,o,l,this.platformIsServer)}createRenderer(t,i){if(!t||!i)return this.defaultRenderer;this.platformIsServer&&i.encapsulation===Kr.ShadowDom&&(i={...i,encapsulation:Kr.Emulated});const r=this.getOrCreateRenderer(t,i);return r instanceof xz?r.applyToHost(t):r instanceof W1&&r.applyStyles(),r}getOrCreateRenderer(t,i){const r=this.rendererByCompId;let s=r.get(i.id);if(!s){const o=this.doc,a=this.ngZone,l=this.eventManager,c=this.sharedStylesHost,u=this.removeStylesOnCompDestroy,d=this.platformIsServer;switch(i.encapsulation){case Kr.Emulated:s=new xz(l,c,i,this.appId,u,o,a,d);break;case Kr.ShadowDom:return new xse(l,c,t,i,o,a,this.nonce,d);default:s=new W1(l,c,i,u,o,a,d)}r.set(i.id,s)}return s}ngOnDestroy(){this.rendererByCompId.clear()}static{this.\u0275fac=function(i){return new(i||n)(ue(mz),ue(_z),ue(lE),ue(_se),ue(_i),ue(al),ue(mn),ue(GM))}}static{this.\u0275prov=dt({token:n,factory:n.\u0275fac})}}return n})();class G1{constructor(e,t,i,r){this.eventManager=e,this.doc=t,this.ngZone=i,this.platformIsServer=r,this.data=Object.create(null),this.destroyNode=null}destroy(){}createElement(e,t){return t?this.doc.createElementNS(B1[t]||t,e):this.doc.createElement(e)}createComment(e){return this.doc.createComment(e)}createText(e){return this.doc.createTextNode(e)}appendChild(e,t){(bz(e)?e.content:e).appendChild(t)}insertBefore(e,t,i){e&&(bz(e)?e.content:e).insertBefore(t,i)}removeChild(e,t){e&&e.removeChild(t)}selectRootElement(e,t){let i="string"==typeof e?this.doc.querySelector(e):e;if(!i)throw new Ce(-5104,!1);return t||(i.textContent=""),i}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,t,i,r){if(r){t=r+":"+t;const s=B1[r];s?e.setAttributeNS(s,t,i):e.setAttribute(t,i)}else e.setAttribute(t,i)}removeAttribute(e,t,i){if(i){const r=B1[i];r?e.removeAttributeNS(r,t):e.removeAttribute(`${i}:${t}`)}else e.removeAttribute(t)}addClass(e,t){e.classList.add(t)}removeClass(e,t){e.classList.remove(t)}setStyle(e,t,i,r){r&(Ed.DashCase|Ed.Important)?e.style.setProperty(t,i,r&Ed.Important?"important":""):e.style[t]=i}removeStyle(e,t,i){i&Ed.DashCase?e.style.removeProperty(t):e.style[t]=""}setProperty(e,t,i){e[t]=i}setValue(e,t){e.nodeValue=t}listen(e,t,i){if("string"==typeof e&&!(e=Cd().getGlobalEventTarget(this.doc,e)))throw new Error(`Unsupported event target ${e} for event ${t}`);return this.eventManager.addEventListener(e,t,this.decoratePreventDefault(i))}decoratePreventDefault(e){return t=>{if("__ngUnwrap__"===t)return e;!1===(this.platformIsServer?this.ngZone.runGuarded(()=>e(t)):e(t))&&t.preventDefault()}}}function bz(n){return"TEMPLATE"===n.tagName&&void 0!==n.content}class xse extends G1{constructor(e,t,i,r,s,o,a,l){super(e,s,o,l),this.sharedStylesHost=t,this.hostEl=i,this.shadowRoot=i.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const c=yz(r.id,r.styles);for(const u of c){const d=document.createElement("style");a&&d.setAttribute("nonce",a),d.textContent=u,this.shadowRoot.appendChild(d)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}appendChild(e,t){return super.appendChild(this.nodeOrShadowRoot(e),t)}insertBefore(e,t,i){return super.insertBefore(this.nodeOrShadowRoot(e),t,i)}removeChild(e,t){return super.removeChild(this.nodeOrShadowRoot(e),t)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}}class W1 extends G1{constructor(e,t,i,r,s,o,a,l){super(e,s,o,a),this.sharedStylesHost=t,this.removeStylesOnCompDestroy=r,this.styles=l?yz(l,i.styles):i.styles}applyStyles(){this.sharedStylesHost.addStyles(this.styles)}destroy(){this.removeStylesOnCompDestroy&&this.sharedStylesHost.removeStyles(this.styles)}}class xz extends W1{constructor(e,t,i,r,s,o,a,l){const c=r+"-"+i.id;super(e,t,i,s,o,a,l,c),this.contentAttr=function vse(n){return"_ngcontent-%COMP%".replace(z1,n)}(c),this.hostAttr=function yse(n){return"_nghost-%COMP%".replace(z1,n)}(c)}applyToHost(e){this.applyStyles(),this.setAttribute(e,this.hostAttr,"")}createElement(e,t){const i=super.createElement(e,t);return super.setAttribute(i,this.contentAttr,""),i}}let wse=(()=>{class n extends gz{constructor(t){super(t)}supports(t){return!0}addEventListener(t,i,r){return t.addEventListener(i,r,!1),()=>this.removeEventListener(t,i,r)}removeEventListener(t,i,r){return t.removeEventListener(i,r)}static{this.\u0275fac=function(i){return new(i||n)(ue(_i))}}static{this.\u0275prov=dt({token:n,factory:n.\u0275fac})}}return n})();const wz=["alt","control","meta","shift"],Ese={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},Tse={alt:n=>n.altKey,control:n=>n.ctrlKey,meta:n=>n.metaKey,shift:n=>n.shiftKey};let Sse=(()=>{class n extends gz{constructor(t){super(t)}supports(t){return null!=n.parseEventName(t)}addEventListener(t,i,r){const s=n.parseEventName(i),o=n.eventCallback(s.fullKey,r,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>Cd().onAndCancel(t,s.domEventName,o))}static parseEventName(t){const i=t.toLowerCase().split("."),r=i.shift();if(0===i.length||"keydown"!==r&&"keyup"!==r)return null;const s=n._normalizeKey(i.pop());let o="",a=i.indexOf("code");if(a>-1&&(i.splice(a,1),o="code."),wz.forEach(c=>{const u=i.indexOf(c);u>-1&&(i.splice(u,1),o+=c+".")}),o+=s,0!=i.length||0===s.length)return null;const l={};return l.domEventName=r,l.fullKey=o,l}static matchEventFullKeyCode(t,i){let r=Ese[t.key]||t.key,s="";return i.indexOf("code.")>-1&&(r=t.code,s="code."),!(null==r||!r)&&(r=r.toLowerCase()," "===r?r="space":"."===r&&(r="dot"),wz.forEach(o=>{o!==r&&(0,Tse[o])(t)&&(s+=o+".")}),s+=r,s===i)}static eventCallback(t,i,r){return s=>{n.matchEventFullKeyCode(s,t)&&r.runGuarded(()=>i(s))}}static _normalizeKey(t){return"esc"===t?"escape":t}static{this.\u0275fac=function(i){return new(i||n)(ue(_i))}}static{this.\u0275prov=dt({token:n,factory:n.\u0275fac})}}return n})();const Mse=f4(iie,"browser",[{provide:al,useValue:cz},{provide:TV,useValue:function Ase(){L1.makeCurrent()},multi:!0},{provide:_i,useFactory:function Cse(){return function fY(n){DM=n}(document),document},deps:[]}]),Dse=new Fe(""),Sz=[{provide:UE,useClass:class hse{addToWindow(e){Yi.getAngularTestability=(i,r=!0)=>{const s=e.findTestabilityInTree(i,r);if(null==s)throw new Ce(5103,!1);return s},Yi.getAllAngularTestabilities=()=>e.getAllTestabilities(),Yi.getAllAngularRootElements=()=>e.getAllRootElements(),Yi.frameworkStabilizers||(Yi.frameworkStabilizers=[]),Yi.frameworkStabilizers.push(i=>{const r=Yi.getAllAngularTestabilities();let s=r.length,o=!1;const a=function(l){o=o||l,s--,0==s&&i(o)};r.forEach(l=>{l.whenStable(a)})})}findTestabilityInTree(e,t,i){return null==t?null:e.getTestability(t)??(i?Cd().isShadowRoot(t)?this.findTestabilityInTree(e,t.host,!0):this.findTestabilityInTree(e,t.parentElement,!0):null)}},deps:[]},{provide:l4,useClass:s1,deps:[mn,o1,UE]},{provide:s1,useClass:s1,deps:[mn,o1,UE]}],Az=[{provide:UM,useValue:"root"},{provide:ll,useFactory:function Ise(){return new ll},deps:[]},{provide:V1,useClass:wse,multi:!0,deps:[_i,mn,al]},{provide:V1,useClass:Sse,multi:!0,deps:[_i]},H1,_z,mz,{provide:Cy,useExisting:H1},{provide:uz,useClass:fse,deps:[]},[]];let Iz=(()=>{class n{constructor(t){}static withServerTransition(t){return{ngModule:n,providers:[{provide:lE,useValue:t.appId}]}}static{this.\u0275fac=function(i){return new(i||n)(ue(Dse,12))}}static{this.\u0275mod=ni({type:n})}static{this.\u0275inj=jn({providers:[...Az,...Sz],imports:[ff,rie]})}}return n})(),Cz=(()=>{class n{constructor(t){this._doc=t}getTitle(){return this._doc.title}setTitle(t){this._doc.title=t||""}static{this.\u0275fac=function(i){return new(i||n)(ue(_i))}}static{this.\u0275prov=dt({token:n,factory:function(i){let r=null;return r=i?new i:function Pse(){return new Cz(ue(_i))}(),r},providedIn:"root"})}}return n})();typeof window<"u"&&window;let o0=(()=>{class n{static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275prov=dt({token:n,factory:function(i){let r=null;return r=i?new(i||n):ue(Rz),r},providedIn:"root"})}}return n})(),Rz=(()=>{class n extends o0{constructor(t){super(),this._doc=t}sanitize(t,i){if(null==i)return null;switch(t){case Fs.NONE:return i;case Fs.HTML:return ic(i,"HTML")?Ma(i):mV(this._doc,String(i)).toString();case Fs.STYLE:return ic(i,"Style")?Ma(i):i;case Fs.SCRIPT:if(ic(i,"Script"))return Ma(i);throw new Ce(5200,!1);case Fs.URL:return ic(i,"URL")?Ma(i):tE(String(i));case Fs.RESOURCE_URL:if(ic(i,"ResourceURL"))return Ma(i);throw new Ce(5201,!1);default:throw new Ce(5202,!1)}}bypassSecurityTrustHtml(t){return function bY(n){return new pY(n)}(t)}bypassSecurityTrustStyle(t){return function xY(n){return new mY(n)}(t)}bypassSecurityTrustScript(t){return function wY(n){return new gY(n)}(t)}bypassSecurityTrustUrl(t){return function EY(n){return new _Y(n)}(t)}bypassSecurityTrustResourceUrl(t){return function TY(n){return new vY(n)}(t)}static{this.\u0275fac=function(i){return new(i||n)(ue(_i))}}static{this.\u0275prov=dt({token:n,factory:function(i){let r=null;return r=i?new i:function Fse(n){return new Rz(n.get(_i))}(ue(Ls)),r},providedIn:"root"})}}return n})();const{isArray:Lse}=Array,{getPrototypeOf:Vse,prototype:Use,keys:Bse}=Object;function Oz(n){if(1===n.length){const e=n[0];if(Lse(e))return{args:e,keys:null};if(function zse(n){return n&&"object"==typeof n&&Vse(n)===Use}(e)){const t=Bse(e);return{args:t.map(i=>e[i]),keys:t}}}return{args:n,keys:null}}const{isArray:Hse}=Array;function $1(n){return Ge(e=>function Gse(n,e){return Hse(e)?n(...e):n(e)}(n,e))}function Nz(n,e){return n.reduce((t,i,r)=>(t[i]=e[r],t),{})}function oT(...n){const e=jl(n),t=Vc(n),{args:i,keys:r}=Oz(n);if(0===i.length)return q([],e);const s=new xt(function Wse(n,e,t=qe){return i=>{Fz(e,()=>{const{length:r}=n,s=new Array(r);let o=r,a=r;for(let l=0;l<r;l++)Fz(e,()=>{const c=q(n[l],e);let u=!1;c.subscribe(ye(i,d=>{s[l]=d,u||(u=!0,a--),a||i.next(t(s.slice()))},()=>{--o||i.complete()}))},i)},i)}}(i,e,r?o=>Nz(r,o):qe));return t?s.pipe($1(t)):s}function Fz(n,e,t){n?qr(t,n,e):e()}const aT=_n(n=>function(){n(this),this.name="EmptyError",this.message="no elements in sequence"});function lT(...n){return function jse(){return Qa(1)}()(q(n,jl(n)))}function q1(n){return new xt(e=>{Mi(n()).subscribe(e)})}function ng(n,e){const t=H(n)?n:()=>n,i=r=>r.error(t());return new xt(e?r=>e.schedule(i,0,r):i)}function X1(){return re((n,e)=>{let t=null;n._refCount++;const i=ye(e,void 0,void 0,void 0,()=>{if(!n||n._refCount<=0||0<--n._refCount)return void(t=null);const r=n._connection,s=t;t=null,r&&(!s||r===s)&&r.unsubscribe(),e.unsubscribe()});n.subscribe(i),i.closed||(t=n.connect())})}class Lz extends xt{constructor(e,t){super(),this.source=e,this.subjectFactory=t,this._subject=null,this._refCount=0,this._connection=null,Ae(e)&&(this.lift=e.lift)}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){const e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;const{_connection:e}=this;this._subject=this._connection=null,e?.unsubscribe()}connect(){let e=this._connection;if(!e){e=this._connection=new on;const t=this.getSubject();e.add(this.source.subscribe(ye(t,void 0,()=>{this._teardown(),t.complete()},i=>{this._teardown(),t.error(i)},()=>this._teardown()))),e.closed&&(this._connection=null,e=on.EMPTY)}return e}refCount(){return X1()(this)}}function ml(n){return n<=0?()=>kr:re((e,t)=>{let i=0;e.subscribe(ye(t,r=>{++i<=n&&(t.next(r),n<=i&&t.complete())}))})}function pf(...n){const e=jl(n);return re((t,i)=>{(e?lT(n,t,e):lT(n,t)).subscribe(i)})}function Is(n,e){return re((t,i)=>{let r=0;t.subscribe(ye(i,s=>n.call(e,s,r++)&&i.next(s)))})}function cT(n){return re((e,t)=>{let i=!1;e.subscribe(ye(t,r=>{i=!0,t.next(r)},()=>{i||t.next(n),t.complete()}))})}function Vz(n=$se){return re((e,t)=>{let i=!1;e.subscribe(ye(t,r=>{i=!0,t.next(r)},()=>i?t.complete():t.error(n())))})}function $se(){return new aT}function Dd(n,e){const t=arguments.length>=2;return i=>i.pipe(n?Is((r,s)=>n(r,s,i)):qe,ml(1),t?cT(e):Vz(()=>new aT))}function ig(n,e){return H(e)?Pr(n,e,1):Pr(n,1)}function as(n,e,t){const i=H(n)||e||t?{next:n,error:e,complete:t}:n;return i?re((r,s)=>{var o;null===(o=i.subscribe)||void 0===o||o.call(i);let a=!0;r.subscribe(ye(s,l=>{var c;null===(c=i.next)||void 0===c||c.call(i,l),s.next(l)},()=>{var l;a=!1,null===(l=i.complete)||void 0===l||l.call(i),s.complete()},l=>{var c;a=!1,null===(c=i.error)||void 0===c||c.call(i,l),s.error(l)},()=>{var l,c;a&&(null===(l=i.unsubscribe)||void 0===l||l.call(i)),null===(c=i.finalize)||void 0===c||c.call(i)}))}):qe}function Rd(n){return re((e,t)=>{let s,i=null,r=!1;i=e.subscribe(ye(t,void 0,void 0,o=>{s=Mi(n(o,Rd(n)(e))),i?(i.unsubscribe(),i=null,s.subscribe(t)):r=!0})),r&&(i.unsubscribe(),i=null,s.subscribe(t))})}function uT(n,e){return re(function qse(n,e,t,i,r){return(s,o)=>{let a=t,l=e,c=0;s.subscribe(ye(o,u=>{const d=c++;l=a?n(l,u,d):(a=!0,u),i&&o.next(l)},r&&(()=>{a&&o.next(l),o.complete()})))}}(n,e,arguments.length>=2,!0))}function K1(n){return n<=0?()=>kr:re((e,t)=>{let i=[];e.subscribe(ye(t,r=>{i.push(r),n<i.length&&i.shift()},()=>{for(const r of i)t.next(r);t.complete()},void 0,()=>{i=null}))})}function rg(n){return re((e,t)=>{try{e.subscribe(t)}finally{t.add(n)}})}function zo(n){return re((e,t)=>{Mi(n).subscribe(ye(t,()=>t.complete(),Xt)),!t.closed&&e.subscribe(t)})}const Yn="primary",a0=Symbol("RouteTitle");class Yse{constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t[0]:t}return null}getAll(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t:[t]}return[]}get keys(){return Object.keys(this.params)}}function sg(n){return new Yse(n)}function Qse(n,e,t){const i=t.path.split("/");if(i.length>n.length||"full"===t.pathMatch&&(e.hasChildren()||i.length<n.length))return null;const r={};for(let s=0;s<i.length;s++){const o=i[s],a=n[s];if(o.startsWith(":"))r[o.substring(1)]=a;else if(o!==a.path)return null}return{consumed:n.slice(0,i.length),posParams:r}}function hc(n,e){const t=n?Object.keys(n):void 0,i=e?Object.keys(e):void 0;if(!t||!i||t.length!=i.length)return!1;let r;for(let s=0;s<t.length;s++)if(r=t[s],!Uz(n[r],e[r]))return!1;return!0}function Uz(n,e){if(Array.isArray(n)&&Array.isArray(e)){if(n.length!==e.length)return!1;const t=[...n].sort(),i=[...e].sort();return t.every((r,s)=>i[s]===r)}return n===e}function Bz(n){return n.length>0?n[n.length-1]:null}function Pd(n){return function kz(n){return!!n&&(n instanceof xt||H(n.lift)&&H(n.subscribe))}(n)?n:By(n)?q(Promise.resolve(n)):ne(n)}const Jse={exact:function Gz(n,e,t){if(!mf(n.segments,e.segments)||!dT(n.segments,e.segments,t)||n.numberOfChildren!==e.numberOfChildren)return!1;for(const i in e.children)if(!n.children[i]||!Gz(n.children[i],e.children[i],t))return!1;return!0},subset:Wz},zz={exact:function eoe(n,e){return hc(n,e)},subset:function toe(n,e){return Object.keys(e).length<=Object.keys(n).length&&Object.keys(e).every(t=>Uz(n[t],e[t]))},ignored:()=>!0};function Hz(n,e,t){return Jse[t.paths](n.root,e.root,t.matrixParams)&&zz[t.queryParams](n.queryParams,e.queryParams)&&!("exact"===t.fragment&&n.fragment!==e.fragment)}function Wz(n,e,t){return jz(n,e,e.segments,t)}function jz(n,e,t,i){if(n.segments.length>t.length){const r=n.segments.slice(0,t.length);return!(!mf(r,t)||e.hasChildren()||!dT(r,t,i))}if(n.segments.length===t.length){if(!mf(n.segments,t)||!dT(n.segments,t,i))return!1;for(const r in e.children)if(!n.children[r]||!Wz(n.children[r],e.children[r],i))return!1;return!0}{const r=t.slice(0,n.segments.length),s=t.slice(n.segments.length);return!!(mf(n.segments,r)&&dT(n.segments,r,i)&&n.children[Yn])&&jz(n.children[Yn],e,s,i)}}function dT(n,e,t){return e.every((i,r)=>zz[t](n[r].parameters,i.parameters))}class og{constructor(e=new Ji([],{}),t={},i=null){this.root=e,this.queryParams=t,this.fragment=i}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=sg(this.queryParams)),this._queryParamMap}toString(){return roe.serialize(this)}}class Ji{constructor(e,t){this.segments=e,this.children=t,this.parent=null,Object.values(t).forEach(i=>i.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return hT(this)}}class l0{constructor(e,t){this.path=e,this.parameters=t}get parameterMap(){return this._parameterMap||(this._parameterMap=sg(this.parameters)),this._parameterMap}toString(){return Xz(this)}}function mf(n,e){return n.length===e.length&&n.every((t,i)=>t.path===e[i].path)}let c0=(()=>{class n{static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275prov=dt({token:n,factory:function(){return new Y1},providedIn:"root"})}}return n})();class Y1{parse(e){const t=new moe(e);return new og(t.parseRootSegment(),t.parseQueryParams(),t.parseFragment())}serialize(e){const t=`/${u0(e.root,!0)}`,i=function aoe(n){const e=Object.keys(n).map(t=>{const i=n[t];return Array.isArray(i)?i.map(r=>`${fT(t)}=${fT(r)}`).join("&"):`${fT(t)}=${fT(i)}`}).filter(t=>!!t);return e.length?`?${e.join("&")}`:""}(e.queryParams);return`${t}${i}${"string"==typeof e.fragment?`#${function soe(n){return encodeURI(n)}(e.fragment)}`:""}`}}const roe=new Y1;function hT(n){return n.segments.map(e=>Xz(e)).join("/")}function u0(n,e){if(!n.hasChildren())return hT(n);if(e){const t=n.children[Yn]?u0(n.children[Yn],!1):"",i=[];return Object.entries(n.children).forEach(([r,s])=>{r!==Yn&&i.push(`${r}:${u0(s,!1)}`)}),i.length>0?`${t}(${i.join("//")})`:t}{const t=function ioe(n,e){let t=[];return Object.entries(n.children).forEach(([i,r])=>{i===Yn&&(t=t.concat(e(r,i)))}),Object.entries(n.children).forEach(([i,r])=>{i!==Yn&&(t=t.concat(e(r,i)))}),t}(n,(i,r)=>r===Yn?[u0(n.children[Yn],!1)]:[`${r}:${u0(i,!1)}`]);return 1===Object.keys(n.children).length&&null!=n.children[Yn]?`${hT(n)}/${t[0]}`:`${hT(n)}/(${t.join("//")})`}}function $z(n){return encodeURIComponent(n).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function fT(n){return $z(n).replace(/%3B/gi,";")}function Q1(n){return $z(n).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function pT(n){return decodeURIComponent(n)}function qz(n){return pT(n.replace(/\+/g,"%20"))}function Xz(n){return`${Q1(n.path)}${function ooe(n){return Object.keys(n).map(e=>`;${Q1(e)}=${Q1(n[e])}`).join("")}(n.parameters)}`}const loe=/^[^\/()?;#]+/;function Z1(n){const e=n.match(loe);return e?e[0]:""}const coe=/^[^\/()?;=#]+/,doe=/^[^=?&#]+/,foe=/^[^&#]+/;class moe{constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new Ji([],{}):new Ji([],this.parseChildren())}parseQueryParams(){const e={};if(this.consumeOptional("?"))do{this.parseQueryParam(e)}while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let t={};this.peekStartsWith("/(")&&(this.capture("/"),t=this.parseParens(!0));let i={};return this.peekStartsWith("(")&&(i=this.parseParens(!1)),(e.length>0||Object.keys(t).length>0)&&(i[Yn]=new Ji(e,t)),i}parseSegment(){const e=Z1(this.remaining);if(""===e&&this.peekStartsWith(";"))throw new Ce(4009,!1);return this.capture(e),new l0(pT(e),this.parseMatrixParams())}parseMatrixParams(){const e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){const t=function uoe(n){const e=n.match(coe);return e?e[0]:""}(this.remaining);if(!t)return;this.capture(t);let i="";if(this.consumeOptional("=")){const r=Z1(this.remaining);r&&(i=r,this.capture(i))}e[pT(t)]=pT(i)}parseQueryParam(e){const t=function hoe(n){const e=n.match(doe);return e?e[0]:""}(this.remaining);if(!t)return;this.capture(t);let i="";if(this.consumeOptional("=")){const o=function poe(n){const e=n.match(foe);return e?e[0]:""}(this.remaining);o&&(i=o,this.capture(i))}const r=qz(t),s=qz(i);if(e.hasOwnProperty(r)){let o=e[r];Array.isArray(o)||(o=[o],e[r]=o),o.push(s)}else e[r]=s}parseParens(e){const t={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const i=Z1(this.remaining),r=this.remaining[i.length];if("/"!==r&&")"!==r&&";"!==r)throw new Ce(4010,!1);let s;i.indexOf(":")>-1?(s=i.slice(0,i.indexOf(":")),this.capture(s),this.capture(":")):e&&(s=Yn);const o=this.parseChildren();t[s]=1===Object.keys(o).length?o[Yn]:new Ji([],o),this.consumeOptional("//")}return t}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return!!this.peekStartsWith(e)&&(this.remaining=this.remaining.substring(e.length),!0)}capture(e){if(!this.consumeOptional(e))throw new Ce(4011,!1)}}function Kz(n){return n.segments.length>0?new Ji([],{[Yn]:n}):n}function Yz(n){const e={};for(const i of Object.keys(n.children)){const s=Yz(n.children[i]);if(i===Yn&&0===s.segments.length&&s.hasChildren())for(const[o,a]of Object.entries(s.children))e[o]=a;else(s.segments.length>0||s.hasChildren())&&(e[i]=s)}return function goe(n){if(1===n.numberOfChildren&&n.children[Yn]){const e=n.children[Yn];return new Ji(n.segments.concat(e.segments),e.children)}return n}(new Ji(n.segments,e))}function gf(n){return n instanceof og}function Qz(n){let e;const r=Kz(function t(s){const o={};for(const l of s.children){const c=t(l);o[l.outlet]=c}const a=new Ji(s.url,o);return s===n&&(e=a),a}(n.root));return e??r}function Zz(n,e,t,i){let r=n;for(;r.parent;)r=r.parent;if(0===e.length)return J1(r,r,r,t,i);const s=function voe(n){if("string"==typeof n[0]&&1===n.length&&"/"===n[0])return new eH(!0,0,n);let e=0,t=!1;const i=n.reduce((r,s,o)=>{if("object"==typeof s&&null!=s){if(s.outlets){const a={};return Object.entries(s.outlets).forEach(([l,c])=>{a[l]="string"==typeof c?c.split("/"):c}),[...r,{outlets:a}]}if(s.segmentPath)return[...r,s.segmentPath]}return"string"!=typeof s?[...r,s]:0===o?(s.split("/").forEach((a,l)=>{0==l&&"."===a||(0==l&&""===a?t=!0:".."===a?e++:""!=a&&r.push(a))}),r):[...r,s]},[]);return new eH(t,e,i)}(e);if(s.toRoot())return J1(r,r,new Ji([],{}),t,i);const o=function yoe(n,e,t){if(n.isAbsolute)return new gT(e,!0,0);if(!t)return new gT(e,!1,NaN);if(null===t.parent)return new gT(t,!0,0);const i=mT(n.commands[0])?0:1;return function boe(n,e,t){let i=n,r=e,s=t;for(;s>r;){if(s-=r,i=i.parent,!i)throw new Ce(4005,!1);r=i.segments.length}return new gT(i,!1,r-s)}(t,t.segments.length-1+i,n.numberOfDoubleDots)}(s,r,n),a=o.processChildren?h0(o.segmentGroup,o.index,s.commands):tH(o.segmentGroup,o.index,s.commands);return J1(r,o.segmentGroup,a,t,i)}function mT(n){return"object"==typeof n&&null!=n&&!n.outlets&&!n.segmentPath}function d0(n){return"object"==typeof n&&null!=n&&n.outlets}function J1(n,e,t,i,r){let o,s={};i&&Object.entries(i).forEach(([l,c])=>{s[l]=Array.isArray(c)?c.map(u=>`${u}`):`${c}`}),o=n===e?t:Jz(n,e,t);const a=Kz(Yz(o));return new og(a,s,r)}function Jz(n,e,t){const i={};return Object.entries(n.children).forEach(([r,s])=>{i[r]=s===e?t:Jz(s,e,t)}),new Ji(n.segments,i)}class eH{constructor(e,t,i){if(this.isAbsolute=e,this.numberOfDoubleDots=t,this.commands=i,e&&i.length>0&&mT(i[0]))throw new Ce(4003,!1);const r=i.find(d0);if(r&&r!==Bz(i))throw new Ce(4004,!1)}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class gT{constructor(e,t,i){this.segmentGroup=e,this.processChildren=t,this.index=i}}function tH(n,e,t){if(n||(n=new Ji([],{})),0===n.segments.length&&n.hasChildren())return h0(n,e,t);const i=function woe(n,e,t){let i=0,r=e;const s={match:!1,pathIndex:0,commandIndex:0};for(;r<n.segments.length;){if(i>=t.length)return s;const o=n.segments[r],a=t[i];if(d0(a))break;const l=`${a}`,c=i<t.length-1?t[i+1]:null;if(r>0&&void 0===l)break;if(l&&c&&"object"==typeof c&&void 0===c.outlets){if(!iH(l,c,o))return s;i+=2}else{if(!iH(l,{},o))return s;i++}r++}return{match:!0,pathIndex:r,commandIndex:i}}(n,e,t),r=t.slice(i.commandIndex);if(i.match&&i.pathIndex<n.segments.length){const s=new Ji(n.segments.slice(0,i.pathIndex),{});return s.children[Yn]=new Ji(n.segments.slice(i.pathIndex),n.children),h0(s,0,r)}return i.match&&0===r.length?new Ji(n.segments,{}):i.match&&!n.hasChildren()?eR(n,e,t):i.match?h0(n,0,r):eR(n,e,t)}function h0(n,e,t){if(0===t.length)return new Ji(n.segments,{});{const i=function xoe(n){return d0(n[0])?n[0].outlets:{[Yn]:n}}(t),r={};if(Object.keys(i).some(s=>s!==Yn)&&n.children[Yn]&&1===n.numberOfChildren&&0===n.children[Yn].segments.length){const s=h0(n.children[Yn],e,t);return new Ji(n.segments,s.children)}return Object.entries(i).forEach(([s,o])=>{"string"==typeof o&&(o=[o]),null!==o&&(r[s]=tH(n.children[s],e,o))}),Object.entries(n.children).forEach(([s,o])=>{void 0===i[s]&&(r[s]=o)}),new Ji(n.segments,r)}}function eR(n,e,t){const i=n.segments.slice(0,e);let r=0;for(;r<t.length;){const s=t[r];if(d0(s)){const l=Eoe(s.outlets);return new Ji(i,l)}if(0===r&&mT(t[0])){i.push(new l0(n.segments[e].path,nH(t[0]))),r++;continue}const o=d0(s)?s.outlets[Yn]:`${s}`,a=r<t.length-1?t[r+1]:null;o&&a&&mT(a)?(i.push(new l0(o,nH(a))),r+=2):(i.push(new l0(o,{})),r++)}return new Ji(i,{})}function Eoe(n){const e={};return Object.entries(n).forEach(([t,i])=>{"string"==typeof i&&(i=[i]),null!==i&&(e[t]=eR(new Ji([],{}),0,i))}),e}function nH(n){const e={};return Object.entries(n).forEach(([t,i])=>e[t]=`${i}`),e}function iH(n,e,t){return n==t.path&&hc(e,t.parameters)}const f0="imperative";class fc{constructor(e,t){this.id=e,this.url=t}}class _T extends fc{constructor(e,t,i="imperative",r=null){super(e,t),this.type=0,this.navigationTrigger=i,this.restoredState=r}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class kd extends fc{constructor(e,t,i){super(e,t),this.urlAfterRedirects=i,this.type=1}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class p0 extends fc{constructor(e,t,i,r){super(e,t),this.reason=i,this.code=r,this.type=2}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class ag extends fc{constructor(e,t,i,r){super(e,t),this.reason=i,this.code=r,this.type=16}}class vT extends fc{constructor(e,t,i,r){super(e,t),this.error=i,this.target=r,this.type=3}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class rH extends fc{constructor(e,t,i,r){super(e,t),this.urlAfterRedirects=i,this.state=r,this.type=4}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Toe extends fc{constructor(e,t,i,r){super(e,t),this.urlAfterRedirects=i,this.state=r,this.type=7}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Soe extends fc{constructor(e,t,i,r,s){super(e,t),this.urlAfterRedirects=i,this.state=r,this.shouldActivate=s,this.type=8}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class Aoe extends fc{constructor(e,t,i,r){super(e,t),this.urlAfterRedirects=i,this.state=r,this.type=5}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Ioe extends fc{constructor(e,t,i,r){super(e,t),this.urlAfterRedirects=i,this.state=r,this.type=6}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Coe{constructor(e){this.route=e,this.type=9}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class Moe{constructor(e){this.route=e,this.type=10}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class Doe{constructor(e){this.snapshot=e,this.type=11}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Roe{constructor(e){this.snapshot=e,this.type=12}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Poe{constructor(e){this.snapshot=e,this.type=13}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class koe{constructor(e){this.snapshot=e,this.type=14}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class sH{constructor(e,t,i){this.routerEvent=e,this.position=t,this.anchor=i,this.type=15}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}class tR{}class nR{constructor(e){this.url=e}}class Ooe{constructor(){this.outlet=null,this.route=null,this.injector=null,this.children=new m0,this.attachRef=null}}let m0=(()=>{class n{constructor(){this.contexts=new Map}onChildOutletCreated(t,i){const r=this.getOrCreateContext(t);r.outlet=i,this.contexts.set(t,r)}onChildOutletDestroyed(t){const i=this.getContext(t);i&&(i.outlet=null,i.attachRef=null)}onOutletDeactivated(){const t=this.contexts;return this.contexts=new Map,t}onOutletReAttached(t){this.contexts=t}getOrCreateContext(t){let i=this.getContext(t);return i||(i=new Ooe,this.contexts.set(t,i)),i}getContext(t){return this.contexts.get(t)||null}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275prov=dt({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();class oH{constructor(e){this._root=e}get root(){return this._root.value}parent(e){const t=this.pathFromRoot(e);return t.length>1?t[t.length-2]:null}children(e){const t=iR(e,this._root);return t?t.children.map(i=>i.value):[]}firstChild(e){const t=iR(e,this._root);return t&&t.children.length>0?t.children[0].value:null}siblings(e){const t=rR(e,this._root);return t.length<2?[]:t[t.length-2].children.map(r=>r.value).filter(r=>r!==e)}pathFromRoot(e){return rR(e,this._root).map(t=>t.value)}}function iR(n,e){if(n===e.value)return e;for(const t of e.children){const i=iR(n,t);if(i)return i}return null}function rR(n,e){if(n===e.value)return[e];for(const t of e.children){const i=rR(n,t);if(i.length)return i.unshift(e),i}return[]}class vu{constructor(e,t){this.value=e,this.children=t}toString(){return`TreeNode(${this.value})`}}function lg(n){const e={};return n&&n.children.forEach(t=>e[t.value.outlet]=t),e}class aH extends oH{constructor(e,t){super(e),this.snapshot=t,sR(this,e)}toString(){return this.snapshot.toString()}}function lH(n,e){const t=function Noe(n,e){const o=new yT([],{},{},"",{},Yn,e,null,{});return new uH("",new vu(o,[]))}(0,e),i=new Z([new l0("",{})]),r=new Z({}),s=new Z({}),o=new Z({}),a=new Z(""),l=new _f(i,r,o,a,s,Yn,e,t.root);return l.snapshot=t.root,new aH(new vu(l,[]),t)}class _f{constructor(e,t,i,r,s,o,a,l){this.urlSubject=e,this.paramsSubject=t,this.queryParamsSubject=i,this.fragmentSubject=r,this.dataSubject=s,this.outlet=o,this.component=a,this._futureSnapshot=l,this.title=this.dataSubject?.pipe(Ge(c=>c[a0]))??ne(void 0),this.url=e,this.params=t,this.queryParams=i,this.fragment=r,this.data=s}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe(Ge(e=>sg(e)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe(Ge(e=>sg(e)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function cH(n,e="emptyOnly"){const t=n.pathFromRoot;let i=0;if("always"!==e)for(i=t.length-1;i>=1;){const r=t[i],s=t[i-1];if(r.routeConfig&&""===r.routeConfig.path)i--;else{if(s.component)break;i--}}return function Foe(n){return n.reduce((e,t)=>({params:{...e.params,...t.params},data:{...e.data,...t.data},resolve:{...t.data,...e.resolve,...t.routeConfig?.data,...t._resolvedData}}),{params:{},data:{},resolve:{}})}(t.slice(i))}class yT{get title(){return this.data?.[a0]}constructor(e,t,i,r,s,o,a,l,c){this.url=e,this.params=t,this.queryParams=i,this.fragment=r,this.data=s,this.outlet=o,this.component=a,this.routeConfig=l,this._resolve=c}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=sg(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=sg(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(i=>i.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class uH extends oH{constructor(e,t){super(t),this.url=e,sR(this,t)}toString(){return dH(this._root)}}function sR(n,e){e.value._routerState=n,e.children.forEach(t=>sR(n,t))}function dH(n){const e=n.children.length>0?` { ${n.children.map(dH).join(", ")} } `:"";return`${n.value}${e}`}function oR(n){if(n.snapshot){const e=n.snapshot,t=n._futureSnapshot;n.snapshot=t,hc(e.queryParams,t.queryParams)||n.queryParamsSubject.next(t.queryParams),e.fragment!==t.fragment&&n.fragmentSubject.next(t.fragment),hc(e.params,t.params)||n.paramsSubject.next(t.params),function Zse(n,e){if(n.length!==e.length)return!1;for(let t=0;t<n.length;++t)if(!hc(n[t],e[t]))return!1;return!0}(e.url,t.url)||n.urlSubject.next(t.url),hc(e.data,t.data)||n.dataSubject.next(t.data)}else n.snapshot=n._futureSnapshot,n.dataSubject.next(n._futureSnapshot.data)}function aR(n,e){const t=hc(n.params,e.params)&&function noe(n,e){return mf(n,e)&&n.every((t,i)=>hc(t.parameters,e[i].parameters))}(n.url,e.url);return t&&!(!n.parent!=!e.parent)&&(!n.parent||aR(n.parent,e.parent))}let lR=(()=>{class n{constructor(){this.activated=null,this._activatedRoute=null,this.name=Yn,this.activateEvents=new gi,this.deactivateEvents=new gi,this.attachEvents=new gi,this.detachEvents=new gi,this.parentContexts=bt(m0),this.location=bt(hl),this.changeDetector=bt(fu),this.environmentInjector=bt(Da),this.inputBinder=bt(bT,{optional:!0}),this.supportsBindingToComponentInputs=!0}get activatedComponentRef(){return this.activated}ngOnChanges(t){if(t.name){const{firstChange:i,previousValue:r}=t.name;if(i)return;this.isTrackedInParentContexts(r)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(r)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name),this.inputBinder?.unsubscribeFromRouteData(this)}isTrackedInParentContexts(t){return this.parentContexts.getContext(t)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;const t=this.parentContexts.getContext(this.name);t?.route&&(t.attachRef?this.attach(t.attachRef,t.route):this.activateWith(t.route,t.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new Ce(4012,!1);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new Ce(4012,!1);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new Ce(4012,!1);this.location.detach();const t=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(t.instance),t}attach(t,i){this.activated=t,this._activatedRoute=i,this.location.insert(t.hostView),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.attachEvents.emit(t.instance)}deactivate(){if(this.activated){const t=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(t)}}activateWith(t,i){if(this.isActivated)throw new Ce(4013,!1);this._activatedRoute=t;const r=this.location,o=t.snapshot.component,a=this.parentContexts.getOrCreateContext(this.name).children,l=new Loe(t,a,r.injector);this.activated=r.createComponent(o,{index:r.length,injector:l,environmentInjector:i??this.environmentInjector}),this.changeDetector.markForCheck(),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.activateEvents.emit(this.activated.instance)}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275dir=St({type:n,selectors:[["router-outlet"]],inputs:{name:"name"},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],standalone:!0,features:[Ps]})}}return n})();class Loe{constructor(e,t,i){this.route=e,this.childContexts=t,this.parent=i}get(e,t){return e===_f?this.route:e===m0?this.childContexts:this.parent.get(e,t)}}const bT=new Fe("");let hH=(()=>{class n{constructor(){this.outletDataSubscriptions=new Map}bindActivatedRouteToOutletComponent(t){this.unsubscribeFromRouteData(t),this.subscribeToRouteData(t)}unsubscribeFromRouteData(t){this.outletDataSubscriptions.get(t)?.unsubscribe(),this.outletDataSubscriptions.delete(t)}subscribeToRouteData(t){const{activatedRoute:i}=t,r=oT([i.queryParams,i.params,i.data]).pipe(Mt(([s,o,a],l)=>(a={...s,...o,...a},0===l?ne(a):Promise.resolve(a)))).subscribe(s=>{if(!t.isActivated||!t.activatedComponentRef||t.activatedRoute!==i||null===i.component)return void this.unsubscribeFromRouteData(t);const o=function gie(n){const e=mi(n);if(!e)return null;const t=new ky(e);return{get selector(){return t.selector},get type(){return t.componentType},get inputs(){return t.inputs},get outputs(){return t.outputs},get ngContentSelectors(){return t.ngContentSelectors},get isStandalone(){return e.standalone},get isSignal(){return e.signals}}}(i.component);if(o)for(const{templateName:a}of o.inputs)t.activatedComponentRef.setInput(a,s[a]);else this.unsubscribeFromRouteData(t)});this.outletDataSubscriptions.set(t,r)}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275prov=dt({token:n,factory:n.\u0275fac})}}return n})();function g0(n,e,t){if(t&&n.shouldReuseRoute(e.value,t.value.snapshot)){const i=t.value;i._futureSnapshot=e.value;const r=function Uoe(n,e,t){return e.children.map(i=>{for(const r of t.children)if(n.shouldReuseRoute(i.value,r.value.snapshot))return g0(n,i,r);return g0(n,i)})}(n,e,t);return new vu(i,r)}{if(n.shouldAttach(e.value)){const s=n.retrieve(e.value);if(null!==s){const o=s.route;return o.value._futureSnapshot=e.value,o.children=e.children.map(a=>g0(n,a)),o}}const i=function Boe(n){return new _f(new Z(n.url),new Z(n.params),new Z(n.queryParams),new Z(n.fragment),new Z(n.data),n.outlet,n.component,n)}(e.value),r=e.children.map(s=>g0(n,s));return new vu(i,r)}}const cR="ngNavigationCancelingError";function fH(n,e){const{redirectTo:t,navigationBehaviorOptions:i}=gf(e)?{redirectTo:e,navigationBehaviorOptions:void 0}:e,r=pH(!1,0,e);return r.url=t,r.navigationBehaviorOptions=i,r}function pH(n,e,t){const i=new Error("NavigationCancelingError: "+(n||""));return i[cR]=!0,i.cancellationCode=e,t&&(i.url=t),i}function mH(n){return n&&n[cR]}let gH=(()=>{class n{static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275cmp=hr({type:n,selectors:[["ng-component"]],standalone:!0,features:[kE],decls:1,vars:0,template:function(i,r){1&i&&Ri(0,"router-outlet")},dependencies:[lR],encapsulation:2})}}return n})();function uR(n){const e=n.children&&n.children.map(uR),t=e?{...n,children:e}:{...n};return!t.component&&!t.loadComponent&&(e||t.loadChildren)&&t.outlet&&t.outlet!==Yn&&(t.component=gH),t}function Nl(n){return n.outlet||Yn}function _0(n){if(!n)return null;if(n.routeConfig?._injector)return n.routeConfig._injector;for(let e=n.parent;e;e=e.parent){const t=e.routeConfig;if(t?._loadedInjector)return t._loadedInjector;if(t?._injector)return t._injector}return null}class Xoe{constructor(e,t,i,r,s){this.routeReuseStrategy=e,this.futureState=t,this.currState=i,this.forwardEvent=r,this.inputBindingEnabled=s}activate(e){const t=this.futureState._root,i=this.currState?this.currState._root:null;this.deactivateChildRoutes(t,i,e),oR(this.futureState.root),this.activateChildRoutes(t,i,e)}deactivateChildRoutes(e,t,i){const r=lg(t);e.children.forEach(s=>{const o=s.value.outlet;this.deactivateRoutes(s,r[o],i),delete r[o]}),Object.values(r).forEach(s=>{this.deactivateRouteAndItsChildren(s,i)})}deactivateRoutes(e,t,i){const r=e.value,s=t?t.value:null;if(r===s)if(r.component){const o=i.getContext(r.outlet);o&&this.deactivateChildRoutes(e,t,o.children)}else this.deactivateChildRoutes(e,t,i);else s&&this.deactivateRouteAndItsChildren(t,i)}deactivateRouteAndItsChildren(e,t){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,t):this.deactivateRouteAndOutlet(e,t)}detachAndStoreRouteSubtree(e,t){const i=t.getContext(e.value.outlet),r=i&&e.value.component?i.children:t,s=lg(e);for(const o of Object.keys(s))this.deactivateRouteAndItsChildren(s[o],r);if(i&&i.outlet){const o=i.outlet.detach(),a=i.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:o,route:e,contexts:a})}}deactivateRouteAndOutlet(e,t){const i=t.getContext(e.value.outlet),r=i&&e.value.component?i.children:t,s=lg(e);for(const o of Object.keys(s))this.deactivateRouteAndItsChildren(s[o],r);i&&(i.outlet&&(i.outlet.deactivate(),i.children.onOutletDeactivated()),i.attachRef=null,i.route=null)}activateChildRoutes(e,t,i){const r=lg(t);e.children.forEach(s=>{this.activateRoutes(s,r[s.value.outlet],i),this.forwardEvent(new koe(s.value.snapshot))}),e.children.length&&this.forwardEvent(new Roe(e.value.snapshot))}activateRoutes(e,t,i){const r=e.value,s=t?t.value:null;if(oR(r),r===s)if(r.component){const o=i.getOrCreateContext(r.outlet);this.activateChildRoutes(e,t,o.children)}else this.activateChildRoutes(e,t,i);else if(r.component){const o=i.getOrCreateContext(r.outlet);if(this.routeReuseStrategy.shouldAttach(r.snapshot)){const a=this.routeReuseStrategy.retrieve(r.snapshot);this.routeReuseStrategy.store(r.snapshot,null),o.children.onOutletReAttached(a.contexts),o.attachRef=a.componentRef,o.route=a.route.value,o.outlet&&o.outlet.attach(a.componentRef,a.route.value),oR(a.route.value),this.activateChildRoutes(e,null,o.children)}else{const a=_0(r.snapshot);o.attachRef=null,o.route=r,o.injector=a,o.outlet&&o.outlet.activateWith(r,o.injector),this.activateChildRoutes(e,null,o.children)}}else this.activateChildRoutes(e,null,i)}}class _H{constructor(e){this.path=e,this.route=this.path[this.path.length-1]}}class xT{constructor(e,t){this.component=e,this.route=t}}function Koe(n,e,t){const i=n._root;return v0(i,e?e._root:null,t,[i.value])}function cg(n,e){const t=Symbol(),i=e.get(n,t);return i===t?"function"!=typeof n||function yC(n){return null!==Dp(n)}(n)?e.get(n):n:i}function v0(n,e,t,i,r={canDeactivateChecks:[],canActivateChecks:[]}){const s=lg(e);return n.children.forEach(o=>{(function Qoe(n,e,t,i,r={canDeactivateChecks:[],canActivateChecks:[]}){const s=n.value,o=e?e.value:null,a=t?t.getContext(n.value.outlet):null;if(o&&s.routeConfig===o.routeConfig){const l=function Zoe(n,e,t){if("function"==typeof t)return t(n,e);switch(t){case"pathParamsChange":return!mf(n.url,e.url);case"pathParamsOrQueryParamsChange":return!mf(n.url,e.url)||!hc(n.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!aR(n,e)||!hc(n.queryParams,e.queryParams);default:return!aR(n,e)}}(o,s,s.routeConfig.runGuardsAndResolvers);l?r.canActivateChecks.push(new _H(i)):(s.data=o.data,s._resolvedData=o._resolvedData),v0(n,e,s.component?a?a.children:null:t,i,r),l&&a&&a.outlet&&a.outlet.isActivated&&r.canDeactivateChecks.push(new xT(a.outlet.component,o))}else o&&y0(e,a,r),r.canActivateChecks.push(new _H(i)),v0(n,null,s.component?a?a.children:null:t,i,r)})(o,s[o.value.outlet],t,i.concat([o.value]),r),delete s[o.value.outlet]}),Object.entries(s).forEach(([o,a])=>y0(a,t.getContext(o),r)),r}function y0(n,e,t){const i=lg(n),r=n.value;Object.entries(i).forEach(([s,o])=>{y0(o,r.component?e?e.children.getContext(s):null:e,t)}),t.canDeactivateChecks.push(new xT(r.component&&e&&e.outlet&&e.outlet.isActivated?e.outlet.component:null,r))}function b0(n){return"function"==typeof n}function vH(n){return n instanceof aT||"EmptyError"===n?.name}const wT=Symbol("INITIAL_VALUE");function ug(){return Mt(n=>oT(n.map(e=>e.pipe(ml(1),pf(wT)))).pipe(Ge(e=>{for(const t of e)if(!0!==t){if(t===wT)return wT;if(!1===t||t instanceof og)return t}return!0}),Is(e=>e!==wT),ml(1)))}function yH(n){return function Be(...n){return nt(n)}(as(e=>{if(gf(e))throw fH(0,e)}),Ge(e=>!0===e))}class ET{constructor(e){this.segmentGroup=e||null}}class bH{constructor(e){this.urlTree=e}}function dg(n){return ng(new ET(n))}function xH(n){return ng(new bH(n))}class vae{constructor(e,t){this.urlSerializer=e,this.urlTree=t}noMatchError(e){return new Ce(4002,!1)}lineralizeSegments(e,t){let i=[],r=t.root;for(;;){if(i=i.concat(r.segments),0===r.numberOfChildren)return ne(i);if(r.numberOfChildren>1||!r.children[Yn])return ng(new Ce(4e3,!1));r=r.children[Yn]}}applyRedirectCommands(e,t,i){return this.applyRedirectCreateUrlTree(t,this.urlSerializer.parse(t),e,i)}applyRedirectCreateUrlTree(e,t,i,r){const s=this.createSegmentGroup(e,t.root,i,r);return new og(s,this.createQueryParams(t.queryParams,this.urlTree.queryParams),t.fragment)}createQueryParams(e,t){const i={};return Object.entries(e).forEach(([r,s])=>{if("string"==typeof s&&s.startsWith(":")){const a=s.substring(1);i[r]=t[a]}else i[r]=s}),i}createSegmentGroup(e,t,i,r){const s=this.createSegments(e,t.segments,i,r);let o={};return Object.entries(t.children).forEach(([a,l])=>{o[a]=this.createSegmentGroup(e,l,i,r)}),new Ji(s,o)}createSegments(e,t,i,r){return t.map(s=>s.path.startsWith(":")?this.findPosParam(e,s,r):this.findOrReturn(s,i))}findPosParam(e,t,i){const r=i[t.path.substring(1)];if(!r)throw new Ce(4001,!1);return r}findOrReturn(e,t){let i=0;for(const r of t){if(r.path===e.path)return t.splice(i),r;i++}return e}}const dR={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function yae(n,e,t,i,r){const s=hR(n,e,t);return s.matched?(i=function Hoe(n,e){return n.providers&&!n._injector&&(n._injector=zD(n.providers,e,`Route: ${n.path}`)),n._injector??e}(e,i),function mae(n,e,t,i){const r=e.canMatch;return r&&0!==r.length?ne(r.map(o=>{const a=cg(o,n);return Pd(function rae(n){return n&&b0(n.canMatch)}(a)?a.canMatch(e,t):n.runInContext(()=>a(e,t)))})).pipe(ug(),yH()):ne(!0)}(i,e,t).pipe(Ge(o=>!0===o?s:{...dR}))):ne(s)}function hR(n,e,t){if(""===e.path)return"full"===e.pathMatch&&(n.hasChildren()||t.length>0)?{...dR}:{matched:!0,consumedSegments:[],remainingSegments:t,parameters:{},positionalParamSegments:{}};const r=(e.matcher||Qse)(t,n,e);if(!r)return{...dR};const s={};Object.entries(r.posParams??{}).forEach(([a,l])=>{s[a]=l.path});const o=r.consumed.length>0?{...s,...r.consumed[r.consumed.length-1].parameters}:s;return{matched:!0,consumedSegments:r.consumed,remainingSegments:t.slice(r.consumed.length),parameters:o,positionalParamSegments:r.posParams??{}}}function wH(n,e,t,i){return t.length>0&&function wae(n,e,t){return t.some(i=>TT(n,e,i)&&Nl(i)!==Yn)}(n,t,i)?{segmentGroup:new Ji(e,xae(i,new Ji(t,n.children))),slicedSegments:[]}:0===t.length&&function Eae(n,e,t){return t.some(i=>TT(n,e,i))}(n,t,i)?{segmentGroup:new Ji(n.segments,bae(n,0,t,i,n.children)),slicedSegments:t}:{segmentGroup:new Ji(n.segments,n.children),slicedSegments:t}}function bae(n,e,t,i,r){const s={};for(const o of i)if(TT(n,t,o)&&!r[Nl(o)]){const a=new Ji([],{});s[Nl(o)]=a}return{...r,...s}}function xae(n,e){const t={};t[Yn]=e;for(const i of n)if(""===i.path&&Nl(i)!==Yn){const r=new Ji([],{});t[Nl(i)]=r}return t}function TT(n,e,t){return(!(n.hasChildren()||e.length>0)||"full"!==t.pathMatch)&&""===t.path}class Iae{constructor(e,t,i,r,s,o,a){this.injector=e,this.configLoader=t,this.rootComponentType=i,this.config=r,this.urlTree=s,this.paramsInheritanceStrategy=o,this.urlSerializer=a,this.allowRedirects=!0,this.applyRedirects=new vae(this.urlSerializer,this.urlTree)}noMatchError(e){return new Ce(4002,!1)}recognize(){const e=wH(this.urlTree.root,[],[],this.config).segmentGroup;return this.processSegmentGroup(this.injector,this.config,e,Yn).pipe(Rd(t=>{if(t instanceof bH)return this.allowRedirects=!1,this.urlTree=t.urlTree,this.match(t.urlTree);throw t instanceof ET?this.noMatchError(t):t}),Ge(t=>{const i=new yT([],Object.freeze({}),Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,{},Yn,this.rootComponentType,null,{}),r=new vu(i,t),s=new uH("",r),o=function _oe(n,e,t=null,i=null){return Zz(Qz(n),e,t,i)}(i,[],this.urlTree.queryParams,this.urlTree.fragment);return o.queryParams=this.urlTree.queryParams,s.url=this.urlSerializer.serialize(o),this.inheritParamsAndData(s._root),{state:s,tree:o}}))}match(e){return this.processSegmentGroup(this.injector,this.config,e.root,Yn).pipe(Rd(i=>{throw i instanceof ET?this.noMatchError(i):i}))}inheritParamsAndData(e){const t=e.value,i=cH(t,this.paramsInheritanceStrategy);t.params=Object.freeze(i.params),t.data=Object.freeze(i.data),e.children.forEach(r=>this.inheritParamsAndData(r))}processSegmentGroup(e,t,i,r){return 0===i.segments.length&&i.hasChildren()?this.processChildren(e,t,i):this.processSegment(e,t,i,i.segments,r,!0)}processChildren(e,t,i){const r=[];for(const s of Object.keys(i.children))"primary"===s?r.unshift(s):r.push(s);return q(r).pipe(ig(s=>{const o=i.children[s],a=function $oe(n,e){const t=n.filter(i=>Nl(i)===e);return t.push(...n.filter(i=>Nl(i)!==e)),t}(t,s);return this.processSegmentGroup(e,a,o,s)}),uT((s,o)=>(s.push(...o),s)),cT(null),function Xse(n,e){const t=arguments.length>=2;return i=>i.pipe(n?Is((r,s)=>n(r,s,i)):qe,K1(1),t?cT(e):Vz(()=>new aT))}(),Pr(s=>{if(null===s)return dg(i);const o=EH(s);return function Cae(n){n.sort((e,t)=>e.value.outlet===Yn?-1:t.value.outlet===Yn?1:e.value.outlet.localeCompare(t.value.outlet))}(o),ne(o)}))}processSegment(e,t,i,r,s,o){return q(t).pipe(ig(a=>this.processSegmentAgainstRoute(a._injector??e,t,a,i,r,s,o).pipe(Rd(l=>{if(l instanceof ET)return ne(null);throw l}))),Dd(a=>!!a),Rd(a=>{if(vH(a))return function Sae(n,e,t){return 0===e.length&&!n.children[t]}(i,r,s)?ne([]):dg(i);throw a}))}processSegmentAgainstRoute(e,t,i,r,s,o,a){return function Tae(n,e,t,i){return!!(Nl(n)===i||i!==Yn&&TT(e,t,n))&&("**"===n.path||hR(e,n,t).matched)}(i,r,s,o)?void 0===i.redirectTo?this.matchSegmentAgainstRoute(e,r,i,s,o,a):a&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(e,r,t,i,s,o):dg(r):dg(r)}expandSegmentAgainstRouteUsingRedirect(e,t,i,r,s,o){return"**"===r.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(e,i,r,o):this.expandRegularSegmentAgainstRouteUsingRedirect(e,t,i,r,s,o)}expandWildCardWithParamsAgainstRouteUsingRedirect(e,t,i,r){const s=this.applyRedirects.applyRedirectCommands([],i.redirectTo,{});return i.redirectTo.startsWith("/")?xH(s):this.applyRedirects.lineralizeSegments(i,s).pipe(Pr(o=>{const a=new Ji(o,{});return this.processSegment(e,t,a,o,r,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(e,t,i,r,s,o){const{matched:a,consumedSegments:l,remainingSegments:c,positionalParamSegments:u}=hR(t,r,s);if(!a)return dg(t);const d=this.applyRedirects.applyRedirectCommands(l,r.redirectTo,u);return r.redirectTo.startsWith("/")?xH(d):this.applyRedirects.lineralizeSegments(r,d).pipe(Pr(p=>this.processSegment(e,i,t,p.concat(c),o,!1)))}matchSegmentAgainstRoute(e,t,i,r,s,o){let a;if("**"===i.path){const l=r.length>0?Bz(r).parameters:{};a=ne({snapshot:new yT(r,l,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,TH(i),Nl(i),i.component??i._loadedComponent??null,i,SH(i)),consumedSegments:[],remainingSegments:[]}),t.children={}}else a=yae(t,i,r,e).pipe(Ge(({matched:l,consumedSegments:c,remainingSegments:u,parameters:d})=>l?{snapshot:new yT(c,d,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,TH(i),Nl(i),i.component??i._loadedComponent??null,i,SH(i)),consumedSegments:c,remainingSegments:u}:null));return a.pipe(Mt(l=>null===l?dg(t):this.getChildConfig(e=i._injector??e,i,r).pipe(Mt(({routes:c})=>{const u=i._loadedInjector??e,{snapshot:d,consumedSegments:p,remainingSegments:m}=l,{segmentGroup:v,slicedSegments:x}=wH(t,p,m,c);if(0===x.length&&v.hasChildren())return this.processChildren(u,c,v).pipe(Ge(w=>null===w?null:[new vu(d,w)]));if(0===c.length&&0===x.length)return ne([new vu(d,[])]);const b=Nl(i)===s;return this.processSegment(u,c,v,x,b?Yn:s,!0).pipe(Ge(w=>[new vu(d,w)]))}))))}getChildConfig(e,t,i){return t.children?ne({routes:t.children,injector:e}):t.loadChildren?void 0!==t._loadedRoutes?ne({routes:t._loadedRoutes,injector:t._loadedInjector}):function pae(n,e,t,i){const r=e.canLoad;return void 0===r||0===r.length?ne(!0):ne(r.map(o=>{const a=cg(o,n);return Pd(function eae(n){return n&&b0(n.canLoad)}(a)?a.canLoad(e,t):n.runInContext(()=>a(e,t)))})).pipe(ug(),yH())}(e,t,i).pipe(Pr(r=>r?this.configLoader.loadChildren(e,t).pipe(as(s=>{t._loadedRoutes=s.routes,t._loadedInjector=s.injector})):function _ae(n){return ng(pH(!1,3))}())):ne({routes:[],injector:e})}}function Mae(n){const e=n.value.routeConfig;return e&&""===e.path}function EH(n){const e=[],t=new Set;for(const i of n){if(!Mae(i)){e.push(i);continue}const r=e.find(s=>i.value.routeConfig===s.value.routeConfig);void 0!==r?(r.children.push(...i.children),t.add(r)):e.push(i)}for(const i of t){const r=EH(i.children);e.push(new vu(i.value,r))}return e.filter(i=>!t.has(i))}function TH(n){return n.data||{}}function SH(n){return n.resolve||{}}function AH(n){return"string"==typeof n.title||null===n.title}function fR(n){return Mt(e=>{const t=n(e);return t?q(t).pipe(Ge(()=>e)):ne(e)})}const hg=new Fe("ROUTES");let pR=(()=>{class n{constructor(){this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap,this.compiler=bt(r4)}loadComponent(t){if(this.componentLoaders.get(t))return this.componentLoaders.get(t);if(t._loadedComponent)return ne(t._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(t);const i=Pd(t.loadComponent()).pipe(Ge(IH),as(s=>{this.onLoadEndListener&&this.onLoadEndListener(t),t._loadedComponent=s}),rg(()=>{this.componentLoaders.delete(t)})),r=new Lz(i,()=>new Q).pipe(X1());return this.componentLoaders.set(t,r),r}loadChildren(t,i){if(this.childrenLoaders.get(i))return this.childrenLoaders.get(i);if(i._loadedRoutes)return ne({routes:i._loadedRoutes,injector:i._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(i);const s=function Fae(n,e,t,i){return Pd(n.loadChildren()).pipe(Ge(IH),Pr(r=>r instanceof h3||Array.isArray(r)?ne(r):q(e.compileModuleAsync(r))),Ge(r=>{i&&i(n);let s,o,a=!1;return Array.isArray(r)?(o=r,!0):(s=r.create(t).injector,o=s.get(hg,[],{optional:!0,self:!0}).flat()),{routes:o.map(uR),injector:s}}))}(i,this.compiler,t,this.onLoadEndListener).pipe(rg(()=>{this.childrenLoaders.delete(i)})),o=new Lz(s,()=>new Q).pipe(X1());return this.childrenLoaders.set(i,o),o}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275prov=dt({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function IH(n){return function Lae(n){return n&&"object"==typeof n&&"default"in n}(n)?n.default:n}let ST=(()=>{class n{get hasRequestedNavigation(){return 0!==this.navigationId}constructor(){this.currentNavigation=null,this.currentTransition=null,this.lastSuccessfulNavigation=null,this.events=new Q,this.transitionAbortSubject=new Q,this.configLoader=bt(pR),this.environmentInjector=bt(Da),this.urlSerializer=bt(c0),this.rootContexts=bt(m0),this.inputBindingEnabled=null!==bt(bT,{optional:!0}),this.navigationId=0,this.afterPreactivation=()=>ne(void 0),this.rootComponentType=null,this.configLoader.onLoadEndListener=r=>this.events.next(new Moe(r)),this.configLoader.onLoadStartListener=r=>this.events.next(new Coe(r))}complete(){this.transitions?.complete()}handleNavigationRequest(t){const i=++this.navigationId;this.transitions?.next({...this.transitions.value,...t,id:i})}setupNavigations(t,i,r){return this.transitions=new Z({id:0,currentUrlTree:i,currentRawUrl:i,currentBrowserUrl:i,extractedUrl:t.urlHandlingStrategy.extract(i),urlAfterRedirects:t.urlHandlingStrategy.extract(i),rawUrl:i,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:f0,restoredState:null,currentSnapshot:r.snapshot,targetSnapshot:null,currentRouterState:r,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.transitions.pipe(Is(s=>0!==s.id),Ge(s=>({...s,extractedUrl:t.urlHandlingStrategy.extract(s.rawUrl)})),Mt(s=>{this.currentTransition=s;let o=!1,a=!1;return ne(s).pipe(as(l=>{this.currentNavigation={id:l.id,initialUrl:l.rawUrl,extractedUrl:l.extractedUrl,trigger:l.source,extras:l.extras,previousNavigation:this.lastSuccessfulNavigation?{...this.lastSuccessfulNavigation,previousNavigation:null}:null}}),Mt(l=>{const c=l.currentBrowserUrl.toString(),u=!t.navigated||l.extractedUrl.toString()!==c||c!==l.currentUrlTree.toString();if(!u&&"reload"!==(l.extras.onSameUrlNavigation??t.onSameUrlNavigation)){const p="";return this.events.next(new ag(l.id,this.urlSerializer.serialize(l.rawUrl),p,0)),l.resolve(null),kr}if(t.urlHandlingStrategy.shouldProcessUrl(l.rawUrl))return ne(l).pipe(Mt(p=>{const m=this.transitions?.getValue();return this.events.next(new _T(p.id,this.urlSerializer.serialize(p.extractedUrl),p.source,p.restoredState)),m!==this.transitions?.getValue()?kr:Promise.resolve(p)}),function Dae(n,e,t,i,r,s){return Pr(o=>function Aae(n,e,t,i,r,s,o="emptyOnly"){return new Iae(n,e,t,i,r,o,s).recognize()}(n,e,t,i,o.extractedUrl,r,s).pipe(Ge(({state:a,tree:l})=>({...o,targetSnapshot:a,urlAfterRedirects:l}))))}(this.environmentInjector,this.configLoader,this.rootComponentType,t.config,this.urlSerializer,t.paramsInheritanceStrategy),as(p=>{s.targetSnapshot=p.targetSnapshot,s.urlAfterRedirects=p.urlAfterRedirects,this.currentNavigation={...this.currentNavigation,finalUrl:p.urlAfterRedirects};const m=new rH(p.id,this.urlSerializer.serialize(p.extractedUrl),this.urlSerializer.serialize(p.urlAfterRedirects),p.targetSnapshot);this.events.next(m)}));if(u&&t.urlHandlingStrategy.shouldProcessUrl(l.currentRawUrl)){const{id:p,extractedUrl:m,source:v,restoredState:x,extras:b}=l,w=new _T(p,this.urlSerializer.serialize(m),v,x);this.events.next(w);const T=lH(0,this.rootComponentType).snapshot;return this.currentTransition=s={...l,targetSnapshot:T,urlAfterRedirects:m,extras:{...b,skipLocationChange:!1,replaceUrl:!1}},ne(s)}{const p="";return this.events.next(new ag(l.id,this.urlSerializer.serialize(l.extractedUrl),p,1)),l.resolve(null),kr}}),as(l=>{const c=new Toe(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects),l.targetSnapshot);this.events.next(c)}),Ge(l=>(this.currentTransition=s={...l,guards:Koe(l.targetSnapshot,l.currentSnapshot,this.rootContexts)},s)),function oae(n,e){return Pr(t=>{const{targetSnapshot:i,currentSnapshot:r,guards:{canActivateChecks:s,canDeactivateChecks:o}}=t;return 0===o.length&&0===s.length?ne({...t,guardsResult:!0}):function aae(n,e,t,i){return q(n).pipe(Pr(r=>function fae(n,e,t,i,r){const s=e&&e.routeConfig?e.routeConfig.canDeactivate:null;return s&&0!==s.length?ne(s.map(a=>{const l=_0(e)??r,c=cg(a,l);return Pd(function iae(n){return n&&b0(n.canDeactivate)}(c)?c.canDeactivate(n,e,t,i):l.runInContext(()=>c(n,e,t,i))).pipe(Dd())})).pipe(ug()):ne(!0)}(r.component,r.route,t,e,i)),Dd(r=>!0!==r,!0))}(o,i,r,n).pipe(Pr(a=>a&&function Joe(n){return"boolean"==typeof n}(a)?function lae(n,e,t,i){return q(e).pipe(ig(r=>lT(function uae(n,e){return null!==n&&e&&e(new Doe(n)),ne(!0)}(r.route.parent,i),function cae(n,e){return null!==n&&e&&e(new Poe(n)),ne(!0)}(r.route,i),function hae(n,e,t){const i=e[e.length-1],s=e.slice(0,e.length-1).reverse().map(o=>function Yoe(n){const e=n.routeConfig?n.routeConfig.canActivateChild:null;return e&&0!==e.length?{node:n,guards:e}:null}(o)).filter(o=>null!==o).map(o=>q1(()=>ne(o.guards.map(l=>{const c=_0(o.node)??t,u=cg(l,c);return Pd(function nae(n){return n&&b0(n.canActivateChild)}(u)?u.canActivateChild(i,n):c.runInContext(()=>u(i,n))).pipe(Dd())})).pipe(ug())));return ne(s).pipe(ug())}(n,r.path,t),function dae(n,e,t){const i=e.routeConfig?e.routeConfig.canActivate:null;if(!i||0===i.length)return ne(!0);const r=i.map(s=>q1(()=>{const o=_0(e)??t,a=cg(s,o);return Pd(function tae(n){return n&&b0(n.canActivate)}(a)?a.canActivate(e,n):o.runInContext(()=>a(e,n))).pipe(Dd())}));return ne(r).pipe(ug())}(n,r.route,t))),Dd(r=>!0!==r,!0))}(i,s,n,e):ne(a)),Ge(a=>({...t,guardsResult:a})))})}(this.environmentInjector,l=>this.events.next(l)),as(l=>{if(s.guardsResult=l.guardsResult,gf(l.guardsResult))throw fH(0,l.guardsResult);const c=new Soe(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects),l.targetSnapshot,!!l.guardsResult);this.events.next(c)}),Is(l=>!!l.guardsResult||(this.cancelNavigationTransition(l,"",3),!1)),fR(l=>{if(l.guards.canActivateChecks.length)return ne(l).pipe(as(c=>{const u=new Aoe(c.id,this.urlSerializer.serialize(c.extractedUrl),this.urlSerializer.serialize(c.urlAfterRedirects),c.targetSnapshot);this.events.next(u)}),Mt(c=>{let u=!1;return ne(c).pipe(function Rae(n,e){return Pr(t=>{const{targetSnapshot:i,guards:{canActivateChecks:r}}=t;if(!r.length)return ne(t);let s=0;return q(r).pipe(ig(o=>function Pae(n,e,t,i){const r=n.routeConfig,s=n._resolve;return void 0!==r?.title&&!AH(r)&&(s[a0]=r.title),function kae(n,e,t,i){const r=function Oae(n){return[...Object.keys(n),...Object.getOwnPropertySymbols(n)]}(n);if(0===r.length)return ne({});const s={};return q(r).pipe(Pr(o=>function Nae(n,e,t,i){const r=_0(e)??i,s=cg(n,r);return Pd(s.resolve?s.resolve(e,t):r.runInContext(()=>s(e,t)))}(n[o],e,t,i).pipe(Dd(),as(a=>{s[o]=a}))),K1(1),function Kse(n){return Ge(()=>n)}(s),Rd(o=>vH(o)?kr:ng(o)))}(s,n,e,i).pipe(Ge(o=>(n._resolvedData=o,n.data=cH(n,t).resolve,r&&AH(r)&&(n.data[a0]=r.title),null)))}(o.route,i,n,e)),as(()=>s++),K1(1),Pr(o=>s===r.length?ne(t):kr))})}(t.paramsInheritanceStrategy,this.environmentInjector),as({next:()=>u=!0,complete:()=>{u||this.cancelNavigationTransition(c,"",2)}}))}),as(c=>{const u=new Ioe(c.id,this.urlSerializer.serialize(c.extractedUrl),this.urlSerializer.serialize(c.urlAfterRedirects),c.targetSnapshot);this.events.next(u)}))}),fR(l=>{const c=u=>{const d=[];u.routeConfig?.loadComponent&&!u.routeConfig._loadedComponent&&d.push(this.configLoader.loadComponent(u.routeConfig).pipe(as(p=>{u.component=p}),Ge(()=>{})));for(const p of u.children)d.push(...c(p));return d};return oT(c(l.targetSnapshot.root)).pipe(cT(),ml(1))}),fR(()=>this.afterPreactivation()),Ge(l=>{const c=function Voe(n,e,t){const i=g0(n,e._root,t?t._root:void 0);return new aH(i,e)}(t.routeReuseStrategy,l.targetSnapshot,l.currentRouterState);return this.currentTransition=s={...l,targetRouterState:c},s}),as(()=>{this.events.next(new tR)}),((n,e,t,i)=>Ge(r=>(new Xoe(e,r.targetRouterState,r.currentRouterState,t,i).activate(n),r)))(this.rootContexts,t.routeReuseStrategy,l=>this.events.next(l),this.inputBindingEnabled),ml(1),as({next:l=>{o=!0,this.lastSuccessfulNavigation=this.currentNavigation,this.events.next(new kd(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects))),t.titleStrategy?.updateTitle(l.targetRouterState.snapshot),l.resolve(!0)},complete:()=>{o=!0}}),zo(this.transitionAbortSubject.pipe(as(l=>{throw l}))),rg(()=>{o||a||this.cancelNavigationTransition(s,"",1),this.currentNavigation?.id===s.id&&(this.currentNavigation=null)}),Rd(l=>{if(a=!0,mH(l))this.events.next(new p0(s.id,this.urlSerializer.serialize(s.extractedUrl),l.message,l.cancellationCode)),function zoe(n){return mH(n)&&gf(n.url)}(l)?this.events.next(new nR(l.url)):s.resolve(!1);else{this.events.next(new vT(s.id,this.urlSerializer.serialize(s.extractedUrl),l,s.targetSnapshot??void 0));try{s.resolve(t.errorHandler(l))}catch(c){s.reject(c)}}return kr}))}))}cancelNavigationTransition(t,i,r){const s=new p0(t.id,this.urlSerializer.serialize(t.extractedUrl),i,r);this.events.next(s),t.resolve(!1)}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275prov=dt({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function CH(n){return n!==f0}let MH=(()=>{class n{buildTitle(t){let i,r=t.root;for(;void 0!==r;)i=this.getResolvedTitleForRoute(r)??i,r=r.children.find(s=>s.outlet===Yn);return i}getResolvedTitleForRoute(t){return t.data[a0]}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275prov=dt({token:n,factory:function(){return bt(Vae)},providedIn:"root"})}}return n})(),Vae=(()=>{class n extends MH{constructor(t){super(),this.title=t}updateTitle(t){const i=this.buildTitle(t);void 0!==i&&this.title.setTitle(i)}static{this.\u0275fac=function(i){return new(i||n)(ue(Cz))}}static{this.\u0275prov=dt({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),Uae=(()=>{class n{static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275prov=dt({token:n,factory:function(){return bt(zae)},providedIn:"root"})}}return n})();class Bae{shouldDetach(e){return!1}store(e,t){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,t){return e.routeConfig===t.routeConfig}}let zae=(()=>{class n extends Bae{static{this.\u0275fac=function(){let t;return function(r){return(t||(t=Or(n)))(r||n)}}()}static{this.\u0275prov=dt({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();const AT=new Fe("",{providedIn:"root",factory:()=>({})});let Hae=(()=>{class n{static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275prov=dt({token:n,factory:function(){return bt(Gae)},providedIn:"root"})}}return n})(),Gae=(()=>{class n{shouldProcessUrl(t){return!0}extract(t){return t}merge(t,i){return t}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275prov=dt({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();var x0=function(n){return n[n.COMPLETE=0]="COMPLETE",n[n.FAILED=1]="FAILED",n[n.REDIRECTING=2]="REDIRECTING",n}(x0||{});function DH(n,e){n.events.pipe(Is(t=>t instanceof kd||t instanceof p0||t instanceof vT||t instanceof ag),Ge(t=>t instanceof kd||t instanceof ag?x0.COMPLETE:t instanceof p0&&(0===t.code||1===t.code)?x0.REDIRECTING:x0.FAILED),Is(t=>t!==x0.REDIRECTING),ml(1)).subscribe(()=>{e()})}function Wae(n){throw n}function jae(n,e,t){return e.parse("/")}const $ae={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},qae={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};let ua=(()=>{class n{get navigationId(){return this.navigationTransitions.navigationId}get browserPageId(){return"computed"!==this.canceledNavigationResolution?this.currentPageId:this.location.getState()?.\u0275routerPageId??this.currentPageId}get events(){return this._events}constructor(){this.disposed=!1,this.currentPageId=0,this.console=bt(i4),this.isNgZoneEnabled=!1,this._events=new Q,this.options=bt(AT,{optional:!0})||{},this.pendingTasks=bt(LE),this.errorHandler=this.options.errorHandler||Wae,this.malformedUriErrorHandler=this.options.malformedUriErrorHandler||jae,this.navigated=!1,this.lastSuccessfulId=-1,this.urlHandlingStrategy=bt(Hae),this.routeReuseStrategy=bt(Uae),this.titleStrategy=bt(MH),this.onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore",this.paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly",this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.canceledNavigationResolution=this.options.canceledNavigationResolution||"replace",this.config=bt(hg,{optional:!0})?.flat()??[],this.navigationTransitions=bt(ST),this.urlSerializer=bt(c0),this.location=bt(jE),this.componentInputBindingEnabled=!!bt(bT,{optional:!0}),this.eventsSubscription=new on,this.isNgZoneEnabled=bt(mn)instanceof mn&&mn.isInAngularZone(),this.resetConfig(this.config),this.currentUrlTree=new og,this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.routerState=lH(0,null),this.navigationTransitions.setupNavigations(this,this.currentUrlTree,this.routerState).subscribe(t=>{this.lastSuccessfulId=t.id,this.currentPageId=this.browserPageId},t=>{this.console.warn(`Unhandled Navigation Error: ${t}`)}),this.subscribeToNavigationEvents()}subscribeToNavigationEvents(){const t=this.navigationTransitions.events.subscribe(i=>{try{const{currentTransition:r}=this.navigationTransitions;if(null===r)return void(RH(i)&&this._events.next(i));if(i instanceof _T)CH(r.source)&&(this.browserUrlTree=r.extractedUrl);else if(i instanceof ag)this.rawUrlTree=r.rawUrl;else if(i instanceof rH){if("eager"===this.urlUpdateStrategy){if(!r.extras.skipLocationChange){const s=this.urlHandlingStrategy.merge(r.urlAfterRedirects,r.rawUrl);this.setBrowserUrl(s,r)}this.browserUrlTree=r.urlAfterRedirects}}else if(i instanceof tR)this.currentUrlTree=r.urlAfterRedirects,this.rawUrlTree=this.urlHandlingStrategy.merge(r.urlAfterRedirects,r.rawUrl),this.routerState=r.targetRouterState,"deferred"===this.urlUpdateStrategy&&(r.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,r),this.browserUrlTree=r.urlAfterRedirects);else if(i instanceof p0)0!==i.code&&1!==i.code&&(this.navigated=!0),(3===i.code||2===i.code)&&this.restoreHistory(r);else if(i instanceof nR){const s=this.urlHandlingStrategy.merge(i.url,r.currentRawUrl),o={skipLocationChange:r.extras.skipLocationChange,replaceUrl:"eager"===this.urlUpdateStrategy||CH(r.source)};this.scheduleNavigation(s,f0,null,o,{resolve:r.resolve,reject:r.reject,promise:r.promise})}i instanceof vT&&this.restoreHistory(r,!0),i instanceof kd&&(this.navigated=!0),RH(i)&&this._events.next(i)}catch(r){this.navigationTransitions.transitionAbortSubject.next(r)}});this.eventsSubscription.add(t)}resetRootComponentType(t){this.routerState.root.component=t,this.navigationTransitions.rootComponentType=t}initialNavigation(){if(this.setUpLocationChangeListener(),!this.navigationTransitions.hasRequestedNavigation){const t=this.location.getState();this.navigateToSyncWithBrowser(this.location.path(!0),f0,t)}}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(t=>{const i="popstate"===t.type?"popstate":"hashchange";"popstate"===i&&setTimeout(()=>{this.navigateToSyncWithBrowser(t.url,i,t.state)},0)}))}navigateToSyncWithBrowser(t,i,r){const s={replaceUrl:!0},o=r?.navigationId?r:null;if(r){const l={...r};delete l.navigationId,delete l.\u0275routerPageId,0!==Object.keys(l).length&&(s.state=l)}const a=this.parseUrl(t);this.scheduleNavigation(a,i,o,s)}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.navigationTransitions.currentNavigation}get lastSuccessfulNavigation(){return this.navigationTransitions.lastSuccessfulNavigation}resetConfig(t){this.config=t.map(uR),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.navigationTransitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0,this.eventsSubscription.unsubscribe()}createUrlTree(t,i={}){const{relativeTo:r,queryParams:s,fragment:o,queryParamsHandling:a,preserveFragment:l}=i,c=l?this.currentUrlTree.fragment:o;let d,u=null;switch(a){case"merge":u={...this.currentUrlTree.queryParams,...s};break;case"preserve":u=this.currentUrlTree.queryParams;break;default:u=s||null}null!==u&&(u=this.removeEmptyProps(u));try{d=Qz(r?r.snapshot:this.routerState.snapshot.root)}catch{("string"!=typeof t[0]||!t[0].startsWith("/"))&&(t=[]),d=this.currentUrlTree.root}return Zz(d,t,u,c??null)}navigateByUrl(t,i={skipLocationChange:!1}){const r=gf(t)?t:this.parseUrl(t),s=this.urlHandlingStrategy.merge(r,this.rawUrlTree);return this.scheduleNavigation(s,f0,null,i)}navigate(t,i={skipLocationChange:!1}){return function Xae(n){for(let e=0;e<n.length;e++)if(null==n[e])throw new Ce(4008,!1)}(t),this.navigateByUrl(this.createUrlTree(t,i),i)}serializeUrl(t){return this.urlSerializer.serialize(t)}parseUrl(t){let i;try{i=this.urlSerializer.parse(t)}catch(r){i=this.malformedUriErrorHandler(r,this.urlSerializer,t)}return i}isActive(t,i){let r;if(r=!0===i?{...$ae}:!1===i?{...qae}:i,gf(t))return Hz(this.currentUrlTree,t,r);const s=this.parseUrl(t);return Hz(this.currentUrlTree,s,r)}removeEmptyProps(t){return Object.keys(t).reduce((i,r)=>{const s=t[r];return null!=s&&(i[r]=s),i},{})}scheduleNavigation(t,i,r,s,o){if(this.disposed)return Promise.resolve(!1);let a,l,c;o?(a=o.resolve,l=o.reject,c=o.promise):c=new Promise((d,p)=>{a=d,l=p});const u=this.pendingTasks.add();return DH(this,()=>{queueMicrotask(()=>this.pendingTasks.remove(u))}),this.navigationTransitions.handleNavigationRequest({source:i,restoredState:r,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,currentBrowserUrl:this.browserUrlTree,rawUrl:t,extras:s,resolve:a,reject:l,promise:c,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),c.catch(d=>Promise.reject(d))}setBrowserUrl(t,i){const r=this.urlSerializer.serialize(t);if(this.location.isCurrentPathEqualTo(r)||i.extras.replaceUrl){const o={...i.extras.state,...this.generateNgRouterState(i.id,this.browserPageId)};this.location.replaceState(r,"",o)}else{const s={...i.extras.state,...this.generateNgRouterState(i.id,this.browserPageId+1)};this.location.go(r,"",s)}}restoreHistory(t,i=!1){if("computed"===this.canceledNavigationResolution){const s=this.currentPageId-this.browserPageId;0!==s?this.location.historyGo(s):this.currentUrlTree===this.getCurrentNavigation()?.finalUrl&&0===s&&(this.resetState(t),this.browserUrlTree=t.currentUrlTree,this.resetUrlToCurrentUrlTree())}else"replace"===this.canceledNavigationResolution&&(i&&this.resetState(t),this.resetUrlToCurrentUrlTree())}resetState(t){this.routerState=t.currentRouterState,this.currentUrlTree=t.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,t.rawUrl)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(t,i){return"computed"===this.canceledNavigationResolution?{navigationId:t,\u0275routerPageId:i}:{navigationId:t}}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275prov=dt({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function RH(n){return!(n instanceof tR||n instanceof nR)}class PH{}let Qae=(()=>{class n{constructor(t,i,r,s,o){this.router=t,this.injector=r,this.preloadingStrategy=s,this.loader=o}setUpPreloading(){this.subscription=this.router.events.pipe(Is(t=>t instanceof kd),ig(()=>this.preload())).subscribe(()=>{})}preload(){return this.processRoutes(this.injector,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(t,i){const r=[];for(const s of i){s.providers&&!s._injector&&(s._injector=zD(s.providers,t,`Route: ${s.path}`));const o=s._injector??t,a=s._loadedInjector??o;(s.loadChildren&&!s._loadedRoutes&&void 0===s.canLoad||s.loadComponent&&!s._loadedComponent)&&r.push(this.preloadConfig(o,s)),(s.children||s._loadedRoutes)&&r.push(this.processRoutes(a,s.children??s._loadedRoutes))}return q(r).pipe(Qa())}preloadConfig(t,i){return this.preloadingStrategy.preload(i,()=>{let r;r=i.loadChildren&&void 0===i.canLoad?this.loader.loadChildren(t,i):ne(null);const s=r.pipe(Pr(o=>null===o?ne(void 0):(i._loadedRoutes=o.routes,i._loadedInjector=o.injector,this.processRoutes(o.injector??t,o.routes))));return i.loadComponent&&!i._loadedComponent?q([s,this.loader.loadComponent(i)]).pipe(Qa()):s})}static{this.\u0275fac=function(i){return new(i||n)(ue(ua),ue(r4),ue(Da),ue(PH),ue(pR))}}static{this.\u0275prov=dt({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();const gR=new Fe("");let kH=(()=>{class n{constructor(t,i,r,s,o={}){this.urlSerializer=t,this.transitions=i,this.viewportScroller=r,this.zone=s,this.options=o,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},o.scrollPositionRestoration=o.scrollPositionRestoration||"disabled",o.anchorScrolling=o.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.transitions.events.subscribe(t=>{t instanceof _T?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=t.navigationTrigger,this.restoredId=t.restoredState?t.restoredState.navigationId:0):t instanceof kd?(this.lastId=t.id,this.scheduleScrollEvent(t,this.urlSerializer.parse(t.urlAfterRedirects).fragment)):t instanceof ag&&0===t.code&&(this.lastSource=void 0,this.restoredId=0,this.scheduleScrollEvent(t,this.urlSerializer.parse(t.url).fragment))})}consumeScrollEvents(){return this.transitions.events.subscribe(t=>{t instanceof sH&&(t.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(t.position):t.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(t.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(t,i){this.zone.runOutsideAngular(()=>{setTimeout(()=>{this.zone.run(()=>{this.transitions.events.next(new sH(t,"popstate"===this.lastSource?this.store[this.restoredId]:null,i))})},0)})}ngOnDestroy(){this.routerEventsSubscription?.unsubscribe(),this.scrollEventsSubscription?.unsubscribe()}static{this.\u0275fac=function(i){aD()}}static{this.\u0275prov=dt({token:n,factory:n.\u0275fac})}}return n})();function yu(n,e){return{\u0275kind:n,\u0275providers:e}}function NH(){const n=bt(Ls);return e=>{const t=n.get(dc);if(e!==t.components[0])return;const i=n.get(ua),r=n.get(FH);1===n.get(_R)&&i.initialNavigation(),n.get(LH,null,ti.Optional)?.setUpPreloading(),n.get(gR,null,ti.Optional)?.init(),i.resetRootComponentType(t.componentTypes[0]),r.closed||(r.next(),r.complete(),r.unsubscribe())}}const FH=new Fe("",{factory:()=>new Q}),_R=new Fe("",{providedIn:"root",factory:()=>1}),LH=new Fe("");function tle(n){return yu(0,[{provide:LH,useExisting:Qae},{provide:PH,useExisting:n}])}const VH=new Fe("ROUTER_FORROOT_GUARD"),ile=[jE,{provide:c0,useClass:Y1},ua,m0,{provide:_f,useFactory:function OH(n){return n.routerState.root},deps:[ua]},pR,[]];function rle(){return new d4("Router",ua)}let UH=(()=>{class n{constructor(t){}static forRoot(t,i){return{ngModule:n,providers:[ile,[],{provide:hg,multi:!0,useValue:t},{provide:VH,useFactory:lle,deps:[[ua,new nc,new tf]]},{provide:AT,useValue:i||{}},i?.useHash?{provide:hf,useClass:xie}:{provide:hf,useClass:G4},{provide:gR,useFactory:()=>{const n=bt(Vre),e=bt(mn),t=bt(AT),i=bt(ST),r=bt(c0);return t.scrollOffset&&n.setOffset(t.scrollOffset),new kH(r,i,n,e,t)}},i?.preloadingStrategy?tle(i.preloadingStrategy).\u0275providers:[],{provide:d4,multi:!0,useFactory:rle},i?.initialNavigation?cle(i):[],i?.bindToComponentInputs?yu(8,[hH,{provide:bT,useExisting:hH}]).\u0275providers:[],[{provide:BH,useFactory:NH},{provide:c1,multi:!0,useExisting:BH}]]}}static forChild(t){return{ngModule:n,providers:[{provide:hg,multi:!0,useValue:t}]}}static{this.\u0275fac=function(i){return new(i||n)(ue(VH,8))}}static{this.\u0275mod=ni({type:n})}static{this.\u0275inj=jn({})}}return n})();function lle(n){return"guarded"}function cle(n){return["disabled"===n.initialNavigation?yu(3,[{provide:e1,multi:!0,useFactory:()=>{const e=bt(ua);return()=>{e.setUpLocationChangeListener()}}},{provide:_R,useValue:2}]).\u0275providers:[],"enabledBlocking"===n.initialNavigation?yu(2,[{provide:_R,useValue:0},{provide:e1,multi:!0,deps:[Ls],useFactory:e=>{const t=e.get(yie,Promise.resolve());return()=>t.then(()=>new Promise(i=>{const r=e.get(ua),s=e.get(FH);DH(r,()=>{i(!0)}),e.get(ST).afterPreactivation=()=>(i(!0),s.closed?ne(void 0):s),r.initialNavigation()}))}}]).\u0275providers:[]]}const BH=new Fe("");var Me=Cn(467),pc=Cn(852);(0,pc.registerVersion)("firebase","10.14.1","app");class fle extends on{constructor(e,t){super()}schedule(e,t=0){return this}}const IT={setInterval(n,e,...t){const{delegate:i}=IT;return i?.setInterval?i.setInterval(n,e,...t):setInterval(n,e,...t)},clearInterval(n){const{delegate:e}=IT;return(e?.clearInterval||clearInterval)(n)},delegate:void 0};class CT extends fle{constructor(e,t){super(e,t),this.scheduler=e,this.work=t,this.pending=!1}schedule(e,t=0){var i;if(this.closed)return this;this.state=e;const r=this.id,s=this.scheduler;return null!=r&&(this.id=this.recycleAsyncId(s,r,t)),this.pending=!0,this.delay=t,this.id=null!==(i=this.id)&&void 0!==i?i:this.requestAsyncId(s,this.id,t),this}requestAsyncId(e,t,i=0){return IT.setInterval(e.flush.bind(e,this),i)}recycleAsyncId(e,t,i=0){if(null!=i&&this.delay===i&&!1===this.pending)return t;null!=t&&IT.clearInterval(t)}execute(e,t){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const i=this._execute(e,t);if(i)return i;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(e,t){let r,i=!1;try{this.work(e)}catch(s){i=!0,r=s||new Error("Scheduled action threw falsy error")}if(i)return this.unsubscribe(),r}unsubscribe(){if(!this.closed){const{id:e,scheduler:t}=this,{actions:i}=t;this.work=this.state=this.scheduler=null,this.pending=!1,ve(i,this),null!=e&&(this.id=this.recycleAsyncId(t,e,null)),this.delay=null,super.unsubscribe()}}}const vR={now:()=>(vR.delegate||Date).now(),delegate:void 0};class w0{constructor(e,t=w0.now){this.schedulerActionCtor=e,this.now=t}schedule(e,t=0,i){return new this.schedulerActionCtor(this,e).schedule(i,t)}}w0.now=vR.now;class MT extends w0{constructor(e,t=w0.now){super(e,t),this.actions=[],this._active=!1}flush(e){const{actions:t}=this;if(this._active)return void t.push(e);let i;this._active=!0;do{if(i=e.execute(e.state,e.delay))break}while(e=t.shift());if(this._active=!1,i){for(;e=t.shift();)e.unsubscribe();throw i}}}const gle=new class mle extends MT{}(class ple extends CT{constructor(e,t){super(e,t),this.scheduler=e,this.work=t}schedule(e,t=0){return t>0?super.schedule(e,t):(this.delay=t,this.state=e,this.scheduler.flush(this),this)}execute(e,t){return t>0||this.closed?super.execute(e,t):this._execute(e,t)}requestAsyncId(e,t,i=0){return null!=i&&i>0||null==i&&this.delay>0?super.requestAsyncId(e,t,i):(e.flush(this),0)}}),E0=new MT(CT),_le=E0,DT=new Td("ANGULARFIRE2_VERSION");class yR{constructor(){return((n,e)=>{const t=(0,pc.getApps)(),i=[];return t.forEach(r=>{r.container.getProvider(n).instances.forEach(o=>{i.includes(o)||i.push(o)})}),i})(yle)}}const yle="app-check";function fg(){}class zH{zone;delegate;constructor(e,t=gle){this.zone=e,this.delegate=t}now(){return this.delegate.now()}schedule(e,t,i){const r=this.zone;return this.delegate.schedule(function(o){r.runGuarded(()=>{e.apply(this,[o])})},t,i)}}class ble{zone;task=null;constructor(e){this.zone=e}call(e,t){const i=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",fg,{},fg,fg)),t.pipe(as({next:i,complete:i,error:i})).subscribe(e).add(i)}unscheduleTask(){setTimeout(()=>{null!=this.task&&"scheduled"===this.task.state&&(this.task.invoke(),this.task=null)},10)}}let bR=(()=>{class n{ngZone;outsideAngular;insideAngular;constructor(t){this.ngZone=t,this.outsideAngular=t.runOutsideAngular(()=>new zH(Zone.current)),this.insideAngular=t.run(()=>new zH(Zone.current,E0)),globalThis.\u0275AngularFireScheduler||=this}static \u0275fac=function(i){return new(i||n)(ue(mn))};static \u0275prov=dt({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function pg(){const n=globalThis.\u0275AngularFireScheduler;if(!n)throw new Error("Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using\nprovideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).");return n}function HH(n){return n.pipe(uo(pg().outsideAngular))}function Ho(n){return function wle(n){return function(t){return(t=t.lift(new ble(n.ngZone))).pipe(ho(n.outsideAngular),uo(n.insideAngular))}}(pg())(n)}var mc=Cn(345);mc.A.registerVersion("firebase","10.14.1","app-compat");const Ale=["ngOnDestroy"];class GH{constructor(e){return e}}const T0=new Fe("angularfire2.app.options"),S0=new Fe("angularfire2.app.name");function RT(n,e,t){const r="object"==typeof t&&t||{};r.name=r.name||"string"==typeof t&&t||"[DEFAULT]";const o=mc.A.apps.filter(a=>a&&a.name===r.name)[0]||e.runOutsideAngular(()=>mc.A.initializeApp(n,r));try{if(JSON.stringify(n)!==JSON.stringify(o.options)){const a=!!module.hot;Mle("error",`${o.name} Firebase App already initialized with different options${a?", you may need to reload as Firebase is not HMR aware.":"."}`)}}catch{}return new GH(o)}const Mle=(n,...e)=>{},Dle={provide:GH,useFactory:RT,deps:[T0,mn,[new nc,S0]]};let Rle=(()=>{class n{static initializeApp(t,i){return{ngModule:n,providers:[{provide:T0,useValue:t},{provide:S0,useValue:i}]}}constructor(t){mc.A.registerVersion("angularfire",DT.full,"core"),mc.A.registerVersion("angularfire",DT.full,"app-compat"),mc.A.registerVersion("angular",DV.full,t.toString())}static \u0275fac=function(i){return new(i||n)(ue(al))};static \u0275mod=ni({type:n});static \u0275inj=jn({providers:[Dle]})}return n})();function xR(n,e,t,i,r){const[,s,o]=globalThis.\u0275AngularfireInstanceCache.find(a=>a[0]===n)||[];if(s)return function Ple(n,e){try{return n.toString()===e.toString()}catch{return n===e}}(r,o)||(WH("error",`${e} was already initialized on the ${t} Firebase App with different settings.${kle?" You may need to reload as Firebase is not HMR aware.":""}`),WH("warn",{is:r,was:o})),s;{const a=i();return globalThis.\u0275AngularfireInstanceCache.push([n,a,r]),a}}const kle=typeof module<"u"&&!!module.hot,WH=(n,...e)=>{};globalThis.\u0275AngularfireInstanceCache||=[],Cn(955);class Ole extends Q{constructor(e=1/0,t=1/0,i=vR){super(),this._bufferSize=e,this._windowTime=t,this._timestampProvider=i,this._buffer=[],this._infiniteTimeWindow=!0,this._infiniteTimeWindow=t===1/0,this._bufferSize=Math.max(1,e),this._windowTime=Math.max(1,t)}next(e){const{isStopped:t,_buffer:i,_infiniteTimeWindow:r,_timestampProvider:s,_windowTime:o}=this;t||(i.push(e),!r&&i.push(s.now()+o)),this._trimBuffer(),super.next(e)}_subscribe(e){this._throwIfClosed(),this._trimBuffer();const t=this._innerSubscribe(e),{_infiniteTimeWindow:i,_buffer:r}=this,s=r.slice();for(let o=0;o<s.length&&!e.closed;o+=i?1:2)e.next(s[o]);return this._checkFinalizedStatuses(e),t}_trimBuffer(){const{_bufferSize:e,_timestampProvider:t,_buffer:i,_infiniteTimeWindow:r}=this,s=(r?1:2)*e;if(e<1/0&&s<i.length&&i.splice(0,i.length-s),!r){const o=t.now();let a=0;for(let l=1;l<i.length&&i[l]<=o;l+=2)a=l;a&&i.splice(0,a+1)}}}function wR(n,e,t){let i,r=!1;return n&&"object"==typeof n?({bufferSize:i=1/0,windowTime:e=1/0,refCount:r=!1,scheduler:t}=n):i=n??1/0,fe({connector:()=>new Ole(i,e,t),resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:r})}function jH(n,e){return H(e)?Mt(()=>n,e):Mt(()=>n)}const $H=new Fe("angularfire2.auth.use-emulator"),qH=new Fe("angularfire2.auth.settings"),XH=new Fe("angularfire2.auth.tenant-id"),KH=new Fe("angularfire2.auth.langugage-code"),YH=new Fe("angularfire2.auth.use-device-language"),QH=new Fe("angularfire.auth.persistence"),ZH=(n,e,t,i,r,s,o,a)=>xR(`${n.name}.auth`,"AngularFireAuth",n.name,()=>{const l=e.runOutsideAngular(()=>n.auth());if(t&&l.useEmulator(...t),i&&(l.tenantId=i),l.languageCode=r,s&&l.useDeviceLanguage(),o)for(const[c,u]of Object.entries(o))l.settings[c]=u;return a&&l.setPersistence(a),l},[t,i,r,s,o,a]);let JH=(()=>{class n{authState;idToken;user;idTokenResult;credential;constructor(t,i,r,s,o,a,l,c,u,d,p,m){const v=new Q,x=ne(void 0).pipe(uo(o.outsideAngular),Mt(()=>s.runOutsideAngular(()=>Promise.resolve().then(Cn.bind(Cn,955)))),Ge(()=>RT(t,s,i)),Ge(b=>ZH(b,s,a,c,u,d,l,p)),wR({bufferSize:1,refCount:!1}));if(nT(r))this.authState=this.user=this.idToken=this.idTokenResult=this.credential=ne(null);else{x.pipe(Dd()).subscribe();const b=x.pipe(Mt(S=>S.getRedirectResult().then(A=>A,()=>null)),Ho,wR({bufferSize:1,refCount:!1})),w=x.pipe(Mt(S=>new xt(A=>({unsubscribe:s.runOutsideAngular(()=>S.onAuthStateChanged(V=>A.next(V),V=>A.error(V),()=>A.complete()))})))),T=x.pipe(Mt(S=>new xt(A=>({unsubscribe:s.runOutsideAngular(()=>S.onIdTokenChanged(V=>A.next(V),V=>A.error(V),()=>A.complete()))}))));this.authState=b.pipe(jH(w),ho(o.outsideAngular),uo(o.insideAngular)),this.user=b.pipe(jH(T),ho(o.outsideAngular),uo(o.insideAngular)),this.idToken=this.user.pipe(Mt(S=>S?q(S.getIdToken()):ne(null))),this.idTokenResult=this.user.pipe(Mt(S=>S?q(S.getIdTokenResult()):ne(null))),this.credential=X(b,v,this.authState.pipe(Is(S=>!S))).pipe(Ge(S=>S?.user?S:null),ho(o.outsideAngular),uo(o.insideAngular))}return((n,e,t,i={})=>new Proxy(n,{get:(r,s)=>t.runOutsideAngular(()=>{if(n[s])return i?.spy?.get&&i.spy.get(s,n[s]),n[s];if(Ale.indexOf(s)>-1)return()=>{};const o=e.toPromise().then(a=>{const l=a?.[s];return"function"==typeof l?l.bind(a):l?.then?l.then(c=>t.run(()=>c)):t.run(()=>l)});return new Proxy(()=>{},{get:(a,l)=>o[l],apply:(a,l,c)=>o.then(u=>{const d=u?.(...c);return i?.spy?.apply&&i.spy.apply(s,c,d),d})})})}))(this,x,s,{spy:{apply:(b,w,T)=>{(b.startsWith("signIn")||b.startsWith("createUser"))&&T.then(S=>v.next(S))}}})}static \u0275fac=function(i){return new(i||n)(ue(T0),ue(S0,8),ue(al),ue(mn),ue(bR),ue($H,8),ue(qH,8),ue(XH,8),ue(KH,8),ue(YH,8),ue(QH,8),ue(yR,8))};static \u0275prov=dt({token:n,factory:n.\u0275fac,providedIn:"any"})}return n})();function ER(){return re((n,e)=>{let t,i=!1;n.subscribe(ye(e,r=>{const s=t;t=r,i&&e.next([s,r]),i=!0}))})}var yf,n5,PT=Cn(362),gc=Cn(41),ii=Cn(76),e5=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},t5={};(function(){var n;function i(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}function r(P,D,I){I||(I=0);var M=Array(16);if("string"==typeof D)for(var O=0;16>O;++O)M[O]=D.charCodeAt(I++)|D.charCodeAt(I++)<<8|D.charCodeAt(I++)<<16|D.charCodeAt(I++)<<24;else for(O=0;16>O;++O)M[O]=D[I++]|D[I++]<<8|D[I++]<<16|D[I++]<<24;var z=P.g[3],N=(D=P.g[0])+(z^(I=P.g[1])&((O=P.g[2])^z))+M[0]+3614090360&4294967295;N=(I=(O=(z=(D=(I=(O=(z=(D=(I=(O=(z=(D=(I=(O=(z=(D=(I=(O=(z=(D=(I=(O=(z=(D=(I=(O=(z=(D=(I=(O=(z=(D=(I=(O=(z=(D=(I=(O=(z=(D=(I=(O=(z=(D=(I=(O=(z=(D=(I=(O=(z=(D=(I=(O=(z=(D=(I=(O=(z=(D=I+(N<<7&4294967295|N>>>25))+((N=z+(O^D&(I^O))+M[1]+3905402710&4294967295)<<12&4294967295|N>>>20))+((N=O+(I^z&(D^I))+M[2]+606105819&4294967295)<<17&4294967295|N>>>15))+((N=I+(D^O&(z^D))+M[3]+3250441966&4294967295)<<22&4294967295|N>>>10))+((N=D+(z^I&(O^z))+M[4]+4118548399&4294967295)<<7&4294967295|N>>>25))+((N=z+(O^D&(I^O))+M[5]+1200080426&4294967295)<<12&4294967295|N>>>20))+((N=O+(I^z&(D^I))+M[6]+2821735955&4294967295)<<17&4294967295|N>>>15))+((N=I+(D^O&(z^D))+M[7]+4249261313&4294967295)<<22&4294967295|N>>>10))+((N=D+(z^I&(O^z))+M[8]+1770035416&4294967295)<<7&4294967295|N>>>25))+((N=z+(O^D&(I^O))+M[9]+2336552879&4294967295)<<12&4294967295|N>>>20))+((N=O+(I^z&(D^I))+M[10]+4294925233&4294967295)<<17&4294967295|N>>>15))+((N=I+(D^O&(z^D))+M[11]+2304563134&4294967295)<<22&4294967295|N>>>10))+((N=D+(z^I&(O^z))+M[12]+1804603682&4294967295)<<7&4294967295|N>>>25))+((N=z+(O^D&(I^O))+M[13]+4254626195&4294967295)<<12&4294967295|N>>>20))+((N=O+(I^z&(D^I))+M[14]+2792965006&4294967295)<<17&4294967295|N>>>15))+((N=I+(D^O&(z^D))+M[15]+1236535329&4294967295)<<22&4294967295|N>>>10))+((N=D+(O^z&(I^O))+M[1]+4129170786&4294967295)<<5&4294967295|N>>>27))+((N=z+(I^O&(D^I))+M[6]+3225465664&4294967295)<<9&4294967295|N>>>23))+((N=O+(D^I&(z^D))+M[11]+643717713&4294967295)<<14&4294967295|N>>>18))+((N=I+(z^D&(O^z))+M[0]+3921069994&4294967295)<<20&4294967295|N>>>12))+((N=D+(O^z&(I^O))+M[5]+3593408605&4294967295)<<5&4294967295|N>>>27))+((N=z+(I^O&(D^I))+M[10]+38016083&4294967295)<<9&4294967295|N>>>23))+((N=O+(D^I&(z^D))+M[15]+3634488961&4294967295)<<14&4294967295|N>>>18))+((N=I+(z^D&(O^z))+M[4]+3889429448&4294967295)<<20&4294967295|N>>>12))+((N=D+(O^z&(I^O))+M[9]+568446438&4294967295)<<5&4294967295|N>>>27))+((N=z+(I^O&(D^I))+M[14]+3275163606&4294967295)<<9&4294967295|N>>>23))+((N=O+(D^I&(z^D))+M[3]+4107603335&4294967295)<<14&4294967295|N>>>18))+((N=I+(z^D&(O^z))+M[8]+1163531501&4294967295)<<20&4294967295|N>>>12))+((N=D+(O^z&(I^O))+M[13]+2850285829&4294967295)<<5&4294967295|N>>>27))+((N=z+(I^O&(D^I))+M[2]+4243563512&4294967295)<<9&4294967295|N>>>23))+((N=O+(D^I&(z^D))+M[7]+1735328473&4294967295)<<14&4294967295|N>>>18))+((N=I+(z^D&(O^z))+M[12]+2368359562&4294967295)<<20&4294967295|N>>>12))+((N=D+(I^O^z)+M[5]+4294588738&4294967295)<<4&4294967295|N>>>28))+((N=z+(D^I^O)+M[8]+2272392833&4294967295)<<11&4294967295|N>>>21))+((N=O+(z^D^I)+M[11]+1839030562&4294967295)<<16&4294967295|N>>>16))+((N=I+(O^z^D)+M[14]+4259657740&4294967295)<<23&4294967295|N>>>9))+((N=D+(I^O^z)+M[1]+2763975236&4294967295)<<4&4294967295|N>>>28))+((N=z+(D^I^O)+M[4]+1272893353&4294967295)<<11&4294967295|N>>>21))+((N=O+(z^D^I)+M[7]+4139469664&4294967295)<<16&4294967295|N>>>16))+((N=I+(O^z^D)+M[10]+3200236656&4294967295)<<23&4294967295|N>>>9))+((N=D+(I^O^z)+M[13]+681279174&4294967295)<<4&4294967295|N>>>28))+((N=z+(D^I^O)+M[0]+3936430074&4294967295)<<11&4294967295|N>>>21))+((N=O+(z^D^I)+M[3]+3572445317&4294967295)<<16&4294967295|N>>>16))+((N=I+(O^z^D)+M[6]+76029189&4294967295)<<23&4294967295|N>>>9))+((N=D+(I^O^z)+M[9]+3654602809&4294967295)<<4&4294967295|N>>>28))+((N=z+(D^I^O)+M[12]+3873151461&4294967295)<<11&4294967295|N>>>21))+((N=O+(z^D^I)+M[15]+530742520&4294967295)<<16&4294967295|N>>>16))+((N=I+(O^z^D)+M[2]+3299628645&4294967295)<<23&4294967295|N>>>9))+((N=D+(O^(I|~z))+M[0]+4096336452&4294967295)<<6&4294967295|N>>>26))+((N=z+(I^(D|~O))+M[7]+1126891415&4294967295)<<10&4294967295|N>>>22))+((N=O+(D^(z|~I))+M[14]+2878612391&4294967295)<<15&4294967295|N>>>17))+((N=I+(z^(O|~D))+M[5]+4237533241&4294967295)<<21&4294967295|N>>>11))+((N=D+(O^(I|~z))+M[12]+1700485571&4294967295)<<6&4294967295|N>>>26))+((N=z+(I^(D|~O))+M[3]+2399980690&4294967295)<<10&4294967295|N>>>22))+((N=O+(D^(z|~I))+M[10]+4293915773&4294967295)<<15&4294967295|N>>>17))+((N=I+(z^(O|~D))+M[1]+2240044497&4294967295)<<21&4294967295|N>>>11))+((N=D+(O^(I|~z))+M[8]+1873313359&4294967295)<<6&4294967295|N>>>26))+((N=z+(I^(D|~O))+M[15]+4264355552&4294967295)<<10&4294967295|N>>>22))+((N=O+(D^(z|~I))+M[6]+2734768916&4294967295)<<15&4294967295|N>>>17))+((N=I+(z^(O|~D))+M[13]+1309151649&4294967295)<<21&4294967295|N>>>11))+((z=(D=I+((N=D+(O^(I|~z))+M[4]+4149444226&4294967295)<<6&4294967295|N>>>26))+((N=z+(I^(D|~O))+M[11]+3174756917&4294967295)<<10&4294967295|N>>>22))^((O=z+((N=O+(D^(z|~I))+M[2]+718787259&4294967295)<<15&4294967295|N>>>17))|~D))+M[9]+3951481745&4294967295,P.g[0]=P.g[0]+D&4294967295,P.g[1]=P.g[1]+(O+(N<<21&4294967295|N>>>11))&4294967295,P.g[2]=P.g[2]+O&4294967295,P.g[3]=P.g[3]+z&4294967295}function o(P,D){this.h=D;for(var I=[],M=!0,O=P.length-1;0<=O;O--){var z=0|P[O];M&&z==D||(I[O]=z,M=!1)}this.g=I}(function e(P,D){function I(){}I.prototype=D.prototype,P.D=D.prototype,P.prototype=new I,P.prototype.constructor=P,P.C=function(M,O,z){for(var N=Array(arguments.length-2),Ee=2;Ee<arguments.length;Ee++)N[Ee-2]=arguments[Ee];return D.prototype[O].apply(M,N)}})(i,function t(){this.blockSize=-1}),i.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0},i.prototype.u=function(P,D){void 0===D&&(D=P.length);for(var I=D-this.blockSize,M=this.B,O=this.h,z=0;z<D;){if(0==O)for(;z<=I;)r(this,P,z),z+=this.blockSize;if("string"==typeof P){for(;z<D;)if(M[O++]=P.charCodeAt(z++),O==this.blockSize){r(this,M),O=0;break}}else for(;z<D;)if(M[O++]=P[z++],O==this.blockSize){r(this,M),O=0;break}}this.h=O,this.o+=D},i.prototype.v=function(){var P=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);P[0]=128;for(var D=1;D<P.length-8;++D)P[D]=0;var I=8*this.o;for(D=P.length-8;D<P.length;++D)P[D]=255&I,I/=256;for(this.u(P),P=Array(16),D=I=0;4>D;++D)for(var M=0;32>M;M+=8)P[I++]=this.g[D]>>>M&255;return P};var a={};function l(P){return-128<=P&&128>P?function s(P,D){var I=a;return Object.prototype.hasOwnProperty.call(I,P)?I[P]:I[P]=D(P)}(P,function(D){return new o([0|D],0>D?-1:0)}):new o([0|P],0>P?-1:0)}function c(P){if(isNaN(P)||!isFinite(P))return d;if(0>P)return b(c(-P));for(var D=[],I=1,M=0;P>=I;M++)D[M]=P/I|0,I*=4294967296;return new o(D,0)}var d=l(0),p=l(1),m=l(16777216);function v(P){if(0!=P.h)return!1;for(var D=0;D<P.g.length;D++)if(0!=P.g[D])return!1;return!0}function x(P){return-1==P.h}function b(P){for(var D=P.g.length,I=[],M=0;M<D;M++)I[M]=~P.g[M];return new o(I,~P.h).add(p)}function w(P,D){return P.add(b(D))}function T(P,D){for(;(65535&P[D])!=P[D];)P[D+1]+=P[D]>>>16,P[D]&=65535,D++}function S(P,D){this.g=P,this.h=D}function A(P,D){if(v(D))throw Error("division by zero");if(v(P))return new S(d,d);if(x(P))return D=A(b(P),D),new S(b(D.g),b(D.h));if(x(D))return D=A(P,b(D)),new S(b(D.g),D.h);if(30<P.g.length){if(x(P)||x(D))throw Error("slowDivide_ only works with positive integers.");for(var I=p,M=D;0>=M.l(P);)I=V(I),M=V(M);var O=F(I,1),z=F(M,1);for(M=F(M,2),I=F(I,2);!v(M);){var N=z.add(M);0>=N.l(P)&&(O=O.add(I),z=N),M=F(M,1),I=F(I,1)}return D=w(P,O.j(D)),new S(O,D)}for(O=d;0<=P.l(D);){for(I=Math.max(1,Math.floor(P.m()/D.m())),M=48>=(M=Math.ceil(Math.log(I)/Math.LN2))?1:Math.pow(2,M-48),N=(z=c(I)).j(D);x(N)||0<N.l(P);)N=(z=c(I-=M)).j(D);v(z)&&(z=p),O=O.add(z),P=w(P,N)}return new S(O,P)}function V(P){for(var D=P.g.length+1,I=[],M=0;M<D;M++)I[M]=P.i(M)<<1|P.i(M-1)>>>31;return new o(I,P.h)}function F(P,D){var I=D>>5;D%=32;for(var M=P.g.length-I,O=[],z=0;z<M;z++)O[z]=0<D?P.i(z+I)>>>D|P.i(z+I+1)<<32-D:P.i(z+I);return new o(O,P.h)}(n=o.prototype).m=function(){if(x(this))return-b(this).m();for(var P=0,D=1,I=0;I<this.g.length;I++){var M=this.i(I);P+=(0<=M?M:4294967296+M)*D,D*=4294967296}return P},n.toString=function(P){if(2>(P=P||10)||36<P)throw Error("radix out of range: "+P);if(v(this))return"0";if(x(this))return"-"+b(this).toString(P);for(var D=c(Math.pow(P,6)),I=this,M="";;){var O=A(I,D).g,z=((0<(I=w(I,O.j(D))).g.length?I.g[0]:I.h)>>>0).toString(P);if(v(I=O))return z+M;for(;6>z.length;)z="0"+z;M=z+M}},n.i=function(P){return 0>P?0:P<this.g.length?this.g[P]:this.h},n.l=function(P){return x(P=w(this,P))?-1:v(P)?0:1},n.abs=function(){return x(this)?b(this):this},n.add=function(P){for(var D=Math.max(this.g.length,P.g.length),I=[],M=0,O=0;O<=D;O++){var z=M+(65535&this.i(O))+(65535&P.i(O)),N=(z>>>16)+(this.i(O)>>>16)+(P.i(O)>>>16);M=N>>>16,I[O]=(N&=65535)<<16|(z&=65535)}return new o(I,-2147483648&I[I.length-1]?-1:0)},n.j=function(P){if(v(this)||v(P))return d;if(x(this))return x(P)?b(this).j(b(P)):b(b(this).j(P));if(x(P))return b(this.j(b(P)));if(0>this.l(m)&&0>P.l(m))return c(this.m()*P.m());for(var D=this.g.length+P.g.length,I=[],M=0;M<2*D;M++)I[M]=0;for(M=0;M<this.g.length;M++)for(var O=0;O<P.g.length;O++){var z=this.i(M)>>>16,N=65535&this.i(M),Ee=P.i(O)>>>16,je=65535&P.i(O);I[2*M+2*O]+=N*je,T(I,2*M+2*O),I[2*M+2*O+1]+=z*je,T(I,2*M+2*O+1),I[2*M+2*O+1]+=N*Ee,T(I,2*M+2*O+1),I[2*M+2*O+2]+=z*Ee,T(I,2*M+2*O+2)}for(M=0;M<D;M++)I[M]=I[2*M+1]<<16|I[2*M];for(M=D;M<2*D;M++)I[M]=0;return new o(I,0)},n.A=function(P){return A(this,P).h},n.and=function(P){for(var D=Math.max(this.g.length,P.g.length),I=[],M=0;M<D;M++)I[M]=this.i(M)&P.i(M);return new o(I,this.h&P.h)},n.or=function(P){for(var D=Math.max(this.g.length,P.g.length),I=[],M=0;M<D;M++)I[M]=this.i(M)|P.i(M);return new o(I,this.h|P.h)},n.xor=function(P){for(var D=Math.max(this.g.length,P.g.length),I=[],M=0;M<D;M++)I[M]=this.i(M)^P.i(M);return new o(I,this.h^P.h)},i.prototype.digest=i.prototype.v,i.prototype.reset=i.prototype.s,i.prototype.update=i.prototype.u,n5=t5.Md5=i,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.A,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=c,o.fromString=function u(P,D){if(0==P.length)throw Error("number format error: empty string");if(2>(D=D||10)||36<D)throw Error("radix out of range: "+D);if("-"==P.charAt(0))return b(u(P.substring(1),D));if(0<=P.indexOf("-"))throw Error('number format error: interior "-" character');for(var I=c(Math.pow(D,8)),M=d,O=0;O<P.length;O+=8){var z=Math.min(8,P.length-O),N=parseInt(P.substring(O,O+z),D);8>z?(z=c(Math.pow(D,z)),M=M.j(z).add(c(N))):M=(M=M.j(I)).add(c(N))}return M},yf=t5.Integer=o}).apply(typeof e5<"u"?e5:typeof self<"u"?self:typeof window<"u"?window:{});var i5,A0,r5,OT,TR,s5,o5,a5,kT=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},bu={};(function(){var n,e="function"==typeof Object.defineProperties?Object.defineProperty:function(g,E,R){return g==Array.prototype||g==Object.prototype||(g[E]=R.value),g},i=function t(g){g=["object"==typeof globalThis&&globalThis,g,"object"==typeof window&&window,"object"==typeof self&&self,"object"==typeof kT&&kT];for(var E=0;E<g.length;++E){var R=g[E];if(R&&R.Math==Math)return R}throw Error("Cannot find global object")}(this);!function r(g,E){if(E)e:{var R=i;g=g.split(".");for(var U=0;U<g.length-1;U++){var de=g[U];if(!(de in R))break e;R=R[de]}(E=E(U=R[g=g[g.length-1]]))!=U&&null!=E&&e(R,g,{configurable:!0,writable:!0,value:E})}}("Array.prototype.values",function(g){return g||function(){return function s(g,E){g instanceof String&&(g+="");var R=0,U=!1,de={next:function(){if(!U&&R<g.length){var Pe=R++;return{value:E(Pe,g[Pe]),done:!1}}return U=!0,{done:!0,value:void 0}}};return de[Symbol.iterator]=function(){return de},de}(this,function(E,R){return R})}});var o=o||{},a=this||self;function l(g){var E=typeof g;return"array"==(E="object"!=E?E:g?Array.isArray(g)?"array":E:"null")||"object"==E&&"number"==typeof g.length}function c(g){var E=typeof g;return"object"==E&&null!=g||"function"==E}function u(g,E,R){return g.call.apply(g.bind,arguments)}function d(g,E,R){if(!g)throw Error();if(2<arguments.length){var U=Array.prototype.slice.call(arguments,2);return function(){var de=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(de,U),g.apply(E,de)}}return function(){return g.apply(E,arguments)}}function p(g,E,R){return(p=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?u:d).apply(null,arguments)}function m(g,E){var R=Array.prototype.slice.call(arguments,1);return function(){var U=R.slice();return U.push.apply(U,arguments),g.apply(this,U)}}function v(g,E){function R(){}R.prototype=E.prototype,g.aa=E.prototype,g.prototype=new R,g.prototype.constructor=g,g.Qb=function(U,de,Pe){for(var Ct=Array(arguments.length-2),dr=2;dr<arguments.length;dr++)Ct[dr-2]=arguments[dr];return E.prototype[de].apply(U,Ct)}}function x(g){const E=g.length;if(0<E){const R=Array(E);for(let U=0;U<E;U++)R[U]=g[U];return R}return[]}function b(g,E){for(let R=1;R<arguments.length;R++){const U=arguments[R];if(l(U)){const de=g.length||0,Pe=U.length||0;g.length=de+Pe;for(let Ct=0;Ct<Pe;Ct++)g[de+Ct]=U[Ct]}else g.push(U)}}function T(g){return/^[\s\xa0]*$/.test(g)}function S(){var g=a.navigator;return g&&(g=g.userAgent)?g:""}function A(g){return A[" "](g),g}A[" "]=function(){};var V=!(-1==S().indexOf("Gecko")||-1!=S().toLowerCase().indexOf("webkit")&&-1==S().indexOf("Edge")||-1!=S().indexOf("Trident")||-1!=S().indexOf("MSIE")||-1!=S().indexOf("Edge"));function F(g,E,R){for(const U in g)E.call(R,g[U],U,g)}function D(g){const E={};for(const R in g)E[R]=g[R];return E}const I="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function M(g,E){let R,U;for(let de=1;de<arguments.length;de++){for(R in U=arguments[de],U)g[R]=U[R];for(let Pe=0;Pe<I.length;Pe++)R=I[Pe],Object.prototype.hasOwnProperty.call(U,R)&&(g[R]=U[R])}}function O(g){var E=1;g=g.split(":");const R=[];for(;0<E&&g.length;)R.push(g.shift()),E--;return g.length&&R.push(g.join(":")),R}function z(g){a.setTimeout(()=>{throw g},0)}function N(){var g=$e;let E=null;return g.g&&(E=g.g,g.g=g.g.next,g.g||(g.h=null),E.next=null),E}var je=new class w{constructor(E,R){this.i=E,this.j=R,this.h=0,this.g=null}get(){let E;return 0<this.h?(this.h--,E=this.g,this.g=E.next,E.next=null):E=this.i(),E}}(()=>new ee,g=>g.reset());class ee{constructor(){this.next=this.g=this.h=null}set(E,R){this.h=E,this.g=R,this.next=null}reset(){this.next=this.g=this.h=null}}let we,oe=!1,$e=new class Ee{constructor(){this.h=this.g=null}add(E,R){const U=je.get();U.set(E,R),this.h?this.h.next=U:this.g=U,this.h=U}},vt=()=>{const g=a.Promise.resolve(void 0);we=()=>{g.then(Ft)}};var Ft=()=>{for(var g;g=N();){try{g.h.call(g.g)}catch(R){z(R)}var E=je;E.j(g),100>E.h&&(E.h++,g.next=E.g,E.g=g)}oe=!1};function rn(){this.s=this.s,this.C=this.C}function gn(g,E){this.type=g,this.g=this.target=E,this.defaultPrevented=!1}rn.prototype.s=!1,rn.prototype.ma=function(){this.s||(this.s=!0,this.N())},rn.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()},gn.prototype.h=function(){this.defaultPrevented=!0};var Re=function(){if(!a.addEventListener||!Object.defineProperty)return!1;var g=!1,E=Object.defineProperty({},"passive",{get:function(){g=!0}});try{const R=()=>{};a.addEventListener("test",R,E),a.removeEventListener("test",R,E)}catch{}return g}();function pt(g,E){if(gn.call(this,g?g.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,g){var R=this.type=g.type,U=g.changedTouches&&g.changedTouches.length?g.changedTouches[0]:null;if(this.target=g.target||g.srcElement,this.g=E,E=g.relatedTarget){if(V){e:{try{A(E.nodeName);var de=!0;break e}catch{}de=!1}de||(E=null)}}else"mouseover"==R?E=g.fromElement:"mouseout"==R&&(E=g.toElement);this.relatedTarget=E,U?(this.clientX=void 0!==U.clientX?U.clientX:U.pageX,this.clientY=void 0!==U.clientY?U.clientY:U.pageY,this.screenX=U.screenX||0,this.screenY=U.screenY||0):(this.clientX=void 0!==g.clientX?g.clientX:g.pageX,this.clientY=void 0!==g.clientY?g.clientY:g.pageY,this.screenX=g.screenX||0,this.screenY=g.screenY||0),this.button=g.button,this.key=g.key||"",this.ctrlKey=g.ctrlKey,this.altKey=g.altKey,this.shiftKey=g.shiftKey,this.metaKey=g.metaKey,this.pointerId=g.pointerId||0,this.pointerType="string"==typeof g.pointerType?g.pointerType:cn[g.pointerType]||"",this.state=g.state,this.i=g,g.defaultPrevented&&pt.aa.h.call(this)}}v(pt,gn);var cn={2:"touch",3:"pen",4:"mouse"};pt.prototype.h=function(){pt.aa.h.call(this);var g=this.i;g.preventDefault?g.preventDefault():g.returnValue=!1};var Ze="closure_listenable_"+(1e6*Math.random()|0),ln=0;function Mn(g,E,R,U,de){this.listener=g,this.proxy=null,this.src=E,this.type=R,this.capture=!!U,this.ha=de,this.key=++ln,this.da=this.fa=!1}function Jt(g){g.da=!0,g.listener=null,g.proxy=null,g.src=null,g.ha=null}function li(g){this.src=g,this.g={},this.h=0}function lt(g,E){var R=E.type;if(R in g.g){var Pe,U=g.g[R],de=Array.prototype.indexOf.call(U,E,void 0);(Pe=0<=de)&&Array.prototype.splice.call(U,de,1),Pe&&(Jt(E),0==g.g[R].length&&(delete g.g[R],g.h--))}}function it(g,E,R,U){for(var de=0;de<g.length;++de){var Pe=g[de];if(!Pe.da&&Pe.listener==E&&Pe.capture==!!R&&Pe.ha==U)return de}return-1}li.prototype.add=function(g,E,R,U,de){var Pe=g.toString();(g=this.g[Pe])||(g=this.g[Pe]=[],this.h++);var Ct=it(g,E,U,de);return-1<Ct?(E=g[Ct],R||(E.fa=!1)):((E=new Mn(E,this.src,Pe,!!U,de)).fa=R,g.push(E)),E};var W="closure_lm_"+(1e6*Math.random()|0),dn={};function ut(g,E,R,U,de){if(U&&U.once)return In(g,E,R,U,de);if(Array.isArray(E)){for(var Pe=0;Pe<E.length;Pe++)ut(g,E[Pe],R,U,de);return null}return R=He(R),g&&g[Ze]?g.K(E,R,c(U)?!!U.capture:!!U,de):en(g,E,R,!1,U,de)}function en(g,E,R,U,de,Pe){if(!E)throw Error("Invalid event type");var Ct=c(de)?!!de.capture:!!de,dr=ze(g);if(dr||(g[W]=dr=new li(g)),(R=dr.add(E,R,U,Ct,Pe)).proxy)return R;if(U=function Et(){const E=pe;return function g(R){return E.call(g.src,g.listener,R)}}(),R.proxy=U,U.src=g,U.listener=R,g.addEventListener)Re||(de=Ct),void 0===de&&(de=!1),g.addEventListener(E.toString(),U,de);else if(g.attachEvent)g.attachEvent(L(E.toString()),U);else{if(!g.addListener||!g.removeListener)throw Error("addEventListener and attachEvent are unavailable.");g.addListener(U)}return R}function In(g,E,R,U,de){if(Array.isArray(E)){for(var Pe=0;Pe<E.length;Pe++)In(g,E[Pe],R,U,de);return null}return R=He(R),g&&g[Ze]?g.L(E,R,c(U)?!!U.capture:!!U,de):en(g,E,R,!0,U,de)}function Bt(g,E,R,U,de){if(Array.isArray(E))for(var Pe=0;Pe<E.length;Pe++)Bt(g,E[Pe],R,U,de);else U=c(U)?!!U.capture:!!U,R=He(R),g&&g[Ze]?(g=g.i,(E=String(E).toString())in g.g&&-1<(R=it(Pe=g.g[E],R,U,de))&&(Jt(Pe[R]),Array.prototype.splice.call(Pe,R,1),0==Pe.length&&(delete g.g[E],g.h--))):g&&(g=ze(g))&&(E=g.g[E.toString()],g=-1,E&&(g=it(E,R,U,de)),(R=-1<g?E[g]:null)&&G(R))}function G(g){if("number"!=typeof g&&g&&!g.da){var E=g.src;if(E&&E[Ze])lt(E.i,g);else{var R=g.type,U=g.proxy;E.removeEventListener?E.removeEventListener(R,U,g.capture):E.detachEvent?E.detachEvent(L(R),U):E.addListener&&E.removeListener&&E.removeListener(U),(R=ze(E))?(lt(R,g),0==R.h&&(R.src=null,E[W]=null)):Jt(g)}}}function L(g){return g in dn?dn[g]:dn[g]="on"+g}function pe(g,E){if(g.da)g=!0;else{E=new pt(E,this);var R=g.listener,U=g.ha||g.src;g.fa&&G(g),g=R.call(U,E)}return g}function ze(g){return(g=g[W])instanceof li?g:null}var tt="__closure_events_fn_"+(1e9*Math.random()>>>0);function He(g){return"function"==typeof g?g:(g[tt]||(g[tt]=function(E){return g.handleEvent(E)}),g[tt])}function Ot(){rn.call(this),this.i=new li(this),this.M=this,this.F=null}function yt(g,E){var R,U=g.F;if(U)for(R=[];U;U=U.F)R.push(U);if(g=g.M,U=E.type||E,"string"==typeof E)E=new gn(E,g);else if(E instanceof gn)E.target=E.target||g;else{var de=E;M(E=new gn(U,g),de)}if(de=!0,R)for(var Pe=R.length-1;0<=Pe;Pe--){var Ct=E.g=R[Pe];de=jt(Ct,U,!0,E)&&de}if(de=jt(Ct=E.g=g,U,!0,E)&&de,de=jt(Ct,U,!1,E)&&de,R)for(Pe=0;Pe<R.length;Pe++)de=jt(Ct=E.g=R[Pe],U,!1,E)&&de}function jt(g,E,R,U){if(!(E=g.i.g[String(E)]))return!0;E=E.concat();for(var de=!0,Pe=0;Pe<E.length;++Pe){var Ct=E[Pe];if(Ct&&!Ct.da&&Ct.capture==R){var dr=Ct.listener,oo=Ct.ha||Ct.src;Ct.fa&&lt(g.i,Ct),de=!1!==dr.call(oo,U)&&de}}return de&&!U.defaultPrevented}function hi(g,E,R){if("function"==typeof g)R&&(g=p(g,R));else{if(!g||"function"!=typeof g.handleEvent)throw Error("Invalid listener argument");g=p(g.handleEvent,g)}return 2147483647<Number(E)?-1:a.setTimeout(g,E||0)}function mt(g){g.g=hi(()=>{g.g=null,g.i&&(g.i=!1,mt(g))},g.l);const E=g.h;g.h=null,g.m.apply(null,E)}v(Ot,rn),Ot.prototype[Ze]=!0,Ot.prototype.removeEventListener=function(g,E,R,U){Bt(this,g,E,R,U)},Ot.prototype.N=function(){if(Ot.aa.N.call(this),this.i){var E,g=this.i;for(E in g.g){for(var R=g.g[E],U=0;U<R.length;U++)Jt(R[U]);delete g.g[E],g.h--}}this.F=null},Ot.prototype.K=function(g,E,R,U){return this.i.add(String(g),E,!1,R,U)},Ot.prototype.L=function(g,E,R,U){return this.i.add(String(g),E,!0,R,U)};class sn extends rn{constructor(E,R){super(),this.m=E,this.l=R,this.h=null,this.i=!1,this.g=null}j(E){this.h=arguments,this.g?this.i=!0:mt(this)}N(){super.N(),this.g&&(a.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function bn(g){rn.call(this),this.h=g,this.g={}}v(bn,rn);var On=[];function nn(g){F(g.g,function(E,R){this.g.hasOwnProperty(R)&&G(E)},g),g.g={}}bn.prototype.N=function(){bn.aa.N.call(this),nn(this)},bn.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var yi=a.JSON.stringify,ei=a.JSON.parse,rr=class{stringify(g){return a.JSON.stringify(g,void 0)}parse(g){return a.JSON.parse(g,void 0)}};function ie(){}function Le(){}ie.prototype.h=null;var Xe={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function zt(){gn.call(this,"d")}function Ut(){gn.call(this,"c")}v(zt,gn),v(Ut,gn);var Dn={},Rr=null;function hs(){return Rr=Rr||new Ot}function Hi(g){gn.call(this,Dn.La,g)}function io(g){const E=hs();yt(E,new Hi(E))}function xl(g,E){gn.call(this,Dn.STAT_EVENT,g),this.stat=E}function Ws(g){const E=hs();yt(E,new xl(E,g))}function bx(g,E){gn.call(this,Dn.Ma,g),this.size=E}function $a(g,E){if("function"!=typeof g)throw Error("Fn must not be null and must be a function");return a.setTimeout(function(){g()},E)}function Zu(){this.g=!0}function Gl(g,E,R,U){g.info(function(){return"XMLHTTP TEXT ("+E+"): "+function ev(g,E){if(!g.g)return E;if(!E)return null;try{var R=JSON.parse(E);if(R)for(g=0;g<R.length;g++)if(Array.isArray(R[g])){var U=R[g];if(!(2>U.length)){var de=U[1];if(Array.isArray(de)&&!(1>de.length)){var Pe=de[0];if("noop"!=Pe&&"stop"!=Pe&&"close"!=Pe)for(var Ct=1;Ct<de.length;Ct++)de[Ct]=""}}}return yi(R)}catch{return E}}(g,R)+(U?" "+U:"")})}Dn.La="serverreachability",v(Hi,gn),Dn.STAT_EVENT="statevent",v(xl,gn),Dn.Ma="timingevent",v(bx,gn),Zu.prototype.xa=function(){this.g=!1},Zu.prototype.info=function(){};var wx,Sp={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},xx={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"};function tv(){}function Nc(g,E,R,U){this.j=g,this.i=E,this.l=R,this.R=U||1,this.U=new bn(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new lC}function lC(){this.i=null,this.g="",this.h=!1}v(tv,ie),tv.prototype.g=function(){return new XMLHttpRequest},tv.prototype.i=function(){return{}},wx=new tv;var cC={},Ex={};function B(g,E,R){g.L=1,g.v=bh(Ni(E)),g.m=R,g.P=!0,se(g,null)}function se(g,E){g.F=Date.now(),ce(g),g.A=Ni(g.v);var R=g.A,U=g.R;Array.isArray(U)||(U=[String(U)]),oK(R.i,"t",U),g.C=0,R=g.j.J,g.h=new lC,g.g=TK(g.j,R?E:null,!g.m),0<g.O&&(g.M=new sn(p(g.Y,g,g.g),g.O)),E=g.U,R=g.g,U=g.ca;var de="readystatechange";Array.isArray(de)||(de&&(On[0]=de.toString()),de=On);for(var Pe=0;Pe<de.length;Pe++){var Ct=ut(R,de[Pe],U||E.handleEvent,!1,E.h||E);if(!Ct)break;E.g[Ct.key]=Ct}E=g.H?D(g.H):{},g.m?(g.u||(g.u="POST"),E["Content-Type"]="application/x-www-form-urlencoded",g.g.ea(g.A,g.u,g.m,E)):(g.u="GET",g.g.ea(g.A,g.u,null,E)),io(),function sC(g,E,R,U,de,Pe){g.info(function(){if(g.g)if(Pe)for(var Ct="",dr=Pe.split("&"),oo=0;oo<dr.length;oo++){var ji=dr[oo].split("=");if(1<ji.length){var Mo=ji[0];ji=ji[1];var Do=Mo.split("_");Ct=2<=Do.length&&"type"==Do[1]?Ct+(Mo+"=")+ji+"&":Ct+(Mo+"=redacted&")}}else Ct=null;else Ct=Pe;return"XMLHTTP REQ ("+U+") [attempt "+de+"]: "+E+"\n"+R+"\n"+Ct})}(g.i,g.u,g.A,g.l,g.R,g.m)}function be(g){return!!g.g&&"GET"==g.u&&2!=g.L&&g.j.Ca}function Se(g,E){var R=g.C,U=E.indexOf("\n",R);return-1==U?Ex:(R=Number(E.substring(R,U)),isNaN(R)?cC:(U+=1)+R>E.length?Ex:(E=E.slice(U,U+R),g.C=U+R,E))}function ce(g){g.S=Date.now()+g.I,ht(g,g.I)}function ht(g,E){if(null!=g.B)throw Error("WatchDog timer not null");g.B=$a(p(g.ba,g),E)}function Pt(g){g.B&&(a.clearTimeout(g.B),g.B=null)}function qt(g){0==g.j.G||g.J||bK(g.j,g)}function Ht(g){Pt(g);var E=g.M;E&&"function"==typeof E.ma&&E.ma(),g.M=null,nn(g.U),g.g&&(E=g.g,g.g=null,E.abort(),E.ma())}function Rn(g,E){try{var R=g.j;if(0!=R.G&&(R.g==g||ur(R.h,g)))if(!g.K&&ur(R.h,g)&&3==R.G){try{var U=R.Da.g.parse(E)}catch{U=null}if(Array.isArray(U)&&3==U.length){var de=U;if(0==de[0]){e:if(!R.u){if(R.g){if(!(R.g.F+3e3<g.F))break e;pC(R),hC(R)}jL(R),Ws(18)}}else R.za=de[1],0<R.za-R.T&&37500>de[2]&&R.F&&0==R.v&&!R.C&&(R.C=$a(p(R.Za,R),6e3));if(1>=Gi(R.h)&&R.ca){try{R.ca()}catch{}R.ca=void 0}}else Ap(R,11)}else if((g.K||R.g==g)&&pC(R),!T(E))for(de=R.Da.g.parse(E),E=0;E<de.length;E++){let ji=de[E];if(R.T=ji[0],ji=ji[1],2==R.G)if("c"==ji[0]){R.K=ji[1],R.ia=ji[2];const Mo=ji[3];null!=Mo&&(R.la=Mo,R.j.info("VER="+R.la));const Do=ji[4];null!=Do&&(R.Aa=Do,R.j.info("SVER="+R.Aa));const rv=ji[5];null!=rv&&"number"==typeof rv&&0<rv&&(R.L=U=1.5*rv,R.j.info("backChannelRequestTimeoutMs_="+U)),U=R;const Wl=g.g;if(Wl){const gC=Wl.g?Wl.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(gC){var Pe=U.h;Pe.g||-1==gC.indexOf("spdy")&&-1==gC.indexOf("quic")&&-1==gC.indexOf("h2")||(Pe.j=Pe.l,Pe.g=new Set,Pe.h&&(wr(Pe,Pe.h),Pe.h=null))}if(U.D){const qL=Wl.g?Wl.g.getResponseHeader("X-HTTP-Session-Id"):null;qL&&(U.ya=qL,ci(U.I,U.D,qL))}}R.G=3,R.l&&R.l.ua(),R.ba&&(R.R=Date.now()-g.F,R.j.info("Handshake RTT: "+R.R+"ms"));var Ct=g;if((U=R).qa=EK(U,U.J?U.ia:null,U.W),Ct.K){Pi(U.h,Ct);var dr=Ct,oo=U.L;oo&&(dr.I=oo),dr.B&&(Pt(dr),ce(dr)),U.g=Ct}else vK(U);0<R.i.length&&fC(R)}else"stop"!=ji[0]&&"close"!=ji[0]||Ap(R,7);else 3==R.G&&("stop"==ji[0]||"close"==ji[0]?"stop"==ji[0]?Ap(R,7):WL(R):"noop"!=ji[0]&&R.l&&R.l.ta(ji),R.v=0)}io()}catch{}}function wn(g){this.l=g||10,g=a.PerformanceNavigationTiming?0<(g=a.performance.getEntriesByType("navigation")).length&&("hq"==g[0].nextHopProtocol||"h2"==g[0].nextHopProtocol):!!(a.chrome&&a.chrome.loadTimes&&a.chrome.loadTimes()&&a.chrome.loadTimes().wasFetchedViaSpdy),this.j=g?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function bi(g){return!!g.h||!!g.g&&g.g.size>=g.j}function Gi(g){return g.h?1:g.g?g.g.size:0}function ur(g,E){return g.h?g.h==E:!!g.g&&g.g.has(E)}function wr(g,E){g.g?g.g.add(E):g.h=E}function Pi(g,E){g.h&&g.h==E?g.h=null:g.g&&g.g.has(E)&&g.g.delete(E)}function En(g){if(null!=g.h)return g.i.concat(g.h.D);if(null!=g.g&&0!==g.g.size){let E=g.i;for(const R of g.g.values())E=E.concat(R.D);return E}return x(g.i)}function xa(g,E){if(g.forEach&&"function"==typeof g.forEach)g.forEach(E,void 0);else if(l(g)||"string"==typeof g)Array.prototype.forEach.call(g,E,void 0);else for(var R=function Wi(g){if(g.na&&"function"==typeof g.na)return g.na();if(!g.V||"function"!=typeof g.V){if(typeof Map<"u"&&g instanceof Map)return Array.from(g.keys());if(!(typeof Set<"u"&&g instanceof Set)){if(l(g)||"string"==typeof g){var E=[];g=g.length;for(var R=0;R<g;R++)E.push(R);return E}E=[],R=0;for(const U in g)E[R++]=U;return E}}}(g),U=function Rs(g){if(g.V&&"function"==typeof g.V)return g.V();if(typeof Map<"u"&&g instanceof Map||typeof Set<"u"&&g instanceof Set)return Array.from(g.values());if("string"==typeof g)return g.split("");if(l(g)){for(var E=[],R=g.length,U=0;U<R;U++)E.push(g[U]);return E}for(U in E=[],R=0,g)E[R++]=g[U];return E}(g),de=U.length,Pe=0;Pe<de;Pe++)E.call(void 0,U[Pe],R&&R[Pe],g)}Nc.prototype.ca=function(g){g=g.target;const E=this.M;E&&3==ed(g)?E.j():this.Y(g)},Nc.prototype.Y=function(g){try{if(g==this.g)e:{const Do=ed(this.g);var E=this.g.Ba();if(this.g.Z(),!(3>Do)&&(3!=Do||this.g&&(this.h.h||this.g.oa()||fK(this.g)))){this.J||4!=Do||7==E||io(),Pt(this);var R=this.g.Z();this.X=R;t:if(be(this)){var U=fK(this.g);g="";var de=U.length,Pe=4==ed(this.g);if(!this.h.i){if(typeof TextDecoder>"u"){Ht(this),qt(this);var Ct="";break t}this.h.i=new a.TextDecoder}for(E=0;E<de;E++)this.h.h=!0,g+=this.h.i.decode(U[E],{stream:!(Pe&&E==de-1)});U.length=0,this.h.g+=g,this.C=0,Ct=this.h.g}else Ct=this.g.oa();if(this.o=200==R,function oC(g,E,R,U,de,Pe,Ct){g.info(function(){return"XMLHTTP RESP ("+U+") [ attempt "+de+"]: "+E+"\n"+R+"\n"+Pe+" "+Ct})}(this.i,this.u,this.A,this.l,this.R,Do,R),this.o){if(this.T&&!this.K){t:{if(this.g){var dr,oo=this.g;if((dr=oo.g?oo.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!T(dr)){var ji=dr;break t}}ji=null}if(!(R=ji)){this.o=!1,this.s=3,Ws(12),Ht(this),qt(this);break e}Gl(this.i,this.l,R,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Rn(this,R)}if(this.P){let Wl;for(R=!0;!this.J&&this.C<Ct.length;){if(Wl=Se(this,Ct),Wl==Ex){4==Do&&(this.s=4,Ws(14),R=!1),Gl(this.i,this.l,null,"[Incomplete Response]");break}if(Wl==cC){this.s=4,Ws(15),Gl(this.i,this.l,Ct,"[Invalid Chunk]"),R=!1;break}Gl(this.i,this.l,Wl,null),Rn(this,Wl)}if(be(this)&&0!=this.C&&(this.h.g=this.h.g.slice(this.C),this.C=0),4!=Do||0!=Ct.length||this.h.h||(this.s=1,Ws(16),R=!1),this.o=this.o&&R,R){if(0<Ct.length&&!this.W){this.W=!0;var Mo=this.j;Mo.g==this&&Mo.ba&&!Mo.M&&(Mo.j.info("Great, no buffering proxy detected. Bytes received: "+Ct.length),$L(Mo),Mo.M=!0,Ws(11))}}else Gl(this.i,this.l,Ct,"[Invalid Chunked Response]"),Ht(this),qt(this)}else Gl(this.i,this.l,Ct,null),Rn(this,Ct);4==Do&&Ht(this),this.o&&!this.J&&(4==Do?bK(this.j,this):(this.o=!1,ce(this)))}else(function NDe(g){const E={};g=(g.g&&2<=ed(g)&&g.g.getAllResponseHeaders()||"").split("\r\n");for(let U=0;U<g.length;U++){if(T(g[U]))continue;var R=O(g[U]);const de=R[0];if("string"!=typeof(R=R[1]))continue;R=R.trim();const Pe=E[de]||[];E[de]=Pe,Pe.push(R)}!function P(g,E){for(const R in g)E.call(void 0,g[R],R,g)}(E,function(U){return U.join(", ")})})(this.g),400==R&&0<Ct.indexOf("Unknown SID")?(this.s=3,Ws(12)):(this.s=0,Ws(13)),Ht(this),qt(this)}}}catch{}},Nc.prototype.cancel=function(){this.J=!0,Ht(this)},Nc.prototype.ba=function(){this.B=null;const g=Date.now();0<=g-this.S?(function aC(g,E){g.info(function(){return"TIMEOUT: "+E})}(this.i,this.A),2!=this.L&&(io(),Ws(17)),Ht(this),this.s=2,qt(this)):ht(this,this.S-g)},wn.prototype.cancel=function(){if(this.i=En(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const g of this.g.values())g.cancel();this.g.clear()}};var Ju=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function qa(g){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,g instanceof qa){this.h=g.h,ro(this,g.j),this.o=g.o,this.g=g.g,so(this,g.s),this.l=g.l;var E=g.i,R=new Sx;R.i=E.i,E.g&&(R.g=new Map(E.g),R.h=E.h),js(this,R),this.m=g.m}else g&&(E=String(g).match(Ju))?(this.h=!1,ro(this,E[1]||"",!0),this.o=Xa(E[2]||""),this.g=Xa(E[3]||"",!0),so(this,E[4]),this.l=Xa(E[5]||"",!0),js(this,E[6]||"",!0),this.m=Xa(E[7]||"")):(this.h=!1,this.i=new Sx(null,this.h))}function Ni(g){return new qa(g)}function ro(g,E,R){g.j=R?Xa(E,!0):E,g.j&&(g.j=g.j.replace(/:$/,""))}function so(g,E){if(E){if(E=Number(E),isNaN(E)||0>E)throw Error("Bad port number "+E);g.s=E}else g.s=null}function js(g,E,R){E instanceof Sx?(g.i=E,function CDe(g,E){E&&!g.j&&(xh(g),g.i=null,g.g.forEach(function(R,U){var de=U.toLowerCase();U!=de&&(rK(this,U),oK(this,de,R))},g)),g.j=E}(g.i,g.h)):(R||(E=Tx(E,ADe)),g.i=new Sx(E,g.h))}function ci(g,E,R){g.i.set(E,R)}function bh(g){return ci(g,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),g}function Xa(g,E){return g?E?decodeURI(g.replace(/%25/g,"%2525")):decodeURIComponent(g):""}function Tx(g,E,R){return"string"==typeof g?(g=encodeURI(g).replace(E,EDe),R&&(g=g.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),g):null}function EDe(g){return"%"+((g=g.charCodeAt(0))>>4&15).toString(16)+(15&g).toString(16)}qa.prototype.toString=function(){var g=[],E=this.j;E&&g.push(Tx(E,iK,!0),":");var R=this.g;return(R||"file"==E)&&(g.push("//"),(E=this.o)&&g.push(Tx(E,iK,!0),"@"),g.push(encodeURIComponent(String(R)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(R=this.s)&&g.push(":",String(R))),(R=this.l)&&(this.g&&"/"!=R.charAt(0)&&g.push("/"),g.push(Tx(R,"/"==R.charAt(0)?SDe:TDe,!0))),(R=this.i.toString())&&g.push("?",R),(R=this.m)&&g.push("#",Tx(R,IDe)),g.join("")};var g,iK=/[#\/\?@]/g,TDe=/[#\?:]/g,SDe=/[#\?]/g,ADe=/[#\?@]/g,IDe=/#/g;function Sx(g,E){this.h=this.g=null,this.i=g||null,this.j=!!E}function xh(g){g.g||(g.g=new Map,g.h=0,g.i&&function Jo(g,E){if(g){g=g.split("&");for(var R=0;R<g.length;R++){var U=g[R].indexOf("="),de=null;if(0<=U){var Pe=g[R].substring(0,U);de=g[R].substring(U+1)}else Pe=g[R];E(Pe,de?decodeURIComponent(de.replace(/\+/g," ")):"")}}}(g.i,function(E,R){g.add(decodeURIComponent(E.replace(/\+/g," ")),R)}))}function rK(g,E){xh(g),E=nv(g,E),g.g.has(E)&&(g.i=null,g.h-=g.g.get(E).length,g.g.delete(E))}function sK(g,E){return xh(g),E=nv(g,E),g.g.has(E)}function oK(g,E,R){rK(g,E),0<R.length&&(g.i=null,g.g.set(nv(g,E),x(R)),g.h+=R.length)}function nv(g,E){return E=String(E),g.j&&(E=E.toLowerCase()),E}function wh(g,E,R,U,de){try{de&&(de.onload=null,de.onerror=null,de.onabort=null,de.ontimeout=null),U(R)}catch{}}function RDe(){this.g=new rr}function PDe(g,E,R){const U=R||"";try{xa(g,function(de,Pe){let Ct=de;c(de)&&(Ct=yi(de)),E.push(U+Pe+"="+encodeURIComponent(Ct))})}catch(de){throw E.push(U+"type="+encodeURIComponent("_badmap")),de}}function Ax(g){this.l=g.Ub||null,this.j=g.eb||!1}function uC(g,E){Ot.call(this),this.D=g,this.o=E,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}function aK(g){g.j.read().then(g.Pa.bind(g)).catch(g.ga.bind(g))}function Ix(g){g.readyState=4,g.l=null,g.j=null,g.v=null,Cx(g)}function Cx(g){g.onreadystatechange&&g.onreadystatechange.call(g)}function lK(g){let E="";return F(g,function(R,U){E+=U,E+=":",E+=R,E+="\r\n"}),E}function GL(g,E,R){e:{for(U in R){var U=!1;break e}U=!0}U||(R=lK(R),"string"==typeof g?null!=R&&encodeURIComponent(String(R)):ci(g,E,R))}function ts(g){Ot.call(this),this.headers=new Map,this.o=g||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}(n=Sx.prototype).add=function(g,E){xh(this),this.i=null,g=nv(this,g);var R=this.g.get(g);return R||this.g.set(g,R=[]),R.push(E),this.h+=1,this},n.forEach=function(g,E){xh(this),this.g.forEach(function(R,U){R.forEach(function(de){g.call(E,de,U,this)},this)},this)},n.na=function(){xh(this);const g=Array.from(this.g.values()),E=Array.from(this.g.keys()),R=[];for(let U=0;U<E.length;U++){const de=g[U];for(let Pe=0;Pe<de.length;Pe++)R.push(E[U])}return R},n.V=function(g){xh(this);let E=[];if("string"==typeof g)sK(this,g)&&(E=E.concat(this.g.get(nv(this,g))));else{g=Array.from(this.g.values());for(let R=0;R<g.length;R++)E=E.concat(g[R])}return E},n.set=function(g,E){return xh(this),this.i=null,sK(this,g=nv(this,g))&&(this.h-=this.g.get(g).length),this.g.set(g,[E]),this.h+=1,this},n.get=function(g,E){return g&&0<(g=this.V(g)).length?String(g[0]):E},n.toString=function(){if(this.i)return this.i;if(!this.g)return"";const g=[],E=Array.from(this.g.keys());for(var R=0;R<E.length;R++){var U=E[R];const Pe=encodeURIComponent(String(U)),Ct=this.V(U);for(U=0;U<Ct.length;U++){var de=Pe;""!==Ct[U]&&(de+="="+encodeURIComponent(String(Ct[U]))),g.push(de)}}return this.i=g.join("&")},v(Ax,ie),Ax.prototype.g=function(){return new uC(this.l,this.j)},Ax.prototype.i=(g={},function(){return g}),v(uC,Ot),(n=uC.prototype).open=function(g,E){if(0!=this.readyState)throw this.abort(),Error("Error reopening a connection");this.B=g,this.A=E,this.readyState=1,Cx(this)},n.send=function(g){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const E={headers:this.u,method:this.B,credentials:this.m,cache:void 0};g&&(E.body=g),(this.D||a).fetch(new Request(this.A,E)).then(this.Sa.bind(this),this.ga.bind(this))},n.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,Ix(this)),this.readyState=0},n.Sa=function(g){if(this.g&&(this.l=g,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=g.headers,this.readyState=2,Cx(this)),this.g&&(this.readyState=3,Cx(this),this.g)))if("arraybuffer"===this.responseType)g.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof a.ReadableStream<"u"&&"body"in g){if(this.j=g.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;aK(this)}else g.text().then(this.Ra.bind(this),this.ga.bind(this))},n.Pa=function(g){if(this.g){if(this.o&&g.value)this.response.push(g.value);else if(!this.o){var E=g.value?g.value:new Uint8Array(0);(E=this.v.decode(E,{stream:!g.done}))&&(this.response=this.responseText+=E)}g.done?Ix(this):Cx(this),3==this.readyState&&aK(this)}},n.Ra=function(g){this.g&&(this.response=this.responseText=g,Ix(this))},n.Qa=function(g){this.g&&(this.response=g,Ix(this))},n.ga=function(){this.g&&Ix(this)},n.setRequestHeader=function(g,E){this.u.append(g,E)},n.getResponseHeader=function(g){return this.h&&this.h.get(g.toLowerCase())||""},n.getAllResponseHeaders=function(){if(!this.h)return"";const g=[],E=this.h.entries();for(var R=E.next();!R.done;)g.push((R=R.value)[0]+": "+R[1]),R=E.next();return g.join("\r\n")},Object.defineProperty(uC.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(g){this.m=g?"include":"same-origin"}}),v(ts,Ot);var kDe=/^https?$/i,ODe=["POST","PUT"];function cK(g,E){g.h=!1,g.g&&(g.j=!0,g.g.abort(),g.j=!1),g.l=E,g.m=5,uK(g),dC(g)}function uK(g){g.A||(g.A=!0,yt(g,"complete"),yt(g,"error"))}function dK(g){if(g.h&&typeof o<"u"&&(!g.v[1]||4!=ed(g)||2!=g.Z()))if(g.u&&4==ed(g))hi(g.Ea,0,g);else if(yt(g,"readystatechange"),4==ed(g)){g.h=!1;try{const Ct=g.Z();e:switch(Ct){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var E=!0;break e;default:E=!1}var R;if(!(R=E)){var U;if(U=0===Ct){var de=String(g.D).match(Ju)[1]||null;!de&&a.self&&a.self.location&&(de=a.self.location.protocol.slice(0,-1)),U=!kDe.test(de?de.toLowerCase():"")}R=U}if(R)yt(g,"complete"),yt(g,"success");else{g.m=6;try{var Pe=2<ed(g)?g.g.statusText:""}catch{Pe=""}g.l=Pe+" ["+g.Z()+"]",uK(g)}}finally{dC(g)}}}function dC(g,E){if(g.g){hK(g);const R=g.g,U=g.v[0]?()=>{}:null;g.g=null,g.v=null,E||yt(g,"ready");try{R.onreadystatechange=U}catch{}}}function hK(g){g.I&&(a.clearTimeout(g.I),g.I=null)}function ed(g){return g.g?g.g.readyState:0}function fK(g){try{if(!g.g)return null;if("response"in g.g)return g.g.response;switch(g.H){case"":case"text":return g.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in g.g)return g.g.mozResponseArrayBuffer}return null}catch{return null}}function Mx(g,E,R){return R&&R.internalChannelParams&&R.internalChannelParams[g]||E}function pK(g){this.Aa=0,this.i=[],this.j=new Zu,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Mx("failFast",!1,g),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Mx("baseRetryDelayMs",5e3,g),this.cb=Mx("retryDelaySeedMs",1e4,g),this.Wa=Mx("forwardChannelMaxRetries",2,g),this.wa=Mx("forwardChannelRequestTimeoutMs",2e4,g),this.pa=g&&g.xmlHttpFactory||void 0,this.Xa=g&&g.Tb||void 0,this.Ca=g&&g.useFetchStreams||!1,this.L=void 0,this.J=g&&g.supportsCrossDomainXhr||!1,this.K="",this.h=new wn(g&&g.concurrentRequestLimit),this.Da=new RDe,this.P=g&&g.fastHandshake||!1,this.O=g&&g.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=g&&g.Rb||!1,g&&g.xa&&this.j.xa(),g&&g.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&g&&g.detectBufferingProxy||!1,this.ja=void 0,g&&g.longPollingTimeout&&0<g.longPollingTimeout&&(this.ja=g.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}function WL(g){if(mK(g),3==g.G){var E=g.U++,R=Ni(g.I);if(ci(R,"SID",g.K),ci(R,"RID",E),ci(R,"TYPE","terminate"),Dx(g,R),(E=new Nc(g,g.j,E)).L=2,E.v=bh(Ni(R)),R=!1,a.navigator&&a.navigator.sendBeacon)try{R=a.navigator.sendBeacon(E.v.toString(),"")}catch{}!R&&a.Image&&((new Image).src=E.v,R=!0),R||(E.g=TK(E.j,null),E.g.ea(E.v)),E.F=Date.now(),ce(E)}wK(g)}function hC(g){g.g&&($L(g),g.g.cancel(),g.g=null)}function mK(g){hC(g),g.u&&(a.clearTimeout(g.u),g.u=null),pC(g),g.h.cancel(),g.s&&("number"==typeof g.s&&a.clearTimeout(g.s),g.s=null)}function fC(g){if(!bi(g.h)&&!g.s){g.s=!0;var E=g.Ga;we||vt(),oe||(we(),oe=!0),$e.add(E,g),g.B=0}}function gK(g,E){var R;R=E?E.l:g.U++;const U=Ni(g.I);ci(U,"SID",g.K),ci(U,"RID",R),ci(U,"AID",g.T),Dx(g,U),g.m&&g.o&&GL(U,g.m,g.o),R=new Nc(g,g.j,R,g.B+1),null===g.m&&(R.H=g.o),E&&(g.i=E.D.concat(g.i)),E=_K(g,R,1e3),R.I=Math.round(.5*g.wa)+Math.round(.5*g.wa*Math.random()),wr(g.h,R),B(R,U,E)}function Dx(g,E){g.H&&F(g.H,function(R,U){ci(E,U,R)}),g.l&&xa({},function(R,U){ci(E,U,R)})}function _K(g,E,R){R=Math.min(g.i.length,R);var U=g.l?p(g.l.Na,g.l,g):null;e:{var de=g.i;let Pe=-1;for(;;){const Ct=["count="+R];-1==Pe?0<R?(Pe=de[0].g,Ct.push("ofs="+Pe)):Pe=0:Ct.push("ofs="+Pe);let dr=!0;for(let oo=0;oo<R;oo++){let ji=de[oo].g;const Mo=de[oo].map;if(ji-=Pe,0>ji)Pe=Math.max(0,de[oo].g-100),dr=!1;else try{PDe(Mo,Ct,"req"+ji+"_")}catch{U&&U(Mo)}}if(dr){U=Ct.join("&");break e}}}return g=g.i.splice(0,R),E.D=g,U}function vK(g){if(!g.g&&!g.u){g.Y=1;var E=g.Fa;we||vt(),oe||(we(),oe=!0),$e.add(E,g),g.v=0}}function jL(g){return!(g.g||g.u||3<=g.v||(g.Y++,g.u=$a(p(g.Fa,g),xK(g,g.v)),g.v++,0))}function $L(g){null!=g.A&&(a.clearTimeout(g.A),g.A=null)}function yK(g){g.g=new Nc(g,g.j,"rpc",g.Y),null===g.m&&(g.g.H=g.o),g.g.O=0;var E=Ni(g.qa);ci(E,"RID","rpc"),ci(E,"SID",g.K),ci(E,"AID",g.T),ci(E,"CI",g.F?"0":"1"),!g.F&&g.ja&&ci(E,"TO",g.ja),ci(E,"TYPE","xmlhttp"),Dx(g,E),g.m&&g.o&&GL(E,g.m,g.o),g.L&&(g.g.I=g.L);var R=g.g;g=g.ia,R.L=1,R.v=bh(Ni(E)),R.m=null,R.P=!0,se(R,g)}function pC(g){null!=g.C&&(a.clearTimeout(g.C),g.C=null)}function bK(g,E){var R=null;if(g.g==E){pC(g),$L(g),g.g=null;var U=2}else{if(!ur(g.h,E))return;R=E.D,Pi(g.h,E),U=1}if(0!=g.G)if(E.o)if(1==U){R=E.m?E.m.length:0,E=Date.now()-E.F;var de=g.B;yt(U=hs(),new bx(U,R)),fC(g)}else vK(g);else if(3==(de=E.s)||0==de&&0<E.X||!(1==U&&function FDe(g,E){return!(Gi(g.h)>=g.h.j-(g.s?1:0)||(g.s?(g.i=E.D.concat(g.i),0):1==g.G||2==g.G||g.B>=(g.Va?0:g.Wa)||(g.s=$a(p(g.Ga,g,E),xK(g,g.B)),g.B++,0)))}(g,E)||2==U&&jL(g)))switch(R&&0<R.length&&(E=g.h,E.i=E.i.concat(R)),de){case 1:Ap(g,5);break;case 4:Ap(g,10);break;case 3:Ap(g,6);break;default:Ap(g,2)}}function xK(g,E){let R=g.Ta+Math.floor(Math.random()*g.cb);return g.isActive()||(R*=2),R*E}function Ap(g,E){if(g.j.info("Error code "+E),2==E){var R=p(g.fb,g),U=g.Xa;const de=!U;U=new qa(U||"//www.google.com/images/cleardot.gif"),a.location&&"http"==a.location.protocol||ro(U,"https"),bh(U),de?function MDe(g,E){const R=new Zu;if(a.Image){const U=new Image;U.onload=m(wh,R,"TestLoadImage: loaded",!0,E,U),U.onerror=m(wh,R,"TestLoadImage: error",!1,E,U),U.onabort=m(wh,R,"TestLoadImage: abort",!1,E,U),U.ontimeout=m(wh,R,"TestLoadImage: timeout",!1,E,U),a.setTimeout(function(){U.ontimeout&&U.ontimeout()},1e4),U.src=g}else E(!1)}(U.toString(),R):function DDe(g,E){new Zu;const U=new AbortController,de=setTimeout(()=>{U.abort(),wh(0,0,!1,E)},1e4);fetch(g,{signal:U.signal}).then(Pe=>{clearTimeout(de),wh(0,0,!!Pe.ok,E)}).catch(()=>{clearTimeout(de),wh(0,0,!1,E)})}(U.toString(),R)}else Ws(2);g.G=0,g.l&&g.l.sa(E),wK(g),mK(g)}function wK(g){if(g.G=0,g.ka=[],g.l){const E=En(g.h);(0!=E.length||0!=g.i.length)&&(b(g.ka,E),b(g.ka,g.i),g.h.i.length=0,x(g.i),g.i.length=0),g.l.ra()}}function EK(g,E,R){var U=R instanceof qa?Ni(R):new qa(R);if(""!=U.g)E&&(U.g=E+"."+U.g),so(U,U.s);else{var de=a.location;U=de.protocol,E=E?E+"."+de.hostname:de.hostname,de=+de.port;var Pe=new qa(null);U&&ro(Pe,U),E&&(Pe.g=E),de&&so(Pe,de),R&&(Pe.l=R),U=Pe}return E=g.ya,(R=g.D)&&E&&ci(U,R,E),ci(U,"VER",g.la),Dx(g,U),U}function TK(g,E,R){if(E&&!g.J)throw Error("Can't create secondary domain capable XhrIo object.");return(E=new ts(g.Ca&&!g.pa?new Ax({eb:R}):g.pa)).Ha(g.J),E}function SK(){}function mC(){}function Ka(g,E){Ot.call(this),this.g=new pK(E),this.l=g,this.h=E&&E.messageUrlParams||null,g=E&&E.messageHeaders||null,E&&E.clientProtocolHeaderRequired&&(g?g["X-Client-Protocol"]="webchannel":g={"X-Client-Protocol":"webchannel"}),this.g.o=g,g=E&&E.initMessageHeaders||null,E&&E.messageContentType&&(g?g["X-WebChannel-Content-Type"]=E.messageContentType:g={"X-WebChannel-Content-Type":E.messageContentType}),E&&E.va&&(g?g["X-WebChannel-Client-Profile"]=E.va:g={"X-WebChannel-Client-Profile":E.va}),this.g.S=g,(g=E&&E.Sb)&&!T(g)&&(this.g.m=g),this.v=E&&E.supportsCrossDomainXhr||!1,this.u=E&&E.sendRawJson||!1,(E=E&&E.httpSessionIdParam)&&!T(E)&&(this.g.D=E,null!==(g=this.h)&&E in g&&E in(g=this.h)&&delete g[E]),this.j=new iv(this)}function AK(g){zt.call(this),g.__headers__&&(this.headers=g.__headers__,this.statusCode=g.__status__,delete g.__headers__,delete g.__status__);var E=g.__sm__;if(E){e:{for(const R in E){g=R;break e}g=void 0}(this.i=g)&&(g=this.i,E=null!==E&&g in E?E[g]:void 0),this.data=E}else this.data=g}function IK(){Ut.call(this),this.status=1}function iv(g){this.g=g}(n=ts.prototype).Ha=function(g){this.J=g},n.ea=function(g,E,R,U){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+g);E=E?E.toUpperCase():"GET",this.D=g,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():wx.g(),this.v=function Lt(g){return g.h||(g.h=g.i())}(this.o?this.o:wx),this.g.onreadystatechange=p(this.Ea,this);try{this.B=!0,this.g.open(E,String(g),!0),this.B=!1}catch(Pe){return void cK(this,Pe)}if(g=R||"",R=new Map(this.headers),U)if(Object.getPrototypeOf(U)===Object.prototype)for(var de in U)R.set(de,U[de]);else{if("function"!=typeof U.keys||"function"!=typeof U.get)throw Error("Unknown input type for opt_headers: "+String(U));for(const Pe of U.keys())R.set(Pe,U.get(Pe))}U=Array.from(R.keys()).find(Pe=>"content-type"==Pe.toLowerCase()),de=a.FormData&&g instanceof a.FormData,!(0<=Array.prototype.indexOf.call(ODe,E,void 0))||U||de||R.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[Pe,Ct]of R)this.g.setRequestHeader(Pe,Ct);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{hK(this),this.u=!0,this.g.send(g),this.u=!1}catch(Pe){cK(this,Pe)}},n.abort=function(g){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=g||7,yt(this,"complete"),yt(this,"abort"),dC(this))},n.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),dC(this,!0)),ts.aa.N.call(this)},n.Ea=function(){this.s||(this.B||this.u||this.j?dK(this):this.bb())},n.bb=function(){dK(this)},n.isActive=function(){return!!this.g},n.Z=function(){try{return 2<ed(this)?this.g.status:-1}catch{return-1}},n.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},n.Oa=function(g){if(this.g){var E=this.g.responseText;return g&&0==E.indexOf(g)&&(E=E.substring(g.length)),ei(E)}},n.Ba=function(){return this.m},n.Ka=function(){return"string"==typeof this.l?this.l:String(this.l)},(n=pK.prototype).la=8,n.G=1,n.connect=function(g,E,R,U){Ws(0),this.W=g,this.H=E||{},R&&void 0!==U&&(this.H.OSID=R,this.H.OAID=U),this.F=this.X,this.I=EK(this,null,this.W),fC(this)},n.Ga=function(g){if(this.s)if(this.s=null,1==this.G){if(!g){this.U=Math.floor(1e5*Math.random()),g=this.U++;const de=new Nc(this,this.j,g);let Pe=this.o;if(this.S&&(Pe?(Pe=D(Pe),M(Pe,this.S)):Pe=this.S),null!==this.m||this.O||(de.H=Pe,Pe=null),this.P)e:{for(var E=0,R=0;R<this.i.length;R++){var U=this.i[R];if(void 0===(U="__data__"in U.map&&"string"==typeof(U=U.map.__data__)?U.length:void 0))break;if(4096<(E+=U)){E=R;break e}if(4096===E||R===this.i.length-1){E=R+1;break e}}E=1e3}else E=1e3;E=_K(this,de,E),ci(R=Ni(this.I),"RID",g),ci(R,"CVER",22),this.D&&ci(R,"X-HTTP-Session-Id",this.D),Dx(this,R),Pe&&(this.O?E="headers="+encodeURIComponent(String(lK(Pe)))+"&"+E:this.m&&GL(R,this.m,Pe)),wr(this.h,de),this.Ua&&ci(R,"TYPE","init"),this.P?(ci(R,"$req",E),ci(R,"SID","null"),de.T=!0,B(de,R,null)):B(de,R,E),this.G=2}}else 3==this.G&&(g?gK(this,g):0==this.i.length||bi(this.h)||gK(this))},n.Fa=function(){if(this.u=null,yK(this),this.ba&&!(this.M||null==this.g||0>=this.R)){var g=2*this.R;this.j.info("BP detection timer enabled: "+g),this.A=$a(p(this.ab,this),g)}},n.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,Ws(10),hC(this),yK(this))},n.Za=function(){null!=this.C&&(this.C=null,hC(this),jL(this),Ws(19))},n.fb=function(g){g?(this.j.info("Successfully pinged google.com"),Ws(2)):(this.j.info("Failed to ping google.com"),Ws(1))},n.isActive=function(){return!!this.l&&this.l.isActive(this)},(n=SK.prototype).ua=function(){},n.ta=function(){},n.sa=function(){},n.ra=function(){},n.isActive=function(){return!0},n.Na=function(){},mC.prototype.g=function(g,E){return new Ka(g,E)},v(Ka,Ot),Ka.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},Ka.prototype.close=function(){WL(this.g)},Ka.prototype.o=function(g){var E=this.g;if("string"==typeof g){var R={};R.__data__=g,g=R}else this.u&&((R={}).__data__=yi(g),g=R);E.i.push(new class{constructor(g,E){this.g=g,this.map=E}}(E.Ya++,g)),3==E.G&&fC(E)},Ka.prototype.N=function(){this.g.l=null,delete this.j,WL(this.g),delete this.g,Ka.aa.N.call(this)},v(AK,zt),v(IK,Ut),v(iv,SK),iv.prototype.ua=function(){yt(this.g,"a")},iv.prototype.ta=function(g){yt(this.g,new AK(g))},iv.prototype.sa=function(g){yt(this.g,new IK)},iv.prototype.ra=function(){yt(this.g,"b")},mC.prototype.createWebChannel=mC.prototype.g,Ka.prototype.send=Ka.prototype.o,Ka.prototype.open=Ka.prototype.m,Ka.prototype.close=Ka.prototype.close,a5=bu.createWebChannelTransport=function(){return new mC},o5=bu.getStatEventTarget=function(){return hs()},s5=bu.Event=Dn,TR=bu.Stat={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},Sp.NO_ERROR=0,Sp.TIMEOUT=8,Sp.HTTP_ERROR=6,OT=bu.ErrorCode=Sp,xx.COMPLETE="complete",r5=bu.EventType=xx,Le.EventType=Xe,Xe.OPEN="a",Xe.CLOSE="b",Xe.ERROR="c",Xe.MESSAGE="d",Ot.prototype.listen=Ot.prototype.K,A0=bu.WebChannel=Le,bu.FetchXmlHttpFactory=Ax,ts.prototype.listenOnce=ts.prototype.L,ts.prototype.getLastError=ts.prototype.Ka,ts.prototype.getLastErrorCode=ts.prototype.Ba,ts.prototype.getStatus=ts.prototype.Z,ts.prototype.getResponseJson=ts.prototype.Oa,ts.prototype.getResponseText=ts.prototype.oa,ts.prototype.send=ts.prototype.ea,ts.prototype.setWithCredentials=ts.prototype.Ha,i5=bu.XhrIo=ts}).apply(typeof kT<"u"?kT:typeof self<"u"?self:typeof window<"u"?window:{});const l5="@firebase/firestore";class Us{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Us.UNAUTHENTICATED=new Us(null),Us.GOOGLE_CREDENTIALS=new Us("google-credentials-uid"),Us.FIRST_PARTY=new Us("first-party-uid"),Us.MOCK_USER=new Us("mock-user");let mg="10.14.0";const Od=new gc.Vy("@firebase/firestore");function gg(){return Od.logLevel}function Je(n,...e){if(Od.logLevel<=gc.$b.DEBUG){const t=e.map(SR);Od.debug(`Firestore (${mg}): ${n}`,...t)}}function ls(n,...e){if(Od.logLevel<=gc.$b.ERROR){const t=e.map(SR);Od.error(`Firestore (${mg}): ${n}`,...t)}}function ka(n,...e){if(Od.logLevel<=gc.$b.WARN){const t=e.map(SR);Od.warn(`Firestore (${mg}): ${n}`,...t)}}function SR(n){if("string"==typeof n)return n;try{return JSON.stringify(n)}catch{return n}}function Qt(n="Unexpected state"){const e=`FIRESTORE (${mg}) INTERNAL ASSERTION FAILED: `+n;throw ls(e),new Error(e)}function an(n,e){n||Qt()}function It(n,e){return n}const Te={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Ye extends ii.g{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class Bs{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}class c5{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class Ule{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(Us.UNAUTHENTICATED))}shutdown(){}}class Ble{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class zle{constructor(e){this.t=e,this.currentUser=Us.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){var i=this;an(void 0===this.o);let r=this.i;const s=c=>this.i!==r?(r=this.i,t(c)):Promise.resolve();let o=new Bs;this.o=()=>{this.i++,this.currentUser=this.u(),o.resolve(),o=new Bs,e.enqueueRetryable(()=>s(this.currentUser))};const a=()=>{const c=o;e.enqueueRetryable((0,Me.A)(function*(){yield c.promise,yield s(i.currentUser)}))},l=c=>{Je("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=c,this.o&&(this.auth.addAuthTokenListener(this.o),a())};this.t.onInit(c=>l(c)),setTimeout(()=>{if(!this.auth){const c=this.t.getImmediate({optional:!0});c?l(c):(Je("FirebaseAuthCredentialsProvider","Auth not yet detected"),o.resolve(),o=new Bs)}},0),a()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(i=>this.i!==e?(Je("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):i?(an("string"==typeof i.accessToken),new c5(i.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return an(null===e||"string"==typeof e),new Us(e)}}class Hle{constructor(e,t,i){this.l=e,this.h=t,this.P=i,this.type="FirstParty",this.user=Us.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class Gle{constructor(e,t,i){this.l=e,this.h=t,this.P=i}getToken(){return Promise.resolve(new Hle(this.l,this.h,this.P))}start(e,t){e.enqueueRetryable(()=>t(Us.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class u5{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class Wle{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,t){an(void 0===this.o);const i=s=>{null!=s.error&&Je("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${s.error.message}`);const o=s.token!==this.R;return this.R=s.token,Je("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?t(s.token):Promise.resolve()};this.o=s=>{e.enqueueRetryable(()=>i(s))};const r=s=>{Je("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=s,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit(s=>r(s)),setTimeout(()=>{if(!this.appCheck){const s=this.A.getImmediate({optional:!0});s?r(s):Je("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(an("string"==typeof t.token),this.R=t.token,new u5(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}function jle(n){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&"function"==typeof e.getRandomValues)e.getRandomValues(t);else for(let i=0;i<n;i++)t[i]=Math.floor(256*Math.random());return t}class d5{static newId(){const t=62*Math.floor(256/62);let i="";for(;i.length<20;){const r=jle(40);for(let s=0;s<r.length;++s)i.length<20&&r[s]<t&&(i+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789".charAt(r[s]%62))}return i}}function Vn(n,e){return n<e?-1:n>e?1:0}function _g(n,e,t){return n.length===e.length&&n.every((i,r)=>t(i,e[r]))}function h5(n){return n+"\0"}class Nr{constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new Ye(Te.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new Ye(Te.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new Ye(Te.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Ye(Te.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return Nr.fromMillis(Date.now())}static fromDate(e){return Nr.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),i=Math.floor(1e6*(e-1e3*t));return new Nr(t,i)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?Vn(this.nanoseconds,e.nanoseconds):Vn(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){return String(this.seconds- -62135596800).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class fn{constructor(e){this.timestamp=e}static fromTimestamp(e){return new fn(e)}static min(){return new fn(new Nr(0,0))}static max(){return new fn(new Nr(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}class I0{constructor(e,t,i){void 0===t?t=0:t>e.length&&Qt(),void 0===i?i=e.length-t:i>e.length-t&&Qt(),this.segments=e,this.offset=t,this.len=i}get length(){return this.len}isEqual(e){return 0===I0.comparator(this,e)}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof I0?e.forEach(i=>{t.push(i)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return this.construct(this.segments,this.offset+(e=void 0===e?1:e),this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,i=this.limit();t<i;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const i=Math.min(e.length,t.length);for(let r=0;r<i;r++){const s=e.get(r),o=t.get(r);if(s<o)return-1;if(s>o)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}class Si extends I0{construct(e,t,i){return new Si(e,t,i)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const t=[];for(const i of e){if(i.indexOf("//")>=0)throw new Ye(Te.INVALID_ARGUMENT,`Invalid segment (${i}). Paths must not contain // in them.`);t.push(...i.split("/").filter(r=>r.length>0))}return new Si(t)}static emptyPath(){return new Si([])}}const $le=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Ar extends I0{construct(e,t,i){return new Ar(e,t,i)}static isValidIdentifier(e){return $le.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Ar.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&"__name__"===this.get(0)}static keyField(){return new Ar(["__name__"])}static fromServerFormat(e){const t=[];let i="",r=0;const s=()=>{if(0===i.length)throw new Ye(Te.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(i),i=""};let o=!1;for(;r<e.length;){const a=e[r];if("\\"===a){if(r+1===e.length)throw new Ye(Te.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const l=e[r+1];if("\\"!==l&&"."!==l&&"`"!==l)throw new Ye(Te.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);i+=l,r+=2}else"`"===a?(o=!o,r++):"."!==a||o?(i+=a,r++):(s(),r++)}if(s(),o)throw new Ye(Te.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Ar(t)}static emptyPath(){return new Ar([])}}class Rt{constructor(e){this.path=e}static fromPath(e){return new Rt(Si.fromString(e))}static fromName(e){return new Rt(Si.fromString(e).popFirst(5))}static empty(){return new Rt(Si.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return null!==e&&0===Si.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,t){return Si.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Rt(new Si(e.slice()))}}class vg{constructor(e,t,i,r){this.indexId=e,this.collectionGroup=t,this.fields=i,this.indexState=r}}function AR(n){return n.fields.find(e=>2===e.kind)}function bf(n){return n.fields.filter(e=>2!==e.kind)}vg.UNKNOWN_ID=-1;class xf{constructor(e,t){this.fieldPath=e,this.kind=t}}class yg{constructor(e,t){this.sequenceNumber=e,this.offset=t}static empty(){return new yg(0,Oa.min())}}function f5(n,e){const t=n.toTimestamp().seconds,i=n.toTimestamp().nanoseconds+1,r=fn.fromTimestamp(1e9===i?new Nr(t+1,0):new Nr(t,i));return new Oa(r,Rt.empty(),e)}function p5(n){return new Oa(n.readTime,n.key,-1)}class Oa{constructor(e,t,i){this.readTime=e,this.documentKey=t,this.largestBatchId=i}static min(){return new Oa(fn.min(),Rt.empty(),-1)}static max(){return new Oa(fn.max(),Rt.empty(),-1)}}function IR(n,e){let t=n.readTime.compareTo(e.readTime);return 0!==t?t:(t=Rt.comparator(n.documentKey,e.documentKey),0!==t?t:Vn(n.largestBatchId,e.largestBatchId))}const m5="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class g5{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}function Nd(n){return CR.apply(this,arguments)}function CR(){return(CR=(0,Me.A)(function*(n){if(n.code!==Te.FAILED_PRECONDITION||n.message!==m5)throw n;Je("LocalStore","Unexpectedly lost primary lease")})).apply(this,arguments)}class he{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&Qt(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new he((i,r)=>{this.nextCallback=s=>{this.wrapSuccess(e,s).next(i,r)},this.catchCallback=s=>{this.wrapFailure(t,s).next(i,r)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof he?t:he.resolve(t)}catch(t){return he.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):he.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):he.reject(t)}static resolve(e){return new he((t,i)=>{t(e)})}static reject(e){return new he((t,i)=>{i(e)})}static waitFor(e){return new he((t,i)=>{let r=0,s=0,o=!1;e.forEach(a=>{++r,a.next(()=>{++s,o&&s===r&&t()},l=>i(l))}),o=!0,s===r&&t()})}static or(e){let t=he.resolve(!1);for(const i of e)t=t.next(r=>r?he.resolve(r):i());return t}static forEach(e,t){const i=[];return e.forEach((r,s)=>{i.push(t.call(this,r,s))}),this.waitFor(i)}static mapArray(e,t){return new he((i,r)=>{const s=e.length,o=new Array(s);let a=0;for(let l=0;l<s;l++){const c=l;t(e[c]).next(u=>{o[c]=u,++a,a===s&&i(o)},u=>r(u))}})}static doWhile(e,t){return new he((i,r)=>{const s=()=>{!0===e()?t().next(()=>{s()},r):i()};s()})}}class NT{constructor(e,t){this.action=e,this.transaction=t,this.aborted=!1,this.V=new Bs,this.transaction.oncomplete=()=>{this.V.resolve()},this.transaction.onabort=()=>{t.error?this.V.reject(new C0(e,t.error)):this.V.resolve()},this.transaction.onerror=i=>{const r=MR(i.target.error);this.V.reject(new C0(e,r))}}static open(e,t,i,r){try{return new NT(t,e.transaction(r,i))}catch(s){throw new C0(t,s)}}get m(){return this.V.promise}abort(e){e&&this.V.reject(e),this.aborted||(Je("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}g(){const e=this.transaction;this.aborted||"function"!=typeof e.commit||e.commit()}store(e){const t=this.transaction.objectStore(e);return new Yle(t)}}class _c{constructor(e,t,i){this.name=e,this.version=t,this.p=i,12.2===_c.S((0,ii.ZQ)())&&ls("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return Je("SimpleDb","Removing database:",e),wf(window.indexedDB.deleteDatabase(e)).toPromise()}static D(){if(!(0,ii.zW)())return!1;if(_c.v())return!0;const e=(0,ii.ZQ)(),t=_c.S(e),i=0<t&&t<10,r=_5(e),s=0<r&&r<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||i||s)}static v(){var e;return typeof process<"u"&&"YES"===(null===(e=process.__PRIVATE_env)||void 0===e?void 0:e.C)}static F(e,t){return e.store(t)}static S(e){const t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),i=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(i)}M(e){var t=this;return(0,Me.A)(function*(){return t.db||(Je("SimpleDb","Opening database:",t.name),t.db=yield new Promise((i,r)=>{const s=indexedDB.open(t.name,t.version);s.onsuccess=o=>{i(o.target.result)},s.onblocked=()=>{r(new C0(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},s.onerror=o=>{const a=o.target.error;r("VersionError"===a.name?new Ye(Te.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh."):"InvalidStateError"===a.name?new Ye(Te.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+a):new C0(e,a))},s.onupgradeneeded=o=>{Je("SimpleDb",'Database "'+t.name+'" requires upgrade from version:',o.oldVersion),t.p.O(o.target.result,s.transaction,o.oldVersion,t.version).next(()=>{Je("SimpleDb","Database upgrade to version "+t.version+" complete")})}})),t.N&&(t.db.onversionchange=i=>t.N(i)),t.db})()}L(e){this.N=e,this.db&&(this.db.onversionchange=t=>e(t))}runTransaction(e,t,i,r){var s=this;return(0,Me.A)(function*(){const o="readonly"===t;let a=0;for(;;){++a;try{s.db=yield s.M(e);const l=NT.open(s.db,e,o?"readonly":"readwrite",i),c=r(l).next(u=>(l.g(),u)).catch(u=>(l.abort(u),he.reject(u))).toPromise();return c.catch(()=>{}),yield l.m,c}catch(l){const c=l,u="FirebaseError"!==c.name&&a<3;if(Je("SimpleDb","Transaction failed with error:",c.message,"Retrying:",u),s.close(),!u)return Promise.reject(c)}}})()}close(){this.db&&this.db.close(),this.db=void 0}}function _5(n){const e=n.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}class Kle{constructor(e){this.B=e,this.k=!1,this.q=null}get isDone(){return this.k}get K(){return this.q}set cursor(e){this.B=e}done(){this.k=!0}$(e){this.q=e}delete(){return wf(this.B.delete())}}class C0 extends Ye{constructor(e,t){super(Te.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${t}`),this.name="IndexedDbTransactionError"}}function Fd(n){return"IndexedDbTransactionError"===n.name}class Yle{constructor(e){this.store=e}put(e,t){let i;return void 0!==t?(Je("SimpleDb","PUT",this.store.name,e,t),i=this.store.put(t,e)):(Je("SimpleDb","PUT",this.store.name,"<auto-key>",e),i=this.store.put(e)),wf(i)}add(e){return Je("SimpleDb","ADD",this.store.name,e,e),wf(this.store.add(e))}get(e){return wf(this.store.get(e)).next(t=>(void 0===t&&(t=null),Je("SimpleDb","GET",this.store.name,e,t),t))}delete(e){return Je("SimpleDb","DELETE",this.store.name,e),wf(this.store.delete(e))}count(){return Je("SimpleDb","COUNT",this.store.name),wf(this.store.count())}U(e,t){const i=this.options(e,t),r=i.index?this.store.index(i.index):this.store;if("function"==typeof r.getAll){const s=r.getAll(i.range);return new he((o,a)=>{s.onerror=l=>{a(l.target.error)},s.onsuccess=l=>{o(l.target.result)}})}{const s=this.cursor(i),o=[];return this.W(s,(a,l)=>{o.push(l)}).next(()=>o)}}G(e,t){const i=this.store.getAll(e,null===t?void 0:t);return new he((r,s)=>{i.onerror=o=>{s(o.target.error)},i.onsuccess=o=>{r(o.target.result)}})}j(e,t){Je("SimpleDb","DELETE ALL",this.store.name);const i=this.options(e,t);i.H=!1;const r=this.cursor(i);return this.W(r,(s,o,a)=>a.delete())}J(e,t){let i;t?i=e:(i={},t=e);const r=this.cursor(i);return this.W(r,t)}Y(e){const t=this.cursor({});return new he((i,r)=>{t.onerror=s=>{const o=MR(s.target.error);r(o)},t.onsuccess=s=>{const o=s.target.result;o?e(o.primaryKey,o.value).next(a=>{a?o.continue():i()}):i()}})}W(e,t){const i=[];return new he((r,s)=>{e.onerror=o=>{s(o.target.error)},e.onsuccess=o=>{const a=o.target.result;if(!a)return void r();const l=new Kle(a),c=t(a.primaryKey,a.value,l);if(c instanceof he){const u=c.catch(d=>(l.done(),he.reject(d)));i.push(u)}l.isDone?r():null===l.K?a.continue():a.continue(l.K)}}).next(()=>he.waitFor(i))}options(e,t){let i;return void 0!==e&&("string"==typeof e?i=e:t=e),{index:i,range:t}}cursor(e){let t="next";if(e.reverse&&(t="prev"),e.index){const i=this.store.index(e.index);return e.H?i.openKeyCursor(e.range,t):i.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}function wf(n){return new he((e,t)=>{n.onsuccess=i=>{e(i.target.result)},n.onerror=i=>{const r=MR(i.target.error);t(r)}})}let v5=!1;function MR(n){const e=_c.S((0,ii.ZQ)());if(e>=12.2&&e<13){const t="An internal error was encountered in the Indexed Database server";if(n.message.indexOf(t)>=0){const i=new Ye("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${t}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return v5||(v5=!0,setTimeout(()=>{throw i},0)),i}}return n}class Qle{constructor(e,t){this.asyncQueue=e,this.Z=t,this.task=null}start(){this.X(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return null!==this.task}X(e){var t=this;Je("IndexBackfiller",`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,(0,Me.A)(function*(){t.task=null;try{Je("IndexBackfiller",`Documents written: ${yield t.Z.ee()}`)}catch(i){Fd(i)?Je("IndexBackfiller","Ignoring IndexedDB error during index backfill: ",i):yield Nd(i)}yield t.X(6e4)}))}}class Zle{constructor(e,t){this.localStore=e,this.persistence=t}ee(e=50){var t=this;return(0,Me.A)(function*(){return t.persistence.runTransaction("Backfill Indexes","readwrite-primary",i=>t.te(i,e))})()}te(e,t){const i=new Set;let r=t,s=!0;return he.doWhile(()=>!0===s&&r>0,()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next(o=>{if(null!==o&&!i.has(o))return Je("IndexBackfiller",`Processing collection: ${o}`),this.ne(e,o,r).next(a=>{r-=a,i.add(o)});s=!1})).next(()=>t-r)}ne(e,t,i){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,t).next(r=>this.localStore.localDocuments.getNextDocuments(e,t,r,i).next(s=>{const o=s.changes;return this.localStore.indexManager.updateIndexEntries(e,o).next(()=>this.re(r,s)).next(a=>(Je("IndexBackfiller",`Updating offset: ${a}`),this.localStore.indexManager.updateCollectionGroup(e,t,a))).next(()=>o.size)}))}re(e,t){let i=e;return t.changes.forEach((r,s)=>{const o=p5(s);IR(o,i)>0&&(i=o)}),new Oa(i.readTime,i.documentKey,Math.max(t.batchId,e.largestBatchId))}}let Na=(()=>{class n{constructor(t,i){this.previousValue=t,i&&(i.sequenceNumberHandler=r=>this.ie(r),this.se=r=>i.writeSequenceNumber(r))}ie(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){const t=++this.previousValue;return this.se&&this.se(t),t}}return n.oe=-1,n})();function M0(n){return null==n}function D0(n){return 0===n&&1/n==-1/0}function y5(n){return"number"==typeof n&&Number.isInteger(n)&&!D0(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}function yo(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=b5(e)),e=Jle(n.get(t),e);return b5(e)}function Jle(n,e){let t=e;const i=n.length;for(let r=0;r<i;r++){const s=n.charAt(r);switch(s){case"\0":t+="\x01\x10";break;case"\x01":t+="\x01\x11";break;default:t+=s}}return t}function b5(n){return n+"\x01\x01"}function vc(n){const e=n.length;if(an(e>=2),2===e)return an("\x01"===n.charAt(0)&&"\x01"===n.charAt(1)),Si.emptyPath();const t=e-2,i=[];let r="";for(let s=0;s<e;){const o=n.indexOf("\x01",s);switch((o<0||o>t)&&Qt(),n.charAt(o+1)){case"\x01":const a=n.substring(s,o);let l;0===r.length?l=a:(r+=a,l=r,r=""),i.push(l);break;case"\x10":r+=n.substring(s,o),r+="\0";break;case"\x11":r+=n.substring(s,o+1);break;default:Qt()}s=o+2}return new Si(i)}const x5=["userId","batchId"];function FT(n,e){return[n,yo(e)]}function w5(n,e,t){return[n,yo(e),t]}const ece={},tce=["prefixPath","collectionGroup","readTime","documentId"],nce=["prefixPath","collectionGroup","documentId"],ice=["collectionGroup","readTime","prefixPath","documentId"],rce=["canonicalId","targetId"],sce=["targetId","path"],oce=["path","targetId"],ace=["collectionId","parent"],lce=["indexId","uid"],cce=["uid","sequenceNumber"],uce=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],dce=["indexId","uid","orderedDocumentKey"],hce=["userId","collectionPath","documentId"],fce=["userId","collectionPath","largestBatchId"],pce=["userId","collectionGroup","largestBatchId"],E5=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],mce=[...E5,"documentOverlays"],T5=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],S5=T5,DR=[...S5,"indexConfiguration","indexState","indexEntries"],gce=DR,_ce=[...DR,"globals"];class RR extends g5{constructor(e,t){super(),this._e=e,this.currentSequenceNumber=t}}function Cs(n,e){const t=It(n);return _c.F(t._e,e)}function A5(n){let e=0;for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function Ld(n,e){for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function C5(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}class br{constructor(e,t){this.comparator=e,this.root=t||Js.EMPTY}insert(e,t){return new br(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,Js.BLACK,null,null))}remove(e){return new br(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Js.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const i=this.comparator(e,t.key);if(0===i)return t.value;i<0?t=t.left:i>0&&(t=t.right)}return null}indexOf(e){let t=0,i=this.root;for(;!i.isEmpty();){const r=this.comparator(e,i.key);if(0===r)return t+i.left.size;r<0?i=i.left:(t+=i.left.size+1,i=i.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,i)=>(e(t,i),!1))}toString(){const e=[];return this.inorderTraversal((t,i)=>(e.push(`${t}:${i}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new LT(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new LT(this.root,e,this.comparator,!1)}getReverseIterator(){return new LT(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new LT(this.root,e,this.comparator,!0)}}class LT{constructor(e,t,i,r){this.isReverse=r,this.nodeStack=[];let s=1;for(;!e.isEmpty();)if(s=t?i(e.key,t):1,t&&r&&(s*=-1),s<0)e=this.isReverse?e.left:e.right;else{if(0===s){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Js{constructor(e,t,i,r,s){this.key=e,this.value=t,this.color=i??Js.RED,this.left=r??Js.EMPTY,this.right=s??Js.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,i,r,s){return new Js(e??this.key,t??this.value,i??this.color,r??this.left,s??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,i){let r=this;const s=i(e,r.key);return r=s<0?r.copy(null,null,null,r.left.insert(e,t,i),null):0===s?r.copy(null,t,null,null,null):r.copy(null,null,null,null,r.right.insert(e,t,i)),r.fixUp()}removeMin(){if(this.left.isEmpty())return Js.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let i,r=this;if(t(e,r.key)<0)r.left.isEmpty()||r.left.isRed()||r.left.left.isRed()||(r=r.moveRedLeft()),r=r.copy(null,null,null,r.left.remove(e,t),null);else{if(r.left.isRed()&&(r=r.rotateRight()),r.right.isEmpty()||r.right.isRed()||r.right.left.isRed()||(r=r.moveRedRight()),0===t(e,r.key)){if(r.right.isEmpty())return Js.EMPTY;i=r.right.min(),r=r.copy(i.key,i.value,null,null,r.right.removeMin())}r=r.copy(null,null,null,null,r.right.remove(e,t))}return r.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Js.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Js.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw Qt();const e=this.left.check();if(e!==this.right.check())throw Qt();return e+(this.isRed()?0:1)}}Js.EMPTY=null,Js.RED=!0,Js.BLACK=!1,Js.EMPTY=new class{constructor(){this.size=0}get key(){throw Qt()}get value(){throw Qt()}get color(){throw Qt()}get left(){throw Qt()}get right(){throw Qt()}copy(e,t,i,r,s){return this}insert(e,t,i){return new Js(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class nr{constructor(e){this.comparator=e,this.data=new br(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,i)=>(e(t),!1))}forEachInRange(e,t){const i=this.data.getIteratorFrom(e[0]);for(;i.hasNext();){const r=i.getNext();if(this.comparator(r.key,e[1])>=0)return;t(r.key)}}forEachWhile(e,t){let i;for(i=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();i.hasNext();)if(!e(i.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new M5(this.data.getIterator())}getIteratorFrom(e){return new M5(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(i=>{t=t.add(i)}),t}isEqual(e){if(!(e instanceof nr)||this.size!==e.size)return!1;const t=this.data.getIterator(),i=e.data.getIterator();for(;t.hasNext();){const r=t.getNext().key,s=i.getNext().key;if(0!==this.comparator(r,s))return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new nr(this.comparator);return t.data=e,t}}class M5{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function bg(n){return n.hasNext()?n.getNext():void 0}class da{constructor(e){this.fields=e,e.sort(Ar.comparator)}static empty(){return new da([])}unionWith(e){let t=new nr(Ar.comparator);for(const i of this.fields)t=t.add(i);for(const i of e)t=t.add(i);return new da(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return _g(this.fields,e.fields,(t,i)=>t.isEqual(i))}}class D5 extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}class Jr{constructor(e){this.binaryString=e}static fromBase64String(e){const t=function(r){try{return atob(r)}catch(s){throw typeof DOMException<"u"&&s instanceof DOMException?new D5("Invalid base64 string: "+s):s}}(e);return new Jr(t)}static fromUint8Array(e){const t=function(r){let s="";for(let o=0;o<r.length;++o)s+=String.fromCharCode(r[o]);return s}(e);return new Jr(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return btoa(this.binaryString)}toUint8Array(){return function(t){const i=new Uint8Array(t.length);for(let r=0;r<t.length;r++)i[r]=t.charCodeAt(r);return i}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Vn(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Jr.EMPTY_BYTE_STRING=new Jr("");const yce=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function xu(n){if(an(!!n),"string"==typeof n){let e=0;const t=yce.exec(n);if(an(!!t),t[1]){let r=t[1];r=(r+"000000000").substr(0,9),e=Number(r)}const i=new Date(n);return{seconds:Math.floor(i.getTime()/1e3),nanos:e}}return{seconds:Fr(n.seconds),nanos:Fr(n.nanos)}}function Fr(n){return"number"==typeof n?n:"string"==typeof n?Number(n):0}function wu(n){return"string"==typeof n?Jr.fromBase64String(n):Jr.fromUint8Array(n)}function VT(n){var e,t;return"server_timestamp"===(null===(t=((null===(e=n?.mapValue)||void 0===e?void 0:e.fields)||{}).__type__)||void 0===t?void 0:t.stringValue)}function UT(n){const e=n.mapValue.fields.__previous_value__;return VT(e)?UT(e):e}function R0(n){const e=xu(n.mapValue.fields.__local_write_time__.timestampValue);return new Nr(e.seconds,e.nanos)}class bce{constructor(e,t,i,r,s,o,a,l,c){this.databaseId=e,this.appId=t,this.persistenceKey=i,this.host=r,this.ssl=s,this.forceLongPolling=o,this.autoDetectLongPolling=a,this.longPollingOptions=l,this.useFetchStreams=c}}class Vd{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new Vd("","")}get isDefaultDatabase(){return"(default)"===this.database}isEqual(e){return e instanceof Vd&&e.projectId===this.projectId&&e.database===this.database}}const Ud={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},BT={nullValue:"NULL_VALUE"};function Bd(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?VT(n)?4:N5(n)?9007199254740991:GT(n)?10:11:Qt()}function yc(n,e){if(n===e)return!0;const t=Bd(n);if(t!==Bd(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return R0(n).isEqual(R0(e));case 3:return function(r,s){if("string"==typeof r.timestampValue&&"string"==typeof s.timestampValue&&r.timestampValue.length===s.timestampValue.length)return r.timestampValue===s.timestampValue;const o=xu(r.timestampValue),a=xu(s.timestampValue);return o.seconds===a.seconds&&o.nanos===a.nanos}(n,e);case 5:return n.stringValue===e.stringValue;case 6:return s=e,wu(n.bytesValue).isEqual(wu(s.bytesValue));case 7:return n.referenceValue===e.referenceValue;case 8:return function(r,s){return Fr(r.geoPointValue.latitude)===Fr(s.geoPointValue.latitude)&&Fr(r.geoPointValue.longitude)===Fr(s.geoPointValue.longitude)}(n,e);case 2:return function(r,s){if("integerValue"in r&&"integerValue"in s)return Fr(r.integerValue)===Fr(s.integerValue);if("doubleValue"in r&&"doubleValue"in s){const o=Fr(r.doubleValue),a=Fr(s.doubleValue);return o===a?D0(o)===D0(a):isNaN(o)&&isNaN(a)}return!1}(n,e);case 9:return _g(n.arrayValue.values||[],e.arrayValue.values||[],yc);case 10:case 11:return function(r,s){const o=r.mapValue.fields||{},a=s.mapValue.fields||{};if(A5(o)!==A5(a))return!1;for(const l in o)if(o.hasOwnProperty(l)&&(void 0===a[l]||!yc(o[l],a[l])))return!1;return!0}(n,e);default:return Qt()}var s}function P0(n,e){return void 0!==(n.values||[]).find(t=>yc(t,e))}function zd(n,e){if(n===e)return 0;const t=Bd(n),i=Bd(e);if(t!==i)return Vn(t,i);switch(t){case 0:case 9007199254740991:return 0;case 1:return Vn(n.booleanValue,e.booleanValue);case 2:return function(s,o){const a=Fr(s.integerValue||s.doubleValue),l=Fr(o.integerValue||o.doubleValue);return a<l?-1:a>l?1:a===l?0:isNaN(a)?isNaN(l)?0:-1:1}(n,e);case 3:return R5(n.timestampValue,e.timestampValue);case 4:return R5(R0(n),R0(e));case 5:return Vn(n.stringValue,e.stringValue);case 6:return function(s,o){const a=wu(s),l=wu(o);return a.compareTo(l)}(n.bytesValue,e.bytesValue);case 7:return function(s,o){const a=s.split("/"),l=o.split("/");for(let c=0;c<a.length&&c<l.length;c++){const u=Vn(a[c],l[c]);if(0!==u)return u}return Vn(a.length,l.length)}(n.referenceValue,e.referenceValue);case 8:return function(s,o){const a=Vn(Fr(s.latitude),Fr(o.latitude));return 0!==a?a:Vn(Fr(s.longitude),Fr(o.longitude))}(n.geoPointValue,e.geoPointValue);case 9:return P5(n.arrayValue,e.arrayValue);case 10:return function(s,o){var a,l,c,u;const m=null===(a=(s.fields||{}).value)||void 0===a?void 0:a.arrayValue,v=null===(l=(o.fields||{}).value)||void 0===l?void 0:l.arrayValue,x=Vn((null===(c=m?.values)||void 0===c?void 0:c.length)||0,(null===(u=v?.values)||void 0===u?void 0:u.length)||0);return 0!==x?x:P5(m,v)}(n.mapValue,e.mapValue);case 11:return function(s,o){if(s===Ud.mapValue&&o===Ud.mapValue)return 0;if(s===Ud.mapValue)return 1;if(o===Ud.mapValue)return-1;const a=s.fields||{},l=Object.keys(a),c=o.fields||{},u=Object.keys(c);l.sort(),u.sort();for(let d=0;d<l.length&&d<u.length;++d){const p=Vn(l[d],u[d]);if(0!==p)return p;const m=zd(a[l[d]],c[u[d]]);if(0!==m)return m}return Vn(l.length,u.length)}(n.mapValue,e.mapValue);default:throw Qt()}}function R5(n,e){if("string"==typeof n&&"string"==typeof e&&n.length===e.length)return Vn(n,e);const t=xu(n),i=xu(e),r=Vn(t.seconds,i.seconds);return 0!==r?r:Vn(t.nanos,i.nanos)}function P5(n,e){const t=n.values||[],i=e.values||[];for(let r=0;r<t.length&&r<i.length;++r){const s=zd(t[r],i[r]);if(s)return s}return Vn(t.length,i.length)}function xg(n){return PR(n)}function PR(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?function(t){const i=xu(t);return`time(${i.seconds},${i.nanos})`}(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?wu(n.bytesValue).toBase64():"referenceValue"in n?Rt.fromName(n.referenceValue).toString():"geoPointValue"in n?function(t){return`geo(${t.latitude},${t.longitude})`}(n.geoPointValue):"arrayValue"in n?function(t){let i="[",r=!0;for(const s of t.values||[])r?r=!1:i+=",",i+=PR(s);return i+"]"}(n.arrayValue):"mapValue"in n?function(t){const i=Object.keys(t.fields||{}).sort();let r="{",s=!0;for(const o of i)s?s=!1:r+=",",r+=`${o}:${PR(t.fields[o])}`;return r+"}"}(n.mapValue):Qt()}function Ef(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function kR(n){return!!n&&"integerValue"in n}function k0(n){return!!n&&"arrayValue"in n}function k5(n){return!!n&&"nullValue"in n}function O5(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function HT(n){return!!n&&"mapValue"in n}function GT(n){var e,t;return"__vector__"===(null===(t=((null===(e=n?.mapValue)||void 0===e?void 0:e.fields)||{}).__type__)||void 0===t?void 0:t.stringValue)}function O0(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&"object"==typeof n.timestampValue)return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){const e={mapValue:{fields:{}}};return Ld(n.mapValue.fields,(t,i)=>e.mapValue.fields[t]=O0(i)),e}if(n.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=O0(n.arrayValue.values[t]);return e}return Object.assign({},n)}function N5(n){return"__max__"===(((n.mapValue||{}).fields||{}).__type__||{}).stringValue}const F5={mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{}}}}};function xce(n){return"nullValue"in n?BT:"booleanValue"in n?{booleanValue:!1}:"integerValue"in n||"doubleValue"in n?{doubleValue:NaN}:"timestampValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in n?{stringValue:""}:"bytesValue"in n?{bytesValue:""}:"referenceValue"in n?Ef(Vd.empty(),Rt.empty()):"geoPointValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in n?{arrayValue:{}}:"mapValue"in n?GT(n)?F5:{mapValue:{}}:Qt()}function wce(n){return"nullValue"in n?{booleanValue:!1}:"booleanValue"in n?{doubleValue:NaN}:"integerValue"in n||"doubleValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in n?{stringValue:""}:"stringValue"in n?{bytesValue:""}:"bytesValue"in n?Ef(Vd.empty(),Rt.empty()):"referenceValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in n?{arrayValue:{}}:"arrayValue"in n?F5:"mapValue"in n?GT(n)?{mapValue:{}}:Ud:Qt()}function L5(n,e){const t=zd(n.value,e.value);return 0!==t?t:n.inclusive&&!e.inclusive?-1:!n.inclusive&&e.inclusive?1:0}function V5(n,e){const t=zd(n.value,e.value);return 0!==t?t:n.inclusive&&!e.inclusive?1:!n.inclusive&&e.inclusive?-1:0}class eo{constructor(e){this.value=e}static empty(){return new eo({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let i=0;i<e.length-1;++i)if(t=(t.mapValue.fields||{})[e.get(i)],!HT(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=O0(t)}setAll(e){let t=Ar.emptyPath(),i={},r=[];e.forEach((o,a)=>{if(!t.isImmediateParentOf(a)){const l=this.getFieldsMap(t);this.applyChanges(l,i,r),i={},r=[],t=a.popLast()}o?i[a.lastSegment()]=O0(o):r.push(a.lastSegment())});const s=this.getFieldsMap(t);this.applyChanges(s,i,r)}delete(e){const t=this.field(e.popLast());HT(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return yc(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let i=0;i<e.length;++i){let r=t.mapValue.fields[e.get(i)];HT(r)&&r.mapValue.fields||(r={mapValue:{fields:{}}},t.mapValue.fields[e.get(i)]=r),t=r}return t.mapValue.fields}applyChanges(e,t,i){Ld(t,(r,s)=>e[r]=s);for(const r of i)delete e[r]}clone(){return new eo(O0(this.value))}}function U5(n){const e=[];return Ld(n.fields,(t,i)=>{const r=new Ar([t]);if(HT(i)){const s=U5(i.mapValue).fields;if(0===s.length)e.push(r);else for(const o of s)e.push(r.child(o))}else e.push(r)}),new da(e)}class Ir{constructor(e,t,i,r,s,o,a){this.key=e,this.documentType=t,this.version=i,this.readTime=r,this.createTime=s,this.data=o,this.documentState=a}static newInvalidDocument(e){return new Ir(e,0,fn.min(),fn.min(),fn.min(),eo.empty(),0)}static newFoundDocument(e,t,i,r){return new Ir(e,1,t,fn.min(),i,r,0)}static newNoDocument(e,t){return new Ir(e,2,t,fn.min(),fn.min(),eo.empty(),0)}static newUnknownDocument(e,t){return new Ir(e,3,t,fn.min(),fn.min(),eo.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(fn.min())||2!==this.documentType&&0!==this.documentType||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=eo.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=eo.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=fn.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(e){return e instanceof Ir&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Ir(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class Hd{constructor(e,t){this.position=e,this.inclusive=t}}function B5(n,e,t){let i=0;for(let r=0;r<n.position.length;r++){const s=e[r],o=n.position[r];if(i=s.field.isKeyField()?Rt.comparator(Rt.fromName(o.referenceValue),t.key):zd(o,t.data.field(s.field)),"desc"===s.dir&&(i*=-1),0!==i)break}return i}function z5(n,e){if(null===n)return null===e;if(null===e||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!yc(n.position[t],e.position[t]))return!1;return!0}class N0{constructor(e,t="asc"){this.field=e,this.dir=t}}function Ece(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}class H5{}class Ai extends H5{constructor(e,t,i){super(),this.field=e,this.op=t,this.value=i}static create(e,t,i){return e.isKeyField()?"in"===t||"not-in"===t?this.createKeyFieldInFilter(e,t,i):new Tce(e,t,i):"array-contains"===t?new Ice(e,i):"in"===t?new X5(e,i):"not-in"===t?new Cce(e,i):"array-contains-any"===t?new Mce(e,i):new Ai(e,t,i)}static createKeyFieldInFilter(e,t,i){return"in"===t?new Sce(e,i):new Ace(e,i)}matches(e){const t=e.data.field(this.field);return"!="===this.op?null!==t&&this.matchesComparison(zd(t,this.value)):null!==t&&Bd(this.value)===Bd(t)&&this.matchesComparison(zd(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return Qt()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class er extends H5{constructor(e,t){super(),this.filters=e,this.op=t,this.ae=null}static create(e,t){return new er(e,t)}matches(e){return wg(this)?void 0===this.filters.find(t=>!t.matches(e)):void 0!==this.filters.find(t=>t.matches(e))}getFlattenedFilters(){return null!==this.ae||(this.ae=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.ae}getFilters(){return Object.assign([],this.filters)}}function wg(n){return"and"===n.op}function OR(n){return"or"===n.op}function NR(n){return G5(n)&&wg(n)}function G5(n){for(const e of n.filters)if(e instanceof er)return!1;return!0}function FR(n){if(n instanceof Ai)return n.field.canonicalString()+n.op.toString()+xg(n.value);if(NR(n))return n.filters.map(e=>FR(e)).join(",");{const e=n.filters.map(t=>FR(t)).join(",");return`${n.op}(${e})`}}function W5(n,e){return n instanceof Ai?(i=n,(r=e)instanceof Ai&&i.op===r.op&&i.field.isEqual(r.field)&&yc(i.value,r.value)):n instanceof er?function(i,r){return r instanceof er&&i.op===r.op&&i.filters.length===r.filters.length&&i.filters.reduce((s,o,a)=>s&&W5(o,r.filters[a]),!0)}(n,e):void Qt();var i,r}function j5(n,e){const t=n.filters.concat(e);return er.create(t,n.op)}function $5(n){return n instanceof Ai?`${(t=n).field.canonicalString()} ${t.op} ${xg(t.value)}`:n instanceof er?function(t){return t.op.toString()+" {"+t.getFilters().map($5).join(" ,")+"}"}(n):"Filter";var t}class Tce extends Ai{constructor(e,t,i){super(e,t,i),this.key=Rt.fromName(i.referenceValue)}matches(e){const t=Rt.comparator(e.key,this.key);return this.matchesComparison(t)}}class Sce extends Ai{constructor(e,t){super(e,"in",t),this.keys=q5(0,t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class Ace extends Ai{constructor(e,t){super(e,"not-in",t),this.keys=q5(0,t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function q5(n,e){var t;return((null===(t=e.arrayValue)||void 0===t?void 0:t.values)||[]).map(i=>Rt.fromName(i.referenceValue))}class Ice extends Ai{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return k0(t)&&P0(t.arrayValue,this.value)}}class X5 extends Ai{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return null!==t&&P0(this.value.arrayValue,t)}}class Cce extends Ai{constructor(e,t){super(e,"not-in",t)}matches(e){if(P0(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return null!==t&&!P0(this.value.arrayValue,t)}}class Mce extends Ai{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!k0(t)||!t.arrayValue.values)&&t.arrayValue.values.some(i=>P0(this.value.arrayValue,i))}}class Dce{constructor(e,t=null,i=[],r=[],s=null,o=null,a=null){this.path=e,this.collectionGroup=t,this.orderBy=i,this.filters=r,this.limit=s,this.startAt=o,this.endAt=a,this.ue=null}}function LR(n,e=null,t=[],i=[],r=null,s=null,o=null){return new Dce(n,e,t,i,r,s,o)}function Tf(n){const e=It(n);if(null===e.ue){let t=e.path.canonicalString();null!==e.collectionGroup&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(i=>FR(i)).join(","),t+="|ob:",t+=e.orderBy.map(i=>{return(s=i).field.canonicalString()+s.dir;var s}).join(","),M0(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(i=>xg(i)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(i=>xg(i)).join(",")),e.ue=t}return e.ue}function F0(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!Ece(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!W5(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!z5(n.startAt,e.startAt)&&z5(n.endAt,e.endAt)}function WT(n){return Rt.isDocumentKey(n.path)&&null===n.collectionGroup&&0===n.filters.length}function jT(n,e){return n.filters.filter(t=>t instanceof Ai&&t.field.isEqual(e))}function K5(n,e,t){let i=BT,r=!0;for(const s of jT(n,e)){let o=BT,a=!0;switch(s.op){case"<":case"<=":o=xce(s.value);break;case"==":case"in":case">=":o=s.value;break;case">":o=s.value,a=!1;break;case"!=":case"not-in":o=BT}L5({value:i,inclusive:r},{value:o,inclusive:a})<0&&(i=o,r=a)}if(null!==t)for(let s=0;s<n.orderBy.length;++s)if(n.orderBy[s].field.isEqual(e)){const o=t.position[s];L5({value:i,inclusive:r},{value:o,inclusive:t.inclusive})<0&&(i=o,r=t.inclusive);break}return{value:i,inclusive:r}}function Y5(n,e,t){let i=Ud,r=!0;for(const s of jT(n,e)){let o=Ud,a=!0;switch(s.op){case">=":case">":o=wce(s.value),a=!1;break;case"==":case"in":case"<=":o=s.value;break;case"<":o=s.value,a=!1;break;case"!=":case"not-in":o=Ud}V5({value:i,inclusive:r},{value:o,inclusive:a})>0&&(i=o,r=a)}if(null!==t)for(let s=0;s<n.orderBy.length;++s)if(n.orderBy[s].field.isEqual(e)){const o=t.position[s];V5({value:i,inclusive:r},{value:o,inclusive:t.inclusive})>0&&(i=o,r=t.inclusive);break}return{value:i,inclusive:r}}class Eu{constructor(e,t=null,i=[],r=[],s=null,o="F",a=null,l=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=i,this.filters=r,this.limit=s,this.limitType=o,this.startAt=a,this.endAt=l,this.ce=null,this.le=null,this.he=null}}function Q5(n,e,t,i,r,s,o,a){return new Eu(n,e,t,i,r,s,o,a)}function Eg(n){return new Eu(n)}function Z5(n){return 0===n.filters.length&&null===n.limit&&null==n.startAt&&null==n.endAt&&(0===n.explicitOrderBy.length||1===n.explicitOrderBy.length&&n.explicitOrderBy[0].field.isKeyField())}function VR(n){return null!==n.collectionGroup}function Tg(n){const e=It(n);if(null===e.ce){e.ce=[];const t=new Set;for(const s of e.explicitOrderBy)e.ce.push(s),t.add(s.field.canonicalString());const i=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(o){let a=new nr(Ar.comparator);return o.filters.forEach(l=>{l.getFlattenedFilters().forEach(c=>{c.isInequality()&&(a=a.add(c.field))})}),a})(e).forEach(s=>{t.has(s.canonicalString())||s.isKeyField()||e.ce.push(new N0(s,i))}),t.has(Ar.keyField().canonicalString())||e.ce.push(new N0(Ar.keyField(),i))}return e.ce}function bo(n){const e=It(n);return e.le||(e.le=function e6(n,e){if("F"===n.limitType)return LR(n.path,n.collectionGroup,e,n.filters,n.limit,n.startAt,n.endAt);{e=e.map(r=>new N0(r.field,"desc"===r.dir?"asc":"desc"));const t=n.endAt?new Hd(n.endAt.position,n.endAt.inclusive):null,i=n.startAt?new Hd(n.startAt.position,n.startAt.inclusive):null;return LR(n.path,n.collectionGroup,e,n.filters,n.limit,t,i)}}(e,Tg(n))),e.le}function UR(n,e){const t=n.filters.concat([e]);return new Eu(n.path,n.collectionGroup,n.explicitOrderBy.slice(),t,n.limit,n.limitType,n.startAt,n.endAt)}function $T(n,e,t){return new Eu(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function L0(n,e){return F0(bo(n),bo(e))&&n.limitType===e.limitType}function t6(n){return`${Tf(bo(n))}|lt:${n.limitType}`}function Sg(n){return`Query(target=${function(t){let i=t.path.canonicalString();return null!==t.collectionGroup&&(i+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(i+=`, filters: [${t.filters.map(r=>$5(r)).join(", ")}]`),M0(t.limit)||(i+=", limit: "+t.limit),t.orderBy.length>0&&(i+=`, orderBy: [${t.orderBy.map(r=>{return`${(o=r).field.canonicalString()} (${o.dir})`;var o}).join(", ")}]`),t.startAt&&(i+=", startAt: ",i+=t.startAt.inclusive?"b:":"a:",i+=t.startAt.position.map(r=>xg(r)).join(",")),t.endAt&&(i+=", endAt: ",i+=t.endAt.inclusive?"a:":"b:",i+=t.endAt.position.map(r=>xg(r)).join(",")),`Target(${i})`}(bo(n))}; limitType=${n.limitType})`}function V0(n,e){return e.isFoundDocument()&&function(i,r){const s=r.key.path;return null!==i.collectionGroup?r.key.hasCollectionId(i.collectionGroup)&&i.path.isPrefixOf(s):Rt.isDocumentKey(i.path)?i.path.isEqual(s):i.path.isImmediateParentOf(s)}(n,e)&&function(i,r){for(const s of Tg(i))if(!s.field.isKeyField()&&null===r.data.field(s.field))return!1;return!0}(n,e)&&function(i,r){for(const s of i.filters)if(!s.matches(r))return!1;return!0}(n,e)&&(r=e,!((i=n).startAt&&!function(o,a,l){const c=B5(o,a,l);return o.inclusive?c<=0:c<0}(i.startAt,Tg(i),r)||i.endAt&&!function(o,a,l){const c=B5(o,a,l);return o.inclusive?c>=0:c>0}(i.endAt,Tg(i),r)));var i,r}function n6(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function i6(n){return(e,t)=>{let i=!1;for(const r of Tg(n)){const s=Rce(r,e,t);if(0!==s)return s;i=i||r.field.isKeyField()}return 0}}function Rce(n,e,t){const i=n.field.isKeyField()?Rt.comparator(e.key,t.key):function(s,o,a){const l=o.data.field(s),c=a.data.field(s);return null!==l&&null!==c?zd(l,c):Qt()}(n.field,e,t);switch(n.dir){case"asc":return i;case"desc":return-1*i;default:return Qt()}}class Tu{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),i=this.inner[t];if(void 0!==i)for(const[r,s]of i)if(this.equalsFn(r,e))return s}has(e){return void 0!==this.get(e)}set(e,t){const i=this.mapKeyFn(e),r=this.inner[i];if(void 0===r)return this.inner[i]=[[e,t]],void this.innerSize++;for(let s=0;s<r.length;s++)if(this.equalsFn(r[s][0],e))return void(r[s]=[e,t]);r.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),i=this.inner[t];if(void 0===i)return!1;for(let r=0;r<i.length;r++)if(this.equalsFn(i[r][0],e))return 1===i.length?delete this.inner[t]:i.splice(r,1),this.innerSize--,!0;return!1}forEach(e){Ld(this.inner,(t,i)=>{for(const[r,s]of i)e(r,s)})}isEmpty(){return C5(this.inner)}size(){return this.innerSize}}const Pce=new br(Rt.comparator);function ha(){return Pce}const r6=new br(Rt.comparator);function U0(...n){let e=r6;for(const t of n)e=e.insert(t.key,t);return e}function s6(n){let e=r6;return n.forEach((t,i)=>e=e.insert(t,i.overlayedDocument)),e}function bc(){return B0()}function o6(){return B0()}function B0(){return new Tu(n=>n.toString(),(n,e)=>n.isEqual(e))}const kce=new br(Rt.comparator),Oce=new nr(Rt.comparator);function Qn(...n){let e=Oce;for(const t of n)e=e.add(t);return e}const Nce=new nr(Vn);function BR(){return Nce}function zR(n,e){if(n.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:D0(e)?"-0":e}}function a6(n){return{integerValue:""+n}}function l6(n,e){return y5(e)?a6(e):zR(n,e)}class qT{constructor(){this._=void 0}}function Fce(n,e,t){return n instanceof Ag?function(r,s){const o={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:r.seconds,nanos:r.nanoseconds}}}};return s&&VT(s)&&(s=UT(s)),s&&(o.fields.__previous_value__=s),{mapValue:o}}(t,e):n instanceof Sf?u6(n,e):n instanceof Af?d6(n,e):function(r,s){const o=c6(r,s),a=h6(o)+h6(r.Pe);return kR(o)&&kR(r.Pe)?a6(a):zR(r.serializer,a)}(n,e)}function Lce(n,e,t){return n instanceof Sf?u6(n,e):n instanceof Af?d6(n,e):t}function c6(n,e){return n instanceof Ig?kR(i=e)||(s=i)&&"doubleValue"in s?e:{integerValue:0}:null;var i,s}class Ag extends qT{}class Sf extends qT{constructor(e){super(),this.elements=e}}function u6(n,e){const t=f6(e);for(const i of n.elements)t.some(r=>yc(r,i))||t.push(i);return{arrayValue:{values:t}}}class Af extends qT{constructor(e){super(),this.elements=e}}function d6(n,e){let t=f6(e);for(const i of n.elements)t=t.filter(r=>!yc(r,i));return{arrayValue:{values:t}}}class Ig extends qT{constructor(e,t){super(),this.serializer=e,this.Pe=t}}function h6(n){return Fr(n.integerValue||n.doubleValue)}function f6(n){return k0(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}class z0{constructor(e,t){this.field=e,this.transform=t}}class Uce{constructor(e,t){this.version=e,this.transformResults=t}}class Lr{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new Lr}static exists(e){return new Lr(void 0,e)}static updateTime(e){return new Lr(e)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function XT(n,e){return void 0!==n.updateTime?e.isFoundDocument()&&e.version.isEqual(n.updateTime):void 0===n.exists||n.exists===e.isFoundDocument()}class KT{}function p6(n,e){if(!n.hasLocalMutations||e&&0===e.fields.length)return null;if(null===e)return n.isNoDocument()?new Mg(n.key,Lr.none()):new Cg(n.key,n.data,Lr.none());{const t=n.data,i=eo.empty();let r=new nr(Ar.comparator);for(let s of e.fields)if(!r.has(s)){let o=t.field(s);null===o&&s.length>1&&(s=s.popLast(),o=t.field(s)),null===o?i.delete(s):i.set(s,o),r=r.add(s)}return new Su(n.key,i,new da(r.toArray()),Lr.none())}}function Bce(n,e,t){n instanceof Cg?function(r,s,o){const a=r.value.clone(),l=_6(r.fieldTransforms,s,o.transformResults);a.setAll(l),s.convertToFoundDocument(o.version,a).setHasCommittedMutations()}(n,e,t):n instanceof Su?function(r,s,o){if(!XT(r.precondition,s))return void s.convertToUnknownDocument(o.version);const a=_6(r.fieldTransforms,s,o.transformResults),l=s.data;l.setAll(g6(r)),l.setAll(a),s.convertToFoundDocument(o.version,l).setHasCommittedMutations()}(n,e,t):e.convertToNoDocument(t.version).setHasCommittedMutations()}function H0(n,e,t,i){return n instanceof Cg?function(s,o,a,l){if(!XT(s.precondition,o))return a;const c=s.value.clone(),u=v6(s.fieldTransforms,l,o);return c.setAll(u),o.convertToFoundDocument(o.version,c).setHasLocalMutations(),null}(n,e,t,i):n instanceof Su?function(s,o,a,l){if(!XT(s.precondition,o))return a;const c=v6(s.fieldTransforms,l,o),u=o.data;return u.setAll(g6(s)),u.setAll(c),o.convertToFoundDocument(o.version,u).setHasLocalMutations(),null===a?null:a.unionWith(s.fieldMask.fields).unionWith(s.fieldTransforms.map(d=>d.field))}(n,e,t,i):(a=t,XT(n.precondition,o=e)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):a);var o,a}function zce(n,e){let t=null;for(const i of n.fieldTransforms){const r=e.data.field(i.field),s=c6(i.transform,r||null);null!=s&&(null===t&&(t=eo.empty()),t.set(i.field,s))}return t||null}function m6(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&(r=e.fieldTransforms,!!(void 0===(i=n.fieldTransforms)&&void 0===r||i&&r&&_g(i,r,(s,o)=>function Vce(n,e){return n.field.isEqual(e.field)&&(r=e.transform,(i=n.transform)instanceof Sf&&r instanceof Sf||i instanceof Af&&r instanceof Af?_g(i.elements,r.elements,yc):i instanceof Ig&&r instanceof Ig?yc(i.Pe,r.Pe):i instanceof Ag&&r instanceof Ag);var i,r}(s,o))))&&(0===n.type?n.value.isEqual(e.value):1!==n.type||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask));var i,r}class Cg extends KT{constructor(e,t,i,r=[]){super(),this.key=e,this.value=t,this.precondition=i,this.fieldTransforms=r,this.type=0}getFieldMask(){return null}}class Su extends KT{constructor(e,t,i,r,s=[]){super(),this.key=e,this.data=t,this.fieldMask=i,this.precondition=r,this.fieldTransforms=s,this.type=1}getFieldMask(){return this.fieldMask}}function g6(n){const e=new Map;return n.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){const i=n.data.field(t);e.set(t,i)}}),e}function _6(n,e,t){const i=new Map;an(n.length===t.length);for(let r=0;r<t.length;r++){const s=n[r],o=s.transform,a=e.data.field(s.field);i.set(s.field,Lce(o,a,t[r]))}return i}function v6(n,e,t){const i=new Map;for(const r of n){const s=r.transform,o=t.data.field(r.field);i.set(r.field,Fce(s,o,e))}return i}class Mg extends KT{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class HR extends KT{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class GR{constructor(e,t,i,r){this.batchId=e,this.localWriteTime=t,this.baseMutations=i,this.mutations=r}applyToRemoteDocument(e,t){const i=t.mutationResults;for(let r=0;r<this.mutations.length;r++){const s=this.mutations[r];s.key.isEqual(e.key)&&Bce(s,e,i[r])}}applyToLocalView(e,t){for(const i of this.baseMutations)i.key.isEqual(e.key)&&(t=H0(i,e,t,this.localWriteTime));for(const i of this.mutations)i.key.isEqual(e.key)&&(t=H0(i,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const i=o6();return this.mutations.forEach(r=>{const s=e.get(r.key),o=s.overlayedDocument;let a=this.applyToLocalView(o,s.mutatedFields);a=t.has(r.key)?null:a;const l=p6(o,a);null!==l&&i.set(r.key,l),o.isValidDocument()||o.convertToNoDocument(fn.min())}),i}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),Qn())}isEqual(e){return this.batchId===e.batchId&&_g(this.mutations,e.mutations,(t,i)=>m6(t,i))&&_g(this.baseMutations,e.baseMutations,(t,i)=>m6(t,i))}}class WR{constructor(e,t,i,r){this.batch=e,this.commitVersion=t,this.mutationResults=i,this.docVersions=r}static from(e,t,i){an(e.mutations.length===i.length);let r=kce;const s=e.mutations;for(let o=0;o<s.length;o++)r=r.insert(s[o].key,i[o].version);return new WR(e,t,i,r)}}class jR{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return null!==e&&this.mutation===e.mutation}toString(){return`Overlay{\n      largestBatchId: ${this.largestBatchId},\n      mutation: ${this.mutation.toString()}\n    }`}}class Hce{constructor(e,t){this.count=e,this.unchangedNames=t}}var vs,Oi;function b6(n){switch(n){default:return Qt();case Te.CANCELLED:case Te.UNKNOWN:case Te.DEADLINE_EXCEEDED:case Te.RESOURCE_EXHAUSTED:case Te.INTERNAL:case Te.UNAVAILABLE:case Te.UNAUTHENTICATED:return!1;case Te.INVALID_ARGUMENT:case Te.NOT_FOUND:case Te.ALREADY_EXISTS:case Te.PERMISSION_DENIED:case Te.FAILED_PRECONDITION:case Te.ABORTED:case Te.OUT_OF_RANGE:case Te.UNIMPLEMENTED:case Te.DATA_LOSS:return!0}}function x6(n){if(void 0===n)return ls("GRPC error has no .code"),Te.UNKNOWN;switch(n){case vs.OK:return Te.OK;case vs.CANCELLED:return Te.CANCELLED;case vs.UNKNOWN:return Te.UNKNOWN;case vs.DEADLINE_EXCEEDED:return Te.DEADLINE_EXCEEDED;case vs.RESOURCE_EXHAUSTED:return Te.RESOURCE_EXHAUSTED;case vs.INTERNAL:return Te.INTERNAL;case vs.UNAVAILABLE:return Te.UNAVAILABLE;case vs.UNAUTHENTICATED:return Te.UNAUTHENTICATED;case vs.INVALID_ARGUMENT:return Te.INVALID_ARGUMENT;case vs.NOT_FOUND:return Te.NOT_FOUND;case vs.ALREADY_EXISTS:return Te.ALREADY_EXISTS;case vs.PERMISSION_DENIED:return Te.PERMISSION_DENIED;case vs.FAILED_PRECONDITION:return Te.FAILED_PRECONDITION;case vs.ABORTED:return Te.ABORTED;case vs.OUT_OF_RANGE:return Te.OUT_OF_RANGE;case vs.UNIMPLEMENTED:return Te.UNIMPLEMENTED;case vs.DATA_LOSS:return Te.DATA_LOSS;default:return Qt()}}(Oi=vs||(vs={}))[Oi.OK=0]="OK",Oi[Oi.CANCELLED=1]="CANCELLED",Oi[Oi.UNKNOWN=2]="UNKNOWN",Oi[Oi.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Oi[Oi.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Oi[Oi.NOT_FOUND=5]="NOT_FOUND",Oi[Oi.ALREADY_EXISTS=6]="ALREADY_EXISTS",Oi[Oi.PERMISSION_DENIED=7]="PERMISSION_DENIED",Oi[Oi.UNAUTHENTICATED=16]="UNAUTHENTICATED",Oi[Oi.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Oi[Oi.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Oi[Oi.ABORTED=10]="ABORTED",Oi[Oi.OUT_OF_RANGE=11]="OUT_OF_RANGE",Oi[Oi.UNIMPLEMENTED=12]="UNIMPLEMENTED",Oi[Oi.INTERNAL=13]="INTERNAL",Oi[Oi.UNAVAILABLE=14]="UNAVAILABLE",Oi[Oi.DATA_LOSS=15]="DATA_LOSS";function w6(){return new TextEncoder}const Gce=new yf([4294967295,4294967295],0);function E6(n){const e=w6().encode(n),t=new n5;return t.update(e),new Uint8Array(t.digest())}function T6(n){const e=new DataView(n.buffer),t=e.getUint32(0,!0),i=e.getUint32(4,!0),r=e.getUint32(8,!0),s=e.getUint32(12,!0);return[new yf([t,i],0),new yf([r,s],0)]}class $R{constructor(e,t,i){if(this.bitmap=e,this.padding=t,this.hashCount=i,t<0||t>=8)throw new G0(`Invalid padding: ${t}`);if(i<0)throw new G0(`Invalid hash count: ${i}`);if(e.length>0&&0===this.hashCount)throw new G0(`Invalid hash count: ${i}`);if(0===e.length&&0!==t)throw new G0(`Invalid padding when bitmap length is 0: ${t}`);this.Ie=8*e.length-t,this.Te=yf.fromNumber(this.Ie)}Ee(e,t,i){let r=e.add(t.multiply(yf.fromNumber(i)));return 1===r.compare(Gce)&&(r=new yf([r.getBits(0),r.getBits(1)],0)),r.modulo(this.Te).toNumber()}de(e){return 0!=(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(0===this.Ie)return!1;const t=E6(e),[i,r]=T6(t);for(let s=0;s<this.hashCount;s++){const o=this.Ee(i,r,s);if(!this.de(o))return!1}return!0}static create(e,t,i){const r=e%8==0?0:8-e%8,s=new Uint8Array(Math.ceil(e/8)),o=new $R(s,r,t);return i.forEach(a=>o.insert(a)),o}insert(e){if(0===this.Ie)return;const t=E6(e),[i,r]=T6(t);for(let s=0;s<this.hashCount;s++){const o=this.Ee(i,r,s);this.Ae(o)}}Ae(e){const t=Math.floor(e/8);this.bitmap[t]|=1<<e%8}}class G0 extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}class W0{constructor(e,t,i,r,s){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=i,this.documentUpdates=r,this.resolvedLimboDocuments=s}static createSynthesizedRemoteEventForCurrentChange(e,t,i){const r=new Map;return r.set(e,j0.createSynthesizedTargetChangeForCurrentChange(e,t,i)),new W0(fn.min(),r,new br(Vn),ha(),Qn())}}class j0{constructor(e,t,i,r,s){this.resumeToken=e,this.current=t,this.addedDocuments=i,this.modifiedDocuments=r,this.removedDocuments=s}static createSynthesizedTargetChangeForCurrentChange(e,t,i){return new j0(i,t,Qn(),Qn(),Qn())}}class QT{constructor(e,t,i,r){this.Re=e,this.removedTargetIds=t,this.key=i,this.Ve=r}}class S6{constructor(e,t){this.targetId=e,this.me=t}}class A6{constructor(e,t,i=Jr.EMPTY_BYTE_STRING,r=null){this.state=e,this.targetIds=t,this.resumeToken=i,this.cause=r}}class I6{constructor(){this.fe=0,this.ge=M6(),this.pe=Jr.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return 0!==this.fe}get be(){return this.we}De(e){e.approximateByteSize()>0&&(this.we=!0,this.pe=e)}ve(){let e=Qn(),t=Qn(),i=Qn();return this.ge.forEach((r,s)=>{switch(s){case 0:e=e.add(r);break;case 2:t=t.add(r);break;case 1:i=i.add(r);break;default:Qt()}}),new j0(this.pe,this.ye,e,t,i)}Ce(){this.we=!1,this.ge=M6()}Fe(e,t){this.we=!0,this.ge=this.ge.insert(e,t)}Me(e){this.we=!0,this.ge=this.ge.remove(e)}xe(){this.fe+=1}Oe(){this.fe-=1,an(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}}class Wce{constructor(e){this.Le=e,this.Be=new Map,this.ke=ha(),this.qe=C6(),this.Qe=new br(Vn)}Ke(e){for(const t of e.Re)e.Ve&&e.Ve.isFoundDocument()?this.$e(t,e.Ve):this.Ue(t,e.key,e.Ve);for(const t of e.removedTargetIds)this.Ue(t,e.key,e.Ve)}We(e){this.forEachTarget(e,t=>{const i=this.Ge(t);switch(e.state){case 0:this.ze(t)&&i.De(e.resumeToken);break;case 1:i.Oe(),i.Se||i.Ce(),i.De(e.resumeToken);break;case 2:i.Oe(),i.Se||this.removeTarget(t);break;case 3:this.ze(t)&&(i.Ne(),i.De(e.resumeToken));break;case 4:this.ze(t)&&(this.je(t),i.De(e.resumeToken));break;default:Qt()}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.Be.forEach((i,r)=>{this.ze(r)&&t(r)})}He(e){const t=e.targetId,i=e.me.count,r=this.Je(t);if(r){const s=r.target;if(WT(s))if(0===i){const o=new Rt(s.path);this.Ue(t,o,Ir.newNoDocument(o,fn.min()))}else an(1===i);else{const o=this.Ye(t);if(o!==i){const a=this.Ze(e),l=a?this.Xe(a,e,o):1;0!==l&&(this.je(t),this.Qe=this.Qe.insert(t,2===l?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch"))}}}}Ze(e){const t=e.me.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:i="",padding:r=0},hashCount:s=0}=t;let o,a;try{o=wu(i).toUint8Array()}catch(l){if(l instanceof D5)return ka("Decoding the base64 bloom filter in existence filter failed ("+l.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw l}try{a=new $R(o,r,s)}catch(l){return ka(l instanceof G0?"BloomFilter error: ":"Applying bloom filter failed: ",l),null}return 0===a.Ie?null:a}Xe(e,t,i){return t.me.count===i-this.nt(e,t.targetId)?0:2}nt(e,t){const i=this.Le.getRemoteKeysForTarget(t);let r=0;return i.forEach(s=>{const o=this.Le.tt(),a=`projects/${o.projectId}/databases/${o.database}/documents/${s.path.canonicalString()}`;e.mightContain(a)||(this.Ue(t,s,null),r++)}),r}rt(e){const t=new Map;this.Be.forEach((s,o)=>{const a=this.Je(o);if(a){if(s.current&&WT(a.target)){const l=new Rt(a.target.path);null!==this.ke.get(l)||this.it(o,l)||this.Ue(o,l,Ir.newNoDocument(l,e))}s.be&&(t.set(o,s.ve()),s.Ce())}});let i=Qn();this.qe.forEach((s,o)=>{let a=!0;o.forEachWhile(l=>{const c=this.Je(l);return!c||"TargetPurposeLimboResolution"===c.purpose||(a=!1,!1)}),a&&(i=i.add(s))}),this.ke.forEach((s,o)=>o.setReadTime(e));const r=new W0(e,t,this.Qe,this.ke,i);return this.ke=ha(),this.qe=C6(),this.Qe=new br(Vn),r}$e(e,t){if(!this.ze(e))return;const i=this.it(e,t.key)?2:0;this.Ge(e).Fe(t.key,i),this.ke=this.ke.insert(t.key,t),this.qe=this.qe.insert(t.key,this.st(t.key).add(e))}Ue(e,t,i){if(!this.ze(e))return;const r=this.Ge(e);this.it(e,t)?r.Fe(t,1):r.Me(t),this.qe=this.qe.insert(t,this.st(t).delete(e)),i&&(this.ke=this.ke.insert(t,i))}removeTarget(e){this.Be.delete(e)}Ye(e){const t=this.Ge(e).ve();return this.Le.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}xe(e){this.Ge(e).xe()}Ge(e){let t=this.Be.get(e);return t||(t=new I6,this.Be.set(e,t)),t}st(e){let t=this.qe.get(e);return t||(t=new nr(Vn),this.qe=this.qe.insert(e,t)),t}ze(e){const t=null!==this.Je(e);return t||Je("WatchChangeAggregator","Detected inactive target",e),t}Je(e){const t=this.Be.get(e);return t&&t.Se?null:this.Le.ot(e)}je(e){this.Be.set(e,new I6),this.Le.getRemoteKeysForTarget(e).forEach(t=>{this.Ue(e,t,null)})}it(e,t){return this.Le.getRemoteKeysForTarget(e).has(t)}}function C6(){return new br(Rt.comparator)}function M6(){return new br(Rt.comparator)}const jce={asc:"ASCENDING",desc:"DESCENDING"},$ce={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},qce={and:"AND",or:"OR"};class Xce{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function qR(n,e){return n.useProto3Json||M0(e)?e:{value:e}}function Dg(n,e){return n.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function D6(n,e){return n.useProto3Json?e.toBase64():e.toUint8Array()}function Kce(n,e){return Dg(n,e.toTimestamp())}function cs(n){return an(!!n),fn.fromTimestamp(function(t){const i=xu(t);return new Nr(i.seconds,i.nanos)}(n))}function XR(n,e){return KR(n,e).canonicalString()}function KR(n,e){const t=(r=n,new Si(["projects",r.projectId,"databases",r.database])).child("documents");var r;return void 0===e?t:t.child(e)}function R6(n){const e=Si.fromString(n);return an(H6(e)),e}function $0(n,e){return XR(n.databaseId,e.path)}function xc(n,e){const t=R6(e);if(t.get(1)!==n.databaseId.projectId)throw new Ye(Te.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new Ye(Te.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new Rt(O6(t))}function P6(n,e){return XR(n.databaseId,e)}function k6(n){const e=R6(n);return 4===e.length?Si.emptyPath():O6(e)}function YR(n){return new Si(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function O6(n){return an(n.length>4&&"documents"===n.get(4)),n.popFirst(5)}function N6(n,e,t){return{name:$0(n,e),fields:t.value.mapValue.fields}}function F6(n,e,t){const i=xc(n,e.name),r=cs(e.updateTime),s=e.createTime?cs(e.createTime):fn.min(),o=new eo({mapValue:{fields:e.fields}}),a=Ir.newFoundDocument(i,r,s,o);return t&&a.setHasCommittedMutations(),t?a.setHasCommittedMutations():a}function q0(n,e){let t;if(e instanceof Cg)t={update:N6(n,e.key,e.value)};else if(e instanceof Mg)t={delete:$0(n,e.key)};else if(e instanceof Su)t={update:N6(n,e.key,e.data),updateMask:iue(e.fieldMask)};else{if(!(e instanceof HR))return Qt();t={verify:$0(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(i=>function(s,o){const a=o.transform;if(a instanceof Ag)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(a instanceof Sf)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:a.elements}};if(a instanceof Af)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:a.elements}};if(a instanceof Ig)return{fieldPath:o.field.canonicalString(),increment:a.Pe};throw Qt()}(0,i))),e.precondition.isNone||(t.currentDocument=void 0!==(s=e.precondition).updateTime?{updateTime:Kce(n,s.updateTime)}:void 0!==s.exists?{exists:s.exists}:Qt()),t;var s}function QR(n,e){const t=e.currentDocument?void 0!==(s=e.currentDocument).updateTime?Lr.updateTime(cs(s.updateTime)):void 0!==s.exists?Lr.exists(s.exists):Lr.none():Lr.none(),i=e.updateTransforms?e.updateTransforms.map(r=>function(o,a){let l=null;"setToServerValue"in a?(an("REQUEST_TIME"===a.setToServerValue),l=new Ag):"appendMissingElements"in a?l=new Sf(a.appendMissingElements.values||[]):"removeAllFromArray"in a?l=new Af(a.removeAllFromArray.values||[]):"increment"in a?l=new Ig(o,a.increment):Qt();const c=Ar.fromServerFormat(a.fieldPath);return new z0(c,l)}(n,r)):[];var s;if(e.update){const r=xc(n,e.update.name),s=new eo({mapValue:{fields:e.update.fields}});if(e.updateMask){const o=new da((e.updateMask.fieldPaths||[]).map(u=>Ar.fromServerFormat(u)));return new Su(r,s,o,t,i)}return new Cg(r,s,t,i)}if(e.delete){const r=xc(n,e.delete);return new Mg(r,t)}if(e.verify){const r=xc(n,e.verify);return new HR(r,t)}return Qt()}function L6(n,e){return{documents:[P6(n,e.path)]}}function ZT(n,e){const t={structuredQuery:{}},i=e.path;let r;null!==e.collectionGroup?(r=i,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(r=i.popLast(),t.structuredQuery.from=[{collectionId:i.lastSegment()}]),t.parent=P6(n,r);const s=function(c){if(0!==c.length)return z6(er.create(c,"and"))}(e.filters);s&&(t.structuredQuery.where=s);const o=function(c){if(0!==c.length)return c.map(u=>{return{field:Gd((p=u).field),direction:eue(p.dir)};var p})}(e.orderBy);o&&(t.structuredQuery.orderBy=o);const a=qR(n,e.limit);return null!==a&&(t.structuredQuery.limit=a),e.startAt&&(t.structuredQuery.startAt={before:(c=e.startAt).inclusive,values:c.position}),e.endAt&&(t.structuredQuery.endAt=function(c){return{before:!c.inclusive,values:c.position}}(e.endAt)),{_t:t,parent:r};var c}function U6(n){let e=k6(n.parent);const t=n.structuredQuery,i=t.from?t.from.length:0;let r=null;if(i>0){an(1===i);const u=t.from[0];u.allDescendants?r=u.collectionId:e=e.child(u.collectionId)}let s=[];t.where&&(s=function(d){const p=B6(d);return p instanceof er&&NR(p)?p.getFilters():[p]}(t.where));let o=[];t.orderBy&&(o=t.orderBy.map(p=>{return new N0(Rg((v=p).field),function(b){switch(b){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(v.direction));var v}));let a=null;t.limit&&(a=function(d){let p;return p="object"==typeof d?d.value:d,M0(p)?null:p}(t.limit));let l=null;var d;t.startAt&&(l=new Hd((d=t.startAt).values||[],!!d.before));let c=null;return t.endAt&&(c=function(d){return new Hd(d.values||[],!d.before)}(t.endAt)),Q5(e,r,o,s,a,"F",l,c)}function B6(n){return void 0!==n.unaryFilter?function(t){switch(t.unaryFilter.op){case"IS_NAN":const i=Rg(t.unaryFilter.field);return Ai.create(i,"==",{doubleValue:NaN});case"IS_NULL":const r=Rg(t.unaryFilter.field);return Ai.create(r,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const s=Rg(t.unaryFilter.field);return Ai.create(s,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=Rg(t.unaryFilter.field);return Ai.create(o,"!=",{nullValue:"NULL_VALUE"});default:return Qt()}}(n):void 0!==n.fieldFilter?Ai.create(Rg((t=n).fieldFilter.field),function(r){switch(r){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return Qt()}}(t.fieldFilter.op),t.fieldFilter.value):void 0!==n.compositeFilter?function(t){return er.create(t.compositeFilter.filters.map(i=>B6(i)),function(r){switch(r){case"AND":return"and";case"OR":return"or";default:return Qt()}}(t.compositeFilter.op))}(n):Qt();var t}function eue(n){return jce[n]}function tue(n){return $ce[n]}function nue(n){return qce[n]}function Gd(n){return{fieldPath:n.canonicalString()}}function Rg(n){return Ar.fromServerFormat(n.fieldPath)}function z6(n){return n instanceof Ai?function(t){if("=="===t.op){if(O5(t.value))return{unaryFilter:{field:Gd(t.field),op:"IS_NAN"}};if(k5(t.value))return{unaryFilter:{field:Gd(t.field),op:"IS_NULL"}}}else if("!="===t.op){if(O5(t.value))return{unaryFilter:{field:Gd(t.field),op:"IS_NOT_NAN"}};if(k5(t.value))return{unaryFilter:{field:Gd(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Gd(t.field),op:tue(t.op),value:t.value}}}(n):n instanceof er?function(t){const i=t.getFilters().map(r=>z6(r));return 1===i.length?i[0]:{compositeFilter:{op:nue(t.op),filters:i}}}(n):Qt()}function iue(n){const e=[];return n.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function H6(n){return n.length>=4&&"projects"===n.get(0)&&"databases"===n.get(2)}class Au{constructor(e,t,i,r,s=fn.min(),o=fn.min(),a=Jr.EMPTY_BYTE_STRING,l=null){this.target=e,this.targetId=t,this.purpose=i,this.sequenceNumber=r,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=a,this.expectedCount=l}withSequenceNumber(e){return new Au(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new Au(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Au(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Au(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}class G6{constructor(e){this.ct=e}}function W6(n,e){const t=e.key,i={prefixPath:t.getCollectionPath().popLast().toArray(),collectionGroup:t.collectionGroup,documentId:t.path.lastSegment(),readTime:JT(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())i.document={name:$0(s=n.ct,(o=e).key),fields:o.data.value.mapValue.fields,updateTime:Dg(s,o.version.toTimestamp()),createTime:Dg(s,o.createTime.toTimestamp())};else if(e.isNoDocument())i.noDocument={path:t.path.toArray(),readTime:If(e.version)};else{if(!e.isUnknownDocument())return Qt();i.unknownDocument={path:t.path.toArray(),version:If(e.version)}}var s,o;return i}function JT(n){const e=n.toTimestamp();return[e.seconds,e.nanoseconds]}function If(n){const e=n.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function Cf(n){const e=new Nr(n.seconds,n.nanoseconds);return fn.fromTimestamp(e)}function Mf(n,e){const t=(e.baseMutations||[]).map(s=>QR(n.ct,s));for(let s=0;s<e.mutations.length-1;++s)s+1<e.mutations.length&&void 0!==e.mutations[s+1].transform&&(e.mutations[s].updateTransforms=e.mutations[s+1].transform.fieldTransforms,e.mutations.splice(s+1,1),++s);const i=e.mutations.map(s=>QR(n.ct,s)),r=Nr.fromMillis(e.localWriteTimeMs);return new GR(e.batchId,r,t,i)}function X0(n){const e=Cf(n.readTime),t=void 0!==n.lastLimboFreeSnapshotVersion?Cf(n.lastLimboFreeSnapshotVersion):fn.min();let i;return i=void 0!==n.query.documents?(an(1===(s=n.query).documents.length),bo(Eg(k6(s.documents[0])))):function(s){return bo(U6(s))}(n.query),new Au(i,n.targetId,"TargetPurposeListen",n.lastListenSequenceNumber,e,t,Jr.fromBase64String(n.resumeToken));var s}function j6(n,e){const t=If(e.snapshotVersion),i=If(e.lastLimboFreeSnapshotVersion);let r;r=WT(e.target)?L6(n.ct,e.target):ZT(n.ct,e.target)._t;const s=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:Tf(e.target),readTime:t,resumeToken:s,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:i,query:r}}function ZR(n){const e=U6({parent:n.parent,structuredQuery:n.structuredQuery});return"LAST"===n.limitType?$T(e,e.limit,"L"):e}function JR(n,e){return new jR(e.largestBatchId,QR(n.ct,e.overlayMutation))}function $6(n,e){const t=e.path.lastSegment();return[n,yo(e.path.popLast()),t]}function q6(n,e,t,i){return{indexId:n,uid:e,sequenceNumber:t,readTime:If(i.readTime),documentKey:yo(i.documentKey.path),largestBatchId:i.largestBatchId}}class sue{getBundleMetadata(e,t){return X6(e).get(t).next(i=>{if(i)return{id:(s=i).bundleId,createTime:Cf(s.createTime),version:s.version};var s})}saveBundleMetadata(e,t){return X6(e).put({bundleId:(r=t).id,createTime:If(cs(r.createTime)),version:r.version});var r}getNamedQuery(e,t){return K6(e).get(t).next(i=>{if(i)return{name:(s=i).name,query:ZR(s.bundledQuery),readTime:Cf(s.readTime)};var s})}saveNamedQuery(e,t){return K6(e).put({name:(r=t).name,readTime:If(cs(r.readTime)),bundledQuery:r.bundledQuery});var r}}function X6(n){return Cs(n,"bundles")}function K6(n){return Cs(n,"namedQueries")}class eS{constructor(e,t){this.serializer=e,this.userId=t}static lt(e,t){return new eS(e,t.uid||"")}getOverlay(e,t){return K0(e).get($6(this.userId,t)).next(i=>i?JR(this.serializer,i):null)}getOverlays(e,t){const i=bc();return he.forEach(t,r=>this.getOverlay(e,r).next(s=>{null!==s&&i.set(r,s)})).next(()=>i)}saveOverlays(e,t,i){const r=[];return i.forEach((s,o)=>{const a=new jR(t,o);r.push(this.ht(e,a))}),he.waitFor(r)}removeOverlaysForBatchId(e,t,i){const r=new Set;t.forEach(o=>r.add(yo(o.getCollectionPath())));const s=[];return r.forEach(o=>{const a=IDBKeyRange.bound([this.userId,o,i],[this.userId,o,i+1],!1,!0);s.push(K0(e).j("collectionPathOverlayIndex",a))}),he.waitFor(s)}getOverlaysForCollection(e,t,i){const r=bc(),s=yo(t),o=IDBKeyRange.bound([this.userId,s,i],[this.userId,s,Number.POSITIVE_INFINITY],!0);return K0(e).U("collectionPathOverlayIndex",o).next(a=>{for(const l of a){const c=JR(this.serializer,l);r.set(c.getKey(),c)}return r})}getOverlaysForCollectionGroup(e,t,i,r){const s=bc();let o;const a=IDBKeyRange.bound([this.userId,t,i],[this.userId,t,Number.POSITIVE_INFINITY],!0);return K0(e).J({index:"collectionGroupOverlayIndex",range:a},(l,c,u)=>{const d=JR(this.serializer,c);s.size()<r||d.largestBatchId===o?(s.set(d.getKey(),d),o=d.largestBatchId):u.done()}).next(()=>s)}ht(e,t){return K0(e).put(function(r,s,o){const[a,l,c]=$6(s,o.mutation.key);return{userId:s,collectionPath:l,documentId:c,collectionGroup:o.mutation.key.getCollectionGroup(),largestBatchId:o.largestBatchId,overlayMutation:q0(r.ct,o.mutation)}}(this.serializer,this.userId,t))}}function K0(n){return Cs(n,"documentOverlays")}class oue{Pt(e){return Cs(e,"globals")}getSessionToken(e){return this.Pt(e).get("sessionToken").next(t=>{const i=t?.value;return i?Jr.fromUint8Array(i):Jr.EMPTY_BYTE_STRING})}setSessionToken(e,t){return this.Pt(e).put({name:"sessionToken",value:t.toUint8Array()})}}class Df{constructor(){}It(e,t){this.Tt(e,t),t.Et()}Tt(e,t){if("nullValue"in e)this.dt(t,5);else if("booleanValue"in e)this.dt(t,10),t.At(e.booleanValue?1:0);else if("integerValue"in e)this.dt(t,15),t.At(Fr(e.integerValue));else if("doubleValue"in e){const i=Fr(e.doubleValue);isNaN(i)?this.dt(t,13):(this.dt(t,15),D0(i)?t.At(0):t.At(i))}else if("timestampValue"in e){let i=e.timestampValue;this.dt(t,20),"string"==typeof i&&(i=xu(i)),t.Rt(`${i.seconds||""}`),t.At(i.nanos||0)}else if("stringValue"in e)this.Vt(e.stringValue,t),this.ft(t);else if("bytesValue"in e)this.dt(t,30),t.gt(wu(e.bytesValue)),this.ft(t);else if("referenceValue"in e)this.yt(e.referenceValue,t);else if("geoPointValue"in e){const i=e.geoPointValue;this.dt(t,45),t.At(i.latitude||0),t.At(i.longitude||0)}else"mapValue"in e?N5(e)?this.dt(t,Number.MAX_SAFE_INTEGER):GT(e)?this.wt(e.mapValue,t):(this.St(e.mapValue,t),this.ft(t)):"arrayValue"in e?(this.bt(e.arrayValue,t),this.ft(t)):Qt()}Vt(e,t){this.dt(t,25),this.Dt(e,t)}Dt(e,t){t.Rt(e)}St(e,t){const i=e.fields||{};this.dt(t,55);for(const r of Object.keys(i))this.Vt(r,t),this.Tt(i[r],t)}wt(e,t){var i,r;const s=e.fields||{};this.dt(t,53);const o="value",a=(null===(r=null===(i=s[o].arrayValue)||void 0===i?void 0:i.values)||void 0===r?void 0:r.length)||0;this.dt(t,15),t.At(Fr(a)),this.Vt(o,t),this.Tt(s[o],t)}bt(e,t){const i=e.values||[];this.dt(t,50);for(const r of i)this.Tt(r,t)}yt(e,t){this.dt(t,37),Rt.fromName(e).path.forEach(i=>{this.dt(t,60),this.Dt(i,t)})}dt(e,t){e.At(t)}ft(e){e.At(2)}}function aue(n){if(0===n)return 8;let e=0;return!(n>>4)&&(e+=4,n<<=4),!(n>>6)&&(e+=2,n<<=2),!(n>>7)&&(e+=1),e}function Y6(n){const e=64-function(i){let r=0;for(let s=0;s<8;++s){const o=aue(255&i[s]);if(r+=o,8!==o)break}return r}(n);return Math.ceil(e/8)}Df.vt=new Df;class lue{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Ct(e){const t=e[Symbol.iterator]();let i=t.next();for(;!i.done;)this.Ft(i.value),i=t.next();this.Mt()}xt(e){const t=e[Symbol.iterator]();let i=t.next();for(;!i.done;)this.Ot(i.value),i=t.next();this.Nt()}Lt(e){for(const t of e){const i=t.charCodeAt(0);if(i<128)this.Ft(i);else if(i<2048)this.Ft(960|i>>>6),this.Ft(128|63&i);else if(t<"\ud800"||"\udbff"<t)this.Ft(480|i>>>12),this.Ft(128|63&i>>>6),this.Ft(128|63&i);else{const r=t.codePointAt(0);this.Ft(240|r>>>18),this.Ft(128|63&r>>>12),this.Ft(128|63&r>>>6),this.Ft(128|63&r)}}this.Mt()}Bt(e){for(const t of e){const i=t.charCodeAt(0);if(i<128)this.Ot(i);else if(i<2048)this.Ot(960|i>>>6),this.Ot(128|63&i);else if(t<"\ud800"||"\udbff"<t)this.Ot(480|i>>>12),this.Ot(128|63&i>>>6),this.Ot(128|63&i);else{const r=t.codePointAt(0);this.Ot(240|r>>>18),this.Ot(128|63&r>>>12),this.Ot(128|63&r>>>6),this.Ot(128|63&r)}}this.Nt()}kt(e){const t=this.qt(e),i=Y6(t);this.Qt(1+i),this.buffer[this.position++]=255&i;for(let r=t.length-i;r<t.length;++r)this.buffer[this.position++]=255&t[r]}Kt(e){const t=this.qt(e),i=Y6(t);this.Qt(1+i),this.buffer[this.position++]=~(255&i);for(let r=t.length-i;r<t.length;++r)this.buffer[this.position++]=~(255&t[r])}$t(){this.Ut(255),this.Ut(255)}Wt(){this.Gt(255),this.Gt(255)}reset(){this.position=0}seed(e){this.Qt(e.length),this.buffer.set(e,this.position),this.position+=e.length}zt(){return this.buffer.slice(0,this.position)}qt(e){const t=function(s){const o=new DataView(new ArrayBuffer(8));return o.setFloat64(0,s,!1),new Uint8Array(o.buffer)}(e),i=0!=(128&t[0]);t[0]^=i?255:128;for(let r=1;r<t.length;++r)t[r]^=i?255:0;return t}Ft(e){const t=255&e;0===t?(this.Ut(0),this.Ut(255)):255===t?(this.Ut(255),this.Ut(0)):this.Ut(t)}Ot(e){const t=255&e;0===t?(this.Gt(0),this.Gt(255)):255===t?(this.Gt(255),this.Gt(0)):this.Gt(e)}Mt(){this.Ut(0),this.Ut(1)}Nt(){this.Gt(0),this.Gt(1)}Ut(e){this.Qt(1),this.buffer[this.position++]=e}Gt(e){this.Qt(1),this.buffer[this.position++]=~e}Qt(e){const t=e+this.position;if(t<=this.buffer.length)return;let i=2*this.buffer.length;i<t&&(i=t);const r=new Uint8Array(i);r.set(this.buffer),this.buffer=r}}class cue{constructor(e){this.jt=e}gt(e){this.jt.Ct(e)}Rt(e){this.jt.Lt(e)}At(e){this.jt.kt(e)}Et(){this.jt.$t()}}class uue{constructor(e){this.jt=e}gt(e){this.jt.xt(e)}Rt(e){this.jt.Bt(e)}At(e){this.jt.Kt(e)}Et(){this.jt.Wt()}}class Y0{constructor(){this.jt=new lue,this.Ht=new cue(this.jt),this.Jt=new uue(this.jt)}seed(e){this.jt.seed(e)}Yt(e){return 0===e?this.Ht:this.Jt}zt(){return this.jt.zt()}reset(){this.jt.reset()}}class Rf{constructor(e,t,i,r){this.indexId=e,this.documentKey=t,this.arrayValue=i,this.directionalValue=r}Zt(){const e=this.directionalValue.length,t=0===e||255===this.directionalValue[e-1]?e+1:e,i=new Uint8Array(t);return i.set(this.directionalValue,0),t!==e?i.set([0],this.directionalValue.length):++i[i.length-1],new Rf(this.indexId,this.documentKey,this.arrayValue,i)}}function Wd(n,e){let t=n.indexId-e.indexId;return 0!==t?t:(t=Q6(n.arrayValue,e.arrayValue),0!==t?t:(t=Q6(n.directionalValue,e.directionalValue),0!==t?t:Rt.comparator(n.documentKey,e.documentKey)))}function Q6(n,e){for(let t=0;t<n.length&&t<e.length;++t){const i=n[t]-e[t];if(0!==i)return i}return n.length-e.length}class Z6{constructor(e){this.Xt=new nr((t,i)=>Ar.comparator(t.field,i.field)),this.collectionId=null!=e.collectionGroup?e.collectionGroup:e.path.lastSegment(),this.en=e.orderBy,this.tn=[];for(const t of e.filters){const i=t;i.isInequality()?this.Xt=this.Xt.add(i):this.tn.push(i)}}get nn(){return this.Xt.size>1}rn(e){if(an(e.collectionGroup===this.collectionId),this.nn)return!1;const t=AR(e);if(void 0!==t&&!this.sn(t))return!1;const i=bf(e);let r=new Set,s=0,o=0;for(;s<i.length&&this.sn(i[s]);++s)r=r.add(i[s].fieldPath.canonicalString());if(s===i.length)return!0;if(this.Xt.size>0){const a=this.Xt.getIterator().getNext();if(!r.has(a.field.canonicalString())){const l=i[s];if(!this.on(a,l)||!this._n(this.en[o++],l))return!1}++s}for(;s<i.length;++s)if(o>=this.en.length||!this._n(this.en[o++],i[s]))return!1;return!0}an(){if(this.nn)return null;let e=new nr(Ar.comparator);const t=[];for(const i of this.tn)if(!i.field.isKeyField())if("array-contains"===i.op||"array-contains-any"===i.op)t.push(new xf(i.field,2));else{if(e.has(i.field))continue;e=e.add(i.field),t.push(new xf(i.field,0))}for(const i of this.en)i.field.isKeyField()||e.has(i.field)||(e=e.add(i.field),t.push(new xf(i.field,"asc"===i.dir?0:1)));return new vg(vg.UNKNOWN_ID,this.collectionId,t,yg.empty())}sn(e){for(const t of this.tn)if(this.on(t,e))return!0;return!1}on(e,t){return!(void 0===e||!e.field.isEqual(t.fieldPath))&&2===t.kind==("array-contains"===e.op||"array-contains-any"===e.op)}_n(e,t){return!!e.field.isEqual(t.fieldPath)&&(0===t.kind&&"asc"===e.dir||1===t.kind&&"desc"===e.dir)}}function J6(n){var e,t;if(an(n instanceof Ai||n instanceof er),n instanceof Ai){if(n instanceof X5){const r=(null===(t=null===(e=n.value.arrayValue)||void 0===e?void 0:e.values)||void 0===t?void 0:t.map(s=>Ai.create(n.field,"==",s)))||[];return er.create(r,"or")}return n}const i=n.filters.map(r=>J6(r));return er.create(i,n.op)}function due(n){if(0===n.getFilters().length)return[];const e=nP(J6(n));return an(eG(e)),eP(e)||tP(e)?[e]:e.getFilters()}function eP(n){return n instanceof Ai}function tP(n){return n instanceof er&&NR(n)}function eG(n){return eP(n)||tP(n)||function(t){if(t instanceof er&&OR(t)){for(const i of t.getFilters())if(!eP(i)&&!tP(i))return!1;return!0}return!1}(n)}function nP(n){if(an(n instanceof Ai||n instanceof er),n instanceof Ai)return n;if(1===n.filters.length)return nP(n.filters[0]);const e=n.filters.map(i=>nP(i));let t=er.create(e,n.op);return t=tS(t),eG(t)?t:(an(t instanceof er),an(wg(t)),an(t.filters.length>1),t.filters.reduce((i,r)=>iP(i,r)))}function iP(n,e){let t;return an(n instanceof Ai||n instanceof er),an(e instanceof Ai||e instanceof er),t=n instanceof Ai?e instanceof Ai?er.create([n,e],"and"):tG(n,e):e instanceof Ai?tG(e,n):function(r,s){if(an(r.filters.length>0&&s.filters.length>0),wg(r)&&wg(s))return j5(r,s.getFilters());const o=OR(r)?r:s,a=OR(r)?s:r,l=o.filters.map(c=>iP(c,a));return er.create(l,"or")}(n,e),tS(t)}function tG(n,e){if(wg(e))return j5(e,n.getFilters());{const t=e.filters.map(i=>iP(n,i));return er.create(t,"or")}}function tS(n){if(an(n instanceof Ai||n instanceof er),n instanceof Ai)return n;const e=n.getFilters();if(1===e.length)return tS(e[0]);if(G5(n))return n;const t=e.map(r=>tS(r)),i=[];return t.forEach(r=>{r instanceof Ai?i.push(r):r instanceof er&&(r.op===n.op?i.push(...r.filters):i.push(r))}),1===i.length?i[0]:er.create(i,n.op)}class hue{constructor(){this.un=new rP}addToCollectionParentIndex(e,t){return this.un.add(t),he.resolve()}getCollectionParents(e,t){return he.resolve(this.un.getEntries(t))}addFieldIndex(e,t){return he.resolve()}deleteFieldIndex(e,t){return he.resolve()}deleteAllFieldIndexes(e){return he.resolve()}createTargetIndexes(e,t){return he.resolve()}getDocumentsMatchingTarget(e,t){return he.resolve(null)}getIndexType(e,t){return he.resolve(0)}getFieldIndexes(e,t){return he.resolve([])}getNextCollectionGroupToUpdate(e){return he.resolve(null)}getMinOffset(e,t){return he.resolve(Oa.min())}getMinOffsetFromCollectionGroup(e,t){return he.resolve(Oa.min())}updateCollectionGroup(e,t,i){return he.resolve()}updateIndexEntries(e,t){return he.resolve()}}class rP{constructor(){this.index={}}add(e){const t=e.lastSegment(),i=e.popLast(),r=this.index[t]||new nr(Si.comparator),s=!r.has(i);return this.index[t]=r.add(i),s}has(e){const t=e.lastSegment(),i=e.popLast(),r=this.index[t];return r&&r.has(i)}getEntries(e){return(this.index[e]||new nr(Si.comparator)).toArray()}}const nS=new Uint8Array(0);class fue{constructor(e,t){this.databaseId=t,this.cn=new rP,this.ln=new Tu(i=>Tf(i),(i,r)=>F0(i,r)),this.uid=e.uid||""}addToCollectionParentIndex(e,t){if(!this.cn.has(t)){const i=t.lastSegment(),r=t.popLast();e.addOnCommittedListener(()=>{this.cn.add(t)});const s={collectionId:i,parent:yo(r)};return nG(e).put(s)}return he.resolve()}getCollectionParents(e,t){const i=[],r=IDBKeyRange.bound([t,""],[h5(t),""],!1,!0);return nG(e).U(r).next(s=>{for(const o of s){if(o.collectionId!==t)break;i.push(vc(o.parent))}return i})}addFieldIndex(e,t){const i=Q0(e),r={indexId:(a=t).indexId,collectionGroup:a.collectionGroup,fields:a.fields.map(l=>[l.fieldPath.canonicalString(),l.kind])};var a;delete r.indexId;const s=i.add(r);if(t.indexState){const o=kg(e);return s.next(a=>{o.put(q6(a,this.uid,t.indexState.sequenceNumber,t.indexState.offset))})}return s.next()}deleteFieldIndex(e,t){const i=Q0(e),r=kg(e),s=Pg(e);return i.delete(t.indexId).next(()=>r.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))).next(()=>s.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0)))}deleteAllFieldIndexes(e){const t=Q0(e),i=Pg(e),r=kg(e);return t.j().next(()=>i.j()).next(()=>r.j())}createTargetIndexes(e,t){return he.forEach(this.hn(t),i=>this.getIndexType(e,i).next(r=>{if(0===r||1===r){const s=new Z6(i).an();if(null!=s)return this.addFieldIndex(e,s)}}))}getDocumentsMatchingTarget(e,t){const i=Pg(e);let r=!0;const s=new Map;return he.forEach(this.hn(t),o=>this.Pn(e,o).next(a=>{r&&(r=!!a),s.set(o,a)})).next(()=>{if(r){let o=Qn();const a=[];return he.forEach(s,(l,c)=>{var S;Je("IndexedDbIndexManager",`Using index ${S=l,`id=${S.indexId}|cg=${S.collectionGroup}|f=${S.fields.map(A=>`${A.fieldPath}:${A.kind}`).join(",")}`} to execute ${Tf(t)}`);const u=function(S,A){const V=AR(A);if(void 0===V)return null;for(const F of jT(S,V.fieldPath))switch(F.op){case"array-contains-any":return F.value.arrayValue.values||[];case"array-contains":return[F.value]}return null}(c,l),d=function(S,A){const V=new Map;for(const F of bf(A))for(const P of jT(S,F.fieldPath))switch(P.op){case"==":case"in":V.set(F.fieldPath.canonicalString(),P.value);break;case"not-in":case"!=":return V.set(F.fieldPath.canonicalString(),P.value),Array.from(V.values())}return null}(c,l),p=function(S,A){const V=[];let F=!0;for(const P of bf(A)){const D=0===P.kind?K5(S,P.fieldPath,S.startAt):Y5(S,P.fieldPath,S.startAt);V.push(D.value),F&&(F=D.inclusive)}return new Hd(V,F)}(c,l),m=function(S,A){const V=[];let F=!0;for(const P of bf(A)){const D=0===P.kind?Y5(S,P.fieldPath,S.endAt):K5(S,P.fieldPath,S.endAt);V.push(D.value),F&&(F=D.inclusive)}return new Hd(V,F)}(c,l),v=this.In(l,c,p),x=this.In(l,c,m),b=this.Tn(l,c,d),w=this.En(l.indexId,u,v,p.inclusive,x,m.inclusive,b);return he.forEach(w,T=>i.G(T,t.limit).next(S=>{S.forEach(A=>{const V=Rt.fromSegments(A.documentKey);o.has(V)||(o=o.add(V),a.push(V))})}))}).next(()=>a)}return he.resolve(null)})}hn(e){let t=this.ln.get(e);return t||(t=0===e.filters.length?[e]:due(er.create(e.filters,"and")).map(i=>LR(e.path,e.collectionGroup,e.orderBy,i.getFilters(),e.limit,e.startAt,e.endAt)),this.ln.set(e,t),t)}En(e,t,i,r,s,o,a){const l=(null!=t?t.length:1)*Math.max(i.length,s.length),c=l/(null!=t?t.length:1),u=[];for(let d=0;d<l;++d){const p=t?this.dn(t[d/c]):nS,m=this.An(e,p,i[d%c],r),v=this.Rn(e,p,s[d%c],o),x=a.map(b=>this.An(e,p,b,!0));u.push(...this.createRange(m,v,x))}return u}An(e,t,i,r){const s=new Rf(e,Rt.empty(),t,i);return r?s:s.Zt()}Rn(e,t,i,r){const s=new Rf(e,Rt.empty(),t,i);return r?s.Zt():s}Pn(e,t){const i=new Z6(t),r=null!=t.collectionGroup?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,r).next(s=>{let o=null;for(const a of s)i.rn(a)&&(!o||a.fields.length>o.fields.length)&&(o=a);return o})}getIndexType(e,t){let i=2;const r=this.hn(t);return he.forEach(r,s=>this.Pn(e,s).next(o=>{o?0!==i&&o.fields.length<function(l){let c=new nr(Ar.comparator),u=!1;for(const d of l.filters)for(const p of d.getFlattenedFilters())p.field.isKeyField()||("array-contains"===p.op||"array-contains-any"===p.op?u=!0:c=c.add(p.field));for(const d of l.orderBy)d.field.isKeyField()||(c=c.add(d.field));return c.size+(u?1:0)}(s)&&(i=1):i=0})).next(()=>null!==t.limit&&r.length>1&&2===i?1:i)}Vn(e,t){const i=new Y0;for(const r of bf(e)){const s=t.data.field(r.fieldPath);if(null==s)return null;const o=i.Yt(r.kind);Df.vt.It(s,o)}return i.zt()}dn(e){const t=new Y0;return Df.vt.It(e,t.Yt(0)),t.zt()}mn(e,t){const i=new Y0;return Df.vt.It(Ef(this.databaseId,t),i.Yt(function(s){const o=bf(s);return 0===o.length?0:o[o.length-1].kind}(e))),i.zt()}Tn(e,t,i){if(null===i)return[];let r=[];r.push(new Y0);let s=0;for(const o of bf(e)){const a=i[s++];for(const l of r)if(this.fn(t,o.fieldPath)&&k0(a))r=this.gn(r,o,a);else{const c=l.Yt(o.kind);Df.vt.It(a,c)}}return this.pn(r)}In(e,t,i){return this.Tn(e,t,i.position)}pn(e){const t=[];for(let i=0;i<e.length;++i)t[i]=e[i].zt();return t}gn(e,t,i){const r=[...e],s=[];for(const o of i.arrayValue.values||[])for(const a of r){const l=new Y0;l.seed(a.zt()),Df.vt.It(o,l.Yt(t.kind)),s.push(l)}return s}fn(e,t){return!!e.filters.find(i=>i instanceof Ai&&i.field.isEqual(t)&&("in"===i.op||"not-in"===i.op))}getFieldIndexes(e,t){const i=Q0(e),r=kg(e);return(t?i.U("collectionGroupIndex",IDBKeyRange.bound(t,t)):i.U()).next(s=>{const o=[];return he.forEach(s,a=>r.get([a.indexId,this.uid]).next(l=>{o.push(function(u,d){const p=d?new yg(d.sequenceNumber,new Oa(Cf(d.readTime),new Rt(vc(d.documentKey)),d.largestBatchId)):yg.empty(),m=u.fields.map(([v,x])=>new xf(Ar.fromServerFormat(v),x));return new vg(u.indexId,u.collectionGroup,m,p)}(a,l))})).next(()=>o)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(t=>0===t.length?null:(t.sort((i,r)=>{const s=i.indexState.sequenceNumber-r.indexState.sequenceNumber;return 0!==s?s:Vn(i.collectionGroup,r.collectionGroup)}),t[0].collectionGroup))}updateCollectionGroup(e,t,i){const r=Q0(e),s=kg(e);return this.yn(e).next(o=>r.U("collectionGroupIndex",IDBKeyRange.bound(t,t)).next(a=>he.forEach(a,l=>s.put(q6(l.indexId,this.uid,o,i)))))}updateIndexEntries(e,t){const i=new Map;return he.forEach(t,(r,s)=>{const o=i.get(r.collectionGroup);return(o?he.resolve(o):this.getFieldIndexes(e,r.collectionGroup)).next(a=>(i.set(r.collectionGroup,a),he.forEach(a,l=>this.wn(e,r,l).next(c=>{const u=this.Sn(s,l);return c.isEqual(u)?he.resolve():this.bn(e,s,l,c,u)}))))})}Dn(e,t,i,r){return Pg(e).put({indexId:r.indexId,uid:this.uid,arrayValue:r.arrayValue,directionalValue:r.directionalValue,orderedDocumentKey:this.mn(i,t.key),documentKey:t.key.path.toArray()})}vn(e,t,i,r){return Pg(e).delete([r.indexId,this.uid,r.arrayValue,r.directionalValue,this.mn(i,t.key),t.key.path.toArray()])}wn(e,t,i){const r=Pg(e);let s=new nr(Wd);return r.J({index:"documentKeyIndex",range:IDBKeyRange.only([i.indexId,this.uid,this.mn(i,t)])},(o,a)=>{s=s.add(new Rf(i.indexId,t,a.arrayValue,a.directionalValue))}).next(()=>s)}Sn(e,t){let i=new nr(Wd);const r=this.Vn(t,e);if(null==r)return i;const s=AR(t);if(null!=s){const o=e.data.field(s.fieldPath);if(k0(o))for(const a of o.arrayValue.values||[])i=i.add(new Rf(t.indexId,e.key,this.dn(a),r))}else i=i.add(new Rf(t.indexId,e.key,nS,r));return i}bn(e,t,i,r,s){Je("IndexedDbIndexManager","Updating index entries for document '%s'",t.key);const o=[];return function(l,c,u,d,p){const m=l.getIterator(),v=c.getIterator();let x=bg(m),b=bg(v);for(;x||b;){let w=!1,T=!1;if(x&&b){const S=u(x,b);S<0?T=!0:S>0&&(w=!0)}else null!=x?T=!0:w=!0;w?(d(b),b=bg(v)):T?(p(x),x=bg(m)):(x=bg(m),b=bg(v))}}(r,s,Wd,a=>{o.push(this.Dn(e,t,i,a))},a=>{o.push(this.vn(e,t,i,a))}),he.waitFor(o)}yn(e){let t=1;return kg(e).J({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(i,r,s)=>{s.done(),t=r.sequenceNumber+1}).next(()=>t)}createRange(e,t,i){i=i.sort((o,a)=>Wd(o,a)).filter((o,a,l)=>!a||0!==Wd(o,l[a-1]));const r=[];r.push(e);for(const o of i){const a=Wd(o,e),l=Wd(o,t);if(0===a)r[0]=e.Zt();else if(a>0&&l<0)r.push(o),r.push(o.Zt());else if(l>0)break}r.push(t);const s=[];for(let o=0;o<r.length;o+=2){if(this.Cn(r[o],r[o+1]))return[];s.push(IDBKeyRange.bound([r[o].indexId,this.uid,r[o].arrayValue,r[o].directionalValue,nS,[]],[r[o+1].indexId,this.uid,r[o+1].arrayValue,r[o+1].directionalValue,nS,[]]))}return s}Cn(e,t){return Wd(e,t)>0}getMinOffsetFromCollectionGroup(e,t){return this.getFieldIndexes(e,t).next(iG)}getMinOffset(e,t){return he.mapArray(this.hn(t),i=>this.Pn(e,i).next(r=>r||Qt())).next(iG)}}function nG(n){return Cs(n,"collectionParents")}function Pg(n){return Cs(n,"indexEntries")}function Q0(n){return Cs(n,"indexConfiguration")}function kg(n){return Cs(n,"indexState")}function iG(n){an(0!==n.length);let e=n[0].indexState.offset,t=e.largestBatchId;for(let i=1;i<n.length;i++){const r=n[i].indexState.offset;IR(r,e)<0&&(e=r),t<r.largestBatchId&&(t=r.largestBatchId)}return new Oa(e.readTime,e.documentKey,t)}const rG={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class xo{constructor(e,t,i){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=i}static withCacheSize(e){return new xo(e,xo.DEFAULT_COLLECTION_PERCENTILE,xo.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}function sG(n,e,t){const i=n.store("mutations"),r=n.store("documentMutations"),s=[],o=IDBKeyRange.only(t.batchId);let a=0;const l=i.J({range:o},(u,d,p)=>(a++,p.delete()));s.push(l.next(()=>{an(1===a)}));const c=[];for(const u of t.mutations){const d=w5(e,u.key.path,t.batchId);s.push(r.delete(d)),c.push(u.key)}return he.waitFor(s).next(()=>c)}function iS(n){if(!n)return 0;let e;if(n.document)e=n.document;else if(n.unknownDocument)e=n.unknownDocument;else{if(!n.noDocument)throw Qt();e=n.noDocument}return JSON.stringify(e).length}xo.DEFAULT_COLLECTION_PERCENTILE=10,xo.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,xo.DEFAULT=new xo(41943040,xo.DEFAULT_COLLECTION_PERCENTILE,xo.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),xo.DISABLED=new xo(-1,0,0);class rS{constructor(e,t,i,r){this.userId=e,this.serializer=t,this.indexManager=i,this.referenceDelegate=r,this.Fn={}}static lt(e,t,i,r){an(""!==e.uid);const s=e.isAuthenticated()?e.uid:"";return new rS(s,t,i,r)}checkEmpty(e){let t=!0;const i=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return jd(e).J({index:"userMutationsIndex",range:i},(r,s,o)=>{t=!1,o.done()}).next(()=>t)}addMutationBatch(e,t,i,r){const s=Og(e),o=jd(e);return o.add({}).next(a=>{an("number"==typeof a);const l=new GR(a,t,i,r),c=function(m,v,x){const b=x.baseMutations.map(T=>q0(m.ct,T)),w=x.mutations.map(T=>q0(m.ct,T));return{userId:v,batchId:x.batchId,localWriteTimeMs:x.localWriteTime.toMillis(),baseMutations:b,mutations:w}}(this.serializer,this.userId,l),u=[];let d=new nr((p,m)=>Vn(p.canonicalString(),m.canonicalString()));for(const p of r){const m=w5(this.userId,p.key.path,a);d=d.add(p.key.path.popLast()),u.push(o.put(c)),u.push(s.put(m,ece))}return d.forEach(p=>{u.push(this.indexManager.addToCollectionParentIndex(e,p))}),e.addOnCommittedListener(()=>{this.Fn[a]=l.keys()}),he.waitFor(u).next(()=>l)})}lookupMutationBatch(e,t){return jd(e).get(t).next(i=>i?(an(i.userId===this.userId),Mf(this.serializer,i)):null)}Mn(e,t){return this.Fn[t]?he.resolve(this.Fn[t]):this.lookupMutationBatch(e,t).next(i=>{if(i){const r=i.keys();return this.Fn[t]=r,r}return null})}getNextMutationBatchAfterBatchId(e,t){const i=t+1,r=IDBKeyRange.lowerBound([this.userId,i]);let s=null;return jd(e).J({index:"userMutationsIndex",range:r},(o,a,l)=>{a.userId===this.userId&&(an(a.batchId>=i),s=Mf(this.serializer,a)),l.done()}).next(()=>s)}getHighestUnacknowledgedBatchId(e){const t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let i=-1;return jd(e).J({index:"userMutationsIndex",range:t,reverse:!0},(r,s,o)=>{i=s.batchId,o.done()}).next(()=>i)}getAllMutationBatches(e){const t=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return jd(e).U("userMutationsIndex",t).next(i=>i.map(r=>Mf(this.serializer,r)))}getAllMutationBatchesAffectingDocumentKey(e,t){const i=FT(this.userId,t.path),r=IDBKeyRange.lowerBound(i),s=[];return Og(e).J({range:r},(o,a,l)=>{const[c,u,d]=o,p=vc(u);if(c===this.userId&&t.path.isEqual(p))return jd(e).get(d).next(m=>{if(!m)throw Qt();an(m.userId===this.userId),s.push(Mf(this.serializer,m))});l.done()}).next(()=>s)}getAllMutationBatchesAffectingDocumentKeys(e,t){let i=new nr(Vn);const r=[];return t.forEach(s=>{const o=FT(this.userId,s.path),a=IDBKeyRange.lowerBound(o),l=Og(e).J({range:a},(c,u,d)=>{const[p,m,v]=c,x=vc(m);p===this.userId&&s.path.isEqual(x)?i=i.add(v):d.done()});r.push(l)}),he.waitFor(r).next(()=>this.xn(e,i))}getAllMutationBatchesAffectingQuery(e,t){const i=t.path,r=i.length+1,s=FT(this.userId,i),o=IDBKeyRange.lowerBound(s);let a=new nr(Vn);return Og(e).J({range:o},(l,c,u)=>{const[d,p,m]=l,v=vc(p);d===this.userId&&i.isPrefixOf(v)?v.length===r&&(a=a.add(m)):u.done()}).next(()=>this.xn(e,a))}xn(e,t){const i=[],r=[];return t.forEach(s=>{r.push(jd(e).get(s).next(o=>{if(null===o)throw Qt();an(o.userId===this.userId),i.push(Mf(this.serializer,o))}))}),he.waitFor(r).next(()=>i)}removeMutationBatch(e,t){return sG(e._e,this.userId,t).next(i=>(e.addOnCommittedListener(()=>{this.On(t.batchId)}),he.forEach(i,r=>this.referenceDelegate.markPotentiallyOrphaned(e,r))))}On(e){delete this.Fn[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(t=>{if(!t)return he.resolve();const i=IDBKeyRange.lowerBound([this.userId]),r=[];return Og(e).J({range:i},(s,o,a)=>{if(s[0]===this.userId){const l=vc(s[1]);r.push(l)}else a.done()}).next(()=>{an(0===r.length)})})}containsKey(e,t){return oG(e,this.userId,t)}Nn(e){return aG(e).get(this.userId).next(t=>t||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""})}}function oG(n,e,t){const i=FT(e,t.path),r=i[1],s=IDBKeyRange.lowerBound(i);let o=!1;return Og(n).J({range:s,H:!0},(a,l,c)=>{const[u,d,p]=a;u===e&&d===r&&(o=!0),c.done()}).next(()=>o)}function jd(n){return Cs(n,"mutations")}function Og(n){return Cs(n,"documentMutations")}function aG(n){return Cs(n,"mutationQueues")}class Pf{constructor(e){this.Ln=e}next(){return this.Ln+=2,this.Ln}static Bn(){return new Pf(0)}static kn(){return new Pf(-1)}}class pue{constructor(e,t){this.referenceDelegate=e,this.serializer=t}allocateTargetId(e){return this.qn(e).next(t=>{const i=new Pf(t.highestTargetId);return t.highestTargetId=i.next(),this.Qn(e,t).next(()=>t.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.qn(e).next(t=>fn.fromTimestamp(new Nr(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.qn(e).next(t=>t.highestListenSequenceNumber)}setTargetsMetadata(e,t,i){return this.qn(e).next(r=>(r.highestListenSequenceNumber=t,i&&(r.lastRemoteSnapshotVersion=i.toTimestamp()),t>r.highestListenSequenceNumber&&(r.highestListenSequenceNumber=t),this.Qn(e,r)))}addTargetData(e,t){return this.Kn(e,t).next(()=>this.qn(e).next(i=>(i.targetCount+=1,this.$n(t,i),this.Qn(e,i))))}updateTargetData(e,t){return this.Kn(e,t)}removeTargetData(e,t){return this.removeMatchingKeysForTargetId(e,t.targetId).next(()=>Ng(e).delete(t.targetId)).next(()=>this.qn(e)).next(i=>(an(i.targetCount>0),i.targetCount-=1,this.Qn(e,i)))}removeTargets(e,t,i){let r=0;const s=[];return Ng(e).J((o,a)=>{const l=X0(a);l.sequenceNumber<=t&&null===i.get(l.targetId)&&(r++,s.push(this.removeTargetData(e,l)))}).next(()=>he.waitFor(s)).next(()=>r)}forEachTarget(e,t){return Ng(e).J((i,r)=>{const s=X0(r);t(s)})}qn(e){return lG(e).get("targetGlobalKey").next(t=>(an(null!==t),t))}Qn(e,t){return lG(e).put("targetGlobalKey",t)}Kn(e,t){return Ng(e).put(j6(this.serializer,t))}$n(e,t){let i=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,i=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,i=!0),i}getTargetCount(e){return this.qn(e).next(t=>t.targetCount)}getTargetData(e,t){const i=Tf(t),r=IDBKeyRange.bound([i,Number.NEGATIVE_INFINITY],[i,Number.POSITIVE_INFINITY]);let s=null;return Ng(e).J({range:r,index:"queryTargetsIndex"},(o,a,l)=>{const c=X0(a);F0(t,c.target)&&(s=c,l.done())}).next(()=>s)}addMatchingKeys(e,t,i){const r=[],s=$d(e);return t.forEach(o=>{const a=yo(o.path);r.push(s.put({targetId:i,path:a})),r.push(this.referenceDelegate.addReference(e,i,o))}),he.waitFor(r)}removeMatchingKeys(e,t,i){const r=$d(e);return he.forEach(t,s=>{const o=yo(s.path);return he.waitFor([r.delete([i,o]),this.referenceDelegate.removeReference(e,i,s)])})}removeMatchingKeysForTargetId(e,t){const i=$d(e),r=IDBKeyRange.bound([t],[t+1],!1,!0);return i.delete(r)}getMatchingKeysForTargetId(e,t){const i=IDBKeyRange.bound([t],[t+1],!1,!0),r=$d(e);let s=Qn();return r.J({range:i,H:!0},(o,a,l)=>{const c=vc(o[1]),u=new Rt(c);s=s.add(u)}).next(()=>s)}containsKey(e,t){const i=yo(t.path),r=IDBKeyRange.bound([i],[h5(i)],!1,!0);let s=0;return $d(e).J({index:"documentTargetsIndex",H:!0,range:r},([o,a],l,c)=>{0!==o&&(s++,c.done())}).next(()=>s>0)}ot(e,t){return Ng(e).get(t).next(i=>i?X0(i):null)}}function Ng(n){return Cs(n,"targets")}function lG(n){return Cs(n,"targetGlobal")}function $d(n){return Cs(n,"targetDocuments")}function cG([n,e],[t,i]){const r=Vn(n,t);return 0===r?Vn(e,i):r}class mue{constructor(e){this.Un=e,this.buffer=new nr(cG),this.Wn=0}Gn(){return++this.Wn}zn(e){const t=[e,this.Gn()];if(this.buffer.size<this.Un)this.buffer=this.buffer.add(t);else{const i=this.buffer.last();cG(t,i)<0&&(this.buffer=this.buffer.delete(i).add(t))}}get maxValue(){return this.buffer.last()[0]}}class uG{constructor(e,t,i){this.garbageCollector=e,this.asyncQueue=t,this.localStore=i,this.jn=null}start(){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.Hn(6e4)}stop(){this.jn&&(this.jn.cancel(),this.jn=null)}get started(){return null!==this.jn}Hn(e){var t=this;Je("LruGarbageCollector",`Garbage collection scheduled in ${e}ms`),this.jn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(0,Me.A)(function*(){t.jn=null;try{yield t.localStore.collectGarbage(t.garbageCollector)}catch(i){Fd(i)?Je("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",i):yield Nd(i)}yield t.Hn(3e5)}))}}class gue{constructor(e,t){this.Jn=e,this.params=t}calculateTargetCount(e,t){return this.Jn.Yn(e).next(i=>Math.floor(t/100*i))}nthSequenceNumber(e,t){if(0===t)return he.resolve(Na.oe);const i=new mue(t);return this.Jn.forEachTarget(e,r=>i.zn(r.sequenceNumber)).next(()=>this.Jn.Zn(e,r=>i.zn(r))).next(()=>i.maxValue)}removeTargets(e,t,i){return this.Jn.removeTargets(e,t,i)}removeOrphanedDocuments(e,t){return this.Jn.removeOrphanedDocuments(e,t)}collect(e,t){return-1===this.params.cacheSizeCollectionThreshold?(Je("LruGarbageCollector","Garbage collection skipped; disabled"),he.resolve(rG)):this.getCacheSize(e).next(i=>i<this.params.cacheSizeCollectionThreshold?(Je("LruGarbageCollector",`Garbage collection skipped; Cache size ${i} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),rG):this.Xn(e,t))}getCacheSize(e){return this.Jn.getCacheSize(e)}Xn(e,t){let i,r,s,o,a,l,c;const u=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(d=>(d>this.params.maximumSequenceNumbersToCollect?(Je("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${d}`),r=this.params.maximumSequenceNumbersToCollect):r=d,o=Date.now(),this.nthSequenceNumber(e,r))).next(d=>(i=d,a=Date.now(),this.removeTargets(e,i,t))).next(d=>(s=d,l=Date.now(),this.removeOrphanedDocuments(e,i))).next(d=>(c=Date.now(),gg()<=gc.$b.DEBUG&&Je("LruGarbageCollector",`LRU Garbage Collection\n\tCounted targets in ${o-u}ms\n\tDetermined least recently used ${r} in `+(a-o)+`ms\n\tRemoved ${s} targets in `+(l-a)+`ms\n\tRemoved ${d} documents in `+(c-l)+`ms\nTotal Duration: ${c-u}ms`),he.resolve({didRun:!0,sequenceNumbersCollected:r,targetsRemoved:s,documentsRemoved:d})))}}class _ue{constructor(e,t){this.db=e,this.garbageCollector=function dG(n,e){return new gue(n,e)}(this,t)}Yn(e){const t=this.er(e);return this.db.getTargetCache().getTargetCount(e).next(i=>t.next(r=>i+r))}er(e){let t=0;return this.Zn(e,i=>{t++}).next(()=>t)}forEachTarget(e,t){return this.db.getTargetCache().forEachTarget(e,t)}Zn(e,t){return this.tr(e,(i,r)=>t(r))}addReference(e,t,i){return sS(e,i)}removeReference(e,t,i){return sS(e,i)}removeTargets(e,t,i){return this.db.getTargetCache().removeTargets(e,t,i)}markPotentiallyOrphaned(e,t){return sS(e,t)}nr(e,t){return function(r,s){let o=!1;return aG(r).Y(a=>oG(r,a,s).next(l=>(l&&(o=!0),he.resolve(!l)))).next(()=>o)}(e,t)}removeOrphanedDocuments(e,t){const i=this.db.getRemoteDocumentCache().newChangeBuffer(),r=[];let s=0;return this.tr(e,(o,a)=>{if(a<=t){const l=this.nr(e,o).next(c=>{if(!c)return s++,i.getEntry(e,o).next(()=>(i.removeEntry(o,fn.min()),$d(e).delete([0,yo(o.path)])))});r.push(l)}}).next(()=>he.waitFor(r)).next(()=>i.apply(e)).next(()=>s)}removeTarget(e,t){const i=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,i)}updateLimboDocument(e,t){return sS(e,t)}tr(e,t){const i=$d(e);let r,s=Na.oe;return i.J({index:"documentTargetsIndex"},([o,a],{path:l,sequenceNumber:c})=>{0===o?(s!==Na.oe&&t(new Rt(vc(r)),s),s=c,r=l):s=Na.oe}).next(()=>{s!==Na.oe&&t(new Rt(vc(r)),s)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function sS(n,e){return $d(n).put((r=n.currentSequenceNumber,{targetId:0,path:yo(e.path),sequenceNumber:r}));var r}class hG{constructor(){this.changes=new Tu(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,Ir.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const i=this.changes.get(t);return void 0!==i?he.resolve(i):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class vue{constructor(e){this.serializer=e}setIndexManager(e){this.indexManager=e}addEntry(e,t,i){return kf(e).put(i)}removeEntry(e,t,i){return kf(e).delete(function(s,o){const a=s.path.toArray();return[a.slice(0,a.length-2),a[a.length-2],JT(o),a[a.length-1]]}(t,i))}updateMetadata(e,t){return this.getMetadata(e).next(i=>(i.byteSize+=t,this.rr(e,i)))}getEntry(e,t){let i=Ir.newInvalidDocument(t);return kf(e).J({index:"documentKeyIndex",range:IDBKeyRange.only(Z0(t))},(r,s)=>{i=this.ir(t,s)}).next(()=>i)}sr(e,t){let i={size:0,document:Ir.newInvalidDocument(t)};return kf(e).J({index:"documentKeyIndex",range:IDBKeyRange.only(Z0(t))},(r,s)=>{i={document:this.ir(t,s),size:iS(s)}}).next(()=>i)}getEntries(e,t){let i=ha();return this._r(e,t,(r,s)=>{const o=this.ir(r,s);i=i.insert(r,o)}).next(()=>i)}ar(e,t){let i=ha(),r=new br(Rt.comparator);return this._r(e,t,(s,o)=>{const a=this.ir(s,o);i=i.insert(s,a),r=r.insert(s,iS(o))}).next(()=>({documents:i,ur:r}))}_r(e,t,i){if(t.isEmpty())return he.resolve();let r=new nr(gG);t.forEach(l=>r=r.add(l));const s=IDBKeyRange.bound(Z0(r.first()),Z0(r.last())),o=r.getIterator();let a=o.getNext();return kf(e).J({index:"documentKeyIndex",range:s},(l,c,u)=>{const d=Rt.fromSegments([...c.prefixPath,c.collectionGroup,c.documentId]);for(;a&&gG(a,d)<0;)i(a,null),a=o.getNext();a&&a.isEqual(d)&&(i(a,c),a=o.hasNext()?o.getNext():null),a?u.$(Z0(a)):u.done()}).next(()=>{for(;a;)i(a,null),a=o.hasNext()?o.getNext():null})}getDocumentsMatchingQuery(e,t,i,r,s){const o=t.path,a=[o.popLast().toArray(),o.lastSegment(),JT(i.readTime),i.documentKey.path.isEmpty()?"":i.documentKey.path.lastSegment()],l=[o.popLast().toArray(),o.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return kf(e).U(IDBKeyRange.bound(a,l,!0)).next(c=>{s?.incrementDocumentReadCount(c.length);let u=ha();for(const d of c){const p=this.ir(Rt.fromSegments(d.prefixPath.concat(d.collectionGroup,d.documentId)),d);p.isFoundDocument()&&(V0(t,p)||r.has(p.key))&&(u=u.insert(p.key,p))}return u})}getAllFromCollectionGroup(e,t,i,r){let s=ha();const o=mG(t,i),a=mG(t,Oa.max());return kf(e).J({index:"collectionGroupIndex",range:IDBKeyRange.bound(o,a,!0)},(l,c,u)=>{const d=this.ir(Rt.fromSegments(c.prefixPath.concat(c.collectionGroup,c.documentId)),c);s=s.insert(d.key,d),s.size===r&&u.done()}).next(()=>s)}newChangeBuffer(e){return new yue(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(t=>t.byteSize)}getMetadata(e){return pG(e).get("remoteDocumentGlobalKey").next(t=>(an(!!t),t))}rr(e,t){return pG(e).put("remoteDocumentGlobalKey",t)}ir(e,t){if(t){const i=function rue(n,e){let t;if(e.document)t=F6(n.ct,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const i=Rt.fromSegments(e.noDocument.path),r=Cf(e.noDocument.readTime);t=Ir.newNoDocument(i,r),e.hasCommittedMutations&&t.setHasCommittedMutations()}else{if(!e.unknownDocument)return Qt();{const i=Rt.fromSegments(e.unknownDocument.path),r=Cf(e.unknownDocument.version);t=Ir.newUnknownDocument(i,r)}}return e.readTime&&t.setReadTime(function(r){const s=new Nr(r[0],r[1]);return fn.fromTimestamp(s)}(e.readTime)),t}(this.serializer,t);if(!i.isNoDocument()||!i.version.isEqual(fn.min()))return i}return Ir.newInvalidDocument(e)}}function fG(n){return new vue(n)}class yue extends hG{constructor(e,t){super(),this.cr=e,this.trackRemovals=t,this.lr=new Tu(i=>i.toString(),(i,r)=>i.isEqual(r))}applyChanges(e){const t=[];let i=0,r=new nr((s,o)=>Vn(s.canonicalString(),o.canonicalString()));return this.changes.forEach((s,o)=>{const a=this.lr.get(s);if(t.push(this.cr.removeEntry(e,s,a.readTime)),o.isValidDocument()){const l=W6(this.cr.serializer,o);r=r.add(s.path.popLast());const c=iS(l);i+=c-a.size,t.push(this.cr.addEntry(e,s,l))}else if(i-=a.size,this.trackRemovals){const l=W6(this.cr.serializer,o.convertToNoDocument(fn.min()));t.push(this.cr.addEntry(e,s,l))}}),r.forEach(s=>{t.push(this.cr.indexManager.addToCollectionParentIndex(e,s))}),t.push(this.cr.updateMetadata(e,i)),he.waitFor(t)}getFromCache(e,t){return this.cr.sr(e,t).next(i=>(this.lr.set(t,{size:i.size,readTime:i.document.readTime}),i.document))}getAllFromCache(e,t){return this.cr.ar(e,t).next(({documents:i,ur:r})=>(r.forEach((s,o)=>{this.lr.set(s,{size:o,readTime:i.get(s).readTime})}),i))}}function pG(n){return Cs(n,"remoteDocumentGlobal")}function kf(n){return Cs(n,"remoteDocumentsV14")}function Z0(n){const e=n.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function mG(n,e){const t=e.documentKey.path.toArray();return[n,JT(e.readTime),t.slice(0,t.length-2),t.length>0?t[t.length-1]:""]}function gG(n,e){const t=n.path.toArray(),i=e.path.toArray();let r=0;for(let s=0;s<t.length-2&&s<i.length-2;++s)if(r=Vn(t[s],i[s]),r)return r;return r=Vn(t.length,i.length),r||(r=Vn(t[t.length-2],i[i.length-2]),r||Vn(t[t.length-1],i[i.length-1]))}class bue{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}class _G{constructor(e,t,i,r){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=i,this.indexManager=r}getDocument(e,t){let i=null;return this.documentOverlayCache.getOverlay(e,t).next(r=>(i=r,this.remoteDocumentCache.getEntry(e,t))).next(r=>(null!==i&&H0(i.mutation,r,da.empty(),Nr.now()),r))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(i=>this.getLocalViewOfDocuments(e,i,Qn()).next(()=>i))}getLocalViewOfDocuments(e,t,i=Qn()){const r=bc();return this.populateOverlays(e,r,t).next(()=>this.computeViews(e,t,r,i).next(s=>{let o=U0();return s.forEach((a,l)=>{o=o.insert(a,l.overlayedDocument)}),o}))}getOverlayedDocuments(e,t){const i=bc();return this.populateOverlays(e,i,t).next(()=>this.computeViews(e,t,i,Qn()))}populateOverlays(e,t,i){const r=[];return i.forEach(s=>{t.has(s)||r.push(s)}),this.documentOverlayCache.getOverlays(e,r).next(s=>{s.forEach((o,a)=>{t.set(o,a)})})}computeViews(e,t,i,r){let s=ha();const o=B0(),a=B0();return t.forEach((l,c)=>{const u=i.get(c.key);r.has(c.key)&&(void 0===u||u.mutation instanceof Su)?s=s.insert(c.key,c):void 0!==u?(o.set(c.key,u.mutation.getFieldMask()),H0(u.mutation,c,u.mutation.getFieldMask(),Nr.now())):o.set(c.key,da.empty())}),this.recalculateAndSaveOverlays(e,s).next(l=>(l.forEach((c,u)=>o.set(c,u)),t.forEach((c,u)=>{var d;return a.set(c,new bue(u,null!==(d=o.get(c))&&void 0!==d?d:null))}),a))}recalculateAndSaveOverlays(e,t){const i=B0();let r=new br((o,a)=>o-a),s=Qn();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(o=>{for(const a of o)a.keys().forEach(l=>{const c=t.get(l);if(null===c)return;let u=i.get(l)||da.empty();u=a.applyToLocalView(c,u),i.set(l,u);const d=(r.get(a.batchId)||Qn()).add(l);r=r.insert(a.batchId,d)})}).next(()=>{const o=[],a=r.getReverseIterator();for(;a.hasNext();){const l=a.getNext(),c=l.key,u=l.value,d=o6();u.forEach(p=>{if(!s.has(p)){const m=p6(t.get(p),i.get(p));null!==m&&d.set(p,m),s=s.add(p)}}),o.push(this.documentOverlayCache.saveOverlays(e,c,d))}return he.waitFor(o)}).next(()=>i)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(i=>this.recalculateAndSaveOverlays(e,i))}getDocumentsMatchingQuery(e,t,i,r){return Rt.isDocumentKey((o=t).path)&&null===o.collectionGroup&&0===o.filters.length?this.getDocumentsMatchingDocumentQuery(e,t.path):VR(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,i,r):this.getDocumentsMatchingCollectionQuery(e,t,i,r);var o}getNextDocuments(e,t,i,r){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,i,r).next(s=>{const o=r-s.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,i.largestBatchId,r-s.size):he.resolve(bc());let a=-1,l=s;return o.next(c=>he.forEach(c,(u,d)=>(a<d.largestBatchId&&(a=d.largestBatchId),s.get(u)?he.resolve():this.remoteDocumentCache.getEntry(e,u).next(p=>{l=l.insert(u,p)}))).next(()=>this.populateOverlays(e,c,s)).next(()=>this.computeViews(e,l,c,Qn())).next(u=>({batchId:a,changes:s6(u)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new Rt(t)).next(i=>{let r=U0();return i.isFoundDocument()&&(r=r.insert(i.key,i)),r})}getDocumentsMatchingCollectionGroupQuery(e,t,i,r){const s=t.collectionGroup;let o=U0();return this.indexManager.getCollectionParents(e,s).next(a=>he.forEach(a,l=>{const c=(d=t,p=l.child(s),new Eu(p,null,d.explicitOrderBy.slice(),d.filters.slice(),d.limit,d.limitType,d.startAt,d.endAt));var d,p;return this.getDocumentsMatchingCollectionQuery(e,c,i,r).next(u=>{u.forEach((d,p)=>{o=o.insert(d,p)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(e,t,i,r){let s;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,i.largestBatchId).next(o=>(s=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,i,s,r))).next(o=>{s.forEach((l,c)=>{const u=c.getKey();null===o.get(u)&&(o=o.insert(u,Ir.newInvalidDocument(u)))});let a=U0();return o.forEach((l,c)=>{const u=s.get(l);void 0!==u&&H0(u.mutation,c,da.empty(),Nr.now()),V0(t,c)&&(a=a.insert(l,c))}),a})}}class xue{constructor(e){this.serializer=e,this.hr=new Map,this.Pr=new Map}getBundleMetadata(e,t){return he.resolve(this.hr.get(t))}saveBundleMetadata(e,t){return this.hr.set(t.id,{id:(r=t).id,version:r.version,createTime:cs(r.createTime)}),he.resolve();var r}getNamedQuery(e,t){return he.resolve(this.Pr.get(t))}saveNamedQuery(e,t){return this.Pr.set(t.name,{name:(r=t).name,query:ZR(r.bundledQuery),readTime:cs(r.readTime)}),he.resolve();var r}}class wue{constructor(){this.overlays=new br(Rt.comparator),this.Ir=new Map}getOverlay(e,t){return he.resolve(this.overlays.get(t))}getOverlays(e,t){const i=bc();return he.forEach(t,r=>this.getOverlay(e,r).next(s=>{null!==s&&i.set(r,s)})).next(()=>i)}saveOverlays(e,t,i){return i.forEach((r,s)=>{this.ht(e,t,s)}),he.resolve()}removeOverlaysForBatchId(e,t,i){const r=this.Ir.get(i);return void 0!==r&&(r.forEach(s=>this.overlays=this.overlays.remove(s)),this.Ir.delete(i)),he.resolve()}getOverlaysForCollection(e,t,i){const r=bc(),s=t.length+1,o=new Rt(t.child("")),a=this.overlays.getIteratorFrom(o);for(;a.hasNext();){const l=a.getNext().value,c=l.getKey();if(!t.isPrefixOf(c.path))break;c.path.length===s&&l.largestBatchId>i&&r.set(l.getKey(),l)}return he.resolve(r)}getOverlaysForCollectionGroup(e,t,i,r){let s=new br((c,u)=>c-u);const o=this.overlays.getIterator();for(;o.hasNext();){const c=o.getNext().value;if(c.getKey().getCollectionGroup()===t&&c.largestBatchId>i){let u=s.get(c.largestBatchId);null===u&&(u=bc(),s=s.insert(c.largestBatchId,u)),u.set(c.getKey(),c)}}const a=bc(),l=s.getIterator();for(;l.hasNext()&&(l.getNext().value.forEach((c,u)=>a.set(c,u)),!(a.size()>=r)););return he.resolve(a)}ht(e,t,i){const r=this.overlays.get(i.key);if(null!==r){const o=this.Ir.get(r.largestBatchId).delete(i.key);this.Ir.set(r.largestBatchId,o)}this.overlays=this.overlays.insert(i.key,new jR(t,i));let s=this.Ir.get(t);void 0===s&&(s=Qn(),this.Ir.set(t,s)),this.Ir.set(t,s.add(i.key))}}class Eue{constructor(){this.sessionToken=Jr.EMPTY_BYTE_STRING}getSessionToken(e){return he.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,he.resolve()}}class sP{constructor(){this.Tr=new nr(zs.Er),this.dr=new nr(zs.Ar)}isEmpty(){return this.Tr.isEmpty()}addReference(e,t){const i=new zs(e,t);this.Tr=this.Tr.add(i),this.dr=this.dr.add(i)}Rr(e,t){e.forEach(i=>this.addReference(i,t))}removeReference(e,t){this.Vr(new zs(e,t))}mr(e,t){e.forEach(i=>this.removeReference(i,t))}gr(e){const t=new Rt(new Si([])),i=new zs(t,e),r=new zs(t,e+1),s=[];return this.dr.forEachInRange([i,r],o=>{this.Vr(o),s.push(o.key)}),s}pr(){this.Tr.forEach(e=>this.Vr(e))}Vr(e){this.Tr=this.Tr.delete(e),this.dr=this.dr.delete(e)}yr(e){const t=new Rt(new Si([])),i=new zs(t,e),r=new zs(t,e+1);let s=Qn();return this.dr.forEachInRange([i,r],o=>{s=s.add(o.key)}),s}containsKey(e){const t=new zs(e,0),i=this.Tr.firstAfterOrEqual(t);return null!==i&&e.isEqual(i.key)}}class zs{constructor(e,t){this.key=e,this.wr=t}static Er(e,t){return Rt.comparator(e.key,t.key)||Vn(e.wr,t.wr)}static Ar(e,t){return Vn(e.wr,t.wr)||Rt.comparator(e.key,t.key)}}class Tue{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.Sr=1,this.br=new nr(zs.Er)}checkEmpty(e){return he.resolve(0===this.mutationQueue.length)}addMutationBatch(e,t,i,r){const s=this.Sr;this.Sr++;const o=new GR(s,t,i,r);this.mutationQueue.push(o);for(const a of r)this.br=this.br.add(new zs(a.key,s)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return he.resolve(o)}lookupMutationBatch(e,t){return he.resolve(this.Dr(t))}getNextMutationBatchAfterBatchId(e,t){const r=this.vr(t+1),s=r<0?0:r;return he.resolve(this.mutationQueue.length>s?this.mutationQueue[s]:null)}getHighestUnacknowledgedBatchId(){return he.resolve(0===this.mutationQueue.length?-1:this.Sr-1)}getAllMutationBatches(e){return he.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const i=new zs(t,0),r=new zs(t,Number.POSITIVE_INFINITY),s=[];return this.br.forEachInRange([i,r],o=>{const a=this.Dr(o.wr);s.push(a)}),he.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(e,t){let i=new nr(Vn);return t.forEach(r=>{const s=new zs(r,0),o=new zs(r,Number.POSITIVE_INFINITY);this.br.forEachInRange([s,o],a=>{i=i.add(a.wr)})}),he.resolve(this.Cr(i))}getAllMutationBatchesAffectingQuery(e,t){const i=t.path,r=i.length+1;let s=i;Rt.isDocumentKey(s)||(s=s.child(""));const o=new zs(new Rt(s),0);let a=new nr(Vn);return this.br.forEachWhile(l=>{const c=l.key.path;return!!i.isPrefixOf(c)&&(c.length===r&&(a=a.add(l.wr)),!0)},o),he.resolve(this.Cr(a))}Cr(e){const t=[];return e.forEach(i=>{const r=this.Dr(i);null!==r&&t.push(r)}),t}removeMutationBatch(e,t){an(0===this.Fr(t.batchId,"removed")),this.mutationQueue.shift();let i=this.br;return he.forEach(t.mutations,r=>{const s=new zs(r.key,t.batchId);return i=i.delete(s),this.referenceDelegate.markPotentiallyOrphaned(e,r.key)}).next(()=>{this.br=i})}On(e){}containsKey(e,t){const i=new zs(t,0),r=this.br.firstAfterOrEqual(i);return he.resolve(t.isEqual(r&&r.key))}performConsistencyCheck(e){return he.resolve()}Fr(e,t){return this.vr(e)}vr(e){return 0===this.mutationQueue.length?0:e-this.mutationQueue[0].batchId}Dr(e){const t=this.vr(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}class Sue{constructor(e){this.Mr=e,this.docs=new br(Rt.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const i=t.key,r=this.docs.get(i),s=r?r.size:0,o=this.Mr(t);return this.docs=this.docs.insert(i,{document:t.mutableCopy(),size:o}),this.size+=o-s,this.indexManager.addToCollectionParentIndex(e,i.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const i=this.docs.get(t);return he.resolve(i?i.document.mutableCopy():Ir.newInvalidDocument(t))}getEntries(e,t){let i=ha();return t.forEach(r=>{const s=this.docs.get(r);i=i.insert(r,s?s.document.mutableCopy():Ir.newInvalidDocument(r))}),he.resolve(i)}getDocumentsMatchingQuery(e,t,i,r){let s=ha();const o=t.path,a=new Rt(o.child("")),l=this.docs.getIteratorFrom(a);for(;l.hasNext();){const{key:c,value:{document:u}}=l.getNext();if(!o.isPrefixOf(c.path))break;c.path.length>o.length+1||IR(p5(u),i)<=0||(r.has(u.key)||V0(t,u))&&(s=s.insert(u.key,u.mutableCopy()))}return he.resolve(s)}getAllFromCollectionGroup(e,t,i,r){Qt()}Or(e,t){return he.forEach(this.docs,i=>t(i))}newChangeBuffer(e){return new Aue(this)}getSize(e){return he.resolve(this.size)}}class Aue extends hG{constructor(e){super(),this.cr=e}applyChanges(e){const t=[];return this.changes.forEach((i,r)=>{r.isValidDocument()?t.push(this.cr.addEntry(e,r)):this.cr.removeEntry(i)}),he.waitFor(t)}getFromCache(e,t){return this.cr.getEntry(e,t)}getAllFromCache(e,t){return this.cr.getEntries(e,t)}}class Iue{constructor(e){this.persistence=e,this.Nr=new Tu(t=>Tf(t),F0),this.lastRemoteSnapshotVersion=fn.min(),this.highestTargetId=0,this.Lr=0,this.Br=new sP,this.targetCount=0,this.kr=Pf.Bn()}forEachTarget(e,t){return this.Nr.forEach((i,r)=>t(r)),he.resolve()}getLastRemoteSnapshotVersion(e){return he.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return he.resolve(this.Lr)}allocateTargetId(e){return this.highestTargetId=this.kr.next(),he.resolve(this.highestTargetId)}setTargetsMetadata(e,t,i){return i&&(this.lastRemoteSnapshotVersion=i),t>this.Lr&&(this.Lr=t),he.resolve()}Kn(e){this.Nr.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.kr=new Pf(t),this.highestTargetId=t),e.sequenceNumber>this.Lr&&(this.Lr=e.sequenceNumber)}addTargetData(e,t){return this.Kn(t),this.targetCount+=1,he.resolve()}updateTargetData(e,t){return this.Kn(t),he.resolve()}removeTargetData(e,t){return this.Nr.delete(t.target),this.Br.gr(t.targetId),this.targetCount-=1,he.resolve()}removeTargets(e,t,i){let r=0;const s=[];return this.Nr.forEach((o,a)=>{a.sequenceNumber<=t&&null===i.get(a.targetId)&&(this.Nr.delete(o),s.push(this.removeMatchingKeysForTargetId(e,a.targetId)),r++)}),he.waitFor(s).next(()=>r)}getTargetCount(e){return he.resolve(this.targetCount)}getTargetData(e,t){const i=this.Nr.get(t)||null;return he.resolve(i)}addMatchingKeys(e,t,i){return this.Br.Rr(t,i),he.resolve()}removeMatchingKeys(e,t,i){this.Br.mr(t,i);const r=this.persistence.referenceDelegate,s=[];return r&&t.forEach(o=>{s.push(r.markPotentiallyOrphaned(e,o))}),he.waitFor(s)}removeMatchingKeysForTargetId(e,t){return this.Br.gr(t),he.resolve()}getMatchingKeysForTargetId(e,t){const i=this.Br.yr(t);return he.resolve(i)}containsKey(e,t){return he.resolve(this.Br.containsKey(t))}}class oP{constructor(e,t){this.qr={},this.overlays={},this.Qr=new Na(0),this.Kr=!1,this.Kr=!0,this.$r=new Eue,this.referenceDelegate=e(this),this.Ur=new Iue(this),this.indexManager=new hue,this.remoteDocumentCache=new Sue(i=>this.referenceDelegate.Wr(i)),this.serializer=new G6(t),this.Gr=new xue(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Kr=!1,Promise.resolve()}get started(){return this.Kr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new wue,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let i=this.qr[e.toKey()];return i||(i=new Tue(t,this.referenceDelegate),this.qr[e.toKey()]=i),i}getGlobalsCache(){return this.$r}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Gr}runTransaction(e,t,i){Je("MemoryPersistence","Starting transaction:",e);const r=new Cue(this.Qr.next());return this.referenceDelegate.zr(),i(r).next(s=>this.referenceDelegate.jr(r).next(()=>s)).toPromise().then(s=>(r.raiseOnCommittedEvent(),s))}Hr(e,t){return he.or(Object.values(this.qr).map(i=>()=>i.containsKey(e,t)))}}class Cue extends g5{constructor(e){super(),this.currentSequenceNumber=e}}class oS{constructor(e){this.persistence=e,this.Jr=new sP,this.Yr=null}static Zr(e){return new oS(e)}get Xr(){if(this.Yr)return this.Yr;throw Qt()}addReference(e,t,i){return this.Jr.addReference(i,t),this.Xr.delete(i.toString()),he.resolve()}removeReference(e,t,i){return this.Jr.removeReference(i,t),this.Xr.add(i.toString()),he.resolve()}markPotentiallyOrphaned(e,t){return this.Xr.add(t.toString()),he.resolve()}removeTarget(e,t){this.Jr.gr(t.targetId).forEach(r=>this.Xr.add(r.toString()));const i=this.persistence.getTargetCache();return i.getMatchingKeysForTargetId(e,t.targetId).next(r=>{r.forEach(s=>this.Xr.add(s.toString()))}).next(()=>i.removeTargetData(e,t))}zr(){this.Yr=new Set}jr(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return he.forEach(this.Xr,i=>{const r=Rt.fromPath(i);return this.ei(e,r).next(s=>{s||t.removeEntry(r,fn.min())})}).next(()=>(this.Yr=null,t.apply(e)))}updateLimboDocument(e,t){return this.ei(e,t).next(i=>{i?this.Xr.delete(t.toString()):this.Xr.add(t.toString())})}Wr(e){return 0}ei(e,t){return he.or([()=>he.resolve(this.Jr.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Hr(e,t)])}}class Mue{constructor(e){this.serializer=e}O(e,t,i,r){const s=new NT("createOrUpgrade",t);var l;i<1&&r>=1&&(e.createObjectStore("owner"),(l=e).createObjectStore("mutationQueues",{keyPath:"userId"}),l.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",x5,{unique:!0}),l.createObjectStore("documentMutations"),vG(e),function(l){l.createObjectStore("remoteDocuments")}(e));let o=he.resolve();return i<3&&r>=3&&(0!==i&&(function(l){l.deleteObjectStore("targetDocuments"),l.deleteObjectStore("targets"),l.deleteObjectStore("targetGlobal")}(e),vG(e)),o=o.next(()=>function(l){const c=l.store("targetGlobal"),u={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:fn.min().toTimestamp(),targetCount:0};return c.put("targetGlobalKey",u)}(s))),i<4&&r>=4&&(0!==i&&(o=o.next(()=>function(l,c){return c.store("mutations").U().next(u=>{l.deleteObjectStore("mutations"),l.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",x5,{unique:!0});const d=c.store("mutations"),p=u.map(m=>d.put(m));return he.waitFor(p)})}(e,s))),o=o.next(()=>{!function(l){l.createObjectStore("clientMetadata",{keyPath:"clientId"})}(e)})),i<5&&r>=5&&(o=o.next(()=>this.ni(s))),i<6&&r>=6&&(o=o.next(()=>(function(l){l.createObjectStore("remoteDocumentGlobal")}(e),this.ri(s)))),i<7&&r>=7&&(o=o.next(()=>this.ii(s))),i<8&&r>=8&&(o=o.next(()=>this.si(e,s))),i<9&&r>=9&&(o=o.next(()=>{!function(l){l.objectStoreNames.contains("remoteDocumentChanges")&&l.deleteObjectStore("remoteDocumentChanges")}(e)})),i<10&&r>=10&&(o=o.next(()=>this.oi(s))),i<11&&r>=11&&(o=o.next(()=>{(function(l){l.createObjectStore("bundles",{keyPath:"bundleId"})})(e),function(l){l.createObjectStore("namedQueries",{keyPath:"name"})}(e)})),i<12&&r>=12&&(o=o.next(()=>{!function(l){const c=l.createObjectStore("documentOverlays",{keyPath:hce});c.createIndex("collectionPathOverlayIndex",fce,{unique:!1}),c.createIndex("collectionGroupOverlayIndex",pce,{unique:!1})}(e)})),i<13&&r>=13&&(o=o.next(()=>function(l){const c=l.createObjectStore("remoteDocumentsV14",{keyPath:tce});c.createIndex("documentKeyIndex",nce),c.createIndex("collectionGroupIndex",ice)}(e)).next(()=>this._i(e,s)).next(()=>e.deleteObjectStore("remoteDocuments"))),i<14&&r>=14&&(o=o.next(()=>this.ai(e,s))),i<15&&r>=15&&(o=o.next(()=>function(l){l.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),l.createObjectStore("indexState",{keyPath:lce}).createIndex("sequenceNumberIndex",cce,{unique:!1}),l.createObjectStore("indexEntries",{keyPath:uce}).createIndex("documentKeyIndex",dce,{unique:!1})}(e))),i<16&&r>=16&&(o=o.next(()=>{t.objectStore("indexState").clear()}).next(()=>{t.objectStore("indexEntries").clear()})),i<17&&r>=17&&(o=o.next(()=>{!function(l){l.createObjectStore("globals",{keyPath:"name"})}(e)})),o}ri(e){let t=0;return e.store("remoteDocuments").J((i,r)=>{t+=iS(r)}).next(()=>{const i={byteSize:t};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",i)})}ni(e){const t=e.store("mutationQueues"),i=e.store("mutations");return t.U().next(r=>he.forEach(r,s=>{const o=IDBKeyRange.bound([s.userId,-1],[s.userId,s.lastAcknowledgedBatchId]);return i.U("userMutationsIndex",o).next(a=>he.forEach(a,l=>{an(l.userId===s.userId);const c=Mf(this.serializer,l);return sG(e,s.userId,c).next(()=>{})}))}))}ii(e){const t=e.store("targetDocuments"),i=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next(r=>{const s=[];return i.J((o,a)=>{const l=new Si(o),c=[0,yo(l)];s.push(t.get(c).next(u=>u?he.resolve():t.put({targetId:0,path:yo(l),sequenceNumber:r.highestListenSequenceNumber})))}).next(()=>he.waitFor(s))})}si(e,t){e.createObjectStore("collectionParents",{keyPath:ace});const i=t.store("collectionParents"),r=new rP,s=o=>{if(r.add(o)){const a=o.lastSegment(),l=o.popLast();return i.put({collectionId:a,parent:yo(l)})}};return t.store("remoteDocuments").J({H:!0},(o,a)=>{const l=new Si(o);return s(l.popLast())}).next(()=>t.store("documentMutations").J({H:!0},([o,a,l],c)=>{const u=vc(a);return s(u.popLast())}))}oi(e){const t=e.store("targets");return t.J((i,r)=>{const s=X0(r),o=j6(this.serializer,s);return t.put(o)})}_i(e,t){const i=t.store("remoteDocuments"),r=[];return i.J((s,o)=>{const a=t.store("remoteDocumentsV14"),l=(d=o,d.document?new Rt(Si.fromString(d.document.name).popFirst(5)):d.noDocument?Rt.fromSegments(d.noDocument.path):d.unknownDocument?Rt.fromSegments(d.unknownDocument.path):Qt()).path.toArray(),c={prefixPath:l.slice(0,l.length-2),collectionGroup:l[l.length-2],documentId:l[l.length-1],readTime:o.readTime||[0,0],unknownDocument:o.unknownDocument,noDocument:o.noDocument,document:o.document,hasCommittedMutations:!!o.hasCommittedMutations};var d;r.push(a.put(c))}).next(()=>he.waitFor(r))}ai(e,t){const i=t.store("mutations"),r=fG(this.serializer),s=new oP(oS.Zr,this.serializer.ct);return i.U().next(o=>{const a=new Map;return o.forEach(l=>{var c;let u=null!==(c=a.get(l.userId))&&void 0!==c?c:Qn();Mf(this.serializer,l).keys().forEach(d=>u=u.add(d)),a.set(l.userId,u)}),he.forEach(a,(l,c)=>{const u=new Us(c),d=eS.lt(this.serializer,u),p=s.getIndexManager(u),m=rS.lt(u,this.serializer,p,s.referenceDelegate);return new _G(r,m,d,p).recalculateAndSaveOverlaysForDocumentKeys(new RR(t,Na.oe),l).next()})})}}function vG(n){n.createObjectStore("targetDocuments",{keyPath:sce}).createIndex("documentTargetsIndex",oce,{unique:!0}),n.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",rce,{unique:!0}),n.createObjectStore("targetGlobal")}const aP="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.";class lP{constructor(e,t,i,r,s,o,a,l,c,u,d=17){if(this.allowTabSynchronization=e,this.persistenceKey=t,this.clientId=i,this.ui=s,this.window=o,this.document=a,this.ci=c,this.li=u,this.hi=d,this.Qr=null,this.Kr=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Pi=null,this.inForeground=!1,this.Ii=null,this.Ti=null,this.Ei=Number.NEGATIVE_INFINITY,this.di=p=>Promise.resolve(),!lP.D())throw new Ye(Te.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new _ue(this,r),this.Ai=t+"main",this.serializer=new G6(l),this.Ri=new _c(this.Ai,this.hi,new Mue(this.serializer)),this.$r=new oue,this.Ur=new pue(this.referenceDelegate,this.serializer),this.remoteDocumentCache=fG(this.serializer),this.Gr=new sue,this.window&&this.window.localStorage?this.Vi=this.window.localStorage:(this.Vi=null,!1===u&&ls("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.mi().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new Ye(Te.FAILED_PRECONDITION,aP);return this.fi(),this.gi(),this.pi(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.Ur.getHighestSequenceNumber(e))}).then(e=>{this.Qr=new Na(e,this.ci)}).then(()=>{this.Kr=!0}).catch(e=>(this.Ri&&this.Ri.close(),Promise.reject(e)))}yi(e){var t=this;return this.di=function(){var i=(0,Me.A)(function*(r){if(t.started)return e(r)});return function(r){return i.apply(this,arguments)}}(),e(this.isPrimary)}setDatabaseDeletedListener(e){this.Ri.L(function(){var t=(0,Me.A)(function*(i){null===i.newVersion&&(yield e())});return function(i){return t.apply(this,arguments)}}())}setNetworkEnabled(e){var t=this;this.networkEnabled!==e&&(this.networkEnabled=e,this.ui.enqueueAndForget((0,Me.A)(function*(){t.started&&(yield t.mi())})))}mi(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>lS(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.wi(e).next(t=>{t||(this.isPrimary=!1,this.ui.enqueueRetryable(()=>this.di(!1)))})}).next(()=>this.Si(e)).next(t=>this.isPrimary&&!t?this.bi(e).next(()=>!1):!!t&&this.Di(e).next(()=>!0))).catch(e=>{if(Fd(e))return Je("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return Je("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.ui.enqueueRetryable(()=>this.di(e)),this.isPrimary=e})}wi(e){return J0(e).get("owner").next(t=>he.resolve(this.vi(t)))}Ci(e){return lS(e).delete(this.clientId)}Fi(){var e=this;return(0,Me.A)(function*(){if(e.isPrimary&&!e.Mi(e.Ei,18e5)){e.Ei=Date.now();const t=yield e.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",i=>{const r=Cs(i,"clientMetadata");return r.U().next(s=>{const o=e.xi(s,18e5),a=s.filter(l=>-1===o.indexOf(l));return he.forEach(a,l=>r.delete(l.clientId)).next(()=>a)})}).catch(()=>[]);if(e.Vi)for(const i of t)e.Vi.removeItem(e.Oi(i.clientId))}})()}pi(){this.Ti=this.ui.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.mi().then(()=>this.Fi()).then(()=>this.pi()))}vi(e){return!!e&&e.ownerId===this.clientId}Si(e){return this.li?he.resolve(!0):J0(e).get("owner").next(t=>{if(null!==t&&this.Mi(t.leaseTimestampMs,5e3)&&!this.Ni(t.ownerId)){if(this.vi(t)&&this.networkEnabled)return!0;if(!this.vi(t)){if(!t.allowTabSynchronization)throw new Ye(Te.FAILED_PRECONDITION,aP);return!1}}return!(!this.networkEnabled||!this.inForeground)||lS(e).U().next(i=>void 0===this.xi(i,5e3).find(r=>!(this.clientId===r.clientId||!(!this.networkEnabled&&r.networkEnabled||!this.inForeground&&r.inForeground&&this.networkEnabled===r.networkEnabled))))}).next(t=>(this.isPrimary!==t&&Je("IndexedDbPersistence",`Client ${t?"is":"is not"} eligible for a primary lease.`),t))}shutdown(){var e=this;return(0,Me.A)(function*(){e.Kr=!1,e.Li(),e.Ti&&(e.Ti.cancel(),e.Ti=null),e.Bi(),e.ki(),yield e.Ri.runTransaction("shutdown","readwrite",["owner","clientMetadata"],t=>{const i=new RR(t,Na.oe);return e.bi(i).next(()=>e.Ci(i))}),e.Ri.close(),e.qi()})()}xi(e,t){return e.filter(i=>this.Mi(i.updateTimeMs,t)&&!this.Ni(i.clientId))}Qi(){return this.runTransaction("getActiveClients","readonly",e=>lS(e).U().next(t=>this.xi(t,18e5).map(i=>i.clientId)))}get started(){return this.Kr}getGlobalsCache(){return this.$r}getMutationQueue(e,t){return rS.lt(e,this.serializer,t,this.referenceDelegate)}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new fue(e,this.serializer.ct.databaseId)}getDocumentOverlayCache(e){return eS.lt(this.serializer,e)}getBundleCache(){return this.Gr}runTransaction(e,t,i){Je("IndexedDbPersistence","Starting transaction:",e);const r="readonly"===t?"readonly":"readwrite",s=17===(l=this.hi)?_ce:16===l?gce:15===l?DR:14===l?S5:13===l?T5:12===l?mce:11===l?E5:void Qt();var l;let o;return this.Ri.runTransaction(e,r,s,a=>(o=new RR(a,this.Qr?this.Qr.next():Na.oe),"readwrite-primary"===t?this.wi(o).next(l=>!!l||this.Si(o)).next(l=>{if(!l)throw ls(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.ui.enqueueRetryable(()=>this.di(!1)),new Ye(Te.FAILED_PRECONDITION,m5);return i(o)}).next(l=>this.Di(o).next(()=>l)):this.Ki(o).next(()=>i(o)))).then(a=>(o.raiseOnCommittedEvent(),a))}Ki(e){return J0(e).get("owner").next(t=>{if(null!==t&&this.Mi(t.leaseTimestampMs,5e3)&&!this.Ni(t.ownerId)&&!this.vi(t)&&!(this.li||this.allowTabSynchronization&&t.allowTabSynchronization))throw new Ye(Te.FAILED_PRECONDITION,aP)})}Di(e){const t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return J0(e).put("owner",t)}static D(){return _c.D()}bi(e){const t=J0(e);return t.get("owner").next(i=>this.vi(i)?(Je("IndexedDbPersistence","Releasing primary lease."),t.delete("owner")):he.resolve())}Mi(e,t){const i=Date.now();return!(e<i-t||e>i&&(ls(`Detected an update time that is in the future: ${e} > ${i}`),1))}fi(){null!==this.document&&"function"==typeof this.document.addEventListener&&(this.Ii=()=>{this.ui.enqueueAndForget(()=>(this.inForeground="visible"===this.document.visibilityState,this.mi()))},this.document.addEventListener("visibilitychange",this.Ii),this.inForeground="visible"===this.document.visibilityState)}Bi(){this.Ii&&(this.document.removeEventListener("visibilitychange",this.Ii),this.Ii=null)}gi(){var e;"function"==typeof(null===(e=this.window)||void 0===e?void 0:e.addEventListener)&&(this.Pi=()=>{this.Li();const t=/(?:Version|Mobile)\/1[456]/;(0,ii.nr)()&&(navigator.appVersion.match(t)||navigator.userAgent.match(t))&&this.ui.enterRestrictedMode(!0),this.ui.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.Pi))}ki(){this.Pi&&(this.window.removeEventListener("pagehide",this.Pi),this.Pi=null)}Ni(e){var t;try{const i=null!==(null===(t=this.Vi)||void 0===t?void 0:t.getItem(this.Oi(e)));return Je("IndexedDbPersistence",`Client '${e}' ${i?"is":"is not"} zombied in LocalStorage`),i}catch(i){return ls("IndexedDbPersistence","Failed to get zombied client id.",i),!1}}Li(){if(this.Vi)try{this.Vi.setItem(this.Oi(this.clientId),String(Date.now()))}catch(e){ls("Failed to set zombie client id.",e)}}qi(){if(this.Vi)try{this.Vi.removeItem(this.Oi(this.clientId))}catch{}}Oi(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function J0(n){return Cs(n,"owner")}function lS(n){return Cs(n,"clientMetadata")}function cP(n,e){let t=n.projectId;return n.isDefaultDatabase||(t+="."+n.database),"firestore/"+e+"/"+t+"/"}class uP{constructor(e,t,i,r){this.targetId=e,this.fromCache=t,this.$i=i,this.Ui=r}static Wi(e,t){let i=Qn(),r=Qn();for(const s of t.docChanges)switch(s.type){case 0:i=i.add(s.doc.key);break;case 1:r=r.add(s.doc.key)}return new uP(e,t.fromCache,i,r)}}class Due{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}class yG{constructor(){this.Gi=!1,this.zi=!1,this.ji=100,this.Hi=(0,ii.nr)()?8:_5((0,ii.ZQ)())>0?6:4}initialize(e,t){this.Ji=e,this.indexManager=t,this.Gi=!0}getDocumentsMatchingQuery(e,t,i,r){const s={result:null};return this.Yi(e,t).next(o=>{s.result=o}).next(()=>{if(!s.result)return this.Zi(e,t,r,i).next(o=>{s.result=o})}).next(()=>{if(s.result)return;const o=new Due;return this.Xi(e,t,o).next(a=>{if(s.result=a,this.zi)return this.es(e,t,o,a.size)})}).next(()=>s.result)}es(e,t,i,r){return i.documentReadCount<this.ji?(gg()<=gc.$b.DEBUG&&Je("QueryEngine","SDK will not create cache indexes for query:",Sg(t),"since it only creates cache indexes for collection contains","more than or equal to",this.ji,"documents"),he.resolve()):(gg()<=gc.$b.DEBUG&&Je("QueryEngine","Query:",Sg(t),"scans",i.documentReadCount,"local documents and returns",r,"documents as results."),i.documentReadCount>this.Hi*r?(gg()<=gc.$b.DEBUG&&Je("QueryEngine","The SDK decides to create cache indexes for query:",Sg(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,bo(t))):he.resolve())}Yi(e,t){if(Z5(t))return he.resolve(null);let i=bo(t);return this.indexManager.getIndexType(e,i).next(r=>0===r?null:(null!==t.limit&&1===r&&(t=$T(t,null,"F"),i=bo(t)),this.indexManager.getDocumentsMatchingTarget(e,i).next(s=>{const o=Qn(...s);return this.Ji.getDocuments(e,o).next(a=>this.indexManager.getMinOffset(e,i).next(l=>{const c=this.ts(t,a);return this.ns(t,c,o,l.readTime)?this.Yi(e,$T(t,null,"F")):this.rs(e,c,t,l)}))})))}Zi(e,t,i,r){return Z5(t)||r.isEqual(fn.min())?he.resolve(null):this.Ji.getDocuments(e,i).next(s=>{const o=this.ts(t,s);return this.ns(t,o,i,r)?he.resolve(null):(gg()<=gc.$b.DEBUG&&Je("QueryEngine","Re-using previous result from %s to execute query: %s",r.toString(),Sg(t)),this.rs(e,o,t,f5(r,-1)).next(a=>a))})}ts(e,t){let i=new nr(i6(e));return t.forEach((r,s)=>{V0(e,s)&&(i=i.add(s))}),i}ns(e,t,i,r){if(null===e.limit)return!1;if(i.size!==t.size)return!0;const s="F"===e.limitType?t.last():t.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(r)>0)}Xi(e,t,i){return gg()<=gc.$b.DEBUG&&Je("QueryEngine","Using full collection scan to execute query:",Sg(t)),this.Ji.getDocumentsMatchingQuery(e,t,Oa.min(),i)}rs(e,t,i,r){return this.Ji.getDocumentsMatchingQuery(e,i,r).next(s=>(t.forEach(o=>{s=s.insert(o.key,o)}),s))}}class Rue{constructor(e,t,i,r){this.persistence=e,this.ss=t,this.serializer=r,this.os=new br(Vn),this._s=new Tu(s=>Tf(s),F0),this.us=new Map,this.cs=e.getRemoteDocumentCache(),this.Ur=e.getTargetCache(),this.Gr=e.getBundleCache(),this.ls(i)}ls(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new _G(this.cs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.cs.setIndexManager(this.indexManager),this.ss.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.os))}}function bG(n,e,t,i){return new Rue(n,e,t,i)}function xG(n,e){return dP.apply(this,arguments)}function dP(){return(dP=(0,Me.A)(function*(n,e){const t=It(n);return yield t.persistence.runTransaction("Handle user change","readonly",i=>{let r;return t.mutationQueue.getAllMutationBatches(i).next(s=>(r=s,t.ls(e),t.mutationQueue.getAllMutationBatches(i))).next(s=>{const o=[],a=[];let l=Qn();for(const c of r){o.push(c.batchId);for(const u of c.mutations)l=l.add(u.key)}for(const c of s){a.push(c.batchId);for(const u of c.mutations)l=l.add(u.key)}return t.localDocuments.getDocuments(i,l).next(c=>({hs:c,removedBatchIds:o,addedBatchIds:a}))})})})).apply(this,arguments)}function wG(n){const e=It(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.Ur.getLastRemoteSnapshotVersion(t))}function EG(n,e,t){let i=Qn(),r=Qn();return t.forEach(s=>i=i.add(s)),e.getEntries(n,i).next(s=>{let o=ha();return t.forEach((a,l)=>{const c=s.get(a);l.isFoundDocument()!==c.isFoundDocument()&&(r=r.add(a)),l.isNoDocument()&&l.version.isEqual(fn.min())?(e.removeEntry(a,l.readTime),o=o.insert(a,l)):!c.isValidDocument()||l.version.compareTo(c.version)>0||0===l.version.compareTo(c.version)&&c.hasPendingWrites?(e.addEntry(l),o=o.insert(a,l)):Je("LocalStore","Ignoring outdated watch update for ",a,". Current version:",c.version," Watch version:",l.version)}),{Ps:o,Is:r}})}function Oue(n,e){const t=It(n);return t.persistence.runTransaction("Get next mutation batch","readonly",i=>(void 0===e&&(e=-1),t.mutationQueue.getNextMutationBatchAfterBatchId(i,e)))}function Fg(n,e){const t=It(n);return t.persistence.runTransaction("Allocate target","readwrite",i=>{let r;return t.Ur.getTargetData(i,e).next(s=>s?(r=s,he.resolve(r)):t.Ur.allocateTargetId(i).next(o=>(r=new Au(e,o,"TargetPurposeListen",i.currentSequenceNumber),t.Ur.addTargetData(i,r).next(()=>r))))}).then(i=>{const r=t.os.get(i.targetId);return(null===r||i.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(t.os=t.os.insert(i.targetId,i),t._s.set(e,i.targetId)),i})}function Lg(n,e,t){return hP.apply(this,arguments)}function hP(){return(hP=(0,Me.A)(function*(n,e,t){const i=It(n),r=i.os.get(e),s=t?"readwrite":"readwrite-primary";try{t||(yield i.persistence.runTransaction("Release target",s,o=>i.persistence.referenceDelegate.removeTarget(o,r)))}catch(o){if(!Fd(o))throw o;Je("LocalStore",`Failed to update sequence numbers for target ${e}: ${o}`)}i.os=i.os.remove(e),i._s.delete(r.target)})).apply(this,arguments)}function cS(n,e,t){const i=It(n);let r=fn.min(),s=Qn();return i.persistence.runTransaction("Execute query","readwrite",o=>function(l,c,u){const d=It(l),p=d._s.get(u);return void 0!==p?he.resolve(d.os.get(p)):d.Ur.getTargetData(c,u)}(i,o,bo(e)).next(a=>{if(a)return r=a.lastLimboFreeSnapshotVersion,i.Ur.getMatchingKeysForTargetId(o,a.targetId).next(l=>{s=l})}).next(()=>i.ss.getDocumentsMatchingQuery(o,e,t?r:fn.min(),t?s:Qn())).next(a=>(AG(i,n6(e),a),{documents:a,Ts:s})))}function TG(n,e){const t=It(n),i=It(t.Ur),r=t.os.get(e);return r?Promise.resolve(r.target):t.persistence.runTransaction("Get target data","readonly",s=>i.ot(s,e).next(o=>o?o.target:null))}function SG(n,e){const t=It(n),i=t.us.get(e)||fn.min();return t.persistence.runTransaction("Get new document changes","readonly",r=>t.cs.getAllFromCollectionGroup(r,e,f5(i,-1),Number.MAX_SAFE_INTEGER)).then(r=>(AG(t,e,r),r))}function AG(n,e,t){let i=n.us.get(e)||fn.min();t.forEach((r,s)=>{s.readTime.compareTo(i)>0&&(i=s.readTime)}),n.us.set(e,i)}function fP(){return(fP=(0,Me.A)(function*(n,e,t,i){const r=It(n);let s=Qn(),o=ha();for(const c of t){const u=e.Es(c.metadata.name);c.document&&(s=s.add(u));const d=e.ds(c);d.setReadTime(e.As(c.metadata.readTime)),o=o.insert(u,d)}const a=r.cs.newChangeBuffer({trackRemovals:!0}),l=yield Fg(r,(u=i,bo(Eg(Si.fromString(`__bundle__/docs/${u}`)))));var u;return r.persistence.runTransaction("Apply bundle documents","readwrite",c=>EG(c,a,o).next(u=>(a.apply(c),u)).next(u=>r.Ur.removeMatchingKeysForTargetId(c,l.targetId).next(()=>r.Ur.addMatchingKeys(c,s,l.targetId)).next(()=>r.localDocuments.getLocalViewOfDocuments(c,u.Ps,u.Is)).next(()=>u.Ps)))})).apply(this,arguments)}function Fue(n,e){return pP.apply(this,arguments)}function pP(){return(pP=(0,Me.A)(function*(n,e,t=Qn()){const i=yield Fg(n,bo(ZR(e.bundledQuery))),r=It(n);return r.persistence.runTransaction("Save named query","readwrite",s=>{const o=cs(e.readTime);if(i.snapshotVersion.compareTo(o)>=0)return r.Gr.saveNamedQuery(s,e);const a=i.withResumeToken(Jr.EMPTY_BYTE_STRING,o);return r.os=r.os.insert(a.targetId,a),r.Ur.updateTargetData(s,a).next(()=>r.Ur.removeMatchingKeysForTargetId(s,i.targetId)).next(()=>r.Ur.addMatchingKeys(s,t,i.targetId)).next(()=>r.Gr.saveNamedQuery(s,e))})})).apply(this,arguments)}function IG(n,e){return`firestore_clients_${n}_${e}`}function CG(n,e,t){let i=`firestore_mutations_${n}_${t}`;return e.isAuthenticated()&&(i+=`_${e.uid}`),i}function mP(n,e){return`firestore_targets_${n}_${e}`}class uS{constructor(e,t,i,r){this.user=e,this.batchId=t,this.state=i,this.error=r}static Rs(e,t,i){const r=JSON.parse(i);let s,o="object"==typeof r&&-1!==["pending","acknowledged","rejected"].indexOf(r.state)&&(void 0===r.error||"object"==typeof r.error);return o&&r.error&&(o="string"==typeof r.error.message&&"string"==typeof r.error.code,o&&(s=new Ye(r.error.code,r.error.message))),o?new uS(e,t,r.state,s):(ls("SharedClientState",`Failed to parse mutation state for ID '${t}': ${i}`),null)}Vs(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class eb{constructor(e,t,i){this.targetId=e,this.state=t,this.error=i}static Rs(e,t){const i=JSON.parse(t);let r,s="object"==typeof i&&-1!==["not-current","current","rejected"].indexOf(i.state)&&(void 0===i.error||"object"==typeof i.error);return s&&i.error&&(s="string"==typeof i.error.message&&"string"==typeof i.error.code,s&&(r=new Ye(i.error.code,i.error.message))),s?new eb(e,i.state,r):(ls("SharedClientState",`Failed to parse target state for ID '${e}': ${t}`),null)}Vs(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class dS{constructor(e,t){this.clientId=e,this.activeTargetIds=t}static Rs(e,t){const i=JSON.parse(t);let r="object"==typeof i&&i.activeTargetIds instanceof Array,s=BR();for(let o=0;r&&o<i.activeTargetIds.length;++o)r=y5(i.activeTargetIds[o]),s=s.add(i.activeTargetIds[o]);return r?new dS(e,s):(ls("SharedClientState",`Failed to parse client data for instance '${e}': ${t}`),null)}}class gP{constructor(e,t){this.clientId=e,this.onlineState=t}static Rs(e){const t=JSON.parse(e);return"object"==typeof t&&-1!==["Unknown","Online","Offline"].indexOf(t.onlineState)&&"string"==typeof t.clientId?new gP(t.clientId,t.onlineState):(ls("SharedClientState",`Failed to parse online state: ${e}`),null)}}class _P{constructor(){this.activeTargetIds=BR()}fs(e){this.activeTargetIds=this.activeTargetIds.add(e)}gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Vs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class vP{constructor(e,t,i,r,s){this.window=e,this.ui=t,this.persistenceKey=i,this.ps=r,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.ys=this.ws.bind(this),this.Ss=new br(Vn),this.started=!1,this.bs=[];const o=i.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=s,this.Ds=IG(this.persistenceKey,this.ps),this.vs=`firestore_sequence_number_${this.persistenceKey}`,this.Ss=this.Ss.insert(this.ps,new _P),this.Cs=new RegExp(`^firestore_clients_${o}_([^_]*)$`),this.Fs=new RegExp(`^firestore_mutations_${o}_(\\d+)(?:_(.*))?$`),this.Ms=new RegExp(`^firestore_targets_${o}_(\\d+)$`),this.xs=`firestore_online_state_${this.persistenceKey}`,this.Os=function(l){return`firestore_bundle_loaded_v2_${l}`}(this.persistenceKey),this.window.addEventListener("storage",this.ys)}static D(e){return!(!e||!e.localStorage)}start(){var e=this;return(0,Me.A)(function*(){const t=yield e.syncEngine.Qi();for(const r of t){if(r===e.ps)continue;const s=e.getItem(IG(e.persistenceKey,r));if(s){const o=dS.Rs(r,s);o&&(e.Ss=e.Ss.insert(o.clientId,o))}}e.Ns();const i=e.storage.getItem(e.xs);if(i){const r=e.Ls(i);r&&e.Bs(r)}for(const r of e.bs)e.ws(r);e.bs=[],e.window.addEventListener("pagehide",()=>e.shutdown()),e.started=!0})()}writeSequenceNumber(e){this.setItem(this.vs,JSON.stringify(e))}getAllActiveQueryTargets(){return this.ks(this.Ss)}isActiveQueryTarget(e){let t=!1;return this.Ss.forEach((i,r)=>{r.activeTargetIds.has(e)&&(t=!0)}),t}addPendingMutation(e){this.qs(e,"pending")}updateMutationState(e,t,i){this.qs(e,t,i),this.Qs(e)}addLocalQueryTarget(e,t=!0){let i="not-current";if(this.isActiveQueryTarget(e)){const r=this.storage.getItem(mP(this.persistenceKey,e));if(r){const s=eb.Rs(e,r);s&&(i=s.state)}}return t&&this.Ks.fs(e),this.Ns(),i}removeLocalQueryTarget(e){this.Ks.gs(e),this.Ns()}isLocalQueryTarget(e){return this.Ks.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(mP(this.persistenceKey,e))}updateQueryState(e,t,i){this.$s(e,t,i)}handleUserChange(e,t,i){t.forEach(r=>{this.Qs(r)}),this.currentUser=e,i.forEach(r=>{this.addPendingMutation(r)})}setOnlineState(e){this.Us(e)}notifyBundleLoaded(e){this.Ws(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.ys),this.removeItem(this.Ds),this.started=!1)}getItem(e){const t=this.storage.getItem(e);return Je("SharedClientState","READ",e,t),t}setItem(e,t){Je("SharedClientState","SET",e,t),this.storage.setItem(e,t)}removeItem(e){Je("SharedClientState","REMOVE",e),this.storage.removeItem(e)}ws(e){var t=this;const i=e;if(i.storageArea===this.storage){if(Je("SharedClientState","EVENT",i.key,i.newValue),i.key===this.Ds)return void ls("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.ui.enqueueRetryable((0,Me.A)(function*(){if(t.started){if(null!==i.key)if(t.Cs.test(i.key)){if(null==i.newValue){const r=t.Gs(i.key);return t.zs(r,null)}{const r=t.js(i.key,i.newValue);if(r)return t.zs(r.clientId,r)}}else if(t.Fs.test(i.key)){if(null!==i.newValue){const r=t.Hs(i.key,i.newValue);if(r)return t.Js(r)}}else if(t.Ms.test(i.key)){if(null!==i.newValue){const r=t.Ys(i.key,i.newValue);if(r)return t.Zs(r)}}else if(i.key===t.xs){if(null!==i.newValue){const r=t.Ls(i.newValue);if(r)return t.Bs(r)}}else if(i.key===t.vs){const r=function(o){let a=Na.oe;if(null!=o)try{const l=JSON.parse(o);an("number"==typeof l),a=l}catch(l){ls("SharedClientState","Failed to read sequence number from WebStorage",l)}return a}(i.newValue);r!==Na.oe&&t.sequenceNumberHandler(r)}else if(i.key===t.Os){const r=t.Xs(i.newValue);yield Promise.all(r.map(s=>t.syncEngine.eo(s)))}}else t.bs.push(i)}))}}get Ks(){return this.Ss.get(this.ps)}Ns(){this.setItem(this.Ds,this.Ks.Vs())}qs(e,t,i){const r=new uS(this.currentUser,e,t,i),s=CG(this.persistenceKey,this.currentUser,e);this.setItem(s,r.Vs())}Qs(e){const t=CG(this.persistenceKey,this.currentUser,e);this.removeItem(t)}Us(e){this.storage.setItem(this.xs,JSON.stringify({clientId:this.ps,onlineState:e}))}$s(e,t,i){const r=mP(this.persistenceKey,e),s=new eb(e,t,i);this.setItem(r,s.Vs())}Ws(e){const t=JSON.stringify(Array.from(e));this.setItem(this.Os,t)}Gs(e){const t=this.Cs.exec(e);return t?t[1]:null}js(e,t){const i=this.Gs(e);return dS.Rs(i,t)}Hs(e,t){const i=this.Fs.exec(e),r=Number(i[1]);return uS.Rs(new Us(void 0!==i[2]?i[2]:null),r,t)}Ys(e,t){const i=this.Ms.exec(e),r=Number(i[1]);return eb.Rs(r,t)}Ls(e){return gP.Rs(e)}Xs(e){return JSON.parse(e)}Js(e){var t=this;return(0,Me.A)(function*(){if(e.user.uid===t.currentUser.uid)return t.syncEngine.no(e.batchId,e.state,e.error);Je("SharedClientState",`Ignoring mutation for non-active user ${e.user.uid}`)})()}Zs(e){return this.syncEngine.ro(e.targetId,e.state,e.error)}zs(e,t){const i=t?this.Ss.insert(e,t):this.Ss.remove(e),r=this.ks(this.Ss),s=this.ks(i),o=[],a=[];return s.forEach(l=>{r.has(l)||o.push(l)}),r.forEach(l=>{s.has(l)||a.push(l)}),this.syncEngine.io(o,a).then(()=>{this.Ss=i})}Bs(e){this.Ss.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}ks(e){let t=BR();return e.forEach((i,r)=>{t=t.unionWith(r.activeTargetIds)}),t}}class MG{constructor(){this.so=new _P,this.oo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,i){}addLocalQueryTarget(e,t=!0){return t&&this.so.fs(e),this.oo[e]||"not-current"}updateQueryState(e,t,i){this.oo[e]=t}removeLocalQueryTarget(e){this.so.gs(e)}isLocalQueryTarget(e){return this.so.activeTargetIds.has(e)}clearQueryState(e){delete this.oo[e]}getAllActiveQueryTargets(){return this.so.activeTargetIds}isActiveQueryTarget(e){return this.so.activeTargetIds.has(e)}start(){return this.so=new _P,Promise.resolve()}handleUserChange(e,t,i){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class Lue{_o(e){}shutdown(){}}class DG{constructor(){this.ao=()=>this.uo(),this.co=()=>this.lo(),this.ho=[],this.Po()}_o(e){this.ho.push(e)}shutdown(){window.removeEventListener("online",this.ao),window.removeEventListener("offline",this.co)}Po(){window.addEventListener("online",this.ao),window.addEventListener("offline",this.co)}uo(){Je("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.ho)e(0)}lo(){Je("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.ho)e(1)}static D(){return typeof window<"u"&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}let hS=null;function yP(){return null===hS?hS=268435456+Math.round(2147483648*Math.random()):hS++,"0x"+hS.toString(16)}const Vue={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class Uue{constructor(e){this.Io=e.Io,this.To=e.To}Eo(e){this.Ao=e}Ro(e){this.Vo=e}mo(e){this.fo=e}onMessage(e){this.po=e}close(){this.To()}send(e){this.Io(e)}yo(){this.Ao()}wo(){this.Vo()}So(e){this.fo(e)}bo(e){this.po(e)}}const wo="WebChannelConnection";class Bue extends class{constructor(t){this.databaseInfo=t,this.databaseId=t.databaseId;const i=t.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),s=encodeURIComponent(this.databaseId.database);this.Do=i+"://"+t.host,this.vo=`projects/${r}/databases/${s}`,this.Co="(default)"===this.databaseId.database?`project_id=${r}`:`project_id=${r}&database_id=${s}`}get Fo(){return!1}Mo(t,i,r,s,o){const a=yP(),l=this.xo(t,i.toUriEncodedString());Je("RestConnection",`Sending RPC '${t}' ${a}:`,l,r);const c={"google-cloud-resource-prefix":this.vo,"x-goog-request-params":this.Co};return this.Oo(c,s,o),this.No(t,l,c,r).then(u=>(Je("RestConnection",`Received RPC '${t}' ${a}: `,u),u),u=>{throw ka("RestConnection",`RPC '${t}' ${a} failed with error: `,u,"url: ",l,"request:",r),u})}Lo(t,i,r,s,o,a){return this.Mo(t,i,r,s,o)}Oo(t,i,r){t["X-Goog-Api-Client"]="gl-js/ fire/"+mg,t["Content-Type"]="text/plain",this.databaseInfo.appId&&(t["X-Firebase-GMPID"]=this.databaseInfo.appId),i&&i.headers.forEach((s,o)=>t[o]=s),r&&r.headers.forEach((s,o)=>t[o]=s)}xo(t,i){return`${this.Do}/v1/${i}:${Vue[t]}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}No(e,t,i,r){const s=yP();return new Promise((o,a)=>{const l=new i5;l.setWithCredentials(!0),l.listenOnce(r5.COMPLETE,()=>{try{switch(l.getLastErrorCode()){case OT.NO_ERROR:const u=l.getResponseJson();Je(wo,`XHR for RPC '${e}' ${s} received:`,JSON.stringify(u)),o(u);break;case OT.TIMEOUT:Je(wo,`RPC '${e}' ${s} timed out`),a(new Ye(Te.DEADLINE_EXCEEDED,"Request time out"));break;case OT.HTTP_ERROR:const d=l.getStatus();if(Je(wo,`RPC '${e}' ${s} failed with status:`,d,"response text:",l.getResponseText()),d>0){let p=l.getResponseJson();Array.isArray(p)&&(p=p[0]);const m=p?.error;if(m&&m.status&&m.message){const v=function(b){const w=b.toLowerCase().replace(/_/g,"-");return Object.values(Te).indexOf(w)>=0?w:Te.UNKNOWN}(m.status);a(new Ye(v,m.message))}else a(new Ye(Te.UNKNOWN,"Server responded with status "+l.getStatus()))}else a(new Ye(Te.UNAVAILABLE,"Connection failed."));break;default:Qt()}}finally{Je(wo,`RPC '${e}' ${s} completed.`)}});const c=JSON.stringify(r);Je(wo,`RPC '${e}' ${s} sending request:`,r),l.send(t,"POST",c,i,15)})}Bo(e,t,i){const r=yP(),s=[this.Do,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=a5(),a=o5(),l={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},c=this.longPollingOptions.timeoutSeconds;void 0!==c&&(l.longPollingTimeout=Math.round(1e3*c)),this.useFetchStreams&&(l.useFetchStreams=!0),this.Oo(l.initMessageHeaders,t,i),l.encodeInitMessageHeaders=!0;const u=s.join("");Je(wo,`Creating RPC '${e}' stream ${r}: ${u}`,l);const d=o.createWebChannel(u,l);let p=!1,m=!1;const v=new Uue({Io:b=>{m?Je(wo,`Not sending because RPC '${e}' stream ${r} is closed:`,b):(p||(Je(wo,`Opening RPC '${e}' stream ${r} transport.`),d.open(),p=!0),Je(wo,`RPC '${e}' stream ${r} sending:`,b),d.send(b))},To:()=>d.close()}),x=(b,w,T)=>{b.listen(w,S=>{try{T(S)}catch(A){setTimeout(()=>{throw A},0)}})};return x(d,A0.EventType.OPEN,()=>{m||(Je(wo,`RPC '${e}' stream ${r} transport opened.`),v.yo())}),x(d,A0.EventType.CLOSE,()=>{m||(m=!0,Je(wo,`RPC '${e}' stream ${r} transport closed`),v.So())}),x(d,A0.EventType.ERROR,b=>{m||(m=!0,ka(wo,`RPC '${e}' stream ${r} transport errored:`,b),v.So(new Ye(Te.UNAVAILABLE,"The operation could not be completed")))}),x(d,A0.EventType.MESSAGE,b=>{var w;if(!m){const T=b.data[0];an(!!T);const A=T.error||(null===(w=T[0])||void 0===w?void 0:w.error);if(A){Je(wo,`RPC '${e}' stream ${r} received error:`,A);const V=A.status;let F=function(I){const M=vs[I];if(void 0!==M)return x6(M)}(V),P=A.message;void 0===F&&(F=Te.INTERNAL,P="Unknown error status: "+V+" with message "+A.message),m=!0,v.So(new Ye(F,P)),d.close()}else Je(wo,`RPC '${e}' stream ${r} received:`,T),v.bo(T)}}),x(a,s5.STAT_EVENT,b=>{b.stat===TR.PROXY?Je(wo,`RPC '${e}' stream ${r} detected buffering proxy`):b.stat===TR.NOPROXY&&Je(wo,`RPC '${e}' stream ${r} detected no buffering proxy`)}),setTimeout(()=>{v.wo()},0),v}}function RG(){return typeof window<"u"?window:null}function fS(){return typeof document<"u"?document:null}function tb(n){return new Xce(n,!0)}class bP{constructor(e,t,i=1e3,r=1.5,s=6e4){this.ui=e,this.timerId=t,this.ko=i,this.qo=r,this.Qo=s,this.Ko=0,this.$o=null,this.Uo=Date.now(),this.reset()}reset(){this.Ko=0}Wo(){this.Ko=this.Qo}Go(e){this.cancel();const t=Math.floor(this.Ko+this.zo()),i=Math.max(0,Date.now()-this.Uo),r=Math.max(0,t-i);r>0&&Je("ExponentialBackoff",`Backing off for ${r} ms (base delay: ${this.Ko} ms, delay with jitter: ${t} ms, last attempt: ${i} ms ago)`),this.$o=this.ui.enqueueAfterDelay(this.timerId,r,()=>(this.Uo=Date.now(),e())),this.Ko*=this.qo,this.Ko<this.ko&&(this.Ko=this.ko),this.Ko>this.Qo&&(this.Ko=this.Qo)}jo(){null!==this.$o&&(this.$o.skipDelay(),this.$o=null)}cancel(){null!==this.$o&&(this.$o.cancel(),this.$o=null)}zo(){return(Math.random()-.5)*this.Ko}}class PG{constructor(e,t,i,r,s,o,a,l){this.ui=e,this.Ho=i,this.Jo=r,this.connection=s,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=a,this.listener=l,this.state=0,this.Yo=0,this.Zo=null,this.Xo=null,this.stream=null,this.e_=0,this.t_=new bP(e,t)}n_(){return 1===this.state||5===this.state||this.r_()}r_(){return 2===this.state||3===this.state}start(){this.e_=0,4!==this.state?this.auth():this.i_()}stop(){var e=this;return(0,Me.A)(function*(){e.n_()&&(yield e.close(0))})()}s_(){this.state=0,this.t_.reset()}o_(){this.r_()&&null===this.Zo&&(this.Zo=this.ui.enqueueAfterDelay(this.Ho,6e4,()=>this.__()))}a_(e){this.u_(),this.stream.send(e)}__(){var e=this;return(0,Me.A)(function*(){if(e.r_())return e.close(0)})()}u_(){this.Zo&&(this.Zo.cancel(),this.Zo=null)}c_(){this.Xo&&(this.Xo.cancel(),this.Xo=null)}close(e,t){var i=this;return(0,Me.A)(function*(){i.u_(),i.c_(),i.t_.cancel(),i.Yo++,4!==e?i.t_.reset():t&&t.code===Te.RESOURCE_EXHAUSTED?(ls(t.toString()),ls("Using maximum backoff delay to prevent overloading the backend."),i.t_.Wo()):t&&t.code===Te.UNAUTHENTICATED&&3!==i.state&&(i.authCredentialsProvider.invalidateToken(),i.appCheckCredentialsProvider.invalidateToken()),null!==i.stream&&(i.l_(),i.stream.close(),i.stream=null),i.state=e,yield i.listener.mo(t)})()}l_(){}auth(){this.state=1;const e=this.h_(this.Yo),t=this.Yo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([i,r])=>{this.Yo===t&&this.P_(i,r)},i=>{e(()=>{const r=new Ye(Te.UNKNOWN,"Fetching auth token failed: "+i.message);return this.I_(r)})})}P_(e,t){const i=this.h_(this.Yo);this.stream=this.T_(e,t),this.stream.Eo(()=>{i(()=>this.listener.Eo())}),this.stream.Ro(()=>{i(()=>(this.state=2,this.Xo=this.ui.enqueueAfterDelay(this.Jo,1e4,()=>(this.r_()&&(this.state=3),Promise.resolve())),this.listener.Ro()))}),this.stream.mo(r=>{i(()=>this.I_(r))}),this.stream.onMessage(r=>{i(()=>1==++this.e_?this.E_(r):this.onNext(r))})}i_(){var e=this;this.state=5,this.t_.Go((0,Me.A)(function*(){e.state=0,e.start()}))}I_(e){return Je("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}h_(e){return t=>{this.ui.enqueueAndForget(()=>this.Yo===e?t():(Je("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class zue extends PG{constructor(e,t,i,r,s,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,i,r,o),this.serializer=s}T_(e,t){return this.connection.Bo("Listen",e,t)}E_(e){return this.onNext(e)}onNext(e){this.t_.reset();const t=function Qce(n,e){let t;if("targetChange"in e){const i="NO_CHANGE"===(c=e.targetChange.targetChangeType||"NO_CHANGE")?0:"ADD"===c?1:"REMOVE"===c?2:"CURRENT"===c?3:"RESET"===c?4:Qt(),r=e.targetChange.targetIds||[],s=function(c,u){return c.useProto3Json?(an(void 0===u||"string"==typeof u),Jr.fromBase64String(u||"")):(an(void 0===u||u instanceof Buffer||u instanceof Uint8Array),Jr.fromUint8Array(u||new Uint8Array))}(n,e.targetChange.resumeToken),o=e.targetChange.cause,a=o&&function(c){const u=void 0===c.code?Te.UNKNOWN:x6(c.code);return new Ye(u,c.message||"")}(o);t=new A6(i,r,s,a||null)}else if("documentChange"in e){const i=e.documentChange,r=xc(n,i.document.name),s=cs(i.document.updateTime),o=i.document.createTime?cs(i.document.createTime):fn.min(),a=new eo({mapValue:{fields:i.document.fields}}),l=Ir.newFoundDocument(r,s,o,a);t=new QT(i.targetIds||[],i.removedTargetIds||[],l.key,l)}else if("documentDelete"in e){const i=e.documentDelete,r=xc(n,i.document),s=i.readTime?cs(i.readTime):fn.min(),o=Ir.newNoDocument(r,s);t=new QT([],i.removedTargetIds||[],o.key,o)}else if("documentRemove"in e){const i=e.documentRemove,r=xc(n,i.document);t=new QT([],i.removedTargetIds||[],r,null)}else{if(!("filter"in e))return Qt();{const i=e.filter,{count:r=0,unchangedNames:s}=i,o=new Hce(r,s);t=new S6(i.targetId,o)}}var c;return t}(this.serializer,e),i=function(s){if(!("targetChange"in s))return fn.min();const o=s.targetChange;return o.targetIds&&o.targetIds.length?fn.min():o.readTime?cs(o.readTime):fn.min()}(e);return this.listener.d_(t,i)}A_(e){const t={};t.database=YR(this.serializer),t.addTarget=function(s,o){let a;const l=o.target;if(a=WT(l)?{documents:L6(s,l)}:{query:ZT(s,l)._t},a.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){a.resumeToken=D6(s,o.resumeToken);const c=qR(s,o.expectedCount);null!==c&&(a.expectedCount=c)}else if(o.snapshotVersion.compareTo(fn.min())>0){a.readTime=Dg(s,o.snapshotVersion.toTimestamp());const c=qR(s,o.expectedCount);null!==c&&(a.expectedCount=c)}return a}(this.serializer,e);const i=function Jce(n,e){const t=function(r){switch(r){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Qt()}}(e.purpose);return null==t?null:{"goog-listen-tags":t}}(0,e);i&&(t.labels=i),this.a_(t)}R_(e){const t={};t.database=YR(this.serializer),t.removeTarget=e,this.a_(t)}}class Hue extends PG{constructor(e,t,i,r,s,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,i,r,o),this.serializer=s}get V_(){return this.e_>0}start(){this.lastStreamToken=void 0,super.start()}l_(){this.V_&&this.m_([])}T_(e,t){return this.connection.Bo("Write",e,t)}E_(e){return an(!!e.streamToken),this.lastStreamToken=e.streamToken,an(!e.writeResults||0===e.writeResults.length),this.listener.f_()}onNext(e){an(!!e.streamToken),this.lastStreamToken=e.streamToken,this.t_.reset();const t=function Zce(n,e){return n&&n.length>0?(an(void 0!==e),n.map(t=>function(r,s){let o=cs(r.updateTime?r.updateTime:s);return o.isEqual(fn.min())&&(o=cs(s)),new Uce(o,r.transformResults||[])}(t,e))):[]}(e.writeResults,e.commitTime),i=cs(e.commitTime);return this.listener.g_(i,t)}p_(){const e={};e.database=YR(this.serializer),this.a_(e)}m_(e){const t={streamToken:this.lastStreamToken,writes:e.map(i=>q0(this.serializer,i))};this.a_(t)}}class Gue extends class{}{constructor(e,t,i,r){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=i,this.serializer=r,this.y_=!1}w_(){if(this.y_)throw new Ye(Te.FAILED_PRECONDITION,"The client has already been terminated.")}Mo(e,t,i,r){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,o])=>this.connection.Mo(e,KR(t,i),r,s,o)).catch(s=>{throw"FirebaseError"===s.name?(s.code===Te.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new Ye(Te.UNKNOWN,s.toString())})}Lo(e,t,i,r,s){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,a])=>this.connection.Lo(e,KR(t,i),r,o,a,s)).catch(o=>{throw"FirebaseError"===o.name?(o.code===Te.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new Ye(Te.UNKNOWN,o.toString())})}terminate(){this.y_=!0,this.connection.terminate()}}class Wue{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.S_=0,this.b_=null,this.D_=!0}v_(){0===this.S_&&(this.C_("Unknown"),this.b_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.b_=null,this.F_("Backend didn't respond within 10 seconds."),this.C_("Offline"),Promise.resolve())))}M_(e){"Online"===this.state?this.C_("Unknown"):(this.S_++,this.S_>=1&&(this.x_(),this.F_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.C_("Offline")))}set(e){this.x_(),this.S_=0,"Online"===e&&(this.D_=!1),this.C_(e)}C_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}F_(e){const t=`Could not reach Cloud Firestore backend. ${e}\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.D_?(ls(t),this.D_=!1):Je("OnlineStateTracker",t)}x_(){null!==this.b_&&(this.b_.cancel(),this.b_=null)}}class jue{constructor(e,t,i,r,s){var o=this;this.localStore=e,this.datastore=t,this.asyncQueue=i,this.remoteSyncer={},this.O_=[],this.N_=new Map,this.L_=new Set,this.B_=[],this.k_=s,this.k_._o(a=>{i.enqueueAndForget((0,Me.A)(function*(){var l;qd(o)&&(Je("RemoteStore","Restarting streams for network reachability change."),yield(l=(0,Me.A)(function*(u){const d=It(u);d.L_.add(4),yield Vg(d),d.q_.set("Unknown"),d.L_.delete(4),yield nb(d)}),function c(u){return l.apply(this,arguments)})(o))}))}),this.q_=new Wue(i,r)}}function nb(n){return xP.apply(this,arguments)}function xP(){return(xP=(0,Me.A)(function*(n){if(qd(n))for(const e of n.B_)yield e(!0)})).apply(this,arguments)}function Vg(n){return wP.apply(this,arguments)}function wP(){return(wP=(0,Me.A)(function*(n){for(const e of n.B_)yield e(!1)})).apply(this,arguments)}function pS(n,e){const t=It(n);t.N_.has(e.targetId)||(t.N_.set(e.targetId,e),SP(t)?TP(t):zg(t).r_()&&EP(t,e))}function Ug(n,e){const t=It(n),i=zg(t);t.N_.delete(e),i.r_()&&kG(t,e),0===t.N_.size&&(i.r_()?i.o_():qd(t)&&t.q_.set("Unknown"))}function EP(n,e){if(n.Q_.xe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(fn.min())>0){const t=n.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}zg(n).A_(e)}function kG(n,e){n.Q_.xe(e),zg(n).R_(e)}function TP(n){n.Q_=new Wce({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),ot:e=>n.N_.get(e)||null,tt:()=>n.datastore.serializer.databaseId}),zg(n).start(),n.q_.v_()}function SP(n){return qd(n)&&!zg(n).n_()&&n.N_.size>0}function qd(n){return 0===It(n).L_.size}function OG(n){n.Q_=void 0}function $ue(n){return AP.apply(this,arguments)}function AP(){return(AP=(0,Me.A)(function*(n){n.q_.set("Online")})).apply(this,arguments)}function que(n){return IP.apply(this,arguments)}function IP(){return(IP=(0,Me.A)(function*(n){n.N_.forEach((e,t)=>{EP(n,e)})})).apply(this,arguments)}function Xue(n,e){return CP.apply(this,arguments)}function CP(){return(CP=(0,Me.A)(function*(n,e){OG(n),SP(n)?(n.q_.M_(e),TP(n)):n.q_.set("Unknown")})).apply(this,arguments)}function Kue(n,e,t){return MP.apply(this,arguments)}function MP(){return MP=(0,Me.A)(function*(n,e,t){if(n.q_.set("Online"),e instanceof A6&&2===e.state&&e.cause)try{yield(i=(0,Me.A)(function*(s,o){const a=o.cause;for(const l of o.targetIds)s.N_.has(l)&&(yield s.remoteSyncer.rejectListen(l,a),s.N_.delete(l),s.Q_.removeTarget(l))}),function r(s,o){return i.apply(this,arguments)})(n,e)}catch(i){Je("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),i),yield mS(n,i)}else if(e instanceof QT?n.Q_.Ke(e):e instanceof S6?n.Q_.He(e):n.Q_.We(e),!t.isEqual(fn.min()))try{const i=yield wG(n.localStore);t.compareTo(i)>=0&&(yield function(s,o){const a=s.Q_.rt(o);return a.targetChanges.forEach((l,c)=>{if(l.resumeToken.approximateByteSize()>0){const u=s.N_.get(c);u&&s.N_.set(c,u.withResumeToken(l.resumeToken,o))}}),a.targetMismatches.forEach((l,c)=>{const u=s.N_.get(l);if(!u)return;s.N_.set(l,u.withResumeToken(Jr.EMPTY_BYTE_STRING,u.snapshotVersion)),kG(s,l);const d=new Au(u.target,l,c,u.sequenceNumber);EP(s,d)}),s.remoteSyncer.applyRemoteEvent(a)}(n,t))}catch(i){Je("RemoteStore","Failed to raise snapshot:",i),yield mS(n,i)}var i}),MP.apply(this,arguments)}function mS(n,e,t){return DP.apply(this,arguments)}function DP(){return(DP=(0,Me.A)(function*(n,e,t){if(!Fd(e))throw e;n.L_.add(1),yield Vg(n),n.q_.set("Offline"),t||(t=()=>wG(n.localStore)),n.asyncQueue.enqueueRetryable((0,Me.A)(function*(){Je("RemoteStore","Retrying IndexedDB access"),yield t(),n.L_.delete(1),yield nb(n)}))})).apply(this,arguments)}function NG(n,e){return e().catch(t=>mS(n,t,e))}function Bg(n){return RP.apply(this,arguments)}function RP(){return(RP=(0,Me.A)(function*(n){const e=It(n),t=Xd(e);let i=e.O_.length>0?e.O_[e.O_.length-1].batchId:-1;for(;Yue(e);)try{const r=yield Oue(e.localStore,i);if(null===r){0===e.O_.length&&t.o_();break}i=r.batchId,Que(e,r)}catch(r){yield mS(e,r)}FG(e)&&LG(e)})).apply(this,arguments)}function Yue(n){return qd(n)&&n.O_.length<10}function Que(n,e){n.O_.push(e);const t=Xd(n);t.r_()&&t.V_&&t.m_(e.mutations)}function FG(n){return qd(n)&&!Xd(n).n_()&&n.O_.length>0}function LG(n){Xd(n).start()}function Zue(n){return PP.apply(this,arguments)}function PP(){return(PP=(0,Me.A)(function*(n){Xd(n).p_()})).apply(this,arguments)}function Jue(n){return kP.apply(this,arguments)}function kP(){return(kP=(0,Me.A)(function*(n){const e=Xd(n);for(const t of n.O_)e.m_(t.mutations)})).apply(this,arguments)}function ede(n,e,t){return OP.apply(this,arguments)}function OP(){return(OP=(0,Me.A)(function*(n,e,t){const i=n.O_.shift(),r=WR.from(i,e,t);yield NG(n,()=>n.remoteSyncer.applySuccessfulWrite(r)),yield Bg(n)})).apply(this,arguments)}function tde(n,e){return NP.apply(this,arguments)}function NP(){return NP=(0,Me.A)(function*(n,e){var t;e&&Xd(n).V_&&(yield(t=(0,Me.A)(function*(r,s){if(b6(a=s.code)&&a!==Te.ABORTED){const o=r.O_.shift();Xd(r).s_(),yield NG(r,()=>r.remoteSyncer.rejectFailedWrite(o.batchId,s)),yield Bg(r)}var a}),function i(r,s){return t.apply(this,arguments)})(n,e)),FG(n)&&LG(n)}),NP.apply(this,arguments)}function VG(n,e){return FP.apply(this,arguments)}function FP(){return(FP=(0,Me.A)(function*(n,e){const t=It(n);t.asyncQueue.verifyOperationInProgress(),Je("RemoteStore","RemoteStore received new credentials");const i=qd(t);t.L_.add(3),yield Vg(t),i&&t.q_.set("Unknown"),yield t.remoteSyncer.handleCredentialChange(e),t.L_.delete(3),yield nb(t)})).apply(this,arguments)}function LP(n,e){return VP.apply(this,arguments)}function VP(){return(VP=(0,Me.A)(function*(n,e){const t=It(n);e?(t.L_.delete(2),yield nb(t)):e||(t.L_.add(2),yield Vg(t),t.q_.set("Unknown"))})).apply(this,arguments)}function zg(n){return n.K_||(n.K_=function(t,i,r){const s=It(t);return s.w_(),new zue(i,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,r)}(n.datastore,n.asyncQueue,{Eo:$ue.bind(null,n),Ro:que.bind(null,n),mo:Xue.bind(null,n),d_:Kue.bind(null,n)}),n.B_.push(function(){var e=(0,Me.A)(function*(t){t?(n.K_.s_(),SP(n)?TP(n):n.q_.set("Unknown")):(yield n.K_.stop(),OG(n))});return function(t){return e.apply(this,arguments)}}())),n.K_}function Xd(n){return n.U_||(n.U_=function(t,i,r){const s=It(t);return s.w_(),new Hue(i,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,r)}(n.datastore,n.asyncQueue,{Eo:()=>Promise.resolve(),Ro:Zue.bind(null,n),mo:tde.bind(null,n),f_:Jue.bind(null,n),g_:ede.bind(null,n)}),n.B_.push(function(){var e=(0,Me.A)(function*(t){t?(n.U_.s_(),yield Bg(n)):(yield n.U_.stop(),n.O_.length>0&&(Je("RemoteStore",`Stopping write stream with ${n.O_.length} pending writes`),n.O_=[]))});return function(t){return e.apply(this,arguments)}}())),n.U_}class UP{constructor(e,t,i,r,s){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=i,this.op=r,this.removalCallback=s,this.deferred=new Bs,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,t,i,r,s){const o=Date.now()+i,a=new UP(e,t,o,r,s);return a.start(i),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new Ye(Te.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Hg(n,e){if(ls("AsyncQueue",`${e}: ${n}`),Fd(n))return new Ye(Te.UNAVAILABLE,`${e}: ${n}`);throw n}class Gg{constructor(e){this.comparator=e?(t,i)=>e(t,i)||Rt.comparator(t.key,i.key):(t,i)=>Rt.comparator(t.key,i.key),this.keyedMap=U0(),this.sortedSet=new br(this.comparator)}static emptySet(e){return new Gg(e.comparator)}has(e){return null!=this.keyedMap.get(e)}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,i)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof Gg)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),i=e.sortedSet.getIterator();for(;t.hasNext();){const r=t.getNext().key,s=i.getNext().key;if(!r.isEqual(s))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}copy(e,t){const i=new Gg;return i.comparator=this.comparator,i.keyedMap=e,i.sortedSet=t,i}}class UG{constructor(){this.W_=new br(Rt.comparator)}track(e){const t=e.doc.key,i=this.W_.get(t);i?0!==e.type&&3===i.type?this.W_=this.W_.insert(t,e):3===e.type&&1!==i.type?this.W_=this.W_.insert(t,{type:i.type,doc:e.doc}):2===e.type&&2===i.type?this.W_=this.W_.insert(t,{type:2,doc:e.doc}):2===e.type&&0===i.type?this.W_=this.W_.insert(t,{type:0,doc:e.doc}):1===e.type&&0===i.type?this.W_=this.W_.remove(t):1===e.type&&2===i.type?this.W_=this.W_.insert(t,{type:1,doc:i.doc}):0===e.type&&1===i.type?this.W_=this.W_.insert(t,{type:2,doc:e.doc}):Qt():this.W_=this.W_.insert(t,e)}G_(){const e=[];return this.W_.inorderTraversal((t,i)=>{e.push(i)}),e}}class Wg{constructor(e,t,i,r,s,o,a,l,c){this.query=e,this.docs=t,this.oldDocs=i,this.docChanges=r,this.mutatedKeys=s,this.fromCache=o,this.syncStateChanged=a,this.excludesMetadataChanges=l,this.hasCachedResults=c}static fromInitialDocuments(e,t,i,r,s){const o=[];return t.forEach(a=>{o.push({type:0,doc:a})}),new Wg(e,t,Gg.emptySet(t),o,i,r,!0,!1,s)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&L0(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,i=e.docChanges;if(t.length!==i.length)return!1;for(let r=0;r<t.length;r++)if(t[r].type!==i[r].type||!t[r].doc.isEqual(i[r].doc))return!1;return!0}}class nde{constructor(){this.z_=void 0,this.j_=[]}H_(){return this.j_.some(e=>e.J_())}}class ide{constructor(){this.queries=BG(),this.onlineState="Unknown",this.Y_=new Set}terminate(){!function(t,i){const r=It(t),s=r.queries;r.queries=BG(),s.forEach((o,a)=>{for(const l of a.j_)l.onError(i)})}(this,new Ye(Te.ABORTED,"Firestore shutting down"))}}function BG(){return new Tu(n=>t6(n),L0)}function BP(n,e){return zP.apply(this,arguments)}function zP(){return(zP=(0,Me.A)(function*(n,e){const t=It(n);let i=3;const r=e.query;let s=t.queries.get(r);s?!s.H_()&&e.J_()&&(i=2):(s=new nde,i=e.J_()?0:1);try{switch(i){case 0:s.z_=yield t.onListen(r,!0);break;case 1:s.z_=yield t.onListen(r,!1);break;case 2:yield t.onFirstRemoteStoreListen(r)}}catch(o){const a=Hg(o,`Initialization of query '${Sg(e.query)}' failed`);return void e.onError(a)}t.queries.set(r,s),s.j_.push(e),e.Z_(t.onlineState),s.z_&&e.X_(s.z_)&&WP(t)})).apply(this,arguments)}function HP(n,e){return GP.apply(this,arguments)}function GP(){return(GP=(0,Me.A)(function*(n,e){const t=It(n),i=e.query;let r=3;const s=t.queries.get(i);if(s){const o=s.j_.indexOf(e);o>=0&&(s.j_.splice(o,1),0===s.j_.length?r=e.J_()?0:1:!s.H_()&&e.J_()&&(r=2))}switch(r){case 0:return t.queries.delete(i),t.onUnlisten(i,!0);case 1:return t.queries.delete(i),t.onUnlisten(i,!1);case 2:return t.onLastRemoteStoreUnlisten(i);default:return}})).apply(this,arguments)}function rde(n,e){const t=It(n);let i=!1;for(const r of e){const o=t.queries.get(r.query);if(o){for(const a of o.j_)a.X_(r)&&(i=!0);o.z_=r}}i&&WP(t)}function sde(n,e,t){const i=It(n),r=i.queries.get(e);if(r)for(const s of r.j_)s.onError(t);i.queries.delete(e)}function WP(n){n.Y_.forEach(e=>{e.next()})}var jP,zG;(zG=jP||(jP={})).ea="default",zG.Cache="cache";class $P{constructor(e,t,i){this.query=e,this.ta=t,this.na=!1,this.ra=null,this.onlineState="Unknown",this.options=i||{}}X_(e){if(!this.options.includeMetadataChanges){const i=[];for(const r of e.docChanges)3!==r.type&&i.push(r);e=new Wg(e.query,e.docs,e.oldDocs,i,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.na?this.ia(e)&&(this.ta.next(e),t=!0):this.sa(e,this.onlineState)&&(this.oa(e),t=!0),this.ra=e,t}onError(e){this.ta.error(e)}Z_(e){this.onlineState=e;let t=!1;return this.ra&&!this.na&&this.sa(this.ra,e)&&(this.oa(this.ra),t=!0),t}sa(e,t){return!e.fromCache||!this.J_()||(!this.options._a||!("Offline"!==t))&&(!e.docs.isEmpty()||e.hasCachedResults||"Offline"===t)}ia(e){return e.docChanges.length>0||!!(e.syncStateChanged||this.ra&&this.ra.hasPendingWrites!==e.hasPendingWrites)&&!0===this.options.includeMetadataChanges}oa(e){e=Wg.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.na=!0,this.ta.next(e)}J_(){return this.options.source!==jP.Cache}}class ode{constructor(e,t){this.aa=e,this.byteLength=t}ua(){return"metadata"in this.aa}}class HG{constructor(e){this.serializer=e}Es(e){return xc(this.serializer,e)}ds(e){return e.metadata.exists?F6(this.serializer,e.document,!1):Ir.newNoDocument(this.Es(e.metadata.name),this.As(e.metadata.readTime))}As(e){return cs(e)}}class ade{constructor(e,t,i){this.ca=e,this.localStore=t,this.serializer=i,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=GG(e)}la(e){this.progress.bytesLoaded+=e.byteLength;let t=this.progress.documentsLoaded;if(e.aa.namedQuery)this.queries.push(e.aa.namedQuery);else if(e.aa.documentMetadata){this.documents.push({metadata:e.aa.documentMetadata}),e.aa.documentMetadata.exists||++t;const i=Si.fromString(e.aa.documentMetadata.name);this.collectionGroups.add(i.get(i.length-2))}else e.aa.document&&(this.documents[this.documents.length-1].document=e.aa.document,++t);return t!==this.progress.documentsLoaded?(this.progress.documentsLoaded=t,Object.assign({},this.progress)):null}ha(e){const t=new Map,i=new HG(this.serializer);for(const r of e)if(r.metadata.queries){const s=i.Es(r.metadata.name);for(const o of r.metadata.queries){const a=(t.get(o)||Qn()).add(s);t.set(o,a)}}return t}complete(){var e=this;return(0,Me.A)(function*(){const t=yield function Nue(n,e,t,i){return fP.apply(this,arguments)}(e.localStore,new HG(e.serializer),e.documents,e.ca.id),i=e.ha(e.documents);for(const r of e.queries)yield Fue(e.localStore,r,i.get(r.name));return e.progress.taskState="Success",{progress:e.progress,Pa:e.collectionGroups,Ia:t}})()}}function GG(n){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:n.totalDocuments,totalBytes:n.totalBytes}}class WG{constructor(e){this.key=e}}class jG{constructor(e){this.key=e}}class $G{constructor(e,t){this.query=e,this.Ta=t,this.Ea=null,this.hasCachedResults=!1,this.current=!1,this.da=Qn(),this.mutatedKeys=Qn(),this.Aa=i6(e),this.Ra=new Gg(this.Aa)}get Va(){return this.Ta}ma(e,t){const i=t?t.fa:new UG,r=t?t.Ra:this.Ra;let s=t?t.mutatedKeys:this.mutatedKeys,o=r,a=!1;const l="F"===this.query.limitType&&r.size===this.query.limit?r.last():null,c="L"===this.query.limitType&&r.size===this.query.limit?r.first():null;if(e.inorderTraversal((u,d)=>{const p=r.get(u),m=V0(this.query,d)?d:null,v=!!p&&this.mutatedKeys.has(p.key),x=!!m&&(m.hasLocalMutations||this.mutatedKeys.has(m.key)&&m.hasCommittedMutations);let b=!1;p&&m?p.data.isEqual(m.data)?v!==x&&(i.track({type:3,doc:m}),b=!0):this.ga(p,m)||(i.track({type:2,doc:m}),b=!0,(l&&this.Aa(m,l)>0||c&&this.Aa(m,c)<0)&&(a=!0)):!p&&m?(i.track({type:0,doc:m}),b=!0):p&&!m&&(i.track({type:1,doc:p}),b=!0,(l||c)&&(a=!0)),b&&(m?(o=o.add(m),s=x?s.add(u):s.delete(u)):(o=o.delete(u),s=s.delete(u)))}),null!==this.query.limit)for(;o.size>this.query.limit;){const u="F"===this.query.limitType?o.last():o.first();o=o.delete(u.key),s=s.delete(u.key),i.track({type:1,doc:u})}return{Ra:o,fa:i,ns:a,mutatedKeys:s}}ga(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,i,r){const s=this.Ra;this.Ra=e.Ra,this.mutatedKeys=e.mutatedKeys;const o=e.fa.G_();o.sort((u,d)=>function(m,v){const x=b=>{switch(b){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Qt()}};return x(m)-x(v)}(u.type,d.type)||this.Aa(u.doc,d.doc)),this.pa(i),r=null!=r&&r;const a=t&&!r?this.ya():[],l=0===this.da.size&&this.current&&!r?1:0,c=l!==this.Ea;return this.Ea=l,0!==o.length||c?{snapshot:new Wg(this.query,e.Ra,s,o,e.mutatedKeys,0===l,c,!1,!!i&&i.resumeToken.approximateByteSize()>0),wa:a}:{wa:a}}Z_(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({Ra:this.Ra,fa:new UG,mutatedKeys:this.mutatedKeys,ns:!1},!1)):{wa:[]}}Sa(e){return!this.Ta.has(e)&&!!this.Ra.has(e)&&!this.Ra.get(e).hasLocalMutations}pa(e){e&&(e.addedDocuments.forEach(t=>this.Ta=this.Ta.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.Ta=this.Ta.delete(t)),this.current=e.current)}ya(){if(!this.current)return[];const e=this.da;this.da=Qn(),this.Ra.forEach(i=>{this.Sa(i.key)&&(this.da=this.da.add(i.key))});const t=[];return e.forEach(i=>{this.da.has(i)||t.push(new jG(i))}),this.da.forEach(i=>{e.has(i)||t.push(new WG(i))}),t}ba(e){this.Ta=e.Ts,this.da=Qn();const t=this.ma(e.documents);return this.applyChanges(t,!0)}Da(){return Wg.fromInitialDocuments(this.query,this.Ra,this.mutatedKeys,0===this.Ea,this.hasCachedResults)}}class lde{constructor(e,t,i){this.query=e,this.targetId=t,this.view=i}}class cde{constructor(e){this.key=e,this.va=!1}}class ude{constructor(e,t,i,r,s,o){this.localStore=e,this.remoteStore=t,this.eventManager=i,this.sharedClientState=r,this.currentUser=s,this.maxConcurrentLimboResolutions=o,this.Ca={},this.Fa=new Tu(a=>t6(a),L0),this.Ma=new Map,this.xa=new Set,this.Oa=new br(Rt.comparator),this.Na=new Map,this.La=new sP,this.Ba={},this.ka=new Map,this.qa=Pf.kn(),this.onlineState="Unknown",this.Qa=void 0}get isPrimaryClient(){return!0===this.Qa}}function dde(n,e){return qP.apply(this,arguments)}function qP(){return(qP=(0,Me.A)(function*(n,e,t=!0){const i=gS(n);let r;const s=i.Fa.get(e);return s?(i.sharedClientState.addLocalQueryTarget(s.targetId),r=s.view.Da()):r=yield qG(i,e,t,!0),r})).apply(this,arguments)}function hde(n,e){return XP.apply(this,arguments)}function XP(){return(XP=(0,Me.A)(function*(n,e){const t=gS(n);yield qG(t,e,!0,!1)})).apply(this,arguments)}function qG(n,e,t,i){return KP.apply(this,arguments)}function KP(){return(KP=(0,Me.A)(function*(n,e,t,i){const r=yield Fg(n.localStore,bo(e)),s=r.targetId,o=n.sharedClientState.addLocalQueryTarget(s,t);let a;return i&&(a=yield YP(n,e,s,"current"===o,r.resumeToken)),n.isPrimaryClient&&t&&pS(n.remoteStore,r),a})).apply(this,arguments)}function YP(n,e,t,i,r){return QP.apply(this,arguments)}function QP(){return QP=(0,Me.A)(function*(n,e,t,i,r){n.Ka=(d,p,m)=>{return(v=(0,Me.A)(function*(b,w,T,S){let A=w.view.ma(T);A.ns&&(A=yield cS(b.localStore,w.query,!1).then(({documents:D})=>w.view.ma(D,A)));const V=S&&S.targetChanges.get(w.targetId),F=S&&null!=S.targetMismatches.get(w.targetId),P=w.view.applyChanges(A,b.isPrimaryClient,V,F);return lk(b,w.targetId,P.wa),P.snapshot}),function x(b,w,T,S){return v.apply(this,arguments)})(n,d,p,m);var v};const s=yield cS(n.localStore,e,!0),o=new $G(e,s.Ts),a=o.ma(s.documents),l=j0.createSynthesizedTargetChangeForCurrentChange(t,i&&"Offline"!==n.onlineState,r),c=o.applyChanges(a,n.isPrimaryClient,l);lk(n,t,c.wa);const u=new lde(e,t,o);return n.Fa.set(e,u),n.Ma.has(t)?n.Ma.get(t).push(e):n.Ma.set(t,[e]),c.snapshot}),QP.apply(this,arguments)}function fde(n,e,t){return ZP.apply(this,arguments)}function ZP(){return(ZP=(0,Me.A)(function*(n,e,t){const i=It(n),r=i.Fa.get(e),s=i.Ma.get(r.targetId);if(s.length>1)return i.Ma.set(r.targetId,s.filter(o=>!L0(o,e))),void i.Fa.delete(e);i.isPrimaryClient?(i.sharedClientState.removeLocalQueryTarget(r.targetId),i.sharedClientState.isActiveQueryTarget(r.targetId)||(yield Lg(i.localStore,r.targetId,!1).then(()=>{i.sharedClientState.clearQueryState(r.targetId),t&&Ug(i.remoteStore,r.targetId),jg(i,r.targetId)}).catch(Nd))):(jg(i,r.targetId),yield Lg(i.localStore,r.targetId,!0))})).apply(this,arguments)}function pde(n,e){return JP.apply(this,arguments)}function JP(){return(JP=(0,Me.A)(function*(n,e){const t=It(n),i=t.Fa.get(e),r=t.Ma.get(i.targetId);t.isPrimaryClient&&1===r.length&&(t.sharedClientState.removeLocalQueryTarget(i.targetId),Ug(t.remoteStore,i.targetId))})).apply(this,arguments)}function ek(){return(ek=(0,Me.A)(function*(n,e,t){const i=yk(n);try{const r=yield function(o,a){const l=It(o),c=Nr.now(),u=a.reduce((m,v)=>m.add(v.key),Qn());let d,p;return l.persistence.runTransaction("Locally write mutations","readwrite",m=>{let v=ha(),x=Qn();return l.cs.getEntries(m,u).next(b=>{v=b,v.forEach((w,T)=>{T.isValidDocument()||(x=x.add(w))})}).next(()=>l.localDocuments.getOverlayedDocuments(m,v)).next(b=>{d=b;const w=[];for(const T of a){const S=zce(T,d.get(T.key).overlayedDocument);null!=S&&w.push(new Su(T.key,S,U5(S.value.mapValue),Lr.exists(!0)))}return l.mutationQueue.addMutationBatch(m,c,w,a)}).next(b=>{p=b;const w=b.applyToLocalDocumentSet(d,x);return l.documentOverlayCache.saveOverlays(m,b.batchId,w)})}).then(()=>({batchId:p.batchId,changes:s6(d)}))}(i.localStore,e);i.sharedClientState.addPendingMutation(r.batchId),function(o,a,l){let c=o.Ba[o.currentUser.toKey()];c||(c=new br(Vn)),c=c.insert(a,l),o.Ba[o.currentUser.toKey()]=c}(i,r.batchId,t),yield Iu(i,r.changes),yield Bg(i.remoteStore)}catch(r){const s=Hg(r,"Failed to persist write");t.reject(s)}})).apply(this,arguments)}function XG(n,e){return tk.apply(this,arguments)}function tk(){return(tk=(0,Me.A)(function*(n,e){const t=It(n);try{const i=yield function kue(n,e){const t=It(n),i=e.snapshotVersion;let r=t.os;return t.persistence.runTransaction("Apply remote event","readwrite-primary",s=>{const o=t.cs.newChangeBuffer({trackRemovals:!0});r=t.os;const a=[];e.targetChanges.forEach((u,d)=>{const p=r.get(d);if(!p)return;a.push(t.Ur.removeMatchingKeys(s,u.removedDocuments,d).next(()=>t.Ur.addMatchingKeys(s,u.addedDocuments,d)));let m=p.withSequenceNumber(s.currentSequenceNumber);var x,b,w;null!==e.targetMismatches.get(d)?m=m.withResumeToken(Jr.EMPTY_BYTE_STRING,fn.min()).withLastLimboFreeSnapshotVersion(fn.min()):u.resumeToken.approximateByteSize()>0&&(m=m.withResumeToken(u.resumeToken,i)),r=r.insert(d,m),b=m,w=u,(0===(x=p).resumeToken.approximateByteSize()||b.snapshotVersion.toMicroseconds()-x.snapshotVersion.toMicroseconds()>=3e8||w.addedDocuments.size+w.modifiedDocuments.size+w.removedDocuments.size>0)&&a.push(t.Ur.updateTargetData(s,m))});let l=ha(),c=Qn();if(e.documentUpdates.forEach(u=>{e.resolvedLimboDocuments.has(u)&&a.push(t.persistence.referenceDelegate.updateLimboDocument(s,u))}),a.push(EG(s,o,e.documentUpdates).next(u=>{l=u.Ps,c=u.Is})),!i.isEqual(fn.min())){const u=t.Ur.getLastRemoteSnapshotVersion(s).next(d=>t.Ur.setTargetsMetadata(s,s.currentSequenceNumber,i));a.push(u)}return he.waitFor(a).next(()=>o.apply(s)).next(()=>t.localDocuments.getLocalViewOfDocuments(s,l,c)).next(()=>l)}).then(s=>(t.os=r,s))}(t.localStore,e);e.targetChanges.forEach((r,s)=>{const o=t.Na.get(s);o&&(an(r.addedDocuments.size+r.modifiedDocuments.size+r.removedDocuments.size<=1),r.addedDocuments.size>0?o.va=!0:r.modifiedDocuments.size>0?an(o.va):r.removedDocuments.size>0&&(an(o.va),o.va=!1))}),yield Iu(t,i,e)}catch(i){yield Nd(i)}})).apply(this,arguments)}function KG(n,e,t){const i=It(n);if(i.isPrimaryClient&&0===t||!i.isPrimaryClient&&1===t){const r=[];i.Fa.forEach((s,o)=>{const a=o.view.Z_(e);a.snapshot&&r.push(a.snapshot)}),function(o,a){const l=It(o);l.onlineState=a;let c=!1;l.queries.forEach((u,d)=>{for(const p of d.j_)p.Z_(a)&&(c=!0)}),c&&WP(l)}(i.eventManager,e),r.length&&i.Ca.d_(r),i.onlineState=e,i.isPrimaryClient&&i.sharedClientState.setOnlineState(e)}}function gde(n,e,t){return nk.apply(this,arguments)}function nk(){return(nk=(0,Me.A)(function*(n,e,t){const i=It(n);i.sharedClientState.updateQueryState(e,"rejected",t);const r=i.Na.get(e),s=r&&r.key;if(s){let o=new br(Rt.comparator);o=o.insert(s,Ir.newNoDocument(s,fn.min()));const a=Qn().add(s),l=new W0(fn.min(),new Map,new br(Vn),o,a);yield XG(i,l),i.Oa=i.Oa.remove(s),i.Na.delete(e),ck(i)}else yield Lg(i.localStore,e,!1).then(()=>jg(i,e,t)).catch(Nd)})).apply(this,arguments)}function _de(n,e){return ik.apply(this,arguments)}function ik(){return(ik=(0,Me.A)(function*(n,e){const t=It(n),i=e.batch.batchId;try{const r=yield function Pue(n,e){const t=It(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",i=>{const r=e.batch.keys(),s=t.cs.newChangeBuffer({trackRemovals:!0});return function(a,l,c,u){const d=c.batch,p=d.keys();let m=he.resolve();return p.forEach(v=>{m=m.next(()=>u.getEntry(l,v)).next(x=>{const b=c.docVersions.get(v);an(null!==b),x.version.compareTo(b)<0&&(d.applyToRemoteDocument(x,c),x.isValidDocument()&&(x.setReadTime(c.commitVersion),u.addEntry(x)))})}),m.next(()=>a.mutationQueue.removeMutationBatch(l,d))}(t,i,e,s).next(()=>s.apply(i)).next(()=>t.mutationQueue.performConsistencyCheck(i)).next(()=>t.documentOverlayCache.removeOverlaysForBatchId(i,r,e.batch.batchId)).next(()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(i,function(a){let l=Qn();for(let c=0;c<a.mutationResults.length;++c)a.mutationResults[c].transformResults.length>0&&(l=l.add(a.batch.mutations[c].key));return l}(e))).next(()=>t.localDocuments.getDocuments(i,r))})}(t.localStore,e);ak(t,i,null),ok(t,i),t.sharedClientState.updateMutationState(i,"acknowledged"),yield Iu(t,r)}catch(r){yield Nd(r)}})).apply(this,arguments)}function vde(n,e,t){return rk.apply(this,arguments)}function rk(){return(rk=(0,Me.A)(function*(n,e,t){const i=It(n);try{const r=yield function(o,a){const l=It(o);return l.persistence.runTransaction("Reject batch","readwrite-primary",c=>{let u;return l.mutationQueue.lookupMutationBatch(c,a).next(d=>(an(null!==d),u=d.keys(),l.mutationQueue.removeMutationBatch(c,d))).next(()=>l.mutationQueue.performConsistencyCheck(c)).next(()=>l.documentOverlayCache.removeOverlaysForBatchId(c,u,a)).next(()=>l.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(c,u)).next(()=>l.localDocuments.getDocuments(c,u))})}(i.localStore,e);ak(i,e,t),ok(i,e),i.sharedClientState.updateMutationState(e,"rejected",t),yield Iu(i,r)}catch(r){yield Nd(r)}})).apply(this,arguments)}function sk(){return(sk=(0,Me.A)(function*(n,e){const t=It(n);qd(t.remoteStore)||Je("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{const i=yield function(o){const a=It(o);return a.persistence.runTransaction("Get highest unacknowledged batch id","readonly",l=>a.mutationQueue.getHighestUnacknowledgedBatchId(l))}(t.localStore);if(-1===i)return void e.resolve();const r=t.ka.get(i)||[];r.push(e),t.ka.set(i,r)}catch(i){const r=Hg(i,"Initialization of waitForPendingWrites() operation failed");e.reject(r)}})).apply(this,arguments)}function ok(n,e){(n.ka.get(e)||[]).forEach(t=>{t.resolve()}),n.ka.delete(e)}function ak(n,e,t){const i=It(n);let r=i.Ba[i.currentUser.toKey()];if(r){const s=r.get(e);s&&(t?s.reject(t):s.resolve(),r=r.remove(e)),i.Ba[i.currentUser.toKey()]=r}}function jg(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(const i of n.Ma.get(e))n.Fa.delete(i),t&&n.Ca.$a(i,t);n.Ma.delete(e),n.isPrimaryClient&&n.La.gr(e).forEach(i=>{n.La.containsKey(i)||YG(n,i)})}function YG(n,e){n.xa.delete(e.path.canonicalString());const t=n.Oa.get(e);null!==t&&(Ug(n.remoteStore,t),n.Oa=n.Oa.remove(e),n.Na.delete(t),ck(n))}function lk(n,e,t){for(const i of t)i instanceof WG?(n.La.addReference(i.key,e),bde(n,i)):i instanceof jG?(Je("SyncEngine","Document no longer in limbo: "+i.key),n.La.removeReference(i.key,e),n.La.containsKey(i.key)||YG(n,i.key)):Qt()}function bde(n,e){const t=e.key,i=t.path.canonicalString();n.Oa.get(t)||n.xa.has(i)||(Je("SyncEngine","New document in limbo: "+t),n.xa.add(i),ck(n))}function ck(n){for(;n.xa.size>0&&n.Oa.size<n.maxConcurrentLimboResolutions;){const e=n.xa.values().next().value;n.xa.delete(e);const t=new Rt(Si.fromString(e)),i=n.qa.next();n.Na.set(i,new cde(t)),n.Oa=n.Oa.insert(t,i),pS(n.remoteStore,new Au(bo(Eg(t.path)),i,"TargetPurposeLimboResolution",Na.oe))}}function Iu(n,e,t){return uk.apply(this,arguments)}function uk(){return uk=(0,Me.A)(function*(n,e,t){const i=It(n),r=[],s=[],o=[];var a;i.Fa.isEmpty()||(i.Fa.forEach((a,l)=>{o.push(i.Ka(l,e,t).then(c=>{var u;if((c||t)&&i.isPrimaryClient){const d=c?!c.fromCache:null===(u=t?.targetChanges.get(l.targetId))||void 0===u?void 0:u.current;i.sharedClientState.updateQueryState(l.targetId,d?"current":"not-current")}if(c){r.push(c);const d=uP.Wi(l.targetId,c);s.push(d)}}))}),yield Promise.all(o),i.Ca.d_(r),yield(a=(0,Me.A)(function*(c,u){const d=It(c);try{yield d.persistence.runTransaction("notifyLocalViewChanges","readwrite",p=>he.forEach(u,m=>he.forEach(m.$i,v=>d.persistence.referenceDelegate.addReference(p,m.targetId,v)).next(()=>he.forEach(m.Ui,v=>d.persistence.referenceDelegate.removeReference(p,m.targetId,v)))))}catch(p){if(!Fd(p))throw p;Je("LocalStore","Failed to update sequence numbers: "+p)}for(const p of u){const m=p.targetId;if(!p.fromCache){const v=d.os.get(m),b=v.withLastLimboFreeSnapshotVersion(v.snapshotVersion);d.os=d.os.insert(m,b)}}}),function l(c,u){return a.apply(this,arguments)})(i.localStore,s))}),uk.apply(this,arguments)}function xde(n,e){return dk.apply(this,arguments)}function dk(){return(dk=(0,Me.A)(function*(n,e){const t=It(n);if(!t.currentUser.isEqual(e)){Je("SyncEngine","User change. New user:",e.toKey());const i=yield xG(t.localStore,e);t.currentUser=e,(s=t).ka.forEach(a=>{a.forEach(l=>{l.reject(new Ye(Te.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))})}),s.ka.clear(),t.sharedClientState.handleUserChange(e,i.removedBatchIds,i.addedBatchIds),yield Iu(t,i.hs)}var s})).apply(this,arguments)}function wde(n,e){const t=It(n),i=t.Na.get(e);if(i&&i.va)return Qn().add(i.key);{let r=Qn();const s=t.Ma.get(e);if(!s)return r;for(const o of s){const a=t.Fa.get(o);r=r.unionWith(a.view.Va)}return r}}function Ede(n,e){return hk.apply(this,arguments)}function hk(){return(hk=(0,Me.A)(function*(n,e){const t=It(n),i=yield cS(t.localStore,e.query,!0),r=e.view.ba(i);return t.isPrimaryClient&&lk(t,e.targetId,r.wa),r})).apply(this,arguments)}function Tde(n,e){return fk.apply(this,arguments)}function fk(){return(fk=(0,Me.A)(function*(n,e){const t=It(n);return SG(t.localStore,e).then(i=>Iu(t,i))})).apply(this,arguments)}function Sde(n,e,t,i){return pk.apply(this,arguments)}function pk(){return(pk=(0,Me.A)(function*(n,e,t,i){const r=It(n),s=yield function(a,l){const c=It(a),u=It(c.mutationQueue);return c.persistence.runTransaction("Lookup mutation documents","readonly",d=>u.Mn(d,l).next(p=>p?c.localDocuments.getDocuments(d,p):he.resolve(null)))}(r.localStore,e);var l;null!==s?("pending"===t?yield Bg(r.remoteStore):"acknowledged"===t||"rejected"===t?(ak(r,e,i||null),ok(r,e),l=e,It(It(r.localStore).mutationQueue).On(l)):Qt(),yield Iu(r,s)):Je("SyncEngine","Cannot apply mutation batch with id: "+e)})).apply(this,arguments)}function mk(){return(mk=(0,Me.A)(function*(n,e){const t=It(n);if(gS(t),yk(t),!0===e&&!0!==t.Qa){const i=t.sharedClientState.getAllActiveQueryTargets(),r=yield QG(t,i.toArray());t.Qa=!0,yield LP(t.remoteStore,!0);for(const s of r)pS(t.remoteStore,s)}else if(!1===e&&!1!==t.Qa){const i=[];let r=Promise.resolve();t.Ma.forEach((s,o)=>{t.sharedClientState.isLocalQueryTarget(o)?i.push(o):r=r.then(()=>(jg(t,o),Lg(t.localStore,o,!0))),Ug(t.remoteStore,o)}),yield r,yield QG(t,i),function(o){const a=It(o);a.Na.forEach((l,c)=>{Ug(a.remoteStore,c)}),a.La.pr(),a.Na=new Map,a.Oa=new br(Rt.comparator)}(t),t.Qa=!1,yield LP(t.remoteStore,!1)}})).apply(this,arguments)}function QG(n,e,t){return gk.apply(this,arguments)}function gk(){return(gk=(0,Me.A)(function*(n,e,t){const i=It(n),r=[],s=[];for(const o of e){let a;const l=i.Ma.get(o);if(l&&0!==l.length){a=yield Fg(i.localStore,bo(l[0]));for(const c of l){const u=i.Fa.get(c),d=yield Ede(i,u);d.snapshot&&s.push(d.snapshot)}}else{const c=yield TG(i.localStore,o);a=yield Fg(i.localStore,c),yield YP(i,ZG(c),o,!1,a.resumeToken)}r.push(a)}return i.Ca.d_(s),r})).apply(this,arguments)}function ZG(n){return Q5(n.path,n.collectionGroup,n.orderBy,n.filters,n.limit,"F",n.startAt,n.endAt)}function Ide(n){return t=It(n).localStore,It(It(t).persistence).Qi();var t}function Cde(n,e,t,i){return _k.apply(this,arguments)}function _k(){return(_k=(0,Me.A)(function*(n,e,t,i){const r=It(n);if(r.Qa)return void Je("SyncEngine","Ignoring unexpected query state notification.");const s=r.Ma.get(e);if(s&&s.length>0)switch(t){case"current":case"not-current":{const o=yield SG(r.localStore,n6(s[0])),a=W0.createSynthesizedRemoteEventForCurrentChange(e,"current"===t,Jr.EMPTY_BYTE_STRING);yield Iu(r,o,a);break}case"rejected":yield Lg(r.localStore,e,!0),jg(r,e,i);break;default:Qt()}})).apply(this,arguments)}function Mde(n,e,t){return vk.apply(this,arguments)}function vk(){return(vk=(0,Me.A)(function*(n,e,t){const i=gS(n);if(i.Qa){for(const r of e){if(i.Ma.has(r)&&i.sharedClientState.isActiveQueryTarget(r)){Je("SyncEngine","Adding an already active target "+r);continue}const s=yield TG(i.localStore,r),o=yield Fg(i.localStore,s);yield YP(i,ZG(s),o.targetId,!1,o.resumeToken),pS(i.remoteStore,o)}for(const r of t)i.Ma.has(r)&&(yield Lg(i.localStore,r,!1).then(()=>{Ug(i.remoteStore,r),jg(i,r)}).catch(Nd))}})).apply(this,arguments)}function gS(n){const e=It(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=XG.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=wde.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=gde.bind(null,e),e.Ca.d_=rde.bind(null,e.eventManager),e.Ca.$a=sde.bind(null,e.eventManager),e}function yk(n){const e=It(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=_de.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=vde.bind(null,e),e}let $g=(()=>{class n{constructor(){this.kind="memory",this.synchronizeTabs=!1}initialize(t){var i=this;return(0,Me.A)(function*(){i.serializer=tb(t.databaseInfo.databaseId),i.sharedClientState=i.Wa(t),i.persistence=i.Ga(t),yield i.persistence.start(),i.localStore=i.za(t),i.gcScheduler=i.ja(t,i.localStore),i.indexBackfillerScheduler=i.Ha(t,i.localStore)})()}ja(t,i){return null}Ha(t,i){return null}za(t){return bG(this.persistence,new yG,t.initialUser,this.serializer)}Ga(t){return new oP(oS.Zr,this.serializer)}Wa(t){return new MG}terminate(){var t=this;return(0,Me.A)(function*(){var i,r;null===(i=t.gcScheduler)||void 0===i||i.stop(),null===(r=t.indexBackfillerScheduler)||void 0===r||r.stop(),t.sharedClientState.shutdown(),yield t.persistence.shutdown()})()}}return n.provider={build:()=>new n},n})();class bk extends $g{constructor(e,t,i){super(),this.Ja=e,this.cacheSizeBytes=t,this.forceOwnership=i,this.kind="persistent",this.synchronizeTabs=!1}initialize(e){var t=()=>super.initialize,i=this;return(0,Me.A)(function*(){yield t().call(i,e),yield i.Ja.initialize(i,e),yield yk(i.Ja.syncEngine),yield Bg(i.Ja.remoteStore),yield i.persistence.yi(()=>(i.gcScheduler&&!i.gcScheduler.started&&i.gcScheduler.start(),i.indexBackfillerScheduler&&!i.indexBackfillerScheduler.started&&i.indexBackfillerScheduler.start(),Promise.resolve()))})()}za(e){return bG(this.persistence,new yG,e.initialUser,this.serializer)}ja(e,t){return new uG(this.persistence.referenceDelegate.garbageCollector,e.asyncQueue,t)}Ha(e,t){const i=new Zle(t,this.persistence);return new Qle(e.asyncQueue,i)}Ga(e){const t=cP(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),i=void 0!==this.cacheSizeBytes?xo.withCacheSize(this.cacheSizeBytes):xo.DEFAULT;return new lP(this.synchronizeTabs,t,e.clientId,i,e.asyncQueue,RG(),fS(),this.serializer,this.sharedClientState,!!this.forceOwnership)}Wa(e){return new MG}}class JG extends bk{constructor(e,t){super(e,t,!1),this.Ja=e,this.cacheSizeBytes=t,this.synchronizeTabs=!0}initialize(e){var t=()=>super.initialize,i=this;return(0,Me.A)(function*(){yield t().call(i,e);const r=i.Ja.syncEngine;i.sharedClientState instanceof vP&&(i.sharedClientState.syncEngine={no:Sde.bind(null,r),ro:Cde.bind(null,r),io:Mde.bind(null,r),Qi:Ide.bind(null,r),eo:Tde.bind(null,r)},yield i.sharedClientState.start()),yield i.persistence.yi(function(){var s=(0,Me.A)(function*(o){yield function Ade(n,e){return mk.apply(this,arguments)}(i.Ja.syncEngine,o),i.gcScheduler&&(o&&!i.gcScheduler.started?i.gcScheduler.start():o||i.gcScheduler.stop()),i.indexBackfillerScheduler&&(o&&!i.indexBackfillerScheduler.started?i.indexBackfillerScheduler.start():o||i.indexBackfillerScheduler.stop())});return function(o){return s.apply(this,arguments)}}())})()}Wa(e){const t=RG();if(!vP.D(t))throw new Ye(Te.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const i=cP(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new vP(t,e.asyncQueue,i,e.clientId,e.initialUser)}}let qg=(()=>{class n{initialize(t,i){var r=this;return(0,Me.A)(function*(){r.localStore||(r.localStore=t.localStore,r.sharedClientState=t.sharedClientState,r.datastore=r.createDatastore(i),r.remoteStore=r.createRemoteStore(i),r.eventManager=r.createEventManager(i),r.syncEngine=r.createSyncEngine(i,!t.synchronizeTabs),r.sharedClientState.onlineStateHandler=s=>KG(r.syncEngine,s,1),r.remoteStore.remoteSyncer.handleCredentialChange=xde.bind(null,r.syncEngine),yield LP(r.remoteStore,r.syncEngine.isPrimaryClient))})()}createEventManager(t){return new ide}createDatastore(t){const i=tb(t.databaseInfo.databaseId),r=new Bue(t.databaseInfo);return new Gue(t.authCredentials,t.appCheckCredentials,r,i)}createRemoteStore(t){return r=this.localStore,s=this.datastore,o=t.asyncQueue,a=i=>KG(this.syncEngine,i,0),l=DG.D()?new DG:new Lue,new jue(r,s,o,a,l);var r,s,o,a,l}createSyncEngine(t,i){return function(s,o,a,l,c,u,d){const p=new ude(s,o,a,l,c,u);return d&&(p.Qa=!0),p}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,t.initialUser,t.maxConcurrentLimboResolutions,i)}terminate(){var t=this;return(0,Me.A)(function*(){var i,r,s;yield(s=(0,Me.A)(function*(a){const l=It(a);Je("RemoteStore","RemoteStore shutting down."),l.L_.add(5),yield Vg(l),l.k_.shutdown(),l.q_.set("Unknown")}),function o(a){return s.apply(this,arguments)})(t.remoteStore),null===(i=t.datastore)||void 0===i||i.terminate(),null===(r=t.eventManager)||void 0===r||r.terminate()})()}}return n.provider={build:()=>new n},n})();function e8(n,e=10240){let t=0;return{read:()=>(0,Me.A)(function*(){if(t<n.byteLength){const i={value:n.slice(t,t+e),done:!1};return t+=e,i}return{done:!0}})(),cancel:()=>(0,Me.A)(function*(){})(),releaseLock(){},closed:Promise.resolve()}}class _S{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ya(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ya(this.observer.error,e):ls("Uncaught Error in snapshot listener:",e.toString()))}Za(){this.muted=!0}Ya(e,t){setTimeout(()=>{this.muted||e(t)},0)}}class Pde{constructor(e,t){this.Xa=e,this.serializer=t,this.metadata=new Bs,this.buffer=new Uint8Array,this.eu=new TextDecoder("utf-8"),this.tu().then(i=>{i&&i.ua()?this.metadata.resolve(i.aa.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is\n             ${JSON.stringify(i?.aa)}`))},i=>this.metadata.reject(i))}close(){return this.Xa.cancel()}getMetadata(){var e=this;return(0,Me.A)(function*(){return e.metadata.promise})()}Ua(){var e=this;return(0,Me.A)(function*(){return yield e.getMetadata(),e.tu()})()}tu(){var e=this;return(0,Me.A)(function*(){const t=yield e.nu();if(null===t)return null;const i=e.eu.decode(t),r=Number(i);isNaN(r)&&e.ru(`length string (${i}) is not valid number`);const s=yield e.iu(r);return new ode(JSON.parse(s),t.length+r)})()}su(){return this.buffer.findIndex(e=>e==="{".charCodeAt(0))}nu(){var e=this;return(0,Me.A)(function*(){for(;e.su()<0&&!(yield e.ou()););if(0===e.buffer.length)return null;const t=e.su();t<0&&e.ru("Reached the end of bundle when a length string is expected.");const i=e.buffer.slice(0,t);return e.buffer=e.buffer.slice(t),i})()}iu(e){var t=this;return(0,Me.A)(function*(){for(;t.buffer.length<e;)(yield t.ou())&&t.ru("Reached the end of bundle when more is expected.");const i=t.eu.decode(t.buffer.slice(0,e));return t.buffer=t.buffer.slice(e),i})()}ru(e){throw this.Xa.cancel(),new Error(`Invalid bundle format: ${e}`)}ou(){var e=this;return(0,Me.A)(function*(){const t=yield e.Xa.read();if(!t.done){const i=new Uint8Array(e.buffer.length+t.value.length);i.set(e.buffer),i.set(t.value,e.buffer.length),e.buffer=i}return t.done})()}}class kde{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastTransactionError=null,this.writtenDocs=new Set}lookup(e){var t=this;return(0,Me.A)(function*(){if(t.ensureCommitNotCalled(),t.mutations.length>0)throw t.lastTransactionError=new Ye(Te.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes."),t.lastTransactionError;const i=yield(r=(0,Me.A)(function*(o,a){const l=It(o),c={documents:a.map(m=>$0(l.serializer,m))},u=yield l.Lo("BatchGetDocuments",l.serializer.databaseId,Si.emptyPath(),c,a.length),d=new Map;u.forEach(m=>{const v=function Yce(n,e){return"found"in e?function(i,r){an(!!r.found);const s=xc(i,r.found.name),o=cs(r.found.updateTime),a=r.found.createTime?cs(r.found.createTime):fn.min(),l=new eo({mapValue:{fields:r.found.fields}});return Ir.newFoundDocument(s,o,a,l)}(n,e):"missing"in e?function(i,r){an(!!r.missing),an(!!r.readTime);const s=xc(i,r.missing),o=cs(r.readTime);return Ir.newNoDocument(s,o)}(n,e):Qt()}(l.serializer,m);d.set(v.key.toString(),v)});const p=[];return a.forEach(m=>{const v=d.get(m.toString());an(!!v),p.push(v)}),p}),function s(o,a){return r.apply(this,arguments)})(t.datastore,e);var r;return i.forEach(r=>t.recordVersion(r)),i})()}set(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(i){this.lastTransactionError=i}this.writtenDocs.add(e.toString())}delete(e){this.write(new Mg(e,this.precondition(e))),this.writtenDocs.add(e.toString())}commit(){var e=this;return(0,Me.A)(function*(){if(e.ensureCommitNotCalled(),e.lastTransactionError)throw e.lastTransactionError;const t=e.readVersions;var i;e.mutations.forEach(i=>{t.delete(i.key.toString())}),t.forEach((i,r)=>{const s=Rt.fromPath(r);e.mutations.push(new HR(s,e.precondition(s)))}),yield(i=(0,Me.A)(function*(s,o){const a=It(s),l={writes:o.map(c=>q0(a.serializer,c))};yield a.Mo("Commit",a.serializer.databaseId,Si.emptyPath(),l)}),function r(s,o){return i.apply(this,arguments)})(e.datastore,e.mutations),e.committed=!0})()}recordVersion(e){let t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw Qt();t=fn.min()}const i=this.readVersions.get(e.key.toString());if(i){if(!t.isEqual(i))throw new Ye(Te.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}precondition(e){const t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?t.isEqual(fn.min())?Lr.exists(!1):Lr.updateTime(t):Lr.none()}preconditionForUpdate(e){const t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(fn.min()))throw new Ye(Te.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return Lr.updateTime(t)}return Lr.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}class Ode{constructor(e,t,i,r,s){this.asyncQueue=e,this.datastore=t,this.options=i,this.updateFunction=r,this.deferred=s,this._u=i.maxAttempts,this.t_=new bP(this.asyncQueue,"transaction_retry")}au(){this._u-=1,this.uu()}uu(){var e=this;this.t_.Go((0,Me.A)(function*(){const t=new kde(e.datastore),i=e.cu(t);i&&i.then(r=>{e.asyncQueue.enqueueAndForget(()=>t.commit().then(()=>{e.deferred.resolve(r)}).catch(s=>{e.lu(s)}))}).catch(r=>{e.lu(r)})}))}cu(e){try{const t=this.updateFunction(e);return!M0(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(t){return this.deferred.reject(t),null}}lu(e){this._u>0&&this.hu(e)?(this._u-=1,this.asyncQueue.enqueueAndForget(()=>(this.uu(),Promise.resolve()))):this.deferred.reject(e)}hu(e){if("FirebaseError"===e.name){const t=e.code;return"aborted"===t||"failed-precondition"===t||"already-exists"===t||!b6(t)}return!1}}class Nde{constructor(e,t,i,r,s){var o=this;this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=i,this.databaseInfo=r,this.user=Us.UNAUTHENTICATED,this.clientId=d5.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=s,this.authCredentials.start(i,function(){var a=(0,Me.A)(function*(l){Je("FirestoreClient","Received user=",l.uid),yield o.authCredentialListener(l),o.user=l});return function(l){return a.apply(this,arguments)}}()),this.appCheckCredentials.start(i,a=>(Je("FirestoreClient","Received new app check token=",a),this.appCheckCredentialListener(a,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){var e=this;this.asyncQueue.enterRestrictedMode();const t=new Bs;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((0,Me.A)(function*(){try{e._onlineComponents&&(yield e._onlineComponents.terminate()),e._offlineComponents&&(yield e._offlineComponents.terminate()),e.authCredentials.shutdown(),e.appCheckCredentials.shutdown(),t.resolve()}catch(i){const r=Hg(i,"Failed to shutdown persistence");t.reject(r)}})),t.promise}}function xk(n,e){return wk.apply(this,arguments)}function wk(){return wk=(0,Me.A)(function*(n,e){n.asyncQueue.verifyOperationInProgress(),Je("FirestoreClient","Initializing OfflineComponentProvider");const t=n.configuration;yield e.initialize(t);let i=t.initialUser;n.setCredentialChangeListener(function(){var r=(0,Me.A)(function*(s){i.isEqual(s)||(yield xG(e.localStore,s),i=s)});return function(s){return r.apply(this,arguments)}}()),e.persistence.setDatabaseDeletedListener(()=>n.terminate()),n._offlineComponents=e}),wk.apply(this,arguments)}function t8(n,e){return Ek.apply(this,arguments)}function Ek(){return(Ek=(0,Me.A)(function*(n,e){n.asyncQueue.verifyOperationInProgress();const t=yield Tk(n);Je("FirestoreClient","Initializing OnlineComponentProvider"),yield e.initialize(t,n.configuration),n.setCredentialChangeListener(i=>VG(e.remoteStore,i)),n.setAppCheckTokenChangeListener((i,r)=>VG(e.remoteStore,r)),n._onlineComponents=e})).apply(this,arguments)}function Tk(n){return Sk.apply(this,arguments)}function Sk(){return(Sk=(0,Me.A)(function*(n){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){Je("FirestoreClient","Using user provided OfflineComponentProvider");try{yield xk(n,n._uninitializedComponentsProvider._offline)}catch(e){if(!("FirebaseError"===(r=e).name?r.code===Te.FAILED_PRECONDITION||r.code===Te.UNIMPLEMENTED:!(typeof DOMException<"u"&&r instanceof DOMException)||22===r.code||20===r.code||11===r.code))throw e;ka("Error using user provided cache. Falling back to memory cache: "+e),yield xk(n,new $g)}}else Je("FirestoreClient","Using default OfflineComponentProvider"),yield xk(n,new $g);var r;return n._offlineComponents})).apply(this,arguments)}function vS(n){return Ak.apply(this,arguments)}function Ak(){return(Ak=(0,Me.A)(function*(n){return n._onlineComponents||(n._uninitializedComponentsProvider?(Je("FirestoreClient","Using user provided OnlineComponentProvider"),yield t8(n,n._uninitializedComponentsProvider._online)):(Je("FirestoreClient","Using default OnlineComponentProvider"),yield t8(n,new qg))),n._onlineComponents})).apply(this,arguments)}function n8(n){return Tk(n).then(e=>e.persistence)}function Xg(n){return Tk(n).then(e=>e.localStore)}function i8(n){return vS(n).then(e=>e.remoteStore)}function Ik(n){return vS(n).then(e=>e.syncEngine)}function Kg(n){return Ck.apply(this,arguments)}function Ck(){return(Ck=(0,Me.A)(function*(n){const e=yield vS(n),t=e.eventManager;return t.onListen=dde.bind(null,e.syncEngine),t.onUnlisten=fde.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=hde.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=pde.bind(null,e.syncEngine),t})).apply(this,arguments)}function s8(n,e,t={}){const i=new Bs;return n.asyncQueue.enqueueAndForget((0,Me.A)(function*(){return function(s,o,a,l,c){const u=new _S({next:p=>{u.Za(),o.enqueueAndForget(()=>HP(s,d));const m=p.docs.has(a);!m&&p.fromCache?c.reject(new Ye(Te.UNAVAILABLE,"Failed to get document because the client is offline.")):m&&p.fromCache&&l&&"server"===l.source?c.reject(new Ye(Te.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):c.resolve(p)},error:p=>c.reject(p)}),d=new $P(Eg(a.path),u,{includeMetadataChanges:!0,_a:!0});return BP(s,d)}(yield Kg(n),n.asyncQueue,e,t,i)})),i.promise}function o8(n,e,t={}){const i=new Bs;return n.asyncQueue.enqueueAndForget((0,Me.A)(function*(){return function(s,o,a,l,c){const u=new _S({next:p=>{u.Za(),o.enqueueAndForget(()=>HP(s,d)),p.fromCache&&"server"===l.source?c.reject(new Ye(Te.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):c.resolve(p)},error:p=>c.reject(p)}),d=new $P(a,u,{includeMetadataChanges:!0,_a:!0});return BP(s,d)}(yield Kg(n),n.asyncQueue,e,t,i)})),i.promise}function a8(n){const e={};return void 0!==n.timeoutSeconds&&(e.timeoutSeconds=n.timeoutSeconds),e}const l8=new Map;function Mk(n,e,t){if(!t)throw new Ye(Te.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function c8(n,e,t,i){if(!0===e&&!0===i)throw new Ye(Te.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function u8(n){if(!Rt.isDocumentKey(n))throw new Ye(Te.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function d8(n){if(Rt.isDocumentKey(n))throw new Ye(Te.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function yS(n){if(void 0===n)return"undefined";if(null===n)return"null";if("string"==typeof n)return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if("number"==typeof n||"boolean"==typeof n)return""+n;if("object"==typeof n){if(n instanceof Array)return"an array";{const e=(i=n).constructor?i.constructor.name:null;return e?`a custom ${e} object`:"an object"}}var i;return"function"==typeof n?"a function":Qt()}function vi(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new Ye(Te.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=yS(n);throw new Ye(Te.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}function h8(n,e){if(e<=0)throw new Ye(Te.INVALID_ARGUMENT,`Function ${n}() requires a positive number, but it was: ${e}.`)}class f8{constructor(e){var t,i;if(void 0===e.host){if(void 0!==e.ssl)throw new Ye(Te.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=null===(t=e.ssl)||void 0===t||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,void 0===e.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<1048576)throw new Ye(Te.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}c8("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!(this.experimentalForceLongPolling||void 0!==e.experimentalAutoDetectLongPolling&&!e.experimentalAutoDetectLongPolling),this.experimentalLongPollingOptions=a8(null!==(i=e.experimentalLongPollingOptions)&&void 0!==i?i:{}),function(s){if(void 0!==s.timeoutSeconds){if(isNaN(s.timeoutSeconds))throw new Ye(Te.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (must not be NaN)`);if(s.timeoutSeconds<5)throw new Ye(Te.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (minimum allowed value is 5)`);if(s.timeoutSeconds>30)throw new Ye(Te.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&this.experimentalLongPollingOptions.timeoutSeconds===e.experimentalLongPollingOptions.timeoutSeconds&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class ib{constructor(e,t,i,r){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=i,this._app=r,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new f8({}),this._settingsFrozen=!1,this._terminateTask="notTerminated"}get app(){if(!this._app)throw new Ye(Te.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return"notTerminated"!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new Ye(Te.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new f8(e),void 0!==e.credentials&&(this._authCredentials=function(i){if(!i)return new Ule;switch(i.type){case"firstParty":return new Gle(i.sessionIndex||"0",i.iamToken||null,i.authTokenFactory||null);case"provider":return i.client;default:throw new Ye(Te.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return"notTerminated"===this._terminateTask&&(this._terminateTask=this._terminate()),this._terminateTask}_restart(){var e=this;return(0,Me.A)(function*(){"notTerminated"===e._terminateTask?yield e._terminate():e._terminateTask="notTerminated"})()}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(t){const i=l8.get(t);i&&(Je("ComponentProvider","Removing Datastore"),l8.delete(t),i.terminate())}(this),Promise.resolve()}}class to{constructor(e,t,i){this.converter=t,this._query=i,this.type="query",this.firestore=e}withConverter(e){return new to(this.firestore,e,this._query)}}class Cr{constructor(e,t,i){this.converter=t,this._key=i,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new wc(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Cr(this.firestore,e,this._key)}}class wc extends to{constructor(e,t,i){super(e,t,Eg(i)),this._path=i,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Cr(this.firestore,null,new Rt(e))}withConverter(e){return new wc(this.firestore,e,this._path)}}function m8(n,e,...t){if(n=(0,ii.Ku)(n),Mk("collection","path",e),n instanceof ib){const i=Si.fromString(e,...t);return d8(i),new wc(n,null,i)}{if(!(n instanceof Cr||n instanceof wc))throw new Ye(Te.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=n._path.child(Si.fromString(e,...t));return d8(i),new wc(n.firestore,null,i)}}function bS(n,e,...t){if(n=(0,ii.Ku)(n),1===arguments.length&&(e=d5.newId()),Mk("doc","path",e),n instanceof ib){const i=Si.fromString(e,...t);return u8(i),new Cr(n,null,new Rt(i))}{if(!(n instanceof Cr||n instanceof wc))throw new Ye(Te.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=n._path.child(Si.fromString(e,...t));return u8(i),new Cr(n.firestore,n instanceof wc?n.converter:null,new Rt(i))}}function g8(n,e){return n=(0,ii.Ku)(n),e=(0,ii.Ku)(e),(n instanceof Cr||n instanceof wc)&&(e instanceof Cr||e instanceof wc)&&n.firestore===e.firestore&&n.path===e.path&&n.converter===e.converter}function Dk(n,e){return n=(0,ii.Ku)(n),e=(0,ii.Ku)(e),n instanceof to&&e instanceof to&&n.firestore===e.firestore&&L0(n._query,e._query)&&n.converter===e.converter}class _8{constructor(e=Promise.resolve()){this.Pu=[],this.Iu=!1,this.Tu=[],this.Eu=null,this.du=!1,this.Au=!1,this.Ru=[],this.t_=new bP(this,"async_queue_retry"),this.Vu=()=>{const i=fS();i&&Je("AsyncQueue","Visibility state changed to "+i.visibilityState),this.t_.jo()},this.mu=e;const t=fS();t&&"function"==typeof t.addEventListener&&t.addEventListener("visibilitychange",this.Vu)}get isShuttingDown(){return this.Iu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.fu(),this.gu(e)}enterRestrictedMode(e){if(!this.Iu){this.Iu=!0,this.Au=e||!1;const t=fS();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.Vu)}}enqueue(e){if(this.fu(),this.Iu)return new Promise(()=>{});const t=new Bs;return this.gu(()=>this.Iu&&this.Au?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Pu.push(e),this.pu()))}pu(){var e=this;return(0,Me.A)(function*(){if(0!==e.Pu.length){try{yield e.Pu[0](),e.Pu.shift(),e.t_.reset()}catch(t){if(!Fd(t))throw t;Je("AsyncQueue","Operation failed with retryable error: "+t)}e.Pu.length>0&&e.t_.Go(()=>e.pu())}})()}gu(e){const t=this.mu.then(()=>(this.du=!0,e().catch(i=>{throw this.Eu=i,this.du=!1,ls("INTERNAL UNHANDLED ERROR: ",function(o){let a=o.message||"";return o.stack&&(a=o.stack.includes(o.message)?o.stack:o.message+"\n"+o.stack),a}(i)),i}).then(i=>(this.du=!1,i))));return this.mu=t,t}enqueueAfterDelay(e,t,i){this.fu(),this.Ru.indexOf(e)>-1&&(t=0);const r=UP.createAndSchedule(this,e,t,i,s=>this.yu(s));return this.Tu.push(r),r}fu(){this.Eu&&Qt()}verifyOperationInProgress(){}wu(){var e=this;return(0,Me.A)(function*(){let t;do{t=e.mu,yield t}while(t!==e.mu)})()}Su(e){for(const t of this.Tu)if(t.timerId===e)return!0;return!1}bu(e){return this.wu().then(()=>{this.Tu.sort((t,i)=>t.targetTimeMs-i.targetTimeMs);for(const t of this.Tu)if(t.skipDelay(),"all"!==e&&t.timerId===e)break;return this.wu()})}Du(e){this.Ru.push(e)}yu(e){const t=this.Tu.indexOf(e);this.Tu.splice(t,1)}}function Rk(n){return function(t,i){if("object"!=typeof t||null===t)return!1;const r=t;for(const s of["next","error","complete"])if(s in r&&"function"==typeof r[s])return!0;return!1}(n)}class Xde{constructor(){this._progressObserver={},this._taskCompletionResolver=new Bs,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,t,i){this._progressObserver={next:e,error:t,complete:i}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,t){return this._taskCompletionResolver.promise.then(e,t)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}class lr extends ib{constructor(e,t,i,r){super(e,t,i,r),this.type="firestore",this._queue=new _8,this._persistenceKey=r?.name||"[DEFAULT]"}_terminate(){var e=this;return(0,Me.A)(function*(){if(e._firestoreClient){const t=e._firestoreClient.terminate();e._queue=new _8(t),e._firestoreClient=void 0,yield t}})()}}function Vr(n){if(n._terminated)throw new Ye(Te.FAILED_PRECONDITION,"The client has already been terminated.");return n._firestoreClient||v8(n),n._firestoreClient}function v8(n){var e,t,i;const r=n._freezeSettings(),s=(l=(null===(e=n._app)||void 0===e?void 0:e.options.appId)||"",new bce(n._databaseId,l,n._persistenceKey,(u=r).host,u.ssl,u.experimentalForceLongPolling,u.experimentalAutoDetectLongPolling,a8(u.experimentalLongPollingOptions),u.useFetchStreams));var l,u;n._componentsProvider||!(null===(t=r.localCache)||void 0===t)&&t._offlineComponentProvider&&!(null===(i=r.localCache)||void 0===i)&&i._onlineComponentProvider&&(n._componentsProvider={_offline:r.localCache._offlineComponentProvider,_online:r.localCache._onlineComponentProvider}),n._firestoreClient=new Nde(n._authCredentials,n._appCheckCredentials,n._queue,s,n._componentsProvider&&function(a){const l=a?._online.build();return{_offline:a?._offline.build(l),_online:l}}(n._componentsProvider))}function Pk(){return(Pk=(0,Me.A)(function*(n){ka("enableMultiTabIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const e=n._freezeSettings();y8(n,qg.provider,{build:t=>new JG(t,e.cacheSizeBytes)})})).apply(this,arguments)}function y8(n,e,t){if((n=vi(n,lr))._firestoreClient||n._terminated)throw new Ye(Te.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.");if(n._componentsProvider||n._getSettings().localCache)throw new Ye(Te.FAILED_PRECONDITION,"SDK cache is already specified.");n._componentsProvider={_online:e,_offline:t},v8(n)}class Ec{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Ec(Jr.fromBase64String(e))}catch(t){throw new Ye(Te.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new Ec(Jr.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}class Cu{constructor(...e){for(let t=0;t<e.length;++t)if(0===e[t].length)throw new Ye(Te.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Ar(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class Of{constructor(e){this._methodName=e}}class xS{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new Ye(Te.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new Ye(Te.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return Vn(this._lat,e._lat)||Vn(this._long,e._long)}}class wS{constructor(e){this._values=(e||[]).map(t=>t)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(i,r){if(i.length!==r.length)return!1;for(let s=0;s<i.length;++s)if(i[s]!==r[s])return!1;return!0}(this._values,e._values)}}const she=/^__.*__$/;class ohe{constructor(e,t,i){this.data=e,this.fieldMask=t,this.fieldTransforms=i}toMutation(e,t){return null!==this.fieldMask?new Su(e,this.data,this.fieldMask,t,this.fieldTransforms):new Cg(e,this.data,t,this.fieldTransforms)}}class b8{constructor(e,t,i){this.data=e,this.fieldMask=t,this.fieldTransforms=i}toMutation(e,t){return new Su(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function x8(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Qt()}}class ES{constructor(e,t,i,r,s,o){this.settings=e,this.databaseId=t,this.serializer=i,this.ignoreUndefinedProperties=r,void 0===s&&this.vu(),this.fieldTransforms=s||[],this.fieldMask=o||[]}get path(){return this.settings.path}get Cu(){return this.settings.Cu}Fu(e){return new ES(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Mu(e){var t;const i=null===(t=this.path)||void 0===t?void 0:t.child(e),r=this.Fu({path:i,xu:!1});return r.Ou(e),r}Nu(e){var t;const i=null===(t=this.path)||void 0===t?void 0:t.child(e),r=this.Fu({path:i,xu:!1});return r.vu(),r}Lu(e){return this.Fu({path:void 0,xu:!0})}Bu(e){return AS(e,this.settings.methodName,this.settings.ku||!1,this.path,this.settings.qu)}contains(e){return void 0!==this.fieldMask.find(t=>e.isPrefixOf(t))||void 0!==this.fieldTransforms.find(t=>e.isPrefixOf(t.field))}vu(){if(this.path)for(let e=0;e<this.path.length;e++)this.Ou(this.path.get(e))}Ou(e){if(0===e.length)throw this.Bu("Document fields must not be empty");if(x8(this.Cu)&&she.test(e))throw this.Bu('Document fields cannot begin and end with "__"')}}class ahe{constructor(e,t,i){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=i||tb(e)}Qu(e,t,i,r=!1){return new ES({Cu:e,methodName:t,qu:i,path:Ar.emptyPath(),xu:!1,ku:r},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Nf(n){const e=n._freezeSettings(),t=tb(n._databaseId);return new ahe(n._databaseId,!!e.ignoreUndefinedProperties,t)}function TS(n,e,t,i,r,s={}){const o=n.Qu(s.merge||s.mergeFields?2:0,e,t,r);Uk("Data must be an object, but it was:",o,i);const a=T8(i,o);let l,c;if(s.merge)l=new da(o.fieldMask),c=o.fieldTransforms;else if(s.mergeFields){const u=[];for(const d of s.mergeFields){const p=ob(e,d,t);if(!o.contains(p))throw new Ye(Te.INVALID_ARGUMENT,`Field '${p}' is specified in your field mask but missing from your input data.`);A8(u,p)||u.push(p)}l=new da(u),c=o.fieldTransforms.filter(d=>l.covers(d.field))}else l=null,c=o.fieldTransforms;return new ohe(new eo(a),l,c)}class sb extends Of{_toFieldTransform(e){if(2!==e.Cu)throw e.Bu(1===e.Cu?`${this._methodName}() can only appear at the top level of your update data`:`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof sb}}function w8(n,e,t){return new ES({Cu:3,qu:e.settings.qu,methodName:n._methodName,xu:t},e.databaseId,e.serializer,e.ignoreUndefinedProperties)}class kk extends Of{_toFieldTransform(e){return new z0(e.path,new Ag)}isEqual(e){return e instanceof kk}}class Ok extends Of{constructor(e,t){super(e),this.Ku=t}_toFieldTransform(e){const t=w8(this,e,!0),i=this.Ku.map(s=>Ff(s,t)),r=new Sf(i);return new z0(e.path,r)}isEqual(e){return e instanceof Ok&&(0,ii.bD)(this.Ku,e.Ku)}}class Nk extends Of{constructor(e,t){super(e),this.Ku=t}_toFieldTransform(e){const t=w8(this,e,!0),i=this.Ku.map(s=>Ff(s,t)),r=new Af(i);return new z0(e.path,r)}isEqual(e){return e instanceof Nk&&(0,ii.bD)(this.Ku,e.Ku)}}class Fk extends Of{constructor(e,t){super(e),this.$u=t}_toFieldTransform(e){const t=new Ig(e.serializer,l6(e.serializer,this.$u));return new z0(e.path,t)}isEqual(e){return e instanceof Fk&&this.$u===e.$u}}function Lk(n,e,t,i){const r=n.Qu(1,e,t);Uk("Data must be an object, but it was:",r,i);const s=[],o=eo.empty();Ld(i,(l,c)=>{const u=SS(e,l,t);c=(0,ii.Ku)(c);const d=r.Nu(u);if(c instanceof sb)s.push(u);else{const p=Ff(c,d);null!=p&&(s.push(u),o.set(u,p))}});const a=new da(s);return new b8(o,a,r.fieldTransforms)}function Vk(n,e,t,i,r,s){const o=n.Qu(1,e,t),a=[ob(e,i,t)],l=[r];if(s.length%2!=0)throw new Ye(Te.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let p=0;p<s.length;p+=2)a.push(ob(e,s[p])),l.push(s[p+1]);const c=[],u=eo.empty();for(let p=a.length-1;p>=0;--p)if(!A8(c,a[p])){const m=a[p];let v=l[p];v=(0,ii.Ku)(v);const x=o.Nu(m);if(v instanceof sb)c.push(m);else{const b=Ff(v,x);null!=b&&(c.push(m),u.set(m,b))}}const d=new da(c);return new b8(u,d,o.fieldTransforms)}function E8(n,e,t,i=!1){return Ff(t,n.Qu(i?4:3,e))}function Ff(n,e){if(S8(n=(0,ii.Ku)(n)))return Uk("Unsupported field value:",e,n),T8(n,e);if(n instanceof Of)return function(i,r){if(!x8(r.Cu))throw r.Bu(`${i._methodName}() can only be used with update() and set()`);if(!r.path)throw r.Bu(`${i._methodName}() is not currently supported inside arrays`);const s=i._toFieldTransform(r);s&&r.fieldTransforms.push(s)}(n,e),null;if(void 0===n&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.xu&&4!==e.Cu)throw e.Bu("Nested arrays are not supported");return function(i,r){const s=[];let o=0;for(const a of i){let l=Ff(a,r.Lu(o));null==l&&(l={nullValue:"NULL_VALUE"}),s.push(l),o++}return{arrayValue:{values:s}}}(n,e)}return function(i,r){if(null===(i=(0,ii.Ku)(i)))return{nullValue:"NULL_VALUE"};if("number"==typeof i)return l6(r.serializer,i);if("boolean"==typeof i)return{booleanValue:i};if("string"==typeof i)return{stringValue:i};if(i instanceof Date){const s=Nr.fromDate(i);return{timestampValue:Dg(r.serializer,s)}}if(i instanceof Nr){const s=new Nr(i.seconds,1e3*Math.floor(i.nanoseconds/1e3));return{timestampValue:Dg(r.serializer,s)}}if(i instanceof xS)return{geoPointValue:{latitude:i.latitude,longitude:i.longitude}};if(i instanceof Ec)return{bytesValue:D6(r.serializer,i._byteString)};if(i instanceof Cr){const s=r.databaseId,o=i.firestore._databaseId;if(!o.isEqual(s))throw r.Bu(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${s.projectId}/${s.database}`);return{referenceValue:XR(i.firestore._databaseId||r.databaseId,i._key.path)}}if(i instanceof wS)return a=r,{mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{values:i.toArray().map(l=>{if("number"!=typeof l)throw a.Bu("VectorValues must only contain numeric values.");return zR(a.serializer,l)})}}}}};var a;throw r.Bu(`Unsupported field value: ${yS(i)}`)}(n,e)}function T8(n,e){const t={};return C5(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Ld(n,(i,r)=>{const s=Ff(r,e.Mu(i));null!=s&&(t[i]=s)}),{mapValue:{fields:t}}}function S8(n){return!("object"!=typeof n||null===n||n instanceof Array||n instanceof Date||n instanceof Nr||n instanceof xS||n instanceof Ec||n instanceof Cr||n instanceof Of||n instanceof wS)}function Uk(n,e,t){if(!S8(t)||"object"!=typeof(r=t)||null===r||Object.getPrototypeOf(r)!==Object.prototype&&null!==Object.getPrototypeOf(r)){const i=yS(t);throw e.Bu("an object"===i?n+" a custom object":n+" "+i)}var r}function ob(n,e,t){if((e=(0,ii.Ku)(e))instanceof Cu)return e._internalPath;if("string"==typeof e)return SS(n,e);throw AS("Field path arguments must be of type string or ",n,!1,void 0,t)}const lhe=new RegExp("[~\\*/\\[\\]]");function SS(n,e,t){if(e.search(lhe)>=0)throw AS(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new Cu(...e.split("."))._internalPath}catch{throw AS(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function AS(n,e,t,i,r){const s=i&&!i.isEmpty(),o=void 0!==r;let a=`Function ${e}() called with invalid data`;t&&(a+=" (via `toFirestore()`)"),a+=". ";let l="";return(s||o)&&(l+=" (found",s&&(l+=` in field ${i}`),o&&(l+=` in document ${r}`),l+=")"),new Ye(Te.INVALID_ARGUMENT,a+n+l)}function A8(n,e){return n.some(t=>t.isEqual(e))}class ab{constructor(e,t,i,r,s){this._firestore=e,this._userDataWriter=t,this._key=i,this._document=r,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new Cr(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const e=new che(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(IS("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}class che extends ab{data(){return super.data()}}function IS(n,e){return"string"==typeof e?SS(n,e):e instanceof Cu?e._internalPath:e._delegate._internalPath}function I8(n){if("L"===n.limitType&&0===n.explicitOrderBy.length)throw new Ye(Te.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Bk{}class lb extends Bk{}function Kd(n,e,...t){let i=[];e instanceof Bk&&i.push(e),i=i.concat(t),function(s){const o=s.filter(l=>l instanceof Yg).length,a=s.filter(l=>l instanceof cb).length;if(o>1||o>0&&a>0)throw new Ye(Te.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(i);for(const r of i)n=r._apply(n);return n}class cb extends lb{constructor(e,t,i){super(),this._field=e,this._op=t,this._value=i,this.type="where"}static _create(e,t,i){return new cb(e,t,i)}_apply(e){const t=this._parse(e);return R8(e._query,t),new to(e.firestore,e.converter,UR(e._query,t))}_parse(e){const t=Nf(e.firestore);return function(s,o,a,l,c,u,d){let p;if(c.isKeyField()){if("array-contains"===u||"array-contains-any"===u)throw new Ye(Te.INVALID_ARGUMENT,`Invalid Query. You can't perform '${u}' queries on documentId().`);if("in"===u||"not-in"===u){D8(d,u);const m=[];for(const v of d)m.push(M8(l,s,v));p={arrayValue:{values:m}}}else p=M8(l,s,d)}else"in"!==u&&"not-in"!==u&&"array-contains-any"!==u||D8(d,u),p=E8(a,"where",d,"in"===u||"not-in"===u);return Ai.create(c,u,p)}(e._query,0,t,e.firestore._databaseId,this._field,this._op,this._value)}}class Yg extends Bk{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new Yg(e,t)}_parse(e){const t=this._queryConstraints.map(i=>i._parse(e)).filter(i=>i.getFilters().length>0);return 1===t.length?t[0]:er.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return 0===t.getFilters().length?e:(function(r,s){let o=r;const a=s.getFlattenedFilters();for(const l of a)R8(o,l),o=UR(o,l)}(e._query,t),new to(e.firestore,e.converter,UR(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return"and"===this.type?"and":"or"}}class zk extends lb{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new zk(e,t)}_apply(e){const t=function(r,s,o){if(null!==r.startAt)throw new Ye(Te.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==r.endAt)throw new Ye(Te.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new N0(s,o)}(e._query,this._field,this._direction);return new to(e.firestore,e.converter,function(r,s){const o=r.explicitOrderBy.concat([s]);return new Eu(r.path,r.collectionGroup,o,r.filters.slice(),r.limit,r.limitType,r.startAt,r.endAt)}(e._query,t))}}class CS extends lb{constructor(e,t,i){super(),this.type=e,this._limit=t,this._limitType=i}static _create(e,t,i){return new CS(e,t,i)}_apply(e){return new to(e.firestore,e.converter,$T(e._query,this._limit,this._limitType))}}class MS extends lb{constructor(e,t,i){super(),this.type=e,this._docOrFields=t,this._inclusive=i}static _create(e,t,i){return new MS(e,t,i)}_apply(e){const t=C8(e,this.type,this._docOrFields,this._inclusive);return new to(e.firestore,e.converter,(s=t,new Eu((r=e._query).path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),r.limit,r.limitType,s,r.endAt)));var r,s}}class DS extends lb{constructor(e,t,i){super(),this.type=e,this._docOrFields=t,this._inclusive=i}static _create(e,t,i){return new DS(e,t,i)}_apply(e){const t=C8(e,this.type,this._docOrFields,this._inclusive);return new to(e.firestore,e.converter,(s=t,new Eu((r=e._query).path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),r.limit,r.limitType,r.startAt,s)));var r,s}}function C8(n,e,t,i){if(t[0]=(0,ii.Ku)(t[0]),t[0]instanceof ab)return function(s,o,a,l,c){if(!l)throw new Ye(Te.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${a}().`);const u=[];for(const d of Tg(s))if(d.field.isKeyField())u.push(Ef(o,l.key));else{const p=l.data.field(d.field);if(VT(p))throw new Ye(Te.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+d.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===p){const m=d.field.canonicalString();throw new Ye(Te.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${m}' (used as the orderBy) does not exist.`)}u.push(p)}return new Hd(u,c)}(n._query,n.firestore._databaseId,e,t[0]._document,i);{const r=Nf(n.firestore);return function(o,a,l,c,u,d){const p=o.explicitOrderBy;if(u.length>p.length)throw new Ye(Te.INVALID_ARGUMENT,`Too many arguments provided to ${c}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const m=[];for(let v=0;v<u.length;v++){const x=u[v];if(p[v].field.isKeyField()){if("string"!=typeof x)throw new Ye(Te.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${c}(), but got a ${typeof x}`);if(!VR(o)&&-1!==x.indexOf("/"))throw new Ye(Te.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${c}() must be a plain document ID, but '${x}' contains a slash.`);const b=o.path.child(Si.fromString(x));if(!Rt.isDocumentKey(b))throw new Ye(Te.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${c}() must result in a valid document path, but '${b}' is not because it contains an odd number of segments.`);const w=new Rt(b);m.push(Ef(a,w))}else{const b=E8(l,c,x);m.push(b)}}return new Hd(m,d)}(n._query,n.firestore._databaseId,r,e,t,i)}}function M8(n,e,t){if("string"==typeof(t=(0,ii.Ku)(t))){if(""===t)throw new Ye(Te.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!VR(e)&&-1!==t.indexOf("/"))throw new Ye(Te.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const i=e.path.child(Si.fromString(t));if(!Rt.isDocumentKey(i))throw new Ye(Te.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${i}' is not because it has an odd number of segments (${i.length}).`);return Ef(n,new Rt(i))}if(t instanceof Cr)return Ef(n,t._key);throw new Ye(Te.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${yS(t)}.`)}function D8(n,e){if(!Array.isArray(n)||0===n.length)throw new Ye(Te.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function R8(n,e){const t=function(r,s){for(const o of r)for(const a of o.getFlattenedFilters())if(s.indexOf(a.op)>=0)return a.op;return null}(n.filters,function(r){switch(r){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(null!==t)throw new Ye(Te.INVALID_ARGUMENT,t===e.op?`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`:`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}class Hk{convertValue(e,t="none"){switch(Bd(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Fr(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(wu(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw Qt()}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const i={};return Ld(e,(r,s)=>{i[r]=this.convertValue(s,t)}),i}convertVectorValue(e){var t,i,r;const s=null===(r=null===(i=null===(t=e.fields)||void 0===t?void 0:t.value.arrayValue)||void 0===i?void 0:i.values)||void 0===r?void 0:r.map(o=>Fr(o.doubleValue));return new wS(s)}convertGeoPoint(e){return new xS(Fr(e.latitude),Fr(e.longitude))}convertArray(e,t){return(e.values||[]).map(i=>this.convertValue(i,t))}convertServerTimestamp(e,t){switch(t){case"previous":const i=UT(e);return null==i?null:this.convertValue(i,t);case"estimate":return this.convertTimestamp(R0(e));default:return null}}convertTimestamp(e){const t=xu(e);return new Nr(t.seconds,t.nanos)}convertDocumentKey(e,t){const i=Si.fromString(e);an(H6(i));const r=new Vd(i.get(1),i.get(3)),s=new Rt(i.popFirst(5));return r.isEqual(t)||ls(`Document ${s} contains a document reference within a different database (${r.projectId}/${r.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),s}}function RS(n,e,t){let i;return i=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,i}class vhe extends Hk{constructor(e){super(),this.firestore=e}convertBytes(e){return new Ec(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Cr(this.firestore,null,t)}}class Lf{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Mu extends ab{constructor(e,t,i,r,s,o){super(e,t,i,r,o),this._firestore=e,this._firestoreImpl=e,this.metadata=s}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new ub(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const i=this._document.data.field(IS("DocumentSnapshot.get",e));if(null!==i)return this._userDataWriter.convertValue(i,t.serverTimestamps)}}}class ub extends Mu{data(e={}){return super.data(e)}}class Yd{constructor(e,t,i,r){this._firestore=e,this._userDataWriter=t,this._snapshot=r,this.metadata=new Lf(r.hasPendingWrites,r.fromCache),this.query=i}get docs(){const e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(e,t){this._snapshot.docs.forEach(i=>{e.call(t,new ub(this._firestore,this._userDataWriter,i.key,i,new Lf(this._snapshot.mutatedKeys.has(i.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new Ye(Te.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(r,s){if(r._snapshot.oldDocs.isEmpty()){let o=0;return r._snapshot.docChanges.map(a=>({type:"added",doc:new ub(r._firestore,r._userDataWriter,a.doc.key,a.doc,new Lf(r._snapshot.mutatedKeys.has(a.doc.key),r._snapshot.fromCache),r.query.converter),oldIndex:-1,newIndex:o++}))}{let o=r._snapshot.oldDocs;return r._snapshot.docChanges.filter(a=>s||3!==a.type).map(a=>{const l=new ub(r._firestore,r._userDataWriter,a.doc.key,a.doc,new Lf(r._snapshot.mutatedKeys.has(a.doc.key),r._snapshot.fromCache),r.query.converter);let c=-1,u=-1;return 0!==a.type&&(c=o.indexOf(a.doc.key),o=o.delete(a.doc.key)),1!==a.type&&(o=o.add(a.doc),u=o.indexOf(a.doc.key)),{type:bhe(a.type),doc:l,oldIndex:c,newIndex:u}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}}function bhe(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Qt()}}function k8(n,e){return n instanceof Mu&&e instanceof Mu?n._firestore===e._firestore&&n._key.isEqual(e._key)&&(null===n._document?null===e._document:n._document.isEqual(e._document))&&n._converter===e._converter:n instanceof Yd&&e instanceof Yd&&n._firestore===e._firestore&&Dk(n.query,e.query)&&n.metadata.isEqual(e.metadata)&&n._snapshot.isEqual(e._snapshot)}class Qd extends Hk{constructor(e){super(),this.firestore=e}convertBytes(e){return new Ec(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Cr(this.firestore,null,t)}}function O8(n,e,t){n=vi(n,Cr);const i=vi(n.firestore,lr),r=RS(n.converter,e,t);return Qg(i,[TS(Nf(i),"setDoc",n._key,r,null!==n.converter,t).toMutation(n._key,Lr.none())])}function N8(n,e,t,...i){n=vi(n,Cr);const r=vi(n.firestore,lr),s=Nf(r);let o;return o="string"==typeof(e=(0,ii.Ku)(e))||e instanceof Cu?Vk(s,"updateDoc",n._key,e,t,i):Lk(s,"updateDoc",n._key,e),Qg(r,[o.toMutation(n._key,Lr.exists(!0))])}function F8(n,...e){var t,i,r;n=(0,ii.Ku)(n);let s={includeMetadataChanges:!1,source:"default"},o=0;"object"!=typeof e[o]||Rk(e[o])||(s=e[o],o++);const a={includeMetadataChanges:s.includeMetadataChanges,source:s.source};if(Rk(e[o])){const d=e[o];e[o]=null===(t=d.next)||void 0===t?void 0:t.bind(d),e[o+1]=null===(i=d.error)||void 0===i?void 0:i.bind(d),e[o+2]=null===(r=d.complete)||void 0===r?void 0:r.bind(d)}let l,c,u;if(n instanceof Cr)c=vi(n.firestore,lr),u=Eg(n._key.path),l={next:d=>{e[o]&&e[o](Gk(c,n,d))},error:e[o+1],complete:e[o+2]};else{const d=vi(n,to);c=vi(d.firestore,lr),u=d._query;const p=new Qd(c);l={next:m=>{e[o]&&e[o](new Yd(c,p,d,m))},error:e[o+1],complete:e[o+2]},I8(n._query)}return function(p,m,v,x){const b=new _S(x),w=new $P(m,b,v);return p.asyncQueue.enqueueAndForget((0,Me.A)(function*(){return BP(yield Kg(p),w)})),()=>{b.Za(),p.asyncQueue.enqueueAndForget((0,Me.A)(function*(){return HP(yield Kg(p),w)}))}}(Vr(c),u,a,l)}function Qg(n,e){return function(i,r){const s=new Bs;return i.asyncQueue.enqueueAndForget((0,Me.A)(function*(){return function mde(n,e,t){return ek.apply(this,arguments)}(yield Ik(i),r,s)})),s.promise}(Vr(n),e)}function Gk(n,e,t){const i=t.docs.get(e._key),r=new Qd(n);return new Mu(n,r,e._key,i,new Lf(t.hasPendingWrites,t.fromCache),e.converter)}const Vhe={maxAttempts:5};class L8{constructor(e,t){this._firestore=e,this._commitHandler=t,this._mutations=[],this._committed=!1,this._dataReader=Nf(e)}set(e,t,i){this._verifyNotCommitted();const r=Zd(e,this._firestore),s=RS(r.converter,t,i),o=TS(this._dataReader,"WriteBatch.set",r._key,s,null!==r.converter,i);return this._mutations.push(o.toMutation(r._key,Lr.none())),this}update(e,t,i,...r){this._verifyNotCommitted();const s=Zd(e,this._firestore);let o;return o="string"==typeof(t=(0,ii.Ku)(t))||t instanceof Cu?Vk(this._dataReader,"WriteBatch.update",s._key,t,i,r):Lk(this._dataReader,"WriteBatch.update",s._key,t),this._mutations.push(o.toMutation(s._key,Lr.exists(!0))),this}delete(e){this._verifyNotCommitted();const t=Zd(e,this._firestore);return this._mutations=this._mutations.concat(new Mg(t._key,Lr.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new Ye(Te.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function Zd(n,e){if((n=(0,ii.Ku)(n)).firestore!==e)throw new Ye(Te.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return n}class Uhe extends class{constructor(t,i){this._firestore=t,this._transaction=i,this._dataReader=Nf(t)}get(t){const i=Zd(t,this._firestore),r=new vhe(this._firestore);return this._transaction.lookup([i._key]).then(s=>{if(!s||1!==s.length)return Qt();const o=s[0];if(o.isFoundDocument())return new ab(this._firestore,r,o.key,o,i.converter);if(o.isNoDocument())return new ab(this._firestore,r,i._key,null,i.converter);throw Qt()})}set(t,i,r){const s=Zd(t,this._firestore),o=RS(s.converter,i,r),a=TS(this._dataReader,"Transaction.set",s._key,o,null!==s.converter,r);return this._transaction.set(s._key,a),this}update(t,i,r,...s){const o=Zd(t,this._firestore);let a;return a="string"==typeof(i=(0,ii.Ku)(i))||i instanceof Cu?Vk(this._dataReader,"Transaction.update",o._key,i,r,s):Lk(this._dataReader,"Transaction.update",o._key,i),this._transaction.update(o._key,a),this}delete(t){const i=Zd(t,this._firestore);return this._transaction.delete(i._key),this}}{constructor(e,t){super(e,t),this._firestore=e}get(e){const t=Zd(e,this._firestore),i=new Qd(this._firestore);return super.get(e).then(r=>new Mu(this._firestore,i,t._key,r._document,new Lf(!1,!1),t.converter))}}function jk(n,e){if(void 0===e)return{merge:!1};if(void 0!==e.mergeFields&&void 0!==e.merge)throw new Ye("invalid-argument",`Invalid options passed to function ${n}(): You cannot specify both "merge" and "mergeFields".`);return e}function z8(){if(typeof Uint8Array>"u")throw new Ye("unimplemented","Uint8Arrays are not available in this environment.")}function H8(){if(!function vce(){return typeof atob<"u"}())throw new Ye("unimplemented","Blobs are unavailable in Firestore in this environment.")}!function(e,t=!0){mg=pc.SDK_VERSION,(0,pc._registerComponent)(new PT.uA("firestore",(i,{instanceIdentifier:r,options:s})=>{const o=i.getProvider("app").getImmediate(),a=new lr(new zle(i.getProvider("auth-internal")),new Wle(i.getProvider("app-check-internal")),function(c,u){if(!Object.prototype.hasOwnProperty.apply(c.options,["projectId"]))throw new Ye(Te.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Vd(c.options.projectId,u)}(o,r),o);return s=Object.assign({useFetchStreams:t},s),a._setSettings(s),a},"PUBLIC").setMultipleInstances(!0)),(0,pc.registerVersion)(l5,"4.7.3",e),(0,pc.registerVersion)(l5,"4.7.3","esm2017")}();class db{constructor(e){this._delegate=e}static fromBase64String(e){return H8(),new db(Ec.fromBase64String(e))}static fromUint8Array(e){return z8(),new db(Ec.fromUint8Array(e))}toBase64(){return H8(),this._delegate.toBase64()}toUint8Array(){return z8(),this._delegate.toUint8Array()}isEqual(e){return this._delegate.isEqual(e._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}}function $k(n){return function Khe(n,e){if("object"!=typeof n||null===n)return!1;const t=n;for(const i of e)if(i in t&&"function"==typeof t[i])return!0;return!1}(n,["next","error","complete"])}class Yhe{enableIndexedDbPersistence(e,t){return function Yde(n,e){ka("enableIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const t=n._freezeSettings();return y8(n,qg.provider,{build:i=>new bk(i,t.cacheSizeBytes,e?.forceOwnership)}),Promise.resolve()}(e._delegate,{forceOwnership:t})}enableMultiTabIndexedDbPersistence(e){return function Qde(n){return Pk.apply(this,arguments)}(e._delegate)}clearIndexedDbPersistence(e){return function Zde(n){if(n._initialized&&!n._terminated)throw new Ye(Te.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");const e=new Bs;return n._queue.enqueueAndForgetEvenWhileRestricted((0,Me.A)(function*(){try{yield(t=(0,Me.A)(function*(r){if(!_c.D())return Promise.resolve();const s=r+"main";yield _c.delete(s)}),function i(r){return t.apply(this,arguments)})(cP(n._databaseId,n._persistenceKey)),e.resolve()}catch(t){e.reject(t)}var t})),e.promise}(e._delegate)}}class G8{constructor(e,t,i){this._delegate=t,this._persistenceProvider=i,this.INTERNAL={delete:()=>this.terminate()},e instanceof Vd||(this._appCompat=e)}get _databaseId(){return this._delegate._databaseId}settings(e){const t=this._delegate._getSettings();!e.merge&&t.host!==e.host&&ka("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&delete(e=Object.assign(Object.assign({},t),e)).merge,this._delegate._setSettings(e)}useEmulator(e,t,i={}){!function p8(n,e,t,i={}){var r;const s=(n=vi(n,ib))._getSettings(),o=`${e}:${t}`;if("firestore.googleapis.com"!==s.host&&s.host!==o&&ka("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),n._setSettings(Object.assign(Object.assign({},s),{host:o,ssl:!1})),i.mockUserToken){let a,l;if("string"==typeof i.mockUserToken)a=i.mockUserToken,l=Us.MOCK_USER;else{a=(0,ii.Fy)(i.mockUserToken,null===(r=n._app)||void 0===r?void 0:r.options.projectId);const c=i.mockUserToken.sub||i.mockUserToken.user_id;if(!c)throw new Ye(Te.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");l=new Us(c)}n._authCredentials=new Ble(new c5(a,l))}}(this._delegate,e,t,i)}enableNetwork(){return function ehe(n){return function Fde(n){return n.asyncQueue.enqueue((0,Me.A)(function*(){const e=yield n8(n),t=yield i8(n);return e.setNetworkEnabled(!0),function(r){const s=It(r);return s.L_.delete(0),nb(s)}(t)}))}(Vr(n=vi(n,lr)))}(this._delegate)}disableNetwork(){return function the(n){return function Lde(n){return n.asyncQueue.enqueue((0,Me.A)(function*(){const e=yield n8(n),t=yield i8(n);return e.setNetworkEnabled(!1),(i=(0,Me.A)(function*(s){const o=It(s);o.L_.add(0),yield Vg(o),o.q_.set("Offline")}),function r(s){return i.apply(this,arguments)})(t);var i}))}(Vr(n=vi(n,lr)))}(this._delegate)}enablePersistence(e){let t=!1,i=!1;return e&&(t=!!e.synchronizeTabs,i=!!e.experimentalForceOwningTab,c8("synchronizeTabs",t,"experimentalForceOwningTab",i)),t?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,i)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return function Jde(n){return function(t){const i=new Bs;return t.asyncQueue.enqueueAndForget((0,Me.A)(function*(){return function yde(n,e){return sk.apply(this,arguments)}(yield Ik(t),i)})),i.promise}(Vr(n=vi(n,lr)))}(this._delegate)}onSnapshotsInSync(e){return function Mhe(n,e){return function zde(n,e){const t=new _S(e);return n.asyncQueue.enqueueAndForget((0,Me.A)(function*(){return r=yield Kg(n),s=t,It(r).Y_.add(s),void s.next();var r,s})),()=>{t.Za(),n.asyncQueue.enqueueAndForget((0,Me.A)(function*(){return r=yield Kg(n),s=t,void It(r).Y_.delete(s);var r,s}))}}(Vr(n=vi(n,lr)),Rk(e)?e:{next:e})}(this._delegate,e)}get app(){if(!this._appCompat)throw new Ye("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(e){try{return new Zg(this,m8(this._delegate,e))}catch(t){throw Go(t,"collection()","Firestore.collection()")}}doc(e){try{return new gl(this,bS(this._delegate,e))}catch(t){throw Go(t,"doc()","Firestore.doc()")}}collectionGroup(e){try{return new Wo(this,function qde(n,e){if(n=vi(n,ib),Mk("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new Ye(Te.INVALID_ARGUMENT,`Invalid collection ID '${e}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new to(n,null,(i=e,new Eu(Si.emptyPath(),i)));var i}(this._delegate,e))}catch(t){throw Go(t,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(e){return function Bhe(n,e,t){n=vi(n,lr);const i=Object.assign(Object.assign({},Vhe),t);return function(s){if(s.maxAttempts<1)throw new Ye(Te.INVALID_ARGUMENT,"Max attempts must be at least 1")}(i),function(s,o,a){const l=new Bs;return s.asyncQueue.enqueueAndForget((0,Me.A)(function*(){const c=yield function r8(n){return vS(n).then(e=>e.datastore)}(s);new Ode(s.asyncQueue,c,a,o,l).au()})),l.promise}(Vr(n),r=>e(new Uhe(n,r)),i)}(this._delegate,t=>e(new W8(this,t)))}batch(){return Vr(this._delegate),new j8(new L8(this._delegate,e=>Qg(this._delegate,e)))}loadBundle(e){return function nhe(n,e){const t=Vr(n=vi(n,lr)),i=new Xde;return function Hde(n,e,t,i){const r=function(o,a){let l;return l="string"==typeof o?w6().encode(o):o,u=function(u,d){if(u instanceof Uint8Array)return e8(u,d);if(u instanceof ArrayBuffer)return e8(new Uint8Array(u),d);if(u instanceof ReadableStream)return u.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(l),new Pde(u,a);var u}(t,tb(e));n.asyncQueue.enqueueAndForget((0,Me.A)(function*(){!function Dde(n,e,t){const i=It(n);var r;(r=(0,Me.A)(function*(o,a,l){try{const c=yield a.getMetadata();if(yield function(v,x){const b=It(v),w=cs(x.createTime);return b.persistence.runTransaction("hasNewerBundle","readonly",T=>b.Gr.getBundleMetadata(T,x.id)).then(T=>!!T&&T.createTime.compareTo(w)>=0)}(o.localStore,c))return yield a.close(),l._completeWith({taskState:"Success",documentsLoaded:(v=c).totalDocuments,bytesLoaded:v.totalBytes,totalDocuments:v.totalDocuments,totalBytes:v.totalBytes}),Promise.resolve(new Set);l._updateProgress(GG(c));const u=new ade(c,o.localStore,a.serializer);let d=yield a.Ua();for(;d;){const m=yield u.la(d);m&&l._updateProgress(m),d=yield a.Ua()}const p=yield u.complete();return yield Iu(o,p.Ia,void 0),yield function(v,x){const b=It(v);return b.persistence.runTransaction("Save bundle","readwrite",w=>b.Gr.saveBundleMetadata(w,x))}(o.localStore,c),l._completeWith(p.progress),Promise.resolve(p.Pa)}catch(c){return ka("SyncEngine",`Loading bundle failed with ${c}`),l._failWith(c),Promise.resolve(new Set)}var v}),function s(o,a,l){return r.apply(this,arguments)})(i,e,t).then(r=>{i.sharedClientState.notifyBundleLoaded(r)})}(yield Ik(n),r,i)}))}(t,n._databaseId,e,i),i}(this._delegate,e)}namedQuery(e){return function ihe(n,e){return function Gde(n,e){return n.asyncQueue.enqueue((0,Me.A)(function*(){return function(i,r){const s=It(i);return s.persistence.runTransaction("Get named query","readonly",o=>s.Gr.getNamedQuery(o,r))}(yield Xg(n),e)}))}(Vr(n=vi(n,lr)),e).then(t=>t?new to(n,null,t.query):null)}(this._delegate,e).then(t=>t?new Wo(this,t):null)}}class kS extends Hk{constructor(e){super(),this.firestore=e}convertBytes(e){return new db(new Ec(e))}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return gl.forKey(t,this.firestore,null)}}class W8{constructor(e,t){this._firestore=e,this._delegate=t,this._userDataWriter=new kS(e)}get(e){const t=Uf(e);return this._delegate.get(t).then(i=>new hb(this._firestore,new Mu(this._firestore._delegate,this._userDataWriter,i._key,i._document,i.metadata,t.converter)))}set(e,t,i){const r=Uf(e);return i?(jk("Transaction.set",i),this._delegate.set(r,t,i)):this._delegate.set(r,t),this}update(e,t,i,...r){const s=Uf(e);return 2===arguments.length?this._delegate.update(s,t):this._delegate.update(s,t,i,...r),this}delete(e){const t=Uf(e);return this._delegate.delete(t),this}}class j8{constructor(e){this._delegate=e}set(e,t,i){const r=Uf(e);return i?(jk("WriteBatch.set",i),this._delegate.set(r,t,i)):this._delegate.set(r,t),this}update(e,t,i,...r){const s=Uf(e);return 2===arguments.length?this._delegate.update(s,t):this._delegate.update(s,t,i,...r),this}delete(e){const t=Uf(e);return this._delegate.delete(t),this}commit(){return this._delegate.commit()}}class Vf{constructor(e,t,i){this._firestore=e,this._userDataWriter=t,this._delegate=i}fromFirestore(e,t){const i=new ub(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new fb(this._firestore,i),t??{})}toFirestore(e,t){return t?this._delegate.toFirestore(e,t):this._delegate.toFirestore(e)}static getInstance(e,t){const i=Vf.INSTANCES;let r=i.get(e);r||(r=new WeakMap,i.set(e,r));let s=r.get(t);return s||(s=new Vf(e,new kS(e),t),r.set(t,s)),s}}Vf.INSTANCES=new WeakMap;class gl{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new kS(e)}static forPath(e,t,i){if(e.length%2!=0)throw new Ye("invalid-argument",`Invalid document reference. Document references must have an even number of segments, but ${e.canonicalString()} has ${e.length}`);return new gl(t,new Cr(t._delegate,i,new Rt(e)))}static forKey(e,t,i){return new gl(t,new Cr(t._delegate,i,e))}get id(){return this._delegate.id}get parent(){return new Zg(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(e){try{return new Zg(this.firestore,m8(this._delegate,e))}catch(t){throw Go(t,"collection()","DocumentReference.collection()")}}isEqual(e){return(e=(0,ii.Ku)(e))instanceof Cr&&g8(this._delegate,e)}set(e,t){t=jk("DocumentReference.set",t);try{return t?O8(this._delegate,e,t):O8(this._delegate,e)}catch(i){throw Go(i,"setDoc()","DocumentReference.set()")}}update(e,t,...i){try{return 1===arguments.length?N8(this._delegate,e):N8(this._delegate,e,t,...i)}catch(r){throw Go(r,"updateDoc()","DocumentReference.update()")}}delete(){return function Ihe(n){return Qg(vi(n.firestore,lr),[new Mg(n._key,Lr.none())])}(this._delegate)}onSnapshot(...e){const t=$8(e),i=q8(e,r=>new hb(this.firestore,new Mu(this.firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,this._delegate.converter)));return F8(this._delegate,t,i)}get(e){let t;return t="cache"===e?.source?function whe(n){n=vi(n,Cr);const e=vi(n.firestore,lr),t=Vr(e),i=new Qd(e);return function Vde(n,e){const t=new Bs;return n.asyncQueue.enqueueAndForget((0,Me.A)(function*(){return(i=(0,Me.A)(function*(s,o,a){try{const l=yield function(u,d){const p=It(u);return p.persistence.runTransaction("read document","readonly",m=>p.localDocuments.getDocument(m,d))}(s,o);l.isFoundDocument()?a.resolve(l):l.isNoDocument()?a.resolve(null):a.reject(new Ye(Te.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(l){const c=Hg(l,`Failed to get document '${o} from cache`);a.reject(c)}}),function r(s,o,a){return i.apply(this,arguments)})(yield Xg(n),e,t);var i})),t.promise}(t,n._key).then(r=>new Mu(e,i,n._key,r,new Lf(null!==r&&r.hasLocalMutations,!0),n.converter))}(this._delegate):"server"===e?.source?function Ehe(n){n=vi(n,Cr);const e=vi(n.firestore,lr);return s8(Vr(e),n._key,{source:"server"}).then(t=>Gk(e,n,t))}(this._delegate):function xhe(n){n=vi(n,Cr);const e=vi(n.firestore,lr);return s8(Vr(e),n._key).then(t=>Gk(e,n,t))}(this._delegate),t.then(i=>new hb(this.firestore,new Mu(this.firestore._delegate,this._userDataWriter,i._key,i._document,i.metadata,this._delegate.converter)))}withConverter(e){return new gl(this.firestore,this._delegate.withConverter(e?Vf.getInstance(this.firestore,e):null))}}function Go(n,e,t){return n.message=n.message.replace(e,t),n}function $8(n){for(const e of n)if("object"==typeof e&&!$k(e))return e;return{}}function q8(n,e){var t,i;let r;return r=$k(n[0])?n[0]:$k(n[1])?n[1]:"function"==typeof n[0]?{next:n[0],error:n[1],complete:n[2]}:{next:n[1],error:n[2],complete:n[3]},{next:s=>{r.next&&r.next(e(s))},error:null===(t=r.error)||void 0===t?void 0:t.bind(r),complete:null===(i=r.complete)||void 0===i?void 0:i.bind(r)}}class hb{constructor(e,t){this._firestore=e,this._delegate=t}get ref(){return new gl(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(e){return this._delegate.data(e)}get(e,t){return this._delegate.get(e,t)}isEqual(e){return k8(this._delegate,e._delegate)}}class fb extends hb{data(e){const t=this._delegate.data(e);return this._delegate._converter||function Vle(n,e){n||Qt()}(void 0!==t),t}}class Wo{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new kS(e)}where(e,t,i){try{return new Wo(this.firestore,Kd(this._delegate,function uhe(n,e,t){const i=e,r=IS("where",n);return cb._create(r,i,t)}(e,t,i)))}catch(r){throw Go(r,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(e,t){try{return new Wo(this.firestore,Kd(this._delegate,function dhe(n,e="asc"){const t=e,i=IS("orderBy",n);return zk._create(i,t)}(e,t)))}catch(i){throw Go(i,/(orderBy|where)\(\)/,"Query.$1()")}}limit(e){try{return new Wo(this.firestore,Kd(this._delegate,function hhe(n){return h8("limit",n),CS._create("limit",n,"F")}(e)))}catch(t){throw Go(t,"limit()","Query.limit()")}}limitToLast(e){try{return new Wo(this.firestore,Kd(this._delegate,function fhe(n){return h8("limitToLast",n),CS._create("limitToLast",n,"L")}(e)))}catch(t){throw Go(t,"limitToLast()","Query.limitToLast()")}}startAt(...e){try{return new Wo(this.firestore,Kd(this._delegate,function phe(...n){return MS._create("startAt",n,!0)}(...e)))}catch(t){throw Go(t,"startAt()","Query.startAt()")}}startAfter(...e){try{return new Wo(this.firestore,Kd(this._delegate,function mhe(...n){return MS._create("startAfter",n,!1)}(...e)))}catch(t){throw Go(t,"startAfter()","Query.startAfter()")}}endBefore(...e){try{return new Wo(this.firestore,Kd(this._delegate,function ghe(...n){return DS._create("endBefore",n,!1)}(...e)))}catch(t){throw Go(t,"endBefore()","Query.endBefore()")}}endAt(...e){try{return new Wo(this.firestore,Kd(this._delegate,function _he(...n){return DS._create("endAt",n,!0)}(...e)))}catch(t){throw Go(t,"endAt()","Query.endAt()")}}isEqual(e){return Dk(this._delegate,e._delegate)}get(e){let t;return t="cache"===e?.source?function She(n){n=vi(n,to);const e=vi(n.firestore,lr),t=Vr(e),i=new Qd(e);return function Ude(n,e){const t=new Bs;return n.asyncQueue.enqueueAndForget((0,Me.A)(function*(){return(i=(0,Me.A)(function*(s,o,a){try{const l=yield cS(s,o,!0),c=new $G(o,l.Ts),u=c.ma(l.documents),d=c.applyChanges(u,!1);a.resolve(d.snapshot)}catch(l){const c=Hg(l,`Failed to execute query '${o} against cache`);a.reject(c)}}),function r(s,o,a){return i.apply(this,arguments)})(yield Xg(n),e,t);var i})),t.promise}(t,n._query).then(r=>new Yd(e,i,n,r))}(this._delegate):"server"===e?.source?function Ahe(n){n=vi(n,to);const e=vi(n.firestore,lr),t=Vr(e),i=new Qd(e);return o8(t,n._query,{source:"server"}).then(r=>new Yd(e,i,n,r))}(this._delegate):function The(n){n=vi(n,to);const e=vi(n.firestore,lr),t=Vr(e),i=new Qd(e);return I8(n._query),o8(t,n._query).then(r=>new Yd(e,i,n,r))}(this._delegate),t.then(i=>new qk(this.firestore,new Yd(this.firestore._delegate,this._userDataWriter,this._delegate,i._snapshot)))}onSnapshot(...e){const t=$8(e),i=q8(e,r=>new qk(this.firestore,new Yd(this.firestore._delegate,this._userDataWriter,this._delegate,r._snapshot)));return F8(this._delegate,t,i)}withConverter(e){return new Wo(this.firestore,this._delegate.withConverter(e?Vf.getInstance(this.firestore,e):null))}}class Zhe{constructor(e,t){this._firestore=e,this._delegate=t}get type(){return this._delegate.type}get doc(){return new fb(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}}class qk{constructor(e,t){this._firestore=e,this._delegate=t}get query(){return new Wo(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map(e=>new fb(this._firestore,e))}docChanges(e){return this._delegate.docChanges(e).map(t=>new Zhe(this._firestore,t))}forEach(e,t){this._delegate.forEach(i=>{e.call(t,new fb(this._firestore,i))})}isEqual(e){return k8(this._delegate,e._delegate)}}class Zg extends Wo{constructor(e,t){super(e,t),this.firestore=e,this._delegate=t}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){const e=this._delegate.parent;return e?new gl(this.firestore,e):null}doc(e){try{return new gl(this.firestore,void 0===e?bS(this._delegate):bS(this._delegate,e))}catch(t){throw Go(t,"doc()","CollectionReference.doc()")}}add(e){return function Che(n,e){const t=vi(n.firestore,lr),i=bS(n),r=RS(n.converter,e);return Qg(t,[TS(Nf(n.firestore),"addDoc",i._key,r,null!==n.converter,{}).toMutation(i._key,Lr.exists(!1))]).then(()=>i)}(this._delegate,e).then(t=>new gl(this.firestore,t))}isEqual(e){return g8(this._delegate,e._delegate)}withConverter(e){return new Zg(this.firestore,this._delegate.withConverter(e?Vf.getInstance(this.firestore,e):null))}}function Uf(n){return vi(n,Cr)}class Xk{constructor(...e){this._delegate=new Cu(...e)}static documentId(){return new Xk(Ar.keyField().canonicalString())}isEqual(e){return(e=(0,ii.Ku)(e))instanceof Cu&&this._delegate._internalPath.isEqual(e._internalPath)}}class Bf{constructor(e){this._delegate=e}static serverTimestamp(){const e=function Hhe(){return new kk("serverTimestamp")}();return e._methodName="FieldValue.serverTimestamp",new Bf(e)}static delete(){const e=function zhe(){return new sb("deleteField")}();return e._methodName="FieldValue.delete",new Bf(e)}static arrayUnion(...e){const t=function Ghe(...n){return new Ok("arrayUnion",n)}(...e);return t._methodName="FieldValue.arrayUnion",new Bf(t)}static arrayRemove(...e){const t=function Whe(...n){return new Nk("arrayRemove",n)}(...e);return t._methodName="FieldValue.arrayRemove",new Bf(t)}static increment(e){const t=function jhe(n){return new Fk("increment",n)}(e);return t._methodName="FieldValue.increment",new Bf(t)}isEqual(e){return this._delegate.isEqual(e._delegate)}}const Jhe={Firestore:G8,GeoPoint:xS,Timestamp:Nr,Blob:db,Transaction:W8,WriteBatch:j8,DocumentReference:gl,DocumentSnapshot:hb,Query:Wo,QueryDocumentSnapshot:fb,QuerySnapshot:qk,CollectionReference:Zg,FieldPath:Xk,FieldValue:Bf,setLogLevel:function Qhe(n){!function Lle(n){Od.setLogLevel(n)}(n)},CACHE_SIZE_UNLIMITED:-1};function X8(n,e){return function nfe(n,e=E0){return new xt(t=>{let i;return null!=e?e.schedule(()=>{i=n.onSnapshot({includeMetadataChanges:!0},t)}):i=n.onSnapshot({includeMetadataChanges:!0},t),()=>{i?.()}})}(n,e)}function Kk(n,e){return X8(n,e).pipe(Ge(t=>({payload:t,type:"query"})))}!function tfe(n){(function efe(n,e){n.INTERNAL.registerComponent(new PT.uA("firestore-compat",t=>{const i=t.getProvider("app-compat").getImmediate(),r=t.getProvider("firestore").getImmediate();return e(i,r)},"PUBLIC").setServiceProps(Object.assign({},Jhe)))})(n,(e,t)=>new G8(e,t,new Yhe)),n.registerVersion("@firebase/firestore-compat","0.3.38")}(mc.A);class K8{ref;afs;constructor(e,t){this.ref=e,this.afs=t}set(e,t){return this.ref.set(e,t)}update(e){return this.ref.update(e)}delete(){return this.ref.delete()}collection(e,t){const i=this.ref.collection(e),{ref:r,query:s}=tW(i,t);return new Z8(r,s,this.afs)}snapshotChanges(){return function ife(n,e){return X8(n,e).pipe(pf(void 0),ER(),Ge(t=>{const[i,r]=t;return r.exists?i?.exists?{payload:r,type:"modified"}:{payload:r,type:"added"}:{payload:r,type:"removed"}}))}(this.ref,this.afs.schedulers.outsideAngular).pipe(Ho)}valueChanges(e={}){return this.snapshotChanges().pipe(Ge(({payload:t})=>e.idField?{...t.data(),[e.idField]:t.id}:t.data()))}get(e){return q(this.ref.get(e)).pipe(Ho)}}function OS(n,e){return Kk(n,e).pipe(pf(void 0),ER(),Ge(t=>{const[i,r]=t,s=r.payload.docChanges(),o=s.map(a=>({type:a.type,payload:a}));return i&&JSON.stringify(i.payload.metadata)!==JSON.stringify(r.payload.metadata)&&r.payload.docs.forEach((a,l)=>{const c=s.find(d=>d.doc.ref.isEqual(a.ref)),u=i?.payload.docs.find(d=>d.ref.isEqual(a.ref));c&&JSON.stringify(c.doc.metadata)===JSON.stringify(a.metadata)||!c&&u&&JSON.stringify(u.metadata)===JSON.stringify(a.metadata)||o.push({type:"modified",payload:{oldIndex:l,newIndex:l,type:"modified",doc:a}})}),o}))}function Y8(n,e,t){return OS(n,t).pipe(uT((i,r)=>function rfe(n,e,t){return e.forEach(i=>{t.indexOf(i.type)>-1&&(n=function sfe(n,e){switch(e.type){case"added":if(!n[e.newIndex]||!n[e.newIndex].doc.ref.isEqual(e.doc.ref))return Yk(n,e.newIndex,0,e);break;case"modified":if(null==n[e.oldIndex]||n[e.oldIndex].doc.ref.isEqual(e.doc.ref)){if(e.oldIndex!==e.newIndex){const t=n.slice();return t.splice(e.oldIndex,1),t.splice(e.newIndex,0,e),t}return Yk(n,e.newIndex,1,e)}break;case"removed":if(n[e.oldIndex]&&n[e.oldIndex].doc.ref.isEqual(e.doc.ref))return Yk(n,e.oldIndex,1)}return n}(n,i))}),n}(i,r.map(s=>s.payload),e),[]),Zi(),Ge(i=>i.map(r=>({type:r.type,payload:r}))))}function Yk(n,e,t,...i){const r=n.slice();return r.splice(e,t,...i),r}function Q8(n){return(!n||0===n.length)&&(n=["added","removed","modified"]),n}class Z8{ref;query;afs;constructor(e,t,i){this.ref=e,this.query=t,this.afs=i}stateChanges(e){let t=OS(this.query,this.afs.schedulers.outsideAngular);return e&&e.length>0&&(t=t.pipe(Ge(i=>i.filter(r=>e.indexOf(r.type)>-1)))),t.pipe(pf(void 0),ER(),Is(([i,r])=>r.length>0||!i),Ge(([,i])=>i),Ho)}auditTrail(e){return this.stateChanges(e).pipe(uT((t,i)=>[...t,...i],[]))}snapshotChanges(e){const t=Q8(e);return Y8(this.query,t,this.afs.schedulers.outsideAngular).pipe(Ho)}valueChanges(e={}){return Kk(this.query,this.afs.schedulers.outsideAngular).pipe(Ge(t=>t.payload.docs.map(i=>e.idField?{...i.data(),[e.idField]:i.id}:i.data())),Ho)}get(e){return q(this.query.get(e)).pipe(Ho)}add(e){return this.ref.add(e)}doc(e){return new K8(this.ref.doc(e),this.afs)}}class ofe{query;afs;constructor(e,t){this.query=e,this.afs=t}stateChanges(e){return e&&0!==e.length?OS(this.query,this.afs.schedulers.outsideAngular).pipe(Ge(t=>t.filter(i=>e.indexOf(i.type)>-1)),Is(t=>t.length>0),Ho):OS(this.query,this.afs.schedulers.outsideAngular).pipe(Ho)}auditTrail(e){return this.stateChanges(e).pipe(uT((t,i)=>[...t,...i],[]))}snapshotChanges(e){const t=Q8(e);return Y8(this.query,t,this.afs.schedulers.outsideAngular).pipe(Ho)}valueChanges(e={}){return Kk(this.query,this.afs.schedulers.outsideAngular).pipe(Ge(i=>i.payload.docs.map(r=>e.idField?{[e.idField]:r.id,...r.data()}:r.data())),Ho)}get(e){return q(this.query.get(e)).pipe(Ho)}}const J8=new Fe("angularfire2.enableFirestorePersistence"),eW=new Fe("angularfire2.firestore.persistenceSettings"),afe=new Fe("angularfire2.firestore.settings"),lfe=new Fe("angularfire2.firestore.use-emulator");function tW(n,e=(t=>t)){return{query:e(n),ref:n}}let pb=(()=>{class n{schedulers;firestore;persistenceEnabled$;constructor(t,i,r,s,o,a,l,c,u,d,p,m,v,x,b,w,T){this.schedulers=l;const S=RT(t,a,i),A=u;d&&ZH(S,a,p,v,x,b,m,w),[this.firestore,this.persistenceEnabled$]=xR(`${S.name}.firestore`,"AngularFirestore",S.name,()=>{const V=a.runOutsideAngular(()=>S.firestore());if(s&&V.settings(s),A&&V.useEmulator(...A),r&&!nT(o)){const F=()=>{try{return q(V.enablePersistence(c||void 0).then(()=>!0,()=>!1))}catch(P){return typeof console<"u"&&console.warn(P),ne(!1)}};return[V,a.runOutsideAngular(F)]}return[V,ne(!1)]},[s,A,r])}collection(t,i){let r;r="string"==typeof t?this.firestore.collection(t):t;const{ref:s,query:o}=tW(r,i),a=this.schedulers.ngZone.run(()=>s);return new Z8(a,o,this)}collectionGroup(t,i){const r=i||(o=>o),s=this.firestore.collectionGroup(t);return new ofe(r(s),this)}doc(t){let i;i="string"==typeof t?this.firestore.doc(t):t;const r=this.schedulers.ngZone.run(()=>i);return new K8(r,this)}createId(){return this.firestore.collection("_").doc().id}static \u0275fac=function(i){return new(i||n)(ue(T0),ue(S0,8),ue(J8,8),ue(afe,8),ue(al),ue(mn),ue(bR),ue(eW,8),ue(lfe,8),ue(JH,8),ue($H,8),ue(qH,8),ue(XH,8),ue(KH,8),ue(YH,8),ue(QH,8),ue(yR,8))};static \u0275prov=dt({token:n,factory:n.\u0275fac,providedIn:"any"})}return n})(),cfe=(()=>{class n{constructor(){mc.A.registerVersion("angularfire",DT.full,"fst-compat")}static enablePersistence(t){return{ngModule:n,providers:[{provide:J8,useValue:!0},{provide:eW,useValue:t}]}}static \u0275fac=function(i){return new(i||n)};static \u0275mod=ni({type:n});static \u0275inj=jn({providers:[pb]})}return n})(),nW=(()=>{class n{constructor(t){this.firestore=t}cleanupExpiredFiles(){var t=this;return(0,Me.A)(function*(){const i=Date.now();(yield t.firestore.collection("files",s=>s.where("expiresAt","<",i)).get().toPromise())?.forEach(s=>{t.firestore.collection("files").doc(s.id).delete()})})()}cleanupondestroy(){var t=this;return(0,Me.A)(function*(){const i=sessionStorage.getItem("Token");(yield t.firestore.collection("files",s=>s.where("Token","==",i)).get().toPromise())?.forEach(s=>{t.firestore.collection("files").doc(s.id).delete()}),sessionStorage.removeItem("Token")})()}static{this.\u0275fac=function(i){return new(i||n)(ue(pb))}}static{this.\u0275prov=dt({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();class NS{}class FS{}class Tc{constructor(e){this.normalizedNames=new Map,this.lazyUpdate=null,e?"string"==typeof e?this.lazyInit=()=>{this.headers=new Map,e.split("\n").forEach(t=>{const i=t.indexOf(":");if(i>0){const r=t.slice(0,i),s=r.toLowerCase(),o=t.slice(i+1).trim();this.maybeSetNormalizedName(r,s),this.headers.has(s)?this.headers.get(s).push(o):this.headers.set(s,[o])}})}:typeof Headers<"u"&&e instanceof Headers?(this.headers=new Map,e.forEach((t,i)=>{this.setHeaderEntries(i,t)})):this.lazyInit=()=>{this.headers=new Map,Object.entries(e).forEach(([t,i])=>{this.setHeaderEntries(t,i)})}:this.headers=new Map}has(e){return this.init(),this.headers.has(e.toLowerCase())}get(e){this.init();const t=this.headers.get(e.toLowerCase());return t&&t.length>0?t[0]:null}keys(){return this.init(),Array.from(this.normalizedNames.values())}getAll(e){return this.init(),this.headers.get(e.toLowerCase())||null}append(e,t){return this.clone({name:e,value:t,op:"a"})}set(e,t){return this.clone({name:e,value:t,op:"s"})}delete(e,t){return this.clone({name:e,value:t,op:"d"})}maybeSetNormalizedName(e,t){this.normalizedNames.has(t)||this.normalizedNames.set(t,e)}init(){this.lazyInit&&(this.lazyInit instanceof Tc?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(e=>this.applyUpdate(e)),this.lazyUpdate=null))}copyFrom(e){e.init(),Array.from(e.headers.keys()).forEach(t=>{this.headers.set(t,e.headers.get(t)),this.normalizedNames.set(t,e.normalizedNames.get(t))})}clone(e){const t=new Tc;return t.lazyInit=this.lazyInit&&this.lazyInit instanceof Tc?this.lazyInit:this,t.lazyUpdate=(this.lazyUpdate||[]).concat([e]),t}applyUpdate(e){const t=e.name.toLowerCase();switch(e.op){case"a":case"s":let i=e.value;if("string"==typeof i&&(i=[i]),0===i.length)return;this.maybeSetNormalizedName(e.name,t);const r=("a"===e.op?this.headers.get(t):void 0)||[];r.push(...i),this.headers.set(t,r);break;case"d":const s=e.value;if(s){let o=this.headers.get(t);if(!o)return;o=o.filter(a=>-1===s.indexOf(a)),0===o.length?(this.headers.delete(t),this.normalizedNames.delete(t)):this.headers.set(t,o)}else this.headers.delete(t),this.normalizedNames.delete(t)}}setHeaderEntries(e,t){const i=(Array.isArray(t)?t:[t]).map(s=>s.toString()),r=e.toLowerCase();this.headers.set(r,i),this.maybeSetNormalizedName(e,r)}forEach(e){this.init(),Array.from(this.normalizedNames.keys()).forEach(t=>e(this.normalizedNames.get(t),this.headers.get(t)))}}class ufe{encodeKey(e){return iW(e)}encodeValue(e){return iW(e)}decodeKey(e){return decodeURIComponent(e)}decodeValue(e){return decodeURIComponent(e)}}const hfe=/%(\d[a-f0-9])/gi,ffe={40:"@","3A":":",24:"$","2C":",","3B":";","3D":"=","3F":"?","2F":"/"};function iW(n){return encodeURIComponent(n).replace(hfe,(e,t)=>ffe[t]??e)}function LS(n){return`${n}`}class Jd{constructor(e={}){if(this.updates=null,this.cloneFrom=null,this.encoder=e.encoder||new ufe,e.fromString){if(e.fromObject)throw new Error("Cannot specify both fromString and fromObject.");this.map=function dfe(n,e){const t=new Map;return n.length>0&&n.replace(/^\?/,"").split("&").forEach(r=>{const s=r.indexOf("="),[o,a]=-1==s?[e.decodeKey(r),""]:[e.decodeKey(r.slice(0,s)),e.decodeValue(r.slice(s+1))],l=t.get(o)||[];l.push(a),t.set(o,l)}),t}(e.fromString,this.encoder)}else e.fromObject?(this.map=new Map,Object.keys(e.fromObject).forEach(t=>{const i=e.fromObject[t],r=Array.isArray(i)?i.map(LS):[LS(i)];this.map.set(t,r)})):this.map=null}has(e){return this.init(),this.map.has(e)}get(e){this.init();const t=this.map.get(e);return t?t[0]:null}getAll(e){return this.init(),this.map.get(e)||null}keys(){return this.init(),Array.from(this.map.keys())}append(e,t){return this.clone({param:e,value:t,op:"a"})}appendAll(e){const t=[];return Object.keys(e).forEach(i=>{const r=e[i];Array.isArray(r)?r.forEach(s=>{t.push({param:i,value:s,op:"a"})}):t.push({param:i,value:r,op:"a"})}),this.clone(t)}set(e,t){return this.clone({param:e,value:t,op:"s"})}delete(e,t){return this.clone({param:e,value:t,op:"d"})}toString(){return this.init(),this.keys().map(e=>{const t=this.encoder.encodeKey(e);return this.map.get(e).map(i=>t+"="+this.encoder.encodeValue(i)).join("&")}).filter(e=>""!==e).join("&")}clone(e){const t=new Jd({encoder:this.encoder});return t.cloneFrom=this.cloneFrom||this,t.updates=(this.updates||[]).concat(e),t}init(){null===this.map&&(this.map=new Map),null!==this.cloneFrom&&(this.cloneFrom.init(),this.cloneFrom.keys().forEach(e=>this.map.set(e,this.cloneFrom.map.get(e))),this.updates.forEach(e=>{switch(e.op){case"a":case"s":const t=("a"===e.op?this.map.get(e.param):void 0)||[];t.push(LS(e.value)),this.map.set(e.param,t);break;case"d":if(void 0===e.value){this.map.delete(e.param);break}{let i=this.map.get(e.param)||[];const r=i.indexOf(LS(e.value));-1!==r&&i.splice(r,1),i.length>0?this.map.set(e.param,i):this.map.delete(e.param)}}}),this.cloneFrom=this.updates=null)}}class pfe{constructor(){this.map=new Map}set(e,t){return this.map.set(e,t),this}get(e){return this.map.has(e)||this.map.set(e,e.defaultValue()),this.map.get(e)}delete(e){return this.map.delete(e),this}has(e){return this.map.has(e)}keys(){return this.map.keys()}}function rW(n){return typeof ArrayBuffer<"u"&&n instanceof ArrayBuffer}function sW(n){return typeof Blob<"u"&&n instanceof Blob}function oW(n){return typeof FormData<"u"&&n instanceof FormData}class mb{constructor(e,t,i,r){let s;if(this.url=t,this.body=null,this.reportProgress=!1,this.withCredentials=!1,this.responseType="json",this.method=e.toUpperCase(),function mfe(n){switch(n){case"DELETE":case"GET":case"HEAD":case"OPTIONS":case"JSONP":return!1;default:return!0}}(this.method)||r?(this.body=void 0!==i?i:null,s=r):s=i,s&&(this.reportProgress=!!s.reportProgress,this.withCredentials=!!s.withCredentials,s.responseType&&(this.responseType=s.responseType),s.headers&&(this.headers=s.headers),s.context&&(this.context=s.context),s.params&&(this.params=s.params)),this.headers||(this.headers=new Tc),this.context||(this.context=new pfe),this.params){const o=this.params.toString();if(0===o.length)this.urlWithParams=t;else{const a=t.indexOf("?");this.urlWithParams=t+(-1===a?"?":a<t.length-1?"&":"")+o}}else this.params=new Jd,this.urlWithParams=t}serializeBody(){return null===this.body?null:rW(this.body)||sW(this.body)||oW(this.body)||function gfe(n){return typeof URLSearchParams<"u"&&n instanceof URLSearchParams}(this.body)||"string"==typeof this.body?this.body:this.body instanceof Jd?this.body.toString():"object"==typeof this.body||"boolean"==typeof this.body||Array.isArray(this.body)?JSON.stringify(this.body):this.body.toString()}detectContentTypeHeader(){return null===this.body||oW(this.body)?null:sW(this.body)?this.body.type||null:rW(this.body)?null:"string"==typeof this.body?"text/plain":this.body instanceof Jd?"application/x-www-form-urlencoded;charset=UTF-8":"object"==typeof this.body||"number"==typeof this.body||"boolean"==typeof this.body?"application/json":null}clone(e={}){const t=e.method||this.method,i=e.url||this.url,r=e.responseType||this.responseType,s=void 0!==e.body?e.body:this.body,o=void 0!==e.withCredentials?e.withCredentials:this.withCredentials,a=void 0!==e.reportProgress?e.reportProgress:this.reportProgress;let l=e.headers||this.headers,c=e.params||this.params;const u=e.context??this.context;return void 0!==e.setHeaders&&(l=Object.keys(e.setHeaders).reduce((d,p)=>d.set(p,e.setHeaders[p]),l)),e.setParams&&(c=Object.keys(e.setParams).reduce((d,p)=>d.set(p,e.setParams[p]),c)),new mb(t,i,s,{params:c,headers:l,context:u,reportProgress:a,responseType:r,withCredentials:o})}}var Jg=function(n){return n[n.Sent=0]="Sent",n[n.UploadProgress=1]="UploadProgress",n[n.ResponseHeader=2]="ResponseHeader",n[n.DownloadProgress=3]="DownloadProgress",n[n.Response=4]="Response",n[n.User=5]="User",n}(Jg||{});class Qk{constructor(e,t=200,i="OK"){this.headers=e.headers||new Tc,this.status=void 0!==e.status?e.status:t,this.statusText=e.statusText||i,this.url=e.url||null,this.ok=this.status>=200&&this.status<300}}class Zk extends Qk{constructor(e={}){super(e),this.type=Jg.ResponseHeader}clone(e={}){return new Zk({headers:e.headers||this.headers,status:void 0!==e.status?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0})}}class e_ extends Qk{constructor(e={}){super(e),this.type=Jg.Response,this.body=void 0!==e.body?e.body:null}clone(e={}){return new e_({body:void 0!==e.body?e.body:this.body,headers:e.headers||this.headers,status:void 0!==e.status?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0})}}class aW extends Qk{constructor(e){super(e,0,"Unknown Error"),this.name="HttpErrorResponse",this.ok=!1,this.message=this.status>=200&&this.status<300?`Http failure during parsing for ${e.url||"(unknown url)"}`:`Http failure response for ${e.url||"(unknown url)"}: ${e.status} ${e.statusText}`,this.error=e.error||null}}function Jk(n,e){return{body:e,headers:n.headers,context:n.context,observe:n.observe,params:n.params,reportProgress:n.reportProgress,responseType:n.responseType,withCredentials:n.withCredentials}}let gb=(()=>{class n{constructor(t){this.handler=t}request(t,i,r={}){let s;if(t instanceof mb)s=t;else{let l,c;l=r.headers instanceof Tc?r.headers:new Tc(r.headers),r.params&&(c=r.params instanceof Jd?r.params:new Jd({fromObject:r.params})),s=new mb(t,i,void 0!==r.body?r.body:null,{headers:l,context:r.context,params:c,reportProgress:r.reportProgress,responseType:r.responseType||"json",withCredentials:r.withCredentials})}const o=ne(s).pipe(ig(l=>this.handler.handle(l)));if(t instanceof mb||"events"===r.observe)return o;const a=o.pipe(Is(l=>l instanceof e_));switch(r.observe||"body"){case"body":switch(s.responseType){case"arraybuffer":return a.pipe(Ge(l=>{if(null!==l.body&&!(l.body instanceof ArrayBuffer))throw new Error("Response is not an ArrayBuffer.");return l.body}));case"blob":return a.pipe(Ge(l=>{if(null!==l.body&&!(l.body instanceof Blob))throw new Error("Response is not a Blob.");return l.body}));case"text":return a.pipe(Ge(l=>{if(null!==l.body&&"string"!=typeof l.body)throw new Error("Response is not a string.");return l.body}));default:return a.pipe(Ge(l=>l.body))}case"response":return a;default:throw new Error(`Unreachable: unhandled observe type ${r.observe}}`)}}delete(t,i={}){return this.request("DELETE",t,i)}get(t,i={}){return this.request("GET",t,i)}head(t,i={}){return this.request("HEAD",t,i)}jsonp(t,i){return this.request("JSONP",t,{params:(new Jd).append(i,"JSONP_CALLBACK"),observe:"body",responseType:"json"})}options(t,i={}){return this.request("OPTIONS",t,i)}patch(t,i,r={}){return this.request("PATCH",t,Jk(r,i))}post(t,i,r={}){return this.request("POST",t,Jk(r,i))}put(t,i,r={}){return this.request("PUT",t,Jk(r,i))}static{this.\u0275fac=function(i){return new(i||n)(ue(NS))}}static{this.\u0275prov=dt({token:n,factory:n.\u0275fac})}}return n})();function uW(n,e){return e(n)}function vfe(n,e){return(t,i)=>e.intercept(t,{handle:r=>n(r,i)})}const bfe=new Fe(""),_b=new Fe(""),dW=new Fe("");function xfe(){let n=null;return(e,t)=>{null===n&&(n=(bt(bfe,{optional:!0})??[]).reduceRight(vfe,uW));const i=bt(LE),r=i.add();return n(e,t).pipe(rg(()=>i.remove(r)))}}let hW=(()=>{class n extends NS{constructor(t,i){super(),this.backend=t,this.injector=i,this.chain=null,this.pendingTasks=bt(LE)}handle(t){if(null===this.chain){const r=Array.from(new Set([...this.injector.get(_b),...this.injector.get(dW,[])]));this.chain=r.reduceRight((s,o)=>function yfe(n,e,t){return(i,r)=>t.runInContext(()=>e(i,s=>n(s,r)))}(s,o,this.injector),uW)}const i=this.pendingTasks.add();return this.chain(t,r=>this.backend.handle(r)).pipe(rg(()=>this.pendingTasks.remove(i)))}static{this.\u0275fac=function(i){return new(i||n)(ue(FS),ue(Da))}}static{this.\u0275prov=dt({token:n,factory:n.\u0275fac})}}return n})();const Sfe=/^\)\]\}',?\n/;let pW=(()=>{class n{constructor(t){this.xhrFactory=t}handle(t){if("JSONP"===t.method)throw new Ce(-2800,!1);const i=this.xhrFactory;return(i.\u0275loadImpl?q(i.\u0275loadImpl()):ne(null)).pipe(Mt(()=>new xt(s=>{const o=i.build();if(o.open(t.method,t.urlWithParams),t.withCredentials&&(o.withCredentials=!0),t.headers.forEach((x,b)=>o.setRequestHeader(x,b.join(","))),t.headers.has("Accept")||o.setRequestHeader("Accept","application/json, text/plain, */*"),!t.headers.has("Content-Type")){const x=t.detectContentTypeHeader();null!==x&&o.setRequestHeader("Content-Type",x)}if(t.responseType){const x=t.responseType.toLowerCase();o.responseType="json"!==x?x:"text"}const a=t.serializeBody();let l=null;const c=()=>{if(null!==l)return l;const x=o.statusText||"OK",b=new Tc(o.getAllResponseHeaders()),w=function Afe(n){return"responseURL"in n&&n.responseURL?n.responseURL:/^X-Request-URL:/m.test(n.getAllResponseHeaders())?n.getResponseHeader("X-Request-URL"):null}(o)||t.url;return l=new Zk({headers:b,status:o.status,statusText:x,url:w}),l},u=()=>{let{headers:x,status:b,statusText:w,url:T}=c(),S=null;204!==b&&(S=typeof o.response>"u"?o.responseText:o.response),0===b&&(b=S?200:0);let A=b>=200&&b<300;if("json"===t.responseType&&"string"==typeof S){const V=S;S=S.replace(Sfe,"");try{S=""!==S?JSON.parse(S):null}catch(F){S=V,A&&(A=!1,S={error:F,text:S})}}A?(s.next(new e_({body:S,headers:x,status:b,statusText:w,url:T||void 0})),s.complete()):s.error(new aW({error:S,headers:x,status:b,statusText:w,url:T||void 0}))},d=x=>{const{url:b}=c(),w=new aW({error:x,status:o.status||0,statusText:o.statusText||"Unknown Error",url:b||void 0});s.error(w)};let p=!1;const m=x=>{p||(s.next(c()),p=!0);let b={type:Jg.DownloadProgress,loaded:x.loaded};x.lengthComputable&&(b.total=x.total),"text"===t.responseType&&o.responseText&&(b.partialText=o.responseText),s.next(b)},v=x=>{let b={type:Jg.UploadProgress,loaded:x.loaded};x.lengthComputable&&(b.total=x.total),s.next(b)};return o.addEventListener("load",u),o.addEventListener("error",d),o.addEventListener("timeout",d),o.addEventListener("abort",d),t.reportProgress&&(o.addEventListener("progress",m),null!==a&&o.upload&&o.upload.addEventListener("progress",v)),o.send(a),s.next({type:Jg.Sent}),()=>{o.removeEventListener("error",d),o.removeEventListener("abort",d),o.removeEventListener("load",u),o.removeEventListener("timeout",d),t.reportProgress&&(o.removeEventListener("progress",m),null!==a&&o.upload&&o.upload.removeEventListener("progress",v)),o.readyState!==o.DONE&&o.abort()}})))}static{this.\u0275fac=function(i){return new(i||n)(ue(uz))}}static{this.\u0275prov=dt({token:n,factory:n.\u0275fac})}}return n})();const eO=new Fe("XSRF_ENABLED"),mW=new Fe("XSRF_COOKIE_NAME",{providedIn:"root",factory:()=>"XSRF-TOKEN"}),gW=new Fe("XSRF_HEADER_NAME",{providedIn:"root",factory:()=>"X-XSRF-TOKEN"});class _W{}let Mfe=(()=>{class n{constructor(t,i,r){this.doc=t,this.platform=i,this.cookieName=r,this.lastCookieString="",this.lastToken=null,this.parseCount=0}getToken(){if("server"===this.platform)return null;const t=this.doc.cookie||"";return t!==this.lastCookieString&&(this.parseCount++,this.lastToken=J4(t,this.cookieName),this.lastCookieString=t),this.lastToken}static{this.\u0275fac=function(i){return new(i||n)(ue(_i),ue(al),ue(mW))}}static{this.\u0275prov=dt({token:n,factory:n.\u0275fac})}}return n})();function Dfe(n,e){const t=n.url.toLowerCase();if(!bt(eO)||"GET"===n.method||"HEAD"===n.method||t.startsWith("http://")||t.startsWith("https://"))return e(n);const i=bt(_W).getToken(),r=bt(gW);return null!=i&&!n.headers.has(r)&&(n=n.clone({headers:n.headers.set(r,i)})),e(n)}var eh=function(n){return n[n.Interceptors=0]="Interceptors",n[n.LegacyInterceptors=1]="LegacyInterceptors",n[n.CustomXsrfConfiguration=2]="CustomXsrfConfiguration",n[n.NoXsrfProtection=3]="NoXsrfProtection",n[n.JsonpSupport=4]="JsonpSupport",n[n.RequestsMadeViaParent=5]="RequestsMadeViaParent",n[n.Fetch=6]="Fetch",n}(eh||{});function zf(n,e){return{\u0275kind:n,\u0275providers:e}}function Rfe(...n){const e=[gb,pW,hW,{provide:NS,useExisting:hW},{provide:FS,useExisting:pW},{provide:_b,useValue:Dfe,multi:!0},{provide:eO,useValue:!0},{provide:_W,useClass:Mfe}];for(const t of n)e.push(...t.\u0275providers);return rE(e)}const vW=new Fe("LEGACY_INTERCEPTOR_FN");let kfe=(()=>{class n{static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275mod=ni({type:n})}static{this.\u0275inj=jn({providers:[Rfe(zf(eh.LegacyInterceptors,[{provide:vW,useFactory:xfe},{provide:_b,useExisting:vW,multi:!0}]))]})}}return n})();class yW{}class Ufe{}const Du="*";function vb(n,e){return{type:7,name:n,definitions:e,options:{}}}function t_(n,e=null){return{type:4,styles:e,timings:n}}function bW(n,e=null){return{type:2,steps:n,options:e}}function _l(n){return{type:6,styles:n,offset:null}}function yb(n,e,t){return{type:0,name:n,styles:e,options:t}}function Hf(n,e,t=null){return{type:1,expr:n,animation:e,options:t}}function Bfe(n=null){return{type:9,options:n}}function zfe(n,e,t=null){return{type:11,selector:n,animation:e,options:t}}class bb{constructor(e=0,t=0){this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._originalOnDoneFns=[],this._originalOnStartFns=[],this._started=!1,this._destroyed=!1,this._finished=!1,this._position=0,this.parentPlayer=null,this.totalTime=e+t}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(e=>e()),this._onDoneFns=[])}onStart(e){this._originalOnStartFns.push(e),this._onStartFns.push(e)}onDone(e){this._originalOnDoneFns.push(e),this._onDoneFns.push(e)}onDestroy(e){this._onDestroyFns.push(e)}hasStarted(){return this._started}init(){}play(){this.hasStarted()||(this._onStart(),this.triggerMicrotask()),this._started=!0}triggerMicrotask(){queueMicrotask(()=>this._onFinish())}_onStart(){this._onStartFns.forEach(e=>e()),this._onStartFns=[]}pause(){}restart(){}finish(){this._onFinish()}destroy(){this._destroyed||(this._destroyed=!0,this.hasStarted()||this._onStart(),this.finish(),this._onDestroyFns.forEach(e=>e()),this._onDestroyFns=[])}reset(){this._started=!1,this._finished=!1,this._onStartFns=this._originalOnStartFns,this._onDoneFns=this._originalOnDoneFns}setPosition(e){this._position=this.totalTime?e*this.totalTime:1}getPosition(){return this.totalTime?this._position/this.totalTime:1}triggerCallback(e){const t="start"==e?this._onStartFns:this._onDoneFns;t.forEach(i=>i()),t.length=0}}class xW{constructor(e){this._onDoneFns=[],this._onStartFns=[],this._finished=!1,this._started=!1,this._destroyed=!1,this._onDestroyFns=[],this.parentPlayer=null,this.totalTime=0,this.players=e;let t=0,i=0,r=0;const s=this.players.length;0==s?queueMicrotask(()=>this._onFinish()):this.players.forEach(o=>{o.onDone(()=>{++t==s&&this._onFinish()}),o.onDestroy(()=>{++i==s&&this._onDestroy()}),o.onStart(()=>{++r==s&&this._onStart()})}),this.totalTime=this.players.reduce((o,a)=>Math.max(o,a.totalTime),0)}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(e=>e()),this._onDoneFns=[])}init(){this.players.forEach(e=>e.init())}onStart(e){this._onStartFns.push(e)}_onStart(){this.hasStarted()||(this._started=!0,this._onStartFns.forEach(e=>e()),this._onStartFns=[])}onDone(e){this._onDoneFns.push(e)}onDestroy(e){this._onDestroyFns.push(e)}hasStarted(){return this._started}play(){this.parentPlayer||this.init(),this._onStart(),this.players.forEach(e=>e.play())}pause(){this.players.forEach(e=>e.pause())}restart(){this.players.forEach(e=>e.restart())}finish(){this._onFinish(),this.players.forEach(e=>e.finish())}destroy(){this._onDestroy()}_onDestroy(){this._destroyed||(this._destroyed=!0,this._onFinish(),this.players.forEach(e=>e.destroy()),this._onDestroyFns.forEach(e=>e()),this._onDestroyFns=[])}reset(){this.players.forEach(e=>e.reset()),this._destroyed=!1,this._finished=!1,this._started=!1}setPosition(e){const t=e*this.totalTime;this.players.forEach(i=>{const r=i.totalTime?Math.min(1,t/i.totalTime):1;i.setPosition(r)})}getPosition(){const e=this.players.reduce((t,i)=>null===t||i.totalTime>t.totalTime?i:t,null);return null!=e?e.getPosition():0}beforeDestroy(){this.players.forEach(e=>{e.beforeDestroy&&e.beforeDestroy()})}triggerCallback(e){const t="start"==e?this._onStartFns:this._onDoneFns;t.forEach(i=>i()),t.length=0}}const wW=["toast-component",""];function Hfe(n,e){if(1&n){const t=Dl();at(0,"button",5),qn("click",function(){return Ts(t),Ys(pn().remove())}),at(1,"span",6),zn(2,"\xd7"),ct()()}}function Gfe(n,e){if(1&n&&(Vy(0),zn(1),Uy()),2&n){const t=pn(2);_t(1),aa("[",t.duplicatesCount+1,"]")}}function Wfe(n,e){if(1&n&&(at(0,"div"),zn(1),Yt(2,Gfe,2,1,"ng-container",4),ct()),2&n){const t=pn();du(t.options.titleClass),or("aria-label",t.title),_t(1),aa(" ",t.title," "),_t(1),gt("ngIf",t.duplicatesCount)}}function jfe(n,e){if(1&n&&Ri(0,"div",7),2&n){const t=pn();du(t.options.messageClass),gt("innerHTML",t.message,iE)}}function $fe(n,e){if(1&n&&(at(0,"div",8),zn(1),ct()),2&n){const t=pn();du(t.options.messageClass),or("aria-label",t.message),_t(1),aa(" ",t.message," ")}}function qfe(n,e){if(1&n&&(at(0,"div"),Ri(1,"div",9),ct()),2&n){const t=pn();_t(1),Ad("width",t.width()+"%")}}class epe{_attachedHost;component;viewContainerRef;injector;constructor(e,t){this.component=e,this.injector=t}attach(e,t){return this._attachedHost=e,e.attach(this,t)}detach(){const e=this._attachedHost;if(e)return this._attachedHost=void 0,e.detach()}get isAttached(){return null!=this._attachedHost}setAttachedHost(e){this._attachedHost=e}}class tpe{_attachedPortal;_disposeFn;attach(e,t){return this._attachedPortal=e,this.attachComponentPortal(e,t)}detach(){this._attachedPortal&&this._attachedPortal.setAttachedHost(),this._attachedPortal=void 0,this._disposeFn&&(this._disposeFn(),this._disposeFn=void 0)}setDisposeFn(e){this._disposeFn=e}}class npe{_overlayRef;componentInstance;duplicatesCount=0;_afterClosed=new Q;_activate=new Q;_manualClose=new Q;_resetTimeout=new Q;_countDuplicate=new Q;constructor(e){this._overlayRef=e}manualClose(){this._manualClose.next(),this._manualClose.complete()}manualClosed(){return this._manualClose.asObservable()}timeoutReset(){return this._resetTimeout.asObservable()}countDuplicate(){return this._countDuplicate.asObservable()}close(){this._overlayRef.detach(),this._afterClosed.next(),this._manualClose.next(),this._afterClosed.complete(),this._manualClose.complete(),this._activate.complete(),this._resetTimeout.complete(),this._countDuplicate.complete()}afterClosed(){return this._afterClosed.asObservable()}isInactive(){return this._activate.isStopped}activate(){this._activate.next(),this._activate.complete()}afterActivate(){return this._activate.asObservable()}onDuplicate(e,t){e&&this._resetTimeout.next(),t&&this._countDuplicate.next(++this.duplicatesCount)}}class US{toastId;config;message;title;toastType;toastRef;_onTap=new Q;_onAction=new Q;constructor(e,t,i,r,s,o){this.toastId=e,this.config=t,this.message=i,this.title=r,this.toastType=s,this.toastRef=o,this.toastRef.afterClosed().subscribe(()=>{this._onAction.complete(),this._onTap.complete()})}triggerTap(){this._onTap.next(),this.config.tapToDismiss&&this._onTap.complete()}onTap(){return this._onTap.asObservable()}triggerAction(e){this._onAction.next(e)}onAction(){return this._onAction.asObservable()}}const TW=new Fe("ToastConfig");class ipe extends tpe{_hostDomElement;_componentFactoryResolver;_appRef;constructor(e,t,i){super(),this._hostDomElement=e,this._componentFactoryResolver=t,this._appRef=i}attachComponentPortal(e,t){const i=this._componentFactoryResolver.resolveComponentFactory(e.component);let r;return r=i.create(e.injector),this._appRef.attachView(r.hostView),this.setDisposeFn(()=>{this._appRef.detachView(r.hostView),r.destroy()}),t?this._hostDomElement.insertBefore(this._getComponentRootNode(r),this._hostDomElement.firstChild):this._hostDomElement.appendChild(this._getComponentRootNode(r)),r}_getComponentRootNode(e){return e.hostView.rootNodes[0]}}let rpe=(()=>{class n{_document=bt(_i);_containerElement;ngOnDestroy(){this._containerElement&&this._containerElement.parentNode&&this._containerElement.parentNode.removeChild(this._containerElement)}getContainerElement(){return this._containerElement||this._createContainer(),this._containerElement}_createContainer(){const t=this._document.createElement("div");t.classList.add("overlay-container"),t.setAttribute("aria-live","polite"),this._document.body.appendChild(t),this._containerElement=t}static \u0275fac=function(i){return new(i||n)};static \u0275prov=dt({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();class spe{_portalHost;constructor(e){this._portalHost=e}attach(e,t=!0){return this._portalHost.attach(e,t)}detach(){return this._portalHost.detach()}}let ope=(()=>{class n{_overlayContainer=bt(rpe);_componentFactoryResolver=bt(Om);_appRef=bt(dc);_document=bt(_i);_paneElements=new Map;create(t,i){return this._createOverlayRef(this.getPaneElement(t,i))}getPaneElement(t="",i){return this._paneElements.get(i)||this._paneElements.set(i,{}),this._paneElements.get(i)[t]||(this._paneElements.get(i)[t]=this._createPaneElement(t,i)),this._paneElements.get(i)[t]}_createPaneElement(t,i){const r=this._document.createElement("div");return r.id="toast-container",r.classList.add(t),r.classList.add("toast-container"),i?i.getContainerElement().appendChild(r):this._overlayContainer.getContainerElement().appendChild(r),r}_createPortalHost(t){return new ipe(t,this._componentFactoryResolver,this._appRef)}_createOverlayRef(t){return new spe(this._createPortalHost(t))}static \u0275fac=function(i){return new(i||n)};static \u0275prov=dt({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),nO=(()=>{class n{overlay;_injector;sanitizer;ngZone;toastrConfig;currentlyActive=0;toasts=[];overlayContainer;previousToastMessage;index=0;constructor(t,i,r,s,o){this.overlay=i,this._injector=r,this.sanitizer=s,this.ngZone=o,this.toastrConfig={...t.default,...t.config},t.config.iconClasses&&(this.toastrConfig.iconClasses={...t.default.iconClasses,...t.config.iconClasses})}show(t,i,r={},s=""){return this._preBuildNotification(s,t,i,this.applyConfig(r))}success(t,i,r={}){return this._preBuildNotification(this.toastrConfig.iconClasses.success||"",t,i,this.applyConfig(r))}error(t,i,r={}){return this._preBuildNotification(this.toastrConfig.iconClasses.error||"",t,i,this.applyConfig(r))}info(t,i,r={}){return this._preBuildNotification(this.toastrConfig.iconClasses.info||"",t,i,this.applyConfig(r))}warning(t,i,r={}){return this._preBuildNotification(this.toastrConfig.iconClasses.warning||"",t,i,this.applyConfig(r))}clear(t){for(const i of this.toasts)if(void 0!==t){if(i.toastId===t)return void i.toastRef.manualClose()}else i.toastRef.manualClose()}remove(t){const i=this._findToast(t);if(!i||(i.activeToast.toastRef.close(),this.toasts.splice(i.index,1),this.currentlyActive=this.currentlyActive-1,!this.toastrConfig.maxOpened||!this.toasts.length))return!1;if(this.currentlyActive<this.toastrConfig.maxOpened&&this.toasts[this.currentlyActive]){const r=this.toasts[this.currentlyActive].toastRef;r.isInactive()||(this.currentlyActive=this.currentlyActive+1,r.activate())}return!0}findDuplicate(t="",i="",r,s){const{includeTitleDuplicates:o}=this.toastrConfig;for(const a of this.toasts)if((!o||o&&a.title===t)&&a.message===i)return a.toastRef.onDuplicate(r,s),a;return null}applyConfig(t={}){return{...this.toastrConfig,...t}}_findToast(t){for(let i=0;i<this.toasts.length;i++)if(this.toasts[i].toastId===t)return{index:i,activeToast:this.toasts[i]};return null}_preBuildNotification(t,i,r,s){return s.onActivateTick?this.ngZone.run(()=>this._buildNotification(t,i,r,s)):this._buildNotification(t,i,r,s)}_buildNotification(t,i,r,s){if(!s.toastComponent)throw new Error("toastComponent required");const o=this.findDuplicate(r,i,this.toastrConfig.resetTimeoutOnDuplicate&&s.timeOut>0,this.toastrConfig.countDuplicates);if((this.toastrConfig.includeTitleDuplicates&&r||i)&&this.toastrConfig.preventDuplicates&&null!==o)return o;this.previousToastMessage=i;let a=!1;this.toastrConfig.maxOpened&&this.currentlyActive>=this.toastrConfig.maxOpened&&(a=!0,this.toastrConfig.autoDismiss&&this.clear(this.toasts[0].toastId));const l=this.overlay.create(s.positionClass,this.overlayContainer);this.index=this.index+1;let c=i;i&&s.enableHtml&&(c=this.sanitizer.sanitize(Fs.HTML,i));const u=new npe(l),d=new US(this.index,s,c,r,t,u),m=Ls.create({providers:[{provide:US,useValue:d}],parent:this._injector}),v=new epe(s.toastComponent,m),x=l.attach(v,s.newestOnTop);u.componentInstance=x.instance;const b={toastId:this.index,title:r||"",message:i||"",toastRef:u,onShown:u.afterActivate(),onHidden:u.afterClosed(),onTap:d.onTap(),onAction:d.onAction(),portal:x};return a||(this.currentlyActive=this.currentlyActive+1,setTimeout(()=>{b.toastRef.activate()})),this.toasts.push(b),b}static \u0275fac=function(i){return new(i||n)(ue(TW),ue(ope),ue(Ls),ue(o0),ue(mn))};static \u0275prov=dt({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();const ape={maxOpened:0,autoDismiss:!1,newestOnTop:!0,preventDuplicates:!1,countDuplicates:!1,resetTimeoutOnDuplicate:!1,includeTitleDuplicates:!1,iconClasses:{error:"toast-error",info:"toast-info",success:"toast-success",warning:"toast-warning"},closeButton:!1,disableTimeOut:!1,timeOut:5e3,extendedTimeOut:1e3,enableHtml:!1,progressBar:!1,toastClass:"ngx-toastr",positionClass:"toast-top-right",titleClass:"toast-title",messageClass:"toast-message",easing:"ease-in",easeTime:300,tapToDismiss:!0,onActivateTick:!1,progressAnimation:"decreasing",toastComponent:(()=>{class n{toastrService;toastPackage;ngZone;message;title;options;duplicatesCount;originalTimeout;width=Il(-1);toastClasses="";state;get _state(){return this.state()}get displayStyle(){if("inactive"===this.state().value)return"none"}timeout;intervalId;hideTime;sub;sub1;sub2;sub3;constructor(t,i,r){this.toastrService=t,this.toastPackage=i,this.ngZone=r,this.message=i.message,this.title=i.title,this.options=i.config,this.originalTimeout=i.config.timeOut,this.toastClasses=`${i.toastType} ${i.config.toastClass}`,this.sub=i.toastRef.afterActivate().subscribe(()=>{this.activateToast()}),this.sub1=i.toastRef.manualClosed().subscribe(()=>{this.remove()}),this.sub2=i.toastRef.timeoutReset().subscribe(()=>{this.resetTimeout()}),this.sub3=i.toastRef.countDuplicate().subscribe(s=>{this.duplicatesCount=s}),this.state=Il({value:"inactive",params:{easeTime:this.toastPackage.config.easeTime,easing:"ease-in"}})}ngOnDestroy(){this.sub.unsubscribe(),this.sub1.unsubscribe(),this.sub2.unsubscribe(),this.sub3.unsubscribe(),clearInterval(this.intervalId),clearTimeout(this.timeout)}activateToast(){this.state.update(t=>({...t,value:"active"})),!0!==this.options.disableTimeOut&&"timeOut"!==this.options.disableTimeOut&&this.options.timeOut&&(this.outsideTimeout(()=>this.remove(),this.options.timeOut),this.hideTime=(new Date).getTime()+this.options.timeOut,this.options.progressBar&&this.outsideInterval(()=>this.updateProgress(),10))}updateProgress(){if(0===this.width()||100===this.width()||!this.options.timeOut)return;const t=(new Date).getTime();this.width.set((this.hideTime-t)/this.options.timeOut*100),"increasing"===this.options.progressAnimation&&this.width.update(r=>100-r),this.width()<=0&&this.width.set(0),this.width()>=100&&this.width.set(100)}resetTimeout(){clearTimeout(this.timeout),clearInterval(this.intervalId),this.state.update(t=>({...t,value:"active"})),this.outsideTimeout(()=>this.remove(),this.originalTimeout),this.options.timeOut=this.originalTimeout,this.hideTime=(new Date).getTime()+(this.options.timeOut||0),this.width.set(-1),this.options.progressBar&&this.outsideInterval(()=>this.updateProgress(),10)}remove(){"removed"!==this.state().value&&(clearTimeout(this.timeout),this.state.update(t=>({...t,value:"removed"})),this.outsideTimeout(()=>this.toastrService.remove(this.toastPackage.toastId),+this.toastPackage.config.easeTime))}tapToast(){"removed"!==this.state().value&&(this.toastPackage.triggerTap(),this.options.tapToDismiss&&this.remove())}stickAround(){"removed"!==this.state().value&&"extendedTimeOut"!==this.options.disableTimeOut&&(clearTimeout(this.timeout),this.options.timeOut=0,this.hideTime=0,clearInterval(this.intervalId),this.width.set(0))}delayedHideToast(){!0===this.options.disableTimeOut||"extendedTimeOut"===this.options.disableTimeOut||0===this.options.extendedTimeOut||"removed"===this.state().value||(this.outsideTimeout(()=>this.remove(),this.options.extendedTimeOut),this.options.timeOut=this.options.extendedTimeOut,this.hideTime=(new Date).getTime()+(this.options.timeOut||0),this.width.set(-1),this.options.progressBar&&this.outsideInterval(()=>this.updateProgress(),10))}outsideTimeout(t,i){this.ngZone?this.ngZone.runOutsideAngular(()=>this.timeout=setTimeout(()=>this.runInsideAngular(t),i)):this.timeout=setTimeout(()=>t(),i)}outsideInterval(t,i){this.ngZone?this.ngZone.runOutsideAngular(()=>this.intervalId=setInterval(()=>this.runInsideAngular(t),i)):this.intervalId=setInterval(()=>t(),i)}runInsideAngular(t){this.ngZone?this.ngZone.run(()=>t()):t()}static \u0275fac=function(i){return new(i||n)(J(nO),J(US),J(mn))};static \u0275cmp=hr({type:n,selectors:[["","toast-component",""]],hostVars:5,hostBindings:function(i,r){1&i&&qn("click",function(){return r.tapToast()})("mouseenter",function(){return r.stickAround()})("mouseleave",function(){return r.delayedHideToast()}),2&i&&(PD("@flyInOut",r._state),du(r.toastClasses),Ad("display",r.displayStyle))},standalone:!0,features:[kE],attrs:wW,decls:5,vars:5,consts:[["type","button","class","toast-close-button","aria-label","Close",3,"click",4,"ngIf"],[3,"class",4,"ngIf"],["role","alert",3,"class","innerHTML",4,"ngIf"],["role","alert",3,"class",4,"ngIf"],[4,"ngIf"],["type","button","aria-label","Close",1,"toast-close-button",3,"click"],["aria-hidden","true"],["role","alert",3,"innerHTML"],["role","alert"],[1,"toast-progress"]],template:function(i,r){1&i&&(Yt(0,Hfe,3,0,"button",0),Yt(1,Wfe,3,5,"div",1),Yt(2,jfe,1,3,"div",2),Yt(3,$fe,2,4,"div",3),Yt(4,qfe,2,2,"div",4)),2&i&&(gt("ngIf",r.options.closeButton),_t(1),gt("ngIf",r.title),_t(1),gt("ngIf",r.message&&r.options.enableHtml),_t(1),gt("ngIf",r.message&&!r.options.enableHtml),_t(1),gt("ngIf",r.options.progressBar))},dependencies:[_u],encapsulation:2,data:{animation:[vb("flyInOut",[yb("inactive",_l({opacity:0})),yb("active",_l({opacity:1})),yb("removed",_l({opacity:0})),Hf("inactive => active",t_("{{ easeTime }}ms {{ easing }}")),Hf("active => removed",t_("{{ easeTime }}ms {{ easing }}"))])]},changeDetection:0})}return n})()},lpe=(n={})=>rE([{provide:TW,useValue:{default:ape,config:n}}]);let iO,cpe=(()=>{class n{static forRoot(t={}){return{ngModule:n,providers:[lpe(t)]}}static \u0275fac=function(i){return new(i||n)};static \u0275mod=ni({type:n});static \u0275inj=jn({})}return n})(),SW=(()=>{class n{constructor(t){this.toastr=t}showSuccess(t,i="Success"){this.toastr.success(t,i)}showError(t,i="Error"){this.toastr.error(t,i)}showWarning(t,i="Warning"){this.toastr.warning(t,i)}showInfo(t,i="Info"){this.toastr.info(t,i)}static{this.\u0275fac=function(i){return new(i||n)(ue(nO))}}static{this.\u0275prov=dt({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();try{iO=typeof Intl<"u"&&Intl.v8BreakIterator}catch{iO=!1}let n_,fa=(()=>{class n{constructor(t){this._platformId=t,this.isBrowser=this._platformId?function Lre(n){return n===cz}(this._platformId):"object"==typeof document&&!!document,this.EDGE=this.isBrowser&&/(edge)/i.test(navigator.userAgent),this.TRIDENT=this.isBrowser&&/(msie|trident)/i.test(navigator.userAgent),this.BLINK=this.isBrowser&&!(!window.chrome&&!iO)&&typeof CSS<"u"&&!this.EDGE&&!this.TRIDENT,this.WEBKIT=this.isBrowser&&/AppleWebKit/i.test(navigator.userAgent)&&!this.BLINK&&!this.EDGE&&!this.TRIDENT,this.IOS=this.isBrowser&&/iPad|iPhone|iPod/.test(navigator.userAgent)&&!("MSStream"in window),this.FIREFOX=this.isBrowser&&/(firefox|minefield)/i.test(navigator.userAgent),this.ANDROID=this.isBrowser&&/android/i.test(navigator.userAgent)&&!this.TRIDENT,this.SAFARI=this.isBrowser&&/safari/i.test(navigator.userAgent)&&this.WEBKIT}static{this.\u0275fac=function(i){return new(i||n)(ue(al))}}static{this.\u0275prov=dt({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();const AW=["color","button","checkbox","date","datetime-local","email","file","hidden","image","month","number","password","radio","range","reset","search","submit","tel","text","time","url","week"];function IW(){if(n_)return n_;if("object"!=typeof document||!document)return n_=new Set(AW),n_;let n=document.createElement("input");return n_=new Set(AW.filter(e=>(n.setAttribute("type",e),n.type===e))),n_}let xb,Gf;function wb(n){return function upe(){if(null==xb&&typeof window<"u")try{window.addEventListener("test",null,Object.defineProperty({},"passive",{get:()=>xb=!0}))}finally{xb=xb||!1}return xb}()?n:!!n.capture}function dpe(){if(null==Gf){if("object"!=typeof document||!document||"function"!=typeof Element||!Element)return Gf=!1,Gf;if("scrollBehavior"in document.documentElement.style)Gf=!0;else{const n=Element.prototype.scrollTo;Gf=!!n&&!/\{\s*\[native code\]\s*\}/.test(n.toString())}}return Gf}function sO(n){return n.composedPath?n.composedPath()[0]:n.target}function oO(){return typeof __karma__<"u"&&!!__karma__||typeof jasmine<"u"&&!!jasmine||typeof jest<"u"&&!!jest||typeof Mocha<"u"&&!!Mocha}function i_(n,...e){return e.length?e.some(t=>n[t]):n.altKey||n.shiftKey||n.ctrlKey||n.metaKey}function GS(n,e=E0){return re((t,i)=>{let r=null,s=null,o=null;const a=()=>{if(r){r.unsubscribe(),r=null;const c=s;s=null,i.next(c)}};function l(){const c=o+n,u=e.now();if(u<c)return r=this.schedule(void 0,c-u),void i.add(r);a()}t.subscribe(ye(i,c=>{s=c,o=e.now(),r||(r=e.schedule(l,n),i.add(r))},()=>{a(),i.complete()},void 0,()=>{s=r=null}))})}function xr(n){return null!=n&&"false"!=`${n}`}function r_(n,e=0){return function Cpe(n){return!isNaN(parseFloat(n))&&!isNaN(Number(n))}(n)?Number(n):e}function WS(n){return Array.isArray(n)?n:[n]}function ys(n){return null==n?"":"string"==typeof n?n:`${n}px`}function s_(n){return n instanceof Di?n.nativeElement:n}const DW=new Set;let Wf,Dpe=(()=>{class n{constructor(t,i){this._platform=t,this._nonce=i,this._matchMedia=this._platform.isBrowser&&window.matchMedia?window.matchMedia.bind(window):Ppe}matchMedia(t){return(this._platform.WEBKIT||this._platform.BLINK)&&function Rpe(n,e){if(!DW.has(n))try{Wf||(Wf=document.createElement("style"),e&&(Wf.nonce=e),Wf.setAttribute("type","text/css"),document.head.appendChild(Wf)),Wf.sheet&&(Wf.sheet.insertRule(`@media ${n} {body{ }}`,0),DW.add(n))}catch(t){console.error(t)}}(t,this._nonce),this._matchMedia(t)}static{this.\u0275fac=function(i){return new(i||n)(ue(fa),ue(GM,8))}}static{this.\u0275prov=dt({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function Ppe(n){return{matches:"all"===n||""===n,media:n,addListener:()=>{},removeListener:()=>{}}}let kpe=(()=>{class n{constructor(t,i){this._mediaMatcher=t,this._zone=i,this._queries=new Map,this._destroySubject=new Q}ngOnDestroy(){this._destroySubject.next(),this._destroySubject.complete()}isMatched(t){return RW(WS(t)).some(r=>this._registerQuery(r).mql.matches)}observe(t){let s=oT(RW(WS(t)).map(o=>this._registerQuery(o).observable));return s=lT(s.pipe(ml(1)),s.pipe(function Mpe(n){return Is((e,t)=>n<=t)}(1),GS(0))),s.pipe(Ge(o=>{const a={matches:!1,breakpoints:{}};return o.forEach(({matches:l,query:c})=>{a.matches=a.matches||l,a.breakpoints[c]=l}),a}))}_registerQuery(t){if(this._queries.has(t))return this._queries.get(t);const i=this._mediaMatcher.matchMedia(t),s={observable:new xt(o=>{const a=l=>this._zone.run(()=>o.next(l));return i.addListener(a),()=>{i.removeListener(a)}}).pipe(pf(i),Ge(({matches:o})=>({query:t,matches:o})),zo(this._destroySubject)),mql:i};return this._queries.set(t,s),s}static{this.\u0275fac=function(i){return new(i||n)(ue(Dpe),ue(mn))}}static{this.\u0275prov=dt({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function RW(n){return n.map(e=>e.split(",")).reduce((e,t)=>e.concat(t)).map(e=>e.trim())}function kW(n,e,t){const r=OW(n,e).filter(s=>s!=t.trim());r.length?n.setAttribute(e,r.join(" ")):n.removeAttribute(e)}function OW(n,e){return(n.getAttribute(e)||"").match(/\S+/g)||[]}class NW{constructor(e){this._items=e,this._activeItemIndex=-1,this._activeItem=null,this._wrap=!1,this._letterKeyStream=new Q,this._typeaheadSubscription=on.EMPTY,this._vertical=!0,this._allowedModifierKeys=[],this._homeAndEnd=!1,this._pageUpAndDown={enabled:!1,delta:10},this._skipPredicateFn=t=>t.disabled,this._pressedLetters=[],this.tabOut=new Q,this.change=new Q,e instanceof Yy&&(this._itemChangesSubscription=e.changes.subscribe(t=>{if(this._activeItem){const r=t.toArray().indexOf(this._activeItem);r>-1&&r!==this._activeItemIndex&&(this._activeItemIndex=r)}}))}skipPredicate(e){return this._skipPredicateFn=e,this}withWrap(e=!0){return this._wrap=e,this}withVerticalOrientation(e=!0){return this._vertical=e,this}withHorizontalOrientation(e){return this._horizontal=e,this}withAllowedModifierKeys(e){return this._allowedModifierKeys=e,this}withTypeAhead(e=200){return this._typeaheadSubscription.unsubscribe(),this._typeaheadSubscription=this._letterKeyStream.pipe(as(t=>this._pressedLetters.push(t)),GS(e),Is(()=>this._pressedLetters.length>0),Ge(()=>this._pressedLetters.join(""))).subscribe(t=>{const i=this._getItemsArray();for(let r=1;r<i.length+1;r++){const s=(this._activeItemIndex+r)%i.length,o=i[s];if(!this._skipPredicateFn(o)&&0===o.getLabel().toUpperCase().trim().indexOf(t)){this.setActiveItem(s);break}}this._pressedLetters=[]}),this}cancelTypeahead(){return this._pressedLetters=[],this}withHomeAndEnd(e=!0){return this._homeAndEnd=e,this}withPageUpDown(e=!0,t=10){return this._pageUpAndDown={enabled:e,delta:t},this}setActiveItem(e){const t=this._activeItem;this.updateActiveItem(e),this._activeItem!==t&&this.change.next(this._activeItemIndex)}onKeydown(e){const t=e.keyCode,r=["altKey","ctrlKey","metaKey","shiftKey"].every(s=>!e[s]||this._allowedModifierKeys.indexOf(s)>-1);switch(t){case 9:return void this.tabOut.next();case 40:if(this._vertical&&r){this.setNextItemActive();break}return;case 38:if(this._vertical&&r){this.setPreviousItemActive();break}return;case 39:if(this._horizontal&&r){"rtl"===this._horizontal?this.setPreviousItemActive():this.setNextItemActive();break}return;case 37:if(this._horizontal&&r){"rtl"===this._horizontal?this.setNextItemActive():this.setPreviousItemActive();break}return;case 36:if(this._homeAndEnd&&r){this.setFirstItemActive();break}return;case 35:if(this._homeAndEnd&&r){this.setLastItemActive();break}return;case 33:if(this._pageUpAndDown.enabled&&r){const s=this._activeItemIndex-this._pageUpAndDown.delta;this._setActiveItemByIndex(s>0?s:0,1);break}return;case 34:if(this._pageUpAndDown.enabled&&r){const s=this._activeItemIndex+this._pageUpAndDown.delta,o=this._getItemsArray().length;this._setActiveItemByIndex(s<o?s:o-1,-1);break}return;default:return void((r||i_(e,"shiftKey"))&&(e.key&&1===e.key.length?this._letterKeyStream.next(e.key.toLocaleUpperCase()):(t>=65&&t<=90||t>=48&&t<=57)&&this._letterKeyStream.next(String.fromCharCode(t))))}this._pressedLetters=[],e.preventDefault()}get activeItemIndex(){return this._activeItemIndex}get activeItem(){return this._activeItem}isTyping(){return this._pressedLetters.length>0}setFirstItemActive(){this._setActiveItemByIndex(0,1)}setLastItemActive(){this._setActiveItemByIndex(this._items.length-1,-1)}setNextItemActive(){this._activeItemIndex<0?this.setFirstItemActive():this._setActiveItemByDelta(1)}setPreviousItemActive(){this._activeItemIndex<0&&this._wrap?this.setLastItemActive():this._setActiveItemByDelta(-1)}updateActiveItem(e){const t=this._getItemsArray(),i="number"==typeof e?e:t.indexOf(e);this._activeItem=t[i]??null,this._activeItemIndex=i}destroy(){this._typeaheadSubscription.unsubscribe(),this._itemChangesSubscription?.unsubscribe(),this._letterKeyStream.complete(),this.tabOut.complete(),this.change.complete(),this._pressedLetters=[]}_setActiveItemByDelta(e){this._wrap?this._setActiveInWrapMode(e):this._setActiveInDefaultMode(e)}_setActiveInWrapMode(e){const t=this._getItemsArray();for(let i=1;i<=t.length;i++){const r=(this._activeItemIndex+e*i+t.length)%t.length;if(!this._skipPredicateFn(t[r]))return void this.setActiveItem(r)}}_setActiveInDefaultMode(e){this._setActiveItemByIndex(this._activeItemIndex+e,e)}_setActiveItemByIndex(e,t){const i=this._getItemsArray();if(i[e]){for(;this._skipPredicateFn(i[e]);)if(!i[e+=t])return;this.setActiveItem(e)}}_getItemsArray(){return this._items instanceof Yy?this._items.toArray():this._items}}class Lpe extends NW{setActiveItem(e){this.activeItem&&this.activeItem.setInactiveStyles(),super.setActiveItem(e),this.activeItem&&this.activeItem.setActiveStyles()}}const qpe=new Fe("liveAnnouncerElement",{providedIn:"root",factory:function Xpe(){return null}}),Kpe=new Fe("LIVE_ANNOUNCER_DEFAULT_OPTIONS");let Ype=0,Qpe=(()=>{class n{constructor(t,i,r,s){this._ngZone=i,this._defaultOptions=s,this._document=r,this._liveElement=t||this._createLiveElement()}announce(t,...i){const r=this._defaultOptions;let s,o;return 1===i.length&&"number"==typeof i[0]?o=i[0]:[s,o]=i,this.clear(),clearTimeout(this._previousTimeout),s||(s=r&&r.politeness?r.politeness:"polite"),null==o&&r&&(o=r.duration),this._liveElement.setAttribute("aria-live",s),this._liveElement.id&&this._exposeAnnouncerToModals(this._liveElement.id),this._ngZone.runOutsideAngular(()=>(this._currentPromise||(this._currentPromise=new Promise(a=>this._currentResolve=a)),clearTimeout(this._previousTimeout),this._previousTimeout=setTimeout(()=>{this._liveElement.textContent=t,"number"==typeof o&&(this._previousTimeout=setTimeout(()=>this.clear(),o)),this._currentResolve(),this._currentPromise=this._currentResolve=void 0},100),this._currentPromise))}clear(){this._liveElement&&(this._liveElement.textContent="")}ngOnDestroy(){clearTimeout(this._previousTimeout),this._liveElement?.remove(),this._liveElement=null,this._currentResolve?.(),this._currentPromise=this._currentResolve=void 0}_createLiveElement(){const t="cdk-live-announcer-element",i=this._document.getElementsByClassName(t),r=this._document.createElement("div");for(let s=0;s<i.length;s++)i[s].remove();return r.classList.add(t),r.classList.add("cdk-visually-hidden"),r.setAttribute("aria-atomic","true"),r.setAttribute("aria-live","polite"),r.id="cdk-live-announcer-"+Ype++,this._document.body.appendChild(r),r}_exposeAnnouncerToModals(t){const i=this._document.querySelectorAll('body > .cdk-overlay-container [aria-modal="true"]');for(let r=0;r<i.length;r++){const s=i[r],o=s.getAttribute("aria-owns");o?-1===o.indexOf(t)&&s.setAttribute("aria-owns",o+" "+t):s.setAttribute("aria-owns",t)}}static{this.\u0275fac=function(i){return new(i||n)(ue(qpe,8),ue(mn),ue(_i),ue(Kpe,8))}}static{this.\u0275prov=dt({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();const LW="cdk-high-contrast-black-on-white",VW="cdk-high-contrast-white-on-black",uO="cdk-high-contrast-active";let Zpe=(()=>{class n{constructor(t,i){this._platform=t,this._document=i,this._breakpointSubscription=bt(kpe).observe("(forced-colors: active)").subscribe(()=>{this._hasCheckedHighContrastMode&&(this._hasCheckedHighContrastMode=!1,this._applyBodyHighContrastModeCssClasses())})}getHighContrastMode(){if(!this._platform.isBrowser)return 0;const t=this._document.createElement("div");t.style.backgroundColor="rgb(1,2,3)",t.style.position="absolute",this._document.body.appendChild(t);const i=this._document.defaultView||window,r=i&&i.getComputedStyle?i.getComputedStyle(t):null,s=(r&&r.backgroundColor||"").replace(/ /g,"");switch(t.remove(),s){case"rgb(0,0,0)":case"rgb(45,50,54)":case"rgb(32,32,32)":return 2;case"rgb(255,255,255)":case"rgb(255,250,239)":return 1}return 0}ngOnDestroy(){this._breakpointSubscription.unsubscribe()}_applyBodyHighContrastModeCssClasses(){if(!this._hasCheckedHighContrastMode&&this._platform.isBrowser&&this._document.body){const t=this._document.body.classList;t.remove(uO,LW,VW),this._hasCheckedHighContrastMode=!0;const i=this.getHighContrastMode();1===i?t.add(uO,LW):2===i&&t.add(uO,VW)}}static{this.\u0275fac=function(i){return new(i||n)(ue(fa),ue(_i))}}static{this.\u0275prov=dt({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();const Jpe=new Fe("cdk-dir-doc",{providedIn:"root",factory:function eme(){return bt(_i)}}),tme=/^(ar|ckb|dv|he|iw|fa|nqo|ps|sd|ug|ur|yi|.*[-_](Adlm|Arab|Hebr|Nkoo|Rohg|Thaa))(?!.*[-_](Latn|Cyrl)($|-|_))($|-|_)/i;let jS=(()=>{class n{constructor(t){this.value="ltr",this.change=new gi,t&&(this.value=function nme(n){const e=n?.toLowerCase()||"";return"auto"===e&&typeof navigator<"u"&&navigator?.language?tme.test(navigator.language)?"rtl":"ltr":"rtl"===e?"rtl":"ltr"}((t.body?t.body.dir:null)||(t.documentElement?t.documentElement.dir:null)||"ltr"))}ngOnDestroy(){this.change.complete()}static{this.\u0275fac=function(i){return new(i||n)(ue(Jpe,8))}}static{this.\u0275prov=dt({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),Eb=(()=>{class n{static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275mod=ni({type:n})}static{this.\u0275inj=jn({})}}return n})();const ime=["text"];function rme(n,e){if(1&n&&Ri(0,"mat-pseudo-checkbox",6),2&n){const t=pn();gt("disabled",t.disabled)("state",t.selected?"checked":"unchecked")}}function sme(n,e){1&n&&Ri(0,"mat-pseudo-checkbox",7),2&n&&gt("disabled",pn().disabled)}function ome(n,e){if(1&n&&(at(0,"span",8),zn(1),ct()),2&n){const t=pn();_t(1),aa("(",t.group.label,")")}}const ame=[[["mat-icon"]],"*"],lme=["mat-icon","*"],ume=new Fe("mat-sanity-checks",{providedIn:"root",factory:function cme(){return!0}});let us=(()=>{class n{constructor(t,i,r){this._sanityChecks=i,this._document=r,this._hasDoneGlobalChecks=!1,t._applyBodyHighContrastModeCssClasses(),this._hasDoneGlobalChecks||(this._hasDoneGlobalChecks=!0)}_checkIsEnabled(t){return!oO()&&("boolean"==typeof this._sanityChecks?this._sanityChecks:!!this._sanityChecks[t])}static{this.\u0275fac=function(i){return new(i||n)(ue(Zpe),ue(ume,8),ue(_i))}}static{this.\u0275mod=ni({type:n})}static{this.\u0275inj=jn({imports:[Eb,Eb]})}}return n})();function dme(n){return class extends n{get disabled(){return this._disabled}set disabled(e){this._disabled=xr(e)}constructor(...e){super(...e),this._disabled=!1}}}function dO(n,e){return class extends n{get color(){return this._color}set color(t){const i=t||this.defaultColor;i!==this._color&&(this._color&&this._elementRef.nativeElement.classList.remove(`mat-${this._color}`),i&&this._elementRef.nativeElement.classList.add(`mat-${i}`),this._color=i)}constructor(...t){super(...t),this.defaultColor=e,this.color=e}}}function hme(n){return class extends n{get disableRipple(){return this._disableRipple}set disableRipple(e){this._disableRipple=xr(e)}constructor(...e){super(...e),this._disableRipple=!1}}}function fme(n,e=0){return class extends n{get tabIndex(){return this.disabled?-1:this._tabIndex}set tabIndex(t){this._tabIndex=null!=t?r_(t):this.defaultTabIndex}constructor(...t){super(...t),this._tabIndex=e,this.defaultTabIndex=e}}}function zW(n){return class extends n{updateErrorState(){const e=this.errorState,s=(this.errorStateMatcher||this._defaultErrorStateMatcher).isErrorState(this.ngControl?this.ngControl.control:null,this._parentFormGroup||this._parentForm);s!==e&&(this.errorState=s,this.stateChanges.next())}constructor(...e){super(...e),this.errorState=!1}}}let HW=(()=>{class n{isErrorState(t,i){return!!(t&&t.invalid&&(t.touched||i&&i.submitted))}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275prov=dt({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();class mme{constructor(e,t,i,r=!1){this._renderer=e,this.element=t,this.config=i,this._animationForciblyDisabledThroughCss=r,this.state=3}fadeOut(){this._renderer.fadeOutRipple(this)}}const GW=wb({passive:!0,capture:!0});class gme{constructor(){this._events=new Map,this._delegateEventHandler=e=>{const t=sO(e);t&&this._events.get(e.type)?.forEach((i,r)=>{(r===t||r.contains(t))&&i.forEach(s=>s.handleEvent(e))})}}addHandler(e,t,i,r){const s=this._events.get(t);if(s){const o=s.get(i);o?o.add(r):s.set(i,new Set([r]))}else this._events.set(t,new Map([[i,new Set([r])]])),e.runOutsideAngular(()=>{document.addEventListener(t,this._delegateEventHandler,GW)})}removeHandler(e,t,i){const r=this._events.get(e);if(!r)return;const s=r.get(t);s&&(s.delete(i),0===s.size&&r.delete(t),0===r.size&&(this._events.delete(e),document.removeEventListener(e,this._delegateEventHandler,GW)))}}const WW={enterDuration:225,exitDuration:150},jW=wb({passive:!0,capture:!0}),$W=["mousedown","touchstart"],qW=["mouseup","mouseleave","touchend","touchcancel"];class Sb{static{this._eventManager=new gme}constructor(e,t,i,r){this._target=e,this._ngZone=t,this._platform=r,this._isPointerDown=!1,this._activeRipples=new Map,this._pointerUpEventsRegistered=!1,r.isBrowser&&(this._containerElement=s_(i))}fadeInRipple(e,t,i={}){const r=this._containerRect=this._containerRect||this._containerElement.getBoundingClientRect(),s={...WW,...i.animation};i.centered&&(e=r.left+r.width/2,t=r.top+r.height/2);const o=i.radius||function vme(n,e,t){const i=Math.max(Math.abs(n-t.left),Math.abs(n-t.right)),r=Math.max(Math.abs(e-t.top),Math.abs(e-t.bottom));return Math.sqrt(i*i+r*r)}(e,t,r),a=e-r.left,l=t-r.top,c=s.enterDuration,u=document.createElement("div");u.classList.add("mat-ripple-element"),u.style.left=a-o+"px",u.style.top=l-o+"px",u.style.height=2*o+"px",u.style.width=2*o+"px",null!=i.color&&(u.style.backgroundColor=i.color),u.style.transitionDuration=`${c}ms`,this._containerElement.appendChild(u);const d=window.getComputedStyle(u),m=d.transitionDuration,v="none"===d.transitionProperty||"0s"===m||"0s, 0s"===m||0===r.width&&0===r.height,x=new mme(this,u,i,v);u.style.transform="scale3d(1, 1, 1)",x.state=0,i.persistent||(this._mostRecentTransientRipple=x);let b=null;return!v&&(c||s.exitDuration)&&this._ngZone.runOutsideAngular(()=>{const w=()=>this._finishRippleTransition(x),T=()=>this._destroyRipple(x);u.addEventListener("transitionend",w),u.addEventListener("transitioncancel",T),b={onTransitionEnd:w,onTransitionCancel:T}}),this._activeRipples.set(x,b),(v||!c)&&this._finishRippleTransition(x),x}fadeOutRipple(e){if(2===e.state||3===e.state)return;const t=e.element,i={...WW,...e.config.animation};t.style.transitionDuration=`${i.exitDuration}ms`,t.style.opacity="0",e.state=2,(e._animationForciblyDisabledThroughCss||!i.exitDuration)&&this._finishRippleTransition(e)}fadeOutAll(){this._getActiveRipples().forEach(e=>e.fadeOut())}fadeOutAllNonPersistent(){this._getActiveRipples().forEach(e=>{e.config.persistent||e.fadeOut()})}setupTriggerEvents(e){const t=s_(e);!this._platform.isBrowser||!t||t===this._triggerElement||(this._removeTriggerEvents(),this._triggerElement=t,$W.forEach(i=>{Sb._eventManager.addHandler(this._ngZone,i,t,this)}))}handleEvent(e){"mousedown"===e.type?this._onMousedown(e):"touchstart"===e.type?this._onTouchStart(e):this._onPointerUp(),this._pointerUpEventsRegistered||(this._ngZone.runOutsideAngular(()=>{qW.forEach(t=>{this._triggerElement.addEventListener(t,this,jW)})}),this._pointerUpEventsRegistered=!0)}_finishRippleTransition(e){0===e.state?this._startFadeOutTransition(e):2===e.state&&this._destroyRipple(e)}_startFadeOutTransition(e){const t=e===this._mostRecentTransientRipple,{persistent:i}=e.config;e.state=1,!i&&(!t||!this._isPointerDown)&&e.fadeOut()}_destroyRipple(e){const t=this._activeRipples.get(e)??null;this._activeRipples.delete(e),this._activeRipples.size||(this._containerRect=null),e===this._mostRecentTransientRipple&&(this._mostRecentTransientRipple=null),e.state=3,null!==t&&(e.element.removeEventListener("transitionend",t.onTransitionEnd),e.element.removeEventListener("transitioncancel",t.onTransitionCancel)),e.element.remove()}_onMousedown(e){const t=function jpe(n){return 0===n.buttons||0===n.detail}(e),i=this._lastTouchStartEvent&&Date.now()<this._lastTouchStartEvent+800;!this._target.rippleDisabled&&!t&&!i&&(this._isPointerDown=!0,this.fadeInRipple(e.clientX,e.clientY,this._target.rippleConfig))}_onTouchStart(e){if(!this._target.rippleDisabled&&!function $pe(n){const e=n.touches&&n.touches[0]||n.changedTouches&&n.changedTouches[0];return!(!e||-1!==e.identifier||null!=e.radiusX&&1!==e.radiusX||null!=e.radiusY&&1!==e.radiusY)}(e)){this._lastTouchStartEvent=Date.now(),this._isPointerDown=!0;const t=e.changedTouches;if(t)for(let i=0;i<t.length;i++)this.fadeInRipple(t[i].clientX,t[i].clientY,this._target.rippleConfig)}}_onPointerUp(){this._isPointerDown&&(this._isPointerDown=!1,this._getActiveRipples().forEach(e=>{!e.config.persistent&&(1===e.state||e.config.terminateOnPointerUp&&0===e.state)&&e.fadeOut()}))}_getActiveRipples(){return Array.from(this._activeRipples.keys())}_removeTriggerEvents(){const e=this._triggerElement;e&&($W.forEach(t=>Sb._eventManager.removeHandler(t,e,this)),this._pointerUpEventsRegistered&&qW.forEach(t=>e.removeEventListener(t,this,jW)))}}const hO=new Fe("mat-ripple-global-options");let yme=(()=>{class n{get disabled(){return this._disabled}set disabled(t){t&&this.fadeOutAllNonPersistent(),this._disabled=t,this._setupTriggerEventsIfEnabled()}get trigger(){return this._trigger||this._elementRef.nativeElement}set trigger(t){this._trigger=t,this._setupTriggerEventsIfEnabled()}constructor(t,i,r,s,o){this._elementRef=t,this._animationMode=o,this.radius=0,this._disabled=!1,this._isInitialized=!1,this._globalOptions=s||{},this._rippleRenderer=new Sb(this,i,t,r)}ngOnInit(){this._isInitialized=!0,this._setupTriggerEventsIfEnabled()}ngOnDestroy(){this._rippleRenderer._removeTriggerEvents()}fadeOutAll(){this._rippleRenderer.fadeOutAll()}fadeOutAllNonPersistent(){this._rippleRenderer.fadeOutAllNonPersistent()}get rippleConfig(){return{centered:this.centered,radius:this.radius,color:this.color,animation:{...this._globalOptions.animation,..."NoopAnimations"===this._animationMode?{enterDuration:0,exitDuration:0}:{},...this.animation},terminateOnPointerUp:this._globalOptions.terminateOnPointerUp}}get rippleDisabled(){return this.disabled||!!this._globalOptions.disabled}_setupTriggerEventsIfEnabled(){!this.disabled&&this._isInitialized&&this._rippleRenderer.setupTriggerEvents(this.trigger)}launch(t,i=0,r){return"number"==typeof t?this._rippleRenderer.fadeInRipple(t,i,{...this.rippleConfig,...r}):this._rippleRenderer.fadeInRipple(0,0,{...this.rippleConfig,...t})}static{this.\u0275fac=function(i){return new(i||n)(J(Di),J(mn),J(fa),J(hO,8),J(lu,8))}}static{this.\u0275dir=St({type:n,selectors:[["","mat-ripple",""],["","matRipple",""]],hostAttrs:[1,"mat-ripple"],hostVars:2,hostBindings:function(i,r){2&i&&_r("mat-ripple-unbounded",r.unbounded)},inputs:{color:["matRippleColor","color"],unbounded:["matRippleUnbounded","unbounded"],centered:["matRippleCentered","centered"],radius:["matRippleRadius","radius"],animation:["matRippleAnimation","animation"],disabled:["matRippleDisabled","disabled"],trigger:["matRippleTrigger","trigger"]},exportAs:["matRipple"]})}}return n})(),XW=(()=>{class n{static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275mod=ni({type:n})}static{this.\u0275inj=jn({imports:[us,us]})}}return n})(),bme=(()=>{class n{constructor(t){this._animationMode=t,this.state="unchecked",this.disabled=!1,this.appearance="full"}static{this.\u0275fac=function(i){return new(i||n)(J(lu,8))}}static{this.\u0275cmp=hr({type:n,selectors:[["mat-pseudo-checkbox"]],hostAttrs:[1,"mat-pseudo-checkbox"],hostVars:12,hostBindings:function(i,r){2&i&&_r("mat-pseudo-checkbox-indeterminate","indeterminate"===r.state)("mat-pseudo-checkbox-checked","checked"===r.state)("mat-pseudo-checkbox-disabled",r.disabled)("mat-pseudo-checkbox-minimal","minimal"===r.appearance)("mat-pseudo-checkbox-full","full"===r.appearance)("_mat-animation-noopable","NoopAnimations"===r._animationMode)},inputs:{state:"state",disabled:"disabled",appearance:"appearance"},decls:0,vars:0,template:function(i,r){},styles:['.mat-pseudo-checkbox{border-radius:2px;cursor:pointer;display:inline-block;vertical-align:middle;box-sizing:border-box;position:relative;flex-shrink:0;transition:border-color 90ms cubic-bezier(0, 0, 0.2, 0.1),background-color 90ms cubic-bezier(0, 0, 0.2, 0.1)}.mat-pseudo-checkbox::after{position:absolute;opacity:0;content:"";border-bottom:2px solid currentColor;transition:opacity 90ms cubic-bezier(0, 0, 0.2, 0.1)}.mat-pseudo-checkbox._mat-animation-noopable{transition:none !important;animation:none !important}.mat-pseudo-checkbox._mat-animation-noopable::after{transition:none}.mat-pseudo-checkbox-disabled{cursor:default}.mat-pseudo-checkbox-indeterminate::after{left:1px;opacity:1;border-radius:2px}.mat-pseudo-checkbox-checked::after{left:1px;border-left:2px solid currentColor;transform:rotate(-45deg);opacity:1;box-sizing:content-box}.mat-pseudo-checkbox-full{border:2px solid}.mat-pseudo-checkbox-full.mat-pseudo-checkbox-checked,.mat-pseudo-checkbox-full.mat-pseudo-checkbox-indeterminate{border-color:rgba(0,0,0,0)}.mat-pseudo-checkbox{width:18px;height:18px}.mat-pseudo-checkbox-minimal.mat-pseudo-checkbox-checked::after{width:14px;height:6px;transform-origin:center;top:-4.2426406871px;left:0;bottom:0;right:0;margin:auto}.mat-pseudo-checkbox-minimal.mat-pseudo-checkbox-indeterminate::after{top:8px;width:16px}.mat-pseudo-checkbox-full.mat-pseudo-checkbox-checked::after{width:10px;height:4px;transform-origin:center;top:-2.8284271247px;left:0;bottom:0;right:0;margin:auto}.mat-pseudo-checkbox-full.mat-pseudo-checkbox-indeterminate::after{top:6px;width:12px}'],encapsulation:2,changeDetection:0})}}return n})(),KW=(()=>{class n{static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275mod=ni({type:n})}static{this.\u0275inj=jn({imports:[us]})}}return n})();const YW=new Fe("MAT_OPTION_PARENT_COMPONENT"),QW=new Fe("MatOptgroup");let xme=0;class wme{constructor(e,t=!1){this.source=e,this.isUserInput=t}}let Eme=(()=>{class n{get multiple(){return this._parent&&this._parent.multiple}get selected(){return this._selected}get disabled(){return this.group&&this.group.disabled||this._disabled}set disabled(t){this._disabled=xr(t)}get disableRipple(){return!(!this._parent||!this._parent.disableRipple)}get hideSingleSelectionIndicator(){return!(!this._parent||!this._parent.hideSingleSelectionIndicator)}constructor(t,i,r,s){this._element=t,this._changeDetectorRef=i,this._parent=r,this.group=s,this._selected=!1,this._active=!1,this._disabled=!1,this._mostRecentViewValue="",this.id="mat-option-"+xme++,this.onSelectionChange=new gi,this._stateChanges=new Q}get active(){return this._active}get viewValue(){return(this._text?.nativeElement.textContent||"").trim()}select(t=!0){this._selected||(this._selected=!0,this._changeDetectorRef.markForCheck(),t&&this._emitSelectionChangeEvent())}deselect(t=!0){this._selected&&(this._selected=!1,this._changeDetectorRef.markForCheck(),t&&this._emitSelectionChangeEvent())}focus(t,i){const r=this._getHostElement();"function"==typeof r.focus&&r.focus(i)}setActiveStyles(){this._active||(this._active=!0,this._changeDetectorRef.markForCheck())}setInactiveStyles(){this._active&&(this._active=!1,this._changeDetectorRef.markForCheck())}getLabel(){return this.viewValue}_handleKeydown(t){(13===t.keyCode||32===t.keyCode)&&!i_(t)&&(this._selectViaInteraction(),t.preventDefault())}_selectViaInteraction(){this.disabled||(this._selected=!this.multiple||!this._selected,this._changeDetectorRef.markForCheck(),this._emitSelectionChangeEvent(!0))}_getTabIndex(){return this.disabled?"-1":"0"}_getHostElement(){return this._element.nativeElement}ngAfterViewChecked(){if(this._selected){const t=this.viewValue;t!==this._mostRecentViewValue&&(this._mostRecentViewValue&&this._stateChanges.next(),this._mostRecentViewValue=t)}}ngOnDestroy(){this._stateChanges.complete()}_emitSelectionChangeEvent(t=!1){this.onSelectionChange.emit(new wme(this,t))}static{this.\u0275fac=function(i){aD()}}static{this.\u0275dir=St({type:n,viewQuery:function(i,r){if(1&i&&Vo(ime,7),2&i){let s;Ui(s=Bi())&&(r._text=s.first)}},inputs:{value:"value",id:"id",disabled:"disabled"},outputs:{onSelectionChange:"onSelectionChange"}})}}return n})(),ZW=(()=>{class n extends Eme{constructor(t,i,r,s){super(t,i,r,s)}static{this.\u0275fac=function(i){return new(i||n)(J(Di),J(fu),J(YW,8),J(QW,8))}}static{this.\u0275cmp=hr({type:n,selectors:[["mat-option"]],hostAttrs:["role","option",1,"mat-mdc-option","mdc-list-item"],hostVars:11,hostBindings:function(i,r){1&i&&qn("click",function(){return r._selectViaInteraction()})("keydown",function(o){return r._handleKeydown(o)}),2&i&&(Hy("id",r.id),or("aria-selected",r.selected)("aria-disabled",r.disabled.toString()),_r("mdc-list-item--selected",r.selected)("mat-mdc-option-multiple",r.multiple)("mat-mdc-option-active",r.active)("mdc-list-item--disabled",r.disabled))},exportAs:["matOption"],features:[si],ngContentSelectors:lme,decls:8,vars:5,consts:[["class","mat-mdc-option-pseudo-checkbox","aria-hidden","true",3,"disabled","state",4,"ngIf"],[1,"mdc-list-item__primary-text"],["text",""],["class","mat-mdc-option-pseudo-checkbox","state","checked","aria-hidden","true","appearance","minimal",3,"disabled",4,"ngIf"],["class","cdk-visually-hidden",4,"ngIf"],["aria-hidden","true","mat-ripple","",1,"mat-mdc-option-ripple","mat-mdc-focus-indicator",3,"matRippleTrigger","matRippleDisabled"],["aria-hidden","true",1,"mat-mdc-option-pseudo-checkbox",3,"disabled","state"],["state","checked","aria-hidden","true","appearance","minimal",1,"mat-mdc-option-pseudo-checkbox",3,"disabled"],[1,"cdk-visually-hidden"]],template:function(i,r){1&i&&(dl(ame),Yt(0,rme,1,2,"mat-pseudo-checkbox",0),qi(1),at(2,"span",1,2),qi(4,1),ct(),Yt(5,sme,1,1,"mat-pseudo-checkbox",3),Yt(6,ome,2,1,"span",4),Ri(7,"div",5)),2&i&&(gt("ngIf",r.multiple),_t(5),gt("ngIf",!r.multiple&&r.selected&&!r.hideSingleSelectionIndicator),_t(1),gt("ngIf",r.group&&r.group._inert),_t(1),gt("matRippleTrigger",r._getHostElement())("matRippleDisabled",r.disabled||r.disableRipple))},dependencies:[yme,_u,bme],styles:['.mat-mdc-option{display:flex;position:relative;align-items:center;justify-content:flex-start;overflow:hidden;padding:0;padding-left:16px;padding-right:16px;-webkit-user-select:none;user-select:none;-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased;cursor:pointer;-webkit-tap-highlight-color:rgba(0,0,0,0);color:var(--mat-option-label-text-color);font-family:var(--mat-option-label-text-font);line-height:var(--mat-option-label-text-line-height);font-size:var(--mat-option-label-text-size);letter-spacing:var(--mat-option-label-text-tracking);font-weight:var(--mat-option-label-text-weight);min-height:48px}.mat-mdc-option:focus{outline:none}[dir=rtl] .mat-mdc-option,.mat-mdc-option[dir=rtl]{padding-left:16px;padding-right:16px}.mat-mdc-option:hover:not(.mdc-list-item--disabled){background-color:var(--mat-option-hover-state-layer-color)}.mat-mdc-option:focus.mdc-list-item,.mat-mdc-option.mat-mdc-option-active.mdc-list-item{background-color:var(--mat-option-focus-state-layer-color)}.mat-mdc-option.mdc-list-item--selected:not(.mdc-list-item--disabled) .mdc-list-item__primary-text{color:var(--mat-option-selected-state-label-text-color)}.mat-mdc-option.mdc-list-item--selected:not(.mdc-list-item--disabled):not(.mat-mdc-option-multiple){background-color:var(--mat-option-selected-state-layer-color)}.mat-mdc-option.mdc-list-item{align-items:center}.mat-mdc-option.mdc-list-item--disabled{cursor:default;pointer-events:none}.mat-mdc-option.mdc-list-item--disabled .mat-mdc-option-pseudo-checkbox,.mat-mdc-option.mdc-list-item--disabled .mdc-list-item__primary-text,.mat-mdc-option.mdc-list-item--disabled>mat-icon{opacity:.38}.mat-mdc-optgroup .mat-mdc-option:not(.mat-mdc-option-multiple){padding-left:32px}[dir=rtl] .mat-mdc-optgroup .mat-mdc-option:not(.mat-mdc-option-multiple){padding-left:16px;padding-right:32px}.mat-mdc-option .mat-icon,.mat-mdc-option .mat-pseudo-checkbox-full{margin-right:16px;flex-shrink:0}[dir=rtl] .mat-mdc-option .mat-icon,[dir=rtl] .mat-mdc-option .mat-pseudo-checkbox-full{margin-right:0;margin-left:16px}.mat-mdc-option .mat-pseudo-checkbox-minimal{margin-left:16px;flex-shrink:0}[dir=rtl] .mat-mdc-option .mat-pseudo-checkbox-minimal{margin-right:16px;margin-left:0}.mat-mdc-option .mat-mdc-option-ripple{top:0;left:0;right:0;bottom:0;position:absolute;pointer-events:none}.mat-mdc-option .mdc-list-item__primary-text{white-space:normal;font-size:inherit;font-weight:inherit;letter-spacing:inherit;line-height:inherit;font-family:inherit;text-decoration:inherit;text-transform:inherit;margin-right:auto}[dir=rtl] .mat-mdc-option .mdc-list-item__primary-text{margin-right:0;margin-left:auto}.cdk-high-contrast-active .mat-mdc-option.mdc-list-item--selected:not(.mat-mdc-option-multiple)::after{content:"";position:absolute;top:50%;right:16px;transform:translateY(-50%);width:10px;height:0;border-bottom:solid 10px;border-radius:10px}[dir=rtl] .cdk-high-contrast-active .mat-mdc-option.mdc-list-item--selected:not(.mat-mdc-option-multiple)::after{right:auto;left:16px}.mat-mdc-option-active .mat-mdc-focus-indicator::before{content:""}'],encapsulation:2,changeDetection:0})}}return n})(),JW=(()=>{class n{static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275mod=ni({type:n})}static{this.\u0275inj=jn({imports:[XW,ff,us,KW]})}}return n})();const Ame=["*"],Rme=new Fe("MAT_CARD_CONFIG");let $S=(()=>{class n{constructor(t){this.appearance=t?.appearance||"raised"}static{this.\u0275fac=function(i){return new(i||n)(J(Rme,8))}}static{this.\u0275cmp=hr({type:n,selectors:[["mat-card"]],hostAttrs:[1,"mat-mdc-card","mdc-card"],hostVars:4,hostBindings:function(i,r){2&i&&_r("mat-mdc-card-outlined","outlined"===r.appearance)("mdc-card--outlined","outlined"===r.appearance)},inputs:{appearance:"appearance"},exportAs:["matCard"],ngContentSelectors:Ame,decls:1,vars:0,template:function(i,r){1&i&&(dl(),qi(0))},styles:['.mdc-card{display:flex;flex-direction:column;box-sizing:border-box}.mdc-card::after{position:absolute;box-sizing:border-box;width:100%;height:100%;top:0;left:0;border:1px solid rgba(0,0,0,0);border-radius:inherit;content:"";pointer-events:none;pointer-events:none}@media screen and (forced-colors: active){.mdc-card::after{border-color:CanvasText}}.mdc-card--outlined::after{border:none}.mdc-card__content{border-radius:inherit;height:100%}.mdc-card__media{position:relative;box-sizing:border-box;background-repeat:no-repeat;background-position:center;background-size:cover}.mdc-card__media::before{display:block;content:""}.mdc-card__media:first-child{border-top-left-radius:inherit;border-top-right-radius:inherit}.mdc-card__media:last-child{border-bottom-left-radius:inherit;border-bottom-right-radius:inherit}.mdc-card__media--square::before{margin-top:100%}.mdc-card__media--16-9::before{margin-top:56.25%}.mdc-card__media-content{position:absolute;top:0;right:0;bottom:0;left:0;box-sizing:border-box}.mdc-card__primary-action{display:flex;flex-direction:column;box-sizing:border-box;position:relative;outline:none;color:inherit;text-decoration:none;cursor:pointer;overflow:hidden}.mdc-card__primary-action:first-child{border-top-left-radius:inherit;border-top-right-radius:inherit}.mdc-card__primary-action:last-child{border-bottom-left-radius:inherit;border-bottom-right-radius:inherit}.mdc-card__actions{display:flex;flex-direction:row;align-items:center;box-sizing:border-box;min-height:52px;padding:8px}.mdc-card__actions--full-bleed{padding:0}.mdc-card__action-buttons,.mdc-card__action-icons{display:flex;flex-direction:row;align-items:center;box-sizing:border-box}.mdc-card__action-icons{color:rgba(0, 0, 0, 0.6);flex-grow:1;justify-content:flex-end}.mdc-card__action-buttons+.mdc-card__action-icons{margin-left:16px;margin-right:0}[dir=rtl] .mdc-card__action-buttons+.mdc-card__action-icons,.mdc-card__action-buttons+.mdc-card__action-icons[dir=rtl]{margin-left:0;margin-right:16px}.mdc-card__action{display:inline-flex;flex-direction:row;align-items:center;box-sizing:border-box;justify-content:center;cursor:pointer;user-select:none}.mdc-card__action:focus{outline:none}.mdc-card__action--button{margin-left:0;margin-right:8px;padding:0 8px}[dir=rtl] .mdc-card__action--button,.mdc-card__action--button[dir=rtl]{margin-left:8px;margin-right:0}.mdc-card__action--button:last-child{margin-left:0;margin-right:0}[dir=rtl] .mdc-card__action--button:last-child,.mdc-card__action--button:last-child[dir=rtl]{margin-left:0;margin-right:0}.mdc-card__actions--full-bleed .mdc-card__action--button{justify-content:space-between;width:100%;height:auto;max-height:none;margin:0;padding:8px 16px;text-align:left}[dir=rtl] .mdc-card__actions--full-bleed .mdc-card__action--button,.mdc-card__actions--full-bleed .mdc-card__action--button[dir=rtl]{text-align:right}.mdc-card__action--icon{margin:-6px 0;padding:12px}.mdc-card__action--icon:not(:disabled){color:rgba(0, 0, 0, 0.6)}.mat-mdc-card{border-radius:var(--mdc-elevated-card-container-shape);background-color:var(--mdc-elevated-card-container-color);border-width:0;border-style:solid;border-color:var(--mdc-elevated-card-container-color);box-shadow:var(--mdc-elevated-card-container-elevation);--mdc-elevated-card-container-shape:4px;--mdc-outlined-card-container-shape:4px;--mdc-outlined-card-outline-width:1px}.mat-mdc-card .mdc-card::after{border-radius:var(--mdc-elevated-card-container-shape)}.mat-mdc-card-outlined{border-width:var(--mdc-outlined-card-outline-width);border-style:solid;border-color:var(--mdc-outlined-card-outline-color);border-radius:var(--mdc-outlined-card-container-shape);background-color:var(--mdc-outlined-card-container-color);box-shadow:var(--mdc-outlined-card-container-elevation)}.mat-mdc-card-outlined .mdc-card::after{border-radius:var(--mdc-outlined-card-container-shape)}.mat-mdc-card-title{font-family:var(--mat-card-title-text-font);line-height:var(--mat-card-title-text-line-height);font-size:var(--mat-card-title-text-size);letter-spacing:var(--mat-card-title-text-tracking);font-weight:var(--mat-card-title-text-weight)}.mat-mdc-card-subtitle{color:var(--mat-card-subtitle-text-color);font-family:var(--mat-card-subtitle-text-font);line-height:var(--mat-card-subtitle-text-line-height);font-size:var(--mat-card-subtitle-text-size);letter-spacing:var(--mat-card-subtitle-text-tracking);font-weight:var(--mat-card-subtitle-text-weight)}.mat-mdc-card{position:relative}.mat-mdc-card-title,.mat-mdc-card-subtitle{display:block;margin:0}.mat-mdc-card-avatar~.mat-mdc-card-header-text .mat-mdc-card-title,.mat-mdc-card-avatar~.mat-mdc-card-header-text .mat-mdc-card-subtitle{padding:16px 16px 0}.mat-mdc-card-header{display:flex;padding:16px 16px 0}.mat-mdc-card-content{display:block;padding:0 16px}.mat-mdc-card-content:first-child{padding-top:16px}.mat-mdc-card-content:last-child{padding-bottom:16px}.mat-mdc-card-title-group{display:flex;justify-content:space-between;width:100%}.mat-mdc-card-avatar{height:40px;width:40px;border-radius:50%;flex-shrink:0;margin-bottom:16px;object-fit:cover}.mat-mdc-card-avatar~.mat-mdc-card-header-text .mat-mdc-card-subtitle,.mat-mdc-card-avatar~.mat-mdc-card-header-text .mat-mdc-card-title{line-height:normal}.mat-mdc-card-sm-image{width:80px;height:80px}.mat-mdc-card-md-image{width:112px;height:112px}.mat-mdc-card-lg-image{width:152px;height:152px}.mat-mdc-card-xl-image{width:240px;height:240px}.mat-mdc-card-subtitle~.mat-mdc-card-title,.mat-mdc-card-title~.mat-mdc-card-subtitle,.mat-mdc-card-header .mat-mdc-card-header-text .mat-mdc-card-title,.mat-mdc-card-header .mat-mdc-card-header-text .mat-mdc-card-subtitle,.mat-mdc-card-title-group .mat-mdc-card-title,.mat-mdc-card-title-group .mat-mdc-card-subtitle{padding-top:0}.mat-mdc-card-content>:last-child:not(.mat-mdc-card-footer){margin-bottom:0}.mat-mdc-card-actions-align-end{justify-content:flex-end}'],encapsulation:2,changeDetection:0})}}return n})(),ej=(()=>{class n{static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275mod=ni({type:n})}static{this.\u0275inj=jn({imports:[us,ff,us]})}}return n})();class Pme{constructor(e){this._box=e,this._destroyed=new Q,this._resizeSubject=new Q,this._elementObservables=new Map,typeof ResizeObserver<"u"&&(this._resizeObserver=new ResizeObserver(t=>this._resizeSubject.next(t)))}observe(e){return this._elementObservables.has(e)||this._elementObservables.set(e,new xt(t=>{const i=this._resizeSubject.subscribe(t);return this._resizeObserver?.observe(e,{box:this._box}),()=>{this._resizeObserver?.unobserve(e),i.unsubscribe(),this._elementObservables.delete(e)}}).pipe(Is(t=>t.some(i=>i.target===e)),wR({bufferSize:1,refCount:!0}),zo(this._destroyed))),this._elementObservables.get(e)}destroy(){this._destroyed.next(),this._destroyed.complete(),this._resizeSubject.complete(),this._elementObservables.clear()}}let kme=(()=>{class n{constructor(){this._observers=new Map,this._ngZone=bt(mn)}ngOnDestroy(){for(const[,t]of this._observers)t.destroy();this._observers.clear()}observe(t,i){const r=i?.box||"content-box";return this._observers.has(r)||this._observers.set(r,new Pme(r)),this._observers.get(r).observe(t)}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275prov=dt({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),tj=(()=>{class n{create(t){return typeof MutationObserver>"u"?null:new MutationObserver(t)}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275prov=dt({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),nj=(()=>{class n{static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275mod=ni({type:n})}static{this.\u0275inj=jn({providers:[tj]})}}return n})();const Fme=["notch"],Lme=["matFormFieldNotchedOutline",""],Vme=["*"],Ume=["textField"],Bme=["iconPrefixContainer"],zme=["textPrefixContainer"];function Hme(n,e){1&n&&Ri(0,"span",19)}function Gme(n,e){if(1&n&&(at(0,"label",17),qi(1,1),Yt(2,Hme,1,0,"span",18),ct()),2&n){const t=pn(2);gt("floating",t._shouldLabelFloat())("monitorResize",t._hasOutline())("id",t._labelId),or("for",t._control.id),_t(2),gt("ngIf",!t.hideRequiredMarker&&t._control.required)}}function Wme(n,e){1&n&&Yt(0,Gme,3,5,"label",16),2&n&&gt("ngIf",pn()._hasFloatingLabel())}function jme(n,e){1&n&&Ri(0,"div",20)}function $me(n,e){}function qme(n,e){1&n&&Yt(0,$me,0,0,"ng-template",22),2&n&&(pn(2),gt("ngTemplateOutlet",ul(1)))}function Xme(n,e){if(1&n&&(at(0,"div",21),Yt(1,qme,1,1,"ng-template",9),ct()),2&n){const t=pn();gt("matFormFieldNotchedOutlineOpen",t._shouldLabelFloat()),_t(1),gt("ngIf",!t._forceDisplayInfixLabel())}}function Kme(n,e){1&n&&(at(0,"div",23,24),qi(2,2),ct())}function Yme(n,e){1&n&&(at(0,"div",25,26),qi(2,3),ct())}function Qme(n,e){}function Zme(n,e){1&n&&Yt(0,Qme,0,0,"ng-template",22),2&n&&(pn(),gt("ngTemplateOutlet",ul(1)))}function Jme(n,e){1&n&&(at(0,"div",27),qi(1,4),ct())}function ege(n,e){1&n&&(at(0,"div",28),qi(1,5),ct())}function tge(n,e){1&n&&Ri(0,"div",29)}function nge(n,e){1&n&&(at(0,"div",30),qi(1,6),ct()),2&n&&gt("@transitionMessages",pn()._subscriptAnimationState)}function ige(n,e){if(1&n&&(at(0,"mat-hint",34),zn(1),ct()),2&n){const t=pn(2);gt("id",t._hintLabelId),_t(1),hu(t.hintLabel)}}function rge(n,e){if(1&n&&(at(0,"div",31),Yt(1,ige,2,2,"mat-hint",32),qi(2,7),Ri(3,"div",33),qi(4,8),ct()),2&n){const t=pn();gt("@transitionMessages",t._subscriptAnimationState),_t(1),gt("ngIf",t.hintLabel)}}const sge=["*",[["mat-label"]],[["","matPrefix",""],["","matIconPrefix",""]],[["","matTextPrefix",""]],[["","matTextSuffix",""]],[["","matSuffix",""],["","matIconSuffix",""]],[["mat-error"],["","matError",""]],[["mat-hint",3,"align","end"]],[["mat-hint","align","end"]]],oge=["*","mat-label","[matPrefix], [matIconPrefix]","[matTextPrefix]","[matTextSuffix]","[matSuffix], [matIconSuffix]","mat-error, [matError]","mat-hint:not([align='end'])","mat-hint[align='end']"];let qS=(()=>{class n{static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275dir=St({type:n,selectors:[["mat-label"]]})}}return n})();const age=new Fe("MatError");let lge=0,ij=(()=>{class n{constructor(){this.align="start",this.id="mat-mdc-hint-"+lge++}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275dir=St({type:n,selectors:[["mat-hint"]],hostAttrs:[1,"mat-mdc-form-field-hint","mat-mdc-form-field-bottom-align"],hostVars:4,hostBindings:function(i,r){2&i&&(Hy("id",r.id),or("align",null),_r("mat-mdc-form-field-hint-end","end"===r.align))},inputs:{align:"align",id:"id"}})}}return n})();const cge=new Fe("MatPrefix"),rj=new Fe("MatSuffix");let uge=(()=>{class n{constructor(){this._isText=!1}set _isTextSelector(t){this._isText=!0}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275dir=St({type:n,selectors:[["","matSuffix",""],["","matIconSuffix",""],["","matTextSuffix",""]],inputs:{_isTextSelector:["matTextSuffix","_isTextSelector"]},features:[Qi([{provide:rj,useExisting:n}])]})}}return n})();const sj=new Fe("FloatingLabelParent");let oj=(()=>{class n{get floating(){return this._floating}set floating(t){this._floating=t,this.monitorResize&&this._handleResize()}get monitorResize(){return this._monitorResize}set monitorResize(t){this._monitorResize=t,this._monitorResize?this._subscribeToResize():this._resizeSubscription.unsubscribe()}constructor(t){this._elementRef=t,this._floating=!1,this._monitorResize=!1,this._resizeObserver=bt(kme),this._ngZone=bt(mn),this._parent=bt(sj),this._resizeSubscription=new on}ngOnDestroy(){this._resizeSubscription.unsubscribe()}getWidth(){return function dge(n){if(null!==n.offsetParent)return n.scrollWidth;const t=n.cloneNode(!0);t.style.setProperty("position","absolute"),t.style.setProperty("transform","translate(-9999px, -9999px)"),document.documentElement.appendChild(t);const i=t.scrollWidth;return t.remove(),i}(this._elementRef.nativeElement)}get element(){return this._elementRef.nativeElement}_handleResize(){setTimeout(()=>this._parent._handleLabelResized())}_subscribeToResize(){this._resizeSubscription.unsubscribe(),this._ngZone.runOutsideAngular(()=>{this._resizeSubscription=this._resizeObserver.observe(this._elementRef.nativeElement,{box:"border-box"}).subscribe(()=>this._handleResize())})}static{this.\u0275fac=function(i){return new(i||n)(J(Di))}}static{this.\u0275dir=St({type:n,selectors:[["label","matFormFieldFloatingLabel",""]],hostAttrs:[1,"mdc-floating-label","mat-mdc-floating-label"],hostVars:2,hostBindings:function(i,r){2&i&&_r("mdc-floating-label--float-above",r.floating)},inputs:{floating:"floating",monitorResize:"monitorResize"}})}}return n})();const aj="mdc-line-ripple--active",XS="mdc-line-ripple--deactivating";let lj=(()=>{class n{constructor(t,i){this._elementRef=t,this._handleTransitionEnd=r=>{const s=this._elementRef.nativeElement.classList,o=s.contains(XS);"opacity"===r.propertyName&&o&&s.remove(aj,XS)},i.runOutsideAngular(()=>{t.nativeElement.addEventListener("transitionend",this._handleTransitionEnd)})}activate(){const t=this._elementRef.nativeElement.classList;t.remove(XS),t.add(aj)}deactivate(){this._elementRef.nativeElement.classList.add(XS)}ngOnDestroy(){this._elementRef.nativeElement.removeEventListener("transitionend",this._handleTransitionEnd)}static{this.\u0275fac=function(i){return new(i||n)(J(Di),J(mn))}}static{this.\u0275dir=St({type:n,selectors:[["div","matFormFieldLineRipple",""]],hostAttrs:[1,"mdc-line-ripple"]})}}return n})(),cj=(()=>{class n{constructor(t,i){this._elementRef=t,this._ngZone=i,this.open=!1}ngAfterViewInit(){const t=this._elementRef.nativeElement.querySelector(".mdc-floating-label");t?(this._elementRef.nativeElement.classList.add("mdc-notched-outline--upgraded"),"function"==typeof requestAnimationFrame&&(t.style.transitionDuration="0s",this._ngZone.runOutsideAngular(()=>{requestAnimationFrame(()=>t.style.transitionDuration="")}))):this._elementRef.nativeElement.classList.add("mdc-notched-outline--no-label")}_setNotchWidth(t){this._notch.nativeElement.style.width=this.open&&t?`calc(${t}px * var(--mat-mdc-form-field-floating-label-scale, 0.75) + 9px)`:""}static{this.\u0275fac=function(i){return new(i||n)(J(Di),J(mn))}}static{this.\u0275cmp=hr({type:n,selectors:[["div","matFormFieldNotchedOutline",""]],viewQuery:function(i,r){if(1&i&&Vo(Fme,5),2&i){let s;Ui(s=Bi())&&(r._notch=s.first)}},hostAttrs:[1,"mdc-notched-outline"],hostVars:2,hostBindings:function(i,r){2&i&&_r("mdc-notched-outline--notched",r.open)},inputs:{open:["matFormFieldNotchedOutlineOpen","open"]},attrs:Lme,ngContentSelectors:Vme,decls:5,vars:0,consts:[[1,"mdc-notched-outline__leading"],[1,"mdc-notched-outline__notch"],["notch",""],[1,"mdc-notched-outline__trailing"]],template:function(i,r){1&i&&(dl(),Ri(0,"div",0),at(1,"div",1,2),qi(3),ct(),Ri(4,"div",3))},encapsulation:2,changeDetection:0})}}return n})();const hge={transitionMessages:vb("transitionMessages",[yb("enter",_l({opacity:1,transform:"translateY(0%)"})),Hf("void => enter",[_l({opacity:0,transform:"translateY(-5px)"}),t_("300ms cubic-bezier(0.55, 0, 0.55, 0.2)")])])};let fO=(()=>{class n{static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275dir=St({type:n})}}return n})();const pO=new Fe("MatFormField"),fge=new Fe("MAT_FORM_FIELD_DEFAULT_OPTIONS");let uj=0,fj=(()=>{class n{get hideRequiredMarker(){return this._hideRequiredMarker}set hideRequiredMarker(t){this._hideRequiredMarker=xr(t)}get floatLabel(){return this._floatLabel||this._defaults?.floatLabel||"auto"}set floatLabel(t){t!==this._floatLabel&&(this._floatLabel=t,this._changeDetectorRef.markForCheck())}get appearance(){return this._appearance}set appearance(t){const i=this._appearance;this._appearance=t||this._defaults?.appearance||"fill","outline"===this._appearance&&this._appearance!==i&&(this._needsOutlineLabelOffsetUpdateOnStable=!0)}get subscriptSizing(){return this._subscriptSizing||this._defaults?.subscriptSizing||"fixed"}set subscriptSizing(t){this._subscriptSizing=t||this._defaults?.subscriptSizing||"fixed"}get hintLabel(){return this._hintLabel}set hintLabel(t){this._hintLabel=t,this._processHints()}get _control(){return this._explicitFormFieldControl||this._formFieldControl}set _control(t){this._explicitFormFieldControl=t}constructor(t,i,r,s,o,a,l,c){this._elementRef=t,this._changeDetectorRef=i,this._ngZone=r,this._dir=s,this._platform=o,this._defaults=a,this._animationMode=l,this._hideRequiredMarker=!1,this.color="primary",this._appearance="fill",this._subscriptSizing=null,this._hintLabel="",this._hasIconPrefix=!1,this._hasTextPrefix=!1,this._hasIconSuffix=!1,this._hasTextSuffix=!1,this._labelId="mat-mdc-form-field-label-"+uj++,this._hintLabelId="mat-mdc-hint-"+uj++,this._subscriptAnimationState="",this._destroyed=new Q,this._isFocused=null,this._needsOutlineLabelOffsetUpdateOnStable=!1,a&&(a.appearance&&(this.appearance=a.appearance),this._hideRequiredMarker=!!a?.hideRequiredMarker,a.color&&(this.color=a.color))}ngAfterViewInit(){this._updateFocusState(),this._subscriptAnimationState="enter",this._changeDetectorRef.detectChanges()}ngAfterContentInit(){this._assertFormFieldControl(),this._initializeControl(),this._initializeSubscript(),this._initializePrefixAndSuffix(),this._initializeOutlineLabelOffsetSubscriptions()}ngAfterContentChecked(){this._assertFormFieldControl()}ngOnDestroy(){this._destroyed.next(),this._destroyed.complete()}getLabelId(){return this._hasFloatingLabel()?this._labelId:null}getConnectedOverlayOrigin(){return this._textField||this._elementRef}_animateAndLockLabel(){this._hasFloatingLabel()&&(this.floatLabel="always")}_initializeControl(){const t=this._control;t.controlType&&this._elementRef.nativeElement.classList.add(`mat-mdc-form-field-type-${t.controlType}`),t.stateChanges.subscribe(()=>{this._updateFocusState(),this._syncDescribedByIds(),this._changeDetectorRef.markForCheck()}),t.ngControl&&t.ngControl.valueChanges&&t.ngControl.valueChanges.pipe(zo(this._destroyed)).subscribe(()=>this._changeDetectorRef.markForCheck())}_checkPrefixAndSuffixTypes(){this._hasIconPrefix=!!this._prefixChildren.find(t=>!t._isText),this._hasTextPrefix=!!this._prefixChildren.find(t=>t._isText),this._hasIconSuffix=!!this._suffixChildren.find(t=>!t._isText),this._hasTextSuffix=!!this._suffixChildren.find(t=>t._isText)}_initializePrefixAndSuffix(){this._checkPrefixAndSuffixTypes(),X(this._prefixChildren.changes,this._suffixChildren.changes).subscribe(()=>{this._checkPrefixAndSuffixTypes(),this._changeDetectorRef.markForCheck()})}_initializeSubscript(){this._hintChildren.changes.subscribe(()=>{this._processHints(),this._changeDetectorRef.markForCheck()}),this._errorChildren.changes.subscribe(()=>{this._syncDescribedByIds(),this._changeDetectorRef.markForCheck()}),this._validateHints(),this._syncDescribedByIds()}_assertFormFieldControl(){}_updateFocusState(){this._control.focused&&!this._isFocused?(this._isFocused=!0,this._lineRipple?.activate()):!this._control.focused&&(this._isFocused||null===this._isFocused)&&(this._isFocused=!1,this._lineRipple?.deactivate()),this._textField?.nativeElement.classList.toggle("mdc-text-field--focused",this._control.focused)}_initializeOutlineLabelOffsetSubscriptions(){this._prefixChildren.changes.subscribe(()=>this._needsOutlineLabelOffsetUpdateOnStable=!0),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.pipe(zo(this._destroyed)).subscribe(()=>{this._needsOutlineLabelOffsetUpdateOnStable&&(this._needsOutlineLabelOffsetUpdateOnStable=!1,this._updateOutlineLabelOffset())})}),this._dir.change.pipe(zo(this._destroyed)).subscribe(()=>this._needsOutlineLabelOffsetUpdateOnStable=!0)}_shouldAlwaysFloat(){return"always"===this.floatLabel}_hasOutline(){return"outline"===this.appearance}_forceDisplayInfixLabel(){return!this._platform.isBrowser&&this._prefixChildren.length&&!this._shouldLabelFloat()}_hasFloatingLabel(){return!!this._labelChildNonStatic||!!this._labelChildStatic}_shouldLabelFloat(){return this._control.shouldLabelFloat||this._shouldAlwaysFloat()}_shouldForward(t){const i=this._control?this._control.ngControl:null;return i&&i[t]}_getDisplayedMessages(){return this._errorChildren&&this._errorChildren.length>0&&this._control.errorState?"error":"hint"}_handleLabelResized(){this._refreshOutlineNotchWidth()}_refreshOutlineNotchWidth(){this._hasOutline()&&this._floatingLabel&&this._shouldLabelFloat()?this._notchedOutline?._setNotchWidth(this._floatingLabel.getWidth()):this._notchedOutline?._setNotchWidth(0)}_processHints(){this._validateHints(),this._syncDescribedByIds()}_validateHints(){}_syncDescribedByIds(){if(this._control){let t=[];if(this._control.userAriaDescribedBy&&"string"==typeof this._control.userAriaDescribedBy&&t.push(...this._control.userAriaDescribedBy.split(" ")),"hint"===this._getDisplayedMessages()){const i=this._hintChildren?this._hintChildren.find(s=>"start"===s.align):null,r=this._hintChildren?this._hintChildren.find(s=>"end"===s.align):null;i?t.push(i.id):this._hintLabel&&t.push(this._hintLabelId),r&&t.push(r.id)}else this._errorChildren&&t.push(...this._errorChildren.map(i=>i.id));this._control.setDescribedByIds(t)}}_updateOutlineLabelOffset(){if(!this._platform.isBrowser||!this._hasOutline()||!this._floatingLabel)return;const t=this._floatingLabel.element;if(!this._iconPrefixContainer&&!this._textPrefixContainer)return void(t.style.transform="");if(!this._isAttachedToDom())return void(this._needsOutlineLabelOffsetUpdateOnStable=!0);const i=this._iconPrefixContainer?.nativeElement,r=this._textPrefixContainer?.nativeElement,s=i?.getBoundingClientRect().width??0,o=r?.getBoundingClientRect().width??0;t.style.transform=`var(\n        --mat-mdc-form-field-label-transform,\n        translateY(-50%) translateX(calc(${"rtl"===this._dir.value?"-1":"1"} * (${s+o}px + var(--mat-mdc-form-field-label-offset-x, 0px))))\n    )`}_isAttachedToDom(){const t=this._elementRef.nativeElement;if(t.getRootNode){const i=t.getRootNode();return i&&i!==t}return document.documentElement.contains(t)}static{this.\u0275fac=function(i){return new(i||n)(J(Di),J(fu),J(mn),J(jS),J(fa),J(fge,8),J(lu,8),J(_i))}}static{this.\u0275cmp=hr({type:n,selectors:[["mat-form-field"]],contentQueries:function(i,r,s){if(1&i&&(Vs(s,qS,5),Vs(s,qS,7),Vs(s,fO,5),Vs(s,cge,5),Vs(s,rj,5),Vs(s,age,5),Vs(s,ij,5)),2&i){let o;Ui(o=Bi())&&(r._labelChildNonStatic=o.first),Ui(o=Bi())&&(r._labelChildStatic=o.first),Ui(o=Bi())&&(r._formFieldControl=o.first),Ui(o=Bi())&&(r._prefixChildren=o),Ui(o=Bi())&&(r._suffixChildren=o),Ui(o=Bi())&&(r._errorChildren=o),Ui(o=Bi())&&(r._hintChildren=o)}},viewQuery:function(i,r){if(1&i&&(Vo(Ume,5),Vo(Bme,5),Vo(zme,5),Vo(oj,5),Vo(cj,5),Vo(lj,5)),2&i){let s;Ui(s=Bi())&&(r._textField=s.first),Ui(s=Bi())&&(r._iconPrefixContainer=s.first),Ui(s=Bi())&&(r._textPrefixContainer=s.first),Ui(s=Bi())&&(r._floatingLabel=s.first),Ui(s=Bi())&&(r._notchedOutline=s.first),Ui(s=Bi())&&(r._lineRipple=s.first)}},hostAttrs:[1,"mat-mdc-form-field"],hostVars:42,hostBindings:function(i,r){2&i&&_r("mat-mdc-form-field-label-always-float",r._shouldAlwaysFloat())("mat-mdc-form-field-has-icon-prefix",r._hasIconPrefix)("mat-mdc-form-field-has-icon-suffix",r._hasIconSuffix)("mat-form-field-invalid",r._control.errorState)("mat-form-field-disabled",r._control.disabled)("mat-form-field-autofilled",r._control.autofilled)("mat-form-field-no-animations","NoopAnimations"===r._animationMode)("mat-form-field-appearance-fill","fill"==r.appearance)("mat-form-field-appearance-outline","outline"==r.appearance)("mat-form-field-hide-placeholder",r._hasFloatingLabel()&&!r._shouldLabelFloat())("mat-focused",r._control.focused)("mat-primary","accent"!==r.color&&"warn"!==r.color)("mat-accent","accent"===r.color)("mat-warn","warn"===r.color)("ng-untouched",r._shouldForward("untouched"))("ng-touched",r._shouldForward("touched"))("ng-pristine",r._shouldForward("pristine"))("ng-dirty",r._shouldForward("dirty"))("ng-valid",r._shouldForward("valid"))("ng-invalid",r._shouldForward("invalid"))("ng-pending",r._shouldForward("pending"))},inputs:{hideRequiredMarker:"hideRequiredMarker",color:"color",floatLabel:"floatLabel",appearance:"appearance",subscriptSizing:"subscriptSizing",hintLabel:"hintLabel"},exportAs:["matFormField"],features:[Qi([{provide:pO,useExisting:n},{provide:sj,useExisting:n}])],ngContentSelectors:oge,decls:18,vars:23,consts:[["labelTemplate",""],[1,"mat-mdc-text-field-wrapper","mdc-text-field",3,"click"],["textField",""],["class","mat-mdc-form-field-focus-overlay",4,"ngIf"],[1,"mat-mdc-form-field-flex"],["matFormFieldNotchedOutline","",3,"matFormFieldNotchedOutlineOpen",4,"ngIf"],["class","mat-mdc-form-field-icon-prefix",4,"ngIf"],["class","mat-mdc-form-field-text-prefix",4,"ngIf"],[1,"mat-mdc-form-field-infix"],[3,"ngIf"],["class","mat-mdc-form-field-text-suffix",4,"ngIf"],["class","mat-mdc-form-field-icon-suffix",4,"ngIf"],["matFormFieldLineRipple","",4,"ngIf"],[1,"mat-mdc-form-field-subscript-wrapper","mat-mdc-form-field-bottom-align",3,"ngSwitch"],["class","mat-mdc-form-field-error-wrapper",4,"ngSwitchCase"],["class","mat-mdc-form-field-hint-wrapper",4,"ngSwitchCase"],["matFormFieldFloatingLabel","",3,"floating","monitorResize","id",4,"ngIf"],["matFormFieldFloatingLabel","",3,"floating","monitorResize","id"],["aria-hidden","true","class","mat-mdc-form-field-required-marker mdc-floating-label--required",4,"ngIf"],["aria-hidden","true",1,"mat-mdc-form-field-required-marker","mdc-floating-label--required"],[1,"mat-mdc-form-field-focus-overlay"],["matFormFieldNotchedOutline","",3,"matFormFieldNotchedOutlineOpen"],[3,"ngTemplateOutlet"],[1,"mat-mdc-form-field-icon-prefix"],["iconPrefixContainer",""],[1,"mat-mdc-form-field-text-prefix"],["textPrefixContainer",""],[1,"mat-mdc-form-field-text-suffix"],[1,"mat-mdc-form-field-icon-suffix"],["matFormFieldLineRipple",""],[1,"mat-mdc-form-field-error-wrapper"],[1,"mat-mdc-form-field-hint-wrapper"],[3,"id",4,"ngIf"],[1,"mat-mdc-form-field-hint-spacer"],[3,"id"]],template:function(i,r){1&i&&(dl(sge),Yt(0,Wme,1,1,"ng-template",null,0,Qm),at(2,"div",1,2),qn("click",function(o){return r._control.onContainerClick(o)}),Yt(4,jme,1,0,"div",3),at(5,"div",4),Yt(6,Xme,2,2,"div",5),Yt(7,Kme,3,0,"div",6),Yt(8,Yme,3,0,"div",7),at(9,"div",8),Yt(10,Zme,1,1,"ng-template",9),qi(11),ct(),Yt(12,Jme,2,0,"div",10),Yt(13,ege,2,0,"div",11),ct(),Yt(14,tge,1,0,"div",12),ct(),at(15,"div",13),Yt(16,nge,2,1,"div",14),Yt(17,rge,5,2,"div",15),ct()),2&i&&(_t(2),_r("mdc-text-field--filled",!r._hasOutline())("mdc-text-field--outlined",r._hasOutline())("mdc-text-field--no-label",!r._hasFloatingLabel())("mdc-text-field--disabled",r._control.disabled)("mdc-text-field--invalid",r._control.errorState),_t(2),gt("ngIf",!r._hasOutline()&&!r._control.disabled),_t(2),gt("ngIf",r._hasOutline()),_t(1),gt("ngIf",r._hasIconPrefix),_t(1),gt("ngIf",r._hasTextPrefix),_t(2),gt("ngIf",!r._hasOutline()||r._forceDisplayInfixLabel()),_t(2),gt("ngIf",r._hasTextSuffix),_t(1),gt("ngIf",r._hasIconSuffix),_t(1),gt("ngIf",!r._hasOutline()),_t(1),_r("mat-mdc-form-field-subscript-dynamic-size","dynamic"===r.subscriptSizing),gt("ngSwitch",r._getDisplayedMessages()),_t(1),gt("ngSwitchCase","error"),_t(1),gt("ngSwitchCase","hint"))},dependencies:[_u,P1,n0,R1,ij,oj,cj,lj],styles:['.mdc-text-field{border-top-left-radius:4px;border-top-left-radius:var(--mdc-shape-small, 4px);border-top-right-radius:4px;border-top-right-radius:var(--mdc-shape-small, 4px);border-bottom-right-radius:0;border-bottom-left-radius:0;display:inline-flex;align-items:baseline;padding:0 16px;position:relative;box-sizing:border-box;overflow:hidden;will-change:opacity,transform,color}.mdc-text-field .mdc-floating-label{top:50%;transform:translateY(-50%);pointer-events:none}.mdc-text-field__input{height:28px;width:100%;min-width:0;border:none;border-radius:0;background:none;appearance:none;padding:0}.mdc-text-field__input::-ms-clear{display:none}.mdc-text-field__input::-webkit-calendar-picker-indicator{display:none}.mdc-text-field__input:focus{outline:none}.mdc-text-field__input:invalid{box-shadow:none}@media all{.mdc-text-field__input::placeholder{opacity:0}}@media all{.mdc-text-field__input:-ms-input-placeholder{opacity:0}}@media all{.mdc-text-field--no-label .mdc-text-field__input::placeholder,.mdc-text-field--focused .mdc-text-field__input::placeholder{opacity:1}}@media all{.mdc-text-field--no-label .mdc-text-field__input:-ms-input-placeholder,.mdc-text-field--focused .mdc-text-field__input:-ms-input-placeholder{opacity:1}}.mdc-text-field__affix{height:28px;opacity:0;white-space:nowrap}.mdc-text-field--label-floating .mdc-text-field__affix,.mdc-text-field--no-label .mdc-text-field__affix{opacity:1}@supports(-webkit-hyphens: none){.mdc-text-field--outlined .mdc-text-field__affix{align-items:center;align-self:center;display:inline-flex;height:100%}}.mdc-text-field__affix--prefix{padding-left:0;padding-right:2px}[dir=rtl] .mdc-text-field__affix--prefix,.mdc-text-field__affix--prefix[dir=rtl]{padding-left:2px;padding-right:0}.mdc-text-field--end-aligned .mdc-text-field__affix--prefix{padding-left:0;padding-right:12px}[dir=rtl] .mdc-text-field--end-aligned .mdc-text-field__affix--prefix,.mdc-text-field--end-aligned .mdc-text-field__affix--prefix[dir=rtl]{padding-left:12px;padding-right:0}.mdc-text-field__affix--suffix{padding-left:12px;padding-right:0}[dir=rtl] .mdc-text-field__affix--suffix,.mdc-text-field__affix--suffix[dir=rtl]{padding-left:0;padding-right:12px}.mdc-text-field--end-aligned .mdc-text-field__affix--suffix{padding-left:2px;padding-right:0}[dir=rtl] .mdc-text-field--end-aligned .mdc-text-field__affix--suffix,.mdc-text-field--end-aligned .mdc-text-field__affix--suffix[dir=rtl]{padding-left:0;padding-right:2px}.mdc-text-field--filled{height:56px}.mdc-text-field--filled::before{display:inline-block;width:0;height:40px;content:"";vertical-align:0}.mdc-text-field--filled .mdc-floating-label{left:16px;right:initial}[dir=rtl] .mdc-text-field--filled .mdc-floating-label,.mdc-text-field--filled .mdc-floating-label[dir=rtl]{left:initial;right:16px}.mdc-text-field--filled .mdc-floating-label--float-above{transform:translateY(-106%) scale(0.75)}.mdc-text-field--filled.mdc-text-field--no-label .mdc-text-field__input{height:100%}.mdc-text-field--filled.mdc-text-field--no-label .mdc-floating-label{display:none}.mdc-text-field--filled.mdc-text-field--no-label::before{display:none}@supports(-webkit-hyphens: none){.mdc-text-field--filled.mdc-text-field--no-label .mdc-text-field__affix{align-items:center;align-self:center;display:inline-flex;height:100%}}.mdc-text-field--outlined{height:56px;overflow:visible}.mdc-text-field--outlined .mdc-floating-label--float-above{transform:translateY(-37.25px) scale(1)}.mdc-text-field--outlined .mdc-floating-label--float-above{font-size:.75rem}.mdc-text-field--outlined.mdc-notched-outline--upgraded .mdc-floating-label--float-above,.mdc-text-field--outlined .mdc-notched-outline--upgraded .mdc-floating-label--float-above{transform:translateY(-34.75px) scale(0.75)}.mdc-text-field--outlined.mdc-notched-outline--upgraded .mdc-floating-label--float-above,.mdc-text-field--outlined .mdc-notched-outline--upgraded .mdc-floating-label--float-above{font-size:1rem}.mdc-text-field--outlined .mdc-text-field__input{height:100%}.mdc-text-field--outlined .mdc-notched-outline .mdc-notched-outline__leading{border-top-left-radius:4px;border-top-left-radius:var(--mdc-shape-small, 4px);border-top-right-radius:0;border-bottom-right-radius:0;border-bottom-left-radius:4px;border-bottom-left-radius:var(--mdc-shape-small, 4px)}[dir=rtl] .mdc-text-field--outlined .mdc-notched-outline .mdc-notched-outline__leading,.mdc-text-field--outlined .mdc-notched-outline .mdc-notched-outline__leading[dir=rtl]{border-top-left-radius:0;border-top-right-radius:4px;border-top-right-radius:var(--mdc-shape-small, 4px);border-bottom-right-radius:4px;border-bottom-right-radius:var(--mdc-shape-small, 4px);border-bottom-left-radius:0}@supports(top: max(0%)){.mdc-text-field--outlined .mdc-notched-outline .mdc-notched-outline__leading{width:max(12px, var(--mdc-shape-small, 4px))}}@supports(top: max(0%)){.mdc-text-field--outlined .mdc-notched-outline .mdc-notched-outline__notch{max-width:calc(100% - max(12px, var(--mdc-shape-small, 4px))*2)}}.mdc-text-field--outlined .mdc-notched-outline .mdc-notched-outline__trailing{border-top-left-radius:0;border-top-right-radius:4px;border-top-right-radius:var(--mdc-shape-small, 4px);border-bottom-right-radius:4px;border-bottom-right-radius:var(--mdc-shape-small, 4px);border-bottom-left-radius:0}[dir=rtl] .mdc-text-field--outlined .mdc-notched-outline .mdc-notched-outline__trailing,.mdc-text-field--outlined .mdc-notched-outline .mdc-notched-outline__trailing[dir=rtl]{border-top-left-radius:4px;border-top-left-radius:var(--mdc-shape-small, 4px);border-top-right-radius:0;border-bottom-right-radius:0;border-bottom-left-radius:4px;border-bottom-left-radius:var(--mdc-shape-small, 4px)}@supports(top: max(0%)){.mdc-text-field--outlined{padding-left:max(16px, calc(var(--mdc-shape-small, 4px) + 4px))}}@supports(top: max(0%)){.mdc-text-field--outlined{padding-right:max(16px, var(--mdc-shape-small, 4px))}}@supports(top: max(0%)){.mdc-text-field--outlined+.mdc-text-field-helper-line{padding-left:max(16px, calc(var(--mdc-shape-small, 4px) + 4px))}}@supports(top: max(0%)){.mdc-text-field--outlined+.mdc-text-field-helper-line{padding-right:max(16px, var(--mdc-shape-small, 4px))}}.mdc-text-field--outlined.mdc-text-field--with-leading-icon{padding-left:0}@supports(top: max(0%)){.mdc-text-field--outlined.mdc-text-field--with-leading-icon{padding-right:max(16px, var(--mdc-shape-small, 4px))}}[dir=rtl] .mdc-text-field--outlined.mdc-text-field--with-leading-icon,.mdc-text-field--outlined.mdc-text-field--with-leading-icon[dir=rtl]{padding-right:0}@supports(top: max(0%)){[dir=rtl] .mdc-text-field--outlined.mdc-text-field--with-leading-icon,.mdc-text-field--outlined.mdc-text-field--with-leading-icon[dir=rtl]{padding-left:max(16px, var(--mdc-shape-small, 4px))}}.mdc-text-field--outlined.mdc-text-field--with-trailing-icon{padding-right:0}@supports(top: max(0%)){.mdc-text-field--outlined.mdc-text-field--with-trailing-icon{padding-left:max(16px, calc(var(--mdc-shape-small, 4px) + 4px))}}[dir=rtl] .mdc-text-field--outlined.mdc-text-field--with-trailing-icon,.mdc-text-field--outlined.mdc-text-field--with-trailing-icon[dir=rtl]{padding-left:0}@supports(top: max(0%)){[dir=rtl] .mdc-text-field--outlined.mdc-text-field--with-trailing-icon,.mdc-text-field--outlined.mdc-text-field--with-trailing-icon[dir=rtl]{padding-right:max(16px, calc(var(--mdc-shape-small, 4px) + 4px))}}.mdc-text-field--outlined.mdc-text-field--with-leading-icon.mdc-text-field--with-trailing-icon{padding-left:0;padding-right:0}.mdc-text-field--outlined .mdc-notched-outline--notched .mdc-notched-outline__notch{padding-top:1px}.mdc-text-field--outlined .mdc-floating-label{left:4px;right:initial}[dir=rtl] .mdc-text-field--outlined .mdc-floating-label,.mdc-text-field--outlined .mdc-floating-label[dir=rtl]{left:initial;right:4px}.mdc-text-field--outlined .mdc-text-field__input{display:flex;border:none !important;background-color:rgba(0,0,0,0)}.mdc-text-field--outlined .mdc-notched-outline{z-index:1}.mdc-text-field--textarea{flex-direction:column;align-items:center;width:auto;height:auto;padding:0}.mdc-text-field--textarea .mdc-floating-label{top:19px}.mdc-text-field--textarea .mdc-floating-label:not(.mdc-floating-label--float-above){transform:none}.mdc-text-field--textarea .mdc-text-field__input{flex-grow:1;height:auto;min-height:1.5rem;overflow-x:hidden;overflow-y:auto;box-sizing:border-box;resize:none;padding:0 16px}.mdc-text-field--textarea.mdc-text-field--filled::before{display:none}.mdc-text-field--textarea.mdc-text-field--filled .mdc-floating-label--float-above{transform:translateY(-10.25px) scale(0.75)}.mdc-text-field--textarea.mdc-text-field--filled .mdc-text-field__input{margin-top:23px;margin-bottom:9px}.mdc-text-field--textarea.mdc-text-field--filled.mdc-text-field--no-label .mdc-text-field__input{margin-top:16px;margin-bottom:16px}.mdc-text-field--textarea.mdc-text-field--outlined .mdc-notched-outline--notched .mdc-notched-outline__notch{padding-top:0}.mdc-text-field--textarea.mdc-text-field--outlined .mdc-floating-label--float-above{transform:translateY(-27.25px) scale(1)}.mdc-text-field--textarea.mdc-text-field--outlined .mdc-floating-label--float-above{font-size:.75rem}.mdc-text-field--textarea.mdc-text-field--outlined.mdc-notched-outline--upgraded .mdc-floating-label--float-above,.mdc-text-field--textarea.mdc-text-field--outlined .mdc-notched-outline--upgraded .mdc-floating-label--float-above{transform:translateY(-24.75px) scale(0.75)}.mdc-text-field--textarea.mdc-text-field--outlined.mdc-notched-outline--upgraded .mdc-floating-label--float-above,.mdc-text-field--textarea.mdc-text-field--outlined .mdc-notched-outline--upgraded .mdc-floating-label--float-above{font-size:1rem}.mdc-text-field--textarea.mdc-text-field--outlined .mdc-text-field__input{margin-top:16px;margin-bottom:16px}.mdc-text-field--textarea.mdc-text-field--outlined .mdc-floating-label{top:18px}.mdc-text-field--textarea.mdc-text-field--with-internal-counter .mdc-text-field__input{margin-bottom:2px}.mdc-text-field--textarea.mdc-text-field--with-internal-counter .mdc-text-field-character-counter{align-self:flex-end;padding:0 16px}.mdc-text-field--textarea.mdc-text-field--with-internal-counter .mdc-text-field-character-counter::after{display:inline-block;width:0;height:16px;content:"";vertical-align:-16px}.mdc-text-field--textarea.mdc-text-field--with-internal-counter .mdc-text-field-character-counter::before{display:none}.mdc-text-field__resizer{align-self:stretch;display:inline-flex;flex-direction:column;flex-grow:1;max-height:100%;max-width:100%;min-height:56px;min-width:fit-content;min-width:-moz-available;min-width:-webkit-fill-available;overflow:hidden;resize:both}.mdc-text-field--filled .mdc-text-field__resizer{transform:translateY(-1px)}.mdc-text-field--filled .mdc-text-field__resizer .mdc-text-field__input,.mdc-text-field--filled .mdc-text-field__resizer .mdc-text-field-character-counter{transform:translateY(1px)}.mdc-text-field--outlined .mdc-text-field__resizer{transform:translateX(-1px) translateY(-1px)}[dir=rtl] .mdc-text-field--outlined .mdc-text-field__resizer,.mdc-text-field--outlined .mdc-text-field__resizer[dir=rtl]{transform:translateX(1px) translateY(-1px)}.mdc-text-field--outlined .mdc-text-field__resizer .mdc-text-field__input,.mdc-text-field--outlined .mdc-text-field__resizer .mdc-text-field-character-counter{transform:translateX(1px) translateY(1px)}[dir=rtl] .mdc-text-field--outlined .mdc-text-field__resizer .mdc-text-field__input,[dir=rtl] .mdc-text-field--outlined .mdc-text-field__resizer .mdc-text-field-character-counter,.mdc-text-field--outlined .mdc-text-field__resizer .mdc-text-field__input[dir=rtl],.mdc-text-field--outlined .mdc-text-field__resizer .mdc-text-field-character-counter[dir=rtl]{transform:translateX(-1px) translateY(1px)}.mdc-text-field--with-leading-icon{padding-left:0;padding-right:16px}[dir=rtl] .mdc-text-field--with-leading-icon,.mdc-text-field--with-leading-icon[dir=rtl]{padding-left:16px;padding-right:0}.mdc-text-field--with-leading-icon.mdc-text-field--filled .mdc-floating-label{max-width:calc(100% - 48px);left:48px;right:initial}[dir=rtl] .mdc-text-field--with-leading-icon.mdc-text-field--filled .mdc-floating-label,.mdc-text-field--with-leading-icon.mdc-text-field--filled .mdc-floating-label[dir=rtl]{left:initial;right:48px}.mdc-text-field--with-leading-icon.mdc-text-field--filled .mdc-floating-label--float-above{max-width:calc(100% / 0.75 - 64px / 0.75)}.mdc-text-field--with-leading-icon.mdc-text-field--outlined .mdc-floating-label{left:36px;right:initial}[dir=rtl] .mdc-text-field--with-leading-icon.mdc-text-field--outlined .mdc-floating-label,.mdc-text-field--with-leading-icon.mdc-text-field--outlined .mdc-floating-label[dir=rtl]{left:initial;right:36px}.mdc-text-field--with-leading-icon.mdc-text-field--outlined :not(.mdc-notched-outline--notched) .mdc-notched-outline__notch{max-width:calc(100% - 60px)}.mdc-text-field--with-leading-icon.mdc-text-field--outlined .mdc-floating-label--float-above{transform:translateY(-37.25px) translateX(-32px) scale(1)}[dir=rtl] .mdc-text-field--with-leading-icon.mdc-text-field--outlined .mdc-floating-label--float-above,.mdc-text-field--with-leading-icon.mdc-text-field--outlined .mdc-floating-label--float-above[dir=rtl]{transform:translateY(-37.25px) translateX(32px) scale(1)}.mdc-text-field--with-leading-icon.mdc-text-field--outlined .mdc-floating-label--float-above{font-size:.75rem}.mdc-text-field--with-leading-icon.mdc-text-field--outlined.mdc-notched-outline--upgraded .mdc-floating-label--float-above,.mdc-text-field--with-leading-icon.mdc-text-field--outlined .mdc-notched-outline--upgraded .mdc-floating-label--float-above{transform:translateY(-34.75px) translateX(-32px) scale(0.75)}[dir=rtl] .mdc-text-field--with-leading-icon.mdc-text-field--outlined.mdc-notched-outline--upgraded .mdc-floating-label--float-above,[dir=rtl] .mdc-text-field--with-leading-icon.mdc-text-field--outlined .mdc-notched-outline--upgraded .mdc-floating-label--float-above,.mdc-text-field--with-leading-icon.mdc-text-field--outlined.mdc-notched-outline--upgraded .mdc-floating-label--float-above[dir=rtl],.mdc-text-field--with-leading-icon.mdc-text-field--outlined .mdc-notched-outline--upgraded .mdc-floating-label--float-above[dir=rtl]{transform:translateY(-34.75px) translateX(32px) scale(0.75)}.mdc-text-field--with-leading-icon.mdc-text-field--outlined.mdc-notched-outline--upgraded .mdc-floating-label--float-above,.mdc-text-field--with-leading-icon.mdc-text-field--outlined .mdc-notched-outline--upgraded .mdc-floating-label--float-above{font-size:1rem}.mdc-text-field--with-trailing-icon{padding-left:16px;padding-right:0}[dir=rtl] .mdc-text-field--with-trailing-icon,.mdc-text-field--with-trailing-icon[dir=rtl]{padding-left:0;padding-right:16px}.mdc-text-field--with-trailing-icon.mdc-text-field--filled .mdc-floating-label{max-width:calc(100% - 64px)}.mdc-text-field--with-trailing-icon.mdc-text-field--filled .mdc-floating-label--float-above{max-width:calc(100% / 0.75 - 64px / 0.75)}.mdc-text-field--with-trailing-icon.mdc-text-field--outlined :not(.mdc-notched-outline--notched) .mdc-notched-outline__notch{max-width:calc(100% - 60px)}.mdc-text-field--with-leading-icon.mdc-text-field--with-trailing-icon{padding-left:0;padding-right:0}.mdc-text-field--with-leading-icon.mdc-text-field--with-trailing-icon.mdc-text-field--filled .mdc-floating-label{max-width:calc(100% - 96px)}.mdc-text-field--with-leading-icon.mdc-text-field--with-trailing-icon.mdc-text-field--filled .mdc-floating-label--float-above{max-width:calc(100% / 0.75 - 96px / 0.75)}.mdc-text-field-helper-line{display:flex;justify-content:space-between;box-sizing:border-box}.mdc-text-field+.mdc-text-field-helper-line{padding-right:16px;padding-left:16px}.mdc-form-field>.mdc-text-field+label{align-self:flex-start}.mdc-text-field--focused .mdc-notched-outline__leading,.mdc-text-field--focused .mdc-notched-outline__notch,.mdc-text-field--focused .mdc-notched-outline__trailing{border-width:2px}.mdc-text-field--focused+.mdc-text-field-helper-line .mdc-text-field-helper-text:not(.mdc-text-field-helper-text--validation-msg){opacity:1}.mdc-text-field--focused.mdc-text-field--outlined .mdc-notched-outline--notched .mdc-notched-outline__notch{padding-top:2px}.mdc-text-field--focused.mdc-text-field--outlined.mdc-text-field--textarea .mdc-notched-outline--notched .mdc-notched-outline__notch{padding-top:0}.mdc-text-field--invalid+.mdc-text-field-helper-line .mdc-text-field-helper-text--validation-msg{opacity:1}.mdc-text-field--disabled{pointer-events:none}@media screen and (forced-colors: active){.mdc-text-field--disabled .mdc-text-field__input{background-color:Window}.mdc-text-field--disabled .mdc-floating-label{z-index:1}}.mdc-text-field--disabled .mdc-floating-label{cursor:default}.mdc-text-field--disabled.mdc-text-field--filled .mdc-text-field__ripple{display:none}.mdc-text-field--disabled .mdc-text-field__input{pointer-events:auto}.mdc-text-field--end-aligned .mdc-text-field__input{text-align:right}[dir=rtl] .mdc-text-field--end-aligned .mdc-text-field__input,.mdc-text-field--end-aligned .mdc-text-field__input[dir=rtl]{text-align:left}[dir=rtl] .mdc-text-field--ltr-text .mdc-text-field__input,[dir=rtl] .mdc-text-field--ltr-text .mdc-text-field__affix,.mdc-text-field--ltr-text[dir=rtl] .mdc-text-field__input,.mdc-text-field--ltr-text[dir=rtl] .mdc-text-field__affix{direction:ltr}[dir=rtl] .mdc-text-field--ltr-text .mdc-text-field__affix--prefix,.mdc-text-field--ltr-text[dir=rtl] .mdc-text-field__affix--prefix{padding-left:0;padding-right:2px}[dir=rtl] .mdc-text-field--ltr-text .mdc-text-field__affix--suffix,.mdc-text-field--ltr-text[dir=rtl] .mdc-text-field__affix--suffix{padding-left:12px;padding-right:0}[dir=rtl] .mdc-text-field--ltr-text .mdc-text-field__icon--leading,.mdc-text-field--ltr-text[dir=rtl] .mdc-text-field__icon--leading{order:1}[dir=rtl] .mdc-text-field--ltr-text .mdc-text-field__affix--suffix,.mdc-text-field--ltr-text[dir=rtl] .mdc-text-field__affix--suffix{order:2}[dir=rtl] .mdc-text-field--ltr-text .mdc-text-field__input,.mdc-text-field--ltr-text[dir=rtl] .mdc-text-field__input{order:3}[dir=rtl] .mdc-text-field--ltr-text .mdc-text-field__affix--prefix,.mdc-text-field--ltr-text[dir=rtl] .mdc-text-field__affix--prefix{order:4}[dir=rtl] .mdc-text-field--ltr-text .mdc-text-field__icon--trailing,.mdc-text-field--ltr-text[dir=rtl] .mdc-text-field__icon--trailing{order:5}[dir=rtl] .mdc-text-field--ltr-text.mdc-text-field--end-aligned .mdc-text-field__input,.mdc-text-field--ltr-text.mdc-text-field--end-aligned[dir=rtl] .mdc-text-field__input{text-align:right}[dir=rtl] .mdc-text-field--ltr-text.mdc-text-field--end-aligned .mdc-text-field__affix--prefix,.mdc-text-field--ltr-text.mdc-text-field--end-aligned[dir=rtl] .mdc-text-field__affix--prefix{padding-right:12px}[dir=rtl] .mdc-text-field--ltr-text.mdc-text-field--end-aligned .mdc-text-field__affix--suffix,.mdc-text-field--ltr-text.mdc-text-field--end-aligned[dir=rtl] .mdc-text-field__affix--suffix{padding-left:2px}.mdc-floating-label{position:absolute;left:0;-webkit-transform-origin:left top;transform-origin:left top;line-height:1.15rem;text-align:left;text-overflow:ellipsis;white-space:nowrap;cursor:text;overflow:hidden;will-change:transform}[dir=rtl] .mdc-floating-label,.mdc-floating-label[dir=rtl]{right:0;left:auto;-webkit-transform-origin:right top;transform-origin:right top;text-align:right}.mdc-floating-label--float-above{cursor:auto}.mdc-floating-label--required:not(.mdc-floating-label--hide-required-marker)::after{margin-left:1px;margin-right:0px;content:"*"}[dir=rtl] .mdc-floating-label--required:not(.mdc-floating-label--hide-required-marker)::after,.mdc-floating-label--required:not(.mdc-floating-label--hide-required-marker)[dir=rtl]::after{margin-left:0;margin-right:1px}.mdc-notched-outline{display:flex;position:absolute;top:0;right:0;left:0;box-sizing:border-box;width:100%;max-width:100%;height:100%;text-align:left;pointer-events:none}[dir=rtl] .mdc-notched-outline,.mdc-notched-outline[dir=rtl]{text-align:right}.mdc-notched-outline__leading,.mdc-notched-outline__notch,.mdc-notched-outline__trailing{box-sizing:border-box;height:100%;pointer-events:none}.mdc-notched-outline__trailing{flex-grow:1}.mdc-notched-outline__notch{flex:0 0 auto;width:auto}.mdc-notched-outline .mdc-floating-label{display:inline-block;position:relative;max-width:100%}.mdc-notched-outline .mdc-floating-label--float-above{text-overflow:clip}.mdc-notched-outline--upgraded .mdc-floating-label--float-above{max-width:133.3333333333%}.mdc-notched-outline--notched .mdc-notched-outline__notch{padding-left:0;padding-right:8px;border-top:none}[dir=rtl] .mdc-notched-outline--notched .mdc-notched-outline__notch,.mdc-notched-outline--notched .mdc-notched-outline__notch[dir=rtl]{padding-left:8px;padding-right:0}.mdc-notched-outline--no-label .mdc-notched-outline__notch{display:none}.mdc-line-ripple::before,.mdc-line-ripple::after{position:absolute;bottom:0;left:0;width:100%;border-bottom-style:solid;content:""}.mdc-line-ripple::before{z-index:1}.mdc-line-ripple::after{transform:scaleX(0);opacity:0;z-index:2}.mdc-line-ripple--active::after{transform:scaleX(1);opacity:1}.mdc-line-ripple--deactivating::after{opacity:0}.mdc-floating-label--float-above{transform:translateY(-106%) scale(0.75)}.mdc-notched-outline__leading,.mdc-notched-outline__notch,.mdc-notched-outline__trailing{border-top:1px solid;border-bottom:1px solid}.mdc-notched-outline__leading{border-left:1px solid;border-right:none;width:12px}[dir=rtl] .mdc-notched-outline__leading,.mdc-notched-outline__leading[dir=rtl]{border-left:none;border-right:1px solid}.mdc-notched-outline__trailing{border-left:none;border-right:1px solid}[dir=rtl] .mdc-notched-outline__trailing,.mdc-notched-outline__trailing[dir=rtl]{border-left:1px solid;border-right:none}.mdc-notched-outline__notch{max-width:calc(100% - 12px * 2)}.mdc-line-ripple::before{border-bottom-width:1px}.mdc-line-ripple::after{border-bottom-width:2px}.mdc-text-field--filled{--mdc-filled-text-field-active-indicator-height:1px;--mdc-filled-text-field-focus-active-indicator-height:2px;--mdc-filled-text-field-container-shape:4px;border-top-left-radius:var(--mdc-filled-text-field-container-shape);border-top-right-radius:var(--mdc-filled-text-field-container-shape);border-bottom-right-radius:0;border-bottom-left-radius:0}.mdc-text-field--filled:not(.mdc-text-field--disabled) .mdc-text-field__input{caret-color:var(--mdc-filled-text-field-caret-color)}.mdc-text-field--filled.mdc-text-field--invalid:not(.mdc-text-field--disabled) .mdc-text-field__input{caret-color:var(--mdc-filled-text-field-error-caret-color)}.mdc-text-field--filled:not(.mdc-text-field--disabled) .mdc-text-field__input{color:var(--mdc-filled-text-field-input-text-color)}.mdc-text-field--filled.mdc-text-field--disabled .mdc-text-field__input{color:var(--mdc-filled-text-field-disabled-input-text-color)}.mdc-text-field--filled:not(.mdc-text-field--disabled) .mdc-floating-label,.mdc-text-field--filled:not(.mdc-text-field--disabled) .mdc-floating-label--float-above{color:var(--mdc-filled-text-field-label-text-color)}.mdc-text-field--filled:not(.mdc-text-field--disabled).mdc-text-field--focused .mdc-floating-label,.mdc-text-field--filled:not(.mdc-text-field--disabled).mdc-text-field--focused .mdc-floating-label--float-above{color:var(--mdc-filled-text-field-focus-label-text-color)}.mdc-text-field--filled.mdc-text-field--disabled .mdc-floating-label,.mdc-text-field--filled.mdc-text-field--disabled .mdc-floating-label--float-above{color:var(--mdc-filled-text-field-disabled-label-text-color)}.mdc-text-field--filled.mdc-text-field--invalid:not(.mdc-text-field--disabled) .mdc-floating-label,.mdc-text-field--filled.mdc-text-field--invalid:not(.mdc-text-field--disabled) .mdc-floating-label--float-above{color:var(--mdc-filled-text-field-error-label-text-color)}.mdc-text-field--filled.mdc-text-field--invalid:not(.mdc-text-field--disabled).mdc-text-field--focused .mdc-floating-label,.mdc-text-field--filled.mdc-text-field--invalid:not(.mdc-text-field--disabled).mdc-text-field--focused .mdc-floating-label--float-above{color:var(--mdc-filled-text-field-error-focus-label-text-color)}.mdc-text-field--filled .mdc-floating-label{font-family:var(--mdc-filled-text-field-label-text-font);font-size:var(--mdc-filled-text-field-label-text-size);font-weight:var(--mdc-filled-text-field-label-text-weight);letter-spacing:var(--mdc-filled-text-field-label-text-tracking)}@media all{.mdc-text-field--filled:not(.mdc-text-field--disabled) .mdc-text-field__input::placeholder{color:var(--mdc-filled-text-field-input-text-placeholder-color)}}@media all{.mdc-text-field--filled:not(.mdc-text-field--disabled) .mdc-text-field__input:-ms-input-placeholder{color:var(--mdc-filled-text-field-input-text-placeholder-color)}}.mdc-text-field--filled:not(.mdc-text-field--disabled){background-color:var(--mdc-filled-text-field-container-color)}.mdc-text-field--filled.mdc-text-field--disabled{background-color:var(--mdc-filled-text-field-disabled-container-color)}.mdc-text-field--filled:not(.mdc-text-field--disabled) .mdc-line-ripple::before{border-bottom-color:var(--mdc-filled-text-field-active-indicator-color)}.mdc-text-field--filled:not(.mdc-text-field--disabled):not(.mdc-text-field--focused):hover .mdc-line-ripple::before{border-bottom-color:var(--mdc-filled-text-field-hover-active-indicator-color)}.mdc-text-field--filled:not(.mdc-text-field--disabled) .mdc-line-ripple::after{border-bottom-color:var(--mdc-filled-text-field-focus-active-indicator-color)}.mdc-text-field--filled.mdc-text-field--disabled .mdc-line-ripple::before{border-bottom-color:var(--mdc-filled-text-field-disabled-active-indicator-color)}.mdc-text-field--filled.mdc-text-field--invalid:not(.mdc-text-field--disabled) .mdc-line-ripple::before{border-bottom-color:var(--mdc-filled-text-field-error-active-indicator-color)}.mdc-text-field--filled.mdc-text-field--invalid:not(.mdc-text-field--disabled):not(.mdc-text-field--focused):hover .mdc-line-ripple::before{border-bottom-color:var(--mdc-filled-text-field-error-hover-active-indicator-color)}.mdc-text-field--filled.mdc-text-field--invalid:not(.mdc-text-field--disabled) .mdc-line-ripple::after{border-bottom-color:var(--mdc-filled-text-field-error-focus-active-indicator-color)}.mdc-text-field--filled .mdc-line-ripple::before{border-bottom-width:var(--mdc-filled-text-field-active-indicator-height)}.mdc-text-field--filled .mdc-line-ripple::after{border-bottom-width:var(--mdc-filled-text-field-focus-active-indicator-height)}.mdc-text-field--outlined{--mdc-outlined-text-field-outline-width:1px;--mdc-outlined-text-field-focus-outline-width:2px;--mdc-outlined-text-field-container-shape:4px}.mdc-text-field--outlined:not(.mdc-text-field--disabled) .mdc-text-field__input{caret-color:var(--mdc-outlined-text-field-caret-color)}.mdc-text-field--outlined.mdc-text-field--invalid:not(.mdc-text-field--disabled) .mdc-text-field__input{caret-color:var(--mdc-outlined-text-field-error-caret-color)}.mdc-text-field--outlined:not(.mdc-text-field--disabled) .mdc-text-field__input{color:var(--mdc-outlined-text-field-input-text-color)}.mdc-text-field--outlined.mdc-text-field--disabled .mdc-text-field__input{color:var(--mdc-outlined-text-field-disabled-input-text-color)}.mdc-text-field--outlined:not(.mdc-text-field--disabled) .mdc-floating-label,.mdc-text-field--outlined:not(.mdc-text-field--disabled) .mdc-floating-label--float-above{color:var(--mdc-outlined-text-field-label-text-color)}.mdc-text-field--outlined:not(.mdc-text-field--disabled).mdc-text-field--focused .mdc-floating-label,.mdc-text-field--outlined:not(.mdc-text-field--disabled).mdc-text-field--focused .mdc-floating-label--float-above{color:var(--mdc-outlined-text-field-focus-label-text-color)}.mdc-text-field--outlined.mdc-text-field--disabled .mdc-floating-label,.mdc-text-field--outlined.mdc-text-field--disabled .mdc-floating-label--float-above{color:var(--mdc-outlined-text-field-disabled-label-text-color)}.mdc-text-field--outlined.mdc-text-field--invalid:not(.mdc-text-field--disabled) .mdc-floating-label,.mdc-text-field--outlined.mdc-text-field--invalid:not(.mdc-text-field--disabled) .mdc-floating-label--float-above{color:var(--mdc-outlined-text-field-error-label-text-color)}.mdc-text-field--outlined.mdc-text-field--invalid:not(.mdc-text-field--disabled).mdc-text-field--focused .mdc-floating-label,.mdc-text-field--outlined.mdc-text-field--invalid:not(.mdc-text-field--disabled).mdc-text-field--focused .mdc-floating-label--float-above{color:var(--mdc-outlined-text-field-error-focus-label-text-color)}.mdc-text-field--outlined .mdc-floating-label{font-family:var(--mdc-outlined-text-field-label-text-font);font-size:var(--mdc-outlined-text-field-label-text-size);font-weight:var(--mdc-outlined-text-field-label-text-weight);letter-spacing:var(--mdc-outlined-text-field-label-text-tracking)}@media all{.mdc-text-field--outlined:not(.mdc-text-field--disabled) .mdc-text-field__input::placeholder{color:var(--mdc-outlined-text-field-input-text-placeholder-color)}}@media all{.mdc-text-field--outlined:not(.mdc-text-field--disabled) .mdc-text-field__input:-ms-input-placeholder{color:var(--mdc-outlined-text-field-input-text-placeholder-color)}}.mdc-text-field--outlined .mdc-notched-outline .mdc-notched-outline__leading{border-top-left-radius:var(--mdc-outlined-text-field-container-shape);border-top-right-radius:0;border-bottom-right-radius:0;border-bottom-left-radius:var(--mdc-outlined-text-field-container-shape)}[dir=rtl] .mdc-text-field--outlined .mdc-notched-outline .mdc-notched-outline__leading,.mdc-text-field--outlined .mdc-notched-outline .mdc-notched-outline__leading[dir=rtl]{border-top-left-radius:0;border-top-right-radius:var(--mdc-outlined-text-field-container-shape);border-bottom-right-radius:var(--mdc-outlined-text-field-container-shape);border-bottom-left-radius:0}@supports(top: max(0%)){.mdc-text-field--outlined .mdc-notched-outline .mdc-notched-outline__leading{width:max(12px, var(--mdc-outlined-text-field-container-shape))}}@supports(top: max(0%)){.mdc-text-field--outlined .mdc-notched-outline .mdc-notched-outline__notch{max-width:calc(100% - max(12px, var(--mdc-outlined-text-field-container-shape))*2)}}.mdc-text-field--outlined .mdc-notched-outline .mdc-notched-outline__trailing{border-top-left-radius:0;border-top-right-radius:var(--mdc-outlined-text-field-container-shape);border-bottom-right-radius:var(--mdc-outlined-text-field-container-shape);border-bottom-left-radius:0}[dir=rtl] .mdc-text-field--outlined .mdc-notched-outline .mdc-notched-outline__trailing,.mdc-text-field--outlined .mdc-notched-outline .mdc-notched-outline__trailing[dir=rtl]{border-top-left-radius:var(--mdc-outlined-text-field-container-shape);border-top-right-radius:0;border-bottom-right-radius:0;border-bottom-left-radius:var(--mdc-outlined-text-field-container-shape)}@supports(top: max(0%)){.mdc-text-field--outlined{padding-left:max(16px, calc(var(--mdc-outlined-text-field-container-shape) + 4px))}}@supports(top: max(0%)){.mdc-text-field--outlined{padding-right:max(16px, var(--mdc-outlined-text-field-container-shape))}}@supports(top: max(0%)){.mdc-text-field--outlined+.mdc-text-field-helper-line{padding-left:max(16px, calc(var(--mdc-outlined-text-field-container-shape) + 4px))}}@supports(top: max(0%)){.mdc-text-field--outlined+.mdc-text-field-helper-line{padding-right:max(16px, var(--mdc-outlined-text-field-container-shape))}}.mdc-text-field--outlined.mdc-text-field--with-leading-icon{padding-left:0}@supports(top: max(0%)){.mdc-text-field--outlined.mdc-text-field--with-leading-icon{padding-right:max(16px, var(--mdc-outlined-text-field-container-shape))}}[dir=rtl] .mdc-text-field--outlined.mdc-text-field--with-leading-icon,.mdc-text-field--outlined.mdc-text-field--with-leading-icon[dir=rtl]{padding-right:0}@supports(top: max(0%)){[dir=rtl] .mdc-text-field--outlined.mdc-text-field--with-leading-icon,.mdc-text-field--outlined.mdc-text-field--with-leading-icon[dir=rtl]{padding-left:max(16px, var(--mdc-outlined-text-field-container-shape))}}.mdc-text-field--outlined.mdc-text-field--with-trailing-icon{padding-right:0}@supports(top: max(0%)){.mdc-text-field--outlined.mdc-text-field--with-trailing-icon{padding-left:max(16px, calc(var(--mdc-outlined-text-field-container-shape) + 4px))}}[dir=rtl] .mdc-text-field--outlined.mdc-text-field--with-trailing-icon,.mdc-text-field--outlined.mdc-text-field--with-trailing-icon[dir=rtl]{padding-left:0}@supports(top: max(0%)){[dir=rtl] .mdc-text-field--outlined.mdc-text-field--with-trailing-icon,.mdc-text-field--outlined.mdc-text-field--with-trailing-icon[dir=rtl]{padding-right:max(16px, calc(var(--mdc-outlined-text-field-container-shape) + 4px))}}.mdc-text-field--outlined.mdc-text-field--with-leading-icon.mdc-text-field--with-trailing-icon{padding-left:0;padding-right:0}.mdc-text-field--outlined:not(.mdc-text-field--disabled) .mdc-notched-outline__leading,.mdc-text-field--outlined:not(.mdc-text-field--disabled) .mdc-notched-outline__notch,.mdc-text-field--outlined:not(.mdc-text-field--disabled) .mdc-notched-outline__trailing{border-color:var(--mdc-outlined-text-field-outline-color)}.mdc-text-field--outlined:not(.mdc-text-field--disabled):not(.mdc-text-field--focused):hover .mdc-notched-outline .mdc-notched-outline__leading,.mdc-text-field--outlined:not(.mdc-text-field--disabled):not(.mdc-text-field--focused):hover .mdc-notched-outline .mdc-notched-outline__notch,.mdc-text-field--outlined:not(.mdc-text-field--disabled):not(.mdc-text-field--focused):hover .mdc-notched-outline .mdc-notched-outline__trailing{border-color:var(--mdc-outlined-text-field-hover-outline-color)}.mdc-text-field--outlined:not(.mdc-text-field--disabled).mdc-text-field--focused .mdc-notched-outline__leading,.mdc-text-field--outlined:not(.mdc-text-field--disabled).mdc-text-field--focused .mdc-notched-outline__notch,.mdc-text-field--outlined:not(.mdc-text-field--disabled).mdc-text-field--focused .mdc-notched-outline__trailing{border-color:var(--mdc-outlined-text-field-focus-outline-color)}.mdc-text-field--outlined.mdc-text-field--disabled .mdc-notched-outline__leading,.mdc-text-field--outlined.mdc-text-field--disabled .mdc-notched-outline__notch,.mdc-text-field--outlined.mdc-text-field--disabled .mdc-notched-outline__trailing{border-color:var(--mdc-outlined-text-field-disabled-outline-color)}.mdc-text-field--outlined.mdc-text-field--invalid:not(.mdc-text-field--disabled) .mdc-notched-outline__leading,.mdc-text-field--outlined.mdc-text-field--invalid:not(.mdc-text-field--disabled) .mdc-notched-outline__notch,.mdc-text-field--outlined.mdc-text-field--invalid:not(.mdc-text-field--disabled) .mdc-notched-outline__trailing{border-color:var(--mdc-outlined-text-field-error-outline-color)}.mdc-text-field--outlined.mdc-text-field--invalid:not(.mdc-text-field--disabled):not(.mdc-text-field--focused):hover .mdc-notched-outline .mdc-notched-outline__leading,.mdc-text-field--outlined.mdc-text-field--invalid:not(.mdc-text-field--disabled):not(.mdc-text-field--focused):hover .mdc-notched-outline .mdc-notched-outline__notch,.mdc-text-field--outlined.mdc-text-field--invalid:not(.mdc-text-field--disabled):not(.mdc-text-field--focused):hover .mdc-notched-outline .mdc-notched-outline__trailing{border-color:var(--mdc-outlined-text-field-error-hover-outline-color)}.mdc-text-field--outlined.mdc-text-field--invalid:not(.mdc-text-field--disabled).mdc-text-field--focused .mdc-notched-outline__leading,.mdc-text-field--outlined.mdc-text-field--invalid:not(.mdc-text-field--disabled).mdc-text-field--focused .mdc-notched-outline__notch,.mdc-text-field--outlined.mdc-text-field--invalid:not(.mdc-text-field--disabled).mdc-text-field--focused .mdc-notched-outline__trailing{border-color:var(--mdc-outlined-text-field-error-focus-outline-color)}.mdc-text-field--outlined:not(.mdc-text-field--disabled) .mdc-notched-outline .mdc-notched-outline__leading,.mdc-text-field--outlined:not(.mdc-text-field--disabled) .mdc-notched-outline .mdc-notched-outline__notch,.mdc-text-field--outlined:not(.mdc-text-field--disabled) .mdc-notched-outline .mdc-notched-outline__trailing{border-width:var(--mdc-outlined-text-field-outline-width)}.mdc-text-field--outlined:not(.mdc-text-field--disabled).mdc-text-field--focused .mdc-notched-outline .mdc-notched-outline__leading,.mdc-text-field--outlined:not(.mdc-text-field--disabled).mdc-text-field--focused .mdc-notched-outline .mdc-notched-outline__notch,.mdc-text-field--outlined:not(.mdc-text-field--disabled).mdc-text-field--focused .mdc-notched-outline .mdc-notched-outline__trailing{border-width:var(--mdc-outlined-text-field-focus-outline-width)}.mat-mdc-form-field-textarea-control{vertical-align:middle;resize:vertical;box-sizing:border-box;height:auto;margin:0;padding:0;border:none;overflow:auto}.mat-mdc-form-field-input-control.mat-mdc-form-field-input-control{-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased;font:inherit;letter-spacing:inherit;text-decoration:inherit;text-transform:inherit;border:none}.mat-mdc-form-field .mat-mdc-floating-label.mdc-floating-label{-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased;line-height:normal;pointer-events:all}.mat-mdc-form-field:not(.mat-form-field-disabled) .mat-mdc-floating-label.mdc-floating-label{cursor:inherit}.mdc-text-field--no-label:not(.mdc-text-field--textarea) .mat-mdc-form-field-input-control.mdc-text-field__input,.mat-mdc-text-field-wrapper .mat-mdc-form-field-input-control{height:auto}.mat-mdc-text-field-wrapper .mat-mdc-form-field-input-control.mdc-text-field__input[type=color]{height:23px}.mat-mdc-text-field-wrapper{height:auto;flex:auto}.mat-mdc-form-field-has-icon-prefix .mat-mdc-text-field-wrapper{padding-left:0;--mat-mdc-form-field-label-offset-x: -16px}.mat-mdc-form-field-has-icon-suffix .mat-mdc-text-field-wrapper{padding-right:0}[dir=rtl] .mat-mdc-text-field-wrapper{padding-left:16px;padding-right:16px}[dir=rtl] .mat-mdc-form-field-has-icon-suffix .mat-mdc-text-field-wrapper{padding-left:0}[dir=rtl] .mat-mdc-form-field-has-icon-prefix .mat-mdc-text-field-wrapper{padding-right:0}.mat-form-field-disabled .mdc-text-field__input::placeholder{color:var(--mat-form-field-disabled-input-text-placeholder-color)}.mat-form-field-disabled .mdc-text-field__input::-moz-placeholder{color:var(--mat-form-field-disabled-input-text-placeholder-color)}.mat-form-field-disabled .mdc-text-field__input::-webkit-input-placeholder{color:var(--mat-form-field-disabled-input-text-placeholder-color)}.mat-form-field-disabled .mdc-text-field__input:-ms-input-placeholder{color:var(--mat-form-field-disabled-input-text-placeholder-color)}.mat-mdc-form-field-label-always-float .mdc-text-field__input::placeholder{transition-delay:40ms;transition-duration:110ms;opacity:1}.mat-mdc-text-field-wrapper .mat-mdc-form-field-infix .mat-mdc-floating-label{left:auto;right:auto}.mat-mdc-text-field-wrapper.mdc-text-field--outlined .mdc-text-field__input{display:inline-block}.mat-mdc-form-field .mat-mdc-text-field-wrapper.mdc-text-field .mdc-notched-outline__notch{padding-top:0}.mat-mdc-text-field-wrapper::before{content:none}.mat-mdc-form-field-subscript-wrapper{box-sizing:border-box;width:100%;position:relative}.mat-mdc-form-field-hint-wrapper,.mat-mdc-form-field-error-wrapper{position:absolute;top:0;left:0;right:0;padding:0 16px}.mat-mdc-form-field-subscript-dynamic-size .mat-mdc-form-field-hint-wrapper,.mat-mdc-form-field-subscript-dynamic-size .mat-mdc-form-field-error-wrapper{position:static}.mat-mdc-form-field-bottom-align::before{content:"";display:inline-block;height:16px}.mat-mdc-form-field-bottom-align.mat-mdc-form-field-subscript-dynamic-size::before{content:unset}.mat-mdc-form-field-hint-end{order:1}.mat-mdc-form-field-hint-wrapper{display:flex}.mat-mdc-form-field-hint-spacer{flex:1 0 1em}.mat-mdc-form-field-error{display:block}.mat-mdc-form-field-focus-overlay{top:0;left:0;right:0;bottom:0;position:absolute;opacity:0;pointer-events:none}select.mat-mdc-form-field-input-control{-moz-appearance:none;-webkit-appearance:none;background-color:rgba(0,0,0,0);display:inline-flex;box-sizing:border-box}select.mat-mdc-form-field-input-control:not(:disabled){cursor:pointer}.mat-mdc-form-field-type-mat-native-select .mat-mdc-form-field-infix::after{content:"";width:0;height:0;border-left:5px solid rgba(0,0,0,0);border-right:5px solid rgba(0,0,0,0);border-top:5px solid;position:absolute;right:0;top:50%;margin-top:-2.5px;pointer-events:none}[dir=rtl] .mat-mdc-form-field-type-mat-native-select .mat-mdc-form-field-infix::after{right:auto;left:0}.mat-mdc-form-field-type-mat-native-select .mat-mdc-form-field-input-control{padding-right:15px}[dir=rtl] .mat-mdc-form-field-type-mat-native-select .mat-mdc-form-field-input-control{padding-right:0;padding-left:15px}.cdk-high-contrast-active .mat-form-field-appearance-fill .mat-mdc-text-field-wrapper{outline:solid 1px}.cdk-high-contrast-active .mat-form-field-appearance-fill.mat-form-field-disabled .mat-mdc-text-field-wrapper{outline-color:GrayText}.cdk-high-contrast-active .mat-form-field-appearance-fill.mat-focused .mat-mdc-text-field-wrapper{outline:dashed 3px}.cdk-high-contrast-active .mat-mdc-form-field.mat-focused .mdc-notched-outline{border:dashed 3px}.mat-mdc-form-field-input-control[type=date],.mat-mdc-form-field-input-control[type=datetime],.mat-mdc-form-field-input-control[type=datetime-local],.mat-mdc-form-field-input-control[type=month],.mat-mdc-form-field-input-control[type=week],.mat-mdc-form-field-input-control[type=time]{line-height:1}.mat-mdc-form-field-input-control::-webkit-datetime-edit{line-height:1;padding:0;margin-bottom:-2px}.mat-mdc-form-field{--mat-mdc-form-field-floating-label-scale: 0.75;display:inline-flex;flex-direction:column;min-width:0;text-align:left;-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased;font-family:var(--mat-form-field-container-text-font);line-height:var(--mat-form-field-container-text-line-height);font-size:var(--mat-form-field-container-text-size);letter-spacing:var(--mat-form-field-container-text-tracking);font-weight:var(--mat-form-field-container-text-weight)}[dir=rtl] .mat-mdc-form-field{text-align:right}.mat-mdc-form-field .mdc-text-field--outlined .mdc-floating-label--float-above{font-size:calc(var(--mat-form-field-outlined-label-text-populated-size) * var(--mat-mdc-form-field-floating-label-scale))}.mat-mdc-form-field .mdc-text-field--outlined .mdc-notched-outline--upgraded .mdc-floating-label--float-above{font-size:var(--mat-form-field-outlined-label-text-populated-size)}.mat-mdc-form-field-flex{display:inline-flex;align-items:baseline;box-sizing:border-box;width:100%}.mat-mdc-text-field-wrapper{width:100%}.mat-mdc-form-field-icon-prefix,.mat-mdc-form-field-icon-suffix{align-self:center;line-height:0;pointer-events:auto;position:relative;z-index:1}.mat-mdc-form-field-icon-prefix,[dir=rtl] .mat-mdc-form-field-icon-suffix{padding:0 4px 0 0}.mat-mdc-form-field-icon-suffix,[dir=rtl] .mat-mdc-form-field-icon-prefix{padding:0 0 0 4px}.mat-mdc-form-field-icon-prefix>.mat-icon,.mat-mdc-form-field-icon-suffix>.mat-icon{padding:12px;box-sizing:content-box}.mat-mdc-form-field-subscript-wrapper .mat-icon,.mat-mdc-form-field label .mat-icon{width:1em;height:1em;font-size:inherit}.mat-mdc-form-field-infix{flex:auto;min-width:0;width:180px;position:relative;box-sizing:border-box}.mat-mdc-form-field .mdc-notched-outline__notch{margin-left:-1px;-webkit-clip-path:inset(-9em -999em -9em 1px);clip-path:inset(-9em -999em -9em 1px)}[dir=rtl] .mat-mdc-form-field .mdc-notched-outline__notch{margin-left:0;margin-right:-1px;-webkit-clip-path:inset(-9em 1px -9em -999em);clip-path:inset(-9em 1px -9em -999em)}.mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-text-field__input{transition:opacity 150ms 0ms cubic-bezier(0.4, 0, 0.2, 1)}@media all{.mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-text-field__input::placeholder{transition:opacity 67ms 0ms cubic-bezier(0.4, 0, 0.2, 1)}}@media all{.mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-text-field__input:-ms-input-placeholder{transition:opacity 67ms 0ms cubic-bezier(0.4, 0, 0.2, 1)}}@media all{.mdc-text-field--no-label .mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-text-field__input::placeholder,.mdc-text-field--focused .mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-text-field__input::placeholder{transition-delay:40ms;transition-duration:110ms}}@media all{.mdc-text-field--no-label .mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-text-field__input:-ms-input-placeholder,.mdc-text-field--focused .mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-text-field__input:-ms-input-placeholder{transition-delay:40ms;transition-duration:110ms}}.mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-text-field__affix{transition:opacity 150ms 0ms cubic-bezier(0.4, 0, 0.2, 1)}.mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-text-field--filled.mdc-ripple-upgraded--background-focused .mdc-text-field__ripple::before,.mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-text-field--filled:not(.mdc-ripple-upgraded):focus .mdc-text-field__ripple::before{transition-duration:75ms}.mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-text-field--outlined .mdc-floating-label--shake{animation:mdc-floating-label-shake-float-above-text-field-outlined 250ms 1}@keyframes mdc-floating-label-shake-float-above-text-field-outlined{0%{transform:translateX(calc(0% - 0%)) translateY(calc(0% - 34.75px)) scale(0.75)}33%{animation-timing-function:cubic-bezier(0.5, 0, 0.701732, 0.495819);transform:translateX(calc(4% - 0%)) translateY(calc(0% - 34.75px)) scale(0.75)}66%{animation-timing-function:cubic-bezier(0.302435, 0.381352, 0.55, 0.956352);transform:translateX(calc(-4% - 0%)) translateY(calc(0% - 34.75px)) scale(0.75)}100%{transform:translateX(calc(0% - 0%)) translateY(calc(0% - 34.75px)) scale(0.75)}}.mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-text-field--textarea{transition:none}.mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-text-field--textarea.mdc-text-field--filled .mdc-floating-label--shake{animation:mdc-floating-label-shake-float-above-textarea-filled 250ms 1}@keyframes mdc-floating-label-shake-float-above-textarea-filled{0%{transform:translateX(calc(0% - 0%)) translateY(calc(0% - 10.25px)) scale(0.75)}33%{animation-timing-function:cubic-bezier(0.5, 0, 0.701732, 0.495819);transform:translateX(calc(4% - 0%)) translateY(calc(0% - 10.25px)) scale(0.75)}66%{animation-timing-function:cubic-bezier(0.302435, 0.381352, 0.55, 0.956352);transform:translateX(calc(-4% - 0%)) translateY(calc(0% - 10.25px)) scale(0.75)}100%{transform:translateX(calc(0% - 0%)) translateY(calc(0% - 10.25px)) scale(0.75)}}.mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-text-field--textarea.mdc-text-field--outlined .mdc-floating-label--shake{animation:mdc-floating-label-shake-float-above-textarea-outlined 250ms 1}@keyframes mdc-floating-label-shake-float-above-textarea-outlined{0%{transform:translateX(calc(0% - 0%)) translateY(calc(0% - 24.75px)) scale(0.75)}33%{animation-timing-function:cubic-bezier(0.5, 0, 0.701732, 0.495819);transform:translateX(calc(4% - 0%)) translateY(calc(0% - 24.75px)) scale(0.75)}66%{animation-timing-function:cubic-bezier(0.302435, 0.381352, 0.55, 0.956352);transform:translateX(calc(-4% - 0%)) translateY(calc(0% - 24.75px)) scale(0.75)}100%{transform:translateX(calc(0% - 0%)) translateY(calc(0% - 24.75px)) scale(0.75)}}.mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-text-field--with-leading-icon.mdc-text-field--outlined .mdc-floating-label--shake{animation:mdc-floating-label-shake-float-above-text-field-outlined-leading-icon 250ms 1}@keyframes mdc-floating-label-shake-float-above-text-field-outlined-leading-icon{0%{transform:translateX(calc(0% - 32px)) translateY(calc(0% - 34.75px)) scale(0.75)}33%{animation-timing-function:cubic-bezier(0.5, 0, 0.701732, 0.495819);transform:translateX(calc(4% - 32px)) translateY(calc(0% - 34.75px)) scale(0.75)}66%{animation-timing-function:cubic-bezier(0.302435, 0.381352, 0.55, 0.956352);transform:translateX(calc(-4% - 32px)) translateY(calc(0% - 34.75px)) scale(0.75)}100%{transform:translateX(calc(0% - 32px)) translateY(calc(0% - 34.75px)) scale(0.75)}}[dir=rtl] .mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-text-field--with-leading-icon.mdc-text-field--outlined .mdc-floating-label--shake,.mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-text-field--with-leading-icon.mdc-text-field--outlined[dir=rtl] .mdc-floating-label--shake{animation:mdc-floating-label-shake-float-above-text-field-outlined-leading-icon 250ms 1}@keyframes mdc-floating-label-shake-float-above-text-field-outlined-leading-icon-rtl{0%{transform:translateX(calc(0% - -32px)) translateY(calc(0% - 34.75px)) scale(0.75)}33%{animation-timing-function:cubic-bezier(0.5, 0, 0.701732, 0.495819);transform:translateX(calc(4% - -32px)) translateY(calc(0% - 34.75px)) scale(0.75)}66%{animation-timing-function:cubic-bezier(0.302435, 0.381352, 0.55, 0.956352);transform:translateX(calc(-4% - -32px)) translateY(calc(0% - 34.75px)) scale(0.75)}100%{transform:translateX(calc(0% - -32px)) translateY(calc(0% - 34.75px)) scale(0.75)}}.mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-floating-label{transition:transform 150ms cubic-bezier(0.4, 0, 0.2, 1),color 150ms cubic-bezier(0.4, 0, 0.2, 1)}.mdc-floating-label--shake{animation:mdc-floating-label-shake-float-above-standard 250ms 1}@keyframes mdc-floating-label-shake-float-above-standard{0%{transform:translateX(calc(0% - 0%)) translateY(calc(0% - 106%)) scale(0.75)}33%{animation-timing-function:cubic-bezier(0.5, 0, 0.701732, 0.495819);transform:translateX(calc(4% - 0%)) translateY(calc(0% - 106%)) scale(0.75)}66%{animation-timing-function:cubic-bezier(0.302435, 0.381352, 0.55, 0.956352);transform:translateX(calc(-4% - 0%)) translateY(calc(0% - 106%)) scale(0.75)}100%{transform:translateX(calc(0% - 0%)) translateY(calc(0% - 106%)) scale(0.75)}}.mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-line-ripple::after{transition:transform 180ms cubic-bezier(0.4, 0, 0.2, 1),opacity 180ms cubic-bezier(0.4, 0, 0.2, 1)}.mdc-notched-outline .mdc-floating-label{max-width:calc(100% + 1px)}.mdc-notched-outline--upgraded .mdc-floating-label--float-above{max-width:calc(133.3333333333% + 1px)}'],encapsulation:2,data:{animation:[hge.transitionMessages]},changeDetection:0})}}return n})(),Ab=(()=>{class n{static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275mod=ni({type:n})}static{this.\u0275inj=jn({imports:[us,ff,nj,us]})}}return n})();const gge=new Fe("MAT_PROGRESS_BAR_DEFAULT_OPTIONS"),vge=dO(class{constructor(n){this._elementRef=n}},"primary");let yge=(()=>{class n extends vge{constructor(t,i,r,s,o){super(t),this._ngZone=i,this._changeDetectorRef=r,this._animationMode=s,this._isNoopAnimation=!1,this._value=0,this._bufferValue=0,this.animationEnd=new gi,this._mode="determinate",this._transitionendHandler=a=>{0===this.animationEnd.observers.length||!a.target||!a.target.classList.contains("mdc-linear-progress__primary-bar")||("determinate"===this.mode||"buffer"===this.mode)&&this._ngZone.run(()=>this.animationEnd.next({value:this.value}))},this._isNoopAnimation="NoopAnimations"===s,o&&(o.color&&(this.color=this.defaultColor=o.color),this.mode=o.mode||this.mode)}get value(){return this._value}set value(t){this._value=pj(r_(t)),this._changeDetectorRef.markForCheck()}get bufferValue(){return this._bufferValue||0}set bufferValue(t){this._bufferValue=pj(r_(t)),this._changeDetectorRef.markForCheck()}get mode(){return this._mode}set mode(t){this._mode=t,this._changeDetectorRef.markForCheck()}ngAfterViewInit(){this._ngZone.runOutsideAngular(()=>{this._elementRef.nativeElement.addEventListener("transitionend",this._transitionendHandler)})}ngOnDestroy(){this._elementRef.nativeElement.removeEventListener("transitionend",this._transitionendHandler)}_getPrimaryBarTransform(){return`scaleX(${this._isIndeterminate()?1:this.value/100})`}_getBufferBarFlexBasis(){return`${"buffer"===this.mode?this.bufferValue:100}%`}_isIndeterminate(){return"indeterminate"===this.mode||"query"===this.mode}static{this.\u0275fac=function(i){return new(i||n)(J(Di),J(mn),J(fu),J(lu,8),J(gge,8))}}static{this.\u0275cmp=hr({type:n,selectors:[["mat-progress-bar"]],hostAttrs:["role","progressbar","aria-valuemin","0","aria-valuemax","100","tabindex","-1",1,"mat-mdc-progress-bar","mdc-linear-progress"],hostVars:8,hostBindings:function(i,r){2&i&&(or("aria-valuenow",r._isIndeterminate()?null:r.value)("mode",r.mode),_r("_mat-animation-noopable",r._isNoopAnimation)("mdc-linear-progress--animation-ready",!r._isNoopAnimation)("mdc-linear-progress--indeterminate",r._isIndeterminate()))},inputs:{color:"color",value:"value",bufferValue:"bufferValue",mode:"mode"},outputs:{animationEnd:"animationEnd"},exportAs:["matProgressBar"],features:[si],decls:7,vars:4,consts:[["aria-hidden","true",1,"mdc-linear-progress__buffer"],[1,"mdc-linear-progress__buffer-bar"],[1,"mdc-linear-progress__buffer-dots"],["aria-hidden","true",1,"mdc-linear-progress__bar","mdc-linear-progress__primary-bar"],[1,"mdc-linear-progress__bar-inner"],["aria-hidden","true",1,"mdc-linear-progress__bar","mdc-linear-progress__secondary-bar"]],template:function(i,r){1&i&&(at(0,"div",0),Ri(1,"div",1)(2,"div",2),ct(),at(3,"div",3),Ri(4,"span",4),ct(),at(5,"div",5),Ri(6,"span",4),ct()),2&i&&(_t(1),Ad("flex-basis",r._getBufferBarFlexBasis()),_t(2),Ad("transform",r._getPrimaryBarTransform()))},styles:["@keyframes mdc-linear-progress-primary-indeterminate-translate{0%{transform:translateX(0)}20%{animation-timing-function:cubic-bezier(0.5, 0, 0.701732, 0.495819);transform:translateX(0)}59.15%{animation-timing-function:cubic-bezier(0.302435, 0.381352, 0.55, 0.956352);transform:translateX(var(--mdc-linear-progress-primary-half))}100%{transform:translateX(var(--mdc-linear-progress-primary-full))}}@keyframes mdc-linear-progress-primary-indeterminate-scale{0%{transform:scaleX(0.08)}36.65%{animation-timing-function:cubic-bezier(0.334731, 0.12482, 0.785844, 1);transform:scaleX(0.08)}69.15%{animation-timing-function:cubic-bezier(0.06, 0.11, 0.6, 1);transform:scaleX(0.661479)}100%{transform:scaleX(0.08)}}@keyframes mdc-linear-progress-secondary-indeterminate-translate{0%{animation-timing-function:cubic-bezier(0.15, 0, 0.515058, 0.409685);transform:translateX(0)}25%{animation-timing-function:cubic-bezier(0.31033, 0.284058, 0.8, 0.733712);transform:translateX(var(--mdc-linear-progress-secondary-quarter))}48.35%{animation-timing-function:cubic-bezier(0.4, 0.627035, 0.6, 0.902026);transform:translateX(var(--mdc-linear-progress-secondary-half))}100%{transform:translateX(var(--mdc-linear-progress-secondary-full))}}@keyframes mdc-linear-progress-secondary-indeterminate-scale{0%{animation-timing-function:cubic-bezier(0.205028, 0.057051, 0.57661, 0.453971);transform:scaleX(0.08)}19.15%{animation-timing-function:cubic-bezier(0.152313, 0.196432, 0.648374, 1.004315);transform:scaleX(0.457104)}44.15%{animation-timing-function:cubic-bezier(0.257759, -0.003163, 0.211762, 1.38179);transform:scaleX(0.72796)}100%{transform:scaleX(0.08)}}@keyframes mdc-linear-progress-primary-indeterminate-translate-reverse{0%{transform:translateX(0)}20%{animation-timing-function:cubic-bezier(0.5, 0, 0.701732, 0.495819);transform:translateX(0)}59.15%{animation-timing-function:cubic-bezier(0.302435, 0.381352, 0.55, 0.956352);transform:translateX(var(--mdc-linear-progress-primary-half-neg))}100%{transform:translateX(var(--mdc-linear-progress-primary-full-neg))}}@keyframes mdc-linear-progress-secondary-indeterminate-translate-reverse{0%{animation-timing-function:cubic-bezier(0.15, 0, 0.515058, 0.409685);transform:translateX(0)}25%{animation-timing-function:cubic-bezier(0.31033, 0.284058, 0.8, 0.733712);transform:translateX(var(--mdc-linear-progress-secondary-quarter-neg))}48.35%{animation-timing-function:cubic-bezier(0.4, 0.627035, 0.6, 0.902026);transform:translateX(var(--mdc-linear-progress-secondary-half-neg))}100%{transform:translateX(var(--mdc-linear-progress-secondary-full-neg))}}@keyframes mdc-linear-progress-buffering-reverse{from{transform:translateX(-10px)}}.mdc-linear-progress{position:relative;width:100%;transform:translateZ(0);outline:1px solid rgba(0,0,0,0);overflow-x:hidden;transition:opacity 250ms 0ms cubic-bezier(0.4, 0, 0.6, 1)}@media screen and (forced-colors: active){.mdc-linear-progress{outline-color:CanvasText}}.mdc-linear-progress__bar{position:absolute;top:0;bottom:0;margin:auto 0;width:100%;animation:none;transform-origin:top left;transition:transform 250ms 0ms cubic-bezier(0.4, 0, 0.6, 1)}.mdc-linear-progress__bar-inner{display:inline-block;position:absolute;width:100%;animation:none;border-top-style:solid}.mdc-linear-progress__buffer{display:flex;position:absolute;top:0;bottom:0;margin:auto 0;width:100%;overflow:hidden}.mdc-linear-progress__buffer-dots{background-repeat:repeat-x;flex:auto;transform:rotate(180deg);-webkit-mask-image:url(\"data:image/svg+xml,%3Csvg version='1.1' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink' x='0px' y='0px' enable-background='new 0 0 5 2' xml:space='preserve' viewBox='0 0 5 2' preserveAspectRatio='xMinYMin slice'%3E%3Ccircle cx='1' cy='1' r='1'/%3E%3C/svg%3E\");mask-image:url(\"data:image/svg+xml,%3Csvg version='1.1' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink' x='0px' y='0px' enable-background='new 0 0 5 2' xml:space='preserve' viewBox='0 0 5 2' preserveAspectRatio='xMinYMin slice'%3E%3Ccircle cx='1' cy='1' r='1'/%3E%3C/svg%3E\");animation:mdc-linear-progress-buffering 250ms infinite linear}.mdc-linear-progress__buffer-bar{flex:0 1 100%;transition:flex-basis 250ms 0ms cubic-bezier(0.4, 0, 0.6, 1)}.mdc-linear-progress__primary-bar{transform:scaleX(0)}.mdc-linear-progress__secondary-bar{display:none}.mdc-linear-progress--indeterminate .mdc-linear-progress__bar{transition:none}.mdc-linear-progress--indeterminate .mdc-linear-progress__primary-bar{left:-145.166611%}.mdc-linear-progress--indeterminate .mdc-linear-progress__secondary-bar{left:-54.888891%;display:block}.mdc-linear-progress--indeterminate.mdc-linear-progress--animation-ready .mdc-linear-progress__primary-bar{animation:mdc-linear-progress-primary-indeterminate-translate 2s infinite linear}.mdc-linear-progress--indeterminate.mdc-linear-progress--animation-ready .mdc-linear-progress__primary-bar>.mdc-linear-progress__bar-inner{animation:mdc-linear-progress-primary-indeterminate-scale 2s infinite linear}.mdc-linear-progress--indeterminate.mdc-linear-progress--animation-ready .mdc-linear-progress__secondary-bar{animation:mdc-linear-progress-secondary-indeterminate-translate 2s infinite linear}.mdc-linear-progress--indeterminate.mdc-linear-progress--animation-ready .mdc-linear-progress__secondary-bar>.mdc-linear-progress__bar-inner{animation:mdc-linear-progress-secondary-indeterminate-scale 2s infinite linear}[dir=rtl] .mdc-linear-progress:not([dir=ltr]) .mdc-linear-progress__bar,.mdc-linear-progress[dir=rtl]:not([dir=ltr]) .mdc-linear-progress__bar{right:0;-webkit-transform-origin:center right;transform-origin:center right}[dir=rtl] .mdc-linear-progress:not([dir=ltr]).mdc-linear-progress--animation-ready .mdc-linear-progress__primary-bar,.mdc-linear-progress[dir=rtl]:not([dir=ltr]).mdc-linear-progress--animation-ready .mdc-linear-progress__primary-bar{animation-name:mdc-linear-progress-primary-indeterminate-translate-reverse}[dir=rtl] .mdc-linear-progress:not([dir=ltr]).mdc-linear-progress--animation-ready .mdc-linear-progress__secondary-bar,.mdc-linear-progress[dir=rtl]:not([dir=ltr]).mdc-linear-progress--animation-ready .mdc-linear-progress__secondary-bar{animation-name:mdc-linear-progress-secondary-indeterminate-translate-reverse}[dir=rtl] .mdc-linear-progress:not([dir=ltr]) .mdc-linear-progress__buffer-dots,.mdc-linear-progress[dir=rtl]:not([dir=ltr]) .mdc-linear-progress__buffer-dots{animation:mdc-linear-progress-buffering-reverse 250ms infinite linear;transform:rotate(0)}[dir=rtl] .mdc-linear-progress:not([dir=ltr]).mdc-linear-progress--indeterminate .mdc-linear-progress__primary-bar,.mdc-linear-progress[dir=rtl]:not([dir=ltr]).mdc-linear-progress--indeterminate .mdc-linear-progress__primary-bar{right:-145.166611%;left:auto}[dir=rtl] .mdc-linear-progress:not([dir=ltr]).mdc-linear-progress--indeterminate .mdc-linear-progress__secondary-bar,.mdc-linear-progress[dir=rtl]:not([dir=ltr]).mdc-linear-progress--indeterminate .mdc-linear-progress__secondary-bar{right:-54.888891%;left:auto}.mdc-linear-progress--closed{opacity:0}.mdc-linear-progress--closed-animation-off .mdc-linear-progress__buffer-dots{animation:none}.mdc-linear-progress--closed-animation-off.mdc-linear-progress--indeterminate .mdc-linear-progress__bar,.mdc-linear-progress--closed-animation-off.mdc-linear-progress--indeterminate .mdc-linear-progress__bar .mdc-linear-progress__bar-inner{animation:none}@keyframes mdc-linear-progress-buffering{from{transform:rotate(180deg) translateX(calc(var(--mdc-linear-progress-track-height) * -2.5))}}.mdc-linear-progress__bar-inner{border-color:var(--mdc-linear-progress-active-indicator-color)}@media(forced-colors: active){.mdc-linear-progress__buffer-dots{background-color:ButtonBorder}}@media all and (-ms-high-contrast: none),(-ms-high-contrast: active){.mdc-linear-progress__buffer-dots{background-color:rgba(0,0,0,0);background-image:url(\"data:image/svg+xml,%3Csvg version='1.1' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink' x='0px' y='0px' enable-background='new 0 0 5 2' xml:space='preserve' viewBox='0 0 5 2' preserveAspectRatio='none slice'%3E%3Ccircle cx='1' cy='1' r='1' fill=''/%3E%3C/svg%3E\")}}.mdc-linear-progress{height:max(var(--mdc-linear-progress-track-height), var(--mdc-linear-progress-active-indicator-height))}@media all and (-ms-high-contrast: none),(-ms-high-contrast: active){.mdc-linear-progress{height:4px}}.mdc-linear-progress__bar{height:var(--mdc-linear-progress-active-indicator-height)}.mdc-linear-progress__bar-inner{border-top-width:var(--mdc-linear-progress-active-indicator-height)}.mdc-linear-progress__buffer{height:var(--mdc-linear-progress-track-height)}@media all and (-ms-high-contrast: none),(-ms-high-contrast: active){.mdc-linear-progress__buffer-dots{background-size:10px var(--mdc-linear-progress-track-height)}}.mdc-linear-progress__buffer{border-radius:var(--mdc-linear-progress-track-shape)}.mat-mdc-progress-bar{--mdc-linear-progress-active-indicator-height:4px;--mdc-linear-progress-track-height:4px;--mdc-linear-progress-track-shape:0}.mat-mdc-progress-bar{display:block;text-align:left;--mdc-linear-progress-primary-half: 83.67142%;--mdc-linear-progress-primary-full: 200.611057%;--mdc-linear-progress-secondary-quarter: 37.651913%;--mdc-linear-progress-secondary-half: 84.386165%;--mdc-linear-progress-secondary-full: 160.277782%;--mdc-linear-progress-primary-half-neg: -83.67142%;--mdc-linear-progress-primary-full-neg: -200.611057%;--mdc-linear-progress-secondary-quarter-neg: -37.651913%;--mdc-linear-progress-secondary-half-neg: -84.386165%;--mdc-linear-progress-secondary-full-neg: -160.277782%}[dir=rtl] .mat-mdc-progress-bar{text-align:right}.mat-mdc-progress-bar[mode=query]{transform:scaleX(-1)}.mat-mdc-progress-bar._mat-animation-noopable .mdc-linear-progress__buffer-dots,.mat-mdc-progress-bar._mat-animation-noopable .mdc-linear-progress__primary-bar,.mat-mdc-progress-bar._mat-animation-noopable .mdc-linear-progress__secondary-bar,.mat-mdc-progress-bar._mat-animation-noopable .mdc-linear-progress__bar-inner.mdc-linear-progress__bar-inner{animation:none}.mat-mdc-progress-bar._mat-animation-noopable .mdc-linear-progress__primary-bar,.mat-mdc-progress-bar._mat-animation-noopable .mdc-linear-progress__buffer-bar{transition:transform 1ms}"],encapsulation:2,changeDetection:0})}}return n})();function pj(n,e=0,t=100){return Math.max(e,Math.min(t,n))}let mj=(()=>{class n{static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275mod=ni({type:n})}static{this.\u0275inj=jn({imports:[us]})}}return n})();const bge=["addListener","removeListener"],xge=["addEventListener","removeEventListener"],wge=["on","off"];function mO(n,e,t,i){if(H(t)&&(i=t,t=void 0),i)return mO(n,e,t).pipe($1(i));const[r,s]=function Sge(n){return H(n.addEventListener)&&H(n.removeEventListener)}(n)?xge.map(o=>a=>n[o](e,a,t)):function Ege(n){return H(n.addListener)&&H(n.removeListener)}(n)?bge.map(gj(n,e)):function Tge(n){return H(n.on)&&H(n.off)}(n)?wge.map(gj(n,e)):[];if(!r&&Ie(n))return Pr(o=>mO(o,e,t))(Mi(n));if(!r)throw new TypeError("Invalid event target");return new xt(o=>{const a=(...l)=>o.next(1<l.length?l:l[0]);return r(a),()=>s(a)})}function gj(n,e){return t=>i=>n[t](e,i)}const Ib={schedule(n){let e=requestAnimationFrame,t=cancelAnimationFrame;const{delegate:i}=Ib;i&&(e=i.requestAnimationFrame,t=i.cancelAnimationFrame);const r=e(s=>{t=void 0,n(s)});return new on(()=>t?.(r))},requestAnimationFrame(...n){const{delegate:e}=Ib;return(e?.requestAnimationFrame||requestAnimationFrame)(...n)},cancelAnimationFrame(...n){const{delegate:e}=Ib;return(e?.cancelAnimationFrame||cancelAnimationFrame)(...n)},delegate:void 0};new class Ige extends MT{flush(e){this._active=!0;const t=this._scheduled;this._scheduled=void 0;const{actions:i}=this;let r;e=e||i.shift();do{if(r=e.execute(e.state,e.delay))break}while((e=i[0])&&e.id===t&&i.shift());if(this._active=!1,r){for(;(e=i[0])&&e.id===t&&i.shift();)e.unsubscribe();throw r}}}(class Age extends CT{constructor(e,t){super(e,t),this.scheduler=e,this.work=t}requestAsyncId(e,t,i=0){return null!==i&&i>0?super.requestAsyncId(e,t,i):(e.actions.push(this),e._scheduled||(e._scheduled=Ib.requestAnimationFrame(()=>e.flush(void 0))))}recycleAsyncId(e,t,i=0){var r;if(null!=i?i>0:this.delay>0)return super.recycleAsyncId(e,t,i);const{actions:s}=e;null!=t&&(null===(r=s[s.length-1])||void 0===r?void 0:r.id)!==t&&(Ib.cancelAnimationFrame(t),e._scheduled=void 0)}});let gO,Mge=1;const KS={};function _j(n){return n in KS&&(delete KS[n],!0)}const Dge={setImmediate(n){const e=Mge++;return KS[e]=!0,gO||(gO=Promise.resolve()),gO.then(()=>_j(e)&&n()),e},clearImmediate(n){_j(n)}},{setImmediate:Rge,clearImmediate:Pge}=Dge,YS={setImmediate(...n){const{delegate:e}=YS;return(e?.setImmediate||Rge)(...n)},clearImmediate(n){const{delegate:e}=YS;return(e?.clearImmediate||Pge)(n)},delegate:void 0};new class Oge extends MT{flush(e){this._active=!0;const t=this._scheduled;this._scheduled=void 0;const{actions:i}=this;let r;e=e||i.shift();do{if(r=e.execute(e.state,e.delay))break}while((e=i[0])&&e.id===t&&i.shift());if(this._active=!1,r){for(;(e=i[0])&&e.id===t&&i.shift();)e.unsubscribe();throw r}}}(class kge extends CT{constructor(e,t){super(e,t),this.scheduler=e,this.work=t}requestAsyncId(e,t,i=0){return null!==i&&i>0?super.requestAsyncId(e,t,i):(e.actions.push(this),e._scheduled||(e._scheduled=YS.setImmediate(e.flush.bind(e,void 0))))}recycleAsyncId(e,t,i=0){var r;if(null!=i?i>0:this.delay>0)return super.recycleAsyncId(e,t,i);const{actions:s}=e;null!=t&&(null===(r=s[s.length-1])||void 0===r?void 0:r.id)!==t&&(YS.clearImmediate(t),e._scheduled===t&&(e._scheduled=void 0))}});function vj(n,e=E0){return function Fge(n){return re((e,t)=>{let i=!1,r=null,s=null,o=!1;const a=()=>{if(s?.unsubscribe(),s=null,i){i=!1;const c=r;r=null,t.next(c)}o&&t.complete()},l=()=>{s=null,o&&t.complete()};e.subscribe(ye(t,c=>{i=!0,r=c,s||Mi(n(c)).subscribe(s=ye(t,a,l))},()=>{o=!0,(!i||!s||s.closed)&&t.complete()}))})}(()=>function Vge(n=0,e,t=_le){let i=-1;return null!=e&&(Lc(e)?t=e:i=e),new xt(r=>{let s=function Lge(n){return n instanceof Date&&!isNaN(n)}(n)?+n-t.now():n;s<0&&(s=0);let o=0;return t.schedule(function(){r.closed||(r.next(o++),0<=i?this.schedule(void 0,i):r.complete())},s)})}(n,e))}let Bge=(()=>{class n{constructor(t,i,r){this._ngZone=t,this._platform=i,this._scrolled=new Q,this._globalSubscription=null,this._scrolledCount=0,this.scrollContainers=new Map,this._document=r}register(t){this.scrollContainers.has(t)||this.scrollContainers.set(t,t.elementScrolled().subscribe(()=>this._scrolled.next(t)))}deregister(t){const i=this.scrollContainers.get(t);i&&(i.unsubscribe(),this.scrollContainers.delete(t))}scrolled(t=20){return this._platform.isBrowser?new xt(i=>{this._globalSubscription||this._addGlobalListener();const r=t>0?this._scrolled.pipe(vj(t)).subscribe(i):this._scrolled.subscribe(i);return this._scrolledCount++,()=>{r.unsubscribe(),this._scrolledCount--,this._scrolledCount||this._removeGlobalListener()}}):ne()}ngOnDestroy(){this._removeGlobalListener(),this.scrollContainers.forEach((t,i)=>this.deregister(i)),this._scrolled.complete()}ancestorScrolled(t,i){const r=this.getAncestorScrollContainers(t);return this.scrolled(i).pipe(Is(s=>!s||r.indexOf(s)>-1))}getAncestorScrollContainers(t){const i=[];return this.scrollContainers.forEach((r,s)=>{this._scrollableContainsElement(s,t)&&i.push(s)}),i}_getWindow(){return this._document.defaultView||window}_scrollableContainsElement(t,i){let r=s_(i),s=t.getElementRef().nativeElement;do{if(r==s)return!0}while(r=r.parentElement);return!1}_addGlobalListener(){this._globalSubscription=this._ngZone.runOutsideAngular(()=>mO(this._getWindow().document,"scroll").subscribe(()=>this._scrolled.next()))}_removeGlobalListener(){this._globalSubscription&&(this._globalSubscription.unsubscribe(),this._globalSubscription=null)}static{this.\u0275fac=function(i){return new(i||n)(ue(mn),ue(fa),ue(_i,8))}}static{this.\u0275prov=dt({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),_O=(()=>{class n{constructor(t,i,r){this._platform=t,this._change=new Q,this._changeListener=s=>{this._change.next(s)},this._document=r,i.runOutsideAngular(()=>{if(t.isBrowser){const s=this._getWindow();s.addEventListener("resize",this._changeListener),s.addEventListener("orientationchange",this._changeListener)}this.change().subscribe(()=>this._viewportSize=null)})}ngOnDestroy(){if(this._platform.isBrowser){const t=this._getWindow();t.removeEventListener("resize",this._changeListener),t.removeEventListener("orientationchange",this._changeListener)}this._change.complete()}getViewportSize(){this._viewportSize||this._updateViewportSize();const t={width:this._viewportSize.width,height:this._viewportSize.height};return this._platform.isBrowser||(this._viewportSize=null),t}getViewportRect(){const t=this.getViewportScrollPosition(),{width:i,height:r}=this.getViewportSize();return{top:t.top,left:t.left,bottom:t.top+r,right:t.left+i,height:r,width:i}}getViewportScrollPosition(){if(!this._platform.isBrowser)return{top:0,left:0};const t=this._document,i=this._getWindow(),r=t.documentElement,s=r.getBoundingClientRect();return{top:-s.top||t.body.scrollTop||i.scrollY||r.scrollTop||0,left:-s.left||t.body.scrollLeft||i.scrollX||r.scrollLeft||0}}change(t=20){return t>0?this._change.pipe(vj(t)):this._change}_getWindow(){return this._document.defaultView||window}_updateViewportSize(){const t=this._getWindow();this._viewportSize=this._platform.isBrowser?{width:t.innerWidth,height:t.innerHeight}:{width:0,height:0}}static{this.\u0275fac=function(i){return new(i||n)(ue(fa),ue(mn),ue(_i,8))}}static{this.\u0275prov=dt({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),vO=(()=>{class n{static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275mod=ni({type:n})}static{this.\u0275inj=jn({})}}return n})(),yj=(()=>{class n{static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275mod=ni({type:n})}static{this.\u0275inj=jn({imports:[Eb,vO,Eb,vO]})}}return n})();class yO{attach(e){return this._attachedHost=e,e.attach(this)}detach(){let e=this._attachedHost;null!=e&&(this._attachedHost=null,e.detach())}get isAttached(){return null!=this._attachedHost}setAttachedHost(e){this._attachedHost=e}}class Gge extends yO{constructor(e,t,i,r,s){super(),this.component=e,this.viewContainerRef=t,this.injector=i,this.componentFactoryResolver=r,this.projectableNodes=s}}class bj extends yO{constructor(e,t,i,r){super(),this.templateRef=e,this.viewContainerRef=t,this.context=i,this.injector=r}get origin(){return this.templateRef.elementRef}attach(e,t=this.context){return this.context=t,super.attach(e)}detach(){return this.context=void 0,super.detach()}}class Wge extends yO{constructor(e){super(),this.element=e instanceof Di?e.nativeElement:e}}class jge{constructor(){this._isDisposed=!1,this.attachDomPortal=null}hasAttached(){return!!this._attachedPortal}attach(e){return e instanceof Gge?(this._attachedPortal=e,this.attachComponentPortal(e)):e instanceof bj?(this._attachedPortal=e,this.attachTemplatePortal(e)):this.attachDomPortal&&e instanceof Wge?(this._attachedPortal=e,this.attachDomPortal(e)):void 0}detach(){this._attachedPortal&&(this._attachedPortal.setAttachedHost(null),this._attachedPortal=null),this._invokeDisposeFn()}dispose(){this.hasAttached()&&this.detach(),this._invokeDisposeFn(),this._isDisposed=!0}setDisposeFn(e){this._disposeFn=e}_invokeDisposeFn(){this._disposeFn&&(this._disposeFn(),this._disposeFn=null)}}class $ge extends jge{constructor(e,t,i,r,s){super(),this.outletElement=e,this._componentFactoryResolver=t,this._appRef=i,this._defaultInjector=r,this.attachDomPortal=o=>{const a=o.element,l=this._document.createComment("dom-portal");a.parentNode.insertBefore(l,a),this.outletElement.appendChild(a),this._attachedPortal=o,super.setDisposeFn(()=>{l.parentNode&&l.parentNode.replaceChild(a,l)})},this._document=s}attachComponentPortal(e){const i=(e.componentFactoryResolver||this._componentFactoryResolver).resolveComponentFactory(e.component);let r;return e.viewContainerRef?(r=e.viewContainerRef.createComponent(i,e.viewContainerRef.length,e.injector||e.viewContainerRef.injector,e.projectableNodes||void 0),this.setDisposeFn(()=>r.destroy())):(r=i.create(e.injector||this._defaultInjector||Ls.NULL),this._appRef.attachView(r.hostView),this.setDisposeFn(()=>{this._appRef.viewCount>0&&this._appRef.detachView(r.hostView),r.destroy()})),this.outletElement.appendChild(this._getComponentRootNode(r)),this._attachedPortal=e,r}attachTemplatePortal(e){let t=e.viewContainerRef,i=t.createEmbeddedView(e.templateRef,e.context,{injector:e.injector});return i.rootNodes.forEach(r=>this.outletElement.appendChild(r)),i.detectChanges(),this.setDisposeFn(()=>{let r=t.indexOf(i);-1!==r&&t.remove(r)}),this._attachedPortal=e,i}dispose(){super.dispose(),this.outletElement.remove()}_getComponentRootNode(e){return e.hostView.rootNodes[0]}}let qge=(()=>{class n{static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275mod=ni({type:n})}static{this.\u0275inj=jn({})}}return n})();const xj=dpe();class Xge{constructor(e,t){this._viewportRuler=e,this._previousHTMLStyles={top:"",left:""},this._isEnabled=!1,this._document=t}attach(){}enable(){if(this._canBeEnabled()){const e=this._document.documentElement;this._previousScrollPosition=this._viewportRuler.getViewportScrollPosition(),this._previousHTMLStyles.left=e.style.left||"",this._previousHTMLStyles.top=e.style.top||"",e.style.left=ys(-this._previousScrollPosition.left),e.style.top=ys(-this._previousScrollPosition.top),e.classList.add("cdk-global-scrollblock"),this._isEnabled=!0}}disable(){if(this._isEnabled){const e=this._document.documentElement,i=e.style,r=this._document.body.style,s=i.scrollBehavior||"",o=r.scrollBehavior||"";this._isEnabled=!1,i.left=this._previousHTMLStyles.left,i.top=this._previousHTMLStyles.top,e.classList.remove("cdk-global-scrollblock"),xj&&(i.scrollBehavior=r.scrollBehavior="auto"),window.scroll(this._previousScrollPosition.left,this._previousScrollPosition.top),xj&&(i.scrollBehavior=s,r.scrollBehavior=o)}}_canBeEnabled(){if(this._document.documentElement.classList.contains("cdk-global-scrollblock")||this._isEnabled)return!1;const t=this._document.body,i=this._viewportRuler.getViewportSize();return t.scrollHeight>i.height||t.scrollWidth>i.width}}class Kge{constructor(e,t,i,r){this._scrollDispatcher=e,this._ngZone=t,this._viewportRuler=i,this._config=r,this._scrollSubscription=null,this._detach=()=>{this.disable(),this._overlayRef.hasAttached()&&this._ngZone.run(()=>this._overlayRef.detach())}}attach(e){this._overlayRef=e}enable(){if(this._scrollSubscription)return;const e=this._scrollDispatcher.scrolled(0).pipe(Is(t=>!t||!this._overlayRef.overlayElement.contains(t.getElementRef().nativeElement)));this._config&&this._config.threshold&&this._config.threshold>1?(this._initialScrollPosition=this._viewportRuler.getViewportScrollPosition().top,this._scrollSubscription=e.subscribe(()=>{const t=this._viewportRuler.getViewportScrollPosition().top;Math.abs(t-this._initialScrollPosition)>this._config.threshold?this._detach():this._overlayRef.updatePosition()})):this._scrollSubscription=e.subscribe(this._detach)}disable(){this._scrollSubscription&&(this._scrollSubscription.unsubscribe(),this._scrollSubscription=null)}detach(){this.disable(),this._overlayRef=null}}class wj{enable(){}disable(){}attach(){}}function bO(n,e){return e.some(t=>n.bottom<t.top||n.top>t.bottom||n.right<t.left||n.left>t.right)}function Ej(n,e){return e.some(t=>n.top<t.top||n.bottom>t.bottom||n.left<t.left||n.right>t.right)}class Yge{constructor(e,t,i,r){this._scrollDispatcher=e,this._viewportRuler=t,this._ngZone=i,this._config=r,this._scrollSubscription=null}attach(e){this._overlayRef=e}enable(){this._scrollSubscription||(this._scrollSubscription=this._scrollDispatcher.scrolled(this._config?this._config.scrollThrottle:0).subscribe(()=>{if(this._overlayRef.updatePosition(),this._config&&this._config.autoClose){const t=this._overlayRef.overlayElement.getBoundingClientRect(),{width:i,height:r}=this._viewportRuler.getViewportSize();bO(t,[{width:i,height:r,bottom:r,right:i,top:0,left:0}])&&(this.disable(),this._ngZone.run(()=>this._overlayRef.detach()))}}))}disable(){this._scrollSubscription&&(this._scrollSubscription.unsubscribe(),this._scrollSubscription=null)}detach(){this.disable(),this._overlayRef=null}}let Qge=(()=>{class n{constructor(t,i,r,s){this._scrollDispatcher=t,this._viewportRuler=i,this._ngZone=r,this.noop=()=>new wj,this.close=o=>new Kge(this._scrollDispatcher,this._ngZone,this._viewportRuler,o),this.block=()=>new Xge(this._viewportRuler,this._document),this.reposition=o=>new Yge(this._scrollDispatcher,this._viewportRuler,this._ngZone,o),this._document=s}static{this.\u0275fac=function(i){return new(i||n)(ue(Bge),ue(_O),ue(mn),ue(_i))}}static{this.\u0275prov=dt({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();class Tj{constructor(e){if(this.scrollStrategy=new wj,this.panelClass="",this.hasBackdrop=!1,this.backdropClass="cdk-overlay-dark-backdrop",this.disposeOnNavigation=!1,e){const t=Object.keys(e);for(const i of t)void 0!==e[i]&&(this[i]=e[i])}}}class Zge{constructor(e,t){this.connectionPair=e,this.scrollableViewProperties=t}}let Sj=(()=>{class n{constructor(t){this._attachedOverlays=[],this._document=t}ngOnDestroy(){this.detach()}add(t){this.remove(t),this._attachedOverlays.push(t)}remove(t){const i=this._attachedOverlays.indexOf(t);i>-1&&this._attachedOverlays.splice(i,1),0===this._attachedOverlays.length&&this.detach()}static{this.\u0275fac=function(i){return new(i||n)(ue(_i))}}static{this.\u0275prov=dt({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),Jge=(()=>{class n extends Sj{constructor(t,i){super(t),this._ngZone=i,this._keydownListener=r=>{const s=this._attachedOverlays;for(let o=s.length-1;o>-1;o--)if(s[o]._keydownEvents.observers.length>0){const a=s[o]._keydownEvents;this._ngZone?this._ngZone.run(()=>a.next(r)):a.next(r);break}}}add(t){super.add(t),this._isAttached||(this._ngZone?this._ngZone.runOutsideAngular(()=>this._document.body.addEventListener("keydown",this._keydownListener)):this._document.body.addEventListener("keydown",this._keydownListener),this._isAttached=!0)}detach(){this._isAttached&&(this._document.body.removeEventListener("keydown",this._keydownListener),this._isAttached=!1)}static{this.\u0275fac=function(i){return new(i||n)(ue(_i),ue(mn,8))}}static{this.\u0275prov=dt({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),e_e=(()=>{class n extends Sj{constructor(t,i,r){super(t),this._platform=i,this._ngZone=r,this._cursorStyleIsSet=!1,this._pointerDownListener=s=>{this._pointerDownEventTarget=sO(s)},this._clickListener=s=>{const o=sO(s),a="click"===s.type&&this._pointerDownEventTarget?this._pointerDownEventTarget:o;this._pointerDownEventTarget=null;const l=this._attachedOverlays.slice();for(let c=l.length-1;c>-1;c--){const u=l[c];if(u._outsidePointerEvents.observers.length<1||!u.hasAttached())continue;if(u.overlayElement.contains(o)||u.overlayElement.contains(a))break;const d=u._outsidePointerEvents;this._ngZone?this._ngZone.run(()=>d.next(s)):d.next(s)}}}add(t){if(super.add(t),!this._isAttached){const i=this._document.body;this._ngZone?this._ngZone.runOutsideAngular(()=>this._addEventListeners(i)):this._addEventListeners(i),this._platform.IOS&&!this._cursorStyleIsSet&&(this._cursorOriginalValue=i.style.cursor,i.style.cursor="pointer",this._cursorStyleIsSet=!0),this._isAttached=!0}}detach(){if(this._isAttached){const t=this._document.body;t.removeEventListener("pointerdown",this._pointerDownListener,!0),t.removeEventListener("click",this._clickListener,!0),t.removeEventListener("auxclick",this._clickListener,!0),t.removeEventListener("contextmenu",this._clickListener,!0),this._platform.IOS&&this._cursorStyleIsSet&&(t.style.cursor=this._cursorOriginalValue,this._cursorStyleIsSet=!1),this._isAttached=!1}}_addEventListeners(t){t.addEventListener("pointerdown",this._pointerDownListener,!0),t.addEventListener("click",this._clickListener,!0),t.addEventListener("auxclick",this._clickListener,!0),t.addEventListener("contextmenu",this._clickListener,!0)}static{this.\u0275fac=function(i){return new(i||n)(ue(_i),ue(fa),ue(mn,8))}}static{this.\u0275prov=dt({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),Aj=(()=>{class n{constructor(t,i){this._platform=i,this._document=t}ngOnDestroy(){this._containerElement?.remove()}getContainerElement(){return this._containerElement||this._createContainer(),this._containerElement}_createContainer(){const t="cdk-overlay-container";if(this._platform.isBrowser||oO()){const r=this._document.querySelectorAll(`.${t}[platform="server"], .${t}[platform="test"]`);for(let s=0;s<r.length;s++)r[s].remove()}const i=this._document.createElement("div");i.classList.add(t),oO()?i.setAttribute("platform","test"):this._platform.isBrowser||i.setAttribute("platform","server"),this._document.body.appendChild(i),this._containerElement=i}static{this.\u0275fac=function(i){return new(i||n)(ue(_i),ue(fa))}}static{this.\u0275prov=dt({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();class t_e{constructor(e,t,i,r,s,o,a,l,c,u=!1){this._portalOutlet=e,this._host=t,this._pane=i,this._config=r,this._ngZone=s,this._keyboardDispatcher=o,this._document=a,this._location=l,this._outsideClickDispatcher=c,this._animationsDisabled=u,this._backdropElement=null,this._backdropClick=new Q,this._attachments=new Q,this._detachments=new Q,this._locationChanges=on.EMPTY,this._backdropClickHandler=d=>this._backdropClick.next(d),this._backdropTransitionendHandler=d=>{this._disposeBackdrop(d.target)},this._keydownEvents=new Q,this._outsidePointerEvents=new Q,r.scrollStrategy&&(this._scrollStrategy=r.scrollStrategy,this._scrollStrategy.attach(this)),this._positionStrategy=r.positionStrategy}get overlayElement(){return this._pane}get backdropElement(){return this._backdropElement}get hostElement(){return this._host}attach(e){!this._host.parentElement&&this._previousHostParent&&this._previousHostParent.appendChild(this._host);const t=this._portalOutlet.attach(e);return this._positionStrategy&&this._positionStrategy.attach(this),this._updateStackingOrder(),this._updateElementSize(),this._updateElementDirection(),this._scrollStrategy&&this._scrollStrategy.enable(),this._ngZone.onStable.pipe(ml(1)).subscribe(()=>{this.hasAttached()&&this.updatePosition()}),this._togglePointerEvents(!0),this._config.hasBackdrop&&this._attachBackdrop(),this._config.panelClass&&this._toggleClasses(this._pane,this._config.panelClass,!0),this._attachments.next(),this._keyboardDispatcher.add(this),this._config.disposeOnNavigation&&(this._locationChanges=this._location.subscribe(()=>this.dispose())),this._outsideClickDispatcher.add(this),"function"==typeof t?.onDestroy&&t.onDestroy(()=>{this.hasAttached()&&this._ngZone.runOutsideAngular(()=>Promise.resolve().then(()=>this.detach()))}),t}detach(){if(!this.hasAttached())return;this.detachBackdrop(),this._togglePointerEvents(!1),this._positionStrategy&&this._positionStrategy.detach&&this._positionStrategy.detach(),this._scrollStrategy&&this._scrollStrategy.disable();const e=this._portalOutlet.detach();return this._detachments.next(),this._keyboardDispatcher.remove(this),this._detachContentWhenStable(),this._locationChanges.unsubscribe(),this._outsideClickDispatcher.remove(this),e}dispose(){const e=this.hasAttached();this._positionStrategy&&this._positionStrategy.dispose(),this._disposeScrollStrategy(),this._disposeBackdrop(this._backdropElement),this._locationChanges.unsubscribe(),this._keyboardDispatcher.remove(this),this._portalOutlet.dispose(),this._attachments.complete(),this._backdropClick.complete(),this._keydownEvents.complete(),this._outsidePointerEvents.complete(),this._outsideClickDispatcher.remove(this),this._host?.remove(),this._previousHostParent=this._pane=this._host=null,e&&this._detachments.next(),this._detachments.complete()}hasAttached(){return this._portalOutlet.hasAttached()}backdropClick(){return this._backdropClick}attachments(){return this._attachments}detachments(){return this._detachments}keydownEvents(){return this._keydownEvents}outsidePointerEvents(){return this._outsidePointerEvents}getConfig(){return this._config}updatePosition(){this._positionStrategy&&this._positionStrategy.apply()}updatePositionStrategy(e){e!==this._positionStrategy&&(this._positionStrategy&&this._positionStrategy.dispose(),this._positionStrategy=e,this.hasAttached()&&(e.attach(this),this.updatePosition()))}updateSize(e){this._config={...this._config,...e},this._updateElementSize()}setDirection(e){this._config={...this._config,direction:e},this._updateElementDirection()}addPanelClass(e){this._pane&&this._toggleClasses(this._pane,e,!0)}removePanelClass(e){this._pane&&this._toggleClasses(this._pane,e,!1)}getDirection(){const e=this._config.direction;return e?"string"==typeof e?e:e.value:"ltr"}updateScrollStrategy(e){e!==this._scrollStrategy&&(this._disposeScrollStrategy(),this._scrollStrategy=e,this.hasAttached()&&(e.attach(this),e.enable()))}_updateElementDirection(){this._host.setAttribute("dir",this.getDirection())}_updateElementSize(){if(!this._pane)return;const e=this._pane.style;e.width=ys(this._config.width),e.height=ys(this._config.height),e.minWidth=ys(this._config.minWidth),e.minHeight=ys(this._config.minHeight),e.maxWidth=ys(this._config.maxWidth),e.maxHeight=ys(this._config.maxHeight)}_togglePointerEvents(e){this._pane.style.pointerEvents=e?"":"none"}_attachBackdrop(){const e="cdk-overlay-backdrop-showing";this._backdropElement=this._document.createElement("div"),this._backdropElement.classList.add("cdk-overlay-backdrop"),this._animationsDisabled&&this._backdropElement.classList.add("cdk-overlay-backdrop-noop-animation"),this._config.backdropClass&&this._toggleClasses(this._backdropElement,this._config.backdropClass,!0),this._host.parentElement.insertBefore(this._backdropElement,this._host),this._backdropElement.addEventListener("click",this._backdropClickHandler),!this._animationsDisabled&&typeof requestAnimationFrame<"u"?this._ngZone.runOutsideAngular(()=>{requestAnimationFrame(()=>{this._backdropElement&&this._backdropElement.classList.add(e)})}):this._backdropElement.classList.add(e)}_updateStackingOrder(){this._host.nextSibling&&this._host.parentNode.appendChild(this._host)}detachBackdrop(){const e=this._backdropElement;if(e){if(this._animationsDisabled)return void this._disposeBackdrop(e);e.classList.remove("cdk-overlay-backdrop-showing"),this._ngZone.runOutsideAngular(()=>{e.addEventListener("transitionend",this._backdropTransitionendHandler)}),e.style.pointerEvents="none",this._backdropTimeout=this._ngZone.runOutsideAngular(()=>setTimeout(()=>{this._disposeBackdrop(e)},500))}}_toggleClasses(e,t,i){const r=WS(t||[]).filter(s=>!!s);r.length&&(i?e.classList.add(...r):e.classList.remove(...r))}_detachContentWhenStable(){this._ngZone.runOutsideAngular(()=>{const e=this._ngZone.onStable.pipe(zo(X(this._attachments,this._detachments))).subscribe(()=>{(!this._pane||!this._host||0===this._pane.children.length)&&(this._pane&&this._config.panelClass&&this._toggleClasses(this._pane,this._config.panelClass,!1),this._host&&this._host.parentElement&&(this._previousHostParent=this._host.parentElement,this._host.remove()),e.unsubscribe())})})}_disposeScrollStrategy(){const e=this._scrollStrategy;e&&(e.disable(),e.detach&&e.detach())}_disposeBackdrop(e){e&&(e.removeEventListener("click",this._backdropClickHandler),e.removeEventListener("transitionend",this._backdropTransitionendHandler),e.remove(),this._backdropElement===e&&(this._backdropElement=null)),this._backdropTimeout&&(clearTimeout(this._backdropTimeout),this._backdropTimeout=void 0)}}const Ij="cdk-overlay-connected-position-bounding-box",n_e=/([A-Za-z%]+)$/;class i_e{get positions(){return this._preferredPositions}constructor(e,t,i,r,s){this._viewportRuler=t,this._document=i,this._platform=r,this._overlayContainer=s,this._lastBoundingBoxSize={width:0,height:0},this._isPushed=!1,this._canPush=!0,this._growAfterOpen=!1,this._hasFlexibleDimensions=!0,this._positionLocked=!1,this._viewportMargin=0,this._scrollables=[],this._preferredPositions=[],this._positionChanges=new Q,this._resizeSubscription=on.EMPTY,this._offsetX=0,this._offsetY=0,this._appliedPanelClasses=[],this.positionChanges=this._positionChanges,this.setOrigin(e)}attach(e){this._validatePositions(),e.hostElement.classList.add(Ij),this._overlayRef=e,this._boundingBox=e.hostElement,this._pane=e.overlayElement,this._isDisposed=!1,this._isInitialRender=!0,this._lastPosition=null,this._resizeSubscription.unsubscribe(),this._resizeSubscription=this._viewportRuler.change().subscribe(()=>{this._isInitialRender=!0,this.apply()})}apply(){if(this._isDisposed||!this._platform.isBrowser)return;if(!this._isInitialRender&&this._positionLocked&&this._lastPosition)return void this.reapplyLastPosition();this._clearPanelClasses(),this._resetOverlayElementStyles(),this._resetBoundingBoxStyles(),this._viewportRect=this._getNarrowedViewportRect(),this._originRect=this._getOriginRect(),this._overlayRect=this._pane.getBoundingClientRect(),this._containerRect=this._overlayContainer.getContainerElement().getBoundingClientRect();const e=this._originRect,t=this._overlayRect,i=this._viewportRect,r=this._containerRect,s=[];let o;for(let a of this._preferredPositions){let l=this._getOriginPoint(e,r,a),c=this._getOverlayPoint(l,t,a),u=this._getOverlayFit(c,t,i,a);if(u.isCompletelyWithinViewport)return this._isPushed=!1,void this._applyPosition(a,l);this._canFitWithFlexibleDimensions(u,c,i)?s.push({position:a,origin:l,overlayRect:t,boundingBoxRect:this._calculateBoundingBoxRect(l,a)}):(!o||o.overlayFit.visibleArea<u.visibleArea)&&(o={overlayFit:u,overlayPoint:c,originPoint:l,position:a,overlayRect:t})}if(s.length){let a=null,l=-1;for(const c of s){const u=c.boundingBoxRect.width*c.boundingBoxRect.height*(c.position.weight||1);u>l&&(l=u,a=c)}return this._isPushed=!1,void this._applyPosition(a.position,a.origin)}if(this._canPush)return this._isPushed=!0,void this._applyPosition(o.position,o.originPoint);this._applyPosition(o.position,o.originPoint)}detach(){this._clearPanelClasses(),this._lastPosition=null,this._previousPushAmount=null,this._resizeSubscription.unsubscribe()}dispose(){this._isDisposed||(this._boundingBox&&jf(this._boundingBox.style,{top:"",left:"",right:"",bottom:"",height:"",width:"",alignItems:"",justifyContent:""}),this._pane&&this._resetOverlayElementStyles(),this._overlayRef&&this._overlayRef.hostElement.classList.remove(Ij),this.detach(),this._positionChanges.complete(),this._overlayRef=this._boundingBox=null,this._isDisposed=!0)}reapplyLastPosition(){if(this._isDisposed||!this._platform.isBrowser)return;const e=this._lastPosition;if(e){this._originRect=this._getOriginRect(),this._overlayRect=this._pane.getBoundingClientRect(),this._viewportRect=this._getNarrowedViewportRect(),this._containerRect=this._overlayContainer.getContainerElement().getBoundingClientRect();const t=this._getOriginPoint(this._originRect,this._containerRect,e);this._applyPosition(e,t)}else this.apply()}withScrollableContainers(e){return this._scrollables=e,this}withPositions(e){return this._preferredPositions=e,-1===e.indexOf(this._lastPosition)&&(this._lastPosition=null),this._validatePositions(),this}withViewportMargin(e){return this._viewportMargin=e,this}withFlexibleDimensions(e=!0){return this._hasFlexibleDimensions=e,this}withGrowAfterOpen(e=!0){return this._growAfterOpen=e,this}withPush(e=!0){return this._canPush=e,this}withLockedPosition(e=!0){return this._positionLocked=e,this}setOrigin(e){return this._origin=e,this}withDefaultOffsetX(e){return this._offsetX=e,this}withDefaultOffsetY(e){return this._offsetY=e,this}withTransformOriginOn(e){return this._transformOriginSelector=e,this}_getOriginPoint(e,t,i){let r,s;if("center"==i.originX)r=e.left+e.width/2;else{const o=this._isRtl()?e.right:e.left,a=this._isRtl()?e.left:e.right;r="start"==i.originX?o:a}return t.left<0&&(r-=t.left),s="center"==i.originY?e.top+e.height/2:"top"==i.originY?e.top:e.bottom,t.top<0&&(s-=t.top),{x:r,y:s}}_getOverlayPoint(e,t,i){let r,s;return r="center"==i.overlayX?-t.width/2:"start"===i.overlayX?this._isRtl()?-t.width:0:this._isRtl()?0:-t.width,s="center"==i.overlayY?-t.height/2:"top"==i.overlayY?0:-t.height,{x:e.x+r,y:e.y+s}}_getOverlayFit(e,t,i,r){const s=Mj(t);let{x:o,y:a}=e,l=this._getOffset(r,"x"),c=this._getOffset(r,"y");l&&(o+=l),c&&(a+=c);let p=0-a,m=a+s.height-i.height,v=this._subtractOverflows(s.width,0-o,o+s.width-i.width),x=this._subtractOverflows(s.height,p,m),b=v*x;return{visibleArea:b,isCompletelyWithinViewport:s.width*s.height===b,fitsInViewportVertically:x===s.height,fitsInViewportHorizontally:v==s.width}}_canFitWithFlexibleDimensions(e,t,i){if(this._hasFlexibleDimensions){const r=i.bottom-t.y,s=i.right-t.x,o=Cj(this._overlayRef.getConfig().minHeight),a=Cj(this._overlayRef.getConfig().minWidth);return(e.fitsInViewportVertically||null!=o&&o<=r)&&(e.fitsInViewportHorizontally||null!=a&&a<=s)}return!1}_pushOverlayOnScreen(e,t,i){if(this._previousPushAmount&&this._positionLocked)return{x:e.x+this._previousPushAmount.x,y:e.y+this._previousPushAmount.y};const r=Mj(t),s=this._viewportRect,o=Math.max(e.x+r.width-s.width,0),a=Math.max(e.y+r.height-s.height,0),l=Math.max(s.top-i.top-e.y,0),c=Math.max(s.left-i.left-e.x,0);let u=0,d=0;return u=r.width<=s.width?c||-o:e.x<this._viewportMargin?s.left-i.left-e.x:0,d=r.height<=s.height?l||-a:e.y<this._viewportMargin?s.top-i.top-e.y:0,this._previousPushAmount={x:u,y:d},{x:e.x+u,y:e.y+d}}_applyPosition(e,t){if(this._setTransformOrigin(e),this._setOverlayElementStyles(t,e),this._setBoundingBoxStyles(t,e),e.panelClass&&this._addPanelClasses(e.panelClass),this._lastPosition=e,this._positionChanges.observers.length){const i=this._getScrollVisibility(),r=new Zge(e,i);this._positionChanges.next(r)}this._isInitialRender=!1}_setTransformOrigin(e){if(!this._transformOriginSelector)return;const t=this._boundingBox.querySelectorAll(this._transformOriginSelector);let i,r=e.overlayY;i="center"===e.overlayX?"center":this._isRtl()?"start"===e.overlayX?"right":"left":"start"===e.overlayX?"left":"right";for(let s=0;s<t.length;s++)t[s].style.transformOrigin=`${i} ${r}`}_calculateBoundingBoxRect(e,t){const i=this._viewportRect,r=this._isRtl();let s,o,a,u,d,p;if("top"===t.overlayY)o=e.y,s=i.height-o+this._viewportMargin;else if("bottom"===t.overlayY)a=i.height-e.y+2*this._viewportMargin,s=i.height-a+this._viewportMargin;else{const m=Math.min(i.bottom-e.y+i.top,e.y),v=this._lastBoundingBoxSize.height;s=2*m,o=e.y-m,s>v&&!this._isInitialRender&&!this._growAfterOpen&&(o=e.y-v/2)}if("end"===t.overlayX&&!r||"start"===t.overlayX&&r)p=i.width-e.x+this._viewportMargin,u=e.x-this._viewportMargin;else if("start"===t.overlayX&&!r||"end"===t.overlayX&&r)d=e.x,u=i.right-e.x;else{const m=Math.min(i.right-e.x+i.left,e.x),v=this._lastBoundingBoxSize.width;u=2*m,d=e.x-m,u>v&&!this._isInitialRender&&!this._growAfterOpen&&(d=e.x-v/2)}return{top:o,left:d,bottom:a,right:p,width:u,height:s}}_setBoundingBoxStyles(e,t){const i=this._calculateBoundingBoxRect(e,t);!this._isInitialRender&&!this._growAfterOpen&&(i.height=Math.min(i.height,this._lastBoundingBoxSize.height),i.width=Math.min(i.width,this._lastBoundingBoxSize.width));const r={};if(this._hasExactPosition())r.top=r.left="0",r.bottom=r.right=r.maxHeight=r.maxWidth="",r.width=r.height="100%";else{const s=this._overlayRef.getConfig().maxHeight,o=this._overlayRef.getConfig().maxWidth;r.height=ys(i.height),r.top=ys(i.top),r.bottom=ys(i.bottom),r.width=ys(i.width),r.left=ys(i.left),r.right=ys(i.right),r.alignItems="center"===t.overlayX?"center":"end"===t.overlayX?"flex-end":"flex-start",r.justifyContent="center"===t.overlayY?"center":"bottom"===t.overlayY?"flex-end":"flex-start",s&&(r.maxHeight=ys(s)),o&&(r.maxWidth=ys(o))}this._lastBoundingBoxSize=i,jf(this._boundingBox.style,r)}_resetBoundingBoxStyles(){jf(this._boundingBox.style,{top:"0",left:"0",right:"0",bottom:"0",height:"",width:"",alignItems:"",justifyContent:""})}_resetOverlayElementStyles(){jf(this._pane.style,{top:"",left:"",bottom:"",right:"",position:"",transform:""})}_setOverlayElementStyles(e,t){const i={},r=this._hasExactPosition(),s=this._hasFlexibleDimensions,o=this._overlayRef.getConfig();if(r){const u=this._viewportRuler.getViewportScrollPosition();jf(i,this._getExactOverlayY(t,e,u)),jf(i,this._getExactOverlayX(t,e,u))}else i.position="static";let a="",l=this._getOffset(t,"x"),c=this._getOffset(t,"y");l&&(a+=`translateX(${l}px) `),c&&(a+=`translateY(${c}px)`),i.transform=a.trim(),o.maxHeight&&(r?i.maxHeight=ys(o.maxHeight):s&&(i.maxHeight="")),o.maxWidth&&(r?i.maxWidth=ys(o.maxWidth):s&&(i.maxWidth="")),jf(this._pane.style,i)}_getExactOverlayY(e,t,i){let r={top:"",bottom:""},s=this._getOverlayPoint(t,this._overlayRect,e);return this._isPushed&&(s=this._pushOverlayOnScreen(s,this._overlayRect,i)),"bottom"===e.overlayY?r.bottom=this._document.documentElement.clientHeight-(s.y+this._overlayRect.height)+"px":r.top=ys(s.y),r}_getExactOverlayX(e,t,i){let o,r={left:"",right:""},s=this._getOverlayPoint(t,this._overlayRect,e);return this._isPushed&&(s=this._pushOverlayOnScreen(s,this._overlayRect,i)),o=this._isRtl()?"end"===e.overlayX?"left":"right":"end"===e.overlayX?"right":"left","right"===o?r.right=this._document.documentElement.clientWidth-(s.x+this._overlayRect.width)+"px":r.left=ys(s.x),r}_getScrollVisibility(){const e=this._getOriginRect(),t=this._pane.getBoundingClientRect(),i=this._scrollables.map(r=>r.getElementRef().nativeElement.getBoundingClientRect());return{isOriginClipped:Ej(e,i),isOriginOutsideView:bO(e,i),isOverlayClipped:Ej(t,i),isOverlayOutsideView:bO(t,i)}}_subtractOverflows(e,...t){return t.reduce((i,r)=>i-Math.max(r,0),e)}_getNarrowedViewportRect(){const e=this._document.documentElement.clientWidth,t=this._document.documentElement.clientHeight,i=this._viewportRuler.getViewportScrollPosition();return{top:i.top+this._viewportMargin,left:i.left+this._viewportMargin,right:i.left+e-this._viewportMargin,bottom:i.top+t-this._viewportMargin,width:e-2*this._viewportMargin,height:t-2*this._viewportMargin}}_isRtl(){return"rtl"===this._overlayRef.getDirection()}_hasExactPosition(){return!this._hasFlexibleDimensions||this._isPushed}_getOffset(e,t){return"x"===t?null==e.offsetX?this._offsetX:e.offsetX:null==e.offsetY?this._offsetY:e.offsetY}_validatePositions(){}_addPanelClasses(e){this._pane&&WS(e).forEach(t=>{""!==t&&-1===this._appliedPanelClasses.indexOf(t)&&(this._appliedPanelClasses.push(t),this._pane.classList.add(t))})}_clearPanelClasses(){this._pane&&(this._appliedPanelClasses.forEach(e=>{this._pane.classList.remove(e)}),this._appliedPanelClasses=[])}_getOriginRect(){const e=this._origin;if(e instanceof Di)return e.nativeElement.getBoundingClientRect();if(e instanceof Element)return e.getBoundingClientRect();const t=e.width||0,i=e.height||0;return{top:e.y,bottom:e.y+i,left:e.x,right:e.x+t,height:i,width:t}}}function jf(n,e){for(let t in e)e.hasOwnProperty(t)&&(n[t]=e[t]);return n}function Cj(n){if("number"!=typeof n&&null!=n){const[e,t]=n.split(n_e);return t&&"px"!==t?null:parseFloat(e)}return n||null}function Mj(n){return{top:Math.floor(n.top),right:Math.floor(n.right),bottom:Math.floor(n.bottom),left:Math.floor(n.left),width:Math.floor(n.width),height:Math.floor(n.height)}}const Dj="cdk-global-overlay-wrapper";class r_e{constructor(){this._cssPosition="static",this._topOffset="",this._bottomOffset="",this._alignItems="",this._xPosition="",this._xOffset="",this._width="",this._height="",this._isDisposed=!1}attach(e){const t=e.getConfig();this._overlayRef=e,this._width&&!t.width&&e.updateSize({width:this._width}),this._height&&!t.height&&e.updateSize({height:this._height}),e.hostElement.classList.add(Dj),this._isDisposed=!1}top(e=""){return this._bottomOffset="",this._topOffset=e,this._alignItems="flex-start",this}left(e=""){return this._xOffset=e,this._xPosition="left",this}bottom(e=""){return this._topOffset="",this._bottomOffset=e,this._alignItems="flex-end",this}right(e=""){return this._xOffset=e,this._xPosition="right",this}start(e=""){return this._xOffset=e,this._xPosition="start",this}end(e=""){return this._xOffset=e,this._xPosition="end",this}width(e=""){return this._overlayRef?this._overlayRef.updateSize({width:e}):this._width=e,this}height(e=""){return this._overlayRef?this._overlayRef.updateSize({height:e}):this._height=e,this}centerHorizontally(e=""){return this.left(e),this._xPosition="center",this}centerVertically(e=""){return this.top(e),this._alignItems="center",this}apply(){if(!this._overlayRef||!this._overlayRef.hasAttached())return;const e=this._overlayRef.overlayElement.style,t=this._overlayRef.hostElement.style,i=this._overlayRef.getConfig(),{width:r,height:s,maxWidth:o,maxHeight:a}=i,l=!("100%"!==r&&"100vw"!==r||o&&"100%"!==o&&"100vw"!==o),c=!("100%"!==s&&"100vh"!==s||a&&"100%"!==a&&"100vh"!==a),u=this._xPosition,d=this._xOffset,p="rtl"===this._overlayRef.getConfig().direction;let m="",v="",x="";l?x="flex-start":"center"===u?(x="center",p?v=d:m=d):p?"left"===u||"end"===u?(x="flex-end",m=d):("right"===u||"start"===u)&&(x="flex-start",v=d):"left"===u||"start"===u?(x="flex-start",m=d):("right"===u||"end"===u)&&(x="flex-end",v=d),e.position=this._cssPosition,e.marginLeft=l?"0":m,e.marginTop=c?"0":this._topOffset,e.marginBottom=this._bottomOffset,e.marginRight=l?"0":v,t.justifyContent=x,t.alignItems=c?"flex-start":this._alignItems}dispose(){if(this._isDisposed||!this._overlayRef)return;const e=this._overlayRef.overlayElement.style,t=this._overlayRef.hostElement,i=t.style;t.classList.remove(Dj),i.justifyContent=i.alignItems=e.marginTop=e.marginBottom=e.marginLeft=e.marginRight=e.position="",this._overlayRef=null,this._isDisposed=!0}}let s_e=(()=>{class n{constructor(t,i,r,s){this._viewportRuler=t,this._document=i,this._platform=r,this._overlayContainer=s}global(){return new r_e}flexibleConnectedTo(t){return new i_e(t,this._viewportRuler,this._document,this._platform,this._overlayContainer)}static{this.\u0275fac=function(i){return new(i||n)(ue(_O),ue(_i),ue(fa),ue(Aj))}}static{this.\u0275prov=dt({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),o_e=0,QS=(()=>{class n{constructor(t,i,r,s,o,a,l,c,u,d,p,m){this.scrollStrategies=t,this._overlayContainer=i,this._componentFactoryResolver=r,this._positionBuilder=s,this._keyboardDispatcher=o,this._injector=a,this._ngZone=l,this._document=c,this._directionality=u,this._location=d,this._outsideClickDispatcher=p,this._animationsModuleType=m}create(t){const i=this._createHostElement(),r=this._createPaneElement(i),s=this._createPortalOutlet(r),o=new Tj(t);return o.direction=o.direction||this._directionality.value,new t_e(s,i,r,o,this._ngZone,this._keyboardDispatcher,this._document,this._location,this._outsideClickDispatcher,"NoopAnimations"===this._animationsModuleType)}position(){return this._positionBuilder}_createPaneElement(t){const i=this._document.createElement("div");return i.id="cdk-overlay-"+o_e++,i.classList.add("cdk-overlay-pane"),t.appendChild(i),i}_createHostElement(){const t=this._document.createElement("div");return this._overlayContainer.getContainerElement().appendChild(t),t}_createPortalOutlet(t){return this._appRef||(this._appRef=this._injector.get(dc)),new $ge(t,this._componentFactoryResolver,this._appRef,this._injector,this._document)}static{this.\u0275fac=function(i){return new(i||n)(ue(Qge),ue(Aj),ue(Om),ue(s_e),ue(Jge),ue(Ls),ue(mn),ue(_i),ue(jS),ue(jE),ue(e_e),ue(lu,8))}}static{this.\u0275prov=dt({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();const a_e=[{originX:"start",originY:"bottom",overlayX:"start",overlayY:"top"},{originX:"start",originY:"top",overlayX:"start",overlayY:"bottom"},{originX:"end",originY:"top",overlayX:"end",overlayY:"bottom"},{originX:"end",originY:"bottom",overlayX:"end",overlayY:"top"}],Rj=new Fe("cdk-connected-overlay-scroll-strategy");let xO=(()=>{class n{constructor(t){this.elementRef=t}static{this.\u0275fac=function(i){return new(i||n)(J(Di))}}static{this.\u0275dir=St({type:n,selectors:[["","cdk-overlay-origin",""],["","overlay-origin",""],["","cdkOverlayOrigin",""]],exportAs:["cdkOverlayOrigin"],standalone:!0})}}return n})(),Pj=(()=>{class n{get offsetX(){return this._offsetX}set offsetX(t){this._offsetX=t,this._position&&this._updatePositionStrategy(this._position)}get offsetY(){return this._offsetY}set offsetY(t){this._offsetY=t,this._position&&this._updatePositionStrategy(this._position)}get hasBackdrop(){return this._hasBackdrop}set hasBackdrop(t){this._hasBackdrop=xr(t)}get lockPosition(){return this._lockPosition}set lockPosition(t){this._lockPosition=xr(t)}get flexibleDimensions(){return this._flexibleDimensions}set flexibleDimensions(t){this._flexibleDimensions=xr(t)}get growAfterOpen(){return this._growAfterOpen}set growAfterOpen(t){this._growAfterOpen=xr(t)}get push(){return this._push}set push(t){this._push=xr(t)}constructor(t,i,r,s,o){this._overlay=t,this._dir=o,this._hasBackdrop=!1,this._lockPosition=!1,this._growAfterOpen=!1,this._flexibleDimensions=!1,this._push=!1,this._backdropSubscription=on.EMPTY,this._attachSubscription=on.EMPTY,this._detachSubscription=on.EMPTY,this._positionSubscription=on.EMPTY,this.viewportMargin=0,this.open=!1,this.disableClose=!1,this.backdropClick=new gi,this.positionChange=new gi,this.attach=new gi,this.detach=new gi,this.overlayKeydown=new gi,this.overlayOutsideClick=new gi,this._templatePortal=new bj(i,r),this._scrollStrategyFactory=s,this.scrollStrategy=this._scrollStrategyFactory()}get overlayRef(){return this._overlayRef}get dir(){return this._dir?this._dir.value:"ltr"}ngOnDestroy(){this._attachSubscription.unsubscribe(),this._detachSubscription.unsubscribe(),this._backdropSubscription.unsubscribe(),this._positionSubscription.unsubscribe(),this._overlayRef&&this._overlayRef.dispose()}ngOnChanges(t){this._position&&(this._updatePositionStrategy(this._position),this._overlayRef.updateSize({width:this.width,minWidth:this.minWidth,height:this.height,minHeight:this.minHeight}),t.origin&&this.open&&this._position.apply()),t.open&&(this.open?this._attachOverlay():this._detachOverlay())}_createOverlay(){(!this.positions||!this.positions.length)&&(this.positions=a_e);const t=this._overlayRef=this._overlay.create(this._buildConfig());this._attachSubscription=t.attachments().subscribe(()=>this.attach.emit()),this._detachSubscription=t.detachments().subscribe(()=>this.detach.emit()),t.keydownEvents().subscribe(i=>{this.overlayKeydown.next(i),27===i.keyCode&&!this.disableClose&&!i_(i)&&(i.preventDefault(),this._detachOverlay())}),this._overlayRef.outsidePointerEvents().subscribe(i=>{this.overlayOutsideClick.next(i)})}_buildConfig(){const t=this._position=this.positionStrategy||this._createPositionStrategy(),i=new Tj({direction:this._dir,positionStrategy:t,scrollStrategy:this.scrollStrategy,hasBackdrop:this.hasBackdrop});return(this.width||0===this.width)&&(i.width=this.width),(this.height||0===this.height)&&(i.height=this.height),(this.minWidth||0===this.minWidth)&&(i.minWidth=this.minWidth),(this.minHeight||0===this.minHeight)&&(i.minHeight=this.minHeight),this.backdropClass&&(i.backdropClass=this.backdropClass),this.panelClass&&(i.panelClass=this.panelClass),i}_updatePositionStrategy(t){const i=this.positions.map(r=>({originX:r.originX,originY:r.originY,overlayX:r.overlayX,overlayY:r.overlayY,offsetX:r.offsetX||this.offsetX,offsetY:r.offsetY||this.offsetY,panelClass:r.panelClass||void 0}));return t.setOrigin(this._getFlexibleConnectedPositionStrategyOrigin()).withPositions(i).withFlexibleDimensions(this.flexibleDimensions).withPush(this.push).withGrowAfterOpen(this.growAfterOpen).withViewportMargin(this.viewportMargin).withLockedPosition(this.lockPosition).withTransformOriginOn(this.transformOriginSelector)}_createPositionStrategy(){const t=this._overlay.position().flexibleConnectedTo(this._getFlexibleConnectedPositionStrategyOrigin());return this._updatePositionStrategy(t),t}_getFlexibleConnectedPositionStrategyOrigin(){return this.origin instanceof xO?this.origin.elementRef:this.origin}_attachOverlay(){this._overlayRef?this._overlayRef.getConfig().hasBackdrop=this.hasBackdrop:this._createOverlay(),this._overlayRef.hasAttached()||this._overlayRef.attach(this._templatePortal),this.hasBackdrop?this._backdropSubscription=this._overlayRef.backdropClick().subscribe(t=>{this.backdropClick.emit(t)}):this._backdropSubscription.unsubscribe(),this._positionSubscription.unsubscribe(),this.positionChange.observers.length>0&&(this._positionSubscription=this._position.positionChanges.pipe(function Hge(n,e=!1){return re((t,i)=>{let r=0;t.subscribe(ye(i,s=>{const o=n(s,r++);(o||e)&&i.next(s),!o&&i.complete()}))})}(()=>this.positionChange.observers.length>0)).subscribe(t=>{this.positionChange.emit(t),0===this.positionChange.observers.length&&this._positionSubscription.unsubscribe()}))}_detachOverlay(){this._overlayRef&&this._overlayRef.detach(),this._backdropSubscription.unsubscribe(),this._positionSubscription.unsubscribe()}static{this.\u0275fac=function(i){return new(i||n)(J(QS),J(cc),J(hl),J(Rj),J(jS,8))}}static{this.\u0275dir=St({type:n,selectors:[["","cdk-connected-overlay",""],["","connected-overlay",""],["","cdkConnectedOverlay",""]],inputs:{origin:["cdkConnectedOverlayOrigin","origin"],positions:["cdkConnectedOverlayPositions","positions"],positionStrategy:["cdkConnectedOverlayPositionStrategy","positionStrategy"],offsetX:["cdkConnectedOverlayOffsetX","offsetX"],offsetY:["cdkConnectedOverlayOffsetY","offsetY"],width:["cdkConnectedOverlayWidth","width"],height:["cdkConnectedOverlayHeight","height"],minWidth:["cdkConnectedOverlayMinWidth","minWidth"],minHeight:["cdkConnectedOverlayMinHeight","minHeight"],backdropClass:["cdkConnectedOverlayBackdropClass","backdropClass"],panelClass:["cdkConnectedOverlayPanelClass","panelClass"],viewportMargin:["cdkConnectedOverlayViewportMargin","viewportMargin"],scrollStrategy:["cdkConnectedOverlayScrollStrategy","scrollStrategy"],open:["cdkConnectedOverlayOpen","open"],disableClose:["cdkConnectedOverlayDisableClose","disableClose"],transformOriginSelector:["cdkConnectedOverlayTransformOriginOn","transformOriginSelector"],hasBackdrop:["cdkConnectedOverlayHasBackdrop","hasBackdrop"],lockPosition:["cdkConnectedOverlayLockPosition","lockPosition"],flexibleDimensions:["cdkConnectedOverlayFlexibleDimensions","flexibleDimensions"],growAfterOpen:["cdkConnectedOverlayGrowAfterOpen","growAfterOpen"],push:["cdkConnectedOverlayPush","push"]},outputs:{backdropClick:"backdropClick",positionChange:"positionChange",attach:"attach",detach:"detach",overlayKeydown:"overlayKeydown",overlayOutsideClick:"overlayOutsideClick"},exportAs:["cdkConnectedOverlay"],standalone:!0,features:[Ps]})}}return n})();const c_e={provide:Rj,deps:[QS],useFactory:function l_e(n){return()=>n.scrollStrategies.reposition()}};let u_e=(()=>{class n{static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275mod=ni({type:n})}static{this.\u0275inj=jn({providers:[QS,c_e],imports:[Eb,qge,yj,yj]})}}return n})();class wO{get selected(){return this._selected||(this._selected=Array.from(this._selection.values())),this._selected}constructor(e=!1,t,i=!0,r){this._multiple=e,this._emitChanges=i,this.compareWith=r,this._selection=new Set,this._deselectedToEmit=[],this._selectedToEmit=[],this.changed=new Q,t&&t.length&&(e?t.forEach(s=>this._markSelected(s)):this._markSelected(t[0]),this._selectedToEmit.length=0)}select(...e){this._verifyValueAssignment(e),e.forEach(i=>this._markSelected(i));const t=this._hasQueuedChanges();return this._emitChangeEvent(),t}deselect(...e){this._verifyValueAssignment(e),e.forEach(i=>this._unmarkSelected(i));const t=this._hasQueuedChanges();return this._emitChangeEvent(),t}setSelection(...e){this._verifyValueAssignment(e);const t=this.selected,i=new Set(e);e.forEach(s=>this._markSelected(s)),t.filter(s=>!i.has(s)).forEach(s=>this._unmarkSelected(s));const r=this._hasQueuedChanges();return this._emitChangeEvent(),r}toggle(e){return this.isSelected(e)?this.deselect(e):this.select(e)}clear(e=!0){this._unmarkAll();const t=this._hasQueuedChanges();return e&&this._emitChangeEvent(),t}isSelected(e){return this._selection.has(this._getConcreteValue(e))}isEmpty(){return 0===this._selection.size}hasValue(){return!this.isEmpty()}sort(e){this._multiple&&this.selected&&this._selected.sort(e)}isMultipleSelection(){return this._multiple}_emitChangeEvent(){this._selected=null,(this._selectedToEmit.length||this._deselectedToEmit.length)&&(this.changed.next({source:this,added:this._selectedToEmit,removed:this._deselectedToEmit}),this._deselectedToEmit=[],this._selectedToEmit=[])}_markSelected(e){e=this._getConcreteValue(e),this.isSelected(e)||(this._multiple||this._unmarkAll(),this.isSelected(e)||this._selection.add(e),this._emitChanges&&this._selectedToEmit.push(e))}_unmarkSelected(e){e=this._getConcreteValue(e),this.isSelected(e)&&(this._selection.delete(e),this._emitChanges&&this._deselectedToEmit.push(e))}_unmarkAll(){this.isEmpty()||this._selection.forEach(e=>this._unmarkSelected(e))}_verifyValueAssignment(e){}_hasQueuedChanges(){return!(!this._deselectedToEmit.length&&!this._selectedToEmit.length)}_getConcreteValue(e){if(this.compareWith){for(let t of this._selection)if(this.compareWith(e,t))return t;return e}return e}}function kj(...n){const e=Vc(n),{args:t,keys:i}=Oz(n),r=new xt(s=>{const{length:o}=t;if(!o)return void s.complete();const a=new Array(o);let l=o,c=o;for(let u=0;u<o;u++){let d=!1;Mi(t[u]).subscribe(ye(s,p=>{d||(d=!0,c--),a[u]=p},()=>l--,void 0,()=>{(!l||!d)&&(c||s.next(i?Nz(i,a):a),s.complete())}))}});return e?r.pipe($1(e)):r}let Oj=(()=>{class n{constructor(t,i){this._renderer=t,this._elementRef=i,this.onChange=r=>{},this.onTouched=()=>{}}setProperty(t,i){this._renderer.setProperty(this._elementRef.nativeElement,t,i)}registerOnTouched(t){this.onTouched=t}registerOnChange(t){this.onChange=t}setDisabledState(t){this.setProperty("disabled",t)}static{this.\u0275fac=function(i){return new(i||n)(J(rc),J(Di))}}static{this.\u0275dir=St({type:n})}}return n})(),$f=(()=>{class n extends Oj{static{this.\u0275fac=function(){let t;return function(r){return(t||(t=Or(n)))(r||n)}}()}static{this.\u0275dir=St({type:n,features:[si]})}}return n})();const Fl=new Fe("NgValueAccessor"),f_e={provide:Fl,useExisting:ki(()=>ZS),multi:!0},m_e=new Fe("CompositionEventMode");let ZS=(()=>{class n extends Oj{constructor(t,i,r){super(t,i),this._compositionMode=r,this._composing=!1,null==this._compositionMode&&(this._compositionMode=!function p_e(){const n=Cd()?Cd().getUserAgent():"";return/android (\d+)/.test(n.toLowerCase())}())}writeValue(t){this.setProperty("value",t??"")}_handleInput(t){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(t)}_compositionStart(){this._composing=!0}_compositionEnd(t){this._composing=!1,this._compositionMode&&this.onChange(t)}static{this.\u0275fac=function(i){return new(i||n)(J(rc),J(Di),J(m_e,8))}}static{this.\u0275dir=St({type:n,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(i,r){1&i&&qn("input",function(o){return r._handleInput(o.target.value)})("blur",function(){return r.onTouched()})("compositionstart",function(){return r._compositionStart()})("compositionend",function(o){return r._compositionEnd(o.target.value)})},features:[Qi([f_e]),si]})}}return n})();function th(n){return null==n||("string"==typeof n||Array.isArray(n))&&0===n.length}function Fj(n){return null!=n&&"number"==typeof n.length}const Eo=new Fe("NgValidators"),nh=new Fe("NgAsyncValidators"),g_e=/^(?=.{1,254}$)(?=.{1,64}@)[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+)*@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/;class Lj{static min(e){return function Vj(n){return e=>{if(th(e.value)||th(n))return null;const t=parseFloat(e.value);return!isNaN(t)&&t<n?{min:{min:n,actual:e.value}}:null}}(e)}static max(e){return function Uj(n){return e=>{if(th(e.value)||th(n))return null;const t=parseFloat(e.value);return!isNaN(t)&&t>n?{max:{max:n,actual:e.value}}:null}}(e)}static required(e){return function Bj(n){return th(n.value)?{required:!0}:null}(e)}static requiredTrue(e){return function zj(n){return!0===n.value?null:{required:!0}}(e)}static email(e){return function Hj(n){return th(n.value)||g_e.test(n.value)?null:{email:!0}}(e)}static minLength(e){return function Gj(n){return e=>th(e.value)||!Fj(e.value)?null:e.value.length<n?{minlength:{requiredLength:n,actualLength:e.value.length}}:null}(e)}static maxLength(e){return function Wj(n){return e=>Fj(e.value)&&e.value.length>n?{maxlength:{requiredLength:n,actualLength:e.value.length}}:null}(e)}static pattern(e){return function jj(n){if(!n)return JS;let e,t;return"string"==typeof n?(t="","^"!==n.charAt(0)&&(t+="^"),t+=n,"$"!==n.charAt(n.length-1)&&(t+="$"),e=new RegExp(t)):(t=n.toString(),e=n),i=>{if(th(i.value))return null;const r=i.value;return e.test(r)?null:{pattern:{requiredPattern:t,actualValue:r}}}}(e)}static nullValidator(e){return null}static compose(e){return Qj(e)}static composeAsync(e){return Zj(e)}}function JS(n){return null}function $j(n){return null!=n}function qj(n){return By(n)?q(n):n}function Xj(n){let e={};return n.forEach(t=>{e=null!=t?{...e,...t}:e}),0===Object.keys(e).length?null:e}function Kj(n,e){return e.map(t=>t(n))}function Yj(n){return n.map(e=>function __e(n){return!n.validate}(e)?e:t=>e.validate(t))}function Qj(n){if(!n)return null;const e=n.filter($j);return 0==e.length?null:function(t){return Xj(Kj(t,e))}}function EO(n){return null!=n?Qj(Yj(n)):null}function Zj(n){if(!n)return null;const e=n.filter($j);return 0==e.length?null:function(t){return kj(Kj(t,e).map(qj)).pipe(Ge(Xj))}}function TO(n){return null!=n?Zj(Yj(n)):null}function Jj(n,e){return null===n?[e]:Array.isArray(n)?[...n,e]:[n,e]}function e$(n){return n._rawValidators}function t$(n){return n._rawAsyncValidators}function SO(n){return n?Array.isArray(n)?n:[n]:[]}function eA(n,e){return Array.isArray(n)?n.includes(e):n===e}function n$(n,e){const t=SO(e);return SO(n).forEach(r=>{eA(t,r)||t.push(r)}),t}function i$(n,e){return SO(e).filter(t=>!eA(n,t))}class r${constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(e){this._rawValidators=e||[],this._composedValidatorFn=EO(this._rawValidators)}_setAsyncValidators(e){this._rawAsyncValidators=e||[],this._composedAsyncValidatorFn=TO(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(e){this._onDestroyCallbacks.push(e)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(e=>e()),this._onDestroyCallbacks=[]}reset(e=void 0){this.control&&this.control.reset(e)}hasError(e,t){return!!this.control&&this.control.hasError(e,t)}getError(e,t){return this.control?this.control.getError(e,t):null}}class jo extends r${get formDirective(){return null}get path(){return null}}class Sc extends r${constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}}class s${constructor(e){this._cd=e}get isTouched(){return!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return!!this._cd?.submitted}}let o$=(()=>{class n extends s${constructor(t){super(t)}static{this.\u0275fac=function(i){return new(i||n)(J(Sc,2))}}static{this.\u0275dir=St({type:n,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(i,r){2&i&&_r("ng-untouched",r.isUntouched)("ng-touched",r.isTouched)("ng-pristine",r.isPristine)("ng-dirty",r.isDirty)("ng-valid",r.isValid)("ng-invalid",r.isInvalid)("ng-pending",r.isPending)},features:[si]})}}return n})();const Cb="VALID",nA="INVALID",o_="PENDING",Mb="DISABLED";function CO(n){return(iA(n)?n.validators:n)||null}function MO(n,e){return(iA(e)?e.asyncValidators:n)||null}function iA(n){return null!=n&&!Array.isArray(n)&&"object"==typeof n}class DO{constructor(e,t){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=!1,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._assignValidators(e),this._assignAsyncValidators(t)}get validator(){return this._composedValidatorFn}set validator(e){this._rawValidators=this._composedValidatorFn=e}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(e){this._rawAsyncValidators=this._composedAsyncValidatorFn=e}get parent(){return this._parent}get valid(){return this.status===Cb}get invalid(){return this.status===nA}get pending(){return this.status==o_}get disabled(){return this.status===Mb}get enabled(){return this.status!==Mb}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(e){this._assignValidators(e)}setAsyncValidators(e){this._assignAsyncValidators(e)}addValidators(e){this.setValidators(n$(e,this._rawValidators))}addAsyncValidators(e){this.setAsyncValidators(n$(e,this._rawAsyncValidators))}removeValidators(e){this.setValidators(i$(e,this._rawValidators))}removeAsyncValidators(e){this.setAsyncValidators(i$(e,this._rawAsyncValidators))}hasValidator(e){return eA(this._rawValidators,e)}hasAsyncValidator(e){return eA(this._rawAsyncValidators,e)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(e={}){this.touched=!0,this._parent&&!e.onlySelf&&this._parent.markAsTouched(e)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(e=>e.markAllAsTouched())}markAsUntouched(e={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(t=>{t.markAsUntouched({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}markAsDirty(e={}){this.pristine=!1,this._parent&&!e.onlySelf&&this._parent.markAsDirty(e)}markAsPristine(e={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(t=>{t.markAsPristine({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}markAsPending(e={}){this.status=o_,!1!==e.emitEvent&&this.statusChanges.emit(this.status),this._parent&&!e.onlySelf&&this._parent.markAsPending(e)}disable(e={}){const t=this._parentMarkedDirty(e.onlySelf);this.status=Mb,this.errors=null,this._forEachChild(i=>{i.disable({...e,onlySelf:!0})}),this._updateValue(),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors({...e,skipPristineCheck:t}),this._onDisabledChange.forEach(i=>i(!0))}enable(e={}){const t=this._parentMarkedDirty(e.onlySelf);this.status=Cb,this._forEachChild(i=>{i.enable({...e,onlySelf:!0})}),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent}),this._updateAncestors({...e,skipPristineCheck:t}),this._onDisabledChange.forEach(i=>i(!1))}_updateAncestors(e){this._parent&&!e.onlySelf&&(this._parent.updateValueAndValidity(e),e.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(e){this._parent=e}getRawValue(){return this.value}updateValueAndValidity(e={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===Cb||this.status===o_)&&this._runAsyncValidator(e.emitEvent)),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.updateValueAndValidity(e)}_updateTreeValidity(e={emitEvent:!0}){this._forEachChild(t=>t._updateTreeValidity(e)),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?Mb:Cb}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(e){if(this.asyncValidator){this.status=o_,this._hasOwnPendingAsyncValidator=!0;const t=qj(this.asyncValidator(this));this._asyncValidationSubscription=t.subscribe(i=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(i,{emitEvent:e})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(e,t={}){this.errors=e,this._updateControlsErrors(!1!==t.emitEvent)}get(e){let t=e;return null==t||(Array.isArray(t)||(t=t.split(".")),0===t.length)?null:t.reduce((i,r)=>i&&i._find(r),this)}getError(e,t){const i=t?this.get(t):this;return i&&i.errors?i.errors[e]:null}hasError(e,t){return!!this.getError(e,t)}get root(){let e=this;for(;e._parent;)e=e._parent;return e}_updateControlsErrors(e){this.status=this._calculateStatus(),e&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(e)}_initObservables(){this.valueChanges=new gi,this.statusChanges=new gi}_calculateStatus(){return this._allControlsDisabled()?Mb:this.errors?nA:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(o_)?o_:this._anyControlsHaveStatus(nA)?nA:Cb}_anyControlsHaveStatus(e){return this._anyControls(t=>t.status===e)}_anyControlsDirty(){return this._anyControls(e=>e.dirty)}_anyControlsTouched(){return this._anyControls(e=>e.touched)}_updatePristine(e={}){this.pristine=!this._anyControlsDirty(),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}_updateTouched(e={}){this.touched=this._anyControlsTouched(),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}_registerOnCollectionChange(e){this._onCollectionChange=e}_setUpdateStrategy(e){iA(e)&&null!=e.updateOn&&(this._updateOn=e.updateOn)}_parentMarkedDirty(e){return!e&&!(!this._parent||!this._parent.dirty)&&!this._parent._anyControlsDirty()}_find(e){return null}_assignValidators(e){this._rawValidators=Array.isArray(e)?e.slice():e,this._composedValidatorFn=function w_e(n){return Array.isArray(n)?EO(n):n||null}(this._rawValidators)}_assignAsyncValidators(e){this._rawAsyncValidators=Array.isArray(e)?e.slice():e,this._composedAsyncValidatorFn=function E_e(n){return Array.isArray(n)?TO(n):n||null}(this._rawAsyncValidators)}}class RO extends DO{constructor(e,t,i){super(CO(t),MO(i,t)),this.controls=e,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}registerControl(e,t){return this.controls[e]?this.controls[e]:(this.controls[e]=t,t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange),t)}addControl(e,t,i={}){this.registerControl(e,t),this.updateValueAndValidity({emitEvent:i.emitEvent}),this._onCollectionChange()}removeControl(e,t={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}setControl(e,t,i={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],t&&this.registerControl(e,t),this.updateValueAndValidity({emitEvent:i.emitEvent}),this._onCollectionChange()}contains(e){return this.controls.hasOwnProperty(e)&&this.controls[e].enabled}setValue(e,t={}){(function c$(n,e,t){n._forEachChild((i,r)=>{if(void 0===t[r])throw new Ce(1002,"")})})(this,0,e),Object.keys(e).forEach(i=>{(function l$(n,e,t){const i=n.controls;if(!(e?Object.keys(i):i).length)throw new Ce(1e3,"");if(!i[t])throw new Ce(1001,"")})(this,!0,i),this.controls[i].setValue(e[i],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(e,t={}){null!=e&&(Object.keys(e).forEach(i=>{const r=this.controls[i];r&&r.patchValue(e[i],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t))}reset(e={},t={}){this._forEachChild((i,r)=>{i.reset(e?e[r]:null,{onlySelf:!0,emitEvent:t.emitEvent})}),this._updatePristine(t),this._updateTouched(t),this.updateValueAndValidity(t)}getRawValue(){return this._reduceChildren({},(e,t,i)=>(e[i]=t.getRawValue(),e))}_syncPendingControls(){let e=this._reduceChildren(!1,(t,i)=>!!i._syncPendingControls()||t);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){Object.keys(this.controls).forEach(t=>{const i=this.controls[t];i&&e(i,t)})}_setUpControls(){this._forEachChild(e=>{e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(e){for(const[t,i]of Object.entries(this.controls))if(this.contains(t)&&e(i))return!0;return!1}_reduceValue(){return this._reduceChildren({},(t,i,r)=>((i.enabled||this.disabled)&&(t[r]=i.value),t))}_reduceChildren(e,t){let i=e;return this._forEachChild((r,s)=>{i=t(i,r,s)}),i}_allControlsDisabled(){for(const e of Object.keys(this.controls))if(this.controls[e].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_find(e){return this.controls.hasOwnProperty(e)?this.controls[e]:null}}const a_=new Fe("CallSetDisabledState",{providedIn:"root",factory:()=>rA}),rA="always";function Db(n,e,t=rA){PO(n,e),e.valueAccessor.writeValue(n.value),(n.disabled||"always"===t)&&e.valueAccessor.setDisabledState?.(n.disabled),function A_e(n,e){e.valueAccessor.registerOnChange(t=>{n._pendingValue=t,n._pendingChange=!0,n._pendingDirty=!0,"change"===n.updateOn&&u$(n,e)})}(n,e),function C_e(n,e){const t=(i,r)=>{e.valueAccessor.writeValue(i),r&&e.viewToModelUpdate(i)};n.registerOnChange(t),e._registerOnDestroy(()=>{n._unregisterOnChange(t)})}(n,e),function I_e(n,e){e.valueAccessor.registerOnTouched(()=>{n._pendingTouched=!0,"blur"===n.updateOn&&n._pendingChange&&u$(n,e),"submit"!==n.updateOn&&n.markAsTouched()})}(n,e),function S_e(n,e){if(e.valueAccessor.setDisabledState){const t=i=>{e.valueAccessor.setDisabledState(i)};n.registerOnDisabledChange(t),e._registerOnDestroy(()=>{n._unregisterOnDisabledChange(t)})}}(n,e)}function oA(n,e,t=!0){const i=()=>{};e.valueAccessor&&(e.valueAccessor.registerOnChange(i),e.valueAccessor.registerOnTouched(i)),lA(n,e),n&&(e._invokeOnDestroyCallbacks(),n._registerOnCollectionChange(()=>{}))}function aA(n,e){n.forEach(t=>{t.registerOnValidatorChange&&t.registerOnValidatorChange(e)})}function PO(n,e){const t=e$(n);null!==e.validator?n.setValidators(Jj(t,e.validator)):"function"==typeof t&&n.setValidators([t]);const i=t$(n);null!==e.asyncValidator?n.setAsyncValidators(Jj(i,e.asyncValidator)):"function"==typeof i&&n.setAsyncValidators([i]);const r=()=>n.updateValueAndValidity();aA(e._rawValidators,r),aA(e._rawAsyncValidators,r)}function lA(n,e){let t=!1;if(null!==n){if(null!==e.validator){const r=e$(n);if(Array.isArray(r)&&r.length>0){const s=r.filter(o=>o!==e.validator);s.length!==r.length&&(t=!0,n.setValidators(s))}}if(null!==e.asyncValidator){const r=t$(n);if(Array.isArray(r)&&r.length>0){const s=r.filter(o=>o!==e.asyncValidator);s.length!==r.length&&(t=!0,n.setAsyncValidators(s))}}}const i=()=>{};return aA(e._rawValidators,i),aA(e._rawAsyncValidators,i),t}function u$(n,e){n._pendingDirty&&n.markAsDirty(),n.setValue(n._pendingValue,{emitModelToViewChange:!1}),e.viewToModelUpdate(n._pendingValue),n._pendingChange=!1}function d$(n,e){PO(n,e)}function h$(n,e){n._syncPendingControls(),e.forEach(t=>{const i=t.control;"submit"===i.updateOn&&i._pendingChange&&(t.viewToModelUpdate(i._pendingValue),i._pendingChange=!1)})}const k_e={provide:jo,useExisting:ki(()=>Pb)},Rb=(()=>Promise.resolve())();let Pb=(()=>{class n extends jo{constructor(t,i,r){super(),this.callSetDisabledState=r,this.submitted=!1,this._directives=new Set,this.ngSubmit=new gi,this.form=new RO({},EO(t),TO(i))}ngAfterViewInit(){this._setUpdateStrategy()}get formDirective(){return this}get control(){return this.form}get path(){return[]}get controls(){return this.form.controls}addControl(t){Rb.then(()=>{const i=this._findContainer(t.path);t.control=i.registerControl(t.name,t.control),Db(t.control,t,this.callSetDisabledState),t.control.updateValueAndValidity({emitEvent:!1}),this._directives.add(t)})}getControl(t){return this.form.get(t.path)}removeControl(t){Rb.then(()=>{const i=this._findContainer(t.path);i&&i.removeControl(t.name),this._directives.delete(t)})}addFormGroup(t){Rb.then(()=>{const i=this._findContainer(t.path),r=new RO({});d$(r,t),i.registerControl(t.name,r),r.updateValueAndValidity({emitEvent:!1})})}removeFormGroup(t){Rb.then(()=>{const i=this._findContainer(t.path);i&&i.removeControl(t.name)})}getFormGroup(t){return this.form.get(t.path)}updateModel(t,i){Rb.then(()=>{this.form.get(t.path).setValue(i)})}setValue(t){this.control.setValue(t)}onSubmit(t){return this.submitted=!0,h$(this.form,this._directives),this.ngSubmit.emit(t),"dialog"===t?.target?.method}onReset(){this.resetForm()}resetForm(t=void 0){this.form.reset(t),this.submitted=!1}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.form._updateOn=this.options.updateOn)}_findContainer(t){return t.pop(),t.length?this.form.get(t):this.form}static{this.\u0275fac=function(i){return new(i||n)(J(Eo,10),J(nh,10),J(a_,8))}}static{this.\u0275dir=St({type:n,selectors:[["form",3,"ngNoForm","",3,"formGroup",""],["ng-form"],["","ngForm",""]],hostBindings:function(i,r){1&i&&qn("submit",function(o){return r.onSubmit(o)})("reset",function(){return r.onReset()})},inputs:{options:["ngFormOptions","options"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[Qi([k_e]),si]})}}return n})();function f$(n,e){const t=n.indexOf(e);t>-1&&n.splice(t,1)}function p$(n){return"object"==typeof n&&null!==n&&2===Object.keys(n).length&&"value"in n&&"disabled"in n}const m$=class extends DO{constructor(e=null,t,i){super(CO(t),MO(i,t)),this.defaultValue=null,this._onChange=[],this._pendingChange=!1,this._applyFormState(e),this._setUpdateStrategy(t),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),iA(t)&&(t.nonNullable||t.initialValueIsDefault)&&(this.defaultValue=p$(e)?e.value:e)}setValue(e,t={}){this.value=this._pendingValue=e,this._onChange.length&&!1!==t.emitModelToViewChange&&this._onChange.forEach(i=>i(this.value,!1!==t.emitViewToModelChange)),this.updateValueAndValidity(t)}patchValue(e,t={}){this.setValue(e,t)}reset(e=this.defaultValue,t={}){this._applyFormState(e),this.markAsPristine(t),this.markAsUntouched(t),this.setValue(this.value,t),this._pendingChange=!1}_updateValue(){}_anyControls(e){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(e){this._onChange.push(e)}_unregisterOnChange(e){f$(this._onChange,e)}registerOnDisabledChange(e){this._onDisabledChange.push(e)}_unregisterOnDisabledChange(e){f$(this._onDisabledChange,e)}_forEachChild(e){}_syncPendingControls(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange)||(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),0))}_applyFormState(e){p$(e)?(this.value=this._pendingValue=e.value,e.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=e}},F_e={provide:Sc,useExisting:ki(()=>FO)},v$=(()=>Promise.resolve())();let FO=(()=>{class n extends Sc{constructor(t,i,r,s,o,a){super(),this._changeDetectorRef=o,this.callSetDisabledState=a,this.control=new m$,this._registered=!1,this.name="",this.update=new gi,this._parent=t,this._setValidators(i),this._setAsyncValidators(r),this.valueAccessor=function NO(n,e){if(!e)return null;let t,i,r;return Array.isArray(e),e.forEach(s=>{s.constructor===ZS?t=s:function R_e(n){return Object.getPrototypeOf(n.constructor)===$f}(s)?i=s:r=s}),r||i||t||null}(0,s)}ngOnChanges(t){if(this._checkForErrors(),!this._registered||"name"in t){if(this._registered&&(this._checkName(),this.formDirective)){const i=t.name.previousValue;this.formDirective.removeControl({name:i,path:this._getPath(i)})}this._setUpControl()}"isDisabled"in t&&this._updateDisabled(t),function OO(n,e){if(!n.hasOwnProperty("model"))return!1;const t=n.model;return!!t.isFirstChange()||!Object.is(e,t.currentValue)}(t,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._getPath(this.name)}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(t){this.viewModel=t,this.update.emit(t)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!(!this.options||!this.options.standalone)}_setUpStandalone(){Db(this.control,this,this.callSetDisabledState),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._isStandalone()||this._checkParentType(),this._checkName()}_checkParentType(){}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),this._isStandalone()}_updateValue(t){v$.then(()=>{this.control.setValue(t,{emitViewToModelChange:!1}),this._changeDetectorRef?.markForCheck()})}_updateDisabled(t){const i=t.isDisabled.currentValue,r=0!==i&&function eg(n){return"boolean"==typeof n?n:null!=n&&"false"!==n}(i);v$.then(()=>{r&&!this.control.disabled?this.control.disable():!r&&this.control.disabled&&this.control.enable(),this._changeDetectorRef?.markForCheck()})}_getPath(t){return this._parent?function sA(n,e){return[...e.path,n]}(t,this._parent):[t]}static{this.\u0275fac=function(i){return new(i||n)(J(jo,9),J(Eo,10),J(nh,10),J(Fl,10),J(fu,8),J(a_,8))}}static{this.\u0275dir=St({type:n,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:["disabled","isDisabled"],model:["ngModel","model"],options:["ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],features:[Qi([F_e]),si,Ps]})}}return n})(),b$=(()=>{class n{static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275mod=ni({type:n})}static{this.\u0275inj=jn({})}}return n})();const G_e={provide:jo,useExisting:ki(()=>kb)};let kb=(()=>{class n extends jo{constructor(t,i,r){super(),this.callSetDisabledState=r,this.submitted=!1,this._onCollectionChange=()=>this._updateDomValue(),this.directives=[],this.form=null,this.ngSubmit=new gi,this._setValidators(t),this._setAsyncValidators(i)}ngOnChanges(t){this._checkFormPresent(),t.hasOwnProperty("form")&&(this._updateValidators(),this._updateDomValue(),this._updateRegistrations(),this._oldForm=this.form)}ngOnDestroy(){this.form&&(lA(this.form,this),this.form._onCollectionChange===this._onCollectionChange&&this.form._registerOnCollectionChange(()=>{}))}get formDirective(){return this}get control(){return this.form}get path(){return[]}addControl(t){const i=this.form.get(t.path);return Db(i,t,this.callSetDisabledState),i.updateValueAndValidity({emitEvent:!1}),this.directives.push(t),i}getControl(t){return this.form.get(t.path)}removeControl(t){oA(t.control||null,t,!1),function P_e(n,e){const t=n.indexOf(e);t>-1&&n.splice(t,1)}(this.directives,t)}addFormGroup(t){this._setUpFormContainer(t)}removeFormGroup(t){this._cleanUpFormContainer(t)}getFormGroup(t){return this.form.get(t.path)}addFormArray(t){this._setUpFormContainer(t)}removeFormArray(t){this._cleanUpFormContainer(t)}getFormArray(t){return this.form.get(t.path)}updateModel(t,i){this.form.get(t.path).setValue(i)}onSubmit(t){return this.submitted=!0,h$(this.form,this.directives),this.ngSubmit.emit(t),"dialog"===t?.target?.method}onReset(){this.resetForm()}resetForm(t=void 0){this.form.reset(t),this.submitted=!1}_updateDomValue(){this.directives.forEach(t=>{const i=t.control,r=this.form.get(t.path);i!==r&&(oA(i||null,t),(n=>n instanceof m$)(r)&&(Db(r,t,this.callSetDisabledState),t.control=r))}),this.form._updateTreeValidity({emitEvent:!1})}_setUpFormContainer(t){const i=this.form.get(t.path);d$(i,t),i.updateValueAndValidity({emitEvent:!1})}_cleanUpFormContainer(t){if(this.form){const i=this.form.get(t.path);i&&function M_e(n,e){return lA(n,e)}(i,t)&&i.updateValueAndValidity({emitEvent:!1})}}_updateRegistrations(){this.form._registerOnCollectionChange(this._onCollectionChange),this._oldForm&&this._oldForm._registerOnCollectionChange(()=>{})}_updateValidators(){PO(this.form,this),this._oldForm&&lA(this._oldForm,this)}_checkFormPresent(){}static{this.\u0275fac=function(i){return new(i||n)(J(Eo,10),J(nh,10),J(a_,8))}}static{this.\u0275dir=St({type:n,selectors:[["","formGroup",""]],hostBindings:function(i,r){1&i&&qn("submit",function(o){return r.onSubmit(o)})("reset",function(){return r.onReset()})},inputs:{form:["formGroup","form"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[Qi([G_e]),si,Ps]})}}return n})(),ave=(()=>{class n{static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275mod=ni({type:n})}static{this.\u0275inj=jn({imports:[b$]})}}return n})(),cve=(()=>{class n{static withConfig(t){return{ngModule:n,providers:[{provide:a_,useValue:t.callSetDisabledState??rA}]}}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275mod=ni({type:n})}static{this.\u0275inj=jn({imports:[ave]})}}return n})();const uve=["trigger"],dve=["panel"];function hve(n,e){if(1&n&&(at(0,"span",10),zn(1),ct()),2&n){const t=pn();_t(1),hu(t.placeholder)}}function fve(n,e){if(1&n&&(at(0,"span",14),zn(1),ct()),2&n){const t=pn(2);_t(1),hu(t.triggerValue)}}function pve(n,e){1&n&&qi(0,0,["*ngSwitchCase","true"])}function mve(n,e){1&n&&(at(0,"span",11),Yt(1,fve,2,1,"span",12),Yt(2,pve,1,0,"ng-content",13),ct()),2&n&&(gt("ngSwitch",!!pn().customTrigger),_t(2),gt("ngSwitchCase",!0))}function gve(n,e){if(1&n){const t=Dl();Zc(),dm(),at(0,"div",15,16),qn("@transformPanel.done",function(r){return Ts(t),Ys(pn()._panelDoneAnimatingStream.next(r.toState))})("keydown",function(r){return Ts(t),Ys(pn()._handleKeydown(r))}),qi(2,1),ct()}if(2&n){const t=pn();(function IB(n,e,t){Pl(Qr,lc,Bm(Ke(),n,e,t),!0)})("mat-mdc-select-panel mdc-menu-surface mdc-menu-surface--open ",t._getPanelTheme(),""),gt("ngClass",t.panelClass)("@transformPanel","showing"),or("id",t.id+"-panel")("aria-multiselectable",t.multiple)("aria-label",t.ariaLabel||null)("aria-labelledby",t._getPanelAriaLabelledby())}}const _ve=[[["mat-select-trigger"]],"*"],vve=["mat-select-trigger","*"],yve={transformPanelWrap:vb("transformPanelWrap",[Hf("* => void",zfe("@transformPanel",[Bfe()],{optional:!0}))]),transformPanel:vb("transformPanel",[yb("void",_l({opacity:0,transform:"scale(1, 0.8)"})),Hf("void => showing",t_("120ms cubic-bezier(0, 0, 0.2, 1)",_l({opacity:1,transform:"scale(1, 1)"}))),Hf("* => void",t_("100ms linear",_l({opacity:0})))])};let V$=0;const U$=new Fe("mat-select-scroll-strategy"),xve=new Fe("MAT_SELECT_CONFIG"),wve={provide:U$,deps:[QS],useFactory:function bve(n){return()=>n.scrollStrategies.reposition()}},Eve=new Fe("MatSelectTrigger");class Tve{constructor(e,t){this.source=e,this.value=t}}const Sve=hme(fme(dme(zW(class{constructor(n,e,t,i,r){this._elementRef=n,this._defaultErrorStateMatcher=e,this._parentForm=t,this._parentFormGroup=i,this.ngControl=r,this.stateChanges=new Q}}))));let Ave=(()=>{class n extends Sve{get focused(){return this._focused||this._panelOpen}get placeholder(){return this._placeholder}set placeholder(t){this._placeholder=t,this.stateChanges.next()}get required(){return this._required??this.ngControl?.control?.hasValidator(Lj.required)??!1}set required(t){this._required=xr(t),this.stateChanges.next()}get multiple(){return this._multiple}set multiple(t){this._multiple=xr(t)}get disableOptionCentering(){return this._disableOptionCentering}set disableOptionCentering(t){this._disableOptionCentering=xr(t)}get compareWith(){return this._compareWith}set compareWith(t){this._compareWith=t,this._selectionModel&&this._initializeSelection()}get value(){return this._value}set value(t){this._assignValue(t)&&this._onChange(t)}get typeaheadDebounceInterval(){return this._typeaheadDebounceInterval}set typeaheadDebounceInterval(t){this._typeaheadDebounceInterval=r_(t)}get id(){return this._id}set id(t){this._id=t||this._uid,this.stateChanges.next()}constructor(t,i,r,s,o,a,l,c,u,d,p,m,v,x){super(o,s,l,c,d),this._viewportRuler=t,this._changeDetectorRef=i,this._ngZone=r,this._dir=a,this._parentFormField=u,this._liveAnnouncer=v,this._defaultOptions=x,this._panelOpen=!1,this._compareWith=(b,w)=>b===w,this._uid="mat-select-"+V$++,this._triggerAriaLabelledBy=null,this._destroy=new Q,this._onChange=()=>{},this._onTouched=()=>{},this._valueId="mat-select-value-"+V$++,this._panelDoneAnimatingStream=new Q,this._overlayPanelClass=this._defaultOptions?.overlayPanelClass||"",this._focused=!1,this.controlType="mat-select",this._multiple=!1,this._disableOptionCentering=this._defaultOptions?.disableOptionCentering??!1,this.ariaLabel="",this.optionSelectionChanges=q1(()=>{const b=this.options;return b?b.changes.pipe(pf(b),Mt(()=>X(...b.map(w=>w.onSelectionChange)))):this._ngZone.onStable.pipe(ml(1),Mt(()=>this.optionSelectionChanges))}),this.openedChange=new gi,this._openedStream=this.openedChange.pipe(Is(b=>b),Ge(()=>{})),this._closedStream=this.openedChange.pipe(Is(b=>!b),Ge(()=>{})),this.selectionChange=new gi,this.valueChange=new gi,this._trackedModal=null,this.ngControl&&(this.ngControl.valueAccessor=this),null!=x?.typeaheadDebounceInterval&&(this._typeaheadDebounceInterval=x.typeaheadDebounceInterval),this._scrollStrategyFactory=m,this._scrollStrategy=this._scrollStrategyFactory(),this.tabIndex=parseInt(p)||0,this.id=this.id}ngOnInit(){this._selectionModel=new wO(this.multiple),this.stateChanges.next(),this._panelDoneAnimatingStream.pipe(Zi(),zo(this._destroy)).subscribe(()=>this._panelDoneAnimating(this.panelOpen))}ngAfterContentInit(){this._initKeyManager(),this._selectionModel.changed.pipe(zo(this._destroy)).subscribe(t=>{t.added.forEach(i=>i.select()),t.removed.forEach(i=>i.deselect())}),this.options.changes.pipe(pf(null),zo(this._destroy)).subscribe(()=>{this._resetOptions(),this._initializeSelection()})}ngDoCheck(){const t=this._getTriggerAriaLabelledby(),i=this.ngControl;if(t!==this._triggerAriaLabelledBy){const r=this._elementRef.nativeElement;this._triggerAriaLabelledBy=t,t?r.setAttribute("aria-labelledby",t):r.removeAttribute("aria-labelledby")}i&&(this._previousControl!==i.control&&(void 0!==this._previousControl&&null!==i.disabled&&i.disabled!==this.disabled&&(this.disabled=i.disabled),this._previousControl=i.control),this.updateErrorState())}ngOnChanges(t){(t.disabled||t.userAriaDescribedBy)&&this.stateChanges.next(),t.typeaheadDebounceInterval&&this._keyManager&&this._keyManager.withTypeAhead(this._typeaheadDebounceInterval)}ngOnDestroy(){this._keyManager?.destroy(),this._destroy.next(),this._destroy.complete(),this.stateChanges.complete(),this._clearFromModal()}toggle(){this.panelOpen?this.close():this.open()}open(){this._canOpen()&&(this._applyModalPanelOwnership(),this._panelOpen=!0,this._keyManager.withHorizontalOrientation(null),this._highlightCorrectOption(),this._changeDetectorRef.markForCheck())}_applyModalPanelOwnership(){const t=this._elementRef.nativeElement.closest('body > .cdk-overlay-container [aria-modal="true"]');if(!t)return;const i=`${this.id}-panel`;this._trackedModal&&kW(this._trackedModal,"aria-owns",i),function Ope(n,e,t){const i=OW(n,e);i.some(r=>r.trim()==t.trim())||(i.push(t.trim()),n.setAttribute(e,i.join(" ")))}(t,"aria-owns",i),this._trackedModal=t}_clearFromModal(){this._trackedModal&&(kW(this._trackedModal,"aria-owns",`${this.id}-panel`),this._trackedModal=null)}close(){this._panelOpen&&(this._panelOpen=!1,this._keyManager.withHorizontalOrientation(this._isRtl()?"rtl":"ltr"),this._changeDetectorRef.markForCheck(),this._onTouched())}writeValue(t){this._assignValue(t)}registerOnChange(t){this._onChange=t}registerOnTouched(t){this._onTouched=t}setDisabledState(t){this.disabled=t,this._changeDetectorRef.markForCheck(),this.stateChanges.next()}get panelOpen(){return this._panelOpen}get selected(){return this.multiple?this._selectionModel?.selected||[]:this._selectionModel?.selected[0]}get triggerValue(){if(this.empty)return"";if(this._multiple){const t=this._selectionModel.selected.map(i=>i.viewValue);return this._isRtl()&&t.reverse(),t.join(", ")}return this._selectionModel.selected[0].viewValue}_isRtl(){return!!this._dir&&"rtl"===this._dir.value}_handleKeydown(t){this.disabled||(this.panelOpen?this._handleOpenKeydown(t):this._handleClosedKeydown(t))}_handleClosedKeydown(t){const i=t.keyCode,r=40===i||38===i||37===i||39===i,s=13===i||32===i,o=this._keyManager;if(!o.isTyping()&&s&&!i_(t)||(this.multiple||t.altKey)&&r)t.preventDefault(),this.open();else if(!this.multiple){const a=this.selected;o.onKeydown(t);const l=this.selected;l&&a!==l&&this._liveAnnouncer.announce(l.viewValue,1e4)}}_handleOpenKeydown(t){const i=this._keyManager,r=t.keyCode,s=40===r||38===r,o=i.isTyping();if(s&&t.altKey)t.preventDefault(),this.close();else if(o||13!==r&&32!==r||!i.activeItem||i_(t))if(!o&&this._multiple&&65===r&&t.ctrlKey){t.preventDefault();const a=this.options.some(l=>!l.disabled&&!l.selected);this.options.forEach(l=>{l.disabled||(a?l.select():l.deselect())})}else{const a=i.activeItemIndex;i.onKeydown(t),this._multiple&&s&&t.shiftKey&&i.activeItem&&i.activeItemIndex!==a&&i.activeItem._selectViaInteraction()}else t.preventDefault(),i.activeItem._selectViaInteraction()}_onFocus(){this.disabled||(this._focused=!0,this.stateChanges.next())}_onBlur(){this._focused=!1,this._keyManager?.cancelTypeahead(),!this.disabled&&!this.panelOpen&&(this._onTouched(),this._changeDetectorRef.markForCheck(),this.stateChanges.next())}_onAttached(){this._overlayDir.positionChange.pipe(ml(1)).subscribe(()=>{this._changeDetectorRef.detectChanges(),this._positioningSettled()})}_getPanelTheme(){return this._parentFormField?`mat-${this._parentFormField.color}`:""}get empty(){return!this._selectionModel||this._selectionModel.isEmpty()}_initializeSelection(){Promise.resolve().then(()=>{this.ngControl&&(this._value=this.ngControl.value),this._setSelectionByValue(this._value),this.stateChanges.next()})}_setSelectionByValue(t){if(this.options.forEach(i=>i.setInactiveStyles()),this._selectionModel.clear(),this.multiple&&t)Array.isArray(t),t.forEach(i=>this._selectOptionByValue(i)),this._sortValues();else{const i=this._selectOptionByValue(t);i?this._keyManager.updateActiveItem(i):this.panelOpen||this._keyManager.updateActiveItem(-1)}this._changeDetectorRef.markForCheck()}_selectOptionByValue(t){const i=this.options.find(r=>{if(this._selectionModel.isSelected(r))return!1;try{return null!=r.value&&this._compareWith(r.value,t)}catch{return!1}});return i&&this._selectionModel.select(i),i}_assignValue(t){return!!(t!==this._value||this._multiple&&Array.isArray(t))&&(this.options&&this._setSelectionByValue(t),this._value=t,!0)}_skipPredicate(t){return t.disabled}_initKeyManager(){this._keyManager=new Lpe(this.options).withTypeAhead(this._typeaheadDebounceInterval).withVerticalOrientation().withHorizontalOrientation(this._isRtl()?"rtl":"ltr").withHomeAndEnd().withPageUpDown().withAllowedModifierKeys(["shiftKey"]).skipPredicate(this._skipPredicate),this._keyManager.tabOut.subscribe(()=>{this.panelOpen&&(!this.multiple&&this._keyManager.activeItem&&this._keyManager.activeItem._selectViaInteraction(),this.focus(),this.close())}),this._keyManager.change.subscribe(()=>{this._panelOpen&&this.panel?this._scrollOptionIntoView(this._keyManager.activeItemIndex||0):!this._panelOpen&&!this.multiple&&this._keyManager.activeItem&&this._keyManager.activeItem._selectViaInteraction()})}_resetOptions(){const t=X(this.options.changes,this._destroy);this.optionSelectionChanges.pipe(zo(t)).subscribe(i=>{this._onSelect(i.source,i.isUserInput),i.isUserInput&&!this.multiple&&this._panelOpen&&(this.close(),this.focus())}),X(...this.options.map(i=>i._stateChanges)).pipe(zo(t)).subscribe(()=>{this._changeDetectorRef.detectChanges(),this.stateChanges.next()})}_onSelect(t,i){const r=this._selectionModel.isSelected(t);null!=t.value||this._multiple?(r!==t.selected&&(t.selected?this._selectionModel.select(t):this._selectionModel.deselect(t)),i&&this._keyManager.setActiveItem(t),this.multiple&&(this._sortValues(),i&&this.focus())):(t.deselect(),this._selectionModel.clear(),null!=this.value&&this._propagateChanges(t.value)),r!==this._selectionModel.isSelected(t)&&this._propagateChanges(),this.stateChanges.next()}_sortValues(){if(this.multiple){const t=this.options.toArray();this._selectionModel.sort((i,r)=>this.sortComparator?this.sortComparator(i,r,t):t.indexOf(i)-t.indexOf(r)),this.stateChanges.next()}}_propagateChanges(t){let i=null;i=this.multiple?this.selected.map(r=>r.value):this.selected?this.selected.value:t,this._value=i,this.valueChange.emit(i),this._onChange(i),this.selectionChange.emit(this._getChangeEvent(i)),this._changeDetectorRef.markForCheck()}_highlightCorrectOption(){if(this._keyManager)if(this.empty){let t=-1;for(let i=0;i<this.options.length;i++)if(!this.options.get(i).disabled){t=i;break}this._keyManager.setActiveItem(t)}else this._keyManager.setActiveItem(this._selectionModel.selected[0])}_canOpen(){return!this._panelOpen&&!this.disabled&&this.options?.length>0}focus(t){this._elementRef.nativeElement.focus(t)}_getPanelAriaLabelledby(){if(this.ariaLabel)return null;const t=this._parentFormField?.getLabelId();return this.ariaLabelledby?(t?t+" ":"")+this.ariaLabelledby:t}_getAriaActiveDescendant(){return this.panelOpen&&this._keyManager&&this._keyManager.activeItem?this._keyManager.activeItem.id:null}_getTriggerAriaLabelledby(){if(this.ariaLabel)return null;const t=this._parentFormField?.getLabelId();let i=(t?t+" ":"")+this._valueId;return this.ariaLabelledby&&(i+=" "+this.ariaLabelledby),i}_panelDoneAnimating(t){this.openedChange.emit(t)}setDescribedByIds(t){t.length?this._elementRef.nativeElement.setAttribute("aria-describedby",t.join(" ")):this._elementRef.nativeElement.removeAttribute("aria-describedby")}onContainerClick(){this.focus(),this.open()}get shouldLabelFloat(){return this._panelOpen||!this.empty||this._focused&&!!this._placeholder}static{this.\u0275fac=function(i){return new(i||n)(J(_O),J(fu),J(mn),J(HW),J(Di),J(jS,8),J(Pb,8),J(kb,8),J(pO,8),J(Sc,10),vd("tabindex"),J(U$),J(Qpe),J(xve,8))}}static{this.\u0275dir=St({type:n,viewQuery:function(i,r){if(1&i&&(Vo(uve,5),Vo(dve,5),Vo(Pj,5)),2&i){let s;Ui(s=Bi())&&(r.trigger=s.first),Ui(s=Bi())&&(r.panel=s.first),Ui(s=Bi())&&(r._overlayDir=s.first)}},inputs:{userAriaDescribedBy:["aria-describedby","userAriaDescribedBy"],panelClass:"panelClass",placeholder:"placeholder",required:"required",multiple:"multiple",disableOptionCentering:"disableOptionCentering",compareWith:"compareWith",value:"value",ariaLabel:["aria-label","ariaLabel"],ariaLabelledby:["aria-labelledby","ariaLabelledby"],errorStateMatcher:"errorStateMatcher",typeaheadDebounceInterval:"typeaheadDebounceInterval",sortComparator:"sortComparator",id:"id"},outputs:{openedChange:"openedChange",_openedStream:"opened",_closedStream:"closed",selectionChange:"selectionChange",valueChange:"valueChange"},features:[si,Ps]})}}return n})(),Ive=(()=>{class n extends Ave{constructor(){super(...arguments),this.panelWidth=this._defaultOptions&&typeof this._defaultOptions.panelWidth<"u"?this._defaultOptions.panelWidth:"auto",this._positions=[{originX:"start",originY:"bottom",overlayX:"start",overlayY:"top"},{originX:"end",originY:"bottom",overlayX:"end",overlayY:"top"},{originX:"start",originY:"top",overlayX:"start",overlayY:"bottom",panelClass:"mat-mdc-select-panel-above"},{originX:"end",originY:"top",overlayX:"end",overlayY:"bottom",panelClass:"mat-mdc-select-panel-above"}],this._hideSingleSelectionIndicator=this._defaultOptions?.hideSingleSelectionIndicator??!1,this._skipPredicate=t=>!this.panelOpen&&t.disabled}get shouldLabelFloat(){return this.panelOpen||!this.empty||this.focused&&!!this.placeholder}ngOnInit(){super.ngOnInit(),this._viewportRuler.change().pipe(zo(this._destroy)).subscribe(()=>{this.panelOpen&&(this._overlayWidth=this._getOverlayWidth(this._preferredOverlayOrigin),this._changeDetectorRef.detectChanges())})}open(){this._parentFormField&&(this._preferredOverlayOrigin=this._parentFormField.getConnectedOverlayOrigin()),this._overlayWidth=this._getOverlayWidth(this._preferredOverlayOrigin),super.open(),this.stateChanges.next()}close(){super.close(),this.stateChanges.next()}_scrollOptionIntoView(t){const i=this.options.toArray()[t];if(i){const r=this.panel.nativeElement,s=function Tme(n,e,t){if(t.length){let i=e.toArray(),r=t.toArray(),s=0;for(let o=0;o<n+1;o++)i[o].group&&i[o].group===r[s]&&s++;return s}return 0}(t,this.options,this.optionGroups),o=i._getHostElement();r.scrollTop=0===t&&1===s?0:function Sme(n,e,t,i){return n<t?n:n+e>t+i?Math.max(0,n-i+e):t}(o.offsetTop,o.offsetHeight,r.scrollTop,r.offsetHeight)}}_positioningSettled(){this._scrollOptionIntoView(this._keyManager.activeItemIndex||0)}_getChangeEvent(t){return new Tve(this,t)}_getOverlayWidth(t){return"auto"===this.panelWidth?(t instanceof xO?t.elementRef:t||this._elementRef).nativeElement.getBoundingClientRect().width:null===this.panelWidth?"":this.panelWidth}get hideSingleSelectionIndicator(){return this._hideSingleSelectionIndicator}set hideSingleSelectionIndicator(t){this._hideSingleSelectionIndicator=xr(t),this._syncParentProperties()}_syncParentProperties(){if(this.options)for(const t of this.options)t._changeDetectorRef.markForCheck()}static{this.\u0275fac=function(){let t;return function(r){return(t||(t=Or(n)))(r||n)}}()}static{this.\u0275cmp=hr({type:n,selectors:[["mat-select"]],contentQueries:function(i,r,s){if(1&i&&(Vs(s,Eve,5),Vs(s,ZW,5),Vs(s,QW,5)),2&i){let o;Ui(o=Bi())&&(r.customTrigger=o.first),Ui(o=Bi())&&(r.options=o),Ui(o=Bi())&&(r.optionGroups=o)}},hostAttrs:["role","combobox","aria-autocomplete","none","aria-haspopup","listbox","ngSkipHydration","",1,"mat-mdc-select"],hostVars:19,hostBindings:function(i,r){1&i&&qn("keydown",function(o){return r._handleKeydown(o)})("focus",function(){return r._onFocus()})("blur",function(){return r._onBlur()}),2&i&&(or("id",r.id)("tabindex",r.tabIndex)("aria-controls",r.panelOpen?r.id+"-panel":null)("aria-expanded",r.panelOpen)("aria-label",r.ariaLabel||null)("aria-required",r.required.toString())("aria-disabled",r.disabled.toString())("aria-invalid",r.errorState)("aria-activedescendant",r._getAriaActiveDescendant()),_r("mat-mdc-select-disabled",r.disabled)("mat-mdc-select-invalid",r.errorState)("mat-mdc-select-required",r.required)("mat-mdc-select-empty",r.empty)("mat-mdc-select-multiple",r.multiple))},inputs:{disabled:"disabled",disableRipple:"disableRipple",tabIndex:"tabIndex",panelWidth:"panelWidth",hideSingleSelectionIndicator:"hideSingleSelectionIndicator"},exportAs:["matSelect"],features:[Qi([{provide:fO,useExisting:n},{provide:YW,useExisting:n}]),si],ngContentSelectors:vve,decls:11,vars:10,consts:[["cdk-overlay-origin","",1,"mat-mdc-select-trigger",3,"click"],["fallbackOverlayOrigin","cdkOverlayOrigin","trigger",""],[1,"mat-mdc-select-value",3,"ngSwitch"],["class","mat-mdc-select-placeholder mat-mdc-select-min-line",4,"ngSwitchCase"],["class","mat-mdc-select-value-text",3,"ngSwitch",4,"ngSwitchCase"],[1,"mat-mdc-select-arrow-wrapper"],[1,"mat-mdc-select-arrow"],["viewBox","0 0 24 24","width","24px","height","24px","focusable","false","aria-hidden","true"],["d","M7 10l5 5 5-5z"],["cdk-connected-overlay","","cdkConnectedOverlayLockPosition","","cdkConnectedOverlayHasBackdrop","","cdkConnectedOverlayBackdropClass","cdk-overlay-transparent-backdrop",3,"cdkConnectedOverlayPanelClass","cdkConnectedOverlayScrollStrategy","cdkConnectedOverlayOrigin","cdkConnectedOverlayOpen","cdkConnectedOverlayPositions","cdkConnectedOverlayWidth","backdropClick","attach","detach"],[1,"mat-mdc-select-placeholder","mat-mdc-select-min-line"],[1,"mat-mdc-select-value-text",3,"ngSwitch"],["class","mat-mdc-select-min-line",4,"ngSwitchDefault"],[4,"ngSwitchCase"],[1,"mat-mdc-select-min-line"],["role","listbox","tabindex","-1",3,"ngClass","keydown"],["panel",""]],template:function(i,r){if(1&i&&(dl(_ve),at(0,"div",0,1),qn("click",function(){return r.toggle()}),at(3,"div",2),Yt(4,hve,2,1,"span",3),Yt(5,mve,3,2,"span",4),ct(),at(6,"div",5)(7,"div",6),Zc(),at(8,"svg",7),Ri(9,"path",8),ct()()()(),Yt(10,gve,3,9,"ng-template",9),qn("backdropClick",function(){return r.close()})("attach",function(){return r._onAttached()})("detach",function(){return r.close()})),2&i){const s=ul(1);_t(3),gt("ngSwitch",r.empty),or("id",r._valueId),_t(1),gt("ngSwitchCase",!0),_t(1),gt("ngSwitchCase",!1),_t(5),gt("cdkConnectedOverlayPanelClass",r._overlayPanelClass)("cdkConnectedOverlayScrollStrategy",r._scrollStrategy)("cdkConnectedOverlayOrigin",r._preferredOverlayOrigin||s)("cdkConnectedOverlayOpen",r.panelOpen)("cdkConnectedOverlayPositions",r._positions)("cdkConnectedOverlayWidth",r._overlayWidth)}},dependencies:[tz,n0,R1,sz,Pj,xO],styles:['.mat-mdc-select{display:inline-block;width:100%;outline:none;-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased;color:var(--mat-select-enabled-trigger-text-color);font-family:var(--mat-select-trigger-text-font);line-height:var(--mat-select-trigger-text-line-height);font-size:var(--mat-select-trigger-text-size);font-weight:var(--mat-select-trigger-text-weight);letter-spacing:var(--mat-select-trigger-text-tracking)}.mat-mdc-select-disabled{color:var(--mat-select-disabled-trigger-text-color)}.mat-mdc-select-trigger{display:inline-flex;align-items:center;cursor:pointer;position:relative;box-sizing:border-box;width:100%}.mat-mdc-select-disabled .mat-mdc-select-trigger{-webkit-user-select:none;user-select:none;cursor:default}.mat-mdc-select-value{width:100%;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.mat-mdc-select-value-text{white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.mat-mdc-select-arrow-wrapper{height:24px;flex-shrink:0;display:inline-flex;align-items:center}.mat-form-field-appearance-fill .mat-mdc-select-arrow-wrapper{transform:translateY(-8px)}.mat-form-field-appearance-fill .mdc-text-field--no-label .mat-mdc-select-arrow-wrapper{transform:none}.mat-mdc-select-arrow{width:10px;height:5px;position:relative;color:var(--mat-select-enabled-arrow-color)}.mat-mdc-form-field.mat-focused .mat-mdc-select-arrow{color:var(--mat-select-focused-arrow-color)}.mat-mdc-form-field .mat-mdc-select.mat-mdc-select-invalid .mat-mdc-select-arrow{color:var(--mat-select-invalid-arrow-color)}.mat-mdc-form-field .mat-mdc-select.mat-mdc-select-disabled .mat-mdc-select-arrow{color:var(--mat-select-disabled-arrow-color)}.mat-mdc-select-arrow svg{fill:currentColor;position:absolute;top:50%;left:50%;transform:translate(-50%, -50%)}.cdk-high-contrast-active .mat-mdc-select-arrow svg{fill:CanvasText}.mat-mdc-select-disabled .cdk-high-contrast-active .mat-mdc-select-arrow svg{fill:GrayText}div.mat-mdc-select-panel{box-shadow:0px 5px 5px -3px rgba(0, 0, 0, 0.2), 0px 8px 10px 1px rgba(0, 0, 0, 0.14), 0px 3px 14px 2px rgba(0, 0, 0, 0.12);width:100%;max-height:275px;outline:0;overflow:auto;padding:8px 0;border-radius:4px;box-sizing:border-box;position:static;background-color:var(--mat-select-panel-background-color)}.cdk-high-contrast-active div.mat-mdc-select-panel{outline:solid 1px}.cdk-overlay-pane:not(.mat-mdc-select-panel-above) div.mat-mdc-select-panel{border-top-left-radius:0;border-top-right-radius:0;transform-origin:top center}.mat-mdc-select-panel-above div.mat-mdc-select-panel{border-bottom-left-radius:0;border-bottom-right-radius:0;transform-origin:bottom center}.mat-mdc-select-placeholder{transition:color 400ms 133.3333333333ms cubic-bezier(0.25, 0.8, 0.25, 1);color:var(--mat-select-placeholder-text-color)}._mat-animation-noopable .mat-mdc-select-placeholder{transition:none}.mat-form-field-hide-placeholder .mat-mdc-select-placeholder{color:rgba(0,0,0,0);-webkit-text-fill-color:rgba(0,0,0,0);transition:none;display:block}.mat-mdc-form-field-type-mat-select:not(.mat-form-field-disabled) .mat-mdc-text-field-wrapper{cursor:pointer}.mat-mdc-form-field-type-mat-select.mat-form-field-appearance-fill .mat-mdc-floating-label{max-width:calc(100% - 18px)}.mat-mdc-form-field-type-mat-select.mat-form-field-appearance-fill .mdc-floating-label--float-above{max-width:calc(100% / 0.75 - 24px)}.mat-mdc-form-field-type-mat-select.mat-form-field-appearance-outline .mdc-notched-outline__notch{max-width:calc(100% - 60px)}.mat-mdc-form-field-type-mat-select.mat-form-field-appearance-outline .mdc-text-field--label-floating .mdc-notched-outline__notch{max-width:calc(100% - 24px)}.mat-mdc-select-min-line:empty::before{content:" ";white-space:pre;width:1px;display:inline-block;visibility:hidden}'],encapsulation:2,data:{animation:[yve.transformPanel]},changeDetection:0})}}return n})(),B$=(()=>{class n{static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275mod=ni({type:n})}static{this.\u0275inj=jn({providers:[wve],imports:[ff,u_e,JW,us,vO,Ab,JW,us]})}}return n})();function Cve(n,e){if(1&n&&(at(0,"p"),zn(1),at(2,"strong"),zn(3),ct()()),2&n){const t=e.$implicit,i=e.index;_t(1),aa(" Selected File ",i+1,": "),_t(2),hu(t.name)}}function Mve(n,e){if(1&n&&(at(0,"div",16),Yt(1,Cve,4,2,"p",17),ct()),2&n){const t=pn();_t(1),gt("ngForOf",t.selectedFiles)}}function Dve(n,e){if(1&n&&(at(0,"mat-option",18),zn(1),ct()),2&n){const t=e.$implicit;gt("value",t.value),_t(1),aa(" ",t.label," ")}}function Rve(n,e){if(1&n&&(at(0,"div",19)(1,"p"),zn(2),ct(),Ri(3,"mat-progress-bar",20),ct()),2&n){const t=e.$implicit,i=e.index,r=pn();_t(2),RD("",r.selectedFiles[i]?r.selectedFiles[i].name:"",": ",t,"%"),_t(1),gt("value",t)}}function Pve(n,e){if(1&n){const t=Dl();at(0,"button",21),qn("click",function(){return Ts(t),Ys(pn().cancelUpload())}),zn(1,"Cancel Upload"),ct()}}let kve=(()=>{class n{constructor(t,i,r){this.firestore=t,this.http=i,this.notificationService=r,this.selectedFiles=[],this.selectedExpiration=300,this.uploadProgressArray=[],this.uploading=!1,this.isDragOver=!1,this.uploaded=new gi,this.expirationOptions=[{label:"1 mint",value:60},{label:"5 mint",value:300},{label:"10 mint",value:600},{label:"30 mint",value:1800}],this.sessionToken=null,this.getIPAddress(),this.sessionToken=sessionStorage.getItem("Token"),null==this.sessionToken&&(this.sessionToken=this.generateRandomToken(),sessionStorage.setItem("Token",this.sessionToken))}generateRandomToken(){return Math.random().toString(36)}onFileSelect(t){this.selectedFiles=Array.from(t.target.files)}onDragOver(t){t.preventDefault(),this.isDragOver=!0}onDragLeave(t){t.preventDefault(),this.isDragOver=!1}onDrop(t){t.preventDefault(),this.isDragOver=!1,t.dataTransfer&&t.dataTransfer.files.length>0&&(this.selectedFiles=Array.from(t.dataTransfer.files),t.dataTransfer.clearData())}getIPAddress(){this.http.get("https://ipinfo.io/json").subscribe(t=>{this.userIpAddress=t.ip},t=>{const i=this.generateRandomIp();this.userIpAddress=i})}generateRandomIp(){return`${this.getRandom(1,255)}.${this.getRandom(0,255)}.${this.getRandom(0,255)}.${this.getRandom(1,255)}`}getRandom(t,i){return Math.floor(Math.random()*(i-t+1))+t}uploadFiles(){0!==this.selectedFiles.length&&(this.uploading=!0,this.uploadProgressArray=this.selectedFiles.map(()=>0),this.uploadNext(0))}uploadNext(t){var i=this;if(t>=this.selectedFiles.length)return this.uploading=!1,this.notificationService.showSuccess("All files uploaded successfully!"),this.uploaded.emit(),void(this.selectedFiles=[]);const r=this.selectedFiles[t],s=new FileReader;s.onprogress=o=>{o.lengthComputable&&(this.uploadProgressArray[t]=Math.round(o.loaded/o.total*50))},s.onload=function(){var o=(0,Me.A)(function*(a){const l=a.target.result.split(",")[1],c=new Date;c.setSeconds(c.getSeconds()+i.selectedExpiration),yield i.firestore.collection("files").add({name:r.name,size:r.size,createdAt:new Date,fileData:l,expiresAt:c.getTime(),ipAddress:i.userIpAddress,Token:i.sessionToken}),i.uploadProgressArray[t]=100,setTimeout(()=>{i.uploadProgressArray=[],i.uploadNext(t+1)})});return function(a){return o.apply(this,arguments)}}(),s.onerror=()=>{this.notificationService.showError(`Error reading file: ${r.name}`),this.uploadNext(t+1)},s.readAsDataURL(r)}cancelUpload(){this.uploading=!1,this.uploadProgressArray=[]}static{this.\u0275fac=function(i){return new(i||n)(J(pb),J(gb),J(SW))}}static{this.\u0275cmp=hr({type:n,selectors:[["app-upload"]],outputs:{uploaded:"uploaded"},decls:25,vars:8,consts:[[1,"upload-container"],[1,"card"],[1,"upload-area",3,"dragover","dragleave","drop"],[1,"box__input"],["xmlns","http://www.w3.org/2000/svg","width","50","height","43","viewBox","0 0 50 43",1,"box__icon"],["d","M48.4 26.5c-.9 0-1.7.7-1.7 1.7v11.6h-43.3v-11.6c0-.9-.7-1.7-1.7-1.7s-1.7.7-1.7 1.7v13.2c0 .9.7 1.7 1.7 1.7h46.7c.9 0 1.7-.7 1.7-1.7v-13.2c0-1-.7-1.7-1.7-1.7zm-24.5 6.1c.3.3.8.5 1.2.5.4 0 .9-.2 1.2-.5l10-11.6c.7-.7.7-1.7 0-2.4s-1.7-.7-2.4 0l-7.1 8.3v-25.3c0-.9-.7-1.7-1.7-1.7s-1.7.7-1.7 1.7v25.3l-7.1-8.3c-.7-.7-1.7-.7-2.4 0s-.7 1.7 0 2.4l10 11.6z"],["type","file","name","files[]","id","file","multiple","",1,"box__file",3,"change"],["for","file"],[1,"box__dragndrop"],["class","file-info",4,"ngIf"],["appearance","outline"],[3,"value","valueChange"],[3,"value",4,"ngFor","ngForOf"],["mat-raised-button","","color","primary",3,"disabled","click"],["class","progress-wrapper",4,"ngFor","ngForOf"],["mat-button","",3,"click",4,"ngIf"],[1,"file-info"],[4,"ngFor","ngForOf"],[3,"value"],[1,"progress-wrapper"],["mode","determinate",3,"value"],["mat-button","",3,"click"]],template:function(i,r){1&i&&(at(0,"div",0)(1,"h2"),zn(2,"Upload Your Files"),ct(),at(3,"mat-card",1)(4,"div",2),qn("dragover",function(o){return r.onDragOver(o)})("dragleave",function(o){return r.onDragLeave(o)})("drop",function(o){return r.onDrop(o)}),at(5,"div",3),Zc(),at(6,"svg",4),Ri(7,"path",5),ct(),dm(),at(8,"input",6),qn("change",function(o){return r.onFileSelect(o)}),ct(),at(9,"label",7)(10,"strong"),zn(11,"Choose files"),ct(),at(12,"span",8),zn(13,"or drag them here"),ct(),zn(14,". "),ct()()(),Yt(15,Mve,2,1,"div",9),at(16,"mat-form-field",10)(17,"mat-label"),zn(18,"Expiration Time"),ct(),at(19,"mat-select",11),qn("valueChange",function(o){return r.selectedExpiration=o}),Yt(20,Dve,2,2,"mat-option",12),ct()(),at(21,"button",13),qn("click",function(){return r.uploadFiles()}),zn(22," Upload Files "),ct(),Yt(23,Rve,4,3,"div",14),Yt(24,Pve,2,0,"button",15),ct()()),2&i&&(_t(4),_r("drag-over",r.isDragOver),_t(11),gt("ngIf",r.selectedFiles.length>0),_t(4),gt("value",r.selectedExpiration),_t(1),gt("ngForOf",r.expirationOptions),_t(1),gt("disabled",0===r.selectedFiles.length),_t(2),gt("ngForOf",r.uploadProgressArray),_t(1),gt("ngIf",r.uploading))},dependencies:[M1,_u,$S,fj,qS,yge,Ive,ZW],styles:[".upload-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;padding:20px}.upload-container[_ngcontent-%COMP%]   mat-card[_ngcontent-%COMP%]{overflow-x:hidden;overflow-y:auto;max-height:100vh;height:30rem}.upload-container[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:24px;margin-bottom:20px}.upload-container[_ngcontent-%COMP%]   mat-progress-bar[_ngcontent-%COMP%]{width:100%;margin-top:10px}.upload-container[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{align-self:center;margin-top:10px;width:90%}.upload-container[_ngcontent-%COMP%]   input[type=file][_ngcontent-%COMP%]{margin-top:10px;padding:10px;width:100%}.card[_ngcontent-%COMP%]{width:100%;min-width:60%;padding:20px;margin-bottom:20px;box-shadow:inset -5px -5px 9px #00000073,inset 5px 5px 9px #5670ef4d}.upload-area[_ngcontent-%COMP%]{border:2px dashed #00796b;padding:30px;margin-bottom:20px;transition:background-color .3s ease}.upload-area.drag-over[_ngcontent-%COMP%]{background-color:#00796b1a}.box__file[_ngcontent-%COMP%]{width:.1px;height:.1px;opacity:0;overflow:hidden;position:absolute;z-index:-1}.box__icon[_ngcontent-%COMP%]{width:100%;height:80px;fill:#92b0b3;display:block;margin-bottom:10px}label[_ngcontent-%COMP%]{display:flex;justify-content:center}.progress-wrapper[_ngcontent-%COMP%]{margin-top:10px}"]})}}return n})();var Ove=Cn(110);const Nve=["*"];let cA;function Ob(n){return function Fve(){if(void 0===cA&&(cA=null,typeof window<"u")){const n=window;void 0!==n.trustedTypes&&(cA=n.trustedTypes.createPolicy("angular#components",{createHTML:e=>e}))}return cA}()?.createHTML(n)||n}function z$(n){return Error(`Unable to find icon with the name "${n}"`)}function H$(n){return Error(`The URL provided to MatIconRegistry was not trusted as a resource URL via Angular's DomSanitizer. Attempted URL was "${n}".`)}function G$(n){return Error(`The literal provided to MatIconRegistry was not trusted as safe HTML by Angular's DomSanitizer. Attempted literal was "${n}".`)}class Xf{constructor(e,t,i){this.url=e,this.svgText=t,this.options=i}}let uA=(()=>{class n{constructor(t,i,r,s){this._httpClient=t,this._sanitizer=i,this._errorHandler=s,this._svgIconConfigs=new Map,this._iconSetConfigs=new Map,this._cachedIconsByUrl=new Map,this._inProgressUrlFetches=new Map,this._fontCssClassesByAlias=new Map,this._resolvers=[],this._defaultFontSetClass=["material-icons","mat-ligature-font"],this._document=r}addSvgIcon(t,i,r){return this.addSvgIconInNamespace("",t,i,r)}addSvgIconLiteral(t,i,r){return this.addSvgIconLiteralInNamespace("",t,i,r)}addSvgIconInNamespace(t,i,r,s){return this._addSvgIconConfig(t,i,new Xf(r,null,s))}addSvgIconResolver(t){return this._resolvers.push(t),this}addSvgIconLiteralInNamespace(t,i,r,s){const o=this._sanitizer.sanitize(Fs.HTML,r);if(!o)throw G$(r);const a=Ob(o);return this._addSvgIconConfig(t,i,new Xf("",a,s))}addSvgIconSet(t,i){return this.addSvgIconSetInNamespace("",t,i)}addSvgIconSetLiteral(t,i){return this.addSvgIconSetLiteralInNamespace("",t,i)}addSvgIconSetInNamespace(t,i,r){return this._addSvgIconSetConfig(t,new Xf(i,null,r))}addSvgIconSetLiteralInNamespace(t,i,r){const s=this._sanitizer.sanitize(Fs.HTML,i);if(!s)throw G$(i);const o=Ob(s);return this._addSvgIconSetConfig(t,new Xf("",o,r))}registerFontClassAlias(t,i=t){return this._fontCssClassesByAlias.set(t,i),this}classNameForFontAlias(t){return this._fontCssClassesByAlias.get(t)||t}setDefaultFontSetClass(...t){return this._defaultFontSetClass=t,this}getDefaultFontSetClass(){return this._defaultFontSetClass}getSvgIconFromUrl(t){const i=this._sanitizer.sanitize(Fs.RESOURCE_URL,t);if(!i)throw H$(t);const r=this._cachedIconsByUrl.get(i);return r?ne(dA(r)):this._loadSvgIconFromConfig(new Xf(t,null)).pipe(as(s=>this._cachedIconsByUrl.set(i,s)),Ge(s=>dA(s)))}getNamedSvgIcon(t,i=""){const r=W$(i,t);let s=this._svgIconConfigs.get(r);if(s)return this._getSvgFromConfig(s);if(s=this._getIconConfigFromResolvers(i,t),s)return this._svgIconConfigs.set(r,s),this._getSvgFromConfig(s);const o=this._iconSetConfigs.get(i);return o?this._getSvgFromIconSetConfigs(t,o):ng(z$(r))}ngOnDestroy(){this._resolvers=[],this._svgIconConfigs.clear(),this._iconSetConfigs.clear(),this._cachedIconsByUrl.clear()}_getSvgFromConfig(t){return t.svgText?ne(dA(this._svgElementFromConfig(t))):this._loadSvgIconFromConfig(t).pipe(Ge(i=>dA(i)))}_getSvgFromIconSetConfigs(t,i){const r=this._extractIconWithNameFromAnySet(t,i);return r?ne(r):kj(i.filter(o=>!o.svgText).map(o=>this._loadSvgIconSetFromConfig(o).pipe(Rd(a=>{const c=`Loading icon set URL: ${this._sanitizer.sanitize(Fs.RESOURCE_URL,o.url)} failed: ${a.message}`;return this._errorHandler.handleError(new Error(c)),ne(null)})))).pipe(Ge(()=>{const o=this._extractIconWithNameFromAnySet(t,i);if(!o)throw z$(t);return o}))}_extractIconWithNameFromAnySet(t,i){for(let r=i.length-1;r>=0;r--){const s=i[r];if(s.svgText&&s.svgText.toString().indexOf(t)>-1){const o=this._svgElementFromConfig(s),a=this._extractSvgIconFromSet(o,t,s.options);if(a)return a}}return null}_loadSvgIconFromConfig(t){return this._fetchIcon(t).pipe(as(i=>t.svgText=i),Ge(()=>this._svgElementFromConfig(t)))}_loadSvgIconSetFromConfig(t){return t.svgText?ne(null):this._fetchIcon(t).pipe(as(i=>t.svgText=i))}_extractSvgIconFromSet(t,i,r){const s=t.querySelector(`[id="${i}"]`);if(!s)return null;const o=s.cloneNode(!0);if(o.removeAttribute("id"),"svg"===o.nodeName.toLowerCase())return this._setSvgAttributes(o,r);if("symbol"===o.nodeName.toLowerCase())return this._setSvgAttributes(this._toSvgElement(o),r);const a=this._svgElementFromString(Ob("<svg></svg>"));return a.appendChild(o),this._setSvgAttributes(a,r)}_svgElementFromString(t){const i=this._document.createElement("DIV");i.innerHTML=t;const r=i.querySelector("svg");if(!r)throw Error("<svg> tag not found");return r}_toSvgElement(t){const i=this._svgElementFromString(Ob("<svg></svg>")),r=t.attributes;for(let s=0;s<r.length;s++){const{name:o,value:a}=r[s];"id"!==o&&i.setAttribute(o,a)}for(let s=0;s<t.childNodes.length;s++)t.childNodes[s].nodeType===this._document.ELEMENT_NODE&&i.appendChild(t.childNodes[s].cloneNode(!0));return i}_setSvgAttributes(t,i){return t.setAttribute("fit",""),t.setAttribute("height","100%"),t.setAttribute("width","100%"),t.setAttribute("preserveAspectRatio","xMidYMid meet"),t.setAttribute("focusable","false"),i&&i.viewBox&&t.setAttribute("viewBox",i.viewBox),t}_fetchIcon(t){const{url:i,options:r}=t,s=r?.withCredentials??!1;if(!this._httpClient)throw function Lve(){return Error("Could not find HttpClient provider for use with Angular Material icons. Please include the HttpClientModule from @angular/common/http in your app imports.")}();if(null==i)throw Error(`Cannot fetch icon from URL "${i}".`);const o=this._sanitizer.sanitize(Fs.RESOURCE_URL,i);if(!o)throw H$(i);const a=this._inProgressUrlFetches.get(o);if(a)return a;const l=this._httpClient.get(o,{responseType:"text",withCredentials:s}).pipe(Ge(c=>Ob(c)),rg(()=>this._inProgressUrlFetches.delete(o)),fe());return this._inProgressUrlFetches.set(o,l),l}_addSvgIconConfig(t,i,r){return this._svgIconConfigs.set(W$(t,i),r),this}_addSvgIconSetConfig(t,i){const r=this._iconSetConfigs.get(t);return r?r.push(i):this._iconSetConfigs.set(t,[i]),this}_svgElementFromConfig(t){if(!t.svgElement){const i=this._svgElementFromString(t.svgText);this._setSvgAttributes(i,t.options),t.svgElement=i}return t.svgElement}_getIconConfigFromResolvers(t,i){for(let r=0;r<this._resolvers.length;r++){const s=this._resolvers[r](i,t);if(s)return Uve(s)?new Xf(s.url,null,s.options):new Xf(s,null)}}static{this.\u0275fac=function(i){return new(i||n)(ue(gb,8),ue(o0),ue(_i,8),ue(ll))}}static{this.\u0275prov=dt({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function dA(n){return n.cloneNode(!0)}function W$(n,e){return n+":"+e}function Uve(n){return!(!n.url||!n.options)}const Bve=dO(class{constructor(n){this._elementRef=n}}),zve=new Fe("MAT_ICON_DEFAULT_OPTIONS"),Hve=new Fe("mat-icon-location",{providedIn:"root",factory:function Gve(){const n=bt(_i),e=n?n.location:null;return{getPathname:()=>e?e.pathname+e.search:""}}}),j$=["clip-path","color-profile","src","cursor","fill","filter","marker","marker-start","marker-mid","marker-end","mask","stroke"],Wve=j$.map(n=>`[${n}]`).join(", "),jve=/^url\(['"]?#(.*?)['"]?\)$/;let $$=(()=>{class n extends Bve{get inline(){return this._inline}set inline(t){this._inline=xr(t)}get svgIcon(){return this._svgIcon}set svgIcon(t){t!==this._svgIcon&&(t?this._updateSvgIcon(t):this._svgIcon&&this._clearSvgElement(),this._svgIcon=t)}get fontSet(){return this._fontSet}set fontSet(t){const i=this._cleanupFontValue(t);i!==this._fontSet&&(this._fontSet=i,this._updateFontIconClasses())}get fontIcon(){return this._fontIcon}set fontIcon(t){const i=this._cleanupFontValue(t);i!==this._fontIcon&&(this._fontIcon=i,this._updateFontIconClasses())}constructor(t,i,r,s,o,a){super(t),this._iconRegistry=i,this._location=s,this._errorHandler=o,this._inline=!1,this._previousFontSetClass=[],this._currentIconFetch=on.EMPTY,a&&(a.color&&(this.color=this.defaultColor=a.color),a.fontSet&&(this.fontSet=a.fontSet)),r||t.nativeElement.setAttribute("aria-hidden","true")}_splitIconName(t){if(!t)return["",""];const i=t.split(":");switch(i.length){case 1:return["",i[0]];case 2:return i;default:throw Error(`Invalid icon name: "${t}"`)}}ngOnInit(){this._updateFontIconClasses()}ngAfterViewChecked(){const t=this._elementsWithExternalReferences;if(t&&t.size){const i=this._location.getPathname();i!==this._previousPath&&(this._previousPath=i,this._prependPathToReferences(i))}}ngOnDestroy(){this._currentIconFetch.unsubscribe(),this._elementsWithExternalReferences&&this._elementsWithExternalReferences.clear()}_usingFontIcon(){return!this.svgIcon}_setSvgElement(t){this._clearSvgElement();const i=this._location.getPathname();this._previousPath=i,this._cacheChildrenWithExternalReferences(t),this._prependPathToReferences(i),this._elementRef.nativeElement.appendChild(t)}_clearSvgElement(){const t=this._elementRef.nativeElement;let i=t.childNodes.length;for(this._elementsWithExternalReferences&&this._elementsWithExternalReferences.clear();i--;){const r=t.childNodes[i];(1!==r.nodeType||"svg"===r.nodeName.toLowerCase())&&r.remove()}}_updateFontIconClasses(){if(!this._usingFontIcon())return;const t=this._elementRef.nativeElement,i=(this.fontSet?this._iconRegistry.classNameForFontAlias(this.fontSet).split(/ +/):this._iconRegistry.getDefaultFontSetClass()).filter(r=>r.length>0);this._previousFontSetClass.forEach(r=>t.classList.remove(r)),i.forEach(r=>t.classList.add(r)),this._previousFontSetClass=i,this.fontIcon!==this._previousFontIconClass&&!i.includes("mat-ligature-font")&&(this._previousFontIconClass&&t.classList.remove(this._previousFontIconClass),this.fontIcon&&t.classList.add(this.fontIcon),this._previousFontIconClass=this.fontIcon)}_cleanupFontValue(t){return"string"==typeof t?t.trim().split(" ")[0]:t}_prependPathToReferences(t){const i=this._elementsWithExternalReferences;i&&i.forEach((r,s)=>{r.forEach(o=>{s.setAttribute(o.name,`url('${t}#${o.value}')`)})})}_cacheChildrenWithExternalReferences(t){const i=t.querySelectorAll(Wve),r=this._elementsWithExternalReferences=this._elementsWithExternalReferences||new Map;for(let s=0;s<i.length;s++)j$.forEach(o=>{const a=i[s],l=a.getAttribute(o),c=l?l.match(jve):null;if(c){let u=r.get(a);u||(u=[],r.set(a,u)),u.push({name:o,value:c[1]})}})}_updateSvgIcon(t){if(this._svgNamespace=null,this._svgName=null,this._currentIconFetch.unsubscribe(),t){const[i,r]=this._splitIconName(t);i&&(this._svgNamespace=i),r&&(this._svgName=r),this._currentIconFetch=this._iconRegistry.getNamedSvgIcon(r,i).pipe(ml(1)).subscribe(s=>this._setSvgElement(s),s=>{this._errorHandler.handleError(new Error(`Error retrieving icon ${i}:${r}! ${s.message}`))})}}static{this.\u0275fac=function(i){return new(i||n)(J(Di),J(uA),vd("aria-hidden"),J(Hve),J(ll),J(zve,8))}}static{this.\u0275cmp=hr({type:n,selectors:[["mat-icon"]],hostAttrs:["role","img",1,"mat-icon","notranslate"],hostVars:8,hostBindings:function(i,r){2&i&&(or("data-mat-icon-type",r._usingFontIcon()?"font":"svg")("data-mat-icon-name",r._svgName||r.fontIcon)("data-mat-icon-namespace",r._svgNamespace||r.fontSet)("fontIcon",r._usingFontIcon()?r.fontIcon:null),_r("mat-icon-inline",r.inline)("mat-icon-no-color","primary"!==r.color&&"accent"!==r.color&&"warn"!==r.color))},inputs:{color:"color",inline:"inline",svgIcon:"svgIcon",fontSet:"fontSet",fontIcon:"fontIcon"},exportAs:["matIcon"],features:[si],ngContentSelectors:Nve,decls:1,vars:0,template:function(i,r){1&i&&(dl(),qi(0))},styles:["mat-icon,mat-icon.mat-primary,mat-icon.mat-accent,mat-icon.mat-warn{color:var(--mat-icon-color)}.mat-icon{-webkit-user-select:none;user-select:none;background-repeat:no-repeat;display:inline-block;fill:currentColor;height:24px;width:24px;overflow:hidden}.mat-icon.mat-icon-inline{font-size:inherit;height:inherit;line-height:inherit;width:inherit}.mat-icon.mat-ligature-font[fontIcon]::before{content:attr(fontIcon)}[dir=rtl] .mat-icon-rtl-mirror{transform:scale(-1, 1)}.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-prefix .mat-icon,.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-suffix .mat-icon{display:block}.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-prefix .mat-icon-button .mat-icon,.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-suffix .mat-icon-button .mat-icon{margin:auto}"],encapsulation:2,changeDetection:0})}}return n})(),q$=(()=>{class n{static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275mod=ni({type:n})}static{this.\u0275inj=jn({imports:[us,us]})}}return n})();const X$=wb({passive:!0});let $ve=(()=>{class n{constructor(t,i){this._platform=t,this._ngZone=i,this._monitoredElements=new Map}monitor(t){if(!this._platform.isBrowser)return kr;const i=s_(t),r=this._monitoredElements.get(i);if(r)return r.subject;const s=new Q,o="cdk-text-field-autofilled",a=l=>{"cdk-text-field-autofill-start"!==l.animationName||i.classList.contains(o)?"cdk-text-field-autofill-end"===l.animationName&&i.classList.contains(o)&&(i.classList.remove(o),this._ngZone.run(()=>s.next({target:l.target,isAutofilled:!1}))):(i.classList.add(o),this._ngZone.run(()=>s.next({target:l.target,isAutofilled:!0})))};return this._ngZone.runOutsideAngular(()=>{i.addEventListener("animationstart",a,X$),i.classList.add("cdk-text-field-autofill-monitored")}),this._monitoredElements.set(i,{subject:s,unlisten:()=>{i.removeEventListener("animationstart",a,X$)}}),s}stopMonitoring(t){const i=s_(t),r=this._monitoredElements.get(i);r&&(r.unlisten(),r.subject.complete(),i.classList.remove("cdk-text-field-autofill-monitored"),i.classList.remove("cdk-text-field-autofilled"),this._monitoredElements.delete(i))}ngOnDestroy(){this._monitoredElements.forEach((t,i)=>this.stopMonitoring(i))}static{this.\u0275fac=function(i){return new(i||n)(ue(fa),ue(mn))}}static{this.\u0275prov=dt({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),qve=(()=>{class n{static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275mod=ni({type:n})}static{this.\u0275inj=jn({})}}return n})();const Xve=new Fe("MAT_INPUT_VALUE_ACCESSOR"),Kve=["button","checkbox","file","hidden","image","radio","range","reset","submit"];let Yve=0;const Qve=zW(class{constructor(n,e,t,i){this._defaultErrorStateMatcher=n,this._parentForm=e,this._parentFormGroup=t,this.ngControl=i,this.stateChanges=new Q}});let Zve=(()=>{class n extends Qve{get disabled(){return this._disabled}set disabled(t){this._disabled=xr(t),this.focused&&(this.focused=!1,this.stateChanges.next())}get id(){return this._id}set id(t){this._id=t||this._uid}get required(){return this._required??this.ngControl?.control?.hasValidator(Lj.required)??!1}set required(t){this._required=xr(t)}get type(){return this._type}set type(t){this._type=t||"text",this._validateType(),!this._isTextarea&&IW().has(this._type)&&(this._elementRef.nativeElement.type=this._type)}get value(){return this._inputValueAccessor.value}set value(t){t!==this.value&&(this._inputValueAccessor.value=t,this.stateChanges.next())}get readonly(){return this._readonly}set readonly(t){this._readonly=xr(t)}constructor(t,i,r,s,o,a,l,c,u,d){super(a,s,o,r),this._elementRef=t,this._platform=i,this._autofillMonitor=c,this._formField=d,this._uid="mat-input-"+Yve++,this.focused=!1,this.stateChanges=new Q,this.controlType="mat-input",this.autofilled=!1,this._disabled=!1,this._type="text",this._readonly=!1,this._neverEmptyInputTypes=["date","datetime","datetime-local","month","time","week"].filter(v=>IW().has(v)),this._iOSKeyupListener=v=>{const x=v.target;!x.value&&0===x.selectionStart&&0===x.selectionEnd&&(x.setSelectionRange(1,1),x.setSelectionRange(0,0))};const p=this._elementRef.nativeElement,m=p.nodeName.toLowerCase();this._inputValueAccessor=l||p,this._previousNativeValue=this.value,this.id=this.id,i.IOS&&u.runOutsideAngular(()=>{t.nativeElement.addEventListener("keyup",this._iOSKeyupListener)}),this._isServer=!this._platform.isBrowser,this._isNativeSelect="select"===m,this._isTextarea="textarea"===m,this._isInFormField=!!d,this._isNativeSelect&&(this.controlType=p.multiple?"mat-native-select-multiple":"mat-native-select")}ngAfterViewInit(){this._platform.isBrowser&&this._autofillMonitor.monitor(this._elementRef.nativeElement).subscribe(t=>{this.autofilled=t.isAutofilled,this.stateChanges.next()})}ngOnChanges(){this.stateChanges.next()}ngOnDestroy(){this.stateChanges.complete(),this._platform.isBrowser&&this._autofillMonitor.stopMonitoring(this._elementRef.nativeElement),this._platform.IOS&&this._elementRef.nativeElement.removeEventListener("keyup",this._iOSKeyupListener)}ngDoCheck(){this.ngControl&&(this.updateErrorState(),null!==this.ngControl.disabled&&this.ngControl.disabled!==this.disabled&&(this.disabled=this.ngControl.disabled,this.stateChanges.next())),this._dirtyCheckNativeValue(),this._dirtyCheckPlaceholder()}focus(t){this._elementRef.nativeElement.focus(t)}_focusChanged(t){t!==this.focused&&(this.focused=t,this.stateChanges.next())}_onInput(){}_dirtyCheckNativeValue(){const t=this._elementRef.nativeElement.value;this._previousNativeValue!==t&&(this._previousNativeValue=t,this.stateChanges.next())}_dirtyCheckPlaceholder(){const t=this._getPlaceholder();if(t!==this._previousPlaceholder){const i=this._elementRef.nativeElement;this._previousPlaceholder=t,t?i.setAttribute("placeholder",t):i.removeAttribute("placeholder")}}_getPlaceholder(){return this.placeholder||null}_validateType(){Kve.indexOf(this._type)}_isNeverEmpty(){return this._neverEmptyInputTypes.indexOf(this._type)>-1}_isBadInput(){let t=this._elementRef.nativeElement.validity;return t&&t.badInput}get empty(){return!(this._isNeverEmpty()||this._elementRef.nativeElement.value||this._isBadInput()||this.autofilled)}get shouldLabelFloat(){if(this._isNativeSelect){const t=this._elementRef.nativeElement,i=t.options[0];return this.focused||t.multiple||!this.empty||!!(t.selectedIndex>-1&&i&&i.label)}return this.focused||!this.empty}setDescribedByIds(t){t.length?this._elementRef.nativeElement.setAttribute("aria-describedby",t.join(" ")):this._elementRef.nativeElement.removeAttribute("aria-describedby")}onContainerClick(){this.focused||this.focus()}_isInlineSelect(){const t=this._elementRef.nativeElement;return this._isNativeSelect&&(t.multiple||t.size>1)}static{this.\u0275fac=function(i){return new(i||n)(J(Di),J(fa),J(Sc,10),J(Pb,8),J(kb,8),J(HW),J(Xve,10),J($ve),J(mn),J(pO,8))}}static{this.\u0275dir=St({type:n,selectors:[["input","matInput",""],["textarea","matInput",""],["select","matNativeControl",""],["input","matNativeControl",""],["textarea","matNativeControl",""]],hostAttrs:[1,"mat-mdc-input-element"],hostVars:18,hostBindings:function(i,r){1&i&&qn("focus",function(){return r._focusChanged(!0)})("blur",function(){return r._focusChanged(!1)})("input",function(){return r._onInput()}),2&i&&(Hy("id",r.id)("disabled",r.disabled)("required",r.required),or("name",r.name||null)("readonly",r.readonly&&!r._isNativeSelect||null)("aria-invalid",r.empty&&r.required?null:r.errorState)("aria-required",r.required)("id",r.id),_r("mat-input-server",r._isServer)("mat-mdc-form-field-textarea-control",r._isInFormField&&r._isTextarea)("mat-mdc-form-field-input-control",r._isInFormField)("mdc-text-field__input",r._isInFormField)("mat-mdc-native-select-inline",r._isInlineSelect()))},inputs:{disabled:"disabled",id:"id",placeholder:"placeholder",name:"name",required:"required",type:"type",errorStateMatcher:"errorStateMatcher",userAriaDescribedBy:["aria-describedby","userAriaDescribedBy"],value:"value",readonly:"readonly"},exportAs:["matInput"],features:[Qi([{provide:fO,useExisting:n}]),si,Ps]})}}return n})(),K$=(()=>{class n{static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275mod=ni({type:n})}static{this.\u0275inj=jn({imports:[us,Ab,Ab,qve,us]})}}return n})();function Jve(n,e){1&n&&(at(0,"div")(1,"mat-card",8)(2,"p"),zn(3,"No matching files found."),ct()()())}function eye(n,e){if(1&n){const t=Dl();at(0,"img",20),qn("click",function(){Ts(t);const r=pn().$implicit;return Ys(pn().openPreview(r))}),ct()}2&n&&gt("src",pn().$implicit.previewUrl,Ey)}function tye(n,e){if(1&n){const t=Dl();at(0,"mat-icon",21),qn("click",function(){Ts(t);const r=pn().$implicit;return Ys(pn().openPreview(r))}),zn(1,"picture_as_pdf"),ct()}}function nye(n,e){1&n&&Ri(0,"div",22),2&n&&gt("innerHTML",pn().$implicit.qrCode,iE)}function iye(n,e){if(1&n){const t=Dl();at(0,"mat-card",8)(1,"div",9)(2,"div",10),Yt(3,eye,1,1,"img",11),Yt(4,tye,2,0,"mat-icon",12),ct(),at(5,"p")(6,"strong"),zn(7,"Name:"),ct(),zn(8),ct(),at(9,"p")(10,"strong"),zn(11,"Expires At:"),ct(),zn(12),function S3(n,e){const t=Ti();let i;const r=n+di;t.firstCreatePass?(i=function gte(n,e){if(e)for(let t=e.length-1;t>=0;t--){const i=e[t];if(n===i.name)return i}}(e,t.pipeRegistry),t.data[r]=i,i.onDestroy&&(t.destroyHooks??=[]).push(r,i.onDestroy)):i=t.data[r];const s=i.factory||(i.factory=$c(i.type)),a=fo(J);try{const l=_m(!1),c=s();return _m(l),function JZ(n,e,t,i){t>=n.data.length&&(n.data[t]=null,n.blueprint[t]=null),e[t]=i}(t,Ke(),r,c),c}finally{fo(a)}}(13,"date"),ct(),at(14,"p")(15,"strong"),zn(16,"Shareable Link:"),ct(),at(17,"a",13),zn(18),ct(),zn(19,"\xa0 "),at(20,"button",14),qn("click",function(){const s=Ts(t).$implicit;return Ys(pn().copyLink(s))}),at(21,"mat-icon"),zn(22,"content_copy"),ct()(),at(23,"button",15),qn("click",function(){const s=Ts(t).$implicit;return Ys(pn().toggleQRCode(s))}),at(24,"mat-icon"),zn(25,"qr_code"),ct()()(),Yt(26,nye,1,1,"div",16),ct(),at(27,"div",17)(28,"button",18),qn("click",function(){const s=Ts(t).$implicit;return Ys(pn().downloadFile(s))}),zn(29,"Download"),ct(),at(30,"button",19),qn("click",function(){const s=Ts(t).$implicit;return Ys(pn().deleteFile(s.key))}),zn(31,"Delete"),ct()()()}if(2&n){const t=e.$implicit,i=pn();gt("@fadeIn",void 0),_t(3),gt("ngIf",i.isImage(t.name)),_t(1),gt("ngIf",i.isPDF(t.name)),_t(4),aa(" ",t.name,""),_t(4),aa(" ",A3(13,8,t.expiresAt,"medium"),""),_t(5),gt("href","/#/file/"+t.key,Ey),_t(1),hu("/file/"+t.key),_t(8),gt("ngIf",t.showQR)}}function rye(n,e){1&n&&Ri(0,"img",26),2&n&&gt("src",pn(2).previewFile.previewUrl,Ey)}function sye(n,e){1&n&&Ri(0,"iframe",27),2&n&&gt("src",pn(2).fileUrl,NM)}function oye(n,e){if(1&n){const t=Dl();at(0,"div",23),qn("click",function(){return Ts(t),Ys(pn().closePreview())}),Yt(1,rye,1,1,"img",24),Yt(2,sye,1,1,"iframe",25),ct()}if(2&n){const t=pn();_t(1),gt("ngIf",t.isImage(t.previewFile.name)),_t(1),gt("ngIf",t.isPDF(t.previewFile.name))}}let aye=(()=>{class n{constructor(t,i,r,s){this.firestore=t,this.http=i,this.notificationService=r,this.sanitizer=s,this.files=[],this.sessionToken=null,this.searchQuery="",this.previewFile=null}ngOnInit(){var t=this;return(0,Me.A)(function*(){t.getIPAddress()})()}getIPAddress(){this.sessionToken=sessionStorage.getItem("Token"),this.http.get("https://ipinfo.io/json").subscribe(t=>{this.userIpAddress=t.ip,this.loadFiles()},t=>{const i=this.generateRandomIp();this.userIpAddress=i,this.loadFiles()})}generateRandomIp(){return`${this.getRandom(1,255)}.${this.getRandom(0,255)}.${this.getRandom(0,255)}.${this.getRandom(1,255)}`}getRandom(t,i){return Math.floor(Math.random()*(i-t+1))+t}loadFiles(){var t=this;return(0,Me.A)(function*(){const i=yield t.firestore.collection("files").get().toPromise();i&&(t.files=i.docs.map(r=>{const s=r.data();return{...s,key:r.id,previewUrl:t.generatePreviewUrl(s.fileData,s.name)}}).filter(r=>r?.Token===t.sessionToken&&r.ipAddress===t.userIpAddress))})()}loadnewFiles(){setTimeout(()=>{this.loadFiles()},1e3)}downloadFile(t){const i=document.createElement("a");i.href=`data:application/octet-stream;base64,${t.fileData}`,i.download=t.name,i.click()}deleteFile(t){this.firestore.collection("files").doc(t).delete().then(()=>{this.onDeleteFile(),this.loadFiles()})}onDeleteFile(){this.notificationService.showSuccess("File deleted successfully!")}copyLink(t){const i=`${window.location.origin}/quickshare/#/file/${t.key}`;navigator.clipboard.writeText(i).then(()=>{this.notificationService.showInfo("Shareable link copied!")})}toggleQRCode(t){if(t.showQR=!t.showQR,t.showQR&&!t.qrCode){const i=`${window.location.origin}/quickshare/#/file/${t.key}`,o=Ove(4,"L");o.addData(i),o.make(),t.qrCode=o.createImgTag(4)}}isImage(t){return/\.(jpg|jpeg|png|gif)$/i.test(t)}isPDF(t){return/\.pdf$/i.test(t)}setFileUrl(t){this.fileUrl=this.sanitizer.bypassSecurityTrustResourceUrl(t)}generatePreviewUrl(t,i){return this.isImage(i)?`data:image/png;base64,${t}`:this.isPDF(i)?(this.setFileUrl(`data:application/pdf;base64,${t}`),`data:application/pdf;base64,${t}`):""}openPreview(t){this.previewFile=t}closePreview(){this.previewFile=null}get filteredFiles(){return this.searchQuery?this.files.filter(t=>t.name.toLowerCase().includes(this.searchQuery.toLowerCase())):this.files}getRemainingTime(t){const r=t-Date.now();if(r<=0)return"Expired";const s=Math.floor(r/864e5),o=Math.floor(r%864e5/36e5),a=Math.floor(r%36e5/6e4)+1;let l="";return s>0?(l=`${s} days`,o>0&&(l+=`, ${o} hours`,a>0&&(l+=`, ${a} mints`))):o>0?(l=`${o} hours`,a>0&&(l+=`, ${a} mints`)):a>0&&(l=`${a} mints`),l}base64ToBlob(t){const i=atob(t),r=new Array(i.length).fill(0).map((o,a)=>i.charCodeAt(a)),s=new Uint8Array(r);return new Blob([s],{type:"application/octet-stream"})}getPreviewUrl(t){return t instanceof File?this.sanitizer.bypassSecurityTrustResourceUrl(URL.createObjectURL(t)):this.sanitizer.bypassSecurityTrustResourceUrl(t.url)}static{this.\u0275fac=function(i){return new(i||n)(J(pb),J(gb),J(SW),J(o0))}}static{this.\u0275cmp=hr({type:n,selectors:[["app-file-list"]],decls:13,vars:4,consts:[[1,"file-list-container","container"],["appearance","outline",1,"search-bar"],["matInput","","type","text","placeholder","Search by name...",3,"ngModel","ngModelChange"],["matSuffix",""],[4,"ngIf"],[1,"scroll"],["class","card",4,"ngFor","ngForOf"],["class","fullscreen-preview",3,"click",4,"ngIf"],[1,"card"],[1,"file-info"],[1,"file-preview"],["class","preview-img",3,"src","click",4,"ngIf"],["class","pdf-icon",3,"click",4,"ngIf"],["target","_blank",3,"href"],["mat-icon-button","","aria-label","Copy Link",3,"click"],["mat-icon-button","","aria-label","Toggle QR Code",3,"click"],["class","qr-code",3,"innerHTML",4,"ngIf"],[1,"file-actions"],["mat-raised-button","","color","primary",1,"primary",3,"click"],["mat-raised-button","","color","warn",1,"warn",3,"click"],[1,"preview-img",3,"src","click"],[1,"pdf-icon",3,"click"],[1,"qr-code",3,"innerHTML"],[1,"fullscreen-preview",3,"click"],[3,"src",4,"ngIf"],["type","application/pdf",3,"src",4,"ngIf"],[3,"src"],["type","application/pdf",3,"src"]],template:function(i,r){1&i&&(at(0,"div",0)(1,"h2"),zn(2,"Uploaded Files"),ct(),at(3,"mat-form-field",1)(4,"mat-label"),zn(5,"Search Files"),ct(),at(6,"input",2),qn("ngModelChange",function(o){return r.searchQuery=o}),ct(),at(7,"mat-icon",3),zn(8,"search"),ct()(),Yt(9,Jve,4,0,"div",4),at(10,"div",5),Yt(11,iye,32,11,"mat-card",6),ct(),Yt(12,oye,3,2,"div",7),ct()),2&i&&(_t(6),gt("ngModel",r.searchQuery),_t(3),gt("ngIf",0==(null==r.filteredFiles?null:r.filteredFiles.length)),_t(2),gt("ngForOf",r.filteredFiles),_t(1),gt("ngIf",r.previewFile))},dependencies:[M1,_u,ZS,o$,FO,$S,fj,qS,uge,$$,Zve,az],styles:[".file-list-container[_ngcontent-%COMP%]{margin-top:20px}.file-list-container[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{text-align:center;margin-bottom:20px}.file-list-container[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]{display:flex;flex-direction:column;width:100%;min-width:60%;padding:15px;margin-bottom:15px;box-shadow:inset -5px -5px 9px #00000073,inset 5px 5px 9px #5670ef4d}.file-list-container[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .file-info[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:5px 0}.file-list-container[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .file-actions[_ngcontent-%COMP%]{display:flex;justify-content:flex-end;margin-top:10px}.file-list-container[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .file-actions[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{margin-left:10px;margin-right:0}.file-list-container[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .qr-code[_ngcontent-%COMP%]{margin-top:10px;text-align:center}@media (min-width: 400px){.card[_ngcontent-%COMP%]{flex-direction:row;justify-content:space-between;align-items:center}}.search-bar[_ngcontent-%COMP%]{width:100%;margin-bottom:15px}.file-preview[_ngcontent-%COMP%]{margin-top:10px;text-align:center}.file-preview[_ngcontent-%COMP%]   .preview-img[_ngcontent-%COMP%]{width:40px;height:30px;object-fit:cover;cursor:pointer}.file-preview[_ngcontent-%COMP%]   .pdf-icon[_ngcontent-%COMP%]{font-size:25px;cursor:pointer}.fullscreen-preview[_ngcontent-%COMP%]{position:fixed;top:0;left:0;width:100%;height:100%;background:rgba(0,0,0,.8);display:flex;justify-content:center;align-items:center;cursor:pointer}.fullscreen-preview[_ngcontent-%COMP%]   img[_ngcontent-%COMP%], .fullscreen-preview[_ngcontent-%COMP%]   embed[_ngcontent-%COMP%]{max-width:90%;max-height:90%}.fullscreen-preview[_ngcontent-%COMP%]   iframe[_ngcontent-%COMP%]{width:80%;height:80%}.scroll[_ngcontent-%COMP%]{overflow:auto;max-height:100vh;height:25rem}"],data:{animation:[vb("fadeIn",[Hf(":enter",[_l({opacity:0,transform:"translateY(20px)"}),t_("300ms ease-out",_l({opacity:1,transform:"translateY(0)"}))])])]}})}}return n})();const lye=["FileListComponent"];let cye=(()=>{class n{constructor(t){this.fileService=t}ngOnDestroy(){this.fileService.cleanupondestroy()}static{this.\u0275fac=function(i){return new(i||n)(J(nW))}}static{this.\u0275cmp=hr({type:n,selectors:[["app-home"]],viewQuery:function(i,r){if(1&i&&Vo(lye,5),2&i){let s;Ui(s=Bi())&&(r.FileListComponent=s.first)}},decls:6,vars:0,consts:[[1,"row"],[1,"col-6"],[3,"uploaded"],["FileListComponent",""]],template:function(i,r){if(1&i){const s=Dl();at(0,"div",0)(1,"div",1)(2,"app-upload",2),qn("uploaded",function(){return Ts(s),Ys(ul(5).loadnewFiles())}),ct()(),at(3,"div",1),Ri(4,"app-file-list",null,3),ct()()}},dependencies:[kve,aye],styles:[".home-container[_ngcontent-%COMP%]{text-align:center;padding:20px}.upload-card[_ngcontent-%COMP%]{padding:20px;margin-bottom:20px}.upload-area[_ngcontent-%COMP%]{border:2px dashed #00796b;padding:30px;margin-bottom:20px}.file-list-card[_ngcontent-%COMP%]{padding:20px}.main-container[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr 1fr;gap:10px;padding:15px}@media (max-width: 768px){.main-container[_ngcontent-%COMP%]{grid-template-columns:1fr}}"]})}}return n})();function uye(n,e){if(1&n){const t=Dl();at(0,"button",5),qn("click",function(){return Ts(t),Ys(pn(2).downloadFile())}),zn(1," Download File "),ct()}}function dye(n,e){if(1&n&&(at(0,"mat-card",3)(1,"h3"),zn(2),ct(),Yt(3,uye,2,0,"button",4),ct()),2&n){const t=pn();_t(2),hu(null==t.file?null:t.file.name),_t(1),gt("ngIf",t.file)}}function hye(n,e){1&n&&(at(0,"p"),zn(1,"Loading file..."),ct())}let fye=(()=>{class n{constructor(t,i,r){this.route=t,this.firestore=i,this.router=r,this.file=null,this.loading=!0}ngOnInit(){const t=this.route.snapshot.paramMap.get("id");t?this.fetchFile(t):this.loading=!1}fetchFile(t){var i=this;return(0,Me.A)(function*(){try{const r=yield i.firestore.collection("files").doc(t).get().toPromise();if(r?.exists){const s=r.data(),o=Date.now();if(s.expiresAt<o)return alert("This file has expired and is no longer available."),void i.router.navigate(["/"]);i.file=s}else alert("File not found!"),i.router.navigate(["/"])}catch(r){console.error("Error fetching file:",r)}finally{i.loading=!1}})()}downloadFile(){if(!this.file)return;const t=this.base64ToBlob(this.file.fileData),i=window.URL.createObjectURL(t),r=document.createElement("a");r.href=i,r.download=this.file.name,document.body.appendChild(r),r.click(),document.body.removeChild(r)}base64ToBlob(t){const i=atob(t),r=new Array(i.length).fill(0).map((o,a)=>i.charCodeAt(a)),s=new Uint8Array(r);return new Blob([s],{type:"application/octet-stream"})}static{this.\u0275fac=function(i){return new(i||n)(J(_f),J(pb),J(ua))}}static{this.\u0275cmp=hr({type:n,selectors:[["app-file-view"]],decls:6,vars:2,consts:[[1,"file-view-container"],["class","card",4,"ngIf","ngIfElse"],["loadingTemplate",""],[1,"card"],["mat-raised-button","","color","primary",3,"click",4,"ngIf"],["mat-raised-button","","color","primary",3,"click"]],template:function(i,r){if(1&i&&(at(0,"div",0)(1,"h2"),zn(2,"Download File"),ct(),Yt(3,dye,4,2,"mat-card",1),Yt(4,hye,2,0,"ng-template",null,2,Qm),ct()),2&i){const s=ul(5);_t(3),gt("ngIf",!r.loading)("ngIfElse",s)}},dependencies:[_u,$S],styles:[".file-view-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;padding:20px}.card[_ngcontent-%COMP%]{width:300px;padding:20px;text-align:center;border-radius:8px;box-shadow:inset -5px -5px 9px #00000073,inset 5px 5px 9px #5670ef4d}.card[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:18px;margin-bottom:15px}button[_ngcontent-%COMP%]{width:100%;padding:10px;font-size:16px}@media (max-width: 400px){.card[_ngcontent-%COMP%]{width:90%}}"]})}}return n})();const Q$=1,gye=2,Ru=3,hA=0,Nye=1,Fye=2,sh=0,Lye=1,Vye=2,Uye=3,Bye=4,zye=5,Hye=6,Gye=7,oh=301,Yf=302,Nb=306,Ll=1001,To=1003,Hs=1006,ku=1008,Ou=1009,i9=1010,r9=1011,Lb=1012,JO=1013,ah=1014,Fa=1015,Vb=1016,eN=1017,tN=1018,u_=1020,s9=35902,o9=1021,a9=1022,ma=1023,l9=1024,c9=1025,d_=1026,h_=1027,nN=1028,vA=1029,u9=1030,iN=1031,rN=1033,yA=33776,bA=33777,xA=33778,wA=33779,sN=35840,oN=35841,aN=35842,lN=35843,cN=36196,uN=37492,dN=37496,hN=37808,fN=37809,pN=37810,mN=37811,gN=37812,_N=37813,vN=37814,yN=37815,bN=37816,xN=37817,wN=37818,EN=37819,TN=37820,SN=37821,EA=36492,AN=36494,IN=36495,d9=36283,CN=36284,MN=36285,DN=36286,La="srgb",m_="srgb-linear",AA="linear",ir="srgb",g_=7680,m9="300 es",Ac=2e3;class Nu{addEventListener(e,t){void 0===this._listeners&&(this._listeners={});const i=this._listeners;void 0===i[e]&&(i[e]=[]),-1===i[e].indexOf(t)&&i[e].push(t)}hasEventListener(e,t){const i=this._listeners;return void 0!==i&&void 0!==i[e]&&-1!==i[e].indexOf(t)}removeEventListener(e,t){const i=this._listeners;if(void 0===i)return;const r=i[e];if(void 0!==r){const s=r.indexOf(t);-1!==s&&r.splice(s,1)}}dispatchEvent(e){const t=this._listeners;if(void 0===t)return;const i=t[e.type];if(void 0!==i){e.target=this;const r=i.slice(0);for(let s=0,o=r.length;s<o;s++)r[s].call(this,e);e.target=null}}}const So=["00","01","02","03","04","05","06","07","08","09","0a","0b","0c","0d","0e","0f","10","11","12","13","14","15","16","17","18","19","1a","1b","1c","1d","1e","1f","20","21","22","23","24","25","26","27","28","29","2a","2b","2c","2d","2e","2f","30","31","32","33","34","35","36","37","38","39","3a","3b","3c","3d","3e","3f","40","41","42","43","44","45","46","47","48","49","4a","4b","4c","4d","4e","4f","50","51","52","53","54","55","56","57","58","59","5a","5b","5c","5d","5e","5f","60","61","62","63","64","65","66","67","68","69","6a","6b","6c","6d","6e","6f","70","71","72","73","74","75","76","77","78","79","7a","7b","7c","7d","7e","7f","80","81","82","83","84","85","86","87","88","89","8a","8b","8c","8d","8e","8f","90","91","92","93","94","95","96","97","98","99","9a","9b","9c","9d","9e","9f","a0","a1","a2","a3","a4","a5","a6","a7","a8","a9","aa","ab","ac","ad","ae","af","b0","b1","b2","b3","b4","b5","b6","b7","b8","b9","ba","bb","bc","bd","be","bf","c0","c1","c2","c3","c4","c5","c6","c7","c8","c9","ca","cb","cc","cd","ce","cf","d0","d1","d2","d3","d4","d5","d6","d7","d8","d9","da","db","dc","dd","de","df","e0","e1","e2","e3","e4","e5","e6","e7","e8","e9","ea","eb","ec","ed","ee","ef","f0","f1","f2","f3","f4","f5","f6","f7","f8","f9","fa","fb","fc","fd","fe","ff"],Zf=Math.PI/180,__=180/Math.PI;function Va(){const n=4294967295*Math.random()|0,e=4294967295*Math.random()|0,t=4294967295*Math.random()|0,i=4294967295*Math.random()|0;return(So[255&n]+So[n>>8&255]+So[n>>16&255]+So[n>>24&255]+"-"+So[255&e]+So[e>>8&255]+"-"+So[e>>16&15|64]+So[e>>24&255]+"-"+So[63&t|128]+So[t>>8&255]+"-"+So[t>>16&255]+So[t>>24&255]+So[255&i]+So[i>>8&255]+So[i>>16&255]+So[i>>24&255]).toLowerCase()}function Xn(n,e,t){return Math.max(e,Math.min(t,n))}function Ub(n,e,t){return(1-t)*n+t*e}function $o(n,e){switch(e.constructor){case Float32Array:return n;case Uint32Array:return n/4294967295;case Uint16Array:return n/65535;case Uint8Array:return n/255;case Int32Array:return Math.max(n/2147483647,-1);case Int16Array:return Math.max(n/32767,-1);case Int8Array:return Math.max(n/127,-1);default:throw new Error("Invalid component type.")}}function Zn(n,e){switch(e.constructor){case Float32Array:return n;case Uint32Array:return Math.round(4294967295*n);case Uint16Array:return Math.round(65535*n);case Uint8Array:return Math.round(255*n);case Int32Array:return Math.round(2147483647*n);case Int16Array:return Math.round(32767*n);case Int8Array:return Math.round(127*n);default:throw new Error("Invalid component type.")}}class et{constructor(e=0,t=0){et.prototype.isVector2=!0,this.x=e,this.y=t}get width(){return this.x}set width(e){this.x=e}get height(){return this.y}set height(e){this.y=e}set(e,t){return this.x=e,this.y=t,this}setScalar(e){return this.x=e,this.y=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y)}copy(e){return this.x=e.x,this.y=e.y,this}add(e){return this.x+=e.x,this.y+=e.y,this}addScalar(e){return this.x+=e,this.y+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this}subScalar(e){return this.x-=e,this.y-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this}multiply(e){return this.x*=e.x,this.y*=e.y,this}multiplyScalar(e){return this.x*=e,this.y*=e,this}divide(e){return this.x/=e.x,this.y/=e.y,this}divideScalar(e){return this.multiplyScalar(1/e)}applyMatrix3(e){const t=this.x,i=this.y,r=e.elements;return this.x=r[0]*t+r[3]*i+r[6],this.y=r[1]*t+r[4]*i+r[7],this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this}clamp(e,t){return this.x=Xn(this.x,e.x,t.x),this.y=Xn(this.y,e.y,t.y),this}clampScalar(e,t){return this.x=Xn(this.x,e,t),this.y=Xn(this.y,e,t),this}clampLength(e,t){const i=this.length();return this.divideScalar(i||1).multiplyScalar(Xn(i,e,t))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this}negate(){return this.x=-this.x,this.y=-this.y,this}dot(e){return this.x*e.x+this.y*e.y}cross(e){return this.x*e.y-this.y*e.x}lengthSq(){return this.x*this.x+this.y*this.y}length(){return Math.sqrt(this.x*this.x+this.y*this.y)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)}normalize(){return this.divideScalar(this.length()||1)}angle(){return Math.atan2(-this.y,-this.x)+Math.PI}angleTo(e){const t=Math.sqrt(this.lengthSq()*e.lengthSq());if(0===t)return Math.PI/2;const i=this.dot(e)/t;return Math.acos(Xn(i,-1,1))}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){const t=this.x-e.x,i=this.y-e.y;return t*t+i*i}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this}lerpVectors(e,t,i){return this.x=e.x+(t.x-e.x)*i,this.y=e.y+(t.y-e.y)*i,this}equals(e){return e.x===this.x&&e.y===this.y}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this}rotateAround(e,t){const i=Math.cos(t),r=Math.sin(t),s=this.x-e.x,o=this.y-e.y;return this.x=s*i-o*r+e.x,this.y=s*r+o*i+e.y,this}random(){return this.x=Math.random(),this.y=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y}}class Jn{constructor(e,t,i,r,s,o,a,l,c){Jn.prototype.isMatrix3=!0,this.elements=[1,0,0,0,1,0,0,0,1],void 0!==e&&this.set(e,t,i,r,s,o,a,l,c)}set(e,t,i,r,s,o,a,l,c){const u=this.elements;return u[0]=e,u[1]=r,u[2]=a,u[3]=t,u[4]=s,u[5]=l,u[6]=i,u[7]=o,u[8]=c,this}identity(){return this.set(1,0,0,0,1,0,0,0,1),this}copy(e){const t=this.elements,i=e.elements;return t[0]=i[0],t[1]=i[1],t[2]=i[2],t[3]=i[3],t[4]=i[4],t[5]=i[5],t[6]=i[6],t[7]=i[7],t[8]=i[8],this}extractBasis(e,t,i){return e.setFromMatrix3Column(this,0),t.setFromMatrix3Column(this,1),i.setFromMatrix3Column(this,2),this}setFromMatrix4(e){const t=e.elements;return this.set(t[0],t[4],t[8],t[1],t[5],t[9],t[2],t[6],t[10]),this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,t){const i=e.elements,r=t.elements,s=this.elements,o=i[0],a=i[3],l=i[6],c=i[1],u=i[4],d=i[7],p=i[2],m=i[5],v=i[8],x=r[0],b=r[3],w=r[6],T=r[1],S=r[4],A=r[7],V=r[2],F=r[5],P=r[8];return s[0]=o*x+a*T+l*V,s[3]=o*b+a*S+l*F,s[6]=o*w+a*A+l*P,s[1]=c*x+u*T+d*V,s[4]=c*b+u*S+d*F,s[7]=c*w+u*A+d*P,s[2]=p*x+m*T+v*V,s[5]=p*b+m*S+v*F,s[8]=p*w+m*A+v*P,this}multiplyScalar(e){const t=this.elements;return t[0]*=e,t[3]*=e,t[6]*=e,t[1]*=e,t[4]*=e,t[7]*=e,t[2]*=e,t[5]*=e,t[8]*=e,this}determinant(){const e=this.elements,t=e[0],i=e[1],r=e[2],s=e[3],o=e[4],a=e[5],l=e[6],c=e[7],u=e[8];return t*o*u-t*a*c-i*s*u+i*a*l+r*s*c-r*o*l}invert(){const e=this.elements,t=e[0],i=e[1],r=e[2],s=e[3],o=e[4],a=e[5],l=e[6],c=e[7],u=e[8],d=u*o-a*c,p=a*l-u*s,m=c*s-o*l,v=t*d+i*p+r*m;if(0===v)return this.set(0,0,0,0,0,0,0,0,0);const x=1/v;return e[0]=d*x,e[1]=(r*c-u*i)*x,e[2]=(a*i-r*o)*x,e[3]=p*x,e[4]=(u*t-r*l)*x,e[5]=(r*s-a*t)*x,e[6]=m*x,e[7]=(i*l-c*t)*x,e[8]=(o*t-i*s)*x,this}transpose(){let e;const t=this.elements;return e=t[1],t[1]=t[3],t[3]=e,e=t[2],t[2]=t[6],t[6]=e,e=t[5],t[5]=t[7],t[7]=e,this}getNormalMatrix(e){return this.setFromMatrix4(e).invert().transpose()}transposeIntoArray(e){const t=this.elements;return e[0]=t[0],e[1]=t[3],e[2]=t[6],e[3]=t[1],e[4]=t[4],e[5]=t[7],e[6]=t[2],e[7]=t[5],e[8]=t[8],this}setUvTransform(e,t,i,r,s,o,a){const l=Math.cos(s),c=Math.sin(s);return this.set(i*l,i*c,-i*(l*o+c*a)+o+e,-r*c,r*l,-r*(-c*o+l*a)+a+t,0,0,1),this}scale(e,t){return this.premultiply(NN.makeScale(e,t)),this}rotate(e){return this.premultiply(NN.makeRotation(-e)),this}translate(e,t){return this.premultiply(NN.makeTranslation(e,t)),this}makeTranslation(e,t){return e.isVector2?this.set(1,0,e.x,0,1,e.y,0,0,1):this.set(1,0,e,0,1,t,0,0,1),this}makeRotation(e){const t=Math.cos(e),i=Math.sin(e);return this.set(t,-i,0,i,t,0,0,0,1),this}makeScale(e,t){return this.set(e,0,0,0,t,0,0,0,1),this}equals(e){const t=this.elements,i=e.elements;for(let r=0;r<9;r++)if(t[r]!==i[r])return!1;return!0}fromArray(e,t=0){for(let i=0;i<9;i++)this.elements[i]=e[i+t];return this}toArray(e=[],t=0){const i=this.elements;return e[t]=i[0],e[t+1]=i[1],e[t+2]=i[2],e[t+3]=i[3],e[t+4]=i[4],e[t+5]=i[5],e[t+6]=i[6],e[t+7]=i[7],e[t+8]=i[8],e}clone(){return(new this.constructor).fromArray(this.elements)}}const NN=new Jn;function _9(n){for(let e=n.length-1;e>=0;--e)if(n[e]>=65535)return!0;return!1}function Bb(n){return document.createElementNS("http://www.w3.org/1999/xhtml",n)}function x0e(){const n=Bb("canvas");return n.style.display="block",n}Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array;const v9={};function y_(n){n in v9||(v9[n]=!0,console.warn(n))}const y9=(new Jn).set(.4123908,.3575843,.1804808,.212639,.7151687,.0721923,.0193308,.1191948,.9505322),b9=(new Jn).set(3.2409699,-1.5373832,-.4986108,-.9692436,1.8759675,.0415551,.0556301,-.203977,1.0569715);function S0e(){const n={enabled:!0,workingColorSpace:m_,spaces:{},convert:function(r,s,o){return!1===this.enabled||s===o||!s||!o||(this.spaces[s].transfer===ir&&(r.r=Fu(r.r),r.g=Fu(r.g),r.b=Fu(r.b)),this.spaces[s].primaries!==this.spaces[o].primaries&&(r.applyMatrix3(this.spaces[s].toXYZ),r.applyMatrix3(this.spaces[o].fromXYZ)),this.spaces[o].transfer===ir&&(r.r=b_(r.r),r.g=b_(r.g),r.b=b_(r.b))),r},fromWorkingColorSpace:function(r,s){return this.convert(r,this.workingColorSpace,s)},toWorkingColorSpace:function(r,s){return this.convert(r,s,this.workingColorSpace)},getPrimaries:function(r){return this.spaces[r].primaries},getTransfer:function(r){return""===r?AA:this.spaces[r].transfer},getLuminanceCoefficients:function(r,s=this.workingColorSpace){return r.fromArray(this.spaces[s].luminanceCoefficients)},define:function(r){Object.assign(this.spaces,r)},_getMatrix:function(r,s,o){return r.copy(this.spaces[s].toXYZ).multiply(this.spaces[o].fromXYZ)},_getDrawingBufferColorSpace:function(r){return this.spaces[r].outputColorSpaceConfig.drawingBufferColorSpace},_getUnpackColorSpace:function(r=this.workingColorSpace){return this.spaces[r].workingColorSpaceConfig.unpackColorSpace}},e=[.64,.33,.3,.6,.15,.06],t=[.2126,.7152,.0722],i=[.3127,.329];return n.define({[m_]:{primaries:e,whitePoint:i,transfer:AA,toXYZ:y9,fromXYZ:b9,luminanceCoefficients:t,workingColorSpaceConfig:{unpackColorSpace:La},outputColorSpaceConfig:{drawingBufferColorSpace:La}},[La]:{primaries:e,whitePoint:i,transfer:ir,toXYZ:y9,fromXYZ:b9,luminanceCoefficients:t,outputColorSpaceConfig:{drawingBufferColorSpace:La}}}),n}const Li=S0e();function Fu(n){return n<.04045?.0773993808*n:Math.pow(.9478672986*n+.0521327014,2.4)}function b_(n){return n<.0031308?12.92*n:1.055*Math.pow(n,.41666)-.055}let x_;class A0e{static getDataURL(e){if(/^data:/i.test(e.src)||typeof HTMLCanvasElement>"u")return e.src;let t;if(e instanceof HTMLCanvasElement)t=e;else{void 0===x_&&(x_=Bb("canvas")),x_.width=e.width,x_.height=e.height;const i=x_.getContext("2d");e instanceof ImageData?i.putImageData(e,0,0):i.drawImage(e,0,0,e.width,e.height),t=x_}return t.toDataURL("image/png")}static sRGBToLinear(e){if(typeof HTMLImageElement<"u"&&e instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&e instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&e instanceof ImageBitmap){const t=Bb("canvas");t.width=e.width,t.height=e.height;const i=t.getContext("2d");i.drawImage(e,0,0,e.width,e.height);const r=i.getImageData(0,0,e.width,e.height),s=r.data;for(let o=0;o<s.length;o++)s[o]=255*Fu(s[o]/255);return i.putImageData(r,0,0),t}if(e.data){const t=e.data.slice(0);for(let i=0;i<t.length;i++)t[i]=t instanceof Uint8Array||t instanceof Uint8ClampedArray?Math.floor(255*Fu(t[i]/255)):Fu(t[i]);return{data:t,width:e.width,height:e.height}}return console.warn("THREE.ImageUtils.sRGBToLinear(): Unsupported image type. No color space conversion applied."),e}}let I0e=0;class w_{constructor(e=null){this.isSource=!0,Object.defineProperty(this,"id",{value:I0e++}),this.uuid=Va(),this.data=e,this.dataReady=!0,this.version=0}set needsUpdate(e){!0===e&&this.version++}toJSON(e){const t=void 0===e||"string"==typeof e;if(!t&&void 0!==e.images[this.uuid])return e.images[this.uuid];const i={uuid:this.uuid,url:""},r=this.data;if(null!==r){let s;if(Array.isArray(r)){s=[];for(let o=0,a=r.length;o<a;o++)s.push(FN(r[o].isDataTexture?r[o].image:r[o]))}else s=FN(r);i.url=s}return t||(e.images[this.uuid]=i),i}}function FN(n){return typeof HTMLImageElement<"u"&&n instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&n instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&n instanceof ImageBitmap?A0e.getDataURL(n):n.data?{data:Array.from(n.data),width:n.width,height:n.height,type:n.data.constructor.name}:(console.warn("THREE.Texture: Unable to serialize Texture."),{})}let C0e=0,ga=(()=>{class n extends Nu{constructor(t=n.DEFAULT_IMAGE,i=n.DEFAULT_MAPPING,r=Ll,s=Ll,o=Hs,a=ku,l=ma,c=Ou,u=n.DEFAULT_ANISOTROPY,d=""){super(),this.isTexture=!0,Object.defineProperty(this,"id",{value:C0e++}),this.uuid=Va(),this.name="",this.source=new w_(t),this.mipmaps=[],this.mapping=i,this.channel=0,this.wrapS=r,this.wrapT=s,this.magFilter=o,this.minFilter=a,this.anisotropy=u,this.format=l,this.internalFormat=null,this.type=c,this.offset=new et(0,0),this.repeat=new et(1,1),this.center=new et(0,0),this.rotation=0,this.matrixAutoUpdate=!0,this.matrix=new Jn,this.generateMipmaps=!0,this.premultiplyAlpha=!1,this.flipY=!0,this.unpackAlignment=4,this.colorSpace=d,this.userData={},this.version=0,this.onUpdate=null,this.renderTarget=null,this.isRenderTargetTexture=!1,this.pmremVersion=0}get image(){return this.source.data}set image(t=null){this.source.data=t}updateMatrix(){this.matrix.setUvTransform(this.offset.x,this.offset.y,this.repeat.x,this.repeat.y,this.rotation,this.center.x,this.center.y)}clone(){return(new this.constructor).copy(this)}copy(t){return this.name=t.name,this.source=t.source,this.mipmaps=t.mipmaps.slice(0),this.mapping=t.mapping,this.channel=t.channel,this.wrapS=t.wrapS,this.wrapT=t.wrapT,this.magFilter=t.magFilter,this.minFilter=t.minFilter,this.anisotropy=t.anisotropy,this.format=t.format,this.internalFormat=t.internalFormat,this.type=t.type,this.offset.copy(t.offset),this.repeat.copy(t.repeat),this.center.copy(t.center),this.rotation=t.rotation,this.matrixAutoUpdate=t.matrixAutoUpdate,this.matrix.copy(t.matrix),this.generateMipmaps=t.generateMipmaps,this.premultiplyAlpha=t.premultiplyAlpha,this.flipY=t.flipY,this.unpackAlignment=t.unpackAlignment,this.colorSpace=t.colorSpace,this.renderTarget=t.renderTarget,this.isRenderTargetTexture=t.isRenderTargetTexture,this.userData=JSON.parse(JSON.stringify(t.userData)),this.needsUpdate=!0,this}toJSON(t){const i=void 0===t||"string"==typeof t;if(!i&&void 0!==t.textures[this.uuid])return t.textures[this.uuid];const r={metadata:{version:4.6,type:"Texture",generator:"Texture.toJSON"},uuid:this.uuid,name:this.name,image:this.source.toJSON(t).uuid,mapping:this.mapping,channel:this.channel,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,this.offset.y],center:[this.center.x,this.center.y],rotation:this.rotation,wrap:[this.wrapS,this.wrapT],format:this.format,internalFormat:this.internalFormat,type:this.type,colorSpace:this.colorSpace,minFilter:this.minFilter,magFilter:this.magFilter,anisotropy:this.anisotropy,flipY:this.flipY,generateMipmaps:this.generateMipmaps,premultiplyAlpha:this.premultiplyAlpha,unpackAlignment:this.unpackAlignment};return Object.keys(this.userData).length>0&&(r.userData=this.userData),i||(t.textures[this.uuid]=r),r}dispose(){this.dispatchEvent({type:"dispose"})}transformUv(t){if(300!==this.mapping)return t;if(t.applyMatrix3(this.matrix),t.x<0||t.x>1)switch(this.wrapS){case 1e3:t.x=t.x-Math.floor(t.x);break;case Ll:t.x=t.x<0?0:1;break;case 1002:t.x=1===Math.abs(Math.floor(t.x)%2)?Math.ceil(t.x)-t.x:t.x-Math.floor(t.x)}if(t.y<0||t.y>1)switch(this.wrapT){case 1e3:t.y=t.y-Math.floor(t.y);break;case Ll:t.y=t.y<0?0:1;break;case 1002:t.y=1===Math.abs(Math.floor(t.y)%2)?Math.ceil(t.y)-t.y:t.y-Math.floor(t.y)}return this.flipY&&(t.y=1-t.y),t}set needsUpdate(t){!0===t&&(this.version++,this.source.needsUpdate=!0)}set needsPMREMUpdate(t){!0===t&&this.pmremVersion++}}return n.DEFAULT_IMAGE=null,n.DEFAULT_MAPPING=300,n.DEFAULT_ANISOTROPY=1,n})();class zi{constructor(e=0,t=0,i=0,r=1){zi.prototype.isVector4=!0,this.x=e,this.y=t,this.z=i,this.w=r}get width(){return this.z}set width(e){this.z=e}get height(){return this.w}set height(e){this.w=e}set(e,t,i,r){return this.x=e,this.y=t,this.z=i,this.w=r,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this.w=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setW(e){return this.w=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;case 3:this.w=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z,this.w)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this.w=void 0!==e.w?e.w:1,this}add(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this.w+=e.w,this}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this.w+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this.w=e.w+t.w,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this.w+=e.w*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this.w-=e.w,this}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this.w-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this.w=e.w-t.w,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this.w*=e.w,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this.w*=e,this}applyMatrix4(e){const t=this.x,i=this.y,r=this.z,s=this.w,o=e.elements;return this.x=o[0]*t+o[4]*i+o[8]*r+o[12]*s,this.y=o[1]*t+o[5]*i+o[9]*r+o[13]*s,this.z=o[2]*t+o[6]*i+o[10]*r+o[14]*s,this.w=o[3]*t+o[7]*i+o[11]*r+o[15]*s,this}divide(e){return this.x/=e.x,this.y/=e.y,this.z/=e.z,this.w/=e.w,this}divideScalar(e){return this.multiplyScalar(1/e)}setAxisAngleFromQuaternion(e){this.w=2*Math.acos(e.w);const t=Math.sqrt(1-e.w*e.w);return t<1e-4?(this.x=1,this.y=0,this.z=0):(this.x=e.x/t,this.y=e.y/t,this.z=e.z/t),this}setAxisAngleFromRotationMatrix(e){let t,i,r,s;const l=e.elements,c=l[0],u=l[4],d=l[8],p=l[1],m=l[5],v=l[9],x=l[2],b=l[6],w=l[10];if(Math.abs(u-p)<.01&&Math.abs(d-x)<.01&&Math.abs(v-b)<.01){if(Math.abs(u+p)<.1&&Math.abs(d+x)<.1&&Math.abs(v+b)<.1&&Math.abs(c+m+w-3)<.1)return this.set(1,0,0,0),this;t=Math.PI;const S=(c+1)/2,A=(m+1)/2,V=(w+1)/2,F=(u+p)/4,P=(d+x)/4,D=(v+b)/4;return S>A&&S>V?S<.01?(i=0,r=.707106781,s=.707106781):(i=Math.sqrt(S),r=F/i,s=P/i):A>V?A<.01?(i=.707106781,r=0,s=.707106781):(r=Math.sqrt(A),i=F/r,s=D/r):V<.01?(i=.707106781,r=.707106781,s=0):(s=Math.sqrt(V),i=P/s,r=D/s),this.set(i,r,s,t),this}let T=Math.sqrt((b-v)*(b-v)+(d-x)*(d-x)+(p-u)*(p-u));return Math.abs(T)<.001&&(T=1),this.x=(b-v)/T,this.y=(d-x)/T,this.z=(p-u)/T,this.w=Math.acos((c+m+w-1)/2),this}setFromMatrixPosition(e){const t=e.elements;return this.x=t[12],this.y=t[13],this.z=t[14],this.w=t[15],this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this.w=Math.min(this.w,e.w),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this.w=Math.max(this.w,e.w),this}clamp(e,t){return this.x=Xn(this.x,e.x,t.x),this.y=Xn(this.y,e.y,t.y),this.z=Xn(this.z,e.z,t.z),this.w=Xn(this.w,e.w,t.w),this}clampScalar(e,t){return this.x=Xn(this.x,e,t),this.y=Xn(this.y,e,t),this.z=Xn(this.z,e,t),this.w=Xn(this.w,e,t),this}clampLength(e,t){const i=this.length();return this.divideScalar(i||1).multiplyScalar(Xn(i,e,t))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this.w=Math.floor(this.w),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this.w=Math.ceil(this.w),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this.w=Math.round(this.w),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this.z=Math.trunc(this.z),this.w=Math.trunc(this.w),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z+this.w*e.w}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this.w+=(e.w-this.w)*t,this}lerpVectors(e,t,i){return this.x=e.x+(t.x-e.x)*i,this.y=e.y+(t.y-e.y)*i,this.z=e.z+(t.z-e.z)*i,this.w=e.w+(t.w-e.w)*i,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z&&e.w===this.w}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this.z=e[t+2],this.w=e[t+3],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e[t+3]=this.w,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this.w=e.getW(t),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this.w=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z,yield this.w}}class LN extends Nu{constructor(e=1,t=1,i={}){super(),this.isRenderTarget=!0,this.width=e,this.height=t,this.depth=1,this.scissor=new zi(0,0,e,t),this.scissorTest=!1,this.viewport=new zi(0,0,e,t);const r={width:e,height:t,depth:1};i=Object.assign({generateMipmaps:!1,internalFormat:null,minFilter:Hs,depthBuffer:!0,stencilBuffer:!1,resolveDepthBuffer:!0,resolveStencilBuffer:!0,depthTexture:null,samples:0,count:1},i);const s=new ga(r,i.mapping,i.wrapS,i.wrapT,i.magFilter,i.minFilter,i.format,i.type,i.anisotropy,i.colorSpace);s.flipY=!1,s.generateMipmaps=i.generateMipmaps,s.internalFormat=i.internalFormat,this.textures=[];const o=i.count;for(let a=0;a<o;a++)this.textures[a]=s.clone(),this.textures[a].isRenderTargetTexture=!0,this.textures[a].renderTarget=this;this.depthBuffer=i.depthBuffer,this.stencilBuffer=i.stencilBuffer,this.resolveDepthBuffer=i.resolveDepthBuffer,this.resolveStencilBuffer=i.resolveStencilBuffer,this._depthTexture=null,this.depthTexture=i.depthTexture,this.samples=i.samples}get texture(){return this.textures[0]}set texture(e){this.textures[0]=e}set depthTexture(e){null!==this._depthTexture&&(this._depthTexture.renderTarget=null),null!==e&&(e.renderTarget=this),this._depthTexture=e}get depthTexture(){return this._depthTexture}setSize(e,t,i=1){if(this.width!==e||this.height!==t||this.depth!==i){this.width=e,this.height=t,this.depth=i;for(let r=0,s=this.textures.length;r<s;r++)this.textures[r].image.width=e,this.textures[r].image.height=t,this.textures[r].image.depth=i;this.dispose()}this.viewport.set(0,0,e,t),this.scissor.set(0,0,e,t)}clone(){return(new this.constructor).copy(this)}copy(e){this.width=e.width,this.height=e.height,this.depth=e.depth,this.scissor.copy(e.scissor),this.scissorTest=e.scissorTest,this.viewport.copy(e.viewport),this.textures.length=0;for(let i=0,r=e.textures.length;i<r;i++)this.textures[i]=e.textures[i].clone(),this.textures[i].isRenderTargetTexture=!0,this.textures[i].renderTarget=this;const t=Object.assign({},e.texture.image);return this.texture.source=new w_(t),this.depthBuffer=e.depthBuffer,this.stencilBuffer=e.stencilBuffer,this.resolveDepthBuffer=e.resolveDepthBuffer,this.resolveStencilBuffer=e.resolveStencilBuffer,null!==e.depthTexture&&(this.depthTexture=e.depthTexture.clone()),this.samples=e.samples,this}dispose(){this.dispatchEvent({type:"dispose"})}}class Lu extends LN{constructor(e=1,t=1,i={}){super(e,t,i),this.isWebGLRenderTarget=!0}}class MA extends ga{constructor(e=null,t=1,i=1,r=1){super(null),this.isDataArrayTexture=!0,this.image={data:e,width:t,height:i,depth:r},this.magFilter=To,this.minFilter=To,this.wrapR=Ll,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1,this.layerUpdates=new Set}addLayerUpdate(e){this.layerUpdates.add(e)}clearLayerUpdates(){this.layerUpdates.clear()}}class VN extends ga{constructor(e=null,t=1,i=1,r=1){super(null),this.isData3DTexture=!0,this.image={data:e,width:t,height:i,depth:r},this.magFilter=To,this.minFilter=To,this.wrapR=Ll,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}class Ua{constructor(e=0,t=0,i=0,r=1){this.isQuaternion=!0,this._x=e,this._y=t,this._z=i,this._w=r}static slerpFlat(e,t,i,r,s,o,a){let l=i[r+0],c=i[r+1],u=i[r+2],d=i[r+3];const p=s[o+0],m=s[o+1],v=s[o+2],x=s[o+3];if(0===a)return e[t+0]=l,e[t+1]=c,e[t+2]=u,void(e[t+3]=d);if(1===a)return e[t+0]=p,e[t+1]=m,e[t+2]=v,void(e[t+3]=x);if(d!==x||l!==p||c!==m||u!==v){let b=1-a;const w=l*p+c*m+u*v+d*x,T=w>=0?1:-1,S=1-w*w;if(S>Number.EPSILON){const V=Math.sqrt(S),F=Math.atan2(V,w*T);b=Math.sin(b*F)/V,a=Math.sin(a*F)/V}const A=a*T;if(l=l*b+p*A,c=c*b+m*A,u=u*b+v*A,d=d*b+x*A,b===1-a){const V=1/Math.sqrt(l*l+c*c+u*u+d*d);l*=V,c*=V,u*=V,d*=V}}e[t]=l,e[t+1]=c,e[t+2]=u,e[t+3]=d}static multiplyQuaternionsFlat(e,t,i,r,s,o){const a=i[r],l=i[r+1],c=i[r+2],u=i[r+3],d=s[o],p=s[o+1],m=s[o+2],v=s[o+3];return e[t]=a*v+u*d+l*m-c*p,e[t+1]=l*v+u*p+c*d-a*m,e[t+2]=c*v+u*m+a*p-l*d,e[t+3]=u*v-a*d-l*p-c*m,e}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get w(){return this._w}set w(e){this._w=e,this._onChangeCallback()}set(e,t,i,r){return this._x=e,this._y=t,this._z=i,this._w=r,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._w)}copy(e){return this._x=e.x,this._y=e.y,this._z=e.z,this._w=e.w,this._onChangeCallback(),this}setFromEuler(e,t=!0){const i=e._x,r=e._y,s=e._z,o=e._order,a=Math.cos,l=Math.sin,c=a(i/2),u=a(r/2),d=a(s/2),p=l(i/2),m=l(r/2),v=l(s/2);switch(o){case"XYZ":this._x=p*u*d+c*m*v,this._y=c*m*d-p*u*v,this._z=c*u*v+p*m*d,this._w=c*u*d-p*m*v;break;case"YXZ":this._x=p*u*d+c*m*v,this._y=c*m*d-p*u*v,this._z=c*u*v-p*m*d,this._w=c*u*d+p*m*v;break;case"ZXY":this._x=p*u*d-c*m*v,this._y=c*m*d+p*u*v,this._z=c*u*v+p*m*d,this._w=c*u*d-p*m*v;break;case"ZYX":this._x=p*u*d-c*m*v,this._y=c*m*d+p*u*v,this._z=c*u*v-p*m*d,this._w=c*u*d+p*m*v;break;case"YZX":this._x=p*u*d+c*m*v,this._y=c*m*d+p*u*v,this._z=c*u*v-p*m*d,this._w=c*u*d-p*m*v;break;case"XZY":this._x=p*u*d-c*m*v,this._y=c*m*d-p*u*v,this._z=c*u*v+p*m*d,this._w=c*u*d+p*m*v;break;default:console.warn("THREE.Quaternion: .setFromEuler() encountered an unknown order: "+o)}return!0===t&&this._onChangeCallback(),this}setFromAxisAngle(e,t){const i=t/2,r=Math.sin(i);return this._x=e.x*r,this._y=e.y*r,this._z=e.z*r,this._w=Math.cos(i),this._onChangeCallback(),this}setFromRotationMatrix(e){const t=e.elements,i=t[0],r=t[4],s=t[8],o=t[1],a=t[5],l=t[9],c=t[2],u=t[6],d=t[10],p=i+a+d;if(p>0){const m=.5/Math.sqrt(p+1);this._w=.25/m,this._x=(u-l)*m,this._y=(s-c)*m,this._z=(o-r)*m}else if(i>a&&i>d){const m=2*Math.sqrt(1+i-a-d);this._w=(u-l)/m,this._x=.25*m,this._y=(r+o)/m,this._z=(s+c)/m}else if(a>d){const m=2*Math.sqrt(1+a-i-d);this._w=(s-c)/m,this._x=(r+o)/m,this._y=.25*m,this._z=(l+u)/m}else{const m=2*Math.sqrt(1+d-i-a);this._w=(o-r)/m,this._x=(s+c)/m,this._y=(l+u)/m,this._z=.25*m}return this._onChangeCallback(),this}setFromUnitVectors(e,t){let i=e.dot(t)+1;return i<Number.EPSILON?(i=0,Math.abs(e.x)>Math.abs(e.z)?(this._x=-e.y,this._y=e.x,this._z=0,this._w=i):(this._x=0,this._y=-e.z,this._z=e.y,this._w=i)):(this._x=e.y*t.z-e.z*t.y,this._y=e.z*t.x-e.x*t.z,this._z=e.x*t.y-e.y*t.x,this._w=i),this.normalize()}angleTo(e){return 2*Math.acos(Math.abs(Xn(this.dot(e),-1,1)))}rotateTowards(e,t){const i=this.angleTo(e);if(0===i)return this;const r=Math.min(1,t/i);return this.slerp(e,r),this}identity(){return this.set(0,0,0,1)}invert(){return this.conjugate()}conjugate(){return this._x*=-1,this._y*=-1,this._z*=-1,this._onChangeCallback(),this}dot(e){return this._x*e._x+this._y*e._y+this._z*e._z+this._w*e._w}lengthSq(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w}length(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)}normalize(){let e=this.length();return 0===e?(this._x=0,this._y=0,this._z=0,this._w=1):(e=1/e,this._x=this._x*e,this._y=this._y*e,this._z=this._z*e,this._w=this._w*e),this._onChangeCallback(),this}multiply(e){return this.multiplyQuaternions(this,e)}premultiply(e){return this.multiplyQuaternions(e,this)}multiplyQuaternions(e,t){const i=e._x,r=e._y,s=e._z,o=e._w,a=t._x,l=t._y,c=t._z,u=t._w;return this._x=i*u+o*a+r*c-s*l,this._y=r*u+o*l+s*a-i*c,this._z=s*u+o*c+i*l-r*a,this._w=o*u-i*a-r*l-s*c,this._onChangeCallback(),this}slerp(e,t){if(0===t)return this;if(1===t)return this.copy(e);const i=this._x,r=this._y,s=this._z,o=this._w;let a=o*e._w+i*e._x+r*e._y+s*e._z;if(a<0?(this._w=-e._w,this._x=-e._x,this._y=-e._y,this._z=-e._z,a=-a):this.copy(e),a>=1)return this._w=o,this._x=i,this._y=r,this._z=s,this;const l=1-a*a;if(l<=Number.EPSILON){const m=1-t;return this._w=m*o+t*this._w,this._x=m*i+t*this._x,this._y=m*r+t*this._y,this._z=m*s+t*this._z,this.normalize(),this}const c=Math.sqrt(l),u=Math.atan2(c,a),d=Math.sin((1-t)*u)/c,p=Math.sin(t*u)/c;return this._w=o*d+this._w*p,this._x=i*d+this._x*p,this._y=r*d+this._y*p,this._z=s*d+this._z*p,this._onChangeCallback(),this}slerpQuaternions(e,t,i){return this.copy(e).slerp(t,i)}random(){const e=2*Math.PI*Math.random(),t=2*Math.PI*Math.random(),i=Math.random(),r=Math.sqrt(1-i),s=Math.sqrt(i);return this.set(r*Math.sin(e),r*Math.cos(e),s*Math.sin(t),s*Math.cos(t))}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._w===this._w}fromArray(e,t=0){return this._x=e[t],this._y=e[t+1],this._z=e[t+2],this._w=e[t+3],this._onChangeCallback(),this}toArray(e=[],t=0){return e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._w,e}fromBufferAttribute(e,t){return this._x=e.getX(t),this._y=e.getY(t),this._z=e.getZ(t),this._w=e.getW(t),this._onChangeCallback(),this}toJSON(){return this.toArray()}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._w}}class j{constructor(e=0,t=0,i=0){j.prototype.isVector3=!0,this.x=e,this.y=t,this.z=i}set(e,t,i){return void 0===i&&(i=this.z),this.x=e,this.y=t,this.z=i,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this}add(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this}multiplyVectors(e,t){return this.x=e.x*t.x,this.y=e.y*t.y,this.z=e.z*t.z,this}applyEuler(e){return this.applyQuaternion(x9.setFromEuler(e))}applyAxisAngle(e,t){return this.applyQuaternion(x9.setFromAxisAngle(e,t))}applyMatrix3(e){const t=this.x,i=this.y,r=this.z,s=e.elements;return this.x=s[0]*t+s[3]*i+s[6]*r,this.y=s[1]*t+s[4]*i+s[7]*r,this.z=s[2]*t+s[5]*i+s[8]*r,this}applyNormalMatrix(e){return this.applyMatrix3(e).normalize()}applyMatrix4(e){const t=this.x,i=this.y,r=this.z,s=e.elements,o=1/(s[3]*t+s[7]*i+s[11]*r+s[15]);return this.x=(s[0]*t+s[4]*i+s[8]*r+s[12])*o,this.y=(s[1]*t+s[5]*i+s[9]*r+s[13])*o,this.z=(s[2]*t+s[6]*i+s[10]*r+s[14])*o,this}applyQuaternion(e){const t=this.x,i=this.y,r=this.z,s=e.x,o=e.y,a=e.z,l=e.w,c=2*(o*r-a*i),u=2*(a*t-s*r),d=2*(s*i-o*t);return this.x=t+l*c+o*d-a*u,this.y=i+l*u+a*c-s*d,this.z=r+l*d+s*u-o*c,this}project(e){return this.applyMatrix4(e.matrixWorldInverse).applyMatrix4(e.projectionMatrix)}unproject(e){return this.applyMatrix4(e.projectionMatrixInverse).applyMatrix4(e.matrixWorld)}transformDirection(e){const t=this.x,i=this.y,r=this.z,s=e.elements;return this.x=s[0]*t+s[4]*i+s[8]*r,this.y=s[1]*t+s[5]*i+s[9]*r,this.z=s[2]*t+s[6]*i+s[10]*r,this.normalize()}divide(e){return this.x/=e.x,this.y/=e.y,this.z/=e.z,this}divideScalar(e){return this.multiplyScalar(1/e)}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this}clamp(e,t){return this.x=Xn(this.x,e.x,t.x),this.y=Xn(this.y,e.y,t.y),this.z=Xn(this.z,e.z,t.z),this}clampScalar(e,t){return this.x=Xn(this.x,e,t),this.y=Xn(this.y,e,t),this.z=Xn(this.z,e,t),this}clampLength(e,t){const i=this.length();return this.divideScalar(i||1).multiplyScalar(Xn(i,e,t))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this.z=Math.trunc(this.z),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this}lerpVectors(e,t,i){return this.x=e.x+(t.x-e.x)*i,this.y=e.y+(t.y-e.y)*i,this.z=e.z+(t.z-e.z)*i,this}cross(e){return this.crossVectors(this,e)}crossVectors(e,t){const i=e.x,r=e.y,s=e.z,o=t.x,a=t.y,l=t.z;return this.x=r*l-s*a,this.y=s*o-i*l,this.z=i*a-r*o,this}projectOnVector(e){const t=e.lengthSq();if(0===t)return this.set(0,0,0);const i=e.dot(this)/t;return this.copy(e).multiplyScalar(i)}projectOnPlane(e){return UN.copy(this).projectOnVector(e),this.sub(UN)}reflect(e){return this.sub(UN.copy(e).multiplyScalar(2*this.dot(e)))}angleTo(e){const t=Math.sqrt(this.lengthSq()*e.lengthSq());if(0===t)return Math.PI/2;const i=this.dot(e)/t;return Math.acos(Xn(i,-1,1))}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){const t=this.x-e.x,i=this.y-e.y,r=this.z-e.z;return t*t+i*i+r*r}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)+Math.abs(this.z-e.z)}setFromSpherical(e){return this.setFromSphericalCoords(e.radius,e.phi,e.theta)}setFromSphericalCoords(e,t,i){const r=Math.sin(t)*e;return this.x=r*Math.sin(i),this.y=Math.cos(t)*e,this.z=r*Math.cos(i),this}setFromCylindrical(e){return this.setFromCylindricalCoords(e.radius,e.theta,e.y)}setFromCylindricalCoords(e,t,i){return this.x=e*Math.sin(t),this.y=i,this.z=e*Math.cos(t),this}setFromMatrixPosition(e){const t=e.elements;return this.x=t[12],this.y=t[13],this.z=t[14],this}setFromMatrixScale(e){const t=this.setFromMatrixColumn(e,0).length(),i=this.setFromMatrixColumn(e,1).length(),r=this.setFromMatrixColumn(e,2).length();return this.x=t,this.y=i,this.z=r,this}setFromMatrixColumn(e,t){return this.fromArray(e.elements,4*t)}setFromMatrix3Column(e,t){return this.fromArray(e.elements,3*t)}setFromEuler(e){return this.x=e._x,this.y=e._y,this.z=e._z,this}setFromColor(e){return this.x=e.r,this.y=e.g,this.z=e.b,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this.z=e[t+2],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this}randomDirection(){const e=Math.random()*Math.PI*2,t=2*Math.random()-1,i=Math.sqrt(1-t*t);return this.x=i*Math.cos(e),this.y=t,this.z=i*Math.sin(e),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z}}const UN=new j,x9=new Ua;class _a{constructor(e=new j(1/0,1/0,1/0),t=new j(-1/0,-1/0,-1/0)){this.isBox3=!0,this.min=e,this.max=t}set(e,t){return this.min.copy(e),this.max.copy(t),this}setFromArray(e){this.makeEmpty();for(let t=0,i=e.length;t<i;t+=3)this.expandByPoint(Vl.fromArray(e,t));return this}setFromBufferAttribute(e){this.makeEmpty();for(let t=0,i=e.count;t<i;t++)this.expandByPoint(Vl.fromBufferAttribute(e,t));return this}setFromPoints(e){this.makeEmpty();for(let t=0,i=e.length;t<i;t++)this.expandByPoint(e[t]);return this}setFromCenterAndSize(e,t){const i=Vl.copy(t).multiplyScalar(.5);return this.min.copy(e).sub(i),this.max.copy(e).add(i),this}setFromObject(e,t=!1){return this.makeEmpty(),this.expandByObject(e,t)}clone(){return(new this.constructor).copy(this)}copy(e){return this.min.copy(e.min),this.max.copy(e.max),this}makeEmpty(){return this.min.x=this.min.y=this.min.z=1/0,this.max.x=this.max.y=this.max.z=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z}getCenter(e){return this.isEmpty()?e.set(0,0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(e){return this.isEmpty()?e.set(0,0,0):e.subVectors(this.max,this.min)}expandByPoint(e){return this.min.min(e),this.max.max(e),this}expandByVector(e){return this.min.sub(e),this.max.add(e),this}expandByScalar(e){return this.min.addScalar(-e),this.max.addScalar(e),this}expandByObject(e,t=!1){e.updateWorldMatrix(!1,!1);const i=e.geometry;if(void 0!==i){const s=i.getAttribute("position");if(!0===t&&void 0!==s&&!0!==e.isInstancedMesh)for(let o=0,a=s.count;o<a;o++)!0===e.isMesh?e.getVertexPosition(o,Vl):Vl.fromBufferAttribute(s,o),Vl.applyMatrix4(e.matrixWorld),this.expandByPoint(Vl);else void 0!==e.boundingBox?(null===e.boundingBox&&e.computeBoundingBox(),DA.copy(e.boundingBox)):(null===i.boundingBox&&i.computeBoundingBox(),DA.copy(i.boundingBox)),DA.applyMatrix4(e.matrixWorld),this.union(DA)}const r=e.children;for(let s=0,o=r.length;s<o;s++)this.expandByObject(r[s],t);return this}containsPoint(e){return e.x>=this.min.x&&e.x<=this.max.x&&e.y>=this.min.y&&e.y<=this.max.y&&e.z>=this.min.z&&e.z<=this.max.z}containsBox(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y&&this.min.z<=e.min.z&&e.max.z<=this.max.z}getParameter(e,t){return t.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y),(e.z-this.min.z)/(this.max.z-this.min.z))}intersectsBox(e){return e.max.x>=this.min.x&&e.min.x<=this.max.x&&e.max.y>=this.min.y&&e.min.y<=this.max.y&&e.max.z>=this.min.z&&e.min.z<=this.max.z}intersectsSphere(e){return this.clampPoint(e.center,Vl),Vl.distanceToSquared(e.center)<=e.radius*e.radius}intersectsPlane(e){let t,i;return e.normal.x>0?(t=e.normal.x*this.min.x,i=e.normal.x*this.max.x):(t=e.normal.x*this.max.x,i=e.normal.x*this.min.x),e.normal.y>0?(t+=e.normal.y*this.min.y,i+=e.normal.y*this.max.y):(t+=e.normal.y*this.max.y,i+=e.normal.y*this.min.y),e.normal.z>0?(t+=e.normal.z*this.min.z,i+=e.normal.z*this.max.z):(t+=e.normal.z*this.max.z,i+=e.normal.z*this.min.z),t<=-e.constant&&i>=-e.constant}intersectsTriangle(e){if(this.isEmpty())return!1;this.getCenter(zb),RA.subVectors(this.max,zb),E_.subVectors(e.a,zb),T_.subVectors(e.b,zb),S_.subVectors(e.c,zb),ch.subVectors(T_,E_),uh.subVectors(S_,T_),Jf.subVectors(E_,S_);let t=[0,-ch.z,ch.y,0,-uh.z,uh.y,0,-Jf.z,Jf.y,ch.z,0,-ch.x,uh.z,0,-uh.x,Jf.z,0,-Jf.x,-ch.y,ch.x,0,-uh.y,uh.x,0,-Jf.y,Jf.x,0];return!(!BN(t,E_,T_,S_,RA)||(t=[1,0,0,0,1,0,0,0,1],!BN(t,E_,T_,S_,RA)))&&(PA.crossVectors(ch,uh),t=[PA.x,PA.y,PA.z],BN(t,E_,T_,S_,RA))}clampPoint(e,t){return t.copy(e).clamp(this.min,this.max)}distanceToPoint(e){return this.clampPoint(e,Vl).distanceTo(e)}getBoundingSphere(e){return this.isEmpty()?e.makeEmpty():(this.getCenter(e.center),e.radius=.5*this.getSize(Vl).length()),e}intersect(e){return this.min.max(e.min),this.max.min(e.max),this.isEmpty()&&this.makeEmpty(),this}union(e){return this.min.min(e.min),this.max.max(e.max),this}applyMatrix4(e){return this.isEmpty()||(Vu[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(e),Vu[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(e),Vu[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(e),Vu[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(e),Vu[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(e),Vu[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(e),Vu[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(e),Vu[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(e),this.setFromPoints(Vu)),this}translate(e){return this.min.add(e),this.max.add(e),this}equals(e){return e.min.equals(this.min)&&e.max.equals(this.max)}}const Vu=[new j,new j,new j,new j,new j,new j,new j,new j],Vl=new j,DA=new _a,E_=new j,T_=new j,S_=new j,ch=new j,uh=new j,Jf=new j,zb=new j,RA=new j,PA=new j,ep=new j;function BN(n,e,t,i,r){for(let s=0,o=n.length-3;s<=o;s+=3){ep.fromArray(n,s);const a=r.x*Math.abs(ep.x)+r.y*Math.abs(ep.y)+r.z*Math.abs(ep.z),l=e.dot(ep),c=t.dot(ep),u=i.dot(ep);if(Math.max(-Math.max(l,c,u),Math.min(l,c,u))>a)return!1}return!0}const M0e=new _a,Hb=new j,zN=new j;class qo{constructor(e=new j,t=-1){this.isSphere=!0,this.center=e,this.radius=t}set(e,t){return this.center.copy(e),this.radius=t,this}setFromPoints(e,t){const i=this.center;void 0!==t?i.copy(t):M0e.setFromPoints(e).getCenter(i);let r=0;for(let s=0,o=e.length;s<o;s++)r=Math.max(r,i.distanceToSquared(e[s]));return this.radius=Math.sqrt(r),this}copy(e){return this.center.copy(e.center),this.radius=e.radius,this}isEmpty(){return this.radius<0}makeEmpty(){return this.center.set(0,0,0),this.radius=-1,this}containsPoint(e){return e.distanceToSquared(this.center)<=this.radius*this.radius}distanceToPoint(e){return e.distanceTo(this.center)-this.radius}intersectsSphere(e){const t=this.radius+e.radius;return e.center.distanceToSquared(this.center)<=t*t}intersectsBox(e){return e.intersectsSphere(this)}intersectsPlane(e){return Math.abs(e.distanceToPoint(this.center))<=this.radius}clampPoint(e,t){const i=this.center.distanceToSquared(e);return t.copy(e),i>this.radius*this.radius&&(t.sub(this.center).normalize(),t.multiplyScalar(this.radius).add(this.center)),t}getBoundingBox(e){return this.isEmpty()?(e.makeEmpty(),e):(e.set(this.center,this.center),e.expandByScalar(this.radius),e)}applyMatrix4(e){return this.center.applyMatrix4(e),this.radius=this.radius*e.getMaxScaleOnAxis(),this}translate(e){return this.center.add(e),this}expandByPoint(e){if(this.isEmpty())return this.center.copy(e),this.radius=0,this;Hb.subVectors(e,this.center);const t=Hb.lengthSq();if(t>this.radius*this.radius){const i=Math.sqrt(t),r=.5*(i-this.radius);this.center.addScaledVector(Hb,r/i),this.radius+=r}return this}union(e){return e.isEmpty()?this:this.isEmpty()?(this.copy(e),this):(!0===this.center.equals(e.center)?this.radius=Math.max(this.radius,e.radius):(zN.subVectors(e.center,this.center).setLength(e.radius),this.expandByPoint(Hb.copy(e.center).add(zN)),this.expandByPoint(Hb.copy(e.center).sub(zN))),this)}equals(e){return e.center.equals(this.center)&&e.radius===this.radius}clone(){return(new this.constructor).copy(this)}}const Uu=new j,HN=new j,kA=new j,dh=new j,GN=new j,OA=new j,WN=new j;class Gb{constructor(e=new j,t=new j(0,0,-1)){this.origin=e,this.direction=t}set(e,t){return this.origin.copy(e),this.direction.copy(t),this}copy(e){return this.origin.copy(e.origin),this.direction.copy(e.direction),this}at(e,t){return t.copy(this.origin).addScaledVector(this.direction,e)}lookAt(e){return this.direction.copy(e).sub(this.origin).normalize(),this}recast(e){return this.origin.copy(this.at(e,Uu)),this}closestPointToPoint(e,t){t.subVectors(e,this.origin);const i=t.dot(this.direction);return i<0?t.copy(this.origin):t.copy(this.origin).addScaledVector(this.direction,i)}distanceToPoint(e){return Math.sqrt(this.distanceSqToPoint(e))}distanceSqToPoint(e){const t=Uu.subVectors(e,this.origin).dot(this.direction);return t<0?this.origin.distanceToSquared(e):(Uu.copy(this.origin).addScaledVector(this.direction,t),Uu.distanceToSquared(e))}distanceSqToSegment(e,t,i,r){HN.copy(e).add(t).multiplyScalar(.5),kA.copy(t).sub(e).normalize(),dh.copy(this.origin).sub(HN);const s=.5*e.distanceTo(t),o=-this.direction.dot(kA),a=dh.dot(this.direction),l=-dh.dot(kA),c=dh.lengthSq(),u=Math.abs(1-o*o);let d,p,m,v;if(u>0)if(d=o*l-a,p=o*a-l,v=s*u,d>=0)if(p>=-v)if(p<=v){const x=1/u;d*=x,p*=x,m=d*(d+o*p+2*a)+p*(o*d+p+2*l)+c}else p=s,d=Math.max(0,-(o*p+a)),m=-d*d+p*(p+2*l)+c;else p=-s,d=Math.max(0,-(o*p+a)),m=-d*d+p*(p+2*l)+c;else p<=-v?(d=Math.max(0,-(-o*s+a)),p=d>0?-s:Math.min(Math.max(-s,-l),s),m=-d*d+p*(p+2*l)+c):p<=v?(d=0,p=Math.min(Math.max(-s,-l),s),m=p*(p+2*l)+c):(d=Math.max(0,-(o*s+a)),p=d>0?s:Math.min(Math.max(-s,-l),s),m=-d*d+p*(p+2*l)+c);else p=o>0?-s:s,d=Math.max(0,-(o*p+a)),m=-d*d+p*(p+2*l)+c;return i&&i.copy(this.origin).addScaledVector(this.direction,d),r&&r.copy(HN).addScaledVector(kA,p),m}intersectSphere(e,t){Uu.subVectors(e.center,this.origin);const i=Uu.dot(this.direction),r=Uu.dot(Uu)-i*i,s=e.radius*e.radius;if(r>s)return null;const o=Math.sqrt(s-r),a=i-o,l=i+o;return l<0?null:this.at(a<0?l:a,t)}intersectsSphere(e){return this.distanceSqToPoint(e.center)<=e.radius*e.radius}distanceToPlane(e){const t=e.normal.dot(this.direction);if(0===t)return 0===e.distanceToPoint(this.origin)?0:null;const i=-(this.origin.dot(e.normal)+e.constant)/t;return i>=0?i:null}intersectPlane(e,t){const i=this.distanceToPlane(e);return null===i?null:this.at(i,t)}intersectsPlane(e){const t=e.distanceToPoint(this.origin);return 0===t||e.normal.dot(this.direction)*t<0}intersectBox(e,t){let i,r,s,o,a,l;const c=1/this.direction.x,u=1/this.direction.y,d=1/this.direction.z,p=this.origin;return c>=0?(i=(e.min.x-p.x)*c,r=(e.max.x-p.x)*c):(i=(e.max.x-p.x)*c,r=(e.min.x-p.x)*c),u>=0?(s=(e.min.y-p.y)*u,o=(e.max.y-p.y)*u):(s=(e.max.y-p.y)*u,o=(e.min.y-p.y)*u),i>o||s>r||((s>i||isNaN(i))&&(i=s),(o<r||isNaN(r))&&(r=o),d>=0?(a=(e.min.z-p.z)*d,l=(e.max.z-p.z)*d):(a=(e.max.z-p.z)*d,l=(e.min.z-p.z)*d),i>l||a>r)||((a>i||i!=i)&&(i=a),(l<r||r!=r)&&(r=l),r<0)?null:this.at(i>=0?i:r,t)}intersectsBox(e){return null!==this.intersectBox(e,Uu)}intersectTriangle(e,t,i,r,s){GN.subVectors(t,e),OA.subVectors(i,e),WN.crossVectors(GN,OA);let a,o=this.direction.dot(WN);if(o>0){if(r)return null;a=1}else{if(!(o<0))return null;a=-1,o=-o}dh.subVectors(this.origin,e);const l=a*this.direction.dot(OA.crossVectors(dh,OA));if(l<0)return null;const c=a*this.direction.dot(GN.cross(dh));if(c<0||l+c>o)return null;const u=-a*dh.dot(WN);return u<0?null:this.at(u/o,s)}applyMatrix4(e){return this.origin.applyMatrix4(e),this.direction.transformDirection(e),this}equals(e){return e.origin.equals(this.origin)&&e.direction.equals(this.direction)}clone(){return(new this.constructor).copy(this)}}class Un{constructor(e,t,i,r,s,o,a,l,c,u,d,p,m,v,x,b){Un.prototype.isMatrix4=!0,this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],void 0!==e&&this.set(e,t,i,r,s,o,a,l,c,u,d,p,m,v,x,b)}set(e,t,i,r,s,o,a,l,c,u,d,p,m,v,x,b){const w=this.elements;return w[0]=e,w[4]=t,w[8]=i,w[12]=r,w[1]=s,w[5]=o,w[9]=a,w[13]=l,w[2]=c,w[6]=u,w[10]=d,w[14]=p,w[3]=m,w[7]=v,w[11]=x,w[15]=b,this}identity(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this}clone(){return(new Un).fromArray(this.elements)}copy(e){const t=this.elements,i=e.elements;return t[0]=i[0],t[1]=i[1],t[2]=i[2],t[3]=i[3],t[4]=i[4],t[5]=i[5],t[6]=i[6],t[7]=i[7],t[8]=i[8],t[9]=i[9],t[10]=i[10],t[11]=i[11],t[12]=i[12],t[13]=i[13],t[14]=i[14],t[15]=i[15],this}copyPosition(e){const t=this.elements,i=e.elements;return t[12]=i[12],t[13]=i[13],t[14]=i[14],this}setFromMatrix3(e){const t=e.elements;return this.set(t[0],t[3],t[6],0,t[1],t[4],t[7],0,t[2],t[5],t[8],0,0,0,0,1),this}extractBasis(e,t,i){return e.setFromMatrixColumn(this,0),t.setFromMatrixColumn(this,1),i.setFromMatrixColumn(this,2),this}makeBasis(e,t,i){return this.set(e.x,t.x,i.x,0,e.y,t.y,i.y,0,e.z,t.z,i.z,0,0,0,0,1),this}extractRotation(e){const t=this.elements,i=e.elements,r=1/A_.setFromMatrixColumn(e,0).length(),s=1/A_.setFromMatrixColumn(e,1).length(),o=1/A_.setFromMatrixColumn(e,2).length();return t[0]=i[0]*r,t[1]=i[1]*r,t[2]=i[2]*r,t[3]=0,t[4]=i[4]*s,t[5]=i[5]*s,t[6]=i[6]*s,t[7]=0,t[8]=i[8]*o,t[9]=i[9]*o,t[10]=i[10]*o,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this}makeRotationFromEuler(e){const t=this.elements,i=e.x,r=e.y,s=e.z,o=Math.cos(i),a=Math.sin(i),l=Math.cos(r),c=Math.sin(r),u=Math.cos(s),d=Math.sin(s);if("XYZ"===e.order){const p=o*u,m=o*d,v=a*u,x=a*d;t[0]=l*u,t[4]=-l*d,t[8]=c,t[1]=m+v*c,t[5]=p-x*c,t[9]=-a*l,t[2]=x-p*c,t[6]=v+m*c,t[10]=o*l}else if("YXZ"===e.order){const p=l*u,m=l*d,v=c*u,x=c*d;t[0]=p+x*a,t[4]=v*a-m,t[8]=o*c,t[1]=o*d,t[5]=o*u,t[9]=-a,t[2]=m*a-v,t[6]=x+p*a,t[10]=o*l}else if("ZXY"===e.order){const p=l*u,m=l*d,v=c*u,x=c*d;t[0]=p-x*a,t[4]=-o*d,t[8]=v+m*a,t[1]=m+v*a,t[5]=o*u,t[9]=x-p*a,t[2]=-o*c,t[6]=a,t[10]=o*l}else if("ZYX"===e.order){const p=o*u,m=o*d,v=a*u,x=a*d;t[0]=l*u,t[4]=v*c-m,t[8]=p*c+x,t[1]=l*d,t[5]=x*c+p,t[9]=m*c-v,t[2]=-c,t[6]=a*l,t[10]=o*l}else if("YZX"===e.order){const p=o*l,m=o*c,v=a*l,x=a*c;t[0]=l*u,t[4]=x-p*d,t[8]=v*d+m,t[1]=d,t[5]=o*u,t[9]=-a*u,t[2]=-c*u,t[6]=m*d+v,t[10]=p-x*d}else if("XZY"===e.order){const p=o*l,m=o*c,v=a*l,x=a*c;t[0]=l*u,t[4]=-d,t[8]=c*u,t[1]=p*d+x,t[5]=o*u,t[9]=m*d-v,t[2]=v*d-m,t[6]=a*u,t[10]=x*d+p}return t[3]=0,t[7]=0,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this}makeRotationFromQuaternion(e){return this.compose(D0e,e,R0e)}lookAt(e,t,i){const r=this.elements;return Ba.subVectors(e,t),0===Ba.lengthSq()&&(Ba.z=1),Ba.normalize(),hh.crossVectors(i,Ba),0===hh.lengthSq()&&(1===Math.abs(i.z)?Ba.x+=1e-4:Ba.z+=1e-4,Ba.normalize(),hh.crossVectors(i,Ba)),hh.normalize(),NA.crossVectors(Ba,hh),r[0]=hh.x,r[4]=NA.x,r[8]=Ba.x,r[1]=hh.y,r[5]=NA.y,r[9]=Ba.y,r[2]=hh.z,r[6]=NA.z,r[10]=Ba.z,this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,t){const i=e.elements,r=t.elements,s=this.elements,o=i[0],a=i[4],l=i[8],c=i[12],u=i[1],d=i[5],p=i[9],m=i[13],v=i[2],x=i[6],b=i[10],w=i[14],T=i[3],S=i[7],A=i[11],V=i[15],F=r[0],P=r[4],D=r[8],I=r[12],M=r[1],O=r[5],z=r[9],N=r[13],Ee=r[2],je=r[6],ee=r[10],we=r[14],oe=r[3],$e=r[7],vt=r[11],Ft=r[15];return s[0]=o*F+a*M+l*Ee+c*oe,s[4]=o*P+a*O+l*je+c*$e,s[8]=o*D+a*z+l*ee+c*vt,s[12]=o*I+a*N+l*we+c*Ft,s[1]=u*F+d*M+p*Ee+m*oe,s[5]=u*P+d*O+p*je+m*$e,s[9]=u*D+d*z+p*ee+m*vt,s[13]=u*I+d*N+p*we+m*Ft,s[2]=v*F+x*M+b*Ee+w*oe,s[6]=v*P+x*O+b*je+w*$e,s[10]=v*D+x*z+b*ee+w*vt,s[14]=v*I+x*N+b*we+w*Ft,s[3]=T*F+S*M+A*Ee+V*oe,s[7]=T*P+S*O+A*je+V*$e,s[11]=T*D+S*z+A*ee+V*vt,s[15]=T*I+S*N+A*we+V*Ft,this}multiplyScalar(e){const t=this.elements;return t[0]*=e,t[4]*=e,t[8]*=e,t[12]*=e,t[1]*=e,t[5]*=e,t[9]*=e,t[13]*=e,t[2]*=e,t[6]*=e,t[10]*=e,t[14]*=e,t[3]*=e,t[7]*=e,t[11]*=e,t[15]*=e,this}determinant(){const e=this.elements,t=e[0],i=e[4],r=e[8],s=e[12],o=e[1],a=e[5],l=e[9],c=e[13],u=e[2],d=e[6],p=e[10],m=e[14];return e[3]*(+s*l*d-r*c*d-s*a*p+i*c*p+r*a*m-i*l*m)+e[7]*(+t*l*m-t*c*p+s*o*p-r*o*m+r*c*u-s*l*u)+e[11]*(+t*c*d-t*a*m-s*o*d+i*o*m+s*a*u-i*c*u)+e[15]*(-r*a*u-t*l*d+t*a*p+r*o*d-i*o*p+i*l*u)}transpose(){const e=this.elements;let t;return t=e[1],e[1]=e[4],e[4]=t,t=e[2],e[2]=e[8],e[8]=t,t=e[6],e[6]=e[9],e[9]=t,t=e[3],e[3]=e[12],e[12]=t,t=e[7],e[7]=e[13],e[13]=t,t=e[11],e[11]=e[14],e[14]=t,this}setPosition(e,t,i){const r=this.elements;return e.isVector3?(r[12]=e.x,r[13]=e.y,r[14]=e.z):(r[12]=e,r[13]=t,r[14]=i),this}invert(){const e=this.elements,t=e[0],i=e[1],r=e[2],s=e[3],o=e[4],a=e[5],l=e[6],c=e[7],u=e[8],d=e[9],p=e[10],m=e[11],v=e[12],x=e[13],b=e[14],w=e[15],T=d*b*c-x*p*c+x*l*m-a*b*m-d*l*w+a*p*w,S=v*p*c-u*b*c-v*l*m+o*b*m+u*l*w-o*p*w,A=u*x*c-v*d*c+v*a*m-o*x*m-u*a*w+o*d*w,V=v*d*l-u*x*l-v*a*p+o*x*p+u*a*b-o*d*b,F=t*T+i*S+r*A+s*V;if(0===F)return this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0);const P=1/F;return e[0]=T*P,e[1]=(x*p*s-d*b*s-x*r*m+i*b*m+d*r*w-i*p*w)*P,e[2]=(a*b*s-x*l*s+x*r*c-i*b*c-a*r*w+i*l*w)*P,e[3]=(d*l*s-a*p*s-d*r*c+i*p*c+a*r*m-i*l*m)*P,e[4]=S*P,e[5]=(u*b*s-v*p*s+v*r*m-t*b*m-u*r*w+t*p*w)*P,e[6]=(v*l*s-o*b*s-v*r*c+t*b*c+o*r*w-t*l*w)*P,e[7]=(o*p*s-u*l*s+u*r*c-t*p*c-o*r*m+t*l*m)*P,e[8]=A*P,e[9]=(v*d*s-u*x*s-v*i*m+t*x*m+u*i*w-t*d*w)*P,e[10]=(o*x*s-v*a*s+v*i*c-t*x*c-o*i*w+t*a*w)*P,e[11]=(u*a*s-o*d*s-u*i*c+t*d*c+o*i*m-t*a*m)*P,e[12]=V*P,e[13]=(u*x*r-v*d*r+v*i*p-t*x*p-u*i*b+t*d*b)*P,e[14]=(v*a*r-o*x*r-v*i*l+t*x*l+o*i*b-t*a*b)*P,e[15]=(o*d*r-u*a*r+u*i*l-t*d*l-o*i*p+t*a*p)*P,this}scale(e){const t=this.elements,i=e.x,r=e.y,s=e.z;return t[0]*=i,t[4]*=r,t[8]*=s,t[1]*=i,t[5]*=r,t[9]*=s,t[2]*=i,t[6]*=r,t[10]*=s,t[3]*=i,t[7]*=r,t[11]*=s,this}getMaxScaleOnAxis(){const e=this.elements;return Math.sqrt(Math.max(e[0]*e[0]+e[1]*e[1]+e[2]*e[2],e[4]*e[4]+e[5]*e[5]+e[6]*e[6],e[8]*e[8]+e[9]*e[9]+e[10]*e[10]))}makeTranslation(e,t,i){return e.isVector3?this.set(1,0,0,e.x,0,1,0,e.y,0,0,1,e.z,0,0,0,1):this.set(1,0,0,e,0,1,0,t,0,0,1,i,0,0,0,1),this}makeRotationX(e){const t=Math.cos(e),i=Math.sin(e);return this.set(1,0,0,0,0,t,-i,0,0,i,t,0,0,0,0,1),this}makeRotationY(e){const t=Math.cos(e),i=Math.sin(e);return this.set(t,0,i,0,0,1,0,0,-i,0,t,0,0,0,0,1),this}makeRotationZ(e){const t=Math.cos(e),i=Math.sin(e);return this.set(t,-i,0,0,i,t,0,0,0,0,1,0,0,0,0,1),this}makeRotationAxis(e,t){const i=Math.cos(t),r=Math.sin(t),s=1-i,o=e.x,a=e.y,l=e.z,c=s*o,u=s*a;return this.set(c*o+i,c*a-r*l,c*l+r*a,0,c*a+r*l,u*a+i,u*l-r*o,0,c*l-r*a,u*l+r*o,s*l*l+i,0,0,0,0,1),this}makeScale(e,t,i){return this.set(e,0,0,0,0,t,0,0,0,0,i,0,0,0,0,1),this}makeShear(e,t,i,r,s,o){return this.set(1,i,s,0,e,1,o,0,t,r,1,0,0,0,0,1),this}compose(e,t,i){const r=this.elements,s=t._x,o=t._y,a=t._z,l=t._w,c=s+s,u=o+o,d=a+a,p=s*c,m=s*u,v=s*d,x=o*u,b=o*d,w=a*d,T=l*c,S=l*u,A=l*d,V=i.x,F=i.y,P=i.z;return r[0]=(1-(x+w))*V,r[1]=(m+A)*V,r[2]=(v-S)*V,r[3]=0,r[4]=(m-A)*F,r[5]=(1-(p+w))*F,r[6]=(b+T)*F,r[7]=0,r[8]=(v+S)*P,r[9]=(b-T)*P,r[10]=(1-(p+x))*P,r[11]=0,r[12]=e.x,r[13]=e.y,r[14]=e.z,r[15]=1,this}decompose(e,t,i){const r=this.elements;let s=A_.set(r[0],r[1],r[2]).length();const o=A_.set(r[4],r[5],r[6]).length(),a=A_.set(r[8],r[9],r[10]).length();this.determinant()<0&&(s=-s),e.x=r[12],e.y=r[13],e.z=r[14],Ul.copy(this);const c=1/s,u=1/o,d=1/a;return Ul.elements[0]*=c,Ul.elements[1]*=c,Ul.elements[2]*=c,Ul.elements[4]*=u,Ul.elements[5]*=u,Ul.elements[6]*=u,Ul.elements[8]*=d,Ul.elements[9]*=d,Ul.elements[10]*=d,t.setFromRotationMatrix(Ul),i.x=s,i.y=o,i.z=a,this}makePerspective(e,t,i,r,s,o,a=Ac){const l=this.elements,c=2*s/(t-e),u=2*s/(i-r),d=(t+e)/(t-e),p=(i+r)/(i-r);let m,v;if(a===Ac)m=-(o+s)/(o-s),v=-2*o*s/(o-s);else{if(2001!==a)throw new Error("THREE.Matrix4.makePerspective(): Invalid coordinate system: "+a);m=-o/(o-s),v=-o*s/(o-s)}return l[0]=c,l[4]=0,l[8]=d,l[12]=0,l[1]=0,l[5]=u,l[9]=p,l[13]=0,l[2]=0,l[6]=0,l[10]=m,l[14]=v,l[3]=0,l[7]=0,l[11]=-1,l[15]=0,this}makeOrthographic(e,t,i,r,s,o,a=Ac){const l=this.elements,c=1/(t-e),u=1/(i-r),d=1/(o-s),p=(t+e)*c,m=(i+r)*u;let v,x;if(a===Ac)v=(o+s)*d,x=-2*d;else{if(2001!==a)throw new Error("THREE.Matrix4.makeOrthographic(): Invalid coordinate system: "+a);v=s*d,x=-1*d}return l[0]=2*c,l[4]=0,l[8]=0,l[12]=-p,l[1]=0,l[5]=2*u,l[9]=0,l[13]=-m,l[2]=0,l[6]=0,l[10]=x,l[14]=-v,l[3]=0,l[7]=0,l[11]=0,l[15]=1,this}equals(e){const t=this.elements,i=e.elements;for(let r=0;r<16;r++)if(t[r]!==i[r])return!1;return!0}fromArray(e,t=0){for(let i=0;i<16;i++)this.elements[i]=e[i+t];return this}toArray(e=[],t=0){const i=this.elements;return e[t]=i[0],e[t+1]=i[1],e[t+2]=i[2],e[t+3]=i[3],e[t+4]=i[4],e[t+5]=i[5],e[t+6]=i[6],e[t+7]=i[7],e[t+8]=i[8],e[t+9]=i[9],e[t+10]=i[10],e[t+11]=i[11],e[t+12]=i[12],e[t+13]=i[13],e[t+14]=i[14],e[t+15]=i[15],e}}const A_=new j,Ul=new Un,D0e=new j(0,0,0),R0e=new j(1,1,1),hh=new j,NA=new j,Ba=new j,w9=new Un,E9=new Ua;let Bu=(()=>{class n{constructor(t=0,i=0,r=0,s=n.DEFAULT_ORDER){this.isEuler=!0,this._x=t,this._y=i,this._z=r,this._order=s}get x(){return this._x}set x(t){this._x=t,this._onChangeCallback()}get y(){return this._y}set y(t){this._y=t,this._onChangeCallback()}get z(){return this._z}set z(t){this._z=t,this._onChangeCallback()}get order(){return this._order}set order(t){this._order=t,this._onChangeCallback()}set(t,i,r,s=this._order){return this._x=t,this._y=i,this._z=r,this._order=s,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._order)}copy(t){return this._x=t._x,this._y=t._y,this._z=t._z,this._order=t._order,this._onChangeCallback(),this}setFromRotationMatrix(t,i=this._order,r=!0){const s=t.elements,o=s[0],a=s[4],l=s[8],c=s[1],u=s[5],d=s[9],p=s[2],m=s[6],v=s[10];switch(i){case"XYZ":this._y=Math.asin(Xn(l,-1,1)),Math.abs(l)<.9999999?(this._x=Math.atan2(-d,v),this._z=Math.atan2(-a,o)):(this._x=Math.atan2(m,u),this._z=0);break;case"YXZ":this._x=Math.asin(-Xn(d,-1,1)),Math.abs(d)<.9999999?(this._y=Math.atan2(l,v),this._z=Math.atan2(c,u)):(this._y=Math.atan2(-p,o),this._z=0);break;case"ZXY":this._x=Math.asin(Xn(m,-1,1)),Math.abs(m)<.9999999?(this._y=Math.atan2(-p,v),this._z=Math.atan2(-a,u)):(this._y=0,this._z=Math.atan2(c,o));break;case"ZYX":this._y=Math.asin(-Xn(p,-1,1)),Math.abs(p)<.9999999?(this._x=Math.atan2(m,v),this._z=Math.atan2(c,o)):(this._x=0,this._z=Math.atan2(-a,u));break;case"YZX":this._z=Math.asin(Xn(c,-1,1)),Math.abs(c)<.9999999?(this._x=Math.atan2(-d,u),this._y=Math.atan2(-p,o)):(this._x=0,this._y=Math.atan2(l,v));break;case"XZY":this._z=Math.asin(-Xn(a,-1,1)),Math.abs(a)<.9999999?(this._x=Math.atan2(m,u),this._y=Math.atan2(l,o)):(this._x=Math.atan2(-d,v),this._y=0);break;default:console.warn("THREE.Euler: .setFromRotationMatrix() encountered an unknown order: "+i)}return this._order=i,!0===r&&this._onChangeCallback(),this}setFromQuaternion(t,i,r){return w9.makeRotationFromQuaternion(t),this.setFromRotationMatrix(w9,i,r)}setFromVector3(t,i=this._order){return this.set(t.x,t.y,t.z,i)}reorder(t){return E9.setFromEuler(this),this.setFromQuaternion(E9,t)}equals(t){return t._x===this._x&&t._y===this._y&&t._z===this._z&&t._order===this._order}fromArray(t){return this._x=t[0],this._y=t[1],this._z=t[2],void 0!==t[3]&&(this._order=t[3]),this._onChangeCallback(),this}toArray(t=[],i=0){return t[i]=this._x,t[i+1]=this._y,t[i+2]=this._z,t[i+3]=this._order,t}_onChange(t){return this._onChangeCallback=t,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._order}}return n.DEFAULT_ORDER="XYZ",n})();class jN{constructor(){this.mask=1}set(e){this.mask=(1<<e|0)>>>0}enable(e){this.mask|=1<<e|0}enableAll(){this.mask=-1}toggle(e){this.mask^=1<<e|0}disable(e){this.mask&=~(1<<e|0)}disableAll(){this.mask=0}test(e){return 0!=(this.mask&e.mask)}isEnabled(e){return 0!=(this.mask&(1<<e|0))}}let P0e=0;const T9=new j,I_=new Ua,zu=new Un,FA=new j,Wb=new j,k0e=new j,O0e=new Ua,S9=new j(1,0,0),A9=new j(0,1,0),I9=new j(0,0,1),C9={type:"added"},N0e={type:"removed"},C_={type:"childadded",child:null},$N={type:"childremoved",child:null};let Mr=(()=>{class n extends Nu{constructor(){super(),this.isObject3D=!0,Object.defineProperty(this,"id",{value:P0e++}),this.uuid=Va(),this.name="",this.type="Object3D",this.parent=null,this.children=[],this.up=n.DEFAULT_UP.clone();const t=new j,i=new Bu,r=new Ua,s=new j(1,1,1);i._onChange(function o(){r.setFromEuler(i,!1)}),r._onChange(function a(){i.setFromQuaternion(r,void 0,!1)}),Object.defineProperties(this,{position:{configurable:!0,enumerable:!0,value:t},rotation:{configurable:!0,enumerable:!0,value:i},quaternion:{configurable:!0,enumerable:!0,value:r},scale:{configurable:!0,enumerable:!0,value:s},modelViewMatrix:{value:new Un},normalMatrix:{value:new Jn}}),this.matrix=new Un,this.matrixWorld=new Un,this.matrixAutoUpdate=n.DEFAULT_MATRIX_AUTO_UPDATE,this.matrixWorldAutoUpdate=n.DEFAULT_MATRIX_WORLD_AUTO_UPDATE,this.matrixWorldNeedsUpdate=!1,this.layers=new jN,this.visible=!0,this.castShadow=!1,this.receiveShadow=!1,this.frustumCulled=!0,this.renderOrder=0,this.animations=[],this.userData={}}onBeforeShadow(){}onAfterShadow(){}onBeforeRender(){}onAfterRender(){}applyMatrix4(t){this.matrixAutoUpdate&&this.updateMatrix(),this.matrix.premultiply(t),this.matrix.decompose(this.position,this.quaternion,this.scale)}applyQuaternion(t){return this.quaternion.premultiply(t),this}setRotationFromAxisAngle(t,i){this.quaternion.setFromAxisAngle(t,i)}setRotationFromEuler(t){this.quaternion.setFromEuler(t,!0)}setRotationFromMatrix(t){this.quaternion.setFromRotationMatrix(t)}setRotationFromQuaternion(t){this.quaternion.copy(t)}rotateOnAxis(t,i){return I_.setFromAxisAngle(t,i),this.quaternion.multiply(I_),this}rotateOnWorldAxis(t,i){return I_.setFromAxisAngle(t,i),this.quaternion.premultiply(I_),this}rotateX(t){return this.rotateOnAxis(S9,t)}rotateY(t){return this.rotateOnAxis(A9,t)}rotateZ(t){return this.rotateOnAxis(I9,t)}translateOnAxis(t,i){return T9.copy(t).applyQuaternion(this.quaternion),this.position.add(T9.multiplyScalar(i)),this}translateX(t){return this.translateOnAxis(S9,t)}translateY(t){return this.translateOnAxis(A9,t)}translateZ(t){return this.translateOnAxis(I9,t)}localToWorld(t){return this.updateWorldMatrix(!0,!1),t.applyMatrix4(this.matrixWorld)}worldToLocal(t){return this.updateWorldMatrix(!0,!1),t.applyMatrix4(zu.copy(this.matrixWorld).invert())}lookAt(t,i,r){t.isVector3?FA.copy(t):FA.set(t,i,r);const s=this.parent;this.updateWorldMatrix(!0,!1),Wb.setFromMatrixPosition(this.matrixWorld),this.isCamera||this.isLight?zu.lookAt(Wb,FA,this.up):zu.lookAt(FA,Wb,this.up),this.quaternion.setFromRotationMatrix(zu),s&&(zu.extractRotation(s.matrixWorld),I_.setFromRotationMatrix(zu),this.quaternion.premultiply(I_.invert()))}add(t){if(arguments.length>1){for(let i=0;i<arguments.length;i++)this.add(arguments[i]);return this}return t===this?(console.error("THREE.Object3D.add: object can't be added as a child of itself.",t),this):(t&&t.isObject3D?(t.removeFromParent(),t.parent=this,this.children.push(t),t.dispatchEvent(C9),C_.child=t,this.dispatchEvent(C_),C_.child=null):console.error("THREE.Object3D.add: object not an instance of THREE.Object3D.",t),this)}remove(t){if(arguments.length>1){for(let r=0;r<arguments.length;r++)this.remove(arguments[r]);return this}const i=this.children.indexOf(t);return-1!==i&&(t.parent=null,this.children.splice(i,1),t.dispatchEvent(N0e),$N.child=t,this.dispatchEvent($N),$N.child=null),this}removeFromParent(){const t=this.parent;return null!==t&&t.remove(this),this}clear(){return this.remove(...this.children)}attach(t){return this.updateWorldMatrix(!0,!1),zu.copy(this.matrixWorld).invert(),null!==t.parent&&(t.parent.updateWorldMatrix(!0,!1),zu.multiply(t.parent.matrixWorld)),t.applyMatrix4(zu),t.removeFromParent(),t.parent=this,this.children.push(t),t.updateWorldMatrix(!1,!0),t.dispatchEvent(C9),C_.child=t,this.dispatchEvent(C_),C_.child=null,this}getObjectById(t){return this.getObjectByProperty("id",t)}getObjectByName(t){return this.getObjectByProperty("name",t)}getObjectByProperty(t,i){if(this[t]===i)return this;for(let r=0,s=this.children.length;r<s;r++){const a=this.children[r].getObjectByProperty(t,i);if(void 0!==a)return a}}getObjectsByProperty(t,i,r=[]){this[t]===i&&r.push(this);const s=this.children;for(let o=0,a=s.length;o<a;o++)s[o].getObjectsByProperty(t,i,r);return r}getWorldPosition(t){return this.updateWorldMatrix(!0,!1),t.setFromMatrixPosition(this.matrixWorld)}getWorldQuaternion(t){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(Wb,t,k0e),t}getWorldScale(t){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(Wb,O0e,t),t}getWorldDirection(t){this.updateWorldMatrix(!0,!1);const i=this.matrixWorld.elements;return t.set(i[8],i[9],i[10]).normalize()}raycast(){}traverse(t){t(this);const i=this.children;for(let r=0,s=i.length;r<s;r++)i[r].traverse(t)}traverseVisible(t){if(!1===this.visible)return;t(this);const i=this.children;for(let r=0,s=i.length;r<s;r++)i[r].traverseVisible(t)}traverseAncestors(t){const i=this.parent;null!==i&&(t(i),i.traverseAncestors(t))}updateMatrix(){this.matrix.compose(this.position,this.quaternion,this.scale),this.matrixWorldNeedsUpdate=!0}updateMatrixWorld(t){this.matrixAutoUpdate&&this.updateMatrix(),(this.matrixWorldNeedsUpdate||t)&&(!0===this.matrixWorldAutoUpdate&&(null===this.parent?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix)),this.matrixWorldNeedsUpdate=!1,t=!0);const i=this.children;for(let r=0,s=i.length;r<s;r++)i[r].updateMatrixWorld(t)}updateWorldMatrix(t,i){const r=this.parent;if(!0===t&&null!==r&&r.updateWorldMatrix(!0,!1),this.matrixAutoUpdate&&this.updateMatrix(),!0===this.matrixWorldAutoUpdate&&(null===this.parent?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix)),!0===i){const s=this.children;for(let o=0,a=s.length;o<a;o++)s[o].updateWorldMatrix(!1,!0)}}toJSON(t){const i=void 0===t||"string"==typeof t,r={};i&&(t={geometries:{},materials:{},textures:{},images:{},shapes:{},skeletons:{},animations:{},nodes:{}},r.metadata={version:4.6,type:"Object",generator:"Object3D.toJSON"});const s={};function o(l,c){return void 0===l[c.uuid]&&(l[c.uuid]=c.toJSON(t)),c.uuid}if(s.uuid=this.uuid,s.type=this.type,""!==this.name&&(s.name=this.name),!0===this.castShadow&&(s.castShadow=!0),!0===this.receiveShadow&&(s.receiveShadow=!0),!1===this.visible&&(s.visible=!1),!1===this.frustumCulled&&(s.frustumCulled=!1),0!==this.renderOrder&&(s.renderOrder=this.renderOrder),Object.keys(this.userData).length>0&&(s.userData=this.userData),s.layers=this.layers.mask,s.matrix=this.matrix.toArray(),s.up=this.up.toArray(),!1===this.matrixAutoUpdate&&(s.matrixAutoUpdate=!1),this.isInstancedMesh&&(s.type="InstancedMesh",s.count=this.count,s.instanceMatrix=this.instanceMatrix.toJSON(),null!==this.instanceColor&&(s.instanceColor=this.instanceColor.toJSON())),this.isBatchedMesh&&(s.type="BatchedMesh",s.perObjectFrustumCulled=this.perObjectFrustumCulled,s.sortObjects=this.sortObjects,s.drawRanges=this._drawRanges,s.reservedRanges=this._reservedRanges,s.visibility=this._visibility,s.active=this._active,s.bounds=this._bounds.map(l=>({boxInitialized:l.boxInitialized,boxMin:l.box.min.toArray(),boxMax:l.box.max.toArray(),sphereInitialized:l.sphereInitialized,sphereRadius:l.sphere.radius,sphereCenter:l.sphere.center.toArray()})),s.maxInstanceCount=this._maxInstanceCount,s.maxVertexCount=this._maxVertexCount,s.maxIndexCount=this._maxIndexCount,s.geometryInitialized=this._geometryInitialized,s.geometryCount=this._geometryCount,s.matricesTexture=this._matricesTexture.toJSON(t),null!==this._colorsTexture&&(s.colorsTexture=this._colorsTexture.toJSON(t)),null!==this.boundingSphere&&(s.boundingSphere={center:s.boundingSphere.center.toArray(),radius:s.boundingSphere.radius}),null!==this.boundingBox&&(s.boundingBox={min:s.boundingBox.min.toArray(),max:s.boundingBox.max.toArray()})),this.isScene)this.background&&(this.background.isColor?s.background=this.background.toJSON():this.background.isTexture&&(s.background=this.background.toJSON(t).uuid)),this.environment&&this.environment.isTexture&&!0!==this.environment.isRenderTargetTexture&&(s.environment=this.environment.toJSON(t).uuid);else if(this.isMesh||this.isLine||this.isPoints){s.geometry=o(t.geometries,this.geometry);const l=this.geometry.parameters;if(void 0!==l&&void 0!==l.shapes){const c=l.shapes;if(Array.isArray(c))for(let u=0,d=c.length;u<d;u++)o(t.shapes,c[u]);else o(t.shapes,c)}}if(this.isSkinnedMesh&&(s.bindMode=this.bindMode,s.bindMatrix=this.bindMatrix.toArray(),void 0!==this.skeleton&&(o(t.skeletons,this.skeleton),s.skeleton=this.skeleton.uuid)),void 0!==this.material)if(Array.isArray(this.material)){const l=[];for(let c=0,u=this.material.length;c<u;c++)l.push(o(t.materials,this.material[c]));s.material=l}else s.material=o(t.materials,this.material);if(this.children.length>0){s.children=[];for(let l=0;l<this.children.length;l++)s.children.push(this.children[l].toJSON(t).object)}if(this.animations.length>0){s.animations=[];for(let l=0;l<this.animations.length;l++)s.animations.push(o(t.animations,this.animations[l]))}if(i){const l=a(t.geometries),c=a(t.materials),u=a(t.textures),d=a(t.images),p=a(t.shapes),m=a(t.skeletons),v=a(t.animations),x=a(t.nodes);l.length>0&&(r.geometries=l),c.length>0&&(r.materials=c),u.length>0&&(r.textures=u),d.length>0&&(r.images=d),p.length>0&&(r.shapes=p),m.length>0&&(r.skeletons=m),v.length>0&&(r.animations=v),x.length>0&&(r.nodes=x)}return r.object=s,r;function a(l){const c=[];for(const u in l){const d=l[u];delete d.metadata,c.push(d)}return c}}clone(t){return(new this.constructor).copy(this,t)}copy(t,i=!0){if(this.name=t.name,this.up.copy(t.up),this.position.copy(t.position),this.rotation.order=t.rotation.order,this.quaternion.copy(t.quaternion),this.scale.copy(t.scale),this.matrix.copy(t.matrix),this.matrixWorld.copy(t.matrixWorld),this.matrixAutoUpdate=t.matrixAutoUpdate,this.matrixWorldAutoUpdate=t.matrixWorldAutoUpdate,this.matrixWorldNeedsUpdate=t.matrixWorldNeedsUpdate,this.layers.mask=t.layers.mask,this.visible=t.visible,this.castShadow=t.castShadow,this.receiveShadow=t.receiveShadow,this.frustumCulled=t.frustumCulled,this.renderOrder=t.renderOrder,this.animations=t.animations.slice(),this.userData=JSON.parse(JSON.stringify(t.userData)),!0===i)for(let r=0;r<t.children.length;r++)this.add(t.children[r].clone());return this}}return n.DEFAULT_UP=new j(0,1,0),n.DEFAULT_MATRIX_AUTO_UPDATE=!0,n.DEFAULT_MATRIX_WORLD_AUTO_UPDATE=!0,n})();const Bl=new j,Hu=new j,qN=new j,Gu=new j,M_=new j,D_=new j,M9=new j,XN=new j,KN=new j,YN=new j,QN=new zi,ZN=new zi,JN=new zi;class za{constructor(e=new j,t=new j,i=new j){this.a=e,this.b=t,this.c=i}static getNormal(e,t,i,r){r.subVectors(i,t),Bl.subVectors(e,t),r.cross(Bl);const s=r.lengthSq();return s>0?r.multiplyScalar(1/Math.sqrt(s)):r.set(0,0,0)}static getBarycoord(e,t,i,r,s){Bl.subVectors(r,t),Hu.subVectors(i,t),qN.subVectors(e,t);const o=Bl.dot(Bl),a=Bl.dot(Hu),l=Bl.dot(qN),c=Hu.dot(Hu),u=Hu.dot(qN),d=o*c-a*a;if(0===d)return s.set(0,0,0),null;const p=1/d,m=(c*l-a*u)*p,v=(o*u-a*l)*p;return s.set(1-m-v,v,m)}static containsPoint(e,t,i,r){return null!==this.getBarycoord(e,t,i,r,Gu)&&Gu.x>=0&&Gu.y>=0&&Gu.x+Gu.y<=1}static getInterpolation(e,t,i,r,s,o,a,l){return null===this.getBarycoord(e,t,i,r,Gu)?(l.x=0,l.y=0,"z"in l&&(l.z=0),"w"in l&&(l.w=0),null):(l.setScalar(0),l.addScaledVector(s,Gu.x),l.addScaledVector(o,Gu.y),l.addScaledVector(a,Gu.z),l)}static getInterpolatedAttribute(e,t,i,r,s,o){return QN.setScalar(0),ZN.setScalar(0),JN.setScalar(0),QN.fromBufferAttribute(e,t),ZN.fromBufferAttribute(e,i),JN.fromBufferAttribute(e,r),o.setScalar(0),o.addScaledVector(QN,s.x),o.addScaledVector(ZN,s.y),o.addScaledVector(JN,s.z),o}static isFrontFacing(e,t,i,r){return Bl.subVectors(i,t),Hu.subVectors(e,t),Bl.cross(Hu).dot(r)<0}set(e,t,i){return this.a.copy(e),this.b.copy(t),this.c.copy(i),this}setFromPointsAndIndices(e,t,i,r){return this.a.copy(e[t]),this.b.copy(e[i]),this.c.copy(e[r]),this}setFromAttributeAndIndices(e,t,i,r){return this.a.fromBufferAttribute(e,t),this.b.fromBufferAttribute(e,i),this.c.fromBufferAttribute(e,r),this}clone(){return(new this.constructor).copy(this)}copy(e){return this.a.copy(e.a),this.b.copy(e.b),this.c.copy(e.c),this}getArea(){return Bl.subVectors(this.c,this.b),Hu.subVectors(this.a,this.b),.5*Bl.cross(Hu).length()}getMidpoint(e){return e.addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)}getNormal(e){return za.getNormal(this.a,this.b,this.c,e)}getPlane(e){return e.setFromCoplanarPoints(this.a,this.b,this.c)}getBarycoord(e,t){return za.getBarycoord(e,this.a,this.b,this.c,t)}getInterpolation(e,t,i,r,s){return za.getInterpolation(e,this.a,this.b,this.c,t,i,r,s)}containsPoint(e){return za.containsPoint(e,this.a,this.b,this.c)}isFrontFacing(e){return za.isFrontFacing(this.a,this.b,this.c,e)}intersectsBox(e){return e.intersectsTriangle(this)}closestPointToPoint(e,t){const i=this.a,r=this.b,s=this.c;let o,a;M_.subVectors(r,i),D_.subVectors(s,i),XN.subVectors(e,i);const l=M_.dot(XN),c=D_.dot(XN);if(l<=0&&c<=0)return t.copy(i);KN.subVectors(e,r);const u=M_.dot(KN),d=D_.dot(KN);if(u>=0&&d<=u)return t.copy(r);const p=l*d-u*c;if(p<=0&&l>=0&&u<=0)return o=l/(l-u),t.copy(i).addScaledVector(M_,o);YN.subVectors(e,s);const m=M_.dot(YN),v=D_.dot(YN);if(v>=0&&m<=v)return t.copy(s);const x=m*c-l*v;if(x<=0&&c>=0&&v<=0)return a=c/(c-v),t.copy(i).addScaledVector(D_,a);const b=u*v-m*d;if(b<=0&&d-u>=0&&m-v>=0)return M9.subVectors(s,r),a=(d-u)/(d-u+(m-v)),t.copy(r).addScaledVector(M9,a);const w=1/(b+x+p);return o=x*w,a=p*w,t.copy(i).addScaledVector(M_,o).addScaledVector(D_,a)}equals(e){return e.a.equals(this.a)&&e.b.equals(this.b)&&e.c.equals(this.c)}}const D9={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074},fh={h:0,s:0,l:0},LA={h:0,s:0,l:0};function eF(n,e,t){return t<0&&(t+=1),t>1&&(t-=1),t<1/6?n+6*(e-n)*t:t<.5?e:t<2/3?n+6*(e-n)*(2/3-t):n}class Zt{constructor(e,t,i){return this.isColor=!0,this.r=1,this.g=1,this.b=1,this.set(e,t,i)}set(e,t,i){if(void 0===t&&void 0===i){const r=e;r&&r.isColor?this.copy(r):"number"==typeof r?this.setHex(r):"string"==typeof r&&this.setStyle(r)}else this.setRGB(e,t,i);return this}setScalar(e){return this.r=e,this.g=e,this.b=e,this}setHex(e,t=La){return e=Math.floor(e),this.r=(e>>16&255)/255,this.g=(e>>8&255)/255,this.b=(255&e)/255,Li.toWorkingColorSpace(this,t),this}setRGB(e,t,i,r=Li.workingColorSpace){return this.r=e,this.g=t,this.b=i,Li.toWorkingColorSpace(this,r),this}setHSL(e,t,i,r=Li.workingColorSpace){if(e=function ON(n,e){return(n%e+e)%e}(e,1),t=Xn(t,0,1),i=Xn(i,0,1),0===t)this.r=this.g=this.b=i;else{const s=i<=.5?i*(1+t):i+t-i*t,o=2*i-s;this.r=eF(o,s,e+1/3),this.g=eF(o,s,e),this.b=eF(o,s,e-1/3)}return Li.toWorkingColorSpace(this,r),this}setStyle(e,t=La){function i(s){void 0!==s&&parseFloat(s)<1&&console.warn("THREE.Color: Alpha component of "+e+" will be ignored.")}let r;if(r=/^(\w+)\(([^\)]*)\)/.exec(e)){let s;const a=r[2];switch(r[1]){case"rgb":case"rgba":if(s=/^\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(a))return i(s[4]),this.setRGB(Math.min(255,parseInt(s[1],10))/255,Math.min(255,parseInt(s[2],10))/255,Math.min(255,parseInt(s[3],10))/255,t);if(s=/^\s*(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(a))return i(s[4]),this.setRGB(Math.min(100,parseInt(s[1],10))/100,Math.min(100,parseInt(s[2],10))/100,Math.min(100,parseInt(s[3],10))/100,t);break;case"hsl":case"hsla":if(s=/^\s*(\d*\.?\d+)\s*,\s*(\d*\.?\d+)\%\s*,\s*(\d*\.?\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(a))return i(s[4]),this.setHSL(parseFloat(s[1])/360,parseFloat(s[2])/100,parseFloat(s[3])/100,t);break;default:console.warn("THREE.Color: Unknown color model "+e)}}else if(r=/^\#([A-Fa-f\d]+)$/.exec(e)){const s=r[1],o=s.length;if(3===o)return this.setRGB(parseInt(s.charAt(0),16)/15,parseInt(s.charAt(1),16)/15,parseInt(s.charAt(2),16)/15,t);if(6===o)return this.setHex(parseInt(s,16),t);console.warn("THREE.Color: Invalid hex color "+e)}else if(e&&e.length>0)return this.setColorName(e,t);return this}setColorName(e,t=La){const i=D9[e.toLowerCase()];return void 0!==i?this.setHex(i,t):console.warn("THREE.Color: Unknown color "+e),this}clone(){return new this.constructor(this.r,this.g,this.b)}copy(e){return this.r=e.r,this.g=e.g,this.b=e.b,this}copySRGBToLinear(e){return this.r=Fu(e.r),this.g=Fu(e.g),this.b=Fu(e.b),this}copyLinearToSRGB(e){return this.r=b_(e.r),this.g=b_(e.g),this.b=b_(e.b),this}convertSRGBToLinear(){return this.copySRGBToLinear(this),this}convertLinearToSRGB(){return this.copyLinearToSRGB(this),this}getHex(e=La){return Li.fromWorkingColorSpace(Ao.copy(this),e),65536*Math.round(Xn(255*Ao.r,0,255))+256*Math.round(Xn(255*Ao.g,0,255))+Math.round(Xn(255*Ao.b,0,255))}getHexString(e=La){return("000000"+this.getHex(e).toString(16)).slice(-6)}getHSL(e,t=Li.workingColorSpace){Li.fromWorkingColorSpace(Ao.copy(this),t);const i=Ao.r,r=Ao.g,s=Ao.b,o=Math.max(i,r,s),a=Math.min(i,r,s);let l,c;const u=(a+o)/2;if(a===o)l=0,c=0;else{const d=o-a;switch(c=u<=.5?d/(o+a):d/(2-o-a),o){case i:l=(r-s)/d+(r<s?6:0);break;case r:l=(s-i)/d+2;break;case s:l=(i-r)/d+4}l/=6}return e.h=l,e.s=c,e.l=u,e}getRGB(e,t=Li.workingColorSpace){return Li.fromWorkingColorSpace(Ao.copy(this),t),e.r=Ao.r,e.g=Ao.g,e.b=Ao.b,e}getStyle(e=La){Li.fromWorkingColorSpace(Ao.copy(this),e);const t=Ao.r,i=Ao.g,r=Ao.b;return e!==La?`color(${e} ${t.toFixed(3)} ${i.toFixed(3)} ${r.toFixed(3)})`:`rgb(${Math.round(255*t)},${Math.round(255*i)},${Math.round(255*r)})`}offsetHSL(e,t,i){return this.getHSL(fh),this.setHSL(fh.h+e,fh.s+t,fh.l+i)}add(e){return this.r+=e.r,this.g+=e.g,this.b+=e.b,this}addColors(e,t){return this.r=e.r+t.r,this.g=e.g+t.g,this.b=e.b+t.b,this}addScalar(e){return this.r+=e,this.g+=e,this.b+=e,this}sub(e){return this.r=Math.max(0,this.r-e.r),this.g=Math.max(0,this.g-e.g),this.b=Math.max(0,this.b-e.b),this}multiply(e){return this.r*=e.r,this.g*=e.g,this.b*=e.b,this}multiplyScalar(e){return this.r*=e,this.g*=e,this.b*=e,this}lerp(e,t){return this.r+=(e.r-this.r)*t,this.g+=(e.g-this.g)*t,this.b+=(e.b-this.b)*t,this}lerpColors(e,t,i){return this.r=e.r+(t.r-e.r)*i,this.g=e.g+(t.g-e.g)*i,this.b=e.b+(t.b-e.b)*i,this}lerpHSL(e,t){this.getHSL(fh),e.getHSL(LA);const i=Ub(fh.h,LA.h,t),r=Ub(fh.s,LA.s,t),s=Ub(fh.l,LA.l,t);return this.setHSL(i,r,s),this}setFromVector3(e){return this.r=e.x,this.g=e.y,this.b=e.z,this}applyMatrix3(e){const t=this.r,i=this.g,r=this.b,s=e.elements;return this.r=s[0]*t+s[3]*i+s[6]*r,this.g=s[1]*t+s[4]*i+s[7]*r,this.b=s[2]*t+s[5]*i+s[8]*r,this}equals(e){return e.r===this.r&&e.g===this.g&&e.b===this.b}fromArray(e,t=0){return this.r=e[t],this.g=e[t+1],this.b=e[t+2],this}toArray(e=[],t=0){return e[t]=this.r,e[t+1]=this.g,e[t+2]=this.b,e}fromBufferAttribute(e,t){return this.r=e.getX(t),this.g=e.getY(t),this.b=e.getZ(t),this}toJSON(){return this.getHex()}*[Symbol.iterator](){yield this.r,yield this.g,yield this.b}}const Ao=new Zt;Zt.NAMES=D9;let F0e=0;class Xo extends Nu{constructor(){super(),this.isMaterial=!0,Object.defineProperty(this,"id",{value:F0e++}),this.uuid=Va(),this.name="",this.type="Material",this.blending=1,this.side=0,this.vertexColors=!1,this.opacity=1,this.transparent=!1,this.alphaHash=!1,this.blendSrc=204,this.blendDst=205,this.blendEquation=100,this.blendSrcAlpha=null,this.blendDstAlpha=null,this.blendEquationAlpha=null,this.blendColor=new Zt(0,0,0),this.blendAlpha=0,this.depthFunc=3,this.depthTest=!0,this.depthWrite=!0,this.stencilWriteMask=255,this.stencilFunc=519,this.stencilRef=0,this.stencilFuncMask=255,this.stencilFail=g_,this.stencilZFail=g_,this.stencilZPass=g_,this.stencilWrite=!1,this.clippingPlanes=null,this.clipIntersection=!1,this.clipShadows=!1,this.shadowSide=null,this.colorWrite=!0,this.precision=null,this.polygonOffset=!1,this.polygonOffsetFactor=0,this.polygonOffsetUnits=0,this.dithering=!1,this.alphaToCoverage=!1,this.premultipliedAlpha=!1,this.forceSinglePass=!1,this.visible=!0,this.toneMapped=!0,this.userData={},this.version=0,this._alphaTest=0}get alphaTest(){return this._alphaTest}set alphaTest(e){this._alphaTest>0!=e>0&&this.version++,this._alphaTest=e}onBeforeRender(){}onBeforeCompile(){}customProgramCacheKey(){return this.onBeforeCompile.toString()}setValues(e){if(void 0!==e)for(const t in e){const i=e[t];if(void 0===i){console.warn(`THREE.Material: parameter '${t}' has value of undefined.`);continue}const r=this[t];void 0!==r?r&&r.isColor?r.set(i):r&&r.isVector3&&i&&i.isVector3?r.copy(i):this[t]=i:console.warn(`THREE.Material: '${t}' is not a property of THREE.${this.type}.`)}}toJSON(e){const t=void 0===e||"string"==typeof e;t&&(e={textures:{},images:{}});const i={metadata:{version:4.6,type:"Material",generator:"Material.toJSON"}};function r(s){const o=[];for(const a in s){const l=s[a];delete l.metadata,o.push(l)}return o}if(i.uuid=this.uuid,i.type=this.type,""!==this.name&&(i.name=this.name),this.color&&this.color.isColor&&(i.color=this.color.getHex()),void 0!==this.roughness&&(i.roughness=this.roughness),void 0!==this.metalness&&(i.metalness=this.metalness),void 0!==this.sheen&&(i.sheen=this.sheen),this.sheenColor&&this.sheenColor.isColor&&(i.sheenColor=this.sheenColor.getHex()),void 0!==this.sheenRoughness&&(i.sheenRoughness=this.sheenRoughness),this.emissive&&this.emissive.isColor&&(i.emissive=this.emissive.getHex()),void 0!==this.emissiveIntensity&&1!==this.emissiveIntensity&&(i.emissiveIntensity=this.emissiveIntensity),this.specular&&this.specular.isColor&&(i.specular=this.specular.getHex()),void 0!==this.specularIntensity&&(i.specularIntensity=this.specularIntensity),this.specularColor&&this.specularColor.isColor&&(i.specularColor=this.specularColor.getHex()),void 0!==this.shininess&&(i.shininess=this.shininess),void 0!==this.clearcoat&&(i.clearcoat=this.clearcoat),void 0!==this.clearcoatRoughness&&(i.clearcoatRoughness=this.clearcoatRoughness),this.clearcoatMap&&this.clearcoatMap.isTexture&&(i.clearcoatMap=this.clearcoatMap.toJSON(e).uuid),this.clearcoatRoughnessMap&&this.clearcoatRoughnessMap.isTexture&&(i.clearcoatRoughnessMap=this.clearcoatRoughnessMap.toJSON(e).uuid),this.clearcoatNormalMap&&this.clearcoatNormalMap.isTexture&&(i.clearcoatNormalMap=this.clearcoatNormalMap.toJSON(e).uuid,i.clearcoatNormalScale=this.clearcoatNormalScale.toArray()),void 0!==this.dispersion&&(i.dispersion=this.dispersion),void 0!==this.iridescence&&(i.iridescence=this.iridescence),void 0!==this.iridescenceIOR&&(i.iridescenceIOR=this.iridescenceIOR),void 0!==this.iridescenceThicknessRange&&(i.iridescenceThicknessRange=this.iridescenceThicknessRange),this.iridescenceMap&&this.iridescenceMap.isTexture&&(i.iridescenceMap=this.iridescenceMap.toJSON(e).uuid),this.iridescenceThicknessMap&&this.iridescenceThicknessMap.isTexture&&(i.iridescenceThicknessMap=this.iridescenceThicknessMap.toJSON(e).uuid),void 0!==this.anisotropy&&(i.anisotropy=this.anisotropy),void 0!==this.anisotropyRotation&&(i.anisotropyRotation=this.anisotropyRotation),this.anisotropyMap&&this.anisotropyMap.isTexture&&(i.anisotropyMap=this.anisotropyMap.toJSON(e).uuid),this.map&&this.map.isTexture&&(i.map=this.map.toJSON(e).uuid),this.matcap&&this.matcap.isTexture&&(i.matcap=this.matcap.toJSON(e).uuid),this.alphaMap&&this.alphaMap.isTexture&&(i.alphaMap=this.alphaMap.toJSON(e).uuid),this.lightMap&&this.lightMap.isTexture&&(i.lightMap=this.lightMap.toJSON(e).uuid,i.lightMapIntensity=this.lightMapIntensity),this.aoMap&&this.aoMap.isTexture&&(i.aoMap=this.aoMap.toJSON(e).uuid,i.aoMapIntensity=this.aoMapIntensity),this.bumpMap&&this.bumpMap.isTexture&&(i.bumpMap=this.bumpMap.toJSON(e).uuid,i.bumpScale=this.bumpScale),this.normalMap&&this.normalMap.isTexture&&(i.normalMap=this.normalMap.toJSON(e).uuid,i.normalMapType=this.normalMapType,i.normalScale=this.normalScale.toArray()),this.displacementMap&&this.displacementMap.isTexture&&(i.displacementMap=this.displacementMap.toJSON(e).uuid,i.displacementScale=this.displacementScale,i.displacementBias=this.displacementBias),this.roughnessMap&&this.roughnessMap.isTexture&&(i.roughnessMap=this.roughnessMap.toJSON(e).uuid),this.metalnessMap&&this.metalnessMap.isTexture&&(i.metalnessMap=this.metalnessMap.toJSON(e).uuid),this.emissiveMap&&this.emissiveMap.isTexture&&(i.emissiveMap=this.emissiveMap.toJSON(e).uuid),this.specularMap&&this.specularMap.isTexture&&(i.specularMap=this.specularMap.toJSON(e).uuid),this.specularIntensityMap&&this.specularIntensityMap.isTexture&&(i.specularIntensityMap=this.specularIntensityMap.toJSON(e).uuid),this.specularColorMap&&this.specularColorMap.isTexture&&(i.specularColorMap=this.specularColorMap.toJSON(e).uuid),this.envMap&&this.envMap.isTexture&&(i.envMap=this.envMap.toJSON(e).uuid,void 0!==this.combine&&(i.combine=this.combine)),void 0!==this.envMapRotation&&(i.envMapRotation=this.envMapRotation.toArray()),void 0!==this.envMapIntensity&&(i.envMapIntensity=this.envMapIntensity),void 0!==this.reflectivity&&(i.reflectivity=this.reflectivity),void 0!==this.refractionRatio&&(i.refractionRatio=this.refractionRatio),this.gradientMap&&this.gradientMap.isTexture&&(i.gradientMap=this.gradientMap.toJSON(e).uuid),void 0!==this.transmission&&(i.transmission=this.transmission),this.transmissionMap&&this.transmissionMap.isTexture&&(i.transmissionMap=this.transmissionMap.toJSON(e).uuid),void 0!==this.thickness&&(i.thickness=this.thickness),this.thicknessMap&&this.thicknessMap.isTexture&&(i.thicknessMap=this.thicknessMap.toJSON(e).uuid),void 0!==this.attenuationDistance&&this.attenuationDistance!==1/0&&(i.attenuationDistance=this.attenuationDistance),void 0!==this.attenuationColor&&(i.attenuationColor=this.attenuationColor.getHex()),void 0!==this.size&&(i.size=this.size),null!==this.shadowSide&&(i.shadowSide=this.shadowSide),void 0!==this.sizeAttenuation&&(i.sizeAttenuation=this.sizeAttenuation),1!==this.blending&&(i.blending=this.blending),0!==this.side&&(i.side=this.side),!0===this.vertexColors&&(i.vertexColors=!0),this.opacity<1&&(i.opacity=this.opacity),!0===this.transparent&&(i.transparent=!0),204!==this.blendSrc&&(i.blendSrc=this.blendSrc),205!==this.blendDst&&(i.blendDst=this.blendDst),100!==this.blendEquation&&(i.blendEquation=this.blendEquation),null!==this.blendSrcAlpha&&(i.blendSrcAlpha=this.blendSrcAlpha),null!==this.blendDstAlpha&&(i.blendDstAlpha=this.blendDstAlpha),null!==this.blendEquationAlpha&&(i.blendEquationAlpha=this.blendEquationAlpha),this.blendColor&&this.blendColor.isColor&&(i.blendColor=this.blendColor.getHex()),0!==this.blendAlpha&&(i.blendAlpha=this.blendAlpha),3!==this.depthFunc&&(i.depthFunc=this.depthFunc),!1===this.depthTest&&(i.depthTest=this.depthTest),!1===this.depthWrite&&(i.depthWrite=this.depthWrite),!1===this.colorWrite&&(i.colorWrite=this.colorWrite),255!==this.stencilWriteMask&&(i.stencilWriteMask=this.stencilWriteMask),519!==this.stencilFunc&&(i.stencilFunc=this.stencilFunc),0!==this.stencilRef&&(i.stencilRef=this.stencilRef),255!==this.stencilFuncMask&&(i.stencilFuncMask=this.stencilFuncMask),this.stencilFail!==g_&&(i.stencilFail=this.stencilFail),this.stencilZFail!==g_&&(i.stencilZFail=this.stencilZFail),this.stencilZPass!==g_&&(i.stencilZPass=this.stencilZPass),!0===this.stencilWrite&&(i.stencilWrite=this.stencilWrite),void 0!==this.rotation&&0!==this.rotation&&(i.rotation=this.rotation),!0===this.polygonOffset&&(i.polygonOffset=!0),0!==this.polygonOffsetFactor&&(i.polygonOffsetFactor=this.polygonOffsetFactor),0!==this.polygonOffsetUnits&&(i.polygonOffsetUnits=this.polygonOffsetUnits),void 0!==this.linewidth&&1!==this.linewidth&&(i.linewidth=this.linewidth),void 0!==this.dashSize&&(i.dashSize=this.dashSize),void 0!==this.gapSize&&(i.gapSize=this.gapSize),void 0!==this.scale&&(i.scale=this.scale),!0===this.dithering&&(i.dithering=!0),this.alphaTest>0&&(i.alphaTest=this.alphaTest),!0===this.alphaHash&&(i.alphaHash=!0),!0===this.alphaToCoverage&&(i.alphaToCoverage=!0),!0===this.premultipliedAlpha&&(i.premultipliedAlpha=!0),!0===this.forceSinglePass&&(i.forceSinglePass=!0),!0===this.wireframe&&(i.wireframe=!0),this.wireframeLinewidth>1&&(i.wireframeLinewidth=this.wireframeLinewidth),"round"!==this.wireframeLinecap&&(i.wireframeLinecap=this.wireframeLinecap),"round"!==this.wireframeLinejoin&&(i.wireframeLinejoin=this.wireframeLinejoin),!0===this.flatShading&&(i.flatShading=!0),!1===this.visible&&(i.visible=!1),!1===this.toneMapped&&(i.toneMapped=!1),!1===this.fog&&(i.fog=!1),Object.keys(this.userData).length>0&&(i.userData=this.userData),t){const s=r(e.textures),o=r(e.images);s.length>0&&(i.textures=s),o.length>0&&(i.images=o)}return i}clone(){return(new this.constructor).copy(this)}copy(e){this.name=e.name,this.blending=e.blending,this.side=e.side,this.vertexColors=e.vertexColors,this.opacity=e.opacity,this.transparent=e.transparent,this.blendSrc=e.blendSrc,this.blendDst=e.blendDst,this.blendEquation=e.blendEquation,this.blendSrcAlpha=e.blendSrcAlpha,this.blendDstAlpha=e.blendDstAlpha,this.blendEquationAlpha=e.blendEquationAlpha,this.blendColor.copy(e.blendColor),this.blendAlpha=e.blendAlpha,this.depthFunc=e.depthFunc,this.depthTest=e.depthTest,this.depthWrite=e.depthWrite,this.stencilWriteMask=e.stencilWriteMask,this.stencilFunc=e.stencilFunc,this.stencilRef=e.stencilRef,this.stencilFuncMask=e.stencilFuncMask,this.stencilFail=e.stencilFail,this.stencilZFail=e.stencilZFail,this.stencilZPass=e.stencilZPass,this.stencilWrite=e.stencilWrite;const t=e.clippingPlanes;let i=null;if(null!==t){const r=t.length;i=new Array(r);for(let s=0;s!==r;++s)i[s]=t[s].clone()}return this.clippingPlanes=i,this.clipIntersection=e.clipIntersection,this.clipShadows=e.clipShadows,this.shadowSide=e.shadowSide,this.colorWrite=e.colorWrite,this.precision=e.precision,this.polygonOffset=e.polygonOffset,this.polygonOffsetFactor=e.polygonOffsetFactor,this.polygonOffsetUnits=e.polygonOffsetUnits,this.dithering=e.dithering,this.alphaTest=e.alphaTest,this.alphaHash=e.alphaHash,this.alphaToCoverage=e.alphaToCoverage,this.premultipliedAlpha=e.premultipliedAlpha,this.forceSinglePass=e.forceSinglePass,this.visible=e.visible,this.toneMapped=e.toneMapped,this.userData=JSON.parse(JSON.stringify(e.userData)),this}dispose(){this.dispatchEvent({type:"dispose"})}set needsUpdate(e){!0===e&&this.version++}onBuild(){console.warn("Material: onBuild() has been removed.")}}class tp extends Xo{constructor(e){super(),this.isMeshBasicMaterial=!0,this.type="MeshBasicMaterial",this.color=new Zt(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new Bu,this.combine=hA,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapRotation.copy(e.envMapRotation),this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.fog=e.fog,this}}const bs=new j,VA=new et;let V0e=0;class cr{constructor(e,t,i=!1){if(Array.isArray(e))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.isBufferAttribute=!0,Object.defineProperty(this,"id",{value:V0e++}),this.name="",this.array=e,this.itemSize=t,this.count=void 0!==e?e.length/t:0,this.normalized=i,this.usage=35044,this.updateRanges=[],this.gpuType=Fa,this.version=0}onUploadCallback(){}set needsUpdate(e){!0===e&&this.version++}setUsage(e){return this.usage=e,this}addUpdateRange(e,t){this.updateRanges.push({start:e,count:t})}clearUpdateRanges(){this.updateRanges.length=0}copy(e){return this.name=e.name,this.array=new e.array.constructor(e.array),this.itemSize=e.itemSize,this.count=e.count,this.normalized=e.normalized,this.usage=e.usage,this.gpuType=e.gpuType,this}copyAt(e,t,i){e*=this.itemSize,i*=t.itemSize;for(let r=0,s=this.itemSize;r<s;r++)this.array[e+r]=t.array[i+r];return this}copyArray(e){return this.array.set(e),this}applyMatrix3(e){if(2===this.itemSize)for(let t=0,i=this.count;t<i;t++)VA.fromBufferAttribute(this,t),VA.applyMatrix3(e),this.setXY(t,VA.x,VA.y);else if(3===this.itemSize)for(let t=0,i=this.count;t<i;t++)bs.fromBufferAttribute(this,t),bs.applyMatrix3(e),this.setXYZ(t,bs.x,bs.y,bs.z);return this}applyMatrix4(e){for(let t=0,i=this.count;t<i;t++)bs.fromBufferAttribute(this,t),bs.applyMatrix4(e),this.setXYZ(t,bs.x,bs.y,bs.z);return this}applyNormalMatrix(e){for(let t=0,i=this.count;t<i;t++)bs.fromBufferAttribute(this,t),bs.applyNormalMatrix(e),this.setXYZ(t,bs.x,bs.y,bs.z);return this}transformDirection(e){for(let t=0,i=this.count;t<i;t++)bs.fromBufferAttribute(this,t),bs.transformDirection(e),this.setXYZ(t,bs.x,bs.y,bs.z);return this}set(e,t=0){return this.array.set(e,t),this}getComponent(e,t){let i=this.array[e*this.itemSize+t];return this.normalized&&(i=$o(i,this.array)),i}setComponent(e,t,i){return this.normalized&&(i=Zn(i,this.array)),this.array[e*this.itemSize+t]=i,this}getX(e){let t=this.array[e*this.itemSize];return this.normalized&&(t=$o(t,this.array)),t}setX(e,t){return this.normalized&&(t=Zn(t,this.array)),this.array[e*this.itemSize]=t,this}getY(e){let t=this.array[e*this.itemSize+1];return this.normalized&&(t=$o(t,this.array)),t}setY(e,t){return this.normalized&&(t=Zn(t,this.array)),this.array[e*this.itemSize+1]=t,this}getZ(e){let t=this.array[e*this.itemSize+2];return this.normalized&&(t=$o(t,this.array)),t}setZ(e,t){return this.normalized&&(t=Zn(t,this.array)),this.array[e*this.itemSize+2]=t,this}getW(e){let t=this.array[e*this.itemSize+3];return this.normalized&&(t=$o(t,this.array)),t}setW(e,t){return this.normalized&&(t=Zn(t,this.array)),this.array[e*this.itemSize+3]=t,this}setXY(e,t,i){return e*=this.itemSize,this.normalized&&(t=Zn(t,this.array),i=Zn(i,this.array)),this.array[e+0]=t,this.array[e+1]=i,this}setXYZ(e,t,i,r){return e*=this.itemSize,this.normalized&&(t=Zn(t,this.array),i=Zn(i,this.array),r=Zn(r,this.array)),this.array[e+0]=t,this.array[e+1]=i,this.array[e+2]=r,this}setXYZW(e,t,i,r,s){return e*=this.itemSize,this.normalized&&(t=Zn(t,this.array),i=Zn(i,this.array),r=Zn(r,this.array),s=Zn(s,this.array)),this.array[e+0]=t,this.array[e+1]=i,this.array[e+2]=r,this.array[e+3]=s,this}onUpload(e){return this.onUploadCallback=e,this}clone(){return new this.constructor(this.array,this.itemSize).copy(this)}toJSON(){const e={itemSize:this.itemSize,type:this.array.constructor.name,array:Array.from(this.array),normalized:this.normalized};return""!==this.name&&(e.name=this.name),35044!==this.usage&&(e.usage=this.usage),e}}class R9 extends cr{constructor(e,t,i){super(new Uint16Array(e),t,i)}}class P9 extends cr{constructor(e,t,i){super(new Uint32Array(e),t,i)}}class hn extends cr{constructor(e,t,i){super(new Float32Array(e),t,i)}}let U0e=0;const vl=new Un,tF=new Mr,R_=new j,Ha=new _a,$b=new _a,Gs=new j;class oi extends Nu{constructor(){super(),this.isBufferGeometry=!0,Object.defineProperty(this,"id",{value:U0e++}),this.uuid=Va(),this.name="",this.type="BufferGeometry",this.index=null,this.indirect=null,this.attributes={},this.morphAttributes={},this.morphTargetsRelative=!1,this.groups=[],this.boundingBox=null,this.boundingSphere=null,this.drawRange={start:0,count:1/0},this.userData={}}getIndex(){return this.index}setIndex(e){return this.index=Array.isArray(e)?new(_9(e)?P9:R9)(e,1):e,this}setIndirect(e){return this.indirect=e,this}getIndirect(){return this.indirect}getAttribute(e){return this.attributes[e]}setAttribute(e,t){return this.attributes[e]=t,this}deleteAttribute(e){return delete this.attributes[e],this}hasAttribute(e){return void 0!==this.attributes[e]}addGroup(e,t,i=0){this.groups.push({start:e,count:t,materialIndex:i})}clearGroups(){this.groups=[]}setDrawRange(e,t){this.drawRange.start=e,this.drawRange.count=t}applyMatrix4(e){const t=this.attributes.position;void 0!==t&&(t.applyMatrix4(e),t.needsUpdate=!0);const i=this.attributes.normal;if(void 0!==i){const s=(new Jn).getNormalMatrix(e);i.applyNormalMatrix(s),i.needsUpdate=!0}const r=this.attributes.tangent;return void 0!==r&&(r.transformDirection(e),r.needsUpdate=!0),null!==this.boundingBox&&this.computeBoundingBox(),null!==this.boundingSphere&&this.computeBoundingSphere(),this}applyQuaternion(e){return vl.makeRotationFromQuaternion(e),this.applyMatrix4(vl),this}rotateX(e){return vl.makeRotationX(e),this.applyMatrix4(vl),this}rotateY(e){return vl.makeRotationY(e),this.applyMatrix4(vl),this}rotateZ(e){return vl.makeRotationZ(e),this.applyMatrix4(vl),this}translate(e,t,i){return vl.makeTranslation(e,t,i),this.applyMatrix4(vl),this}scale(e,t,i){return vl.makeScale(e,t,i),this.applyMatrix4(vl),this}lookAt(e){return tF.lookAt(e),tF.updateMatrix(),this.applyMatrix4(tF.matrix),this}center(){return this.computeBoundingBox(),this.boundingBox.getCenter(R_).negate(),this.translate(R_.x,R_.y,R_.z),this}setFromPoints(e){const t=this.getAttribute("position");if(void 0===t){const i=[];for(let r=0,s=e.length;r<s;r++){const o=e[r];i.push(o.x,o.y,o.z||0)}this.setAttribute("position",new hn(i,3))}else{const i=Math.min(e.length,t.count);for(let r=0;r<i;r++){const s=e[r];t.setXYZ(r,s.x,s.y,s.z||0)}e.length>t.count&&console.warn("THREE.BufferGeometry: Buffer size too small for points data. Use .dispose() and create a new geometry."),t.needsUpdate=!0}return this}computeBoundingBox(){null===this.boundingBox&&(this.boundingBox=new _a);const e=this.attributes.position,t=this.morphAttributes.position;if(e&&e.isGLBufferAttribute)return console.error("THREE.BufferGeometry.computeBoundingBox(): GLBufferAttribute requires a manual bounding box.",this),void this.boundingBox.set(new j(-1/0,-1/0,-1/0),new j(1/0,1/0,1/0));if(void 0!==e){if(this.boundingBox.setFromBufferAttribute(e),t)for(let i=0,r=t.length;i<r;i++)Ha.setFromBufferAttribute(t[i]),this.morphTargetsRelative?(Gs.addVectors(this.boundingBox.min,Ha.min),this.boundingBox.expandByPoint(Gs),Gs.addVectors(this.boundingBox.max,Ha.max),this.boundingBox.expandByPoint(Gs)):(this.boundingBox.expandByPoint(Ha.min),this.boundingBox.expandByPoint(Ha.max))}else this.boundingBox.makeEmpty();(isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z))&&console.error('THREE.BufferGeometry.computeBoundingBox(): Computed min/max have NaN values. The "position" attribute is likely to have NaN values.',this)}computeBoundingSphere(){null===this.boundingSphere&&(this.boundingSphere=new qo);const e=this.attributes.position,t=this.morphAttributes.position;if(e&&e.isGLBufferAttribute)return console.error("THREE.BufferGeometry.computeBoundingSphere(): GLBufferAttribute requires a manual bounding sphere.",this),void this.boundingSphere.set(new j,1/0);if(e){const i=this.boundingSphere.center;if(Ha.setFromBufferAttribute(e),t)for(let s=0,o=t.length;s<o;s++)$b.setFromBufferAttribute(t[s]),this.morphTargetsRelative?(Gs.addVectors(Ha.min,$b.min),Ha.expandByPoint(Gs),Gs.addVectors(Ha.max,$b.max),Ha.expandByPoint(Gs)):(Ha.expandByPoint($b.min),Ha.expandByPoint($b.max));Ha.getCenter(i);let r=0;for(let s=0,o=e.count;s<o;s++)Gs.fromBufferAttribute(e,s),r=Math.max(r,i.distanceToSquared(Gs));if(t)for(let s=0,o=t.length;s<o;s++){const a=t[s],l=this.morphTargetsRelative;for(let c=0,u=a.count;c<u;c++)Gs.fromBufferAttribute(a,c),l&&(R_.fromBufferAttribute(e,c),Gs.add(R_)),r=Math.max(r,i.distanceToSquared(Gs))}this.boundingSphere.radius=Math.sqrt(r),isNaN(this.boundingSphere.radius)&&console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',this)}}computeTangents(){const e=this.index,t=this.attributes;if(null===e||void 0===t.position||void 0===t.normal||void 0===t.uv)return void console.error("THREE.BufferGeometry: .computeTangents() failed. Missing required attributes (index, position, normal or uv)");const i=t.position,r=t.normal,s=t.uv;!1===this.hasAttribute("tangent")&&this.setAttribute("tangent",new cr(new Float32Array(4*i.count),4));const o=this.getAttribute("tangent"),a=[],l=[];for(let D=0;D<i.count;D++)a[D]=new j,l[D]=new j;const c=new j,u=new j,d=new j,p=new et,m=new et,v=new et,x=new j,b=new j;function w(D,I,M){c.fromBufferAttribute(i,D),u.fromBufferAttribute(i,I),d.fromBufferAttribute(i,M),p.fromBufferAttribute(s,D),m.fromBufferAttribute(s,I),v.fromBufferAttribute(s,M),u.sub(c),d.sub(c),m.sub(p),v.sub(p);const O=1/(m.x*v.y-v.x*m.y);isFinite(O)&&(x.copy(u).multiplyScalar(v.y).addScaledVector(d,-m.y).multiplyScalar(O),b.copy(d).multiplyScalar(m.x).addScaledVector(u,-v.x).multiplyScalar(O),a[D].add(x),a[I].add(x),a[M].add(x),l[D].add(b),l[I].add(b),l[M].add(b))}let T=this.groups;0===T.length&&(T=[{start:0,count:e.count}]);for(let D=0,I=T.length;D<I;++D){const M=T[D],O=M.start;for(let N=O,Ee=O+M.count;N<Ee;N+=3)w(e.getX(N+0),e.getX(N+1),e.getX(N+2))}const S=new j,A=new j,V=new j,F=new j;function P(D){V.fromBufferAttribute(r,D),F.copy(V);const I=a[D];S.copy(I),S.sub(V.multiplyScalar(V.dot(I))).normalize(),A.crossVectors(F,I);const O=A.dot(l[D])<0?-1:1;o.setXYZW(D,S.x,S.y,S.z,O)}for(let D=0,I=T.length;D<I;++D){const M=T[D],O=M.start;for(let N=O,Ee=O+M.count;N<Ee;N+=3)P(e.getX(N+0)),P(e.getX(N+1)),P(e.getX(N+2))}}computeVertexNormals(){const e=this.index,t=this.getAttribute("position");if(void 0!==t){let i=this.getAttribute("normal");if(void 0===i)i=new cr(new Float32Array(3*t.count),3),this.setAttribute("normal",i);else for(let p=0,m=i.count;p<m;p++)i.setXYZ(p,0,0,0);const r=new j,s=new j,o=new j,a=new j,l=new j,c=new j,u=new j,d=new j;if(e)for(let p=0,m=e.count;p<m;p+=3){const v=e.getX(p+0),x=e.getX(p+1),b=e.getX(p+2);r.fromBufferAttribute(t,v),s.fromBufferAttribute(t,x),o.fromBufferAttribute(t,b),u.subVectors(o,s),d.subVectors(r,s),u.cross(d),a.fromBufferAttribute(i,v),l.fromBufferAttribute(i,x),c.fromBufferAttribute(i,b),a.add(u),l.add(u),c.add(u),i.setXYZ(v,a.x,a.y,a.z),i.setXYZ(x,l.x,l.y,l.z),i.setXYZ(b,c.x,c.y,c.z)}else for(let p=0,m=t.count;p<m;p+=3)r.fromBufferAttribute(t,p+0),s.fromBufferAttribute(t,p+1),o.fromBufferAttribute(t,p+2),u.subVectors(o,s),d.subVectors(r,s),u.cross(d),i.setXYZ(p+0,u.x,u.y,u.z),i.setXYZ(p+1,u.x,u.y,u.z),i.setXYZ(p+2,u.x,u.y,u.z);this.normalizeNormals(),i.needsUpdate=!0}}normalizeNormals(){const e=this.attributes.normal;for(let t=0,i=e.count;t<i;t++)Gs.fromBufferAttribute(e,t),Gs.normalize(),e.setXYZ(t,Gs.x,Gs.y,Gs.z)}toNonIndexed(){function e(a,l){const c=a.array,u=a.itemSize,d=a.normalized,p=new c.constructor(l.length*u);let m=0,v=0;for(let x=0,b=l.length;x<b;x++){m=a.isInterleavedBufferAttribute?l[x]*a.data.stride+a.offset:l[x]*u;for(let w=0;w<u;w++)p[v++]=c[m++]}return new cr(p,u,d)}if(null===this.index)return console.warn("THREE.BufferGeometry.toNonIndexed(): BufferGeometry is already non-indexed."),this;const t=new oi,i=this.index.array,r=this.attributes;for(const a in r){const c=e(r[a],i);t.setAttribute(a,c)}const s=this.morphAttributes;for(const a in s){const l=[],c=s[a];for(let u=0,d=c.length;u<d;u++){const m=e(c[u],i);l.push(m)}t.morphAttributes[a]=l}t.morphTargetsRelative=this.morphTargetsRelative;const o=this.groups;for(let a=0,l=o.length;a<l;a++){const c=o[a];t.addGroup(c.start,c.count,c.materialIndex)}return t}toJSON(){const e={metadata:{version:4.6,type:"BufferGeometry",generator:"BufferGeometry.toJSON"}};if(e.uuid=this.uuid,e.type=this.type,""!==this.name&&(e.name=this.name),Object.keys(this.userData).length>0&&(e.userData=this.userData),void 0!==this.parameters){const l=this.parameters;for(const c in l)void 0!==l[c]&&(e[c]=l[c]);return e}e.data={attributes:{}};const t=this.index;null!==t&&(e.data.index={type:t.array.constructor.name,array:Array.prototype.slice.call(t.array)});const i=this.attributes;for(const l in i)e.data.attributes[l]=i[l].toJSON(e.data);const r={};let s=!1;for(const l in this.morphAttributes){const c=this.morphAttributes[l],u=[];for(let d=0,p=c.length;d<p;d++)u.push(c[d].toJSON(e.data));u.length>0&&(r[l]=u,s=!0)}s&&(e.data.morphAttributes=r,e.data.morphTargetsRelative=this.morphTargetsRelative);const o=this.groups;o.length>0&&(e.data.groups=JSON.parse(JSON.stringify(o)));const a=this.boundingSphere;return null!==a&&(e.data.boundingSphere={center:a.center.toArray(),radius:a.radius}),e}clone(){return(new this.constructor).copy(this)}copy(e){this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null;const t={};this.name=e.name;const i=e.index;null!==i&&this.setIndex(i.clone(t));const r=e.attributes;for(const c in r)this.setAttribute(c,r[c].clone(t));const s=e.morphAttributes;for(const c in s){const u=[],d=s[c];for(let p=0,m=d.length;p<m;p++)u.push(d[p].clone(t));this.morphAttributes[c]=u}this.morphTargetsRelative=e.morphTargetsRelative;const o=e.groups;for(let c=0,u=o.length;c<u;c++){const d=o[c];this.addGroup(d.start,d.count,d.materialIndex)}const a=e.boundingBox;null!==a&&(this.boundingBox=a.clone());const l=e.boundingSphere;return null!==l&&(this.boundingSphere=l.clone()),this.drawRange.start=e.drawRange.start,this.drawRange.count=e.drawRange.count,this.userData=e.userData,this}dispose(){this.dispatchEvent({type:"dispose"})}}const k9=new Un,np=new Gb,UA=new qo,O9=new j,BA=new j,zA=new j,HA=new j,nF=new j,GA=new j,N9=new j,WA=new j;class xs extends Mr{constructor(e=new oi,t=new tp){super(),this.isMesh=!0,this.type="Mesh",this.geometry=e,this.material=t,this.updateMorphTargets()}copy(e,t){return super.copy(e,t),void 0!==e.morphTargetInfluences&&(this.morphTargetInfluences=e.morphTargetInfluences.slice()),void 0!==e.morphTargetDictionary&&(this.morphTargetDictionary=Object.assign({},e.morphTargetDictionary)),this.material=Array.isArray(e.material)?e.material.slice():e.material,this.geometry=e.geometry,this}updateMorphTargets(){const t=this.geometry.morphAttributes,i=Object.keys(t);if(i.length>0){const r=t[i[0]];if(void 0!==r){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let s=0,o=r.length;s<o;s++){const a=r[s].name||String(s);this.morphTargetInfluences.push(0),this.morphTargetDictionary[a]=s}}}}getVertexPosition(e,t){const i=this.geometry,s=i.morphAttributes.position,o=i.morphTargetsRelative;t.fromBufferAttribute(i.attributes.position,e);const a=this.morphTargetInfluences;if(s&&a){GA.set(0,0,0);for(let l=0,c=s.length;l<c;l++){const u=a[l];0!==u&&(nF.fromBufferAttribute(s[l],e),GA.addScaledVector(o?nF:nF.sub(t),u))}t.add(GA)}return t}raycast(e,t){const i=this.geometry,s=this.matrixWorld;void 0!==this.material&&(null===i.boundingSphere&&i.computeBoundingSphere(),UA.copy(i.boundingSphere),UA.applyMatrix4(s),np.copy(e.ray).recast(e.near),(!1!==UA.containsPoint(np.origin)||!(null===np.intersectSphere(UA,O9)||np.origin.distanceToSquared(O9)>(e.far-e.near)**2))&&(k9.copy(s).invert(),np.copy(e.ray).applyMatrix4(k9),(null===i.boundingBox||!1!==np.intersectsBox(i.boundingBox))&&this._computeIntersections(e,t,np)))}_computeIntersections(e,t,i){let r;const s=this.geometry,o=this.material,a=s.index,l=s.attributes.position,c=s.attributes.uv,u=s.attributes.uv1,d=s.attributes.normal,p=s.groups,m=s.drawRange;if(null!==a)if(Array.isArray(o))for(let v=0,x=p.length;v<x;v++){const b=p[v],w=o[b.materialIndex];for(let A=Math.max(b.start,m.start),V=Math.min(a.count,Math.min(b.start+b.count,m.start+m.count));A<V;A+=3)r=jA(this,w,e,i,c,u,d,a.getX(A),a.getX(A+1),a.getX(A+2)),r&&(r.faceIndex=Math.floor(A/3),r.face.materialIndex=b.materialIndex,t.push(r))}else for(let b=Math.max(0,m.start),w=Math.min(a.count,m.start+m.count);b<w;b+=3)r=jA(this,o,e,i,c,u,d,a.getX(b),a.getX(b+1),a.getX(b+2)),r&&(r.faceIndex=Math.floor(b/3),t.push(r));else if(void 0!==l)if(Array.isArray(o))for(let v=0,x=p.length;v<x;v++){const b=p[v],w=o[b.materialIndex];for(let A=Math.max(b.start,m.start),V=Math.min(l.count,Math.min(b.start+b.count,m.start+m.count));A<V;A+=3)r=jA(this,w,e,i,c,u,d,A,A+1,A+2),r&&(r.faceIndex=Math.floor(A/3),r.face.materialIndex=b.materialIndex,t.push(r))}else for(let b=Math.max(0,m.start),w=Math.min(l.count,m.start+m.count);b<w;b+=3)r=jA(this,o,e,i,c,u,d,b,b+1,b+2),r&&(r.faceIndex=Math.floor(b/3),t.push(r))}}function jA(n,e,t,i,r,s,o,a,l,c){n.getVertexPosition(a,BA),n.getVertexPosition(l,zA),n.getVertexPosition(c,HA);const u=function B0e(n,e,t,i,r,s,o,a){let l;if(l=1===e.side?i.intersectTriangle(o,s,r,!0,a):i.intersectTriangle(r,s,o,0===e.side,a),null===l)return null;WA.copy(a),WA.applyMatrix4(n.matrixWorld);const c=t.ray.origin.distanceTo(WA);return c<t.near||c>t.far?null:{distance:c,point:WA.clone(),object:n}}(n,e,t,i,BA,zA,HA,N9);if(u){const d=new j;za.getBarycoord(N9,BA,zA,HA,d),r&&(u.uv=za.getInterpolatedAttribute(r,a,l,c,d,new et)),s&&(u.uv1=za.getInterpolatedAttribute(s,a,l,c,d,new et)),o&&(u.normal=za.getInterpolatedAttribute(o,a,l,c,d,new j),u.normal.dot(i.direction)>0&&u.normal.multiplyScalar(-1));const p={a,b:l,c,normal:new j,materialIndex:0};za.getNormal(BA,zA,HA,p.normal),u.face=p,u.barycoord=d}return u}class P_ extends oi{constructor(e=1,t=1,i=1,r=1,s=1,o=1){super(),this.type="BoxGeometry",this.parameters={width:e,height:t,depth:i,widthSegments:r,heightSegments:s,depthSegments:o};const a=this;r=Math.floor(r),s=Math.floor(s),o=Math.floor(o);const l=[],c=[],u=[],d=[];let p=0,m=0;function v(x,b,w,T,S,A,V,F,P,D,I){const M=A/P,O=V/D,z=A/2,N=V/2,Ee=F/2,je=P+1,ee=D+1;let we=0,oe=0;const $e=new j;for(let vt=0;vt<ee;vt++){const Ft=vt*O-N;for(let rn=0;rn<je;rn++)$e[x]=(rn*M-z)*T,$e[b]=Ft*S,$e[w]=Ee,c.push($e.x,$e.y,$e.z),$e[x]=0,$e[b]=0,$e[w]=F>0?1:-1,u.push($e.x,$e.y,$e.z),d.push(rn/P),d.push(1-vt/D),we+=1}for(let vt=0;vt<D;vt++)for(let Ft=0;Ft<P;Ft++){const gn=p+Ft+je*(vt+1),Re=p+(Ft+1)+je*(vt+1),pt=p+(Ft+1)+je*vt;l.push(p+Ft+je*vt,gn,pt),l.push(gn,Re,pt),oe+=6}a.addGroup(m,oe,I),m+=oe,p+=we}v("z","y","x",-1,-1,i,t,e,o,s,0),v("z","y","x",1,-1,i,t,-e,o,s,1),v("x","z","y",1,1,e,i,t,r,o,2),v("x","z","y",1,-1,e,i,-t,r,o,3),v("x","y","z",1,-1,e,t,i,r,s,4),v("x","y","z",-1,-1,e,t,-i,r,s,5),this.setIndex(l),this.setAttribute("position",new hn(c,3)),this.setAttribute("normal",new hn(u,3)),this.setAttribute("uv",new hn(d,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new P_(e.width,e.height,e.depth,e.widthSegments,e.heightSegments,e.depthSegments)}}function k_(n){const e={};for(const t in n){e[t]={};for(const i in n[t]){const r=n[t][i];r&&(r.isColor||r.isMatrix3||r.isMatrix4||r.isVector2||r.isVector3||r.isVector4||r.isTexture||r.isQuaternion)?r.isRenderTargetTexture?(console.warn("UniformsUtils: Textures of render targets cannot be cloned via cloneUniforms() or mergeUniforms()."),e[t][i]=null):e[t][i]=r.clone():e[t][i]=Array.isArray(r)?r.slice():r}}return e}function Ko(n){const e={};for(let t=0;t<n.length;t++){const i=k_(n[t]);for(const r in i)e[r]=i[r]}return e}function F9(n){const e=n.getRenderTarget();return null===e?n.outputColorSpace:!0===e.isXRRenderTarget?e.texture.colorSpace:Li.workingColorSpace}const H0e={clone:k_,merge:Ko};class Ic extends Xo{constructor(e){super(),this.isShaderMaterial=!0,this.type="ShaderMaterial",this.defines={},this.uniforms={},this.uniformsGroups=[],this.vertexShader="void main() {\n\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n}",this.fragmentShader="void main() {\n\tgl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );\n}",this.linewidth=1,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.clipping=!1,this.forceSinglePass=!0,this.extensions={clipCullDistance:!1,multiDraw:!1},this.defaultAttributeValues={color:[1,1,1],uv:[0,0],uv1:[0,0]},this.index0AttributeName=void 0,this.uniformsNeedUpdate=!1,this.glslVersion=null,void 0!==e&&this.setValues(e)}copy(e){return super.copy(e),this.fragmentShader=e.fragmentShader,this.vertexShader=e.vertexShader,this.uniforms=k_(e.uniforms),this.uniformsGroups=function z0e(n){const e=[];for(let t=0;t<n.length;t++)e.push(n[t].clone());return e}(e.uniformsGroups),this.defines=Object.assign({},e.defines),this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.fog=e.fog,this.lights=e.lights,this.clipping=e.clipping,this.extensions=Object.assign({},e.extensions),this.glslVersion=e.glslVersion,this}toJSON(e){const t=super.toJSON(e);t.glslVersion=this.glslVersion,t.uniforms={};for(const r in this.uniforms){const o=this.uniforms[r].value;t.uniforms[r]=o&&o.isTexture?{type:"t",value:o.toJSON(e).uuid}:o&&o.isColor?{type:"c",value:o.getHex()}:o&&o.isVector2?{type:"v2",value:o.toArray()}:o&&o.isVector3?{type:"v3",value:o.toArray()}:o&&o.isVector4?{type:"v4",value:o.toArray()}:o&&o.isMatrix3?{type:"m3",value:o.toArray()}:o&&o.isMatrix4?{type:"m4",value:o.toArray()}:{value:o}}Object.keys(this.defines).length>0&&(t.defines=this.defines),t.vertexShader=this.vertexShader,t.fragmentShader=this.fragmentShader,t.lights=this.lights,t.clipping=this.clipping;const i={};for(const r in this.extensions)!0===this.extensions[r]&&(i[r]=!0);return Object.keys(i).length>0&&(t.extensions=i),t}}class iF extends Mr{constructor(){super(),this.isCamera=!0,this.type="Camera",this.matrixWorldInverse=new Un,this.projectionMatrix=new Un,this.projectionMatrixInverse=new Un,this.coordinateSystem=Ac}copy(e,t){return super.copy(e,t),this.matrixWorldInverse.copy(e.matrixWorldInverse),this.projectionMatrix.copy(e.projectionMatrix),this.projectionMatrixInverse.copy(e.projectionMatrixInverse),this.coordinateSystem=e.coordinateSystem,this}getWorldDirection(e){return super.getWorldDirection(e).negate()}updateMatrixWorld(e){super.updateMatrixWorld(e),this.matrixWorldInverse.copy(this.matrixWorld).invert()}updateWorldMatrix(e,t){super.updateWorldMatrix(e,t),this.matrixWorldInverse.copy(this.matrixWorld).invert()}clone(){return(new this.constructor).copy(this)}}const ph=new j,L9=new et,V9=new et;class no extends iF{constructor(e=50,t=1,i=.1,r=2e3){super(),this.isPerspectiveCamera=!0,this.type="PerspectiveCamera",this.fov=e,this.zoom=1,this.near=i,this.far=r,this.focus=10,this.aspect=t,this.view=null,this.filmGauge=35,this.filmOffset=0,this.updateProjectionMatrix()}copy(e,t){return super.copy(e,t),this.fov=e.fov,this.zoom=e.zoom,this.near=e.near,this.far=e.far,this.focus=e.focus,this.aspect=e.aspect,this.view=null===e.view?null:Object.assign({},e.view),this.filmGauge=e.filmGauge,this.filmOffset=e.filmOffset,this}setFocalLength(e){const t=.5*this.getFilmHeight()/e;this.fov=2*__*Math.atan(t),this.updateProjectionMatrix()}getFocalLength(){const e=Math.tan(.5*Zf*this.fov);return.5*this.getFilmHeight()/e}getEffectiveFOV(){return 2*__*Math.atan(Math.tan(.5*Zf*this.fov)/this.zoom)}getFilmWidth(){return this.filmGauge*Math.min(this.aspect,1)}getFilmHeight(){return this.filmGauge/Math.max(this.aspect,1)}getViewBounds(e,t,i){ph.set(-1,-1,.5).applyMatrix4(this.projectionMatrixInverse),t.set(ph.x,ph.y).multiplyScalar(-e/ph.z),ph.set(1,1,.5).applyMatrix4(this.projectionMatrixInverse),i.set(ph.x,ph.y).multiplyScalar(-e/ph.z)}getViewSize(e,t){return this.getViewBounds(e,L9,V9),t.subVectors(V9,L9)}setViewOffset(e,t,i,r,s,o){this.aspect=e/t,null===this.view&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=i,this.view.offsetY=r,this.view.width=s,this.view.height=o,this.updateProjectionMatrix()}clearViewOffset(){null!==this.view&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const e=this.near;let t=e*Math.tan(.5*Zf*this.fov)/this.zoom,i=2*t,r=this.aspect*i,s=-.5*r;const o=this.view;if(null!==this.view&&this.view.enabled){const l=o.fullWidth,c=o.fullHeight;s+=o.offsetX*r/l,t-=o.offsetY*i/c,r*=o.width/l,i*=o.height/c}const a=this.filmOffset;0!==a&&(s+=e*a/this.getFilmWidth()),this.projectionMatrix.makePerspective(s,s+r,t,t-i,e,this.far,this.coordinateSystem),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){const t=super.toJSON(e);return t.object.fov=this.fov,t.object.zoom=this.zoom,t.object.near=this.near,t.object.far=this.far,t.object.focus=this.focus,t.object.aspect=this.aspect,null!==this.view&&(t.object.view=Object.assign({},this.view)),t.object.filmGauge=this.filmGauge,t.object.filmOffset=this.filmOffset,t}}class j0e extends Mr{constructor(e,t,i){super(),this.type="CubeCamera",this.renderTarget=i,this.coordinateSystem=null,this.activeMipmapLevel=0;const r=new no(-90,1,e,t);r.layers=this.layers,this.add(r);const s=new no(-90,1,e,t);s.layers=this.layers,this.add(s);const o=new no(-90,1,e,t);o.layers=this.layers,this.add(o);const a=new no(-90,1,e,t);a.layers=this.layers,this.add(a);const l=new no(-90,1,e,t);l.layers=this.layers,this.add(l);const c=new no(-90,1,e,t);c.layers=this.layers,this.add(c)}updateCoordinateSystem(){const e=this.coordinateSystem,t=this.children.concat(),[i,r,s,o,a,l]=t;for(const c of t)this.remove(c);if(e===Ac)i.up.set(0,1,0),i.lookAt(1,0,0),r.up.set(0,1,0),r.lookAt(-1,0,0),s.up.set(0,0,-1),s.lookAt(0,1,0),o.up.set(0,0,1),o.lookAt(0,-1,0),a.up.set(0,1,0),a.lookAt(0,0,1),l.up.set(0,1,0),l.lookAt(0,0,-1);else{if(2001!==e)throw new Error("THREE.CubeCamera.updateCoordinateSystem(): Invalid coordinate system: "+e);i.up.set(0,-1,0),i.lookAt(-1,0,0),r.up.set(0,-1,0),r.lookAt(1,0,0),s.up.set(0,0,1),s.lookAt(0,1,0),o.up.set(0,0,-1),o.lookAt(0,-1,0),a.up.set(0,-1,0),a.lookAt(0,0,1),l.up.set(0,-1,0),l.lookAt(0,0,-1)}for(const c of t)this.add(c),c.updateMatrixWorld()}update(e,t){null===this.parent&&this.updateMatrixWorld();const{renderTarget:i,activeMipmapLevel:r}=this;this.coordinateSystem!==e.coordinateSystem&&(this.coordinateSystem=e.coordinateSystem,this.updateCoordinateSystem());const[s,o,a,l,c,u]=this.children,d=e.getRenderTarget(),p=e.getActiveCubeFace(),m=e.getActiveMipmapLevel(),v=e.xr.enabled;e.xr.enabled=!1;const x=i.texture.generateMipmaps;i.texture.generateMipmaps=!1,e.setRenderTarget(i,0,r),e.render(t,s),e.setRenderTarget(i,1,r),e.render(t,o),e.setRenderTarget(i,2,r),e.render(t,a),e.setRenderTarget(i,3,r),e.render(t,l),e.setRenderTarget(i,4,r),e.render(t,c),i.texture.generateMipmaps=x,e.setRenderTarget(i,5,r),e.render(t,u),e.setRenderTarget(d,p,m),e.xr.enabled=v,i.texture.needsPMREMUpdate=!0}}class $A extends ga{constructor(e,t,i,r,s,o,a,l,c,u){super(e=void 0!==e?e:[],t=void 0!==t?t:oh,i,r,s,o,a,l,c,u),this.isCubeTexture=!0,this.flipY=!1}get images(){return this.image}set images(e){this.image=e}}class $0e extends Lu{constructor(e=1,t={}){super(e,e,t),this.isWebGLCubeRenderTarget=!0;const i={width:e,height:e,depth:1};this.texture=new $A([i,i,i,i,i,i],t.mapping,t.wrapS,t.wrapT,t.magFilter,t.minFilter,t.format,t.type,t.anisotropy,t.colorSpace),this.texture.isRenderTargetTexture=!0,this.texture.generateMipmaps=void 0!==t.generateMipmaps&&t.generateMipmaps,this.texture.minFilter=void 0!==t.minFilter?t.minFilter:Hs}fromEquirectangularTexture(e,t){this.texture.type=t.type,this.texture.colorSpace=t.colorSpace,this.texture.generateMipmaps=t.generateMipmaps,this.texture.minFilter=t.minFilter,this.texture.magFilter=t.magFilter;const i_uniforms={tEquirect:{value:null}},i_vertexShader="\n\n\t\t\t\tvarying vec3 vWorldDirection;\n\n\t\t\t\tvec3 transformDirection( in vec3 dir, in mat4 matrix ) {\n\n\t\t\t\t\treturn normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );\n\n\t\t\t\t}\n\n\t\t\t\tvoid main() {\n\n\t\t\t\t\tvWorldDirection = transformDirection( position, modelMatrix );\n\n\t\t\t\t\t#include <begin_vertex>\n\t\t\t\t\t#include <project_vertex>\n\n\t\t\t\t}\n\t\t\t",i_fragmentShader="\n\n\t\t\t\tuniform sampler2D tEquirect;\n\n\t\t\t\tvarying vec3 vWorldDirection;\n\n\t\t\t\t#include <common>\n\n\t\t\t\tvoid main() {\n\n\t\t\t\t\tvec3 direction = normalize( vWorldDirection );\n\n\t\t\t\t\tvec2 sampleUV = equirectUv( direction );\n\n\t\t\t\t\tgl_FragColor = texture2D( tEquirect, sampleUV );\n\n\t\t\t\t}\n\t\t\t",r=new P_(5,5,5),s=new Ic({name:"CubemapFromEquirect",uniforms:k_(i_uniforms),vertexShader:i_vertexShader,fragmentShader:i_fragmentShader,side:1,blending:0});s.uniforms.tEquirect.value=t;const o=new xs(r,s),a=t.minFilter;return t.minFilter===ku&&(t.minFilter=Hs),new j0e(1,10,this).update(e,o),t.minFilter=a,o.geometry.dispose(),o.material.dispose(),this}clear(e,t,i,r){const s=e.getRenderTarget();for(let o=0;o<6;o++)e.setRenderTarget(this,o),e.clear(t,i,r);e.setRenderTarget(s)}}class qb extends Mr{constructor(){super(),this.isGroup=!0,this.type="Group"}}const q0e={type:"move"};class rF{constructor(){this._targetRay=null,this._grip=null,this._hand=null}getHandSpace(){return null===this._hand&&(this._hand=new qb,this._hand.matrixAutoUpdate=!1,this._hand.visible=!1,this._hand.joints={},this._hand.inputState={pinching:!1}),this._hand}getTargetRaySpace(){return null===this._targetRay&&(this._targetRay=new qb,this._targetRay.matrixAutoUpdate=!1,this._targetRay.visible=!1,this._targetRay.hasLinearVelocity=!1,this._targetRay.linearVelocity=new j,this._targetRay.hasAngularVelocity=!1,this._targetRay.angularVelocity=new j),this._targetRay}getGripSpace(){return null===this._grip&&(this._grip=new qb,this._grip.matrixAutoUpdate=!1,this._grip.visible=!1,this._grip.hasLinearVelocity=!1,this._grip.linearVelocity=new j,this._grip.hasAngularVelocity=!1,this._grip.angularVelocity=new j),this._grip}dispatchEvent(e){return null!==this._targetRay&&this._targetRay.dispatchEvent(e),null!==this._grip&&this._grip.dispatchEvent(e),null!==this._hand&&this._hand.dispatchEvent(e),this}connect(e){if(e&&e.hand){const t=this._hand;if(t)for(const i of e.hand.values())this._getHandJoint(t,i)}return this.dispatchEvent({type:"connected",data:e}),this}disconnect(e){return this.dispatchEvent({type:"disconnected",data:e}),null!==this._targetRay&&(this._targetRay.visible=!1),null!==this._grip&&(this._grip.visible=!1),null!==this._hand&&(this._hand.visible=!1),this}update(e,t,i){let r=null,s=null,o=null;const a=this._targetRay,l=this._grip,c=this._hand;if(e&&"visible-blurred"!==t.session.visibilityState){if(c&&e.hand){o=!0;for(const x of e.hand.values()){const b=t.getJointPose(x,i),w=this._getHandJoint(c,x);null!==b&&(w.matrix.fromArray(b.transform.matrix),w.matrix.decompose(w.position,w.rotation,w.scale),w.matrixWorldNeedsUpdate=!0,w.jointRadius=b.radius),w.visible=null!==b}const p=c.joints["index-finger-tip"].position.distanceTo(c.joints["thumb-tip"].position),m=.02,v=.005;c.inputState.pinching&&p>m+v?(c.inputState.pinching=!1,this.dispatchEvent({type:"pinchend",handedness:e.handedness,target:this})):!c.inputState.pinching&&p<=m-v&&(c.inputState.pinching=!0,this.dispatchEvent({type:"pinchstart",handedness:e.handedness,target:this}))}else null!==l&&e.gripSpace&&(s=t.getPose(e.gripSpace,i),null!==s&&(l.matrix.fromArray(s.transform.matrix),l.matrix.decompose(l.position,l.rotation,l.scale),l.matrixWorldNeedsUpdate=!0,s.linearVelocity?(l.hasLinearVelocity=!0,l.linearVelocity.copy(s.linearVelocity)):l.hasLinearVelocity=!1,s.angularVelocity?(l.hasAngularVelocity=!0,l.angularVelocity.copy(s.angularVelocity)):l.hasAngularVelocity=!1));null!==a&&(r=t.getPose(e.targetRaySpace,i),null===r&&null!==s&&(r=s),null!==r&&(a.matrix.fromArray(r.transform.matrix),a.matrix.decompose(a.position,a.rotation,a.scale),a.matrixWorldNeedsUpdate=!0,r.linearVelocity?(a.hasLinearVelocity=!0,a.linearVelocity.copy(r.linearVelocity)):a.hasLinearVelocity=!1,r.angularVelocity?(a.hasAngularVelocity=!0,a.angularVelocity.copy(r.angularVelocity)):a.hasAngularVelocity=!1,this.dispatchEvent(q0e)))}return null!==a&&(a.visible=null!==r),null!==l&&(l.visible=null!==s),null!==c&&(c.visible=null!==o),this}_getHandJoint(e,t){if(void 0===e.joints[t.jointName]){const i=new qb;i.matrixAutoUpdate=!1,i.visible=!1,e.joints[t.jointName]=i,e.add(i)}return e.joints[t.jointName]}}class U9 extends Mr{constructor(){super(),this.isScene=!0,this.type="Scene",this.background=null,this.environment=null,this.fog=null,this.backgroundBlurriness=0,this.backgroundIntensity=1,this.backgroundRotation=new Bu,this.environmentIntensity=1,this.environmentRotation=new Bu,this.overrideMaterial=null,typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}copy(e,t){return super.copy(e,t),null!==e.background&&(this.background=e.background.clone()),null!==e.environment&&(this.environment=e.environment.clone()),null!==e.fog&&(this.fog=e.fog.clone()),this.backgroundBlurriness=e.backgroundBlurriness,this.backgroundIntensity=e.backgroundIntensity,this.backgroundRotation.copy(e.backgroundRotation),this.environmentIntensity=e.environmentIntensity,this.environmentRotation.copy(e.environmentRotation),null!==e.overrideMaterial&&(this.overrideMaterial=e.overrideMaterial.clone()),this.matrixAutoUpdate=e.matrixAutoUpdate,this}toJSON(e){const t=super.toJSON(e);return null!==this.fog&&(t.object.fog=this.fog.toJSON()),this.backgroundBlurriness>0&&(t.object.backgroundBlurriness=this.backgroundBlurriness),1!==this.backgroundIntensity&&(t.object.backgroundIntensity=this.backgroundIntensity),t.object.backgroundRotation=this.backgroundRotation.toArray(),1!==this.environmentIntensity&&(t.object.environmentIntensity=this.environmentIntensity),t.object.environmentRotation=this.environmentRotation.toArray(),t}}const hF=new j,tbe=new j,nbe=new Jn;class ip{constructor(e=new j(1,0,0),t=0){this.isPlane=!0,this.normal=e,this.constant=t}set(e,t){return this.normal.copy(e),this.constant=t,this}setComponents(e,t,i,r){return this.normal.set(e,t,i),this.constant=r,this}setFromNormalAndCoplanarPoint(e,t){return this.normal.copy(e),this.constant=-t.dot(this.normal),this}setFromCoplanarPoints(e,t,i){const r=hF.subVectors(i,t).cross(tbe.subVectors(e,t)).normalize();return this.setFromNormalAndCoplanarPoint(r,e),this}copy(e){return this.normal.copy(e.normal),this.constant=e.constant,this}normalize(){const e=1/this.normal.length();return this.normal.multiplyScalar(e),this.constant*=e,this}negate(){return this.constant*=-1,this.normal.negate(),this}distanceToPoint(e){return this.normal.dot(e)+this.constant}distanceToSphere(e){return this.distanceToPoint(e.center)-e.radius}projectPoint(e,t){return t.copy(e).addScaledVector(this.normal,-this.distanceToPoint(e))}intersectLine(e,t){const i=e.delta(hF),r=this.normal.dot(i);if(0===r)return 0===this.distanceToPoint(e.start)?t.copy(e.start):null;const s=-(e.start.dot(this.normal)+this.constant)/r;return s<0||s>1?null:t.copy(e.start).addScaledVector(i,s)}intersectsLine(e){const t=this.distanceToPoint(e.start),i=this.distanceToPoint(e.end);return t<0&&i>0||i<0&&t>0}intersectsBox(e){return e.intersectsPlane(this)}intersectsSphere(e){return e.intersectsPlane(this)}coplanarPoint(e){return e.copy(this.normal).multiplyScalar(-this.constant)}applyMatrix4(e,t){const i=t||nbe.getNormalMatrix(e),r=this.coplanarPoint(hF).applyMatrix4(e),s=this.normal.applyMatrix3(i).normalize();return this.constant=-r.dot(s),this}translate(e){return this.constant-=e.dot(this.normal),this}equals(e){return e.normal.equals(this.normal)&&e.constant===this.constant}clone(){return(new this.constructor).copy(this)}}const rp=new qo,JA=new j;class eI{constructor(e=new ip,t=new ip,i=new ip,r=new ip,s=new ip,o=new ip){this.planes=[e,t,i,r,s,o]}set(e,t,i,r,s,o){const a=this.planes;return a[0].copy(e),a[1].copy(t),a[2].copy(i),a[3].copy(r),a[4].copy(s),a[5].copy(o),this}copy(e){const t=this.planes;for(let i=0;i<6;i++)t[i].copy(e.planes[i]);return this}setFromProjectionMatrix(e,t=Ac){const i=this.planes,r=e.elements,s=r[0],o=r[1],a=r[2],l=r[3],c=r[4],u=r[5],d=r[6],p=r[7],m=r[8],v=r[9],x=r[10],b=r[11],w=r[12],T=r[13],S=r[14],A=r[15];if(i[0].setComponents(l-s,p-c,b-m,A-w).normalize(),i[1].setComponents(l+s,p+c,b+m,A+w).normalize(),i[2].setComponents(l+o,p+u,b+v,A+T).normalize(),i[3].setComponents(l-o,p-u,b-v,A-T).normalize(),i[4].setComponents(l-a,p-d,b-x,A-S).normalize(),t===Ac)i[5].setComponents(l+a,p+d,b+x,A+S).normalize();else{if(2001!==t)throw new Error("THREE.Frustum.setFromProjectionMatrix(): Invalid coordinate system: "+t);i[5].setComponents(a,d,x,S).normalize()}return this}intersectsObject(e){if(void 0!==e.boundingSphere)null===e.boundingSphere&&e.computeBoundingSphere(),rp.copy(e.boundingSphere).applyMatrix4(e.matrixWorld);else{const t=e.geometry;null===t.boundingSphere&&t.computeBoundingSphere(),rp.copy(t.boundingSphere).applyMatrix4(e.matrixWorld)}return this.intersectsSphere(rp)}intersectsSprite(e){return rp.center.set(0,0,0),rp.radius=.7071067811865476,rp.applyMatrix4(e.matrixWorld),this.intersectsSphere(rp)}intersectsSphere(e){const t=this.planes,i=e.center,r=-e.radius;for(let s=0;s<6;s++)if(t[s].distanceToPoint(i)<r)return!1;return!0}intersectsBox(e){const t=this.planes;for(let i=0;i<6;i++){const r=t[i];if(JA.x=r.normal.x>0?e.max.x:e.min.x,JA.y=r.normal.y>0?e.max.y:e.min.y,JA.z=r.normal.z>0?e.max.z:e.min.z,r.distanceToPoint(JA)<0)return!1}return!0}containsPoint(e){const t=this.planes;for(let i=0;i<6;i++)if(t[i].distanceToPoint(e)<0)return!1;return!0}clone(){return(new this.constructor).copy(this)}}class lq extends ga{constructor(e,t,i,r,s,o,a,l,c,u=d_){if(u!==d_&&u!==h_)throw new Error("DepthTexture format must be either THREE.DepthFormat or THREE.DepthStencilFormat");void 0===i&&u===d_&&(i=ah),void 0===i&&u===h_&&(i=u_),super(null,r,s,o,a,l,u,i,c),this.isDepthTexture=!0,this.image={width:e,height:t},this.magFilter=void 0!==a?a:To,this.minFilter=void 0!==l?l:To,this.flipY=!1,this.generateMipmaps=!1,this.compareFunction=null}copy(e){return super.copy(e),this.compareFunction=e.compareFunction,this}toJSON(e){const t=super.toJSON(e);return null!==this.compareFunction&&(t.compareFunction=this.compareFunction),t}}class lx extends oi{constructor(e=1,t=1,i=1,r=1){super(),this.type="PlaneGeometry",this.parameters={width:e,height:t,widthSegments:i,heightSegments:r};const s=e/2,o=t/2,a=Math.floor(i),l=Math.floor(r),c=a+1,u=l+1,d=e/a,p=t/l,m=[],v=[],x=[],b=[];for(let w=0;w<u;w++){const T=w*p-o;for(let S=0;S<c;S++)v.push(S*d-s,-T,0),x.push(0,0,1),b.push(S/a),b.push(1-w/l)}for(let w=0;w<l;w++)for(let T=0;T<a;T++){const A=T+c*(w+1),V=T+1+c*(w+1),F=T+1+c*w;m.push(T+c*w,A,F),m.push(A,V,F)}this.setIndex(m),this.setAttribute("position",new hn(v,3)),this.setAttribute("normal",new hn(x,3)),this.setAttribute("uv",new hn(b,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new lx(e.width,e.height,e.widthSegments,e.heightSegments)}}class cx extends oi{constructor(e=1,t=32,i=16,r=0,s=2*Math.PI,o=0,a=Math.PI){super(),this.type="SphereGeometry",this.parameters={radius:e,widthSegments:t,heightSegments:i,phiStart:r,phiLength:s,thetaStart:o,thetaLength:a},t=Math.max(3,Math.floor(t)),i=Math.max(2,Math.floor(i));const l=Math.min(o+a,Math.PI);let c=0;const u=[],d=new j,p=new j,m=[],v=[],x=[],b=[];for(let w=0;w<=i;w++){const T=[],S=w/i;let A=0;0===w&&0===o?A=.5/t:w===i&&l===Math.PI&&(A=-.5/t);for(let V=0;V<=t;V++){const F=V/t;d.x=-e*Math.cos(r+F*s)*Math.sin(o+S*a),d.y=e*Math.cos(o+S*a),d.z=e*Math.sin(r+F*s)*Math.sin(o+S*a),v.push(d.x,d.y,d.z),p.copy(d).normalize(),x.push(p.x,p.y,p.z),b.push(F+A,1-S),T.push(c++)}u.push(T)}for(let w=0;w<i;w++)for(let T=0;T<t;T++){const A=u[w][T],V=u[w+1][T],F=u[w+1][T+1];(0!==w||o>0)&&m.push(u[w][T+1],A,F),(w!==i-1||l<Math.PI)&&m.push(A,V,F)}this.setIndex(m),this.setAttribute("position",new hn(v,3)),this.setAttribute("normal",new hn(x,3)),this.setAttribute("uv",new hn(b,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new cx(e.radius,e.widthSegments,e.heightSegments,e.phiStart,e.phiLength,e.thetaStart,e.thetaLength)}}class UF extends Xo{constructor(e){super(),this.isMeshStandardMaterial=!0,this.type="MeshStandardMaterial",this.defines={STANDARD:""},this.color=new Zt(16777215),this.roughness=1,this.metalness=0,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Zt(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=0,this.normalScale=new et(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.roughnessMap=null,this.metalnessMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new Bu,this.envMapIntensity=1,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.defines={STANDARD:""},this.color.copy(e.color),this.roughness=e.roughness,this.metalness=e.metalness,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.roughnessMap=e.roughnessMap,this.metalnessMap=e.metalnessMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapRotation.copy(e.envMapRotation),this.envMapIntensity=e.envMapIntensity,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}class Eq extends Xo{constructor(e){super(),this.isMeshDepthMaterial=!0,this.type="MeshDepthMaterial",this.depthPacking=3200,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.setValues(e)}copy(e){return super.copy(e),this.depthPacking=e.depthPacking,this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this}}class Tq extends Xo{constructor(e){super(),this.isMeshDistanceMaterial=!0,this.type="MeshDistanceMaterial",this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.setValues(e)}copy(e){return super.copy(e),this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this}}function up(n,e,t){return!n||!t&&n.constructor===e?n:"number"==typeof e.BYTES_PER_ELEMENT?new e(n):Array.prototype.slice.call(n)}class bI{constructor(e,t,i,r){this.parameterPositions=e,this._cachedIndex=0,this.resultBuffer=void 0!==r?r:new t.constructor(i),this.sampleValues=t,this.valueSize=i,this.settings=null,this.DefaultSettings_={}}evaluate(e){const t=this.parameterPositions;let i=this._cachedIndex,r=t[i],s=t[i-1];e:{t:{let o;n:{i:if(!(e<r)){for(let a=i+2;;){if(void 0===r){if(e<s)break i;return i=t.length,this._cachedIndex=i,this.copySampleValue_(i-1)}if(i===a)break;if(s=r,r=t[++i],e<r)break t}o=t.length;break n}if(e>=s)break e;{const a=t[1];e<a&&(i=2,s=a);for(let l=i-2;;){if(void 0===s)return this._cachedIndex=0,this.copySampleValue_(0);if(i===l)break;if(r=s,s=t[--i-1],e>=s)break t}o=i,i=0}}for(;i<o;){const a=i+o>>>1;e<t[a]?o=a:i=a+1}if(r=t[i],s=t[i-1],void 0===s)return this._cachedIndex=0,this.copySampleValue_(0);if(void 0===r)return i=t.length,this._cachedIndex=i,this.copySampleValue_(i-1)}this._cachedIndex=i,this.intervalChanged_(i,s,r)}return this.interpolate_(i,s,e,r)}getSettings_(){return this.settings||this.DefaultSettings_}copySampleValue_(e){const t=this.resultBuffer,i=this.sampleValues,r=this.valueSize,s=e*r;for(let o=0;o!==r;++o)t[o]=i[s+o];return t}interpolate_(){throw new Error("call to abstract method")}intervalChanged_(){}}class rxe extends bI{constructor(e,t,i,r){super(e,t,i,r),this._weightPrev=-0,this._offsetPrev=-0,this._weightNext=-0,this._offsetNext=-0,this.DefaultSettings_={endingStart:2400,endingEnd:2400}}intervalChanged_(e,t,i){const r=this.parameterPositions;let s=e-2,o=e+1,a=r[s],l=r[o];if(void 0===a)switch(this.getSettings_().endingStart){case 2401:s=e,a=2*t-i;break;case 2402:s=r.length-2,a=t+r[s]-r[s+1];break;default:s=e,a=i}if(void 0===l)switch(this.getSettings_().endingEnd){case 2401:o=e,l=2*i-t;break;case 2402:o=1,l=i+r[1]-r[0];break;default:o=e-1,l=t}const c=.5*(i-t),u=this.valueSize;this._weightPrev=c/(t-a),this._weightNext=c/(l-i),this._offsetPrev=s*u,this._offsetNext=o*u}interpolate_(e,t,i,r){const s=this.resultBuffer,o=this.sampleValues,a=this.valueSize,l=e*a,c=l-a,u=this._offsetPrev,d=this._offsetNext,p=this._weightPrev,m=this._weightNext,v=(i-t)/(r-t),x=v*v,b=x*v,w=-p*b+2*p*x-p*v,T=(1+p)*b+(-1.5-2*p)*x+(-.5+p)*v+1,S=(-1-m)*b+(1.5+m)*x+.5*v,A=m*b-m*x;for(let V=0;V!==a;++V)s[V]=w*o[u+V]+T*o[c+V]+S*o[l+V]+A*o[d+V];return s}}class Iq extends bI{constructor(e,t,i,r){super(e,t,i,r)}interpolate_(e,t,i,r){const s=this.resultBuffer,o=this.sampleValues,a=this.valueSize,l=e*a,c=l-a,u=(i-t)/(r-t),d=1-u;for(let p=0;p!==a;++p)s[p]=o[c+p]*d+o[l+p]*u;return s}}class sxe extends bI{constructor(e,t,i,r){super(e,t,i,r)}interpolate_(e){return this.copySampleValue_(e-1)}}class Mc{constructor(e,t,i,r){if(void 0===e)throw new Error("THREE.KeyframeTrack: track name is undefined");if(void 0===t||0===t.length)throw new Error("THREE.KeyframeTrack: no keyframes in track named "+e);this.name=e,this.times=up(t,this.TimeBufferType),this.values=up(i,this.ValueBufferType),this.setInterpolation(r||this.DefaultInterpolation)}static toJSON(e){const t=e.constructor;let i;if(t.toJSON!==this.toJSON)i=t.toJSON(e);else{i={name:e.name,times:up(e.times,Array),values:up(e.values,Array)};const r=e.getInterpolation();r!==e.DefaultInterpolation&&(i.interpolation=r)}return i.type=e.ValueTypeName,i}InterpolantFactoryMethodDiscrete(e){return new sxe(this.times,this.values,this.getValueSize(),e)}InterpolantFactoryMethodLinear(e){return new Iq(this.times,this.values,this.getValueSize(),e)}InterpolantFactoryMethodSmooth(e){return new rxe(this.times,this.values,this.getValueSize(),e)}setInterpolation(e){let t;switch(e){case 2300:t=this.InterpolantFactoryMethodDiscrete;break;case 2301:t=this.InterpolantFactoryMethodLinear;break;case 2302:t=this.InterpolantFactoryMethodSmooth}if(void 0===t){const i="unsupported interpolation for "+this.ValueTypeName+" keyframe track named "+this.name;if(void 0===this.createInterpolant){if(e===this.DefaultInterpolation)throw new Error(i);this.setInterpolation(this.DefaultInterpolation)}return console.warn("THREE.KeyframeTrack:",i),this}return this.createInterpolant=t,this}getInterpolation(){switch(this.createInterpolant){case this.InterpolantFactoryMethodDiscrete:return 2300;case this.InterpolantFactoryMethodLinear:return 2301;case this.InterpolantFactoryMethodSmooth:return 2302}}getValueSize(){return this.values.length/this.times.length}shift(e){if(0!==e){const t=this.times;for(let i=0,r=t.length;i!==r;++i)t[i]+=e}return this}scale(e){if(1!==e){const t=this.times;for(let i=0,r=t.length;i!==r;++i)t[i]*=e}return this}trim(e,t){const i=this.times,r=i.length;let s=0,o=r-1;for(;s!==r&&i[s]<e;)++s;for(;-1!==o&&i[o]>t;)--o;if(++o,0!==s||o!==r){s>=o&&(o=Math.max(o,1),s=o-1);const a=this.getValueSize();this.times=i.slice(s,o),this.values=this.values.slice(s*a,o*a)}return this}validate(){let e=!0;const t=this.getValueSize();t-Math.floor(t)!=0&&(console.error("THREE.KeyframeTrack: Invalid value size in track.",this),e=!1);const i=this.times,r=this.values,s=i.length;0===s&&(console.error("THREE.KeyframeTrack: Track is empty.",this),e=!1);let o=null;for(let a=0;a!==s;a++){const l=i[a];if("number"==typeof l&&isNaN(l)){console.error("THREE.KeyframeTrack: Time is not a valid number.",this,a,l),e=!1;break}if(null!==o&&o>l){console.error("THREE.KeyframeTrack: Out of order keys.",this,a,l,o),e=!1;break}o=l}if(void 0!==r&&function Sq(n){return ArrayBuffer.isView(n)&&!(n instanceof DataView)}(r))for(let a=0,l=r.length;a!==l;++a){const c=r[a];if(isNaN(c)){console.error("THREE.KeyframeTrack: Value is not a valid number.",this,a,c),e=!1;break}}return e}optimize(){const e=this.times.slice(),t=this.values.slice(),i=this.getValueSize(),r=2302===this.getInterpolation(),s=e.length-1;let o=1;for(let a=1;a<s;++a){let l=!1;const c=e[a];if(c!==e[a+1]&&(1!==a||c!==e[0]))if(r)l=!0;else{const d=a*i,p=d-i,m=d+i;for(let v=0;v!==i;++v){const x=t[d+v];if(x!==t[p+v]||x!==t[m+v]){l=!0;break}}}if(l){if(a!==o){e[o]=e[a];const d=a*i,p=o*i;for(let m=0;m!==i;++m)t[p+m]=t[d+m]}++o}}if(s>0){e[o]=e[s];for(let a=s*i,l=o*i,c=0;c!==i;++c)t[l+c]=t[a+c];++o}return o!==e.length?(this.times=e.slice(0,o),this.values=t.slice(0,o*i)):(this.times=e,this.values=t),this}clone(){const e=this.times.slice(),t=this.values.slice(),r=new(0,this.constructor)(this.name,e,t);return r.createInterpolant=this.createInterpolant,r}}Mc.prototype.TimeBufferType=Float32Array,Mc.prototype.ValueBufferType=Float32Array,Mc.prototype.DefaultInterpolation=2301;class W_ extends Mc{constructor(e,t,i){super(e,t,i)}}W_.prototype.ValueTypeName="bool",W_.prototype.ValueBufferType=Array,W_.prototype.DefaultInterpolation=2300,W_.prototype.InterpolantFactoryMethodLinear=void 0,W_.prototype.InterpolantFactoryMethodSmooth=void 0;(class Cq extends Mc{}).prototype.ValueTypeName="color";(class xI extends Mc{}).prototype.ValueTypeName="number";class oxe extends bI{constructor(e,t,i,r){super(e,t,i,r)}interpolate_(e,t,i,r){const s=this.resultBuffer,o=this.sampleValues,a=this.valueSize,l=(i-t)/(r-t);let c=e*a;for(let u=c+a;c!==u;c+=4)Ua.slerpFlat(s,0,o,c-a,o,c,l);return s}}class wI extends Mc{InterpolantFactoryMethodLinear(e){return new oxe(this.times,this.values,this.getValueSize(),e)}}wI.prototype.ValueTypeName="quaternion",wI.prototype.InterpolantFactoryMethodSmooth=void 0;class j_ extends Mc{constructor(e,t,i){super(e,t,i)}}j_.prototype.ValueTypeName="string",j_.prototype.ValueBufferType=Array,j_.prototype.DefaultInterpolation=2300,j_.prototype.InterpolantFactoryMethodLinear=void 0,j_.prototype.InterpolantFactoryMethodSmooth=void 0;(class EI extends Mc{}).prototype.ValueTypeName="vector",Error;class dp extends Mr{constructor(e,t=1){super(),this.isLight=!0,this.type="Light",this.color=new Zt(e),this.intensity=t}dispose(){}copy(e,t){return super.copy(e,t),this.color.copy(e.color),this.intensity=e.intensity,this}toJSON(e){const t=super.toJSON(e);return t.object.color=this.color.getHex(),t.object.intensity=this.intensity,void 0!==this.groundColor&&(t.object.groundColor=this.groundColor.getHex()),void 0!==this.distance&&(t.object.distance=this.distance),void 0!==this.angle&&(t.object.angle=this.angle),void 0!==this.decay&&(t.object.decay=this.decay),void 0!==this.penumbra&&(t.object.penumbra=this.penumbra),void 0!==this.shadow&&(t.object.shadow=this.shadow.toJSON()),void 0!==this.target&&(t.object.target=this.target.uuid),t}}class jF extends iF{constructor(e=-1,t=1,i=1,r=-1,s=.1,o=2e3){super(),this.isOrthographicCamera=!0,this.type="OrthographicCamera",this.zoom=1,this.view=null,this.left=e,this.right=t,this.top=i,this.bottom=r,this.near=s,this.far=o,this.updateProjectionMatrix()}copy(e,t){return super.copy(e,t),this.left=e.left,this.right=e.right,this.top=e.top,this.bottom=e.bottom,this.near=e.near,this.far=e.far,this.zoom=e.zoom,this.view=null===e.view?null:Object.assign({},e.view),this}setViewOffset(e,t,i,r,s,o){null===this.view&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=i,this.view.offsetY=r,this.view.width=s,this.view.height=o,this.updateProjectionMatrix()}clearViewOffset(){null!==this.view&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const e=(this.right-this.left)/(2*this.zoom),t=(this.top-this.bottom)/(2*this.zoom),i=(this.right+this.left)/2,r=(this.top+this.bottom)/2;let s=i-e,o=i+e,a=r+t,l=r-t;if(null!==this.view&&this.view.enabled){const c=(this.right-this.left)/this.view.fullWidth/this.zoom,u=(this.top-this.bottom)/this.view.fullHeight/this.zoom;s+=c*this.view.offsetX,o=s+c*this.view.width,a-=u*this.view.offsetY,l=a-u*this.view.height}this.projectionMatrix.makeOrthographic(s,o,a,l,this.near,this.far,this.coordinateSystem),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){const t=super.toJSON(e);return t.object.zoom=this.zoom,t.object.left=this.left,t.object.right=this.right,t.object.top=this.top,t.object.bottom=this.bottom,t.object.near=this.near,t.object.far=this.far,null!==this.view&&(t.object.view=Object.assign({},this.view)),t}}class kq extends dp{constructor(e,t){super(e,t),this.isAmbientLight=!0,this.type="AmbientLight"}}class Txe extends no{constructor(e=[]){super(),this.isArrayCamera=!0,this.cameras=e,this.index=0}}const qF="\\[\\]\\.:\\/",Dxe=new RegExp("["+qF+"]","g"),XF="[^"+qF+"]",Rxe="[^"+qF.replace("\\.","")+"]",Fxe=new RegExp("^"+/((?:WC+[\/:])*)/.source.replace("WC",XF)+/(WCOD+)?/.source.replace("WCOD",Rxe)+/(?:\.(WC+)(?:\[(.+)\])?)?/.source.replace("WC",XF)+/\.(WC+)(?:\[(.+)\])?/.source.replace("WC",XF)+"$"),Lxe=["material","materials","bones","map"];class Vxe{constructor(e,t,i){const r=i||Dr.parseTrackName(t);this._targetGroup=e,this._bindings=e.subscribe_(t,r)}getValue(e,t){this.bind();const r=this._bindings[this._targetGroup.nCachedObjects_];void 0!==r&&r.getValue(e,t)}setValue(e,t){const i=this._bindings;for(let r=this._targetGroup.nCachedObjects_,s=i.length;r!==s;++r)i[r].setValue(e,t)}bind(){const e=this._bindings;for(let t=this._targetGroup.nCachedObjects_,i=e.length;t!==i;++t)e[t].bind()}unbind(){const e=this._bindings;for(let t=this._targetGroup.nCachedObjects_,i=e.length;t!==i;++t)e[t].unbind()}}let Dr=(()=>{class n{constructor(t,i,r){this.path=i,this.parsedPath=r||n.parseTrackName(i),this.node=n.findNode(t,this.parsedPath.nodeName),this.rootNode=t,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}static create(t,i,r){return t&&t.isAnimationObjectGroup?new n.Composite(t,i,r):new n(t,i,r)}static sanitizeNodeName(t){return t.replace(/\s/g,"_").replace(Dxe,"")}static parseTrackName(t){const i=Fxe.exec(t);if(null===i)throw new Error("PropertyBinding: Cannot parse trackName: "+t);const r={nodeName:i[2],objectName:i[3],objectIndex:i[4],propertyName:i[5],propertyIndex:i[6]},s=r.nodeName&&r.nodeName.lastIndexOf(".");if(void 0!==s&&-1!==s){const o=r.nodeName.substring(s+1);-1!==Lxe.indexOf(o)&&(r.nodeName=r.nodeName.substring(0,s),r.objectName=o)}if(null===r.propertyName||0===r.propertyName.length)throw new Error("PropertyBinding: can not parse propertyName from trackName: "+t);return r}static findNode(t,i){if(void 0===i||""===i||"."===i||-1===i||i===t.name||i===t.uuid)return t;if(t.skeleton){const r=t.skeleton.getBoneByName(i);if(void 0!==r)return r}if(t.children){const r=function(o){for(let a=0;a<o.length;a++){const l=o[a];if(l.name===i||l.uuid===i)return l;const c=r(l.children);if(c)return c}return null},s=r(t.children);if(s)return s}return null}_getValue_unavailable(){}_setValue_unavailable(){}_getValue_direct(t,i){t[i]=this.targetObject[this.propertyName]}_getValue_array(t,i){const r=this.resolvedProperty;for(let s=0,o=r.length;s!==o;++s)t[i++]=r[s]}_getValue_arrayElement(t,i){t[i]=this.resolvedProperty[this.propertyIndex]}_getValue_toArray(t,i){this.resolvedProperty.toArray(t,i)}_setValue_direct(t,i){this.targetObject[this.propertyName]=t[i]}_setValue_direct_setNeedsUpdate(t,i){this.targetObject[this.propertyName]=t[i],this.targetObject.needsUpdate=!0}_setValue_direct_setMatrixWorldNeedsUpdate(t,i){this.targetObject[this.propertyName]=t[i],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_array(t,i){const r=this.resolvedProperty;for(let s=0,o=r.length;s!==o;++s)r[s]=t[i++]}_setValue_array_setNeedsUpdate(t,i){const r=this.resolvedProperty;for(let s=0,o=r.length;s!==o;++s)r[s]=t[i++];this.targetObject.needsUpdate=!0}_setValue_array_setMatrixWorldNeedsUpdate(t,i){const r=this.resolvedProperty;for(let s=0,o=r.length;s!==o;++s)r[s]=t[i++];this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_arrayElement(t,i){this.resolvedProperty[this.propertyIndex]=t[i]}_setValue_arrayElement_setNeedsUpdate(t,i){this.resolvedProperty[this.propertyIndex]=t[i],this.targetObject.needsUpdate=!0}_setValue_arrayElement_setMatrixWorldNeedsUpdate(t,i){this.resolvedProperty[this.propertyIndex]=t[i],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_fromArray(t,i){this.resolvedProperty.fromArray(t,i)}_setValue_fromArray_setNeedsUpdate(t,i){this.resolvedProperty.fromArray(t,i),this.targetObject.needsUpdate=!0}_setValue_fromArray_setMatrixWorldNeedsUpdate(t,i){this.resolvedProperty.fromArray(t,i),this.targetObject.matrixWorldNeedsUpdate=!0}_getValue_unbound(t,i){this.bind(),this.getValue(t,i)}_setValue_unbound(t,i){this.bind(),this.setValue(t,i)}bind(){let t=this.node;const i=this.parsedPath,r=i.objectName,s=i.propertyName;let o=i.propertyIndex;if(t||(t=n.findNode(this.rootNode,i.nodeName),this.node=t),this.getValue=this._getValue_unavailable,this.setValue=this._setValue_unavailable,!t)return void console.warn("THREE.PropertyBinding: No target node found for track: "+this.path+".");if(r){let u=i.objectIndex;switch(r){case"materials":if(!t.material)return void console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);if(!t.material.materials)return void console.error("THREE.PropertyBinding: Can not bind to material.materials as node.material does not have a materials array.",this);t=t.material.materials;break;case"bones":if(!t.skeleton)return void console.error("THREE.PropertyBinding: Can not bind to bones as node does not have a skeleton.",this);t=t.skeleton.bones;for(let d=0;d<t.length;d++)if(t[d].name===u){u=d;break}break;case"map":if("map"in t){t=t.map;break}if(!t.material)return void console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);if(!t.material.map)return void console.error("THREE.PropertyBinding: Can not bind to material.map as node.material does not have a map.",this);t=t.material.map;break;default:if(void 0===t[r])return void console.error("THREE.PropertyBinding: Can not bind to objectName of node undefined.",this);t=t[r]}if(void 0!==u){if(void 0===t[u])return void console.error("THREE.PropertyBinding: Trying to bind to objectIndex of objectName, but is undefined.",this,t);t=t[u]}}const a=t[s];if(void 0===a)return void console.error("THREE.PropertyBinding: Trying to update property for track: "+i.nodeName+"."+s+" but it wasn't found.",t);let l=this.Versioning.None;this.targetObject=t,!0===t.isMaterial?l=this.Versioning.NeedsUpdate:!0===t.isObject3D&&(l=this.Versioning.MatrixWorldNeedsUpdate);let c=this.BindingType.Direct;if(void 0!==o){if("morphTargetInfluences"===s){if(!t.geometry)return void console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.",this);if(!t.geometry.morphAttributes)return void console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.morphAttributes.",this);void 0!==t.morphTargetDictionary[o]&&(o=t.morphTargetDictionary[o])}c=this.BindingType.ArrayElement,this.resolvedProperty=a,this.propertyIndex=o}else void 0!==a.fromArray&&void 0!==a.toArray?(c=this.BindingType.HasFromToArray,this.resolvedProperty=a):Array.isArray(a)?(c=this.BindingType.EntireArray,this.resolvedProperty=a):this.propertyName=s;this.getValue=this.GetterByBindingType[c],this.setValue=this.SetterByBindingTypeAndVersioning[c][l]}unbind(){this.node=null,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}}return n.Composite=Vxe,n})();function ZF(n,e,t,i){const r=function $xe(n){switch(n){case Ou:case i9:return{byteLength:1,components:1};case Lb:case r9:case Vb:return{byteLength:2,components:1};case eN:case tN:return{byteLength:2,components:4};case ah:case JO:case Fa:return{byteLength:4,components:1};case s9:return{byteLength:4,components:3}}throw new Error(`Unknown texture type ${n}.`)}(i);switch(t){case o9:case l9:return n*e;case c9:return n*e*2;case nN:case vA:return n*e/r.components*r.byteLength;case u9:case iN:return n*e*2/r.components*r.byteLength;case a9:return n*e*3/r.components*r.byteLength;case ma:case rN:return n*e*4/r.components*r.byteLength;case yA:case bA:return Math.floor((n+3)/4)*Math.floor((e+3)/4)*8;case xA:case wA:return Math.floor((n+3)/4)*Math.floor((e+3)/4)*16;case oN:case lN:return Math.max(n,16)*Math.max(e,8)/4;case sN:case aN:return Math.max(n,8)*Math.max(e,8)/2;case cN:case uN:return Math.floor((n+3)/4)*Math.floor((e+3)/4)*8;case dN:case hN:return Math.floor((n+3)/4)*Math.floor((e+3)/4)*16;case fN:return Math.floor((n+4)/5)*Math.floor((e+3)/4)*16;case pN:return Math.floor((n+4)/5)*Math.floor((e+4)/5)*16;case mN:return Math.floor((n+5)/6)*Math.floor((e+4)/5)*16;case gN:return Math.floor((n+5)/6)*Math.floor((e+5)/6)*16;case _N:return Math.floor((n+7)/8)*Math.floor((e+4)/5)*16;case vN:return Math.floor((n+7)/8)*Math.floor((e+5)/6)*16;case yN:return Math.floor((n+7)/8)*Math.floor((e+7)/8)*16;case bN:return Math.floor((n+9)/10)*Math.floor((e+4)/5)*16;case xN:return Math.floor((n+9)/10)*Math.floor((e+5)/6)*16;case wN:return Math.floor((n+9)/10)*Math.floor((e+7)/8)*16;case EN:return Math.floor((n+9)/10)*Math.floor((e+9)/10)*16;case TN:return Math.floor((n+11)/12)*Math.floor((e+9)/10)*16;case SN:return Math.floor((n+11)/12)*Math.floor((e+11)/12)*16;case EA:case AN:case IN:return Math.ceil(n/4)*Math.ceil(e/4)*16;case d9:case CN:return Math.ceil(n/4)*Math.ceil(e/4)*8;case MN:case DN:return Math.ceil(n/4)*Math.ceil(e/4)*16}throw new Error(`Unable to determine texture byte length for ${t} format.`)}function n7(){let n=null,e=!1,t=null,i=null;function r(s,o){t(s,o),i=n.requestAnimationFrame(r)}return{start:function(){!0!==e&&null!==t&&(i=n.requestAnimationFrame(r),e=!0)},stop:function(){n.cancelAnimationFrame(i),e=!1},setAnimationLoop:function(s){t=s},setContext:function(s){n=s}}}function qxe(n){const e=new WeakMap;return{get:function r(a){return a.isInterleavedBufferAttribute&&(a=a.data),e.get(a)},remove:function s(a){a.isInterleavedBufferAttribute&&(a=a.data);const l=e.get(a);l&&(n.deleteBuffer(l.buffer),e.delete(a))},update:function o(a,l){if(a.isInterleavedBufferAttribute&&(a=a.data),a.isGLBufferAttribute){const u=e.get(a);return void((!u||u.version<a.version)&&e.set(a,{buffer:a.buffer,type:a.type,bytesPerElement:a.elementSize,version:a.version}))}const c=e.get(a);if(void 0===c)e.set(a,function t(a,l){const c=a.array,u=a.usage,d=c.byteLength,p=n.createBuffer();let m;if(n.bindBuffer(l,p),n.bufferData(l,c,u),a.onUploadCallback(),c instanceof Float32Array)m=n.FLOAT;else if(c instanceof Uint16Array)m=a.isFloat16BufferAttribute?n.HALF_FLOAT:n.UNSIGNED_SHORT;else if(c instanceof Int16Array)m=n.SHORT;else if(c instanceof Uint32Array)m=n.UNSIGNED_INT;else if(c instanceof Int32Array)m=n.INT;else if(c instanceof Int8Array)m=n.BYTE;else if(c instanceof Uint8Array)m=n.UNSIGNED_BYTE;else{if(!(c instanceof Uint8ClampedArray))throw new Error("THREE.WebGLAttributes: Unsupported buffer data format: "+c);m=n.UNSIGNED_BYTE}return{buffer:p,type:m,bytesPerElement:c.BYTES_PER_ELEMENT,version:a.version,size:d}}(a,l));else if(c.version<a.version){if(c.size!==a.array.byteLength)throw new Error("THREE.WebGLAttributes: The size of the buffer attribute's array buffer does not match the original size. Resizing buffer attributes is not supported.");(function i(a,l,c){const u=l.array,d=l.updateRanges;if(n.bindBuffer(c,a),0===d.length)n.bufferSubData(c,0,u);else{d.sort((m,v)=>m.start-v.start);let p=0;for(let m=1;m<d.length;m++){const v=d[p],x=d[m];x.start<=v.start+v.count+1?v.count=Math.max(v.count,x.start+x.count-v.start):(++p,d[p]=x)}d.length=p+1;for(let m=0,v=d.length;m<v;m++){const x=d[m];n.bufferSubData(c,x.start*u.BYTES_PER_ELEMENT,u,x.start,x.count)}l.clearUpdateRanges()}l.onUploadCallback()})(c.buffer,a,l),c.version=a.version}}}}Dr.prototype.BindingType={Direct:0,EntireArray:1,ArrayElement:2,HasFromToArray:3},Dr.prototype.Versioning={None:0,NeedsUpdate:1,MatrixWorldNeedsUpdate:2},Dr.prototype.GetterByBindingType=[Dr.prototype._getValue_direct,Dr.prototype._getValue_array,Dr.prototype._getValue_arrayElement,Dr.prototype._getValue_toArray],Dr.prototype.SetterByBindingTypeAndVersioning=[[Dr.prototype._setValue_direct,Dr.prototype._setValue_direct_setNeedsUpdate,Dr.prototype._setValue_direct_setMatrixWorldNeedsUpdate],[Dr.prototype._setValue_array,Dr.prototype._setValue_array_setNeedsUpdate,Dr.prototype._setValue_array_setMatrixWorldNeedsUpdate],[Dr.prototype._setValue_arrayElement,Dr.prototype._setValue_arrayElement_setNeedsUpdate,Dr.prototype._setValue_arrayElement_setMatrixWorldNeedsUpdate],[Dr.prototype._setValue_fromArray,Dr.prototype._setValue_fromArray_setNeedsUpdate,Dr.prototype._setValue_fromArray_setMatrixWorldNeedsUpdate]],new Float32Array(1),typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("register",{detail:{revision:"173"}})),typeof window<"u"&&(window.__THREE__?console.warn("WARNING: Multiple instances of Three.js being imported."):window.__THREE__="173");const ai={alphahash_fragment:"#ifdef USE_ALPHAHASH\n\tif ( diffuseColor.a < getAlphaHashThreshold( vPosition ) ) discard;\n#endif",alphahash_pars_fragment:"#ifdef USE_ALPHAHASH\n\tconst float ALPHA_HASH_SCALE = 0.05;\n\tfloat hash2D( vec2 value ) {\n\t\treturn fract( 1.0e4 * sin( 17.0 * value.x + 0.1 * value.y ) * ( 0.1 + abs( sin( 13.0 * value.y + value.x ) ) ) );\n\t}\n\tfloat hash3D( vec3 value ) {\n\t\treturn hash2D( vec2( hash2D( value.xy ), value.z ) );\n\t}\n\tfloat getAlphaHashThreshold( vec3 position ) {\n\t\tfloat maxDeriv = max(\n\t\t\tlength( dFdx( position.xyz ) ),\n\t\t\tlength( dFdy( position.xyz ) )\n\t\t);\n\t\tfloat pixScale = 1.0 / ( ALPHA_HASH_SCALE * maxDeriv );\n\t\tvec2 pixScales = vec2(\n\t\t\texp2( floor( log2( pixScale ) ) ),\n\t\t\texp2( ceil( log2( pixScale ) ) )\n\t\t);\n\t\tvec2 alpha = vec2(\n\t\t\thash3D( floor( pixScales.x * position.xyz ) ),\n\t\t\thash3D( floor( pixScales.y * position.xyz ) )\n\t\t);\n\t\tfloat lerpFactor = fract( log2( pixScale ) );\n\t\tfloat x = ( 1.0 - lerpFactor ) * alpha.x + lerpFactor * alpha.y;\n\t\tfloat a = min( lerpFactor, 1.0 - lerpFactor );\n\t\tvec3 cases = vec3(\n\t\t\tx * x / ( 2.0 * a * ( 1.0 - a ) ),\n\t\t\t( x - 0.5 * a ) / ( 1.0 - a ),\n\t\t\t1.0 - ( ( 1.0 - x ) * ( 1.0 - x ) / ( 2.0 * a * ( 1.0 - a ) ) )\n\t\t);\n\t\tfloat threshold = ( x < ( 1.0 - a ) )\n\t\t\t? ( ( x < a ) ? cases.x : cases.y )\n\t\t\t: cases.z;\n\t\treturn clamp( threshold , 1.0e-6, 1.0 );\n\t}\n#endif",alphamap_fragment:"#ifdef USE_ALPHAMAP\n\tdiffuseColor.a *= texture2D( alphaMap, vAlphaMapUv ).g;\n#endif",alphamap_pars_fragment:"#ifdef USE_ALPHAMAP\n\tuniform sampler2D alphaMap;\n#endif",alphatest_fragment:"#ifdef USE_ALPHATEST\n\t#ifdef ALPHA_TO_COVERAGE\n\tdiffuseColor.a = smoothstep( alphaTest, alphaTest + fwidth( diffuseColor.a ), diffuseColor.a );\n\tif ( diffuseColor.a == 0.0 ) discard;\n\t#else\n\tif ( diffuseColor.a < alphaTest ) discard;\n\t#endif\n#endif",alphatest_pars_fragment:"#ifdef USE_ALPHATEST\n\tuniform float alphaTest;\n#endif",aomap_fragment:"#ifdef USE_AOMAP\n\tfloat ambientOcclusion = ( texture2D( aoMap, vAoMapUv ).r - 1.0 ) * aoMapIntensity + 1.0;\n\treflectedLight.indirectDiffuse *= ambientOcclusion;\n\t#if defined( USE_CLEARCOAT ) \n\t\tclearcoatSpecularIndirect *= ambientOcclusion;\n\t#endif\n\t#if defined( USE_SHEEN ) \n\t\tsheenSpecularIndirect *= ambientOcclusion;\n\t#endif\n\t#if defined( USE_ENVMAP ) && defined( STANDARD )\n\t\tfloat dotNV = saturate( dot( geometryNormal, geometryViewDir ) );\n\t\treflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, ambientOcclusion, material.roughness );\n\t#endif\n#endif",aomap_pars_fragment:"#ifdef USE_AOMAP\n\tuniform sampler2D aoMap;\n\tuniform float aoMapIntensity;\n#endif",batching_pars_vertex:"#ifdef USE_BATCHING\n\t#if ! defined( GL_ANGLE_multi_draw )\n\t#define gl_DrawID _gl_DrawID\n\tuniform int _gl_DrawID;\n\t#endif\n\tuniform highp sampler2D batchingTexture;\n\tuniform highp usampler2D batchingIdTexture;\n\tmat4 getBatchingMatrix( const in float i ) {\n\t\tint size = textureSize( batchingTexture, 0 ).x;\n\t\tint j = int( i ) * 4;\n\t\tint x = j % size;\n\t\tint y = j / size;\n\t\tvec4 v1 = texelFetch( batchingTexture, ivec2( x, y ), 0 );\n\t\tvec4 v2 = texelFetch( batchingTexture, ivec2( x + 1, y ), 0 );\n\t\tvec4 v3 = texelFetch( batchingTexture, ivec2( x + 2, y ), 0 );\n\t\tvec4 v4 = texelFetch( batchingTexture, ivec2( x + 3, y ), 0 );\n\t\treturn mat4( v1, v2, v3, v4 );\n\t}\n\tfloat getIndirectIndex( const in int i ) {\n\t\tint size = textureSize( batchingIdTexture, 0 ).x;\n\t\tint x = i % size;\n\t\tint y = i / size;\n\t\treturn float( texelFetch( batchingIdTexture, ivec2( x, y ), 0 ).r );\n\t}\n#endif\n#ifdef USE_BATCHING_COLOR\n\tuniform sampler2D batchingColorTexture;\n\tvec3 getBatchingColor( const in float i ) {\n\t\tint size = textureSize( batchingColorTexture, 0 ).x;\n\t\tint j = int( i );\n\t\tint x = j % size;\n\t\tint y = j / size;\n\t\treturn texelFetch( batchingColorTexture, ivec2( x, y ), 0 ).rgb;\n\t}\n#endif",batching_vertex:"#ifdef USE_BATCHING\n\tmat4 batchingMatrix = getBatchingMatrix( getIndirectIndex( gl_DrawID ) );\n#endif",begin_vertex:"vec3 transformed = vec3( position );\n#ifdef USE_ALPHAHASH\n\tvPosition = vec3( position );\n#endif",beginnormal_vertex:"vec3 objectNormal = vec3( normal );\n#ifdef USE_TANGENT\n\tvec3 objectTangent = vec3( tangent.xyz );\n#endif",bsdfs:"float G_BlinnPhong_Implicit( ) {\n\treturn 0.25;\n}\nfloat D_BlinnPhong( const in float shininess, const in float dotNH ) {\n\treturn RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );\n}\nvec3 BRDF_BlinnPhong( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 specularColor, const in float shininess ) {\n\tvec3 halfDir = normalize( lightDir + viewDir );\n\tfloat dotNH = saturate( dot( normal, halfDir ) );\n\tfloat dotVH = saturate( dot( viewDir, halfDir ) );\n\tvec3 F = F_Schlick( specularColor, 1.0, dotVH );\n\tfloat G = G_BlinnPhong_Implicit( );\n\tfloat D = D_BlinnPhong( shininess, dotNH );\n\treturn F * ( G * D );\n} // validated",iridescence_fragment:"#ifdef USE_IRIDESCENCE\n\tconst mat3 XYZ_TO_REC709 = mat3(\n\t\t 3.2404542, -0.9692660,  0.0556434,\n\t\t-1.5371385,  1.8760108, -0.2040259,\n\t\t-0.4985314,  0.0415560,  1.0572252\n\t);\n\tvec3 Fresnel0ToIor( vec3 fresnel0 ) {\n\t\tvec3 sqrtF0 = sqrt( fresnel0 );\n\t\treturn ( vec3( 1.0 ) + sqrtF0 ) / ( vec3( 1.0 ) - sqrtF0 );\n\t}\n\tvec3 IorToFresnel0( vec3 transmittedIor, float incidentIor ) {\n\t\treturn pow2( ( transmittedIor - vec3( incidentIor ) ) / ( transmittedIor + vec3( incidentIor ) ) );\n\t}\n\tfloat IorToFresnel0( float transmittedIor, float incidentIor ) {\n\t\treturn pow2( ( transmittedIor - incidentIor ) / ( transmittedIor + incidentIor ));\n\t}\n\tvec3 evalSensitivity( float OPD, vec3 shift ) {\n\t\tfloat phase = 2.0 * PI * OPD * 1.0e-9;\n\t\tvec3 val = vec3( 5.4856e-13, 4.4201e-13, 5.2481e-13 );\n\t\tvec3 pos = vec3( 1.6810e+06, 1.7953e+06, 2.2084e+06 );\n\t\tvec3 var = vec3( 4.3278e+09, 9.3046e+09, 6.6121e+09 );\n\t\tvec3 xyz = val * sqrt( 2.0 * PI * var ) * cos( pos * phase + shift ) * exp( - pow2( phase ) * var );\n\t\txyz.x += 9.7470e-14 * sqrt( 2.0 * PI * 4.5282e+09 ) * cos( 2.2399e+06 * phase + shift[ 0 ] ) * exp( - 4.5282e+09 * pow2( phase ) );\n\t\txyz /= 1.0685e-7;\n\t\tvec3 rgb = XYZ_TO_REC709 * xyz;\n\t\treturn rgb;\n\t}\n\tvec3 evalIridescence( float outsideIOR, float eta2, float cosTheta1, float thinFilmThickness, vec3 baseF0 ) {\n\t\tvec3 I;\n\t\tfloat iridescenceIOR = mix( outsideIOR, eta2, smoothstep( 0.0, 0.03, thinFilmThickness ) );\n\t\tfloat sinTheta2Sq = pow2( outsideIOR / iridescenceIOR ) * ( 1.0 - pow2( cosTheta1 ) );\n\t\tfloat cosTheta2Sq = 1.0 - sinTheta2Sq;\n\t\tif ( cosTheta2Sq < 0.0 ) {\n\t\t\treturn vec3( 1.0 );\n\t\t}\n\t\tfloat cosTheta2 = sqrt( cosTheta2Sq );\n\t\tfloat R0 = IorToFresnel0( iridescenceIOR, outsideIOR );\n\t\tfloat R12 = F_Schlick( R0, 1.0, cosTheta1 );\n\t\tfloat T121 = 1.0 - R12;\n\t\tfloat phi12 = 0.0;\n\t\tif ( iridescenceIOR < outsideIOR ) phi12 = PI;\n\t\tfloat phi21 = PI - phi12;\n\t\tvec3 baseIOR = Fresnel0ToIor( clamp( baseF0, 0.0, 0.9999 ) );\t\tvec3 R1 = IorToFresnel0( baseIOR, iridescenceIOR );\n\t\tvec3 R23 = F_Schlick( R1, 1.0, cosTheta2 );\n\t\tvec3 phi23 = vec3( 0.0 );\n\t\tif ( baseIOR[ 0 ] < iridescenceIOR ) phi23[ 0 ] = PI;\n\t\tif ( baseIOR[ 1 ] < iridescenceIOR ) phi23[ 1 ] = PI;\n\t\tif ( baseIOR[ 2 ] < iridescenceIOR ) phi23[ 2 ] = PI;\n\t\tfloat OPD = 2.0 * iridescenceIOR * thinFilmThickness * cosTheta2;\n\t\tvec3 phi = vec3( phi21 ) + phi23;\n\t\tvec3 R123 = clamp( R12 * R23, 1e-5, 0.9999 );\n\t\tvec3 r123 = sqrt( R123 );\n\t\tvec3 Rs = pow2( T121 ) * R23 / ( vec3( 1.0 ) - R123 );\n\t\tvec3 C0 = R12 + Rs;\n\t\tI = C0;\n\t\tvec3 Cm = Rs - T121;\n\t\tfor ( int m = 1; m <= 2; ++ m ) {\n\t\t\tCm *= r123;\n\t\t\tvec3 Sm = 2.0 * evalSensitivity( float( m ) * OPD, float( m ) * phi );\n\t\t\tI += Cm * Sm;\n\t\t}\n\t\treturn max( I, vec3( 0.0 ) );\n\t}\n#endif",bumpmap_pars_fragment:"#ifdef USE_BUMPMAP\n\tuniform sampler2D bumpMap;\n\tuniform float bumpScale;\n\tvec2 dHdxy_fwd() {\n\t\tvec2 dSTdx = dFdx( vBumpMapUv );\n\t\tvec2 dSTdy = dFdy( vBumpMapUv );\n\t\tfloat Hll = bumpScale * texture2D( bumpMap, vBumpMapUv ).x;\n\t\tfloat dBx = bumpScale * texture2D( bumpMap, vBumpMapUv + dSTdx ).x - Hll;\n\t\tfloat dBy = bumpScale * texture2D( bumpMap, vBumpMapUv + dSTdy ).x - Hll;\n\t\treturn vec2( dBx, dBy );\n\t}\n\tvec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy, float faceDirection ) {\n\t\tvec3 vSigmaX = normalize( dFdx( surf_pos.xyz ) );\n\t\tvec3 vSigmaY = normalize( dFdy( surf_pos.xyz ) );\n\t\tvec3 vN = surf_norm;\n\t\tvec3 R1 = cross( vSigmaY, vN );\n\t\tvec3 R2 = cross( vN, vSigmaX );\n\t\tfloat fDet = dot( vSigmaX, R1 ) * faceDirection;\n\t\tvec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );\n\t\treturn normalize( abs( fDet ) * surf_norm - vGrad );\n\t}\n#endif",clipping_planes_fragment:"#if NUM_CLIPPING_PLANES > 0\n\tvec4 plane;\n\t#ifdef ALPHA_TO_COVERAGE\n\t\tfloat distanceToPlane, distanceGradient;\n\t\tfloat clipOpacity = 1.0;\n\t\t#pragma unroll_loop_start\n\t\tfor ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {\n\t\t\tplane = clippingPlanes[ i ];\n\t\t\tdistanceToPlane = - dot( vClipPosition, plane.xyz ) + plane.w;\n\t\t\tdistanceGradient = fwidth( distanceToPlane ) / 2.0;\n\t\t\tclipOpacity *= smoothstep( - distanceGradient, distanceGradient, distanceToPlane );\n\t\t\tif ( clipOpacity == 0.0 ) discard;\n\t\t}\n\t\t#pragma unroll_loop_end\n\t\t#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES\n\t\t\tfloat unionClipOpacity = 1.0;\n\t\t\t#pragma unroll_loop_start\n\t\t\tfor ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {\n\t\t\t\tplane = clippingPlanes[ i ];\n\t\t\t\tdistanceToPlane = - dot( vClipPosition, plane.xyz ) + plane.w;\n\t\t\t\tdistanceGradient = fwidth( distanceToPlane ) / 2.0;\n\t\t\t\tunionClipOpacity *= 1.0 - smoothstep( - distanceGradient, distanceGradient, distanceToPlane );\n\t\t\t}\n\t\t\t#pragma unroll_loop_end\n\t\t\tclipOpacity *= 1.0 - unionClipOpacity;\n\t\t#endif\n\t\tdiffuseColor.a *= clipOpacity;\n\t\tif ( diffuseColor.a == 0.0 ) discard;\n\t#else\n\t\t#pragma unroll_loop_start\n\t\tfor ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {\n\t\t\tplane = clippingPlanes[ i ];\n\t\t\tif ( dot( vClipPosition, plane.xyz ) > plane.w ) discard;\n\t\t}\n\t\t#pragma unroll_loop_end\n\t\t#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES\n\t\t\tbool clipped = true;\n\t\t\t#pragma unroll_loop_start\n\t\t\tfor ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {\n\t\t\t\tplane = clippingPlanes[ i ];\n\t\t\t\tclipped = ( dot( vClipPosition, plane.xyz ) > plane.w ) && clipped;\n\t\t\t}\n\t\t\t#pragma unroll_loop_end\n\t\t\tif ( clipped ) discard;\n\t\t#endif\n\t#endif\n#endif",clipping_planes_pars_fragment:"#if NUM_CLIPPING_PLANES > 0\n\tvarying vec3 vClipPosition;\n\tuniform vec4 clippingPlanes[ NUM_CLIPPING_PLANES ];\n#endif",clipping_planes_pars_vertex:"#if NUM_CLIPPING_PLANES > 0\n\tvarying vec3 vClipPosition;\n#endif",clipping_planes_vertex:"#if NUM_CLIPPING_PLANES > 0\n\tvClipPosition = - mvPosition.xyz;\n#endif",color_fragment:"#if defined( USE_COLOR_ALPHA )\n\tdiffuseColor *= vColor;\n#elif defined( USE_COLOR )\n\tdiffuseColor.rgb *= vColor;\n#endif",color_pars_fragment:"#if defined( USE_COLOR_ALPHA )\n\tvarying vec4 vColor;\n#elif defined( USE_COLOR )\n\tvarying vec3 vColor;\n#endif",color_pars_vertex:"#if defined( USE_COLOR_ALPHA )\n\tvarying vec4 vColor;\n#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR ) || defined( USE_BATCHING_COLOR )\n\tvarying vec3 vColor;\n#endif",color_vertex:"#if defined( USE_COLOR_ALPHA )\n\tvColor = vec4( 1.0 );\n#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR ) || defined( USE_BATCHING_COLOR )\n\tvColor = vec3( 1.0 );\n#endif\n#ifdef USE_COLOR\n\tvColor *= color;\n#endif\n#ifdef USE_INSTANCING_COLOR\n\tvColor.xyz *= instanceColor.xyz;\n#endif\n#ifdef USE_BATCHING_COLOR\n\tvec3 batchingColor = getBatchingColor( getIndirectIndex( gl_DrawID ) );\n\tvColor.xyz *= batchingColor.xyz;\n#endif",common:"#define PI 3.141592653589793\n#define PI2 6.283185307179586\n#define PI_HALF 1.5707963267948966\n#define RECIPROCAL_PI 0.3183098861837907\n#define RECIPROCAL_PI2 0.15915494309189535\n#define EPSILON 1e-6\n#ifndef saturate\n#define saturate( a ) clamp( a, 0.0, 1.0 )\n#endif\n#define whiteComplement( a ) ( 1.0 - saturate( a ) )\nfloat pow2( const in float x ) { return x*x; }\nvec3 pow2( const in vec3 x ) { return x*x; }\nfloat pow3( const in float x ) { return x*x*x; }\nfloat pow4( const in float x ) { float x2 = x*x; return x2*x2; }\nfloat max3( const in vec3 v ) { return max( max( v.x, v.y ), v.z ); }\nfloat average( const in vec3 v ) { return dot( v, vec3( 0.3333333 ) ); }\nhighp float rand( const in vec2 uv ) {\n\tconst highp float a = 12.9898, b = 78.233, c = 43758.5453;\n\thighp float dt = dot( uv.xy, vec2( a,b ) ), sn = mod( dt, PI );\n\treturn fract( sin( sn ) * c );\n}\n#ifdef HIGH_PRECISION\n\tfloat precisionSafeLength( vec3 v ) { return length( v ); }\n#else\n\tfloat precisionSafeLength( vec3 v ) {\n\t\tfloat maxComponent = max3( abs( v ) );\n\t\treturn length( v / maxComponent ) * maxComponent;\n\t}\n#endif\nstruct IncidentLight {\n\tvec3 color;\n\tvec3 direction;\n\tbool visible;\n};\nstruct ReflectedLight {\n\tvec3 directDiffuse;\n\tvec3 directSpecular;\n\tvec3 indirectDiffuse;\n\tvec3 indirectSpecular;\n};\n#ifdef USE_ALPHAHASH\n\tvarying vec3 vPosition;\n#endif\nvec3 transformDirection( in vec3 dir, in mat4 matrix ) {\n\treturn normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );\n}\nvec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {\n\treturn normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );\n}\nmat3 transposeMat3( const in mat3 m ) {\n\tmat3 tmp;\n\ttmp[ 0 ] = vec3( m[ 0 ].x, m[ 1 ].x, m[ 2 ].x );\n\ttmp[ 1 ] = vec3( m[ 0 ].y, m[ 1 ].y, m[ 2 ].y );\n\ttmp[ 2 ] = vec3( m[ 0 ].z, m[ 1 ].z, m[ 2 ].z );\n\treturn tmp;\n}\nbool isPerspectiveMatrix( mat4 m ) {\n\treturn m[ 2 ][ 3 ] == - 1.0;\n}\nvec2 equirectUv( in vec3 dir ) {\n\tfloat u = atan( dir.z, dir.x ) * RECIPROCAL_PI2 + 0.5;\n\tfloat v = asin( clamp( dir.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;\n\treturn vec2( u, v );\n}\nvec3 BRDF_Lambert( const in vec3 diffuseColor ) {\n\treturn RECIPROCAL_PI * diffuseColor;\n}\nvec3 F_Schlick( const in vec3 f0, const in float f90, const in float dotVH ) {\n\tfloat fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );\n\treturn f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );\n}\nfloat F_Schlick( const in float f0, const in float f90, const in float dotVH ) {\n\tfloat fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );\n\treturn f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );\n} // validated",cube_uv_reflection_fragment:"#ifdef ENVMAP_TYPE_CUBE_UV\n\t#define cubeUV_minMipLevel 4.0\n\t#define cubeUV_minTileSize 16.0\n\tfloat getFace( vec3 direction ) {\n\t\tvec3 absDirection = abs( direction );\n\t\tfloat face = - 1.0;\n\t\tif ( absDirection.x > absDirection.z ) {\n\t\t\tif ( absDirection.x > absDirection.y )\n\t\t\t\tface = direction.x > 0.0 ? 0.0 : 3.0;\n\t\t\telse\n\t\t\t\tface = direction.y > 0.0 ? 1.0 : 4.0;\n\t\t} else {\n\t\t\tif ( absDirection.z > absDirection.y )\n\t\t\t\tface = direction.z > 0.0 ? 2.0 : 5.0;\n\t\t\telse\n\t\t\t\tface = direction.y > 0.0 ? 1.0 : 4.0;\n\t\t}\n\t\treturn face;\n\t}\n\tvec2 getUV( vec3 direction, float face ) {\n\t\tvec2 uv;\n\t\tif ( face == 0.0 ) {\n\t\t\tuv = vec2( direction.z, direction.y ) / abs( direction.x );\n\t\t} else if ( face == 1.0 ) {\n\t\t\tuv = vec2( - direction.x, - direction.z ) / abs( direction.y );\n\t\t} else if ( face == 2.0 ) {\n\t\t\tuv = vec2( - direction.x, direction.y ) / abs( direction.z );\n\t\t} else if ( face == 3.0 ) {\n\t\t\tuv = vec2( - direction.z, direction.y ) / abs( direction.x );\n\t\t} else if ( face == 4.0 ) {\n\t\t\tuv = vec2( - direction.x, direction.z ) / abs( direction.y );\n\t\t} else {\n\t\t\tuv = vec2( direction.x, direction.y ) / abs( direction.z );\n\t\t}\n\t\treturn 0.5 * ( uv + 1.0 );\n\t}\n\tvec3 bilinearCubeUV( sampler2D envMap, vec3 direction, float mipInt ) {\n\t\tfloat face = getFace( direction );\n\t\tfloat filterInt = max( cubeUV_minMipLevel - mipInt, 0.0 );\n\t\tmipInt = max( mipInt, cubeUV_minMipLevel );\n\t\tfloat faceSize = exp2( mipInt );\n\t\thighp vec2 uv = getUV( direction, face ) * ( faceSize - 2.0 ) + 1.0;\n\t\tif ( face > 2.0 ) {\n\t\t\tuv.y += faceSize;\n\t\t\tface -= 3.0;\n\t\t}\n\t\tuv.x += face * faceSize;\n\t\tuv.x += filterInt * 3.0 * cubeUV_minTileSize;\n\t\tuv.y += 4.0 * ( exp2( CUBEUV_MAX_MIP ) - faceSize );\n\t\tuv.x *= CUBEUV_TEXEL_WIDTH;\n\t\tuv.y *= CUBEUV_TEXEL_HEIGHT;\n\t\t#ifdef texture2DGradEXT\n\t\t\treturn texture2DGradEXT( envMap, uv, vec2( 0.0 ), vec2( 0.0 ) ).rgb;\n\t\t#else\n\t\t\treturn texture2D( envMap, uv ).rgb;\n\t\t#endif\n\t}\n\t#define cubeUV_r0 1.0\n\t#define cubeUV_m0 - 2.0\n\t#define cubeUV_r1 0.8\n\t#define cubeUV_m1 - 1.0\n\t#define cubeUV_r4 0.4\n\t#define cubeUV_m4 2.0\n\t#define cubeUV_r5 0.305\n\t#define cubeUV_m5 3.0\n\t#define cubeUV_r6 0.21\n\t#define cubeUV_m6 4.0\n\tfloat roughnessToMip( float roughness ) {\n\t\tfloat mip = 0.0;\n\t\tif ( roughness >= cubeUV_r1 ) {\n\t\t\tmip = ( cubeUV_r0 - roughness ) * ( cubeUV_m1 - cubeUV_m0 ) / ( cubeUV_r0 - cubeUV_r1 ) + cubeUV_m0;\n\t\t} else if ( roughness >= cubeUV_r4 ) {\n\t\t\tmip = ( cubeUV_r1 - roughness ) * ( cubeUV_m4 - cubeUV_m1 ) / ( cubeUV_r1 - cubeUV_r4 ) + cubeUV_m1;\n\t\t} else if ( roughness >= cubeUV_r5 ) {\n\t\t\tmip = ( cubeUV_r4 - roughness ) * ( cubeUV_m5 - cubeUV_m4 ) / ( cubeUV_r4 - cubeUV_r5 ) + cubeUV_m4;\n\t\t} else if ( roughness >= cubeUV_r6 ) {\n\t\t\tmip = ( cubeUV_r5 - roughness ) * ( cubeUV_m6 - cubeUV_m5 ) / ( cubeUV_r5 - cubeUV_r6 ) + cubeUV_m5;\n\t\t} else {\n\t\t\tmip = - 2.0 * log2( 1.16 * roughness );\t\t}\n\t\treturn mip;\n\t}\n\tvec4 textureCubeUV( sampler2D envMap, vec3 sampleDir, float roughness ) {\n\t\tfloat mip = clamp( roughnessToMip( roughness ), cubeUV_m0, CUBEUV_MAX_MIP );\n\t\tfloat mipF = fract( mip );\n\t\tfloat mipInt = floor( mip );\n\t\tvec3 color0 = bilinearCubeUV( envMap, sampleDir, mipInt );\n\t\tif ( mipF == 0.0 ) {\n\t\t\treturn vec4( color0, 1.0 );\n\t\t} else {\n\t\t\tvec3 color1 = bilinearCubeUV( envMap, sampleDir, mipInt + 1.0 );\n\t\t\treturn vec4( mix( color0, color1, mipF ), 1.0 );\n\t\t}\n\t}\n#endif",defaultnormal_vertex:"vec3 transformedNormal = objectNormal;\n#ifdef USE_TANGENT\n\tvec3 transformedTangent = objectTangent;\n#endif\n#ifdef USE_BATCHING\n\tmat3 bm = mat3( batchingMatrix );\n\ttransformedNormal /= vec3( dot( bm[ 0 ], bm[ 0 ] ), dot( bm[ 1 ], bm[ 1 ] ), dot( bm[ 2 ], bm[ 2 ] ) );\n\ttransformedNormal = bm * transformedNormal;\n\t#ifdef USE_TANGENT\n\t\ttransformedTangent = bm * transformedTangent;\n\t#endif\n#endif\n#ifdef USE_INSTANCING\n\tmat3 im = mat3( instanceMatrix );\n\ttransformedNormal /= vec3( dot( im[ 0 ], im[ 0 ] ), dot( im[ 1 ], im[ 1 ] ), dot( im[ 2 ], im[ 2 ] ) );\n\ttransformedNormal = im * transformedNormal;\n\t#ifdef USE_TANGENT\n\t\ttransformedTangent = im * transformedTangent;\n\t#endif\n#endif\ntransformedNormal = normalMatrix * transformedNormal;\n#ifdef FLIP_SIDED\n\ttransformedNormal = - transformedNormal;\n#endif\n#ifdef USE_TANGENT\n\ttransformedTangent = ( modelViewMatrix * vec4( transformedTangent, 0.0 ) ).xyz;\n\t#ifdef FLIP_SIDED\n\t\ttransformedTangent = - transformedTangent;\n\t#endif\n#endif",displacementmap_pars_vertex:"#ifdef USE_DISPLACEMENTMAP\n\tuniform sampler2D displacementMap;\n\tuniform float displacementScale;\n\tuniform float displacementBias;\n#endif",displacementmap_vertex:"#ifdef USE_DISPLACEMENTMAP\n\ttransformed += normalize( objectNormal ) * ( texture2D( displacementMap, vDisplacementMapUv ).x * displacementScale + displacementBias );\n#endif",emissivemap_fragment:"#ifdef USE_EMISSIVEMAP\n\tvec4 emissiveColor = texture2D( emissiveMap, vEmissiveMapUv );\n\t#ifdef DECODE_VIDEO_TEXTURE_EMISSIVE\n\t\temissiveColor = sRGBTransferEOTF( emissiveColor );\n\t#endif\n\ttotalEmissiveRadiance *= emissiveColor.rgb;\n#endif",emissivemap_pars_fragment:"#ifdef USE_EMISSIVEMAP\n\tuniform sampler2D emissiveMap;\n#endif",colorspace_fragment:"gl_FragColor = linearToOutputTexel( gl_FragColor );",colorspace_pars_fragment:"vec4 LinearTransferOETF( in vec4 value ) {\n\treturn value;\n}\nvec4 sRGBTransferEOTF( in vec4 value ) {\n\treturn vec4( mix( pow( value.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), value.rgb * 0.0773993808, vec3( lessThanEqual( value.rgb, vec3( 0.04045 ) ) ) ), value.a );\n}\nvec4 sRGBTransferOETF( in vec4 value ) {\n\treturn vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.a );\n}",envmap_fragment:"#ifdef USE_ENVMAP\n\t#ifdef ENV_WORLDPOS\n\t\tvec3 cameraToFrag;\n\t\tif ( isOrthographic ) {\n\t\t\tcameraToFrag = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );\n\t\t} else {\n\t\t\tcameraToFrag = normalize( vWorldPosition - cameraPosition );\n\t\t}\n\t\tvec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\tvec3 reflectVec = reflect( cameraToFrag, worldNormal );\n\t\t#else\n\t\t\tvec3 reflectVec = refract( cameraToFrag, worldNormal, refractionRatio );\n\t\t#endif\n\t#else\n\t\tvec3 reflectVec = vReflect;\n\t#endif\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tvec4 envColor = textureCube( envMap, envMapRotation * vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );\n\t#else\n\t\tvec4 envColor = vec4( 0.0 );\n\t#endif\n\t#ifdef ENVMAP_BLENDING_MULTIPLY\n\t\toutgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );\n\t#elif defined( ENVMAP_BLENDING_MIX )\n\t\toutgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );\n\t#elif defined( ENVMAP_BLENDING_ADD )\n\t\toutgoingLight += envColor.xyz * specularStrength * reflectivity;\n\t#endif\n#endif",envmap_common_pars_fragment:"#ifdef USE_ENVMAP\n\tuniform float envMapIntensity;\n\tuniform float flipEnvMap;\n\tuniform mat3 envMapRotation;\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tuniform samplerCube envMap;\n\t#else\n\t\tuniform sampler2D envMap;\n\t#endif\n\t\n#endif",envmap_pars_fragment:"#ifdef USE_ENVMAP\n\tuniform float reflectivity;\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )\n\t\t#define ENV_WORLDPOS\n\t#endif\n\t#ifdef ENV_WORLDPOS\n\t\tvarying vec3 vWorldPosition;\n\t\tuniform float refractionRatio;\n\t#else\n\t\tvarying vec3 vReflect;\n\t#endif\n#endif",envmap_pars_vertex:"#ifdef USE_ENVMAP\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )\n\t\t#define ENV_WORLDPOS\n\t#endif\n\t#ifdef ENV_WORLDPOS\n\t\t\n\t\tvarying vec3 vWorldPosition;\n\t#else\n\t\tvarying vec3 vReflect;\n\t\tuniform float refractionRatio;\n\t#endif\n#endif",envmap_physical_pars_fragment:"#ifdef USE_ENVMAP\n\tvec3 getIBLIrradiance( const in vec3 normal ) {\n\t\t#ifdef ENVMAP_TYPE_CUBE_UV\n\t\t\tvec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\n\t\t\tvec4 envMapColor = textureCubeUV( envMap, envMapRotation * worldNormal, 1.0 );\n\t\t\treturn PI * envMapColor.rgb * envMapIntensity;\n\t\t#else\n\t\t\treturn vec3( 0.0 );\n\t\t#endif\n\t}\n\tvec3 getIBLRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness ) {\n\t\t#ifdef ENVMAP_TYPE_CUBE_UV\n\t\t\tvec3 reflectVec = reflect( - viewDir, normal );\n\t\t\treflectVec = normalize( mix( reflectVec, normal, roughness * roughness) );\n\t\t\treflectVec = inverseTransformDirection( reflectVec, viewMatrix );\n\t\t\tvec4 envMapColor = textureCubeUV( envMap, envMapRotation * reflectVec, roughness );\n\t\t\treturn envMapColor.rgb * envMapIntensity;\n\t\t#else\n\t\t\treturn vec3( 0.0 );\n\t\t#endif\n\t}\n\t#ifdef USE_ANISOTROPY\n\t\tvec3 getIBLAnisotropyRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness, const in vec3 bitangent, const in float anisotropy ) {\n\t\t\t#ifdef ENVMAP_TYPE_CUBE_UV\n\t\t\t\tvec3 bentNormal = cross( bitangent, viewDir );\n\t\t\t\tbentNormal = normalize( cross( bentNormal, bitangent ) );\n\t\t\t\tbentNormal = normalize( mix( bentNormal, normal, pow2( pow2( 1.0 - anisotropy * ( 1.0 - roughness ) ) ) ) );\n\t\t\t\treturn getIBLRadiance( viewDir, bentNormal, roughness );\n\t\t\t#else\n\t\t\t\treturn vec3( 0.0 );\n\t\t\t#endif\n\t\t}\n\t#endif\n#endif",envmap_vertex:"#ifdef USE_ENVMAP\n\t#ifdef ENV_WORLDPOS\n\t\tvWorldPosition = worldPosition.xyz;\n\t#else\n\t\tvec3 cameraToVertex;\n\t\tif ( isOrthographic ) {\n\t\t\tcameraToVertex = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );\n\t\t} else {\n\t\t\tcameraToVertex = normalize( worldPosition.xyz - cameraPosition );\n\t\t}\n\t\tvec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\tvReflect = reflect( cameraToVertex, worldNormal );\n\t\t#else\n\t\t\tvReflect = refract( cameraToVertex, worldNormal, refractionRatio );\n\t\t#endif\n\t#endif\n#endif",fog_vertex:"#ifdef USE_FOG\n\tvFogDepth = - mvPosition.z;\n#endif",fog_pars_vertex:"#ifdef USE_FOG\n\tvarying float vFogDepth;\n#endif",fog_fragment:"#ifdef USE_FOG\n\t#ifdef FOG_EXP2\n\t\tfloat fogFactor = 1.0 - exp( - fogDensity * fogDensity * vFogDepth * vFogDepth );\n\t#else\n\t\tfloat fogFactor = smoothstep( fogNear, fogFar, vFogDepth );\n\t#endif\n\tgl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );\n#endif",fog_pars_fragment:"#ifdef USE_FOG\n\tuniform vec3 fogColor;\n\tvarying float vFogDepth;\n\t#ifdef FOG_EXP2\n\t\tuniform float fogDensity;\n\t#else\n\t\tuniform float fogNear;\n\t\tuniform float fogFar;\n\t#endif\n#endif",gradientmap_pars_fragment:"#ifdef USE_GRADIENTMAP\n\tuniform sampler2D gradientMap;\n#endif\nvec3 getGradientIrradiance( vec3 normal, vec3 lightDirection ) {\n\tfloat dotNL = dot( normal, lightDirection );\n\tvec2 coord = vec2( dotNL * 0.5 + 0.5, 0.0 );\n\t#ifdef USE_GRADIENTMAP\n\t\treturn vec3( texture2D( gradientMap, coord ).r );\n\t#else\n\t\tvec2 fw = fwidth( coord ) * 0.5;\n\t\treturn mix( vec3( 0.7 ), vec3( 1.0 ), smoothstep( 0.7 - fw.x, 0.7 + fw.x, coord.x ) );\n\t#endif\n}",lightmap_pars_fragment:"#ifdef USE_LIGHTMAP\n\tuniform sampler2D lightMap;\n\tuniform float lightMapIntensity;\n#endif",lights_lambert_fragment:"LambertMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb;\nmaterial.specularStrength = specularStrength;",lights_lambert_pars_fragment:"varying vec3 vViewPosition;\nstruct LambertMaterial {\n\tvec3 diffuseColor;\n\tfloat specularStrength;\n};\nvoid RE_Direct_Lambert( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {\n\tfloat dotNL = saturate( dot( geometryNormal, directLight.direction ) );\n\tvec3 irradiance = dotNL * directLight.color;\n\treflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectDiffuse_Lambert( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\n#define RE_Direct\t\t\t\tRE_Direct_Lambert\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_Lambert",lights_pars_begin:"uniform bool receiveShadow;\nuniform vec3 ambientLightColor;\n#if defined( USE_LIGHT_PROBES )\n\tuniform vec3 lightProbe[ 9 ];\n#endif\nvec3 shGetIrradianceAt( in vec3 normal, in vec3 shCoefficients[ 9 ] ) {\n\tfloat x = normal.x, y = normal.y, z = normal.z;\n\tvec3 result = shCoefficients[ 0 ] * 0.886227;\n\tresult += shCoefficients[ 1 ] * 2.0 * 0.511664 * y;\n\tresult += shCoefficients[ 2 ] * 2.0 * 0.511664 * z;\n\tresult += shCoefficients[ 3 ] * 2.0 * 0.511664 * x;\n\tresult += shCoefficients[ 4 ] * 2.0 * 0.429043 * x * y;\n\tresult += shCoefficients[ 5 ] * 2.0 * 0.429043 * y * z;\n\tresult += shCoefficients[ 6 ] * ( 0.743125 * z * z - 0.247708 );\n\tresult += shCoefficients[ 7 ] * 2.0 * 0.429043 * x * z;\n\tresult += shCoefficients[ 8 ] * 0.429043 * ( x * x - y * y );\n\treturn result;\n}\nvec3 getLightProbeIrradiance( const in vec3 lightProbe[ 9 ], const in vec3 normal ) {\n\tvec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\n\tvec3 irradiance = shGetIrradianceAt( worldNormal, lightProbe );\n\treturn irradiance;\n}\nvec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {\n\tvec3 irradiance = ambientLightColor;\n\treturn irradiance;\n}\nfloat getDistanceAttenuation( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {\n\tfloat distanceFalloff = 1.0 / max( pow( lightDistance, decayExponent ), 0.01 );\n\tif ( cutoffDistance > 0.0 ) {\n\t\tdistanceFalloff *= pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );\n\t}\n\treturn distanceFalloff;\n}\nfloat getSpotAttenuation( const in float coneCosine, const in float penumbraCosine, const in float angleCosine ) {\n\treturn smoothstep( coneCosine, penumbraCosine, angleCosine );\n}\n#if NUM_DIR_LIGHTS > 0\n\tstruct DirectionalLight {\n\t\tvec3 direction;\n\t\tvec3 color;\n\t};\n\tuniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];\n\tvoid getDirectionalLightInfo( const in DirectionalLight directionalLight, out IncidentLight light ) {\n\t\tlight.color = directionalLight.color;\n\t\tlight.direction = directionalLight.direction;\n\t\tlight.visible = true;\n\t}\n#endif\n#if NUM_POINT_LIGHTS > 0\n\tstruct PointLight {\n\t\tvec3 position;\n\t\tvec3 color;\n\t\tfloat distance;\n\t\tfloat decay;\n\t};\n\tuniform PointLight pointLights[ NUM_POINT_LIGHTS ];\n\tvoid getPointLightInfo( const in PointLight pointLight, const in vec3 geometryPosition, out IncidentLight light ) {\n\t\tvec3 lVector = pointLight.position - geometryPosition;\n\t\tlight.direction = normalize( lVector );\n\t\tfloat lightDistance = length( lVector );\n\t\tlight.color = pointLight.color;\n\t\tlight.color *= getDistanceAttenuation( lightDistance, pointLight.distance, pointLight.decay );\n\t\tlight.visible = ( light.color != vec3( 0.0 ) );\n\t}\n#endif\n#if NUM_SPOT_LIGHTS > 0\n\tstruct SpotLight {\n\t\tvec3 position;\n\t\tvec3 direction;\n\t\tvec3 color;\n\t\tfloat distance;\n\t\tfloat decay;\n\t\tfloat coneCos;\n\t\tfloat penumbraCos;\n\t};\n\tuniform SpotLight spotLights[ NUM_SPOT_LIGHTS ];\n\tvoid getSpotLightInfo( const in SpotLight spotLight, const in vec3 geometryPosition, out IncidentLight light ) {\n\t\tvec3 lVector = spotLight.position - geometryPosition;\n\t\tlight.direction = normalize( lVector );\n\t\tfloat angleCos = dot( light.direction, spotLight.direction );\n\t\tfloat spotAttenuation = getSpotAttenuation( spotLight.coneCos, spotLight.penumbraCos, angleCos );\n\t\tif ( spotAttenuation > 0.0 ) {\n\t\t\tfloat lightDistance = length( lVector );\n\t\t\tlight.color = spotLight.color * spotAttenuation;\n\t\t\tlight.color *= getDistanceAttenuation( lightDistance, spotLight.distance, spotLight.decay );\n\t\t\tlight.visible = ( light.color != vec3( 0.0 ) );\n\t\t} else {\n\t\t\tlight.color = vec3( 0.0 );\n\t\t\tlight.visible = false;\n\t\t}\n\t}\n#endif\n#if NUM_RECT_AREA_LIGHTS > 0\n\tstruct RectAreaLight {\n\t\tvec3 color;\n\t\tvec3 position;\n\t\tvec3 halfWidth;\n\t\tvec3 halfHeight;\n\t};\n\tuniform sampler2D ltc_1;\tuniform sampler2D ltc_2;\n\tuniform RectAreaLight rectAreaLights[ NUM_RECT_AREA_LIGHTS ];\n#endif\n#if NUM_HEMI_LIGHTS > 0\n\tstruct HemisphereLight {\n\t\tvec3 direction;\n\t\tvec3 skyColor;\n\t\tvec3 groundColor;\n\t};\n\tuniform HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];\n\tvec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in vec3 normal ) {\n\t\tfloat dotNL = dot( normal, hemiLight.direction );\n\t\tfloat hemiDiffuseWeight = 0.5 * dotNL + 0.5;\n\t\tvec3 irradiance = mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );\n\t\treturn irradiance;\n\t}\n#endif",lights_toon_fragment:"ToonMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb;",lights_toon_pars_fragment:"varying vec3 vViewPosition;\nstruct ToonMaterial {\n\tvec3 diffuseColor;\n};\nvoid RE_Direct_Toon( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {\n\tvec3 irradiance = getGradientIrradiance( geometryNormal, directLight.direction ) * directLight.color;\n\treflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectDiffuse_Toon( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\n#define RE_Direct\t\t\t\tRE_Direct_Toon\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_Toon",lights_phong_fragment:"BlinnPhongMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb;\nmaterial.specularColor = specular;\nmaterial.specularShininess = shininess;\nmaterial.specularStrength = specularStrength;",lights_phong_pars_fragment:"varying vec3 vViewPosition;\nstruct BlinnPhongMaterial {\n\tvec3 diffuseColor;\n\tvec3 specularColor;\n\tfloat specularShininess;\n\tfloat specularStrength;\n};\nvoid RE_Direct_BlinnPhong( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\n\tfloat dotNL = saturate( dot( geometryNormal, directLight.direction ) );\n\tvec3 irradiance = dotNL * directLight.color;\n\treflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n\treflectedLight.directSpecular += irradiance * BRDF_BlinnPhong( directLight.direction, geometryViewDir, geometryNormal, material.specularColor, material.specularShininess ) * material.specularStrength;\n}\nvoid RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\n#define RE_Direct\t\t\t\tRE_Direct_BlinnPhong\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_BlinnPhong",lights_physical_fragment:"PhysicalMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb * ( 1.0 - metalnessFactor );\nvec3 dxy = max( abs( dFdx( nonPerturbedNormal ) ), abs( dFdy( nonPerturbedNormal ) ) );\nfloat geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );\nmaterial.roughness = max( roughnessFactor, 0.0525 );material.roughness += geometryRoughness;\nmaterial.roughness = min( material.roughness, 1.0 );\n#ifdef IOR\n\tmaterial.ior = ior;\n\t#ifdef USE_SPECULAR\n\t\tfloat specularIntensityFactor = specularIntensity;\n\t\tvec3 specularColorFactor = specularColor;\n\t\t#ifdef USE_SPECULAR_COLORMAP\n\t\t\tspecularColorFactor *= texture2D( specularColorMap, vSpecularColorMapUv ).rgb;\n\t\t#endif\n\t\t#ifdef USE_SPECULAR_INTENSITYMAP\n\t\t\tspecularIntensityFactor *= texture2D( specularIntensityMap, vSpecularIntensityMapUv ).a;\n\t\t#endif\n\t\tmaterial.specularF90 = mix( specularIntensityFactor, 1.0, metalnessFactor );\n\t#else\n\t\tfloat specularIntensityFactor = 1.0;\n\t\tvec3 specularColorFactor = vec3( 1.0 );\n\t\tmaterial.specularF90 = 1.0;\n\t#endif\n\tmaterial.specularColor = mix( min( pow2( ( material.ior - 1.0 ) / ( material.ior + 1.0 ) ) * specularColorFactor, vec3( 1.0 ) ) * specularIntensityFactor, diffuseColor.rgb, metalnessFactor );\n#else\n\tmaterial.specularColor = mix( vec3( 0.04 ), diffuseColor.rgb, metalnessFactor );\n\tmaterial.specularF90 = 1.0;\n#endif\n#ifdef USE_CLEARCOAT\n\tmaterial.clearcoat = clearcoat;\n\tmaterial.clearcoatRoughness = clearcoatRoughness;\n\tmaterial.clearcoatF0 = vec3( 0.04 );\n\tmaterial.clearcoatF90 = 1.0;\n\t#ifdef USE_CLEARCOATMAP\n\t\tmaterial.clearcoat *= texture2D( clearcoatMap, vClearcoatMapUv ).x;\n\t#endif\n\t#ifdef USE_CLEARCOAT_ROUGHNESSMAP\n\t\tmaterial.clearcoatRoughness *= texture2D( clearcoatRoughnessMap, vClearcoatRoughnessMapUv ).y;\n\t#endif\n\tmaterial.clearcoat = saturate( material.clearcoat );\tmaterial.clearcoatRoughness = max( material.clearcoatRoughness, 0.0525 );\n\tmaterial.clearcoatRoughness += geometryRoughness;\n\tmaterial.clearcoatRoughness = min( material.clearcoatRoughness, 1.0 );\n#endif\n#ifdef USE_DISPERSION\n\tmaterial.dispersion = dispersion;\n#endif\n#ifdef USE_IRIDESCENCE\n\tmaterial.iridescence = iridescence;\n\tmaterial.iridescenceIOR = iridescenceIOR;\n\t#ifdef USE_IRIDESCENCEMAP\n\t\tmaterial.iridescence *= texture2D( iridescenceMap, vIridescenceMapUv ).r;\n\t#endif\n\t#ifdef USE_IRIDESCENCE_THICKNESSMAP\n\t\tmaterial.iridescenceThickness = (iridescenceThicknessMaximum - iridescenceThicknessMinimum) * texture2D( iridescenceThicknessMap, vIridescenceThicknessMapUv ).g + iridescenceThicknessMinimum;\n\t#else\n\t\tmaterial.iridescenceThickness = iridescenceThicknessMaximum;\n\t#endif\n#endif\n#ifdef USE_SHEEN\n\tmaterial.sheenColor = sheenColor;\n\t#ifdef USE_SHEEN_COLORMAP\n\t\tmaterial.sheenColor *= texture2D( sheenColorMap, vSheenColorMapUv ).rgb;\n\t#endif\n\tmaterial.sheenRoughness = clamp( sheenRoughness, 0.07, 1.0 );\n\t#ifdef USE_SHEEN_ROUGHNESSMAP\n\t\tmaterial.sheenRoughness *= texture2D( sheenRoughnessMap, vSheenRoughnessMapUv ).a;\n\t#endif\n#endif\n#ifdef USE_ANISOTROPY\n\t#ifdef USE_ANISOTROPYMAP\n\t\tmat2 anisotropyMat = mat2( anisotropyVector.x, anisotropyVector.y, - anisotropyVector.y, anisotropyVector.x );\n\t\tvec3 anisotropyPolar = texture2D( anisotropyMap, vAnisotropyMapUv ).rgb;\n\t\tvec2 anisotropyV = anisotropyMat * normalize( 2.0 * anisotropyPolar.rg - vec2( 1.0 ) ) * anisotropyPolar.b;\n\t#else\n\t\tvec2 anisotropyV = anisotropyVector;\n\t#endif\n\tmaterial.anisotropy = length( anisotropyV );\n\tif( material.anisotropy == 0.0 ) {\n\t\tanisotropyV = vec2( 1.0, 0.0 );\n\t} else {\n\t\tanisotropyV /= material.anisotropy;\n\t\tmaterial.anisotropy = saturate( material.anisotropy );\n\t}\n\tmaterial.alphaT = mix( pow2( material.roughness ), 1.0, pow2( material.anisotropy ) );\n\tmaterial.anisotropyT = tbn[ 0 ] * anisotropyV.x + tbn[ 1 ] * anisotropyV.y;\n\tmaterial.anisotropyB = tbn[ 1 ] * anisotropyV.x - tbn[ 0 ] * anisotropyV.y;\n#endif",lights_physical_pars_fragment:"struct PhysicalMaterial {\n\tvec3 diffuseColor;\n\tfloat roughness;\n\tvec3 specularColor;\n\tfloat specularF90;\n\tfloat dispersion;\n\t#ifdef USE_CLEARCOAT\n\t\tfloat clearcoat;\n\t\tfloat clearcoatRoughness;\n\t\tvec3 clearcoatF0;\n\t\tfloat clearcoatF90;\n\t#endif\n\t#ifdef USE_IRIDESCENCE\n\t\tfloat iridescence;\n\t\tfloat iridescenceIOR;\n\t\tfloat iridescenceThickness;\n\t\tvec3 iridescenceFresnel;\n\t\tvec3 iridescenceF0;\n\t#endif\n\t#ifdef USE_SHEEN\n\t\tvec3 sheenColor;\n\t\tfloat sheenRoughness;\n\t#endif\n\t#ifdef IOR\n\t\tfloat ior;\n\t#endif\n\t#ifdef USE_TRANSMISSION\n\t\tfloat transmission;\n\t\tfloat transmissionAlpha;\n\t\tfloat thickness;\n\t\tfloat attenuationDistance;\n\t\tvec3 attenuationColor;\n\t#endif\n\t#ifdef USE_ANISOTROPY\n\t\tfloat anisotropy;\n\t\tfloat alphaT;\n\t\tvec3 anisotropyT;\n\t\tvec3 anisotropyB;\n\t#endif\n};\nvec3 clearcoatSpecularDirect = vec3( 0.0 );\nvec3 clearcoatSpecularIndirect = vec3( 0.0 );\nvec3 sheenSpecularDirect = vec3( 0.0 );\nvec3 sheenSpecularIndirect = vec3(0.0 );\nvec3 Schlick_to_F0( const in vec3 f, const in float f90, const in float dotVH ) {\n    float x = clamp( 1.0 - dotVH, 0.0, 1.0 );\n    float x2 = x * x;\n    float x5 = clamp( x * x2 * x2, 0.0, 0.9999 );\n    return ( f - vec3( f90 ) * x5 ) / ( 1.0 - x5 );\n}\nfloat V_GGX_SmithCorrelated( const in float alpha, const in float dotNL, const in float dotNV ) {\n\tfloat a2 = pow2( alpha );\n\tfloat gv = dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );\n\tfloat gl = dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );\n\treturn 0.5 / max( gv + gl, EPSILON );\n}\nfloat D_GGX( const in float alpha, const in float dotNH ) {\n\tfloat a2 = pow2( alpha );\n\tfloat denom = pow2( dotNH ) * ( a2 - 1.0 ) + 1.0;\n\treturn RECIPROCAL_PI * a2 / pow2( denom );\n}\n#ifdef USE_ANISOTROPY\n\tfloat V_GGX_SmithCorrelated_Anisotropic( const in float alphaT, const in float alphaB, const in float dotTV, const in float dotBV, const in float dotTL, const in float dotBL, const in float dotNV, const in float dotNL ) {\n\t\tfloat gv = dotNL * length( vec3( alphaT * dotTV, alphaB * dotBV, dotNV ) );\n\t\tfloat gl = dotNV * length( vec3( alphaT * dotTL, alphaB * dotBL, dotNL ) );\n\t\tfloat v = 0.5 / ( gv + gl );\n\t\treturn saturate(v);\n\t}\n\tfloat D_GGX_Anisotropic( const in float alphaT, const in float alphaB, const in float dotNH, const in float dotTH, const in float dotBH ) {\n\t\tfloat a2 = alphaT * alphaB;\n\t\thighp vec3 v = vec3( alphaB * dotTH, alphaT * dotBH, a2 * dotNH );\n\t\thighp float v2 = dot( v, v );\n\t\tfloat w2 = a2 / v2;\n\t\treturn RECIPROCAL_PI * a2 * pow2 ( w2 );\n\t}\n#endif\n#ifdef USE_CLEARCOAT\n\tvec3 BRDF_GGX_Clearcoat( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in PhysicalMaterial material) {\n\t\tvec3 f0 = material.clearcoatF0;\n\t\tfloat f90 = material.clearcoatF90;\n\t\tfloat roughness = material.clearcoatRoughness;\n\t\tfloat alpha = pow2( roughness );\n\t\tvec3 halfDir = normalize( lightDir + viewDir );\n\t\tfloat dotNL = saturate( dot( normal, lightDir ) );\n\t\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\t\tfloat dotNH = saturate( dot( normal, halfDir ) );\n\t\tfloat dotVH = saturate( dot( viewDir, halfDir ) );\n\t\tvec3 F = F_Schlick( f0, f90, dotVH );\n\t\tfloat V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );\n\t\tfloat D = D_GGX( alpha, dotNH );\n\t\treturn F * ( V * D );\n\t}\n#endif\nvec3 BRDF_GGX( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in PhysicalMaterial material ) {\n\tvec3 f0 = material.specularColor;\n\tfloat f90 = material.specularF90;\n\tfloat roughness = material.roughness;\n\tfloat alpha = pow2( roughness );\n\tvec3 halfDir = normalize( lightDir + viewDir );\n\tfloat dotNL = saturate( dot( normal, lightDir ) );\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tfloat dotNH = saturate( dot( normal, halfDir ) );\n\tfloat dotVH = saturate( dot( viewDir, halfDir ) );\n\tvec3 F = F_Schlick( f0, f90, dotVH );\n\t#ifdef USE_IRIDESCENCE\n\t\tF = mix( F, material.iridescenceFresnel, material.iridescence );\n\t#endif\n\t#ifdef USE_ANISOTROPY\n\t\tfloat dotTL = dot( material.anisotropyT, lightDir );\n\t\tfloat dotTV = dot( material.anisotropyT, viewDir );\n\t\tfloat dotTH = dot( material.anisotropyT, halfDir );\n\t\tfloat dotBL = dot( material.anisotropyB, lightDir );\n\t\tfloat dotBV = dot( material.anisotropyB, viewDir );\n\t\tfloat dotBH = dot( material.anisotropyB, halfDir );\n\t\tfloat V = V_GGX_SmithCorrelated_Anisotropic( material.alphaT, alpha, dotTV, dotBV, dotTL, dotBL, dotNV, dotNL );\n\t\tfloat D = D_GGX_Anisotropic( material.alphaT, alpha, dotNH, dotTH, dotBH );\n\t#else\n\t\tfloat V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );\n\t\tfloat D = D_GGX( alpha, dotNH );\n\t#endif\n\treturn F * ( V * D );\n}\nvec2 LTC_Uv( const in vec3 N, const in vec3 V, const in float roughness ) {\n\tconst float LUT_SIZE = 64.0;\n\tconst float LUT_SCALE = ( LUT_SIZE - 1.0 ) / LUT_SIZE;\n\tconst float LUT_BIAS = 0.5 / LUT_SIZE;\n\tfloat dotNV = saturate( dot( N, V ) );\n\tvec2 uv = vec2( roughness, sqrt( 1.0 - dotNV ) );\n\tuv = uv * LUT_SCALE + LUT_BIAS;\n\treturn uv;\n}\nfloat LTC_ClippedSphereFormFactor( const in vec3 f ) {\n\tfloat l = length( f );\n\treturn max( ( l * l + f.z ) / ( l + 1.0 ), 0.0 );\n}\nvec3 LTC_EdgeVectorFormFactor( const in vec3 v1, const in vec3 v2 ) {\n\tfloat x = dot( v1, v2 );\n\tfloat y = abs( x );\n\tfloat a = 0.8543985 + ( 0.4965155 + 0.0145206 * y ) * y;\n\tfloat b = 3.4175940 + ( 4.1616724 + y ) * y;\n\tfloat v = a / b;\n\tfloat theta_sintheta = ( x > 0.0 ) ? v : 0.5 * inversesqrt( max( 1.0 - x * x, 1e-7 ) ) - v;\n\treturn cross( v1, v2 ) * theta_sintheta;\n}\nvec3 LTC_Evaluate( const in vec3 N, const in vec3 V, const in vec3 P, const in mat3 mInv, const in vec3 rectCoords[ 4 ] ) {\n\tvec3 v1 = rectCoords[ 1 ] - rectCoords[ 0 ];\n\tvec3 v2 = rectCoords[ 3 ] - rectCoords[ 0 ];\n\tvec3 lightNormal = cross( v1, v2 );\n\tif( dot( lightNormal, P - rectCoords[ 0 ] ) < 0.0 ) return vec3( 0.0 );\n\tvec3 T1, T2;\n\tT1 = normalize( V - N * dot( V, N ) );\n\tT2 = - cross( N, T1 );\n\tmat3 mat = mInv * transposeMat3( mat3( T1, T2, N ) );\n\tvec3 coords[ 4 ];\n\tcoords[ 0 ] = mat * ( rectCoords[ 0 ] - P );\n\tcoords[ 1 ] = mat * ( rectCoords[ 1 ] - P );\n\tcoords[ 2 ] = mat * ( rectCoords[ 2 ] - P );\n\tcoords[ 3 ] = mat * ( rectCoords[ 3 ] - P );\n\tcoords[ 0 ] = normalize( coords[ 0 ] );\n\tcoords[ 1 ] = normalize( coords[ 1 ] );\n\tcoords[ 2 ] = normalize( coords[ 2 ] );\n\tcoords[ 3 ] = normalize( coords[ 3 ] );\n\tvec3 vectorFormFactor = vec3( 0.0 );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 0 ], coords[ 1 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 1 ], coords[ 2 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 2 ], coords[ 3 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 3 ], coords[ 0 ] );\n\tfloat result = LTC_ClippedSphereFormFactor( vectorFormFactor );\n\treturn vec3( result );\n}\n#if defined( USE_SHEEN )\nfloat D_Charlie( float roughness, float dotNH ) {\n\tfloat alpha = pow2( roughness );\n\tfloat invAlpha = 1.0 / alpha;\n\tfloat cos2h = dotNH * dotNH;\n\tfloat sin2h = max( 1.0 - cos2h, 0.0078125 );\n\treturn ( 2.0 + invAlpha ) * pow( sin2h, invAlpha * 0.5 ) / ( 2.0 * PI );\n}\nfloat V_Neubelt( float dotNV, float dotNL ) {\n\treturn saturate( 1.0 / ( 4.0 * ( dotNL + dotNV - dotNL * dotNV ) ) );\n}\nvec3 BRDF_Sheen( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, vec3 sheenColor, const in float sheenRoughness ) {\n\tvec3 halfDir = normalize( lightDir + viewDir );\n\tfloat dotNL = saturate( dot( normal, lightDir ) );\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tfloat dotNH = saturate( dot( normal, halfDir ) );\n\tfloat D = D_Charlie( sheenRoughness, dotNH );\n\tfloat V = V_Neubelt( dotNV, dotNL );\n\treturn sheenColor * ( D * V );\n}\n#endif\nfloat IBLSheenBRDF( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tfloat r2 = roughness * roughness;\n\tfloat a = roughness < 0.25 ? -339.2 * r2 + 161.4 * roughness - 25.9 : -8.48 * r2 + 14.3 * roughness - 9.95;\n\tfloat b = roughness < 0.25 ? 44.0 * r2 - 23.7 * roughness + 3.26 : 1.97 * r2 - 3.27 * roughness + 0.72;\n\tfloat DG = exp( a * dotNV + b ) + ( roughness < 0.25 ? 0.0 : 0.1 * ( roughness - 0.25 ) );\n\treturn saturate( DG * RECIPROCAL_PI );\n}\nvec2 DFGApprox( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tconst vec4 c0 = vec4( - 1, - 0.0275, - 0.572, 0.022 );\n\tconst vec4 c1 = vec4( 1, 0.0425, 1.04, - 0.04 );\n\tvec4 r = roughness * c0 + c1;\n\tfloat a004 = min( r.x * r.x, exp2( - 9.28 * dotNV ) ) * r.x + r.y;\n\tvec2 fab = vec2( - 1.04, 1.04 ) * a004 + r.zw;\n\treturn fab;\n}\nvec3 EnvironmentBRDF( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness ) {\n\tvec2 fab = DFGApprox( normal, viewDir, roughness );\n\treturn specularColor * fab.x + specularF90 * fab.y;\n}\n#ifdef USE_IRIDESCENCE\nvoid computeMultiscatteringIridescence( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float iridescence, const in vec3 iridescenceF0, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {\n#else\nvoid computeMultiscattering( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {\n#endif\n\tvec2 fab = DFGApprox( normal, viewDir, roughness );\n\t#ifdef USE_IRIDESCENCE\n\t\tvec3 Fr = mix( specularColor, iridescenceF0, iridescence );\n\t#else\n\t\tvec3 Fr = specularColor;\n\t#endif\n\tvec3 FssEss = Fr * fab.x + specularF90 * fab.y;\n\tfloat Ess = fab.x + fab.y;\n\tfloat Ems = 1.0 - Ess;\n\tvec3 Favg = Fr + ( 1.0 - Fr ) * 0.047619;\tvec3 Fms = FssEss * Favg / ( 1.0 - Ems * Favg );\n\tsingleScatter += FssEss;\n\tmultiScatter += Fms * Ems;\n}\n#if NUM_RECT_AREA_LIGHTS > 0\n\tvoid RE_Direct_RectArea_Physical( const in RectAreaLight rectAreaLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\t\tvec3 normal = geometryNormal;\n\t\tvec3 viewDir = geometryViewDir;\n\t\tvec3 position = geometryPosition;\n\t\tvec3 lightPos = rectAreaLight.position;\n\t\tvec3 halfWidth = rectAreaLight.halfWidth;\n\t\tvec3 halfHeight = rectAreaLight.halfHeight;\n\t\tvec3 lightColor = rectAreaLight.color;\n\t\tfloat roughness = material.roughness;\n\t\tvec3 rectCoords[ 4 ];\n\t\trectCoords[ 0 ] = lightPos + halfWidth - halfHeight;\t\trectCoords[ 1 ] = lightPos - halfWidth - halfHeight;\n\t\trectCoords[ 2 ] = lightPos - halfWidth + halfHeight;\n\t\trectCoords[ 3 ] = lightPos + halfWidth + halfHeight;\n\t\tvec2 uv = LTC_Uv( normal, viewDir, roughness );\n\t\tvec4 t1 = texture2D( ltc_1, uv );\n\t\tvec4 t2 = texture2D( ltc_2, uv );\n\t\tmat3 mInv = mat3(\n\t\t\tvec3( t1.x, 0, t1.y ),\n\t\t\tvec3(    0, 1,    0 ),\n\t\t\tvec3( t1.z, 0, t1.w )\n\t\t);\n\t\tvec3 fresnel = ( material.specularColor * t2.x + ( vec3( 1.0 ) - material.specularColor ) * t2.y );\n\t\treflectedLight.directSpecular += lightColor * fresnel * LTC_Evaluate( normal, viewDir, position, mInv, rectCoords );\n\t\treflectedLight.directDiffuse += lightColor * material.diffuseColor * LTC_Evaluate( normal, viewDir, position, mat3( 1.0 ), rectCoords );\n\t}\n#endif\nvoid RE_Direct_Physical( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\tfloat dotNL = saturate( dot( geometryNormal, directLight.direction ) );\n\tvec3 irradiance = dotNL * directLight.color;\n\t#ifdef USE_CLEARCOAT\n\t\tfloat dotNLcc = saturate( dot( geometryClearcoatNormal, directLight.direction ) );\n\t\tvec3 ccIrradiance = dotNLcc * directLight.color;\n\t\tclearcoatSpecularDirect += ccIrradiance * BRDF_GGX_Clearcoat( directLight.direction, geometryViewDir, geometryClearcoatNormal, material );\n\t#endif\n\t#ifdef USE_SHEEN\n\t\tsheenSpecularDirect += irradiance * BRDF_Sheen( directLight.direction, geometryViewDir, geometryNormal, material.sheenColor, material.sheenRoughness );\n\t#endif\n\treflectedLight.directSpecular += irradiance * BRDF_GGX( directLight.direction, geometryViewDir, geometryNormal, material );\n\treflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectDiffuse_Physical( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectSpecular_Physical( const in vec3 radiance, const in vec3 irradiance, const in vec3 clearcoatRadiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight) {\n\t#ifdef USE_CLEARCOAT\n\t\tclearcoatSpecularIndirect += clearcoatRadiance * EnvironmentBRDF( geometryClearcoatNormal, geometryViewDir, material.clearcoatF0, material.clearcoatF90, material.clearcoatRoughness );\n\t#endif\n\t#ifdef USE_SHEEN\n\t\tsheenSpecularIndirect += irradiance * material.sheenColor * IBLSheenBRDF( geometryNormal, geometryViewDir, material.sheenRoughness );\n\t#endif\n\tvec3 singleScattering = vec3( 0.0 );\n\tvec3 multiScattering = vec3( 0.0 );\n\tvec3 cosineWeightedIrradiance = irradiance * RECIPROCAL_PI;\n\t#ifdef USE_IRIDESCENCE\n\t\tcomputeMultiscatteringIridescence( geometryNormal, geometryViewDir, material.specularColor, material.specularF90, material.iridescence, material.iridescenceFresnel, material.roughness, singleScattering, multiScattering );\n\t#else\n\t\tcomputeMultiscattering( geometryNormal, geometryViewDir, material.specularColor, material.specularF90, material.roughness, singleScattering, multiScattering );\n\t#endif\n\tvec3 totalScattering = singleScattering + multiScattering;\n\tvec3 diffuse = material.diffuseColor * ( 1.0 - max( max( totalScattering.r, totalScattering.g ), totalScattering.b ) );\n\treflectedLight.indirectSpecular += radiance * singleScattering;\n\treflectedLight.indirectSpecular += multiScattering * cosineWeightedIrradiance;\n\treflectedLight.indirectDiffuse += diffuse * cosineWeightedIrradiance;\n}\n#define RE_Direct\t\t\t\tRE_Direct_Physical\n#define RE_Direct_RectArea\t\tRE_Direct_RectArea_Physical\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_Physical\n#define RE_IndirectSpecular\t\tRE_IndirectSpecular_Physical\nfloat computeSpecularOcclusion( const in float dotNV, const in float ambientOcclusion, const in float roughness ) {\n\treturn saturate( pow( dotNV + ambientOcclusion, exp2( - 16.0 * roughness - 1.0 ) ) - 1.0 + ambientOcclusion );\n}",lights_fragment_begin:"\nvec3 geometryPosition = - vViewPosition;\nvec3 geometryNormal = normal;\nvec3 geometryViewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( vViewPosition );\nvec3 geometryClearcoatNormal = vec3( 0.0 );\n#ifdef USE_CLEARCOAT\n\tgeometryClearcoatNormal = clearcoatNormal;\n#endif\n#ifdef USE_IRIDESCENCE\n\tfloat dotNVi = saturate( dot( normal, geometryViewDir ) );\n\tif ( material.iridescenceThickness == 0.0 ) {\n\t\tmaterial.iridescence = 0.0;\n\t} else {\n\t\tmaterial.iridescence = saturate( material.iridescence );\n\t}\n\tif ( material.iridescence > 0.0 ) {\n\t\tmaterial.iridescenceFresnel = evalIridescence( 1.0, material.iridescenceIOR, dotNVi, material.iridescenceThickness, material.specularColor );\n\t\tmaterial.iridescenceF0 = Schlick_to_F0( material.iridescenceFresnel, 1.0, dotNVi );\n\t}\n#endif\nIncidentLight directLight;\n#if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )\n\tPointLight pointLight;\n\t#if defined( USE_SHADOWMAP ) && NUM_POINT_LIGHT_SHADOWS > 0\n\tPointLightShadow pointLightShadow;\n\t#endif\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\n\t\tpointLight = pointLights[ i ];\n\t\tgetPointLightInfo( pointLight, geometryPosition, directLight );\n\t\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_POINT_LIGHT_SHADOWS )\n\t\tpointLightShadow = pointLightShadows[ i ];\n\t\tdirectLight.color *= ( directLight.visible && receiveShadow ) ? getPointShadow( pointShadowMap[ i ], pointLightShadow.shadowMapSize, pointLightShadow.shadowIntensity, pointLightShadow.shadowBias, pointLightShadow.shadowRadius, vPointShadowCoord[ i ], pointLightShadow.shadowCameraNear, pointLightShadow.shadowCameraFar ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )\n\tSpotLight spotLight;\n\tvec4 spotColor;\n\tvec3 spotLightCoord;\n\tbool inSpotLightMap;\n\t#if defined( USE_SHADOWMAP ) && NUM_SPOT_LIGHT_SHADOWS > 0\n\tSpotLightShadow spotLightShadow;\n\t#endif\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\n\t\tspotLight = spotLights[ i ];\n\t\tgetSpotLightInfo( spotLight, geometryPosition, directLight );\n\t\t#if ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )\n\t\t#define SPOT_LIGHT_MAP_INDEX UNROLLED_LOOP_INDEX\n\t\t#elif ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )\n\t\t#define SPOT_LIGHT_MAP_INDEX NUM_SPOT_LIGHT_MAPS\n\t\t#else\n\t\t#define SPOT_LIGHT_MAP_INDEX ( UNROLLED_LOOP_INDEX - NUM_SPOT_LIGHT_SHADOWS + NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )\n\t\t#endif\n\t\t#if ( SPOT_LIGHT_MAP_INDEX < NUM_SPOT_LIGHT_MAPS )\n\t\t\tspotLightCoord = vSpotLightCoord[ i ].xyz / vSpotLightCoord[ i ].w;\n\t\t\tinSpotLightMap = all( lessThan( abs( spotLightCoord * 2. - 1. ), vec3( 1.0 ) ) );\n\t\t\tspotColor = texture2D( spotLightMap[ SPOT_LIGHT_MAP_INDEX ], spotLightCoord.xy );\n\t\t\tdirectLight.color = inSpotLightMap ? directLight.color * spotColor.rgb : directLight.color;\n\t\t#endif\n\t\t#undef SPOT_LIGHT_MAP_INDEX\n\t\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )\n\t\tspotLightShadow = spotLightShadows[ i ];\n\t\tdirectLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( spotShadowMap[ i ], spotLightShadow.shadowMapSize, spotLightShadow.shadowIntensity, spotLightShadow.shadowBias, spotLightShadow.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )\n\tDirectionalLight directionalLight;\n\t#if defined( USE_SHADOWMAP ) && NUM_DIR_LIGHT_SHADOWS > 0\n\tDirectionalLightShadow directionalLightShadow;\n\t#endif\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\n\t\tdirectionalLight = directionalLights[ i ];\n\t\tgetDirectionalLightInfo( directionalLight, directLight );\n\t\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_DIR_LIGHT_SHADOWS )\n\t\tdirectionalLightShadow = directionalLightShadows[ i ];\n\t\tdirectLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( directionalShadowMap[ i ], directionalLightShadow.shadowMapSize, directionalLightShadow.shadowIntensity, directionalLightShadow.shadowBias, directionalLightShadow.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if ( NUM_RECT_AREA_LIGHTS > 0 ) && defined( RE_Direct_RectArea )\n\tRectAreaLight rectAreaLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {\n\t\trectAreaLight = rectAreaLights[ i ];\n\t\tRE_Direct_RectArea( rectAreaLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if defined( RE_IndirectDiffuse )\n\tvec3 iblIrradiance = vec3( 0.0 );\n\tvec3 irradiance = getAmbientLightIrradiance( ambientLightColor );\n\t#if defined( USE_LIGHT_PROBES )\n\t\tirradiance += getLightProbeIrradiance( lightProbe, geometryNormal );\n\t#endif\n\t#if ( NUM_HEMI_LIGHTS > 0 )\n\t\t#pragma unroll_loop_start\n\t\tfor ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {\n\t\t\tirradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometryNormal );\n\t\t}\n\t\t#pragma unroll_loop_end\n\t#endif\n#endif\n#if defined( RE_IndirectSpecular )\n\tvec3 radiance = vec3( 0.0 );\n\tvec3 clearcoatRadiance = vec3( 0.0 );\n#endif",lights_fragment_maps:"#if defined( RE_IndirectDiffuse )\n\t#ifdef USE_LIGHTMAP\n\t\tvec4 lightMapTexel = texture2D( lightMap, vLightMapUv );\n\t\tvec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;\n\t\tirradiance += lightMapIrradiance;\n\t#endif\n\t#if defined( USE_ENVMAP ) && defined( STANDARD ) && defined( ENVMAP_TYPE_CUBE_UV )\n\t\tiblIrradiance += getIBLIrradiance( geometryNormal );\n\t#endif\n#endif\n#if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )\n\t#ifdef USE_ANISOTROPY\n\t\tradiance += getIBLAnisotropyRadiance( geometryViewDir, geometryNormal, material.roughness, material.anisotropyB, material.anisotropy );\n\t#else\n\t\tradiance += getIBLRadiance( geometryViewDir, geometryNormal, material.roughness );\n\t#endif\n\t#ifdef USE_CLEARCOAT\n\t\tclearcoatRadiance += getIBLRadiance( geometryViewDir, geometryClearcoatNormal, material.clearcoatRoughness );\n\t#endif\n#endif",lights_fragment_end:"#if defined( RE_IndirectDiffuse )\n\tRE_IndirectDiffuse( irradiance, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );\n#endif\n#if defined( RE_IndirectSpecular )\n\tRE_IndirectSpecular( radiance, iblIrradiance, clearcoatRadiance, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );\n#endif",logdepthbuf_fragment:"#if defined( USE_LOGDEPTHBUF )\n\tgl_FragDepth = vIsPerspective == 0.0 ? gl_FragCoord.z : log2( vFragDepth ) * logDepthBufFC * 0.5;\n#endif",logdepthbuf_pars_fragment:"#if defined( USE_LOGDEPTHBUF )\n\tuniform float logDepthBufFC;\n\tvarying float vFragDepth;\n\tvarying float vIsPerspective;\n#endif",logdepthbuf_pars_vertex:"#ifdef USE_LOGDEPTHBUF\n\tvarying float vFragDepth;\n\tvarying float vIsPerspective;\n#endif",logdepthbuf_vertex:"#ifdef USE_LOGDEPTHBUF\n\tvFragDepth = 1.0 + gl_Position.w;\n\tvIsPerspective = float( isPerspectiveMatrix( projectionMatrix ) );\n#endif",map_fragment:"#ifdef USE_MAP\n\tvec4 sampledDiffuseColor = texture2D( map, vMapUv );\n\t#ifdef DECODE_VIDEO_TEXTURE\n\t\tsampledDiffuseColor = sRGBTransferEOTF( sampledDiffuseColor );\n\t#endif\n\tdiffuseColor *= sampledDiffuseColor;\n#endif",map_pars_fragment:"#ifdef USE_MAP\n\tuniform sampler2D map;\n#endif",map_particle_fragment:"#if defined( USE_MAP ) || defined( USE_ALPHAMAP )\n\t#if defined( USE_POINTS_UV )\n\t\tvec2 uv = vUv;\n\t#else\n\t\tvec2 uv = ( uvTransform * vec3( gl_PointCoord.x, 1.0 - gl_PointCoord.y, 1 ) ).xy;\n\t#endif\n#endif\n#ifdef USE_MAP\n\tdiffuseColor *= texture2D( map, uv );\n#endif\n#ifdef USE_ALPHAMAP\n\tdiffuseColor.a *= texture2D( alphaMap, uv ).g;\n#endif",map_particle_pars_fragment:"#if defined( USE_POINTS_UV )\n\tvarying vec2 vUv;\n#else\n\t#if defined( USE_MAP ) || defined( USE_ALPHAMAP )\n\t\tuniform mat3 uvTransform;\n\t#endif\n#endif\n#ifdef USE_MAP\n\tuniform sampler2D map;\n#endif\n#ifdef USE_ALPHAMAP\n\tuniform sampler2D alphaMap;\n#endif",metalnessmap_fragment:"float metalnessFactor = metalness;\n#ifdef USE_METALNESSMAP\n\tvec4 texelMetalness = texture2D( metalnessMap, vMetalnessMapUv );\n\tmetalnessFactor *= texelMetalness.b;\n#endif",metalnessmap_pars_fragment:"#ifdef USE_METALNESSMAP\n\tuniform sampler2D metalnessMap;\n#endif",morphinstance_vertex:"#ifdef USE_INSTANCING_MORPH\n\tfloat morphTargetInfluences[ MORPHTARGETS_COUNT ];\n\tfloat morphTargetBaseInfluence = texelFetch( morphTexture, ivec2( 0, gl_InstanceID ), 0 ).r;\n\tfor ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {\n\t\tmorphTargetInfluences[i] =  texelFetch( morphTexture, ivec2( i + 1, gl_InstanceID ), 0 ).r;\n\t}\n#endif",morphcolor_vertex:"#if defined( USE_MORPHCOLORS )\n\tvColor *= morphTargetBaseInfluence;\n\tfor ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {\n\t\t#if defined( USE_COLOR_ALPHA )\n\t\t\tif ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ) * morphTargetInfluences[ i ];\n\t\t#elif defined( USE_COLOR )\n\t\t\tif ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ).rgb * morphTargetInfluences[ i ];\n\t\t#endif\n\t}\n#endif",morphnormal_vertex:"#ifdef USE_MORPHNORMALS\n\tobjectNormal *= morphTargetBaseInfluence;\n\tfor ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {\n\t\tif ( morphTargetInfluences[ i ] != 0.0 ) objectNormal += getMorph( gl_VertexID, i, 1 ).xyz * morphTargetInfluences[ i ];\n\t}\n#endif",morphtarget_pars_vertex:"#ifdef USE_MORPHTARGETS\n\t#ifndef USE_INSTANCING_MORPH\n\t\tuniform float morphTargetBaseInfluence;\n\t\tuniform float morphTargetInfluences[ MORPHTARGETS_COUNT ];\n\t#endif\n\tuniform sampler2DArray morphTargetsTexture;\n\tuniform ivec2 morphTargetsTextureSize;\n\tvec4 getMorph( const in int vertexIndex, const in int morphTargetIndex, const in int offset ) {\n\t\tint texelIndex = vertexIndex * MORPHTARGETS_TEXTURE_STRIDE + offset;\n\t\tint y = texelIndex / morphTargetsTextureSize.x;\n\t\tint x = texelIndex - y * morphTargetsTextureSize.x;\n\t\tivec3 morphUV = ivec3( x, y, morphTargetIndex );\n\t\treturn texelFetch( morphTargetsTexture, morphUV, 0 );\n\t}\n#endif",morphtarget_vertex:"#ifdef USE_MORPHTARGETS\n\ttransformed *= morphTargetBaseInfluence;\n\tfor ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {\n\t\tif ( morphTargetInfluences[ i ] != 0.0 ) transformed += getMorph( gl_VertexID, i, 0 ).xyz * morphTargetInfluences[ i ];\n\t}\n#endif",normal_fragment_begin:"float faceDirection = gl_FrontFacing ? 1.0 : - 1.0;\n#ifdef FLAT_SHADED\n\tvec3 fdx = dFdx( vViewPosition );\n\tvec3 fdy = dFdy( vViewPosition );\n\tvec3 normal = normalize( cross( fdx, fdy ) );\n#else\n\tvec3 normal = normalize( vNormal );\n\t#ifdef DOUBLE_SIDED\n\t\tnormal *= faceDirection;\n\t#endif\n#endif\n#if defined( USE_NORMALMAP_TANGENTSPACE ) || defined( USE_CLEARCOAT_NORMALMAP ) || defined( USE_ANISOTROPY )\n\t#ifdef USE_TANGENT\n\t\tmat3 tbn = mat3( normalize( vTangent ), normalize( vBitangent ), normal );\n\t#else\n\t\tmat3 tbn = getTangentFrame( - vViewPosition, normal,\n\t\t#if defined( USE_NORMALMAP )\n\t\t\tvNormalMapUv\n\t\t#elif defined( USE_CLEARCOAT_NORMALMAP )\n\t\t\tvClearcoatNormalMapUv\n\t\t#else\n\t\t\tvUv\n\t\t#endif\n\t\t);\n\t#endif\n\t#if defined( DOUBLE_SIDED ) && ! defined( FLAT_SHADED )\n\t\ttbn[0] *= faceDirection;\n\t\ttbn[1] *= faceDirection;\n\t#endif\n#endif\n#ifdef USE_CLEARCOAT_NORMALMAP\n\t#ifdef USE_TANGENT\n\t\tmat3 tbn2 = mat3( normalize( vTangent ), normalize( vBitangent ), normal );\n\t#else\n\t\tmat3 tbn2 = getTangentFrame( - vViewPosition, normal, vClearcoatNormalMapUv );\n\t#endif\n\t#if defined( DOUBLE_SIDED ) && ! defined( FLAT_SHADED )\n\t\ttbn2[0] *= faceDirection;\n\t\ttbn2[1] *= faceDirection;\n\t#endif\n#endif\nvec3 nonPerturbedNormal = normal;",normal_fragment_maps:"#ifdef USE_NORMALMAP_OBJECTSPACE\n\tnormal = texture2D( normalMap, vNormalMapUv ).xyz * 2.0 - 1.0;\n\t#ifdef FLIP_SIDED\n\t\tnormal = - normal;\n\t#endif\n\t#ifdef DOUBLE_SIDED\n\t\tnormal = normal * faceDirection;\n\t#endif\n\tnormal = normalize( normalMatrix * normal );\n#elif defined( USE_NORMALMAP_TANGENTSPACE )\n\tvec3 mapN = texture2D( normalMap, vNormalMapUv ).xyz * 2.0 - 1.0;\n\tmapN.xy *= normalScale;\n\tnormal = normalize( tbn * mapN );\n#elif defined( USE_BUMPMAP )\n\tnormal = perturbNormalArb( - vViewPosition, normal, dHdxy_fwd(), faceDirection );\n#endif",normal_pars_fragment:"#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n\t#ifdef USE_TANGENT\n\t\tvarying vec3 vTangent;\n\t\tvarying vec3 vBitangent;\n\t#endif\n#endif",normal_pars_vertex:"#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n\t#ifdef USE_TANGENT\n\t\tvarying vec3 vTangent;\n\t\tvarying vec3 vBitangent;\n\t#endif\n#endif",normal_vertex:"#ifndef FLAT_SHADED\n\tvNormal = normalize( transformedNormal );\n\t#ifdef USE_TANGENT\n\t\tvTangent = normalize( transformedTangent );\n\t\tvBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );\n\t#endif\n#endif",normalmap_pars_fragment:"#ifdef USE_NORMALMAP\n\tuniform sampler2D normalMap;\n\tuniform vec2 normalScale;\n#endif\n#ifdef USE_NORMALMAP_OBJECTSPACE\n\tuniform mat3 normalMatrix;\n#endif\n#if ! defined ( USE_TANGENT ) && ( defined ( USE_NORMALMAP_TANGENTSPACE ) || defined ( USE_CLEARCOAT_NORMALMAP ) || defined( USE_ANISOTROPY ) )\n\tmat3 getTangentFrame( vec3 eye_pos, vec3 surf_norm, vec2 uv ) {\n\t\tvec3 q0 = dFdx( eye_pos.xyz );\n\t\tvec3 q1 = dFdy( eye_pos.xyz );\n\t\tvec2 st0 = dFdx( uv.st );\n\t\tvec2 st1 = dFdy( uv.st );\n\t\tvec3 N = surf_norm;\n\t\tvec3 q1perp = cross( q1, N );\n\t\tvec3 q0perp = cross( N, q0 );\n\t\tvec3 T = q1perp * st0.x + q0perp * st1.x;\n\t\tvec3 B = q1perp * st0.y + q0perp * st1.y;\n\t\tfloat det = max( dot( T, T ), dot( B, B ) );\n\t\tfloat scale = ( det == 0.0 ) ? 0.0 : inversesqrt( det );\n\t\treturn mat3( T * scale, B * scale, N );\n\t}\n#endif",clearcoat_normal_fragment_begin:"#ifdef USE_CLEARCOAT\n\tvec3 clearcoatNormal = nonPerturbedNormal;\n#endif",clearcoat_normal_fragment_maps:"#ifdef USE_CLEARCOAT_NORMALMAP\n\tvec3 clearcoatMapN = texture2D( clearcoatNormalMap, vClearcoatNormalMapUv ).xyz * 2.0 - 1.0;\n\tclearcoatMapN.xy *= clearcoatNormalScale;\n\tclearcoatNormal = normalize( tbn2 * clearcoatMapN );\n#endif",clearcoat_pars_fragment:"#ifdef USE_CLEARCOATMAP\n\tuniform sampler2D clearcoatMap;\n#endif\n#ifdef USE_CLEARCOAT_NORMALMAP\n\tuniform sampler2D clearcoatNormalMap;\n\tuniform vec2 clearcoatNormalScale;\n#endif\n#ifdef USE_CLEARCOAT_ROUGHNESSMAP\n\tuniform sampler2D clearcoatRoughnessMap;\n#endif",iridescence_pars_fragment:"#ifdef USE_IRIDESCENCEMAP\n\tuniform sampler2D iridescenceMap;\n#endif\n#ifdef USE_IRIDESCENCE_THICKNESSMAP\n\tuniform sampler2D iridescenceThicknessMap;\n#endif",opaque_fragment:"#ifdef OPAQUE\ndiffuseColor.a = 1.0;\n#endif\n#ifdef USE_TRANSMISSION\ndiffuseColor.a *= material.transmissionAlpha;\n#endif\ngl_FragColor = vec4( outgoingLight, diffuseColor.a );",packing:"vec3 packNormalToRGB( const in vec3 normal ) {\n\treturn normalize( normal ) * 0.5 + 0.5;\n}\nvec3 unpackRGBToNormal( const in vec3 rgb ) {\n\treturn 2.0 * rgb.xyz - 1.0;\n}\nconst float PackUpscale = 256. / 255.;const float UnpackDownscale = 255. / 256.;const float ShiftRight8 = 1. / 256.;\nconst float Inv255 = 1. / 255.;\nconst vec4 PackFactors = vec4( 1.0, 256.0, 256.0 * 256.0, 256.0 * 256.0 * 256.0 );\nconst vec2 UnpackFactors2 = vec2( UnpackDownscale, 1.0 / PackFactors.g );\nconst vec3 UnpackFactors3 = vec3( UnpackDownscale / PackFactors.rg, 1.0 / PackFactors.b );\nconst vec4 UnpackFactors4 = vec4( UnpackDownscale / PackFactors.rgb, 1.0 / PackFactors.a );\nvec4 packDepthToRGBA( const in float v ) {\n\tif( v <= 0.0 )\n\t\treturn vec4( 0., 0., 0., 0. );\n\tif( v >= 1.0 )\n\t\treturn vec4( 1., 1., 1., 1. );\n\tfloat vuf;\n\tfloat af = modf( v * PackFactors.a, vuf );\n\tfloat bf = modf( vuf * ShiftRight8, vuf );\n\tfloat gf = modf( vuf * ShiftRight8, vuf );\n\treturn vec4( vuf * Inv255, gf * PackUpscale, bf * PackUpscale, af );\n}\nvec3 packDepthToRGB( const in float v ) {\n\tif( v <= 0.0 )\n\t\treturn vec3( 0., 0., 0. );\n\tif( v >= 1.0 )\n\t\treturn vec3( 1., 1., 1. );\n\tfloat vuf;\n\tfloat bf = modf( v * PackFactors.b, vuf );\n\tfloat gf = modf( vuf * ShiftRight8, vuf );\n\treturn vec3( vuf * Inv255, gf * PackUpscale, bf );\n}\nvec2 packDepthToRG( const in float v ) {\n\tif( v <= 0.0 )\n\t\treturn vec2( 0., 0. );\n\tif( v >= 1.0 )\n\t\treturn vec2( 1., 1. );\n\tfloat vuf;\n\tfloat gf = modf( v * 256., vuf );\n\treturn vec2( vuf * Inv255, gf );\n}\nfloat unpackRGBAToDepth( const in vec4 v ) {\n\treturn dot( v, UnpackFactors4 );\n}\nfloat unpackRGBToDepth( const in vec3 v ) {\n\treturn dot( v, UnpackFactors3 );\n}\nfloat unpackRGToDepth( const in vec2 v ) {\n\treturn v.r * UnpackFactors2.r + v.g * UnpackFactors2.g;\n}\nvec4 pack2HalfToRGBA( const in vec2 v ) {\n\tvec4 r = vec4( v.x, fract( v.x * 255.0 ), v.y, fract( v.y * 255.0 ) );\n\treturn vec4( r.x - r.y / 255.0, r.y, r.z - r.w / 255.0, r.w );\n}\nvec2 unpackRGBATo2Half( const in vec4 v ) {\n\treturn vec2( v.x + ( v.y / 255.0 ), v.z + ( v.w / 255.0 ) );\n}\nfloat viewZToOrthographicDepth( const in float viewZ, const in float near, const in float far ) {\n\treturn ( viewZ + near ) / ( near - far );\n}\nfloat orthographicDepthToViewZ( const in float depth, const in float near, const in float far ) {\n\treturn depth * ( near - far ) - near;\n}\nfloat viewZToPerspectiveDepth( const in float viewZ, const in float near, const in float far ) {\n\treturn ( ( near + viewZ ) * far ) / ( ( far - near ) * viewZ );\n}\nfloat perspectiveDepthToViewZ( const in float depth, const in float near, const in float far ) {\n\treturn ( near * far ) / ( ( far - near ) * depth - far );\n}",premultiplied_alpha_fragment:"#ifdef PREMULTIPLIED_ALPHA\n\tgl_FragColor.rgb *= gl_FragColor.a;\n#endif",project_vertex:"vec4 mvPosition = vec4( transformed, 1.0 );\n#ifdef USE_BATCHING\n\tmvPosition = batchingMatrix * mvPosition;\n#endif\n#ifdef USE_INSTANCING\n\tmvPosition = instanceMatrix * mvPosition;\n#endif\nmvPosition = modelViewMatrix * mvPosition;\ngl_Position = projectionMatrix * mvPosition;",dithering_fragment:"#ifdef DITHERING\n\tgl_FragColor.rgb = dithering( gl_FragColor.rgb );\n#endif",dithering_pars_fragment:"#ifdef DITHERING\n\tvec3 dithering( vec3 color ) {\n\t\tfloat grid_position = rand( gl_FragCoord.xy );\n\t\tvec3 dither_shift_RGB = vec3( 0.25 / 255.0, -0.25 / 255.0, 0.25 / 255.0 );\n\t\tdither_shift_RGB = mix( 2.0 * dither_shift_RGB, -2.0 * dither_shift_RGB, grid_position );\n\t\treturn color + dither_shift_RGB;\n\t}\n#endif",roughnessmap_fragment:"float roughnessFactor = roughness;\n#ifdef USE_ROUGHNESSMAP\n\tvec4 texelRoughness = texture2D( roughnessMap, vRoughnessMapUv );\n\troughnessFactor *= texelRoughness.g;\n#endif",roughnessmap_pars_fragment:"#ifdef USE_ROUGHNESSMAP\n\tuniform sampler2D roughnessMap;\n#endif",shadowmap_pars_fragment:"#if NUM_SPOT_LIGHT_COORDS > 0\n\tvarying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];\n#endif\n#if NUM_SPOT_LIGHT_MAPS > 0\n\tuniform sampler2D spotLightMap[ NUM_SPOT_LIGHT_MAPS ];\n#endif\n#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\t\tuniform sampler2D directionalShadowMap[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tvarying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tstruct DirectionalLightShadow {\n\t\t\tfloat shadowIntensity;\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\t\tuniform sampler2D spotShadowMap[ NUM_SPOT_LIGHT_SHADOWS ];\n\t\tstruct SpotLightShadow {\n\t\t\tfloat shadowIntensity;\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\t\tuniform sampler2D pointShadowMap[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tvarying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tstruct PointLightShadow {\n\t\t\tfloat shadowIntensity;\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t\tfloat shadowCameraNear;\n\t\t\tfloat shadowCameraFar;\n\t\t};\n\t\tuniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];\n\t#endif\n\tfloat texture2DCompare( sampler2D depths, vec2 uv, float compare ) {\n\t\treturn step( compare, unpackRGBAToDepth( texture2D( depths, uv ) ) );\n\t}\n\tvec2 texture2DDistribution( sampler2D shadow, vec2 uv ) {\n\t\treturn unpackRGBATo2Half( texture2D( shadow, uv ) );\n\t}\n\tfloat VSMShadow (sampler2D shadow, vec2 uv, float compare ){\n\t\tfloat occlusion = 1.0;\n\t\tvec2 distribution = texture2DDistribution( shadow, uv );\n\t\tfloat hard_shadow = step( compare , distribution.x );\n\t\tif (hard_shadow != 1.0 ) {\n\t\t\tfloat distance = compare - distribution.x ;\n\t\t\tfloat variance = max( 0.00000, distribution.y * distribution.y );\n\t\t\tfloat softness_probability = variance / (variance + distance * distance );\t\t\tsoftness_probability = clamp( ( softness_probability - 0.3 ) / ( 0.95 - 0.3 ), 0.0, 1.0 );\t\t\tocclusion = clamp( max( hard_shadow, softness_probability ), 0.0, 1.0 );\n\t\t}\n\t\treturn occlusion;\n\t}\n\tfloat getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowIntensity, float shadowBias, float shadowRadius, vec4 shadowCoord ) {\n\t\tfloat shadow = 1.0;\n\t\tshadowCoord.xyz /= shadowCoord.w;\n\t\tshadowCoord.z += shadowBias;\n\t\tbool inFrustum = shadowCoord.x >= 0.0 && shadowCoord.x <= 1.0 && shadowCoord.y >= 0.0 && shadowCoord.y <= 1.0;\n\t\tbool frustumTest = inFrustum && shadowCoord.z <= 1.0;\n\t\tif ( frustumTest ) {\n\t\t#if defined( SHADOWMAP_TYPE_PCF )\n\t\t\tvec2 texelSize = vec2( 1.0 ) / shadowMapSize;\n\t\t\tfloat dx0 = - texelSize.x * shadowRadius;\n\t\t\tfloat dy0 = - texelSize.y * shadowRadius;\n\t\t\tfloat dx1 = + texelSize.x * shadowRadius;\n\t\t\tfloat dy1 = + texelSize.y * shadowRadius;\n\t\t\tfloat dx2 = dx0 / 2.0;\n\t\t\tfloat dy2 = dy0 / 2.0;\n\t\t\tfloat dx3 = dx1 / 2.0;\n\t\t\tfloat dy3 = dy1 / 2.0;\n\t\t\tshadow = (\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy2 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy2 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy2 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy3 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy3 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy3 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )\n\t\t\t) * ( 1.0 / 17.0 );\n\t\t#elif defined( SHADOWMAP_TYPE_PCF_SOFT )\n\t\t\tvec2 texelSize = vec2( 1.0 ) / shadowMapSize;\n\t\t\tfloat dx = texelSize.x;\n\t\t\tfloat dy = texelSize.y;\n\t\t\tvec2 uv = shadowCoord.xy;\n\t\t\tvec2 f = fract( uv * shadowMapSize + 0.5 );\n\t\t\tuv -= f * texelSize;\n\t\t\tshadow = (\n\t\t\t\ttexture2DCompare( shadowMap, uv, shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, uv + vec2( dx, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, uv + vec2( 0.0, dy ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, uv + texelSize, shadowCoord.z ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( -dx, 0.0 ), shadowCoord.z ),\n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 0.0 ), shadowCoord.z ),\n\t\t\t\t\t f.x ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( -dx, dy ), shadowCoord.z ),\n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, dy ), shadowCoord.z ),\n\t\t\t\t\t f.x ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( 0.0, -dy ), shadowCoord.z ),\n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( 0.0, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t f.y ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( dx, -dy ), shadowCoord.z ),\n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( dx, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t f.y ) +\n\t\t\t\tmix( mix( texture2DCompare( shadowMap, uv + vec2( -dx, -dy ), shadowCoord.z ),\n\t\t\t\t\t\t  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, -dy ), shadowCoord.z ),\n\t\t\t\t\t\t  f.x ),\n\t\t\t\t\t mix( texture2DCompare( shadowMap, uv + vec2( -dx, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t\t  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t\t  f.x ),\n\t\t\t\t\t f.y )\n\t\t\t) * ( 1.0 / 9.0 );\n\t\t#elif defined( SHADOWMAP_TYPE_VSM )\n\t\t\tshadow = VSMShadow( shadowMap, shadowCoord.xy, shadowCoord.z );\n\t\t#else\n\t\t\tshadow = texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z );\n\t\t#endif\n\t\t}\n\t\treturn mix( 1.0, shadow, shadowIntensity );\n\t}\n\tvec2 cubeToUV( vec3 v, float texelSizeY ) {\n\t\tvec3 absV = abs( v );\n\t\tfloat scaleToCube = 1.0 / max( absV.x, max( absV.y, absV.z ) );\n\t\tabsV *= scaleToCube;\n\t\tv *= scaleToCube * ( 1.0 - 2.0 * texelSizeY );\n\t\tvec2 planar = v.xy;\n\t\tfloat almostATexel = 1.5 * texelSizeY;\n\t\tfloat almostOne = 1.0 - almostATexel;\n\t\tif ( absV.z >= almostOne ) {\n\t\t\tif ( v.z > 0.0 )\n\t\t\t\tplanar.x = 4.0 - v.x;\n\t\t} else if ( absV.x >= almostOne ) {\n\t\t\tfloat signX = sign( v.x );\n\t\t\tplanar.x = v.z * signX + 2.0 * signX;\n\t\t} else if ( absV.y >= almostOne ) {\n\t\t\tfloat signY = sign( v.y );\n\t\t\tplanar.x = v.x + 2.0 * signY + 2.0;\n\t\t\tplanar.y = v.z * signY - 2.0;\n\t\t}\n\t\treturn vec2( 0.125, 0.25 ) * planar + vec2( 0.375, 0.75 );\n\t}\n\tfloat getPointShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowIntensity, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {\n\t\tfloat shadow = 1.0;\n\t\tvec3 lightToPosition = shadowCoord.xyz;\n\t\t\n\t\tfloat lightToPositionLength = length( lightToPosition );\n\t\tif ( lightToPositionLength - shadowCameraFar <= 0.0 && lightToPositionLength - shadowCameraNear >= 0.0 ) {\n\t\t\tfloat dp = ( lightToPositionLength - shadowCameraNear ) / ( shadowCameraFar - shadowCameraNear );\t\t\tdp += shadowBias;\n\t\t\tvec3 bd3D = normalize( lightToPosition );\n\t\t\tvec2 texelSize = vec2( 1.0 ) / ( shadowMapSize * vec2( 4.0, 2.0 ) );\n\t\t\t#if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_PCF_SOFT ) || defined( SHADOWMAP_TYPE_VSM )\n\t\t\t\tvec2 offset = vec2( - 1, 1 ) * shadowRadius * texelSize.y;\n\t\t\t\tshadow = (\n\t\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyy, texelSize.y ), dp ) +\n\t\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyy, texelSize.y ), dp ) +\n\t\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyx, texelSize.y ), dp ) +\n\t\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyx, texelSize.y ), dp ) +\n\t\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp ) +\n\t\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxy, texelSize.y ), dp ) +\n\t\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxy, texelSize.y ), dp ) +\n\t\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxx, texelSize.y ), dp ) +\n\t\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxx, texelSize.y ), dp )\n\t\t\t\t) * ( 1.0 / 9.0 );\n\t\t\t#else\n\t\t\t\tshadow = texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp );\n\t\t\t#endif\n\t\t}\n\t\treturn mix( 1.0, shadow, shadowIntensity );\n\t}\n#endif",shadowmap_pars_vertex:"#if NUM_SPOT_LIGHT_COORDS > 0\n\tuniform mat4 spotLightMatrix[ NUM_SPOT_LIGHT_COORDS ];\n\tvarying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];\n#endif\n#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\t\tuniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tvarying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tstruct DirectionalLightShadow {\n\t\t\tfloat shadowIntensity;\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\t\tstruct SpotLightShadow {\n\t\t\tfloat shadowIntensity;\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\t\tuniform mat4 pointShadowMatrix[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tvarying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tstruct PointLightShadow {\n\t\t\tfloat shadowIntensity;\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t\tfloat shadowCameraNear;\n\t\t\tfloat shadowCameraFar;\n\t\t};\n\t\tuniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];\n\t#endif\n#endif",shadowmap_vertex:"#if ( defined( USE_SHADOWMAP ) && ( NUM_DIR_LIGHT_SHADOWS > 0 || NUM_POINT_LIGHT_SHADOWS > 0 ) ) || ( NUM_SPOT_LIGHT_COORDS > 0 )\n\tvec3 shadowWorldNormal = inverseTransformDirection( transformedNormal, viewMatrix );\n\tvec4 shadowWorldPosition;\n#endif\n#if defined( USE_SHADOWMAP )\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\t\t#pragma unroll_loop_start\n\t\tfor ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {\n\t\t\tshadowWorldPosition = worldPosition + vec4( shadowWorldNormal * directionalLightShadows[ i ].shadowNormalBias, 0 );\n\t\t\tvDirectionalShadowCoord[ i ] = directionalShadowMatrix[ i ] * shadowWorldPosition;\n\t\t}\n\t\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\t\t#pragma unroll_loop_start\n\t\tfor ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {\n\t\t\tshadowWorldPosition = worldPosition + vec4( shadowWorldNormal * pointLightShadows[ i ].shadowNormalBias, 0 );\n\t\t\tvPointShadowCoord[ i ] = pointShadowMatrix[ i ] * shadowWorldPosition;\n\t\t}\n\t\t#pragma unroll_loop_end\n\t#endif\n#endif\n#if NUM_SPOT_LIGHT_COORDS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHT_COORDS; i ++ ) {\n\t\tshadowWorldPosition = worldPosition;\n\t\t#if ( defined( USE_SHADOWMAP ) && UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )\n\t\t\tshadowWorldPosition.xyz += shadowWorldNormal * spotLightShadows[ i ].shadowNormalBias;\n\t\t#endif\n\t\tvSpotLightCoord[ i ] = spotLightMatrix[ i ] * shadowWorldPosition;\n\t}\n\t#pragma unroll_loop_end\n#endif",shadowmask_pars_fragment:"float getShadowMask() {\n\tfloat shadow = 1.0;\n\t#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\tDirectionalLightShadow directionalLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {\n\t\tdirectionalLight = directionalLightShadows[ i ];\n\t\tshadow *= receiveShadow ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowIntensity, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\tSpotLightShadow spotLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {\n\t\tspotLight = spotLightShadows[ i ];\n\t\tshadow *= receiveShadow ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowIntensity, spotLight.shadowBias, spotLight.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\tPointLightShadow pointLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {\n\t\tpointLight = pointLightShadows[ i ];\n\t\tshadow *= receiveShadow ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowIntensity, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#endif\n\treturn shadow;\n}",skinbase_vertex:"#ifdef USE_SKINNING\n\tmat4 boneMatX = getBoneMatrix( skinIndex.x );\n\tmat4 boneMatY = getBoneMatrix( skinIndex.y );\n\tmat4 boneMatZ = getBoneMatrix( skinIndex.z );\n\tmat4 boneMatW = getBoneMatrix( skinIndex.w );\n#endif",skinning_pars_vertex:"#ifdef USE_SKINNING\n\tuniform mat4 bindMatrix;\n\tuniform mat4 bindMatrixInverse;\n\tuniform highp sampler2D boneTexture;\n\tmat4 getBoneMatrix( const in float i ) {\n\t\tint size = textureSize( boneTexture, 0 ).x;\n\t\tint j = int( i ) * 4;\n\t\tint x = j % size;\n\t\tint y = j / size;\n\t\tvec4 v1 = texelFetch( boneTexture, ivec2( x, y ), 0 );\n\t\tvec4 v2 = texelFetch( boneTexture, ivec2( x + 1, y ), 0 );\n\t\tvec4 v3 = texelFetch( boneTexture, ivec2( x + 2, y ), 0 );\n\t\tvec4 v4 = texelFetch( boneTexture, ivec2( x + 3, y ), 0 );\n\t\treturn mat4( v1, v2, v3, v4 );\n\t}\n#endif",skinning_vertex:"#ifdef USE_SKINNING\n\tvec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );\n\tvec4 skinned = vec4( 0.0 );\n\tskinned += boneMatX * skinVertex * skinWeight.x;\n\tskinned += boneMatY * skinVertex * skinWeight.y;\n\tskinned += boneMatZ * skinVertex * skinWeight.z;\n\tskinned += boneMatW * skinVertex * skinWeight.w;\n\ttransformed = ( bindMatrixInverse * skinned ).xyz;\n#endif",skinnormal_vertex:"#ifdef USE_SKINNING\n\tmat4 skinMatrix = mat4( 0.0 );\n\tskinMatrix += skinWeight.x * boneMatX;\n\tskinMatrix += skinWeight.y * boneMatY;\n\tskinMatrix += skinWeight.z * boneMatZ;\n\tskinMatrix += skinWeight.w * boneMatW;\n\tskinMatrix = bindMatrixInverse * skinMatrix * bindMatrix;\n\tobjectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;\n\t#ifdef USE_TANGENT\n\t\tobjectTangent = vec4( skinMatrix * vec4( objectTangent, 0.0 ) ).xyz;\n\t#endif\n#endif",specularmap_fragment:"float specularStrength;\n#ifdef USE_SPECULARMAP\n\tvec4 texelSpecular = texture2D( specularMap, vSpecularMapUv );\n\tspecularStrength = texelSpecular.r;\n#else\n\tspecularStrength = 1.0;\n#endif",specularmap_pars_fragment:"#ifdef USE_SPECULARMAP\n\tuniform sampler2D specularMap;\n#endif",tonemapping_fragment:"#if defined( TONE_MAPPING )\n\tgl_FragColor.rgb = toneMapping( gl_FragColor.rgb );\n#endif",tonemapping_pars_fragment:"#ifndef saturate\n#define saturate( a ) clamp( a, 0.0, 1.0 )\n#endif\nuniform float toneMappingExposure;\nvec3 LinearToneMapping( vec3 color ) {\n\treturn saturate( toneMappingExposure * color );\n}\nvec3 ReinhardToneMapping( vec3 color ) {\n\tcolor *= toneMappingExposure;\n\treturn saturate( color / ( vec3( 1.0 ) + color ) );\n}\nvec3 CineonToneMapping( vec3 color ) {\n\tcolor *= toneMappingExposure;\n\tcolor = max( vec3( 0.0 ), color - 0.004 );\n\treturn pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );\n}\nvec3 RRTAndODTFit( vec3 v ) {\n\tvec3 a = v * ( v + 0.0245786 ) - 0.000090537;\n\tvec3 b = v * ( 0.983729 * v + 0.4329510 ) + 0.238081;\n\treturn a / b;\n}\nvec3 ACESFilmicToneMapping( vec3 color ) {\n\tconst mat3 ACESInputMat = mat3(\n\t\tvec3( 0.59719, 0.07600, 0.02840 ),\t\tvec3( 0.35458, 0.90834, 0.13383 ),\n\t\tvec3( 0.04823, 0.01566, 0.83777 )\n\t);\n\tconst mat3 ACESOutputMat = mat3(\n\t\tvec3(  1.60475, -0.10208, -0.00327 ),\t\tvec3( -0.53108,  1.10813, -0.07276 ),\n\t\tvec3( -0.07367, -0.00605,  1.07602 )\n\t);\n\tcolor *= toneMappingExposure / 0.6;\n\tcolor = ACESInputMat * color;\n\tcolor = RRTAndODTFit( color );\n\tcolor = ACESOutputMat * color;\n\treturn saturate( color );\n}\nconst mat3 LINEAR_REC2020_TO_LINEAR_SRGB = mat3(\n\tvec3( 1.6605, - 0.1246, - 0.0182 ),\n\tvec3( - 0.5876, 1.1329, - 0.1006 ),\n\tvec3( - 0.0728, - 0.0083, 1.1187 )\n);\nconst mat3 LINEAR_SRGB_TO_LINEAR_REC2020 = mat3(\n\tvec3( 0.6274, 0.0691, 0.0164 ),\n\tvec3( 0.3293, 0.9195, 0.0880 ),\n\tvec3( 0.0433, 0.0113, 0.8956 )\n);\nvec3 agxDefaultContrastApprox( vec3 x ) {\n\tvec3 x2 = x * x;\n\tvec3 x4 = x2 * x2;\n\treturn + 15.5 * x4 * x2\n\t\t- 40.14 * x4 * x\n\t\t+ 31.96 * x4\n\t\t- 6.868 * x2 * x\n\t\t+ 0.4298 * x2\n\t\t+ 0.1191 * x\n\t\t- 0.00232;\n}\nvec3 AgXToneMapping( vec3 color ) {\n\tconst mat3 AgXInsetMatrix = mat3(\n\t\tvec3( 0.856627153315983, 0.137318972929847, 0.11189821299995 ),\n\t\tvec3( 0.0951212405381588, 0.761241990602591, 0.0767994186031903 ),\n\t\tvec3( 0.0482516061458583, 0.101439036467562, 0.811302368396859 )\n\t);\n\tconst mat3 AgXOutsetMatrix = mat3(\n\t\tvec3( 1.1271005818144368, - 0.1413297634984383, - 0.14132976349843826 ),\n\t\tvec3( - 0.11060664309660323, 1.157823702216272, - 0.11060664309660294 ),\n\t\tvec3( - 0.016493938717834573, - 0.016493938717834257, 1.2519364065950405 )\n\t);\n\tconst float AgxMinEv = - 12.47393;\tconst float AgxMaxEv = 4.026069;\n\tcolor *= toneMappingExposure;\n\tcolor = LINEAR_SRGB_TO_LINEAR_REC2020 * color;\n\tcolor = AgXInsetMatrix * color;\n\tcolor = max( color, 1e-10 );\tcolor = log2( color );\n\tcolor = ( color - AgxMinEv ) / ( AgxMaxEv - AgxMinEv );\n\tcolor = clamp( color, 0.0, 1.0 );\n\tcolor = agxDefaultContrastApprox( color );\n\tcolor = AgXOutsetMatrix * color;\n\tcolor = pow( max( vec3( 0.0 ), color ), vec3( 2.2 ) );\n\tcolor = LINEAR_REC2020_TO_LINEAR_SRGB * color;\n\tcolor = clamp( color, 0.0, 1.0 );\n\treturn color;\n}\nvec3 NeutralToneMapping( vec3 color ) {\n\tconst float StartCompression = 0.8 - 0.04;\n\tconst float Desaturation = 0.15;\n\tcolor *= toneMappingExposure;\n\tfloat x = min( color.r, min( color.g, color.b ) );\n\tfloat offset = x < 0.08 ? x - 6.25 * x * x : 0.04;\n\tcolor -= offset;\n\tfloat peak = max( color.r, max( color.g, color.b ) );\n\tif ( peak < StartCompression ) return color;\n\tfloat d = 1. - StartCompression;\n\tfloat newPeak = 1. - d * d / ( peak + d - StartCompression );\n\tcolor *= newPeak / peak;\n\tfloat g = 1. - 1. / ( Desaturation * ( peak - newPeak ) + 1. );\n\treturn mix( color, vec3( newPeak ), g );\n}\nvec3 CustomToneMapping( vec3 color ) { return color; }",transmission_fragment:"#ifdef USE_TRANSMISSION\n\tmaterial.transmission = transmission;\n\tmaterial.transmissionAlpha = 1.0;\n\tmaterial.thickness = thickness;\n\tmaterial.attenuationDistance = attenuationDistance;\n\tmaterial.attenuationColor = attenuationColor;\n\t#ifdef USE_TRANSMISSIONMAP\n\t\tmaterial.transmission *= texture2D( transmissionMap, vTransmissionMapUv ).r;\n\t#endif\n\t#ifdef USE_THICKNESSMAP\n\t\tmaterial.thickness *= texture2D( thicknessMap, vThicknessMapUv ).g;\n\t#endif\n\tvec3 pos = vWorldPosition;\n\tvec3 v = normalize( cameraPosition - pos );\n\tvec3 n = inverseTransformDirection( normal, viewMatrix );\n\tvec4 transmitted = getIBLVolumeRefraction(\n\t\tn, v, material.roughness, material.diffuseColor, material.specularColor, material.specularF90,\n\t\tpos, modelMatrix, viewMatrix, projectionMatrix, material.dispersion, material.ior, material.thickness,\n\t\tmaterial.attenuationColor, material.attenuationDistance );\n\tmaterial.transmissionAlpha = mix( material.transmissionAlpha, transmitted.a, material.transmission );\n\ttotalDiffuse = mix( totalDiffuse, transmitted.rgb, material.transmission );\n#endif",transmission_pars_fragment:"#ifdef USE_TRANSMISSION\n\tuniform float transmission;\n\tuniform float thickness;\n\tuniform float attenuationDistance;\n\tuniform vec3 attenuationColor;\n\t#ifdef USE_TRANSMISSIONMAP\n\t\tuniform sampler2D transmissionMap;\n\t#endif\n\t#ifdef USE_THICKNESSMAP\n\t\tuniform sampler2D thicknessMap;\n\t#endif\n\tuniform vec2 transmissionSamplerSize;\n\tuniform sampler2D transmissionSamplerMap;\n\tuniform mat4 modelMatrix;\n\tuniform mat4 projectionMatrix;\n\tvarying vec3 vWorldPosition;\n\tfloat w0( float a ) {\n\t\treturn ( 1.0 / 6.0 ) * ( a * ( a * ( - a + 3.0 ) - 3.0 ) + 1.0 );\n\t}\n\tfloat w1( float a ) {\n\t\treturn ( 1.0 / 6.0 ) * ( a *  a * ( 3.0 * a - 6.0 ) + 4.0 );\n\t}\n\tfloat w2( float a ){\n\t\treturn ( 1.0 / 6.0 ) * ( a * ( a * ( - 3.0 * a + 3.0 ) + 3.0 ) + 1.0 );\n\t}\n\tfloat w3( float a ) {\n\t\treturn ( 1.0 / 6.0 ) * ( a * a * a );\n\t}\n\tfloat g0( float a ) {\n\t\treturn w0( a ) + w1( a );\n\t}\n\tfloat g1( float a ) {\n\t\treturn w2( a ) + w3( a );\n\t}\n\tfloat h0( float a ) {\n\t\treturn - 1.0 + w1( a ) / ( w0( a ) + w1( a ) );\n\t}\n\tfloat h1( float a ) {\n\t\treturn 1.0 + w3( a ) / ( w2( a ) + w3( a ) );\n\t}\n\tvec4 bicubic( sampler2D tex, vec2 uv, vec4 texelSize, float lod ) {\n\t\tuv = uv * texelSize.zw + 0.5;\n\t\tvec2 iuv = floor( uv );\n\t\tvec2 fuv = fract( uv );\n\t\tfloat g0x = g0( fuv.x );\n\t\tfloat g1x = g1( fuv.x );\n\t\tfloat h0x = h0( fuv.x );\n\t\tfloat h1x = h1( fuv.x );\n\t\tfloat h0y = h0( fuv.y );\n\t\tfloat h1y = h1( fuv.y );\n\t\tvec2 p0 = ( vec2( iuv.x + h0x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;\n\t\tvec2 p1 = ( vec2( iuv.x + h1x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;\n\t\tvec2 p2 = ( vec2( iuv.x + h0x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;\n\t\tvec2 p3 = ( vec2( iuv.x + h1x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;\n\t\treturn g0( fuv.y ) * ( g0x * textureLod( tex, p0, lod ) + g1x * textureLod( tex, p1, lod ) ) +\n\t\t\tg1( fuv.y ) * ( g0x * textureLod( tex, p2, lod ) + g1x * textureLod( tex, p3, lod ) );\n\t}\n\tvec4 textureBicubic( sampler2D sampler, vec2 uv, float lod ) {\n\t\tvec2 fLodSize = vec2( textureSize( sampler, int( lod ) ) );\n\t\tvec2 cLodSize = vec2( textureSize( sampler, int( lod + 1.0 ) ) );\n\t\tvec2 fLodSizeInv = 1.0 / fLodSize;\n\t\tvec2 cLodSizeInv = 1.0 / cLodSize;\n\t\tvec4 fSample = bicubic( sampler, uv, vec4( fLodSizeInv, fLodSize ), floor( lod ) );\n\t\tvec4 cSample = bicubic( sampler, uv, vec4( cLodSizeInv, cLodSize ), ceil( lod ) );\n\t\treturn mix( fSample, cSample, fract( lod ) );\n\t}\n\tvec3 getVolumeTransmissionRay( const in vec3 n, const in vec3 v, const in float thickness, const in float ior, const in mat4 modelMatrix ) {\n\t\tvec3 refractionVector = refract( - v, normalize( n ), 1.0 / ior );\n\t\tvec3 modelScale;\n\t\tmodelScale.x = length( vec3( modelMatrix[ 0 ].xyz ) );\n\t\tmodelScale.y = length( vec3( modelMatrix[ 1 ].xyz ) );\n\t\tmodelScale.z = length( vec3( modelMatrix[ 2 ].xyz ) );\n\t\treturn normalize( refractionVector ) * thickness * modelScale;\n\t}\n\tfloat applyIorToRoughness( const in float roughness, const in float ior ) {\n\t\treturn roughness * clamp( ior * 2.0 - 2.0, 0.0, 1.0 );\n\t}\n\tvec4 getTransmissionSample( const in vec2 fragCoord, const in float roughness, const in float ior ) {\n\t\tfloat lod = log2( transmissionSamplerSize.x ) * applyIorToRoughness( roughness, ior );\n\t\treturn textureBicubic( transmissionSamplerMap, fragCoord.xy, lod );\n\t}\n\tvec3 volumeAttenuation( const in float transmissionDistance, const in vec3 attenuationColor, const in float attenuationDistance ) {\n\t\tif ( isinf( attenuationDistance ) ) {\n\t\t\treturn vec3( 1.0 );\n\t\t} else {\n\t\t\tvec3 attenuationCoefficient = -log( attenuationColor ) / attenuationDistance;\n\t\t\tvec3 transmittance = exp( - attenuationCoefficient * transmissionDistance );\t\t\treturn transmittance;\n\t\t}\n\t}\n\tvec4 getIBLVolumeRefraction( const in vec3 n, const in vec3 v, const in float roughness, const in vec3 diffuseColor,\n\t\tconst in vec3 specularColor, const in float specularF90, const in vec3 position, const in mat4 modelMatrix,\n\t\tconst in mat4 viewMatrix, const in mat4 projMatrix, const in float dispersion, const in float ior, const in float thickness,\n\t\tconst in vec3 attenuationColor, const in float attenuationDistance ) {\n\t\tvec4 transmittedLight;\n\t\tvec3 transmittance;\n\t\t#ifdef USE_DISPERSION\n\t\t\tfloat halfSpread = ( ior - 1.0 ) * 0.025 * dispersion;\n\t\t\tvec3 iors = vec3( ior - halfSpread, ior, ior + halfSpread );\n\t\t\tfor ( int i = 0; i < 3; i ++ ) {\n\t\t\t\tvec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, iors[ i ], modelMatrix );\n\t\t\t\tvec3 refractedRayExit = position + transmissionRay;\n\t\t\t\tvec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );\n\t\t\t\tvec2 refractionCoords = ndcPos.xy / ndcPos.w;\n\t\t\t\trefractionCoords += 1.0;\n\t\t\t\trefractionCoords /= 2.0;\n\t\t\t\tvec4 transmissionSample = getTransmissionSample( refractionCoords, roughness, iors[ i ] );\n\t\t\t\ttransmittedLight[ i ] = transmissionSample[ i ];\n\t\t\t\ttransmittedLight.a += transmissionSample.a;\n\t\t\t\ttransmittance[ i ] = diffuseColor[ i ] * volumeAttenuation( length( transmissionRay ), attenuationColor, attenuationDistance )[ i ];\n\t\t\t}\n\t\t\ttransmittedLight.a /= 3.0;\n\t\t#else\n\t\t\tvec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, ior, modelMatrix );\n\t\t\tvec3 refractedRayExit = position + transmissionRay;\n\t\t\tvec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );\n\t\t\tvec2 refractionCoords = ndcPos.xy / ndcPos.w;\n\t\t\trefractionCoords += 1.0;\n\t\t\trefractionCoords /= 2.0;\n\t\t\ttransmittedLight = getTransmissionSample( refractionCoords, roughness, ior );\n\t\t\ttransmittance = diffuseColor * volumeAttenuation( length( transmissionRay ), attenuationColor, attenuationDistance );\n\t\t#endif\n\t\tvec3 attenuatedColor = transmittance * transmittedLight.rgb;\n\t\tvec3 F = EnvironmentBRDF( n, v, specularColor, specularF90, roughness );\n\t\tfloat transmittanceFactor = ( transmittance.r + transmittance.g + transmittance.b ) / 3.0;\n\t\treturn vec4( ( 1.0 - F ) * attenuatedColor, 1.0 - ( 1.0 - transmittedLight.a ) * transmittanceFactor );\n\t}\n#endif",uv_pars_fragment:"#if defined( USE_UV ) || defined( USE_ANISOTROPY )\n\tvarying vec2 vUv;\n#endif\n#ifdef USE_MAP\n\tvarying vec2 vMapUv;\n#endif\n#ifdef USE_ALPHAMAP\n\tvarying vec2 vAlphaMapUv;\n#endif\n#ifdef USE_LIGHTMAP\n\tvarying vec2 vLightMapUv;\n#endif\n#ifdef USE_AOMAP\n\tvarying vec2 vAoMapUv;\n#endif\n#ifdef USE_BUMPMAP\n\tvarying vec2 vBumpMapUv;\n#endif\n#ifdef USE_NORMALMAP\n\tvarying vec2 vNormalMapUv;\n#endif\n#ifdef USE_EMISSIVEMAP\n\tvarying vec2 vEmissiveMapUv;\n#endif\n#ifdef USE_METALNESSMAP\n\tvarying vec2 vMetalnessMapUv;\n#endif\n#ifdef USE_ROUGHNESSMAP\n\tvarying vec2 vRoughnessMapUv;\n#endif\n#ifdef USE_ANISOTROPYMAP\n\tvarying vec2 vAnisotropyMapUv;\n#endif\n#ifdef USE_CLEARCOATMAP\n\tvarying vec2 vClearcoatMapUv;\n#endif\n#ifdef USE_CLEARCOAT_NORMALMAP\n\tvarying vec2 vClearcoatNormalMapUv;\n#endif\n#ifdef USE_CLEARCOAT_ROUGHNESSMAP\n\tvarying vec2 vClearcoatRoughnessMapUv;\n#endif\n#ifdef USE_IRIDESCENCEMAP\n\tvarying vec2 vIridescenceMapUv;\n#endif\n#ifdef USE_IRIDESCENCE_THICKNESSMAP\n\tvarying vec2 vIridescenceThicknessMapUv;\n#endif\n#ifdef USE_SHEEN_COLORMAP\n\tvarying vec2 vSheenColorMapUv;\n#endif\n#ifdef USE_SHEEN_ROUGHNESSMAP\n\tvarying vec2 vSheenRoughnessMapUv;\n#endif\n#ifdef USE_SPECULARMAP\n\tvarying vec2 vSpecularMapUv;\n#endif\n#ifdef USE_SPECULAR_COLORMAP\n\tvarying vec2 vSpecularColorMapUv;\n#endif\n#ifdef USE_SPECULAR_INTENSITYMAP\n\tvarying vec2 vSpecularIntensityMapUv;\n#endif\n#ifdef USE_TRANSMISSIONMAP\n\tuniform mat3 transmissionMapTransform;\n\tvarying vec2 vTransmissionMapUv;\n#endif\n#ifdef USE_THICKNESSMAP\n\tuniform mat3 thicknessMapTransform;\n\tvarying vec2 vThicknessMapUv;\n#endif",uv_pars_vertex:"#if defined( USE_UV ) || defined( USE_ANISOTROPY )\n\tvarying vec2 vUv;\n#endif\n#ifdef USE_MAP\n\tuniform mat3 mapTransform;\n\tvarying vec2 vMapUv;\n#endif\n#ifdef USE_ALPHAMAP\n\tuniform mat3 alphaMapTransform;\n\tvarying vec2 vAlphaMapUv;\n#endif\n#ifdef USE_LIGHTMAP\n\tuniform mat3 lightMapTransform;\n\tvarying vec2 vLightMapUv;\n#endif\n#ifdef USE_AOMAP\n\tuniform mat3 aoMapTransform;\n\tvarying vec2 vAoMapUv;\n#endif\n#ifdef USE_BUMPMAP\n\tuniform mat3 bumpMapTransform;\n\tvarying vec2 vBumpMapUv;\n#endif\n#ifdef USE_NORMALMAP\n\tuniform mat3 normalMapTransform;\n\tvarying vec2 vNormalMapUv;\n#endif\n#ifdef USE_DISPLACEMENTMAP\n\tuniform mat3 displacementMapTransform;\n\tvarying vec2 vDisplacementMapUv;\n#endif\n#ifdef USE_EMISSIVEMAP\n\tuniform mat3 emissiveMapTransform;\n\tvarying vec2 vEmissiveMapUv;\n#endif\n#ifdef USE_METALNESSMAP\n\tuniform mat3 metalnessMapTransform;\n\tvarying vec2 vMetalnessMapUv;\n#endif\n#ifdef USE_ROUGHNESSMAP\n\tuniform mat3 roughnessMapTransform;\n\tvarying vec2 vRoughnessMapUv;\n#endif\n#ifdef USE_ANISOTROPYMAP\n\tuniform mat3 anisotropyMapTransform;\n\tvarying vec2 vAnisotropyMapUv;\n#endif\n#ifdef USE_CLEARCOATMAP\n\tuniform mat3 clearcoatMapTransform;\n\tvarying vec2 vClearcoatMapUv;\n#endif\n#ifdef USE_CLEARCOAT_NORMALMAP\n\tuniform mat3 clearcoatNormalMapTransform;\n\tvarying vec2 vClearcoatNormalMapUv;\n#endif\n#ifdef USE_CLEARCOAT_ROUGHNESSMAP\n\tuniform mat3 clearcoatRoughnessMapTransform;\n\tvarying vec2 vClearcoatRoughnessMapUv;\n#endif\n#ifdef USE_SHEEN_COLORMAP\n\tuniform mat3 sheenColorMapTransform;\n\tvarying vec2 vSheenColorMapUv;\n#endif\n#ifdef USE_SHEEN_ROUGHNESSMAP\n\tuniform mat3 sheenRoughnessMapTransform;\n\tvarying vec2 vSheenRoughnessMapUv;\n#endif\n#ifdef USE_IRIDESCENCEMAP\n\tuniform mat3 iridescenceMapTransform;\n\tvarying vec2 vIridescenceMapUv;\n#endif\n#ifdef USE_IRIDESCENCE_THICKNESSMAP\n\tuniform mat3 iridescenceThicknessMapTransform;\n\tvarying vec2 vIridescenceThicknessMapUv;\n#endif\n#ifdef USE_SPECULARMAP\n\tuniform mat3 specularMapTransform;\n\tvarying vec2 vSpecularMapUv;\n#endif\n#ifdef USE_SPECULAR_COLORMAP\n\tuniform mat3 specularColorMapTransform;\n\tvarying vec2 vSpecularColorMapUv;\n#endif\n#ifdef USE_SPECULAR_INTENSITYMAP\n\tuniform mat3 specularIntensityMapTransform;\n\tvarying vec2 vSpecularIntensityMapUv;\n#endif\n#ifdef USE_TRANSMISSIONMAP\n\tuniform mat3 transmissionMapTransform;\n\tvarying vec2 vTransmissionMapUv;\n#endif\n#ifdef USE_THICKNESSMAP\n\tuniform mat3 thicknessMapTransform;\n\tvarying vec2 vThicknessMapUv;\n#endif",uv_vertex:"#if defined( USE_UV ) || defined( USE_ANISOTROPY )\n\tvUv = vec3( uv, 1 ).xy;\n#endif\n#ifdef USE_MAP\n\tvMapUv = ( mapTransform * vec3( MAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_ALPHAMAP\n\tvAlphaMapUv = ( alphaMapTransform * vec3( ALPHAMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_LIGHTMAP\n\tvLightMapUv = ( lightMapTransform * vec3( LIGHTMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_AOMAP\n\tvAoMapUv = ( aoMapTransform * vec3( AOMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_BUMPMAP\n\tvBumpMapUv = ( bumpMapTransform * vec3( BUMPMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_NORMALMAP\n\tvNormalMapUv = ( normalMapTransform * vec3( NORMALMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_DISPLACEMENTMAP\n\tvDisplacementMapUv = ( displacementMapTransform * vec3( DISPLACEMENTMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_EMISSIVEMAP\n\tvEmissiveMapUv = ( emissiveMapTransform * vec3( EMISSIVEMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_METALNESSMAP\n\tvMetalnessMapUv = ( metalnessMapTransform * vec3( METALNESSMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_ROUGHNESSMAP\n\tvRoughnessMapUv = ( roughnessMapTransform * vec3( ROUGHNESSMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_ANISOTROPYMAP\n\tvAnisotropyMapUv = ( anisotropyMapTransform * vec3( ANISOTROPYMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_CLEARCOATMAP\n\tvClearcoatMapUv = ( clearcoatMapTransform * vec3( CLEARCOATMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_CLEARCOAT_NORMALMAP\n\tvClearcoatNormalMapUv = ( clearcoatNormalMapTransform * vec3( CLEARCOAT_NORMALMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_CLEARCOAT_ROUGHNESSMAP\n\tvClearcoatRoughnessMapUv = ( clearcoatRoughnessMapTransform * vec3( CLEARCOAT_ROUGHNESSMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_IRIDESCENCEMAP\n\tvIridescenceMapUv = ( iridescenceMapTransform * vec3( IRIDESCENCEMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_IRIDESCENCE_THICKNESSMAP\n\tvIridescenceThicknessMapUv = ( iridescenceThicknessMapTransform * vec3( IRIDESCENCE_THICKNESSMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_SHEEN_COLORMAP\n\tvSheenColorMapUv = ( sheenColorMapTransform * vec3( SHEEN_COLORMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_SHEEN_ROUGHNESSMAP\n\tvSheenRoughnessMapUv = ( sheenRoughnessMapTransform * vec3( SHEEN_ROUGHNESSMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_SPECULARMAP\n\tvSpecularMapUv = ( specularMapTransform * vec3( SPECULARMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_SPECULAR_COLORMAP\n\tvSpecularColorMapUv = ( specularColorMapTransform * vec3( SPECULAR_COLORMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_SPECULAR_INTENSITYMAP\n\tvSpecularIntensityMapUv = ( specularIntensityMapTransform * vec3( SPECULAR_INTENSITYMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_TRANSMISSIONMAP\n\tvTransmissionMapUv = ( transmissionMapTransform * vec3( TRANSMISSIONMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_THICKNESSMAP\n\tvThicknessMapUv = ( thicknessMapTransform * vec3( THICKNESSMAP_UV, 1 ) ).xy;\n#endif",worldpos_vertex:"#if defined( USE_ENVMAP ) || defined( DISTANCE ) || defined ( USE_SHADOWMAP ) || defined ( USE_TRANSMISSION ) || NUM_SPOT_LIGHT_COORDS > 0\n\tvec4 worldPosition = vec4( transformed, 1.0 );\n\t#ifdef USE_BATCHING\n\t\tworldPosition = batchingMatrix * worldPosition;\n\t#endif\n\t#ifdef USE_INSTANCING\n\t\tworldPosition = instanceMatrix * worldPosition;\n\t#endif\n\tworldPosition = modelMatrix * worldPosition;\n#endif",background_vert:"varying vec2 vUv;\nuniform mat3 uvTransform;\nvoid main() {\n\tvUv = ( uvTransform * vec3( uv, 1 ) ).xy;\n\tgl_Position = vec4( position.xy, 1.0, 1.0 );\n}",background_frag:"uniform sampler2D t2D;\nuniform float backgroundIntensity;\nvarying vec2 vUv;\nvoid main() {\n\tvec4 texColor = texture2D( t2D, vUv );\n\t#ifdef DECODE_VIDEO_TEXTURE\n\t\ttexColor = vec4( mix( pow( texColor.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), texColor.rgb * 0.0773993808, vec3( lessThanEqual( texColor.rgb, vec3( 0.04045 ) ) ) ), texColor.w );\n\t#endif\n\ttexColor.rgb *= backgroundIntensity;\n\tgl_FragColor = texColor;\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n}",backgroundCube_vert:"varying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvWorldDirection = transformDirection( position, modelMatrix );\n\t#include <begin_vertex>\n\t#include <project_vertex>\n\tgl_Position.z = gl_Position.w;\n}",backgroundCube_frag:"#ifdef ENVMAP_TYPE_CUBE\n\tuniform samplerCube envMap;\n#elif defined( ENVMAP_TYPE_CUBE_UV )\n\tuniform sampler2D envMap;\n#endif\nuniform float flipEnvMap;\nuniform float backgroundBlurriness;\nuniform float backgroundIntensity;\nuniform mat3 backgroundRotation;\nvarying vec3 vWorldDirection;\n#include <cube_uv_reflection_fragment>\nvoid main() {\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tvec4 texColor = textureCube( envMap, backgroundRotation * vec3( flipEnvMap * vWorldDirection.x, vWorldDirection.yz ) );\n\t#elif defined( ENVMAP_TYPE_CUBE_UV )\n\t\tvec4 texColor = textureCubeUV( envMap, backgroundRotation * vWorldDirection, backgroundBlurriness );\n\t#else\n\t\tvec4 texColor = vec4( 0.0, 0.0, 0.0, 1.0 );\n\t#endif\n\ttexColor.rgb *= backgroundIntensity;\n\tgl_FragColor = texColor;\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n}",cube_vert:"varying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvWorldDirection = transformDirection( position, modelMatrix );\n\t#include <begin_vertex>\n\t#include <project_vertex>\n\tgl_Position.z = gl_Position.w;\n}",cube_frag:"uniform samplerCube tCube;\nuniform float tFlip;\nuniform float opacity;\nvarying vec3 vWorldDirection;\nvoid main() {\n\tvec4 texColor = textureCube( tCube, vec3( tFlip * vWorldDirection.x, vWorldDirection.yz ) );\n\tgl_FragColor = texColor;\n\tgl_FragColor.a *= opacity;\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n}",depth_vert:"#include <common>\n#include <batching_pars_vertex>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvarying vec2 vHighPrecisionZW;\nvoid main() {\n\t#include <uv_vertex>\n\t#include <batching_vertex>\n\t#include <skinbase_vertex>\n\t#include <morphinstance_vertex>\n\t#ifdef USE_DISPLACEMENTMAP\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvHighPrecisionZW = gl_Position.zw;\n}",depth_frag:"#if DEPTH_PACKING == 3200\n\tuniform float opacity;\n#endif\n#include <common>\n#include <packing>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <alphahash_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvarying vec2 vHighPrecisionZW;\nvoid main() {\n\tvec4 diffuseColor = vec4( 1.0 );\n\t#include <clipping_planes_fragment>\n\t#if DEPTH_PACKING == 3200\n\t\tdiffuseColor.a = opacity;\n\t#endif\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <alphahash_fragment>\n\t#include <logdepthbuf_fragment>\n\tfloat fragCoordZ = 0.5 * vHighPrecisionZW[0] / vHighPrecisionZW[1] + 0.5;\n\t#if DEPTH_PACKING == 3200\n\t\tgl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity );\n\t#elif DEPTH_PACKING == 3201\n\t\tgl_FragColor = packDepthToRGBA( fragCoordZ );\n\t#elif DEPTH_PACKING == 3202\n\t\tgl_FragColor = vec4( packDepthToRGB( fragCoordZ ), 1.0 );\n\t#elif DEPTH_PACKING == 3203\n\t\tgl_FragColor = vec4( packDepthToRG( fragCoordZ ), 0.0, 1.0 );\n\t#endif\n}",distanceRGBA_vert:"#define DISTANCE\nvarying vec3 vWorldPosition;\n#include <common>\n#include <batching_pars_vertex>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <batching_vertex>\n\t#include <skinbase_vertex>\n\t#include <morphinstance_vertex>\n\t#ifdef USE_DISPLACEMENTMAP\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <worldpos_vertex>\n\t#include <clipping_planes_vertex>\n\tvWorldPosition = worldPosition.xyz;\n}",distanceRGBA_frag:"#define DISTANCE\nuniform vec3 referencePosition;\nuniform float nearDistance;\nuniform float farDistance;\nvarying vec3 vWorldPosition;\n#include <common>\n#include <packing>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <alphahash_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main () {\n\tvec4 diffuseColor = vec4( 1.0 );\n\t#include <clipping_planes_fragment>\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <alphahash_fragment>\n\tfloat dist = length( vWorldPosition - referencePosition );\n\tdist = ( dist - nearDistance ) / ( farDistance - nearDistance );\n\tdist = saturate( dist );\n\tgl_FragColor = packDepthToRGBA( dist );\n}",equirect_vert:"varying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvWorldDirection = transformDirection( position, modelMatrix );\n\t#include <begin_vertex>\n\t#include <project_vertex>\n}",equirect_frag:"uniform sampler2D tEquirect;\nvarying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvec3 direction = normalize( vWorldDirection );\n\tvec2 sampleUV = equirectUv( direction );\n\tgl_FragColor = texture2D( tEquirect, sampleUV );\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n}",linedashed_vert:"uniform float scale;\nattribute float lineDistance;\nvarying float vLineDistance;\n#include <common>\n#include <uv_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\tvLineDistance = scale * lineDistance;\n\t#include <uv_vertex>\n\t#include <color_vertex>\n\t#include <morphinstance_vertex>\n\t#include <morphcolor_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n}",linedashed_frag:"uniform vec3 diffuse;\nuniform float opacity;\nuniform float dashSize;\nuniform float totalSize;\nvarying float vLineDistance;\n#include <common>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <clipping_planes_fragment>\n\tif ( mod( vLineDistance, totalSize ) > dashSize ) {\n\t\tdiscard;\n\t}\n\tvec3 outgoingLight = vec3( 0.0 );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\t#include <opaque_fragment>\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n}",meshbasic_vert:"#include <common>\n#include <batching_pars_vertex>\n#include <uv_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <color_vertex>\n\t#include <morphinstance_vertex>\n\t#include <morphcolor_vertex>\n\t#include <batching_vertex>\n\t#if defined ( USE_ENVMAP ) || defined ( USE_SKINNING )\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinbase_vertex>\n\t\t#include <skinnormal_vertex>\n\t\t#include <defaultnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <fog_vertex>\n}",meshbasic_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <alphahash_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <clipping_planes_fragment>\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <alphahash_fragment>\n\t#include <specularmap_fragment>\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\t#ifdef USE_LIGHTMAP\n\t\tvec4 lightMapTexel = texture2D( lightMap, vLightMapUv );\n\t\treflectedLight.indirectDiffuse += lightMapTexel.rgb * lightMapIntensity * RECIPROCAL_PI;\n\t#else\n\t\treflectedLight.indirectDiffuse += vec3( 1.0 );\n\t#endif\n\t#include <aomap_fragment>\n\treflectedLight.indirectDiffuse *= diffuseColor.rgb;\n\tvec3 outgoingLight = reflectedLight.indirectDiffuse;\n\t#include <envmap_fragment>\n\t#include <opaque_fragment>\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshlambert_vert:"#define LAMBERT\nvarying vec3 vViewPosition;\n#include <common>\n#include <batching_pars_vertex>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <color_vertex>\n\t#include <morphinstance_vertex>\n\t#include <morphcolor_vertex>\n\t#include <batching_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",meshlambert_frag:"#define LAMBERT\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <alphahash_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <normal_pars_fragment>\n#include <lights_lambert_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <clipping_planes_fragment>\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <alphahash_fragment>\n\t#include <specularmap_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_lambert_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;\n\t#include <envmap_fragment>\n\t#include <opaque_fragment>\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshmatcap_vert:"#define MATCAP\nvarying vec3 vViewPosition;\n#include <common>\n#include <batching_pars_vertex>\n#include <uv_pars_vertex>\n#include <color_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <color_vertex>\n\t#include <morphinstance_vertex>\n\t#include <morphcolor_vertex>\n\t#include <batching_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n\tvViewPosition = - mvPosition.xyz;\n}",meshmatcap_frag:"#define MATCAP\nuniform vec3 diffuse;\nuniform float opacity;\nuniform sampler2D matcap;\nvarying vec3 vViewPosition;\n#include <common>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <alphahash_pars_fragment>\n#include <fog_pars_fragment>\n#include <normal_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <clipping_planes_fragment>\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <alphahash_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\tvec3 viewDir = normalize( vViewPosition );\n\tvec3 x = normalize( vec3( viewDir.z, 0.0, - viewDir.x ) );\n\tvec3 y = cross( viewDir, x );\n\tvec2 uv = vec2( dot( x, normal ), dot( y, normal ) ) * 0.495 + 0.5;\n\t#ifdef USE_MATCAP\n\t\tvec4 matcapColor = texture2D( matcap, uv );\n\t#else\n\t\tvec4 matcapColor = vec4( vec3( mix( 0.2, 0.8, uv.y ) ), 1.0 );\n\t#endif\n\tvec3 outgoingLight = diffuseColor.rgb * matcapColor.rgb;\n\t#include <opaque_fragment>\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshnormal_vert:"#define NORMAL\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )\n\tvarying vec3 vViewPosition;\n#endif\n#include <common>\n#include <batching_pars_vertex>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <batching_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphinstance_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )\n\tvViewPosition = - mvPosition.xyz;\n#endif\n}",meshnormal_frag:"#define NORMAL\nuniform float opacity;\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )\n\tvarying vec3 vViewPosition;\n#endif\n#include <packing>\n#include <uv_pars_fragment>\n#include <normal_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\tvec4 diffuseColor = vec4( 0.0, 0.0, 0.0, opacity );\n\t#include <clipping_planes_fragment>\n\t#include <logdepthbuf_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\tgl_FragColor = vec4( packNormalToRGB( normal ), diffuseColor.a );\n\t#ifdef OPAQUE\n\t\tgl_FragColor.a = 1.0;\n\t#endif\n}",meshphong_vert:"#define PHONG\nvarying vec3 vViewPosition;\n#include <common>\n#include <batching_pars_vertex>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <batching_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphinstance_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",meshphong_frag:"#define PHONG\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform vec3 specular;\nuniform float shininess;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <alphahash_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <normal_pars_fragment>\n#include <lights_phong_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <clipping_planes_fragment>\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <alphahash_fragment>\n\t#include <specularmap_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_phong_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;\n\t#include <envmap_fragment>\n\t#include <opaque_fragment>\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshphysical_vert:"#define STANDARD\nvarying vec3 vViewPosition;\n#ifdef USE_TRANSMISSION\n\tvarying vec3 vWorldPosition;\n#endif\n#include <common>\n#include <batching_pars_vertex>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <color_vertex>\n\t#include <morphinstance_vertex>\n\t#include <morphcolor_vertex>\n\t#include <batching_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n#ifdef USE_TRANSMISSION\n\tvWorldPosition = worldPosition.xyz;\n#endif\n}",meshphysical_frag:"#define STANDARD\n#ifdef PHYSICAL\n\t#define IOR\n\t#define USE_SPECULAR\n#endif\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float roughness;\nuniform float metalness;\nuniform float opacity;\n#ifdef IOR\n\tuniform float ior;\n#endif\n#ifdef USE_SPECULAR\n\tuniform float specularIntensity;\n\tuniform vec3 specularColor;\n\t#ifdef USE_SPECULAR_COLORMAP\n\t\tuniform sampler2D specularColorMap;\n\t#endif\n\t#ifdef USE_SPECULAR_INTENSITYMAP\n\t\tuniform sampler2D specularIntensityMap;\n\t#endif\n#endif\n#ifdef USE_CLEARCOAT\n\tuniform float clearcoat;\n\tuniform float clearcoatRoughness;\n#endif\n#ifdef USE_DISPERSION\n\tuniform float dispersion;\n#endif\n#ifdef USE_IRIDESCENCE\n\tuniform float iridescence;\n\tuniform float iridescenceIOR;\n\tuniform float iridescenceThicknessMinimum;\n\tuniform float iridescenceThicknessMaximum;\n#endif\n#ifdef USE_SHEEN\n\tuniform vec3 sheenColor;\n\tuniform float sheenRoughness;\n\t#ifdef USE_SHEEN_COLORMAP\n\t\tuniform sampler2D sheenColorMap;\n\t#endif\n\t#ifdef USE_SHEEN_ROUGHNESSMAP\n\t\tuniform sampler2D sheenRoughnessMap;\n\t#endif\n#endif\n#ifdef USE_ANISOTROPY\n\tuniform vec2 anisotropyVector;\n\t#ifdef USE_ANISOTROPYMAP\n\t\tuniform sampler2D anisotropyMap;\n\t#endif\n#endif\nvarying vec3 vViewPosition;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <alphahash_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <iridescence_fragment>\n#include <cube_uv_reflection_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_physical_pars_fragment>\n#include <fog_pars_fragment>\n#include <lights_pars_begin>\n#include <normal_pars_fragment>\n#include <lights_physical_pars_fragment>\n#include <transmission_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <clearcoat_pars_fragment>\n#include <iridescence_pars_fragment>\n#include <roughnessmap_pars_fragment>\n#include <metalnessmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <clipping_planes_fragment>\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <alphahash_fragment>\n\t#include <roughnessmap_fragment>\n\t#include <metalnessmap_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <clearcoat_normal_fragment_begin>\n\t#include <clearcoat_normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_physical_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 totalDiffuse = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse;\n\tvec3 totalSpecular = reflectedLight.directSpecular + reflectedLight.indirectSpecular;\n\t#include <transmission_fragment>\n\tvec3 outgoingLight = totalDiffuse + totalSpecular + totalEmissiveRadiance;\n\t#ifdef USE_SHEEN\n\t\tfloat sheenEnergyComp = 1.0 - 0.157 * max3( material.sheenColor );\n\t\toutgoingLight = outgoingLight * sheenEnergyComp + sheenSpecularDirect + sheenSpecularIndirect;\n\t#endif\n\t#ifdef USE_CLEARCOAT\n\t\tfloat dotNVcc = saturate( dot( geometryClearcoatNormal, geometryViewDir ) );\n\t\tvec3 Fcc = F_Schlick( material.clearcoatF0, material.clearcoatF90, dotNVcc );\n\t\toutgoingLight = outgoingLight * ( 1.0 - material.clearcoat * Fcc ) + ( clearcoatSpecularDirect + clearcoatSpecularIndirect ) * material.clearcoat;\n\t#endif\n\t#include <opaque_fragment>\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshtoon_vert:"#define TOON\nvarying vec3 vViewPosition;\n#include <common>\n#include <batching_pars_vertex>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <color_vertex>\n\t#include <morphinstance_vertex>\n\t#include <morphcolor_vertex>\n\t#include <batching_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",meshtoon_frag:"#define TOON\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <alphahash_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <gradientmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <normal_pars_fragment>\n#include <lights_toon_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <clipping_planes_fragment>\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <alphahash_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_toon_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;\n\t#include <opaque_fragment>\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",points_vert:"uniform float size;\nuniform float scale;\n#include <common>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\n#ifdef USE_POINTS_UV\n\tvarying vec2 vUv;\n\tuniform mat3 uvTransform;\n#endif\nvoid main() {\n\t#ifdef USE_POINTS_UV\n\t\tvUv = ( uvTransform * vec3( uv, 1 ) ).xy;\n\t#endif\n\t#include <color_vertex>\n\t#include <morphinstance_vertex>\n\t#include <morphcolor_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <project_vertex>\n\tgl_PointSize = size;\n\t#ifdef USE_SIZEATTENUATION\n\t\tbool isPerspective = isPerspectiveMatrix( projectionMatrix );\n\t\tif ( isPerspective ) gl_PointSize *= ( scale / - mvPosition.z );\n\t#endif\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <worldpos_vertex>\n\t#include <fog_vertex>\n}",points_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#include <common>\n#include <color_pars_fragment>\n#include <map_particle_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <alphahash_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <clipping_planes_fragment>\n\tvec3 outgoingLight = vec3( 0.0 );\n\t#include <logdepthbuf_fragment>\n\t#include <map_particle_fragment>\n\t#include <color_fragment>\n\t#include <alphatest_fragment>\n\t#include <alphahash_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\t#include <opaque_fragment>\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n}",shadow_vert:"#include <common>\n#include <batching_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <shadowmap_pars_vertex>\nvoid main() {\n\t#include <batching_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphinstance_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",shadow_frag:"uniform vec3 color;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <logdepthbuf_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <shadowmask_pars_fragment>\nvoid main() {\n\t#include <logdepthbuf_fragment>\n\tgl_FragColor = vec4( color, opacity * ( 1.0 - getShadowMask() ) );\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n\t#include <fog_fragment>\n}",sprite_vert:"uniform float rotation;\nuniform vec2 center;\n#include <common>\n#include <uv_pars_vertex>\n#include <fog_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\tvec4 mvPosition = modelViewMatrix[ 3 ];\n\tvec2 scale = vec2( length( modelMatrix[ 0 ].xyz ), length( modelMatrix[ 1 ].xyz ) );\n\t#ifndef USE_SIZEATTENUATION\n\t\tbool isPerspective = isPerspectiveMatrix( projectionMatrix );\n\t\tif ( isPerspective ) scale *= - mvPosition.z;\n\t#endif\n\tvec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale;\n\tvec2 rotatedPosition;\n\trotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;\n\trotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;\n\tmvPosition.xy += rotatedPosition;\n\tgl_Position = projectionMatrix * mvPosition;\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n}",sprite_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#include <common>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <alphahash_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <clipping_planes_fragment>\n\tvec3 outgoingLight = vec3( 0.0 );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <alphahash_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\t#include <opaque_fragment>\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n\t#include <fog_fragment>\n}"},Nt={common:{diffuse:{value:new Zt(16777215)},opacity:{value:1},map:{value:null},mapTransform:{value:new Jn},alphaMap:{value:null},alphaMapTransform:{value:new Jn},alphaTest:{value:0}},specularmap:{specularMap:{value:null},specularMapTransform:{value:new Jn}},envmap:{envMap:{value:null},envMapRotation:{value:new Jn},flipEnvMap:{value:-1},reflectivity:{value:1},ior:{value:1.5},refractionRatio:{value:.98}},aomap:{aoMap:{value:null},aoMapIntensity:{value:1},aoMapTransform:{value:new Jn}},lightmap:{lightMap:{value:null},lightMapIntensity:{value:1},lightMapTransform:{value:new Jn}},bumpmap:{bumpMap:{value:null},bumpMapTransform:{value:new Jn},bumpScale:{value:1}},normalmap:{normalMap:{value:null},normalMapTransform:{value:new Jn},normalScale:{value:new et(1,1)}},displacementmap:{displacementMap:{value:null},displacementMapTransform:{value:new Jn},displacementScale:{value:1},displacementBias:{value:0}},emissivemap:{emissiveMap:{value:null},emissiveMapTransform:{value:new Jn}},metalnessmap:{metalnessMap:{value:null},metalnessMapTransform:{value:new Jn}},roughnessmap:{roughnessMap:{value:null},roughnessMapTransform:{value:new Jn}},gradientmap:{gradientMap:{value:null}},fog:{fogDensity:{value:25e-5},fogNear:{value:1},fogFar:{value:2e3},fogColor:{value:new Zt(16777215)}},lights:{ambientLightColor:{value:[]},lightProbe:{value:[]},directionalLights:{value:[],properties:{direction:{},color:{}}},directionalLightShadows:{value:[],properties:{shadowIntensity:1,shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},directionalShadowMap:{value:[]},directionalShadowMatrix:{value:[]},spotLights:{value:[],properties:{color:{},position:{},direction:{},distance:{},coneCos:{},penumbraCos:{},decay:{}}},spotLightShadows:{value:[],properties:{shadowIntensity:1,shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},spotLightMap:{value:[]},spotShadowMap:{value:[]},spotLightMatrix:{value:[]},pointLights:{value:[],properties:{color:{},position:{},decay:{},distance:{}}},pointLightShadows:{value:[],properties:{shadowIntensity:1,shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{},shadowCameraNear:{},shadowCameraFar:{}}},pointShadowMap:{value:[]},pointShadowMatrix:{value:[]},hemisphereLights:{value:[],properties:{direction:{},skyColor:{},groundColor:{}}},rectAreaLights:{value:[],properties:{color:{},position:{},width:{},height:{}}},ltc_1:{value:null},ltc_2:{value:null}},points:{diffuse:{value:new Zt(16777215)},opacity:{value:1},size:{value:1},scale:{value:1},map:{value:null},alphaMap:{value:null},alphaMapTransform:{value:new Jn},alphaTest:{value:0},uvTransform:{value:new Jn}},sprite:{diffuse:{value:new Zt(16777215)},opacity:{value:1},center:{value:new et(.5,.5)},rotation:{value:0},map:{value:null},mapTransform:{value:new Jn},alphaMap:{value:null},alphaMapTransform:{value:new Jn},alphaTest:{value:0}}},Dc={basic:{uniforms:Ko([Nt.common,Nt.specularmap,Nt.envmap,Nt.aomap,Nt.lightmap,Nt.fog]),vertexShader:ai.meshbasic_vert,fragmentShader:ai.meshbasic_frag},lambert:{uniforms:Ko([Nt.common,Nt.specularmap,Nt.envmap,Nt.aomap,Nt.lightmap,Nt.emissivemap,Nt.bumpmap,Nt.normalmap,Nt.displacementmap,Nt.fog,Nt.lights,{emissive:{value:new Zt(0)}}]),vertexShader:ai.meshlambert_vert,fragmentShader:ai.meshlambert_frag},phong:{uniforms:Ko([Nt.common,Nt.specularmap,Nt.envmap,Nt.aomap,Nt.lightmap,Nt.emissivemap,Nt.bumpmap,Nt.normalmap,Nt.displacementmap,Nt.fog,Nt.lights,{emissive:{value:new Zt(0)},specular:{value:new Zt(1118481)},shininess:{value:30}}]),vertexShader:ai.meshphong_vert,fragmentShader:ai.meshphong_frag},standard:{uniforms:Ko([Nt.common,Nt.envmap,Nt.aomap,Nt.lightmap,Nt.emissivemap,Nt.bumpmap,Nt.normalmap,Nt.displacementmap,Nt.roughnessmap,Nt.metalnessmap,Nt.fog,Nt.lights,{emissive:{value:new Zt(0)},roughness:{value:1},metalness:{value:0},envMapIntensity:{value:1}}]),vertexShader:ai.meshphysical_vert,fragmentShader:ai.meshphysical_frag},toon:{uniforms:Ko([Nt.common,Nt.aomap,Nt.lightmap,Nt.emissivemap,Nt.bumpmap,Nt.normalmap,Nt.displacementmap,Nt.gradientmap,Nt.fog,Nt.lights,{emissive:{value:new Zt(0)}}]),vertexShader:ai.meshtoon_vert,fragmentShader:ai.meshtoon_frag},matcap:{uniforms:Ko([Nt.common,Nt.bumpmap,Nt.normalmap,Nt.displacementmap,Nt.fog,{matcap:{value:null}}]),vertexShader:ai.meshmatcap_vert,fragmentShader:ai.meshmatcap_frag},points:{uniforms:Ko([Nt.points,Nt.fog]),vertexShader:ai.points_vert,fragmentShader:ai.points_frag},dashed:{uniforms:Ko([Nt.common,Nt.fog,{scale:{value:1},dashSize:{value:1},totalSize:{value:2}}]),vertexShader:ai.linedashed_vert,fragmentShader:ai.linedashed_frag},depth:{uniforms:Ko([Nt.common,Nt.displacementmap]),vertexShader:ai.depth_vert,fragmentShader:ai.depth_frag},normal:{uniforms:Ko([Nt.common,Nt.bumpmap,Nt.normalmap,Nt.displacementmap,{opacity:{value:1}}]),vertexShader:ai.meshnormal_vert,fragmentShader:ai.meshnormal_frag},sprite:{uniforms:Ko([Nt.sprite,Nt.fog]),vertexShader:ai.sprite_vert,fragmentShader:ai.sprite_frag},background:{uniforms:{uvTransform:{value:new Jn},t2D:{value:null},backgroundIntensity:{value:1}},vertexShader:ai.background_vert,fragmentShader:ai.background_frag},backgroundCube:{uniforms:{envMap:{value:null},flipEnvMap:{value:-1},backgroundBlurriness:{value:0},backgroundIntensity:{value:1},backgroundRotation:{value:new Jn}},vertexShader:ai.backgroundCube_vert,fragmentShader:ai.backgroundCube_frag},cube:{uniforms:{tCube:{value:null},tFlip:{value:-1},opacity:{value:1}},vertexShader:ai.cube_vert,fragmentShader:ai.cube_frag},equirect:{uniforms:{tEquirect:{value:null}},vertexShader:ai.equirect_vert,fragmentShader:ai.equirect_frag},distanceRGBA:{uniforms:Ko([Nt.common,Nt.displacementmap,{referencePosition:{value:new j},nearDistance:{value:1},farDistance:{value:1e3}}]),vertexShader:ai.distanceRGBA_vert,fragmentShader:ai.distanceRGBA_frag},shadow:{uniforms:Ko([Nt.lights,Nt.fog,{color:{value:new Zt(0)},opacity:{value:1}}]),vertexShader:ai.shadow_vert,fragmentShader:ai.shadow_frag}};Dc.physical={uniforms:Ko([Dc.standard.uniforms,{clearcoat:{value:0},clearcoatMap:{value:null},clearcoatMapTransform:{value:new Jn},clearcoatNormalMap:{value:null},clearcoatNormalMapTransform:{value:new Jn},clearcoatNormalScale:{value:new et(1,1)},clearcoatRoughness:{value:0},clearcoatRoughnessMap:{value:null},clearcoatRoughnessMapTransform:{value:new Jn},dispersion:{value:0},iridescence:{value:0},iridescenceMap:{value:null},iridescenceMapTransform:{value:new Jn},iridescenceIOR:{value:1.3},iridescenceThicknessMinimum:{value:100},iridescenceThicknessMaximum:{value:400},iridescenceThicknessMap:{value:null},iridescenceThicknessMapTransform:{value:new Jn},sheen:{value:0},sheenColor:{value:new Zt(0)},sheenColorMap:{value:null},sheenColorMapTransform:{value:new Jn},sheenRoughness:{value:1},sheenRoughnessMap:{value:null},sheenRoughnessMapTransform:{value:new Jn},transmission:{value:0},transmissionMap:{value:null},transmissionMapTransform:{value:new Jn},transmissionSamplerSize:{value:new et},transmissionSamplerMap:{value:null},thickness:{value:0},thicknessMap:{value:null},thicknessMapTransform:{value:new Jn},attenuationDistance:{value:0},attenuationColor:{value:new Zt(0)},specularColor:{value:new Zt(1,1,1)},specularColorMap:{value:null},specularColorMapTransform:{value:new Jn},specularIntensity:{value:1},specularIntensityMap:{value:null},specularIntensityMapTransform:{value:new Jn},anisotropyVector:{value:new et},anisotropyMap:{value:null},anisotropyMapTransform:{value:new Jn}}]),vertexShader:ai.meshphysical_vert,fragmentShader:ai.meshphysical_frag};const kI={r:0,b:0,g:0},_p=new Bu,qEe=new Un;function XEe(n,e,t,i,r,s,o){const a=new Zt(0);let c,u,l=!0===s?0:1,d=null,p=0,m=null;function v(S){let A=!0===S.isScene?S.background:null;return A&&A.isTexture&&(A=(S.backgroundBlurriness>0?t:e).get(A)),A}function w(S,A){S.getRGB(kI,F9(n)),i.buffers.color.setClear(kI.r,kI.g,kI.b,A,o)}return{getClearColor:function(){return a},setClearColor:function(S,A=1){a.set(S),l=A,w(a,l)},getClearAlpha:function(){return l},setClearAlpha:function(S){l=S,w(a,l)},render:function x(S){let A=!1;const V=v(S);null===V?w(a,l):V&&V.isColor&&(w(V,1),A=!0);const F=n.xr.getEnvironmentBlendMode();"additive"===F?i.buffers.color.setClear(0,0,0,1,o):"alpha-blend"===F&&i.buffers.color.setClear(0,0,0,0,o),(n.autoClear||A)&&(i.buffers.depth.setTest(!0),i.buffers.depth.setMask(!0),i.buffers.color.setMask(!0),n.clear(n.autoClearColor,n.autoClearDepth,n.autoClearStencil))},addToRenderList:function b(S,A){const V=v(A);V&&(V.isCubeTexture||V.mapping===Nb)?(void 0===u&&(u=new xs(new P_(1,1,1),new Ic({name:"BackgroundCubeMaterial",uniforms:k_(Dc.backgroundCube.uniforms),vertexShader:Dc.backgroundCube.vertexShader,fragmentShader:Dc.backgroundCube.fragmentShader,side:1,depthTest:!1,depthWrite:!1,fog:!1})),u.geometry.deleteAttribute("normal"),u.geometry.deleteAttribute("uv"),u.onBeforeRender=function(F,P,D){this.matrixWorld.copyPosition(D.matrixWorld)},Object.defineProperty(u.material,"envMap",{get:function(){return this.uniforms.envMap.value}}),r.update(u)),_p.copy(A.backgroundRotation),_p.x*=-1,_p.y*=-1,_p.z*=-1,V.isCubeTexture&&!1===V.isRenderTargetTexture&&(_p.y*=-1,_p.z*=-1),u.material.uniforms.envMap.value=V,u.material.uniforms.flipEnvMap.value=V.isCubeTexture&&!1===V.isRenderTargetTexture?-1:1,u.material.uniforms.backgroundBlurriness.value=A.backgroundBlurriness,u.material.uniforms.backgroundIntensity.value=A.backgroundIntensity,u.material.uniforms.backgroundRotation.value.setFromMatrix4(qEe.makeRotationFromEuler(_p)),u.material.toneMapped=Li.getTransfer(V.colorSpace)!==ir,(d!==V||p!==V.version||m!==n.toneMapping)&&(u.material.needsUpdate=!0,d=V,p=V.version,m=n.toneMapping),u.layers.enableAll(),S.unshift(u,u.geometry,u.material,0,0,null)):V&&V.isTexture&&(void 0===c&&(c=new xs(new lx(2,2),new Ic({name:"BackgroundMaterial",uniforms:k_(Dc.background.uniforms),vertexShader:Dc.background.vertexShader,fragmentShader:Dc.background.fragmentShader,side:0,depthTest:!1,depthWrite:!1,fog:!1})),c.geometry.deleteAttribute("normal"),Object.defineProperty(c.material,"map",{get:function(){return this.uniforms.t2D.value}}),r.update(c)),c.material.uniforms.t2D.value=V,c.material.uniforms.backgroundIntensity.value=A.backgroundIntensity,c.material.toneMapped=Li.getTransfer(V.colorSpace)!==ir,!0===V.matrixAutoUpdate&&V.updateMatrix(),c.material.uniforms.uvTransform.value.copy(V.matrix),(d!==V||p!==V.version||m!==n.toneMapping)&&(c.material.needsUpdate=!0,d=V,p=V.version,m=n.toneMapping),c.layers.enableAll(),S.unshift(c,c.geometry,c.material,0,0,null))},dispose:function T(){void 0!==u&&(u.geometry.dispose(),u.material.dispose(),u=void 0),void 0!==c&&(c.geometry.dispose(),c.material.dispose(),c=void 0)}}}function KEe(n,e){const t=n.getParameter(n.MAX_VERTEX_ATTRIBS),i={},r=p(null);let s=r,o=!1;function c(M){return n.bindVertexArray(M)}function u(M){return n.deleteVertexArray(M)}function p(M){const O=[],z=[],N=[];for(let Ee=0;Ee<t;Ee++)O[Ee]=0,z[Ee]=0,N[Ee]=0;return{geometry:null,program:null,wireframe:!1,newAttributes:O,enabledAttributes:z,attributeDivisors:N,object:M,attributes:{},index:null}}function x(){const M=s.newAttributes;for(let O=0,z=M.length;O<z;O++)M[O]=0}function b(M){w(M,0)}function w(M,O){const N=s.enabledAttributes,Ee=s.attributeDivisors;s.newAttributes[M]=1,0===N[M]&&(n.enableVertexAttribArray(M),N[M]=1),Ee[M]!==O&&(n.vertexAttribDivisor(M,O),Ee[M]=O)}function T(){const M=s.newAttributes,O=s.enabledAttributes;for(let z=0,N=O.length;z<N;z++)O[z]!==M[z]&&(n.disableVertexAttribArray(z),O[z]=0)}function S(M,O,z,N,Ee,je,ee){!0===ee?n.vertexAttribIPointer(M,O,z,Ee,je):n.vertexAttribPointer(M,O,z,N,Ee,je)}function D(){I(),o=!0,s!==r&&(s=r,c(s.object))}function I(){r.geometry=null,r.program=null,r.wireframe=!1}return{setup:function a(M,O,z,N,Ee){let je=!1;const ee=function d(M,O,z){const N=!0===z.wireframe;let Ee=i[M.id];void 0===Ee&&(Ee={},i[M.id]=Ee);let je=Ee[O.id];void 0===je&&(je={},Ee[O.id]=je);let ee=je[N];return void 0===ee&&(ee=p(function l(){return n.createVertexArray()}()),je[N]=ee),ee}(N,z,O);s!==ee&&(s=ee,c(s.object)),je=function m(M,O,z,N){const Ee=s.attributes,je=O.attributes;let ee=0;const we=z.getAttributes();for(const oe in we)if(we[oe].location>=0){const vt=Ee[oe];let Ft=je[oe];if(void 0===Ft&&("instanceMatrix"===oe&&M.instanceMatrix&&(Ft=M.instanceMatrix),"instanceColor"===oe&&M.instanceColor&&(Ft=M.instanceColor)),void 0===vt||vt.attribute!==Ft||Ft&&vt.data!==Ft.data)return!0;ee++}return s.attributesNum!==ee||s.index!==N}(M,N,z,Ee),je&&function v(M,O,z,N){const Ee={},je=O.attributes;let ee=0;const we=z.getAttributes();for(const oe in we)if(we[oe].location>=0){let vt=je[oe];void 0===vt&&("instanceMatrix"===oe&&M.instanceMatrix&&(vt=M.instanceMatrix),"instanceColor"===oe&&M.instanceColor&&(vt=M.instanceColor));const Ft={};Ft.attribute=vt,vt&&vt.data&&(Ft.data=vt.data),Ee[oe]=Ft,ee++}s.attributes=Ee,s.attributesNum=ee,s.index=N}(M,N,z,Ee),null!==Ee&&e.update(Ee,n.ELEMENT_ARRAY_BUFFER),(je||o)&&(o=!1,function A(M,O,z,N){x();const Ee=N.attributes,je=z.getAttributes(),ee=O.defaultAttributeValues;for(const we in je){const oe=je[we];if(oe.location>=0){let $e=Ee[we];if(void 0===$e&&("instanceMatrix"===we&&M.instanceMatrix&&($e=M.instanceMatrix),"instanceColor"===we&&M.instanceColor&&($e=M.instanceColor)),void 0!==$e){const vt=$e.normalized,Ft=$e.itemSize,rn=e.get($e);if(void 0===rn)continue;const gn=rn.buffer,Re=rn.type,pt=rn.bytesPerElement,cn=Re===n.INT||Re===n.UNSIGNED_INT||$e.gpuType===JO;if($e.isInterleavedBufferAttribute){const Ze=$e.data,ln=Ze.stride,Mn=$e.offset;if(Ze.isInstancedInterleavedBuffer){for(let Jt=0;Jt<oe.locationSize;Jt++)w(oe.location+Jt,Ze.meshPerAttribute);!0!==M.isInstancedMesh&&void 0===N._maxInstanceCount&&(N._maxInstanceCount=Ze.meshPerAttribute*Ze.count)}else for(let Jt=0;Jt<oe.locationSize;Jt++)b(oe.location+Jt);n.bindBuffer(n.ARRAY_BUFFER,gn);for(let Jt=0;Jt<oe.locationSize;Jt++)S(oe.location+Jt,Ft/oe.locationSize,Re,vt,ln*pt,(Mn+Ft/oe.locationSize*Jt)*pt,cn)}else{if($e.isInstancedBufferAttribute){for(let Ze=0;Ze<oe.locationSize;Ze++)w(oe.location+Ze,$e.meshPerAttribute);!0!==M.isInstancedMesh&&void 0===N._maxInstanceCount&&(N._maxInstanceCount=$e.meshPerAttribute*$e.count)}else for(let Ze=0;Ze<oe.locationSize;Ze++)b(oe.location+Ze);n.bindBuffer(n.ARRAY_BUFFER,gn);for(let Ze=0;Ze<oe.locationSize;Ze++)S(oe.location+Ze,Ft/oe.locationSize,Re,vt,Ft*pt,Ft/oe.locationSize*Ze*pt,cn)}}else if(void 0!==ee){const vt=ee[we];if(void 0!==vt)switch(vt.length){case 2:n.vertexAttrib2fv(oe.location,vt);break;case 3:n.vertexAttrib3fv(oe.location,vt);break;case 4:n.vertexAttrib4fv(oe.location,vt);break;default:n.vertexAttrib1fv(oe.location,vt)}}}}T()}(M,O,z,N),null!==Ee&&n.bindBuffer(n.ELEMENT_ARRAY_BUFFER,e.get(Ee).buffer))},reset:D,resetDefaultState:I,dispose:function V(){D();for(const M in i){const O=i[M];for(const z in O){const N=O[z];for(const Ee in N)u(N[Ee].object),delete N[Ee];delete O[z]}delete i[M]}},releaseStatesOfGeometry:function F(M){if(void 0===i[M.id])return;const O=i[M.id];for(const z in O){const N=O[z];for(const Ee in N)u(N[Ee].object),delete N[Ee];delete O[z]}delete i[M.id]},releaseStatesOfProgram:function P(M){for(const O in i){const z=i[O];if(void 0===z[M.id])continue;const N=z[M.id];for(const Ee in N)u(N[Ee].object),delete N[Ee];delete z[M.id]}},initAttributes:x,enableAttribute:b,disableUnusedAttributes:T}}function YEe(n,e,t){let i;function o(c,u,d){0!==d&&(n.drawArraysInstanced(i,c,u,d),t.update(u,i,d))}this.setMode=function r(c){i=c},this.render=function s(c,u){n.drawArrays(i,c,u),t.update(u,i,1)},this.renderInstances=o,this.renderMultiDraw=function a(c,u,d){if(0===d)return;e.get("WEBGL_multi_draw").multiDrawArraysWEBGL(i,c,0,u,0,d);let m=0;for(let v=0;v<d;v++)m+=u[v];t.update(m,i,1)},this.renderMultiDrawInstances=function l(c,u,d,p){if(0===d)return;const m=e.get("WEBGL_multi_draw");if(null===m)for(let v=0;v<c.length;v++)o(c[v],u[v],p[v]);else{m.multiDrawArraysInstancedWEBGL(i,c,0,u,0,p,0,d);let v=0;for(let x=0;x<d;x++)v+=u[x]*p[x];t.update(v,i,1)}}}function QEe(n,e,t,i){let r;function l(P){if("highp"===P){if(n.getShaderPrecisionFormat(n.VERTEX_SHADER,n.HIGH_FLOAT).precision>0&&n.getShaderPrecisionFormat(n.FRAGMENT_SHADER,n.HIGH_FLOAT).precision>0)return"highp";P="mediump"}return"mediump"===P&&n.getShaderPrecisionFormat(n.VERTEX_SHADER,n.MEDIUM_FLOAT).precision>0&&n.getShaderPrecisionFormat(n.FRAGMENT_SHADER,n.MEDIUM_FLOAT).precision>0?"mediump":"lowp"}let c=void 0!==t.precision?t.precision:"highp";const u=l(c);u!==c&&(console.warn("THREE.WebGLRenderer:",c,"not supported, using",u,"instead."),c=u);const d=!0===t.logarithmicDepthBuffer,p=!0===t.reverseDepthBuffer&&e.has("EXT_clip_control"),m=n.getParameter(n.MAX_TEXTURE_IMAGE_UNITS),v=n.getParameter(n.MAX_VERTEX_TEXTURE_IMAGE_UNITS);return{isWebGL2:!0,getMaxAnisotropy:function s(){if(void 0!==r)return r;if(!0===e.has("EXT_texture_filter_anisotropic")){const P=e.get("EXT_texture_filter_anisotropic");r=n.getParameter(P.MAX_TEXTURE_MAX_ANISOTROPY_EXT)}else r=0;return r},getMaxPrecision:l,textureFormatReadable:function o(P){return!(P!==ma&&i.convert(P)!==n.getParameter(n.IMPLEMENTATION_COLOR_READ_FORMAT))},textureTypeReadable:function a(P){const D=P===Vb&&(e.has("EXT_color_buffer_half_float")||e.has("EXT_color_buffer_float"));return!(P!==Ou&&i.convert(P)!==n.getParameter(n.IMPLEMENTATION_COLOR_READ_TYPE)&&P!==Fa&&!D)},precision:c,logarithmicDepthBuffer:d,reverseDepthBuffer:p,maxTextures:m,maxVertexTextures:v,maxTextureSize:n.getParameter(n.MAX_TEXTURE_SIZE),maxCubemapSize:n.getParameter(n.MAX_CUBE_MAP_TEXTURE_SIZE),maxAttributes:n.getParameter(n.MAX_VERTEX_ATTRIBS),maxVertexUniforms:n.getParameter(n.MAX_VERTEX_UNIFORM_VECTORS),maxVaryings:n.getParameter(n.MAX_VARYING_VECTORS),maxFragmentUniforms:n.getParameter(n.MAX_FRAGMENT_UNIFORM_VECTORS),vertexTextures:v>0,maxSamples:n.getParameter(n.MAX_SAMPLES)}}function ZEe(n){const e=this;let t=null,i=0,r=!1,s=!1;const o=new ip,a=new Jn,l={value:null,needsUpdate:!1};function u(d,p,m,v){const x=null!==d?d.length:0;let b=null;if(0!==x){if(b=l.value,!0!==v||null===b){const w=m+4*x,T=p.matrixWorldInverse;a.getNormalMatrix(T),(null===b||b.length<w)&&(b=new Float32Array(w));for(let S=0,A=m;S!==x;++S,A+=4)o.copy(d[S]).applyMatrix4(T,a),o.normal.toArray(b,A),b[A+3]=o.constant}l.value=b,l.needsUpdate=!0}return e.numPlanes=x,e.numIntersection=0,b}this.uniform=l,this.numPlanes=0,this.numIntersection=0,this.init=function(d,p){const m=0!==d.length||p||0!==i||r;return r=p,i=d.length,m},this.beginShadows=function(){s=!0,u(null)},this.endShadows=function(){s=!1},this.setGlobalState=function(d,p){t=u(d,p,0)},this.setState=function(d,p,m){const v=d.clippingPlanes,x=d.clipIntersection,b=d.clipShadows,w=n.get(d);if(!r||null===v||0===v.length||s&&!b)s?u(null):function c(){l.value!==t&&(l.value=t,l.needsUpdate=i>0),e.numPlanes=i,e.numIntersection=0}();else{const T=s?0:i,S=4*T;let A=w.clippingState||null;l.value=A,A=u(v,p,S,m);for(let V=0;V!==S;++V)A[V]=t[V];w.clippingState=A,this.numIntersection=x?this.numPlanes:0,this.numPlanes+=T}}}function JEe(n){let e=new WeakMap;function t(o,a){return 303===a?o.mapping=oh:304===a&&(o.mapping=Yf),o}function r(o){const a=o.target;a.removeEventListener("dispose",r);const l=e.get(a);void 0!==l&&(e.delete(a),l.dispose())}return{get:function i(o){if(o&&o.isTexture){const a=o.mapping;if(303===a||304===a){if(e.has(o))return t(e.get(o).texture,o.mapping);{const l=o.image;if(l&&l.height>0){const c=new $0e(l.height);return c.fromEquirectangularTexture(n,o),e.set(o,c),o.addEventListener("dispose",r),t(c.texture,o.mapping)}return null}}}return o},dispose:function s(){e=new WeakMap}}}const i7=[.125,.215,.35,.446,.526,.582],JF=new jF,r7=new Zt;let eL=null,tL=0,nL=0,iL=!1;const yp=(1+Math.sqrt(5))/2,q_=1/yp,s7=[new j(-yp,q_,0),new j(yp,q_,0),new j(-q_,0,yp),new j(q_,0,yp),new j(0,yp,-q_),new j(0,yp,q_),new j(-1,1,-1),new j(1,1,-1),new j(-1,1,1),new j(1,1,1)];class o7{constructor(e){this._renderer=e,this._pingPongRenderTarget=null,this._lodMax=0,this._cubeSize=0,this._lodPlanes=[],this._sizeLods=[],this._sigmas=[],this._blurMaterial=null,this._cubemapMaterial=null,this._equirectMaterial=null,this._compileMaterial(this._blurMaterial)}fromScene(e,t=0,i=.1,r=100){eL=this._renderer.getRenderTarget(),tL=this._renderer.getActiveCubeFace(),nL=this._renderer.getActiveMipmapLevel(),iL=this._renderer.xr.enabled,this._renderer.xr.enabled=!1,this._setSize(256);const s=this._allocateTargets();return s.depthBuffer=!0,this._sceneToCubeUV(e,i,r,s),t>0&&this._blur(s,0,0,t),this._applyPMREM(s),this._cleanup(s),s}fromEquirectangular(e,t=null){return this._fromTexture(e,t)}fromCubemap(e,t=null){return this._fromTexture(e,t)}compileCubemapShader(){null===this._cubemapMaterial&&(this._cubemapMaterial=c7(),this._compileMaterial(this._cubemapMaterial))}compileEquirectangularShader(){null===this._equirectMaterial&&(this._equirectMaterial=l7(),this._compileMaterial(this._equirectMaterial))}dispose(){this._dispose(),null!==this._cubemapMaterial&&this._cubemapMaterial.dispose(),null!==this._equirectMaterial&&this._equirectMaterial.dispose()}_setSize(e){this._lodMax=Math.floor(Math.log2(e)),this._cubeSize=Math.pow(2,this._lodMax)}_dispose(){null!==this._blurMaterial&&this._blurMaterial.dispose(),null!==this._pingPongRenderTarget&&this._pingPongRenderTarget.dispose();for(let e=0;e<this._lodPlanes.length;e++)this._lodPlanes[e].dispose()}_cleanup(e){this._renderer.setRenderTarget(eL,tL,nL),this._renderer.xr.enabled=iL,e.scissorTest=!1,OI(e,0,0,e.width,e.height)}_fromTexture(e,t){this._setSize(e.mapping===oh||e.mapping===Yf?0===e.image.length?16:e.image[0].width||e.image[0].image.width:e.image.width/4),eL=this._renderer.getRenderTarget(),tL=this._renderer.getActiveCubeFace(),nL=this._renderer.getActiveMipmapLevel(),iL=this._renderer.xr.enabled,this._renderer.xr.enabled=!1;const i=t||this._allocateTargets();return this._textureToCubeUV(e,i),this._applyPMREM(i),this._cleanup(i),i}_allocateTargets(){const e=3*Math.max(this._cubeSize,112),t=4*this._cubeSize,i={magFilter:Hs,minFilter:Hs,generateMipmaps:!1,type:Vb,format:ma,colorSpace:m_,depthBuffer:!1},r=a7(e,t,i);if(null===this._pingPongRenderTarget||this._pingPongRenderTarget.width!==e||this._pingPongRenderTarget.height!==t){null!==this._pingPongRenderTarget&&this._dispose(),this._pingPongRenderTarget=a7(e,t,i);const{_lodMax:s}=this;({sizeLods:this._sizeLods,lodPlanes:this._lodPlanes,sigmas:this._sigmas}=function eTe(n){const e=[],t=[],i=[];let r=n;const s=n-4+1+i7.length;for(let o=0;o<s;o++){const a=Math.pow(2,r);t.push(a);let l=1/a;o>n-4?l=i7[o-n+4-1]:0===o&&(l=0),i.push(l);const c=1/(a-2),u=-c,d=1+c,p=[u,u,d,u,d,d,u,u,d,d,u,d],m=6,v=6,x=3,b=2,w=1,T=new Float32Array(x*v*m),S=new Float32Array(b*v*m),A=new Float32Array(w*v*m);for(let F=0;F<m;F++){const P=F%3*2/3-1,D=F>2?0:-1;T.set([P,D,0,P+2/3,D,0,P+2/3,D+1,0,P,D,0,P+2/3,D+1,0,P,D+1,0],x*v*F),S.set(p,b*v*F),A.set([F,F,F,F,F,F],w*v*F)}const V=new oi;V.setAttribute("position",new cr(T,x)),V.setAttribute("uv",new cr(S,b)),V.setAttribute("faceIndex",new cr(A,w)),e.push(V),r>4&&r--}return{lodPlanes:e,sizeLods:t,sigmas:i}}(s)),this._blurMaterial=function tTe(n,e,t){const i=new Float32Array(20),r=new j(0,1,0);return new Ic({name:"SphericalGaussianBlur",defines:{n:20,CUBEUV_TEXEL_WIDTH:1/e,CUBEUV_TEXEL_HEIGHT:1/t,CUBEUV_MAX_MIP:`${n}.0`},uniforms:{envMap:{value:null},samples:{value:1},weights:{value:i},latitudinal:{value:!1},dTheta:{value:0},mipInt:{value:0},poleAxis:{value:r}},vertexShader:"\n\n\t\tprecision mediump float;\n\t\tprecision mediump int;\n\n\t\tattribute float faceIndex;\n\n\t\tvarying vec3 vOutputDirection;\n\n\t\t// RH coordinate system; PMREM face-indexing convention\n\t\tvec3 getDirection( vec2 uv, float face ) {\n\n\t\t\tuv = 2.0 * uv - 1.0;\n\n\t\t\tvec3 direction = vec3( uv, 1.0 );\n\n\t\t\tif ( face == 0.0 ) {\n\n\t\t\t\tdirection = direction.zyx; // ( 1, v, u ) pos x\n\n\t\t\t} else if ( face == 1.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xz *= -1.0; // ( -u, 1, -v ) pos y\n\n\t\t\t} else if ( face == 2.0 ) {\n\n\t\t\t\tdirection.x *= -1.0; // ( -u, v, 1 ) pos z\n\n\t\t\t} else if ( face == 3.0 ) {\n\n\t\t\t\tdirection = direction.zyx;\n\t\t\t\tdirection.xz *= -1.0; // ( -1, v, -u ) neg x\n\n\t\t\t} else if ( face == 4.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xy *= -1.0; // ( -u, -1, v ) neg y\n\n\t\t\t} else if ( face == 5.0 ) {\n\n\t\t\t\tdirection.z *= -1.0; // ( u, v, -1 ) neg z\n\n\t\t\t}\n\n\t\t\treturn direction;\n\n\t\t}\n\n\t\tvoid main() {\n\n\t\t\tvOutputDirection = getDirection( uv, faceIndex );\n\t\t\tgl_Position = vec4( position, 1.0 );\n\n\t\t}\n\t",fragmentShader:"\n\n\t\t\tprecision mediump float;\n\t\t\tprecision mediump int;\n\n\t\t\tvarying vec3 vOutputDirection;\n\n\t\t\tuniform sampler2D envMap;\n\t\t\tuniform int samples;\n\t\t\tuniform float weights[ n ];\n\t\t\tuniform bool latitudinal;\n\t\t\tuniform float dTheta;\n\t\t\tuniform float mipInt;\n\t\t\tuniform vec3 poleAxis;\n\n\t\t\t#define ENVMAP_TYPE_CUBE_UV\n\t\t\t#include <cube_uv_reflection_fragment>\n\n\t\t\tvec3 getSample( float theta, vec3 axis ) {\n\n\t\t\t\tfloat cosTheta = cos( theta );\n\t\t\t\t// Rodrigues' axis-angle rotation\n\t\t\t\tvec3 sampleDirection = vOutputDirection * cosTheta\n\t\t\t\t\t+ cross( axis, vOutputDirection ) * sin( theta )\n\t\t\t\t\t+ axis * dot( axis, vOutputDirection ) * ( 1.0 - cosTheta );\n\n\t\t\t\treturn bilinearCubeUV( envMap, sampleDirection, mipInt );\n\n\t\t\t}\n\n\t\t\tvoid main() {\n\n\t\t\t\tvec3 axis = latitudinal ? poleAxis : cross( poleAxis, vOutputDirection );\n\n\t\t\t\tif ( all( equal( axis, vec3( 0.0 ) ) ) ) {\n\n\t\t\t\t\taxis = vec3( vOutputDirection.z, 0.0, - vOutputDirection.x );\n\n\t\t\t\t}\n\n\t\t\t\taxis = normalize( axis );\n\n\t\t\t\tgl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );\n\t\t\t\tgl_FragColor.rgb += weights[ 0 ] * getSample( 0.0, axis );\n\n\t\t\t\tfor ( int i = 1; i < n; i++ ) {\n\n\t\t\t\t\tif ( i >= samples ) {\n\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t}\n\n\t\t\t\t\tfloat theta = dTheta * float( i );\n\t\t\t\t\tgl_FragColor.rgb += weights[ i ] * getSample( -1.0 * theta, axis );\n\t\t\t\t\tgl_FragColor.rgb += weights[ i ] * getSample( theta, axis );\n\n\t\t\t\t}\n\n\t\t\t}\n\t\t",blending:0,depthTest:!1,depthWrite:!1})}(s,e,t)}return r}_compileMaterial(e){const t=new xs(this._lodPlanes[0],e);this._renderer.compile(t,JF)}_sceneToCubeUV(e,t,i,r){const a=new no(90,1,t,i),l=[1,-1,1,1,1,1],c=[1,1,1,-1,-1,-1],u=this._renderer,d=u.autoClear,p=u.toneMapping;u.getClearColor(r7),u.toneMapping=sh,u.autoClear=!1;const m=new tp({name:"PMREM.Background",side:1,depthWrite:!1,depthTest:!1}),v=new xs(new P_,m);let x=!1;const b=e.background;b?b.isColor&&(m.color.copy(b),e.background=null,x=!0):(m.color.copy(r7),x=!0);for(let w=0;w<6;w++){const T=w%3;0===T?(a.up.set(0,l[w],0),a.lookAt(c[w],0,0)):1===T?(a.up.set(0,0,l[w]),a.lookAt(0,c[w],0)):(a.up.set(0,l[w],0),a.lookAt(0,0,c[w]));const S=this._cubeSize;OI(r,T*S,w>2?S:0,S,S),u.setRenderTarget(r),x&&u.render(v,a),u.render(e,a)}v.geometry.dispose(),v.material.dispose(),u.toneMapping=p,u.autoClear=d,e.background=b}_textureToCubeUV(e,t){const i=this._renderer,r=e.mapping===oh||e.mapping===Yf;r?(null===this._cubemapMaterial&&(this._cubemapMaterial=c7()),this._cubemapMaterial.uniforms.flipEnvMap.value=!1===e.isRenderTargetTexture?-1:1):null===this._equirectMaterial&&(this._equirectMaterial=l7());const s=r?this._cubemapMaterial:this._equirectMaterial,o=new xs(this._lodPlanes[0],s);s.uniforms.envMap.value=e;const l=this._cubeSize;OI(t,0,0,3*l,2*l),i.setRenderTarget(t),i.render(o,JF)}_applyPMREM(e){const t=this._renderer,i=t.autoClear;t.autoClear=!1;const r=this._lodPlanes.length;for(let s=1;s<r;s++){const o=Math.sqrt(this._sigmas[s]*this._sigmas[s]-this._sigmas[s-1]*this._sigmas[s-1]);this._blur(e,s-1,s,o,s7[(r-s-1)%s7.length])}t.autoClear=i}_blur(e,t,i,r,s){const o=this._pingPongRenderTarget;this._halfBlur(e,o,t,i,r,"latitudinal",s),this._halfBlur(o,e,i,i,r,"longitudinal",s)}_halfBlur(e,t,i,r,s,o,a){const l=this._renderer,c=this._blurMaterial;"latitudinal"!==o&&"longitudinal"!==o&&console.error("blur direction must be either latitudinal or longitudinal!");const d=new xs(this._lodPlanes[r],c),p=c.uniforms,m=this._sizeLods[i]-1,v=isFinite(s)?Math.PI/(2*m):2*Math.PI/39,x=s/v,b=isFinite(s)?1+Math.floor(3*x):20;b>20&&console.warn(`sigmaRadians, ${s}, is too large and will clip, as it requested ${b} samples when the maximum is set to 20`);const w=[];let T=0;for(let P=0;P<20;++P){const D=P/x,I=Math.exp(-D*D/2);w.push(I),0===P?T+=I:P<b&&(T+=2*I)}for(let P=0;P<w.length;P++)w[P]=w[P]/T;p.envMap.value=e.texture,p.samples.value=b,p.weights.value=w,p.latitudinal.value="latitudinal"===o,a&&(p.poleAxis.value=a);const{_lodMax:S}=this;p.dTheta.value=v,p.mipInt.value=S-i;const A=this._sizeLods[r];OI(t,3*A*(r>S-4?r-S+4:0),4*(this._cubeSize-A),3*A,2*A),l.setRenderTarget(t),l.render(d,JF)}}function a7(n,e,t){const i=new Lu(n,e,t);return i.texture.mapping=Nb,i.texture.name="PMREM.cubeUv",i.scissorTest=!0,i}function OI(n,e,t,i,r){n.viewport.set(e,t,i,r),n.scissor.set(e,t,i,r)}function l7(){return new Ic({name:"EquirectangularToCubeUV",uniforms:{envMap:{value:null}},vertexShader:"\n\n\t\tprecision mediump float;\n\t\tprecision mediump int;\n\n\t\tattribute float faceIndex;\n\n\t\tvarying vec3 vOutputDirection;\n\n\t\t// RH coordinate system; PMREM face-indexing convention\n\t\tvec3 getDirection( vec2 uv, float face ) {\n\n\t\t\tuv = 2.0 * uv - 1.0;\n\n\t\t\tvec3 direction = vec3( uv, 1.0 );\n\n\t\t\tif ( face == 0.0 ) {\n\n\t\t\t\tdirection = direction.zyx; // ( 1, v, u ) pos x\n\n\t\t\t} else if ( face == 1.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xz *= -1.0; // ( -u, 1, -v ) pos y\n\n\t\t\t} else if ( face == 2.0 ) {\n\n\t\t\t\tdirection.x *= -1.0; // ( -u, v, 1 ) pos z\n\n\t\t\t} else if ( face == 3.0 ) {\n\n\t\t\t\tdirection = direction.zyx;\n\t\t\t\tdirection.xz *= -1.0; // ( -1, v, -u ) neg x\n\n\t\t\t} else if ( face == 4.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xy *= -1.0; // ( -u, -1, v ) neg y\n\n\t\t\t} else if ( face == 5.0 ) {\n\n\t\t\t\tdirection.z *= -1.0; // ( u, v, -1 ) neg z\n\n\t\t\t}\n\n\t\t\treturn direction;\n\n\t\t}\n\n\t\tvoid main() {\n\n\t\t\tvOutputDirection = getDirection( uv, faceIndex );\n\t\t\tgl_Position = vec4( position, 1.0 );\n\n\t\t}\n\t",fragmentShader:"\n\n\t\t\tprecision mediump float;\n\t\t\tprecision mediump int;\n\n\t\t\tvarying vec3 vOutputDirection;\n\n\t\t\tuniform sampler2D envMap;\n\n\t\t\t#include <common>\n\n\t\t\tvoid main() {\n\n\t\t\t\tvec3 outputDirection = normalize( vOutputDirection );\n\t\t\t\tvec2 uv = equirectUv( outputDirection );\n\n\t\t\t\tgl_FragColor = vec4( texture2D ( envMap, uv ).rgb, 1.0 );\n\n\t\t\t}\n\t\t",blending:0,depthTest:!1,depthWrite:!1})}function c7(){return new Ic({name:"CubemapToCubeUV",uniforms:{envMap:{value:null},flipEnvMap:{value:-1}},vertexShader:"\n\n\t\tprecision mediump float;\n\t\tprecision mediump int;\n\n\t\tattribute float faceIndex;\n\n\t\tvarying vec3 vOutputDirection;\n\n\t\t// RH coordinate system; PMREM face-indexing convention\n\t\tvec3 getDirection( vec2 uv, float face ) {\n\n\t\t\tuv = 2.0 * uv - 1.0;\n\n\t\t\tvec3 direction = vec3( uv, 1.0 );\n\n\t\t\tif ( face == 0.0 ) {\n\n\t\t\t\tdirection = direction.zyx; // ( 1, v, u ) pos x\n\n\t\t\t} else if ( face == 1.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xz *= -1.0; // ( -u, 1, -v ) pos y\n\n\t\t\t} else if ( face == 2.0 ) {\n\n\t\t\t\tdirection.x *= -1.0; // ( -u, v, 1 ) pos z\n\n\t\t\t} else if ( face == 3.0 ) {\n\n\t\t\t\tdirection = direction.zyx;\n\t\t\t\tdirection.xz *= -1.0; // ( -1, v, -u ) neg x\n\n\t\t\t} else if ( face == 4.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xy *= -1.0; // ( -u, -1, v ) neg y\n\n\t\t\t} else if ( face == 5.0 ) {\n\n\t\t\t\tdirection.z *= -1.0; // ( u, v, -1 ) neg z\n\n\t\t\t}\n\n\t\t\treturn direction;\n\n\t\t}\n\n\t\tvoid main() {\n\n\t\t\tvOutputDirection = getDirection( uv, faceIndex );\n\t\t\tgl_Position = vec4( position, 1.0 );\n\n\t\t}\n\t",fragmentShader:"\n\n\t\t\tprecision mediump float;\n\t\t\tprecision mediump int;\n\n\t\t\tuniform float flipEnvMap;\n\n\t\t\tvarying vec3 vOutputDirection;\n\n\t\t\tuniform samplerCube envMap;\n\n\t\t\tvoid main() {\n\n\t\t\t\tgl_FragColor = textureCube( envMap, vec3( flipEnvMap * vOutputDirection.x, vOutputDirection.yz ) );\n\n\t\t\t}\n\t\t",blending:0,depthTest:!1,depthWrite:!1})}function nTe(n){let e=new WeakMap,t=null;function s(a){const l=a.target;l.removeEventListener("dispose",s);const c=e.get(l);void 0!==c&&(e.delete(l),c.dispose())}return{get:function i(a){if(a&&a.isTexture){const l=a.mapping,c=303===l||304===l,u=l===oh||l===Yf;if(c||u){let d=e.get(a);if(a.isRenderTargetTexture&&a.pmremVersion!==(void 0!==d?d.texture.pmremVersion:0))return null===t&&(t=new o7(n)),d=c?t.fromEquirectangular(a,d):t.fromCubemap(a,d),d.texture.pmremVersion=a.pmremVersion,e.set(a,d),d.texture;if(void 0!==d)return d.texture;{const m=a.image;return c&&m&&m.height>0||u&&m&&function r(a){let l=0;for(let u=0;u<6;u++)void 0!==a[u]&&l++;return 6===l}(m)?(null===t&&(t=new o7(n)),d=c?t.fromEquirectangular(a):t.fromCubemap(a),d.texture.pmremVersion=a.pmremVersion,e.set(a,d),a.addEventListener("dispose",s),d.texture):null}}}return a},dispose:function o(){e=new WeakMap,null!==t&&(t.dispose(),t=null)}}}function iTe(n){const e={};function t(i){if(void 0!==e[i])return e[i];let r;switch(i){case"WEBGL_depth_texture":r=n.getExtension("WEBGL_depth_texture")||n.getExtension("MOZ_WEBGL_depth_texture")||n.getExtension("WEBKIT_WEBGL_depth_texture");break;case"EXT_texture_filter_anisotropic":r=n.getExtension("EXT_texture_filter_anisotropic")||n.getExtension("MOZ_EXT_texture_filter_anisotropic")||n.getExtension("WEBKIT_EXT_texture_filter_anisotropic");break;case"WEBGL_compressed_texture_s3tc":r=n.getExtension("WEBGL_compressed_texture_s3tc")||n.getExtension("MOZ_WEBGL_compressed_texture_s3tc")||n.getExtension("WEBKIT_WEBGL_compressed_texture_s3tc");break;case"WEBGL_compressed_texture_pvrtc":r=n.getExtension("WEBGL_compressed_texture_pvrtc")||n.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc");break;default:r=n.getExtension(i)}return e[i]=r,r}return{has:function(i){return null!==t(i)},init:function(){t("EXT_color_buffer_float"),t("WEBGL_clip_cull_distance"),t("OES_texture_float_linear"),t("EXT_color_buffer_half_float"),t("WEBGL_multisampled_render_to_texture"),t("WEBGL_render_shared_exponent")},get:function(i){const r=t(i);return null===r&&y_("THREE.WebGLRenderer: "+i+" extension not supported."),r}}}function rTe(n,e,t,i){const r={},s=new WeakMap;function o(d){const p=d.target;null!==p.index&&e.remove(p.index);for(const v in p.attributes)e.remove(p.attributes[v]);p.removeEventListener("dispose",o),delete r[p.id];const m=s.get(p);m&&(e.remove(m),s.delete(p)),i.releaseStatesOfGeometry(p),!0===p.isInstancedBufferGeometry&&delete p._maxInstanceCount,t.memory.geometries--}function c(d){const p=[],m=d.index,v=d.attributes.position;let x=0;if(null!==m){const T=m.array;x=m.version;for(let S=0,A=T.length;S<A;S+=3){const V=T[S+0],F=T[S+1],P=T[S+2];p.push(V,F,F,P,P,V)}}else{if(void 0===v)return;x=v.version;for(let S=0,A=v.array.length/3-1;S<A;S+=3){const V=S+0,F=S+1,P=S+2;p.push(V,F,F,P,P,V)}}const b=new(_9(p)?P9:R9)(p,1);b.version=x;const w=s.get(d);w&&e.remove(w),s.set(d,b)}return{get:function a(d,p){return!0===r[p.id]||(p.addEventListener("dispose",o),r[p.id]=!0,t.memory.geometries++),p},update:function l(d){const p=d.attributes;for(const m in p)e.update(p[m],n.ARRAY_BUFFER)},getWireframeAttribute:function u(d){const p=s.get(d);if(p){const m=d.index;null!==m&&p.version<m.version&&c(d)}else c(d);return s.get(d)}}}function sTe(n,e,t){let i,s,o;function c(p,m,v){0!==v&&(n.drawElementsInstanced(i,m,s,p*o,v),t.update(m,i,v))}this.setMode=function r(p){i=p},this.setIndex=function a(p){s=p.type,o=p.bytesPerElement},this.render=function l(p,m){n.drawElements(i,m,s,p*o),t.update(m,i,1)},this.renderInstances=c,this.renderMultiDraw=function u(p,m,v){if(0===v)return;e.get("WEBGL_multi_draw").multiDrawElementsWEBGL(i,m,0,s,p,0,v);let b=0;for(let w=0;w<v;w++)b+=m[w];t.update(b,i,1)},this.renderMultiDrawInstances=function d(p,m,v,x){if(0===v)return;const b=e.get("WEBGL_multi_draw");if(null===b)for(let w=0;w<p.length;w++)c(p[w]/o,m[w],x[w]);else{b.multiDrawElementsInstancedWEBGL(i,m,0,s,p,0,x,0,v);let w=0;for(let T=0;T<v;T++)w+=m[T]*x[T];t.update(w,i,1)}}}function oTe(n){const t={frame:0,calls:0,triangles:0,points:0,lines:0};return{memory:{geometries:0,textures:0},render:t,programs:null,autoReset:!0,reset:function r(){t.calls=0,t.triangles=0,t.points=0,t.lines=0},update:function i(s,o,a){switch(t.calls++,o){case n.TRIANGLES:t.triangles+=a*(s/3);break;case n.LINES:t.lines+=a*(s/2);break;case n.LINE_STRIP:t.lines+=a*(s-1);break;case n.LINE_LOOP:t.lines+=a*s;break;case n.POINTS:t.points+=a*s;break;default:console.error("THREE.WebGLInfo: Unknown draw mode:",o)}}}}function aTe(n,e,t){const i=new WeakMap,r=new zi;return{update:function s(o,a,l){const c=o.morphTargetInfluences,u=a.morphAttributes.position||a.morphAttributes.normal||a.morphAttributes.color,d=void 0!==u?u.length:0;let p=i.get(a);if(void 0===p||p.count!==d){let I=function(){P.dispose(),i.delete(a),a.removeEventListener("dispose",I)};void 0!==p&&p.texture.dispose();const m=void 0!==a.morphAttributes.position,v=void 0!==a.morphAttributes.normal,x=void 0!==a.morphAttributes.color,b=a.morphAttributes.position||[],w=a.morphAttributes.normal||[],T=a.morphAttributes.color||[];let S=0;!0===m&&(S=1),!0===v&&(S=2),!0===x&&(S=3);let A=a.attributes.position.count*S,V=1;A>e.maxTextureSize&&(V=Math.ceil(A/e.maxTextureSize),A=e.maxTextureSize);const F=new Float32Array(A*V*4*d),P=new MA(F,A,V,d);P.type=Fa,P.needsUpdate=!0;const D=4*S;for(let M=0;M<d;M++){const O=b[M],z=w[M],N=T[M],Ee=A*V*4*M;for(let je=0;je<O.count;je++){const ee=je*D;!0===m&&(r.fromBufferAttribute(O,je),F[Ee+ee+0]=r.x,F[Ee+ee+1]=r.y,F[Ee+ee+2]=r.z,F[Ee+ee+3]=0),!0===v&&(r.fromBufferAttribute(z,je),F[Ee+ee+4]=r.x,F[Ee+ee+5]=r.y,F[Ee+ee+6]=r.z,F[Ee+ee+7]=0),!0===x&&(r.fromBufferAttribute(N,je),F[Ee+ee+8]=r.x,F[Ee+ee+9]=r.y,F[Ee+ee+10]=r.z,F[Ee+ee+11]=4===N.itemSize?r.w:1)}}p={count:d,texture:P,size:new et(A,V)},i.set(a,p),a.addEventListener("dispose",I)}if(!0===o.isInstancedMesh&&null!==o.morphTexture)l.getUniforms().setValue(n,"morphTexture",o.morphTexture,t);else{let m=0;for(let x=0;x<c.length;x++)m+=c[x];const v=a.morphTargetsRelative?1:1-m;l.getUniforms().setValue(n,"morphTargetBaseInfluence",v),l.getUniforms().setValue(n,"morphTargetInfluences",c)}l.getUniforms().setValue(n,"morphTargetsTexture",p.texture,t),l.getUniforms().setValue(n,"morphTargetsTextureSize",p.size)}}}function lTe(n,e,t,i){let r=new WeakMap;function a(l){const c=l.target;c.removeEventListener("dispose",a),t.remove(c.instanceMatrix),null!==c.instanceColor&&t.remove(c.instanceColor)}return{update:function s(l){const c=i.render.frame,d=e.get(l,l.geometry);if(r.get(d)!==c&&(e.update(d),r.set(d,c)),l.isInstancedMesh&&(!1===l.hasEventListener("dispose",a)&&l.addEventListener("dispose",a),r.get(l)!==c&&(t.update(l.instanceMatrix,n.ARRAY_BUFFER),null!==l.instanceColor&&t.update(l.instanceColor,n.ARRAY_BUFFER),r.set(l,c))),l.isSkinnedMesh){const p=l.skeleton;r.get(p)!==c&&(p.update(),r.set(p,c))}return d},dispose:function o(){r=new WeakMap}}}const u7=new ga,d7=new lq(1,1),h7=new MA,f7=new VN,p7=new $A,m7=[],g7=[],_7=new Float32Array(16),v7=new Float32Array(9),y7=new Float32Array(4);function X_(n,e,t){const i=n[0];if(i<=0||i>0)return n;const r=e*t;let s=m7[r];if(void 0===s&&(s=new Float32Array(r),m7[r]=s),0!==e){i.toArray(s,0);for(let o=1,a=0;o!==e;++o)a+=t,n[o].toArray(s,a)}return s}function Ms(n,e){if(n.length!==e.length)return!1;for(let t=0,i=n.length;t<i;t++)if(n[t]!==e[t])return!1;return!0}function Ds(n,e){for(let t=0,i=e.length;t<i;t++)n[t]=e[t]}function NI(n,e){let t=g7[e];void 0===t&&(t=new Int32Array(e),g7[e]=t);for(let i=0;i!==e;++i)t[i]=n.allocateTextureUnit();return t}function cTe(n,e){const t=this.cache;t[0]!==e&&(n.uniform1f(this.addr,e),t[0]=e)}function uTe(n,e){const t=this.cache;if(void 0!==e.x)(t[0]!==e.x||t[1]!==e.y)&&(n.uniform2f(this.addr,e.x,e.y),t[0]=e.x,t[1]=e.y);else{if(Ms(t,e))return;n.uniform2fv(this.addr,e),Ds(t,e)}}function dTe(n,e){const t=this.cache;if(void 0!==e.x)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z)&&(n.uniform3f(this.addr,e.x,e.y,e.z),t[0]=e.x,t[1]=e.y,t[2]=e.z);else if(void 0!==e.r)(t[0]!==e.r||t[1]!==e.g||t[2]!==e.b)&&(n.uniform3f(this.addr,e.r,e.g,e.b),t[0]=e.r,t[1]=e.g,t[2]=e.b);else{if(Ms(t,e))return;n.uniform3fv(this.addr,e),Ds(t,e)}}function hTe(n,e){const t=this.cache;if(void 0!==e.x)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z||t[3]!==e.w)&&(n.uniform4f(this.addr,e.x,e.y,e.z,e.w),t[0]=e.x,t[1]=e.y,t[2]=e.z,t[3]=e.w);else{if(Ms(t,e))return;n.uniform4fv(this.addr,e),Ds(t,e)}}function fTe(n,e){const t=this.cache,i=e.elements;if(void 0===i){if(Ms(t,e))return;n.uniformMatrix2fv(this.addr,!1,e),Ds(t,e)}else{if(Ms(t,i))return;y7.set(i),n.uniformMatrix2fv(this.addr,!1,y7),Ds(t,i)}}function pTe(n,e){const t=this.cache,i=e.elements;if(void 0===i){if(Ms(t,e))return;n.uniformMatrix3fv(this.addr,!1,e),Ds(t,e)}else{if(Ms(t,i))return;v7.set(i),n.uniformMatrix3fv(this.addr,!1,v7),Ds(t,i)}}function mTe(n,e){const t=this.cache,i=e.elements;if(void 0===i){if(Ms(t,e))return;n.uniformMatrix4fv(this.addr,!1,e),Ds(t,e)}else{if(Ms(t,i))return;_7.set(i),n.uniformMatrix4fv(this.addr,!1,_7),Ds(t,i)}}function gTe(n,e){const t=this.cache;t[0]!==e&&(n.uniform1i(this.addr,e),t[0]=e)}function _Te(n,e){const t=this.cache;if(void 0!==e.x)(t[0]!==e.x||t[1]!==e.y)&&(n.uniform2i(this.addr,e.x,e.y),t[0]=e.x,t[1]=e.y);else{if(Ms(t,e))return;n.uniform2iv(this.addr,e),Ds(t,e)}}function vTe(n,e){const t=this.cache;if(void 0!==e.x)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z)&&(n.uniform3i(this.addr,e.x,e.y,e.z),t[0]=e.x,t[1]=e.y,t[2]=e.z);else{if(Ms(t,e))return;n.uniform3iv(this.addr,e),Ds(t,e)}}function yTe(n,e){const t=this.cache;if(void 0!==e.x)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z||t[3]!==e.w)&&(n.uniform4i(this.addr,e.x,e.y,e.z,e.w),t[0]=e.x,t[1]=e.y,t[2]=e.z,t[3]=e.w);else{if(Ms(t,e))return;n.uniform4iv(this.addr,e),Ds(t,e)}}function bTe(n,e){const t=this.cache;t[0]!==e&&(n.uniform1ui(this.addr,e),t[0]=e)}function xTe(n,e){const t=this.cache;if(void 0!==e.x)(t[0]!==e.x||t[1]!==e.y)&&(n.uniform2ui(this.addr,e.x,e.y),t[0]=e.x,t[1]=e.y);else{if(Ms(t,e))return;n.uniform2uiv(this.addr,e),Ds(t,e)}}function wTe(n,e){const t=this.cache;if(void 0!==e.x)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z)&&(n.uniform3ui(this.addr,e.x,e.y,e.z),t[0]=e.x,t[1]=e.y,t[2]=e.z);else{if(Ms(t,e))return;n.uniform3uiv(this.addr,e),Ds(t,e)}}function ETe(n,e){const t=this.cache;if(void 0!==e.x)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z||t[3]!==e.w)&&(n.uniform4ui(this.addr,e.x,e.y,e.z,e.w),t[0]=e.x,t[1]=e.y,t[2]=e.z,t[3]=e.w);else{if(Ms(t,e))return;n.uniform4uiv(this.addr,e),Ds(t,e)}}function TTe(n,e,t){const i=this.cache,r=t.allocateTextureUnit();let s;i[0]!==r&&(n.uniform1i(this.addr,r),i[0]=r),this.type===n.SAMPLER_2D_SHADOW?(d7.compareFunction=515,s=d7):s=u7,t.setTexture2D(e||s,r)}function STe(n,e,t){const i=this.cache,r=t.allocateTextureUnit();i[0]!==r&&(n.uniform1i(this.addr,r),i[0]=r),t.setTexture3D(e||f7,r)}function ATe(n,e,t){const i=this.cache,r=t.allocateTextureUnit();i[0]!==r&&(n.uniform1i(this.addr,r),i[0]=r),t.setTextureCube(e||p7,r)}function ITe(n,e,t){const i=this.cache,r=t.allocateTextureUnit();i[0]!==r&&(n.uniform1i(this.addr,r),i[0]=r),t.setTexture2DArray(e||h7,r)}function MTe(n,e){n.uniform1fv(this.addr,e)}function DTe(n,e){const t=X_(e,this.size,2);n.uniform2fv(this.addr,t)}function RTe(n,e){const t=X_(e,this.size,3);n.uniform3fv(this.addr,t)}function PTe(n,e){const t=X_(e,this.size,4);n.uniform4fv(this.addr,t)}function kTe(n,e){const t=X_(e,this.size,4);n.uniformMatrix2fv(this.addr,!1,t)}function OTe(n,e){const t=X_(e,this.size,9);n.uniformMatrix3fv(this.addr,!1,t)}function NTe(n,e){const t=X_(e,this.size,16);n.uniformMatrix4fv(this.addr,!1,t)}function FTe(n,e){n.uniform1iv(this.addr,e)}function LTe(n,e){n.uniform2iv(this.addr,e)}function VTe(n,e){n.uniform3iv(this.addr,e)}function UTe(n,e){n.uniform4iv(this.addr,e)}function BTe(n,e){n.uniform1uiv(this.addr,e)}function zTe(n,e){n.uniform2uiv(this.addr,e)}function HTe(n,e){n.uniform3uiv(this.addr,e)}function GTe(n,e){n.uniform4uiv(this.addr,e)}function WTe(n,e,t){const i=this.cache,r=e.length,s=NI(t,r);Ms(i,s)||(n.uniform1iv(this.addr,s),Ds(i,s));for(let o=0;o!==r;++o)t.setTexture2D(e[o]||u7,s[o])}function jTe(n,e,t){const i=this.cache,r=e.length,s=NI(t,r);Ms(i,s)||(n.uniform1iv(this.addr,s),Ds(i,s));for(let o=0;o!==r;++o)t.setTexture3D(e[o]||f7,s[o])}function $Te(n,e,t){const i=this.cache,r=e.length,s=NI(t,r);Ms(i,s)||(n.uniform1iv(this.addr,s),Ds(i,s));for(let o=0;o!==r;++o)t.setTextureCube(e[o]||p7,s[o])}function qTe(n,e,t){const i=this.cache,r=e.length,s=NI(t,r);Ms(i,s)||(n.uniform1iv(this.addr,s),Ds(i,s));for(let o=0;o!==r;++o)t.setTexture2DArray(e[o]||h7,s[o])}class KTe{constructor(e,t,i){this.id=e,this.addr=i,this.cache=[],this.type=t.type,this.setValue=function CTe(n){switch(n){case 5126:return cTe;case 35664:return uTe;case 35665:return dTe;case 35666:return hTe;case 35674:return fTe;case 35675:return pTe;case 35676:return mTe;case 5124:case 35670:return gTe;case 35667:case 35671:return _Te;case 35668:case 35672:return vTe;case 35669:case 35673:return yTe;case 5125:return bTe;case 36294:return xTe;case 36295:return wTe;case 36296:return ETe;case 35678:case 36198:case 36298:case 36306:case 35682:return TTe;case 35679:case 36299:case 36307:return STe;case 35680:case 36300:case 36308:case 36293:return ATe;case 36289:case 36303:case 36311:case 36292:return ITe}}(t.type)}}class YTe{constructor(e,t,i){this.id=e,this.addr=i,this.cache=[],this.type=t.type,this.size=t.size,this.setValue=function XTe(n){switch(n){case 5126:return MTe;case 35664:return DTe;case 35665:return RTe;case 35666:return PTe;case 35674:return kTe;case 35675:return OTe;case 35676:return NTe;case 5124:case 35670:return FTe;case 35667:case 35671:return LTe;case 35668:case 35672:return VTe;case 35669:case 35673:return UTe;case 5125:return BTe;case 36294:return zTe;case 36295:return HTe;case 36296:return GTe;case 35678:case 36198:case 36298:case 36306:case 35682:return WTe;case 35679:case 36299:case 36307:return jTe;case 35680:case 36300:case 36308:case 36293:return $Te;case 36289:case 36303:case 36311:case 36292:return qTe}}(t.type)}}class QTe{constructor(e){this.id=e,this.seq=[],this.map={}}setValue(e,t,i){const r=this.seq;for(let s=0,o=r.length;s!==o;++s){const a=r[s];a.setValue(e,t[a.id],i)}}}const sL=/(\w+)(\])?(\[|\.)?/g;function b7(n,e){n.seq.push(e),n.map[e.id]=e}function ZTe(n,e,t){const i=n.name,r=i.length;for(sL.lastIndex=0;;){const s=sL.exec(i);let a=s[1];const c=s[3];if("]"===s[2]&&(a|=0),void 0===c||"["===c&&sL.lastIndex+2===r){b7(t,void 0===c?new KTe(a,n,e):new YTe(a,n,e));break}{let d=t.map[a];void 0===d&&(d=new QTe(a),b7(t,d)),t=d}}}class FI{constructor(e,t){this.seq=[],this.map={};const i=e.getProgramParameter(t,e.ACTIVE_UNIFORMS);for(let r=0;r<i;++r){const s=e.getActiveUniform(t,r);ZTe(s,e.getUniformLocation(t,s.name),this)}}setValue(e,t,i,r){const s=this.map[t];void 0!==s&&s.setValue(e,i,r)}setOptional(e,t,i){const r=t[i];void 0!==r&&this.setValue(e,i,r)}static upload(e,t,i,r){for(let s=0,o=t.length;s!==o;++s){const a=t[s],l=i[a.id];!1!==l.needsUpdate&&a.setValue(e,l.value,r)}}static seqWithValue(e,t){const i=[];for(let r=0,s=e.length;r!==s;++r){const o=e[r];o.id in t&&i.push(o)}return i}}function x7(n,e,t){const i=n.createShader(e);return n.shaderSource(i,t),n.compileShader(i),i}const JTe=37297;let eSe=0;const w7=new Jn;function E7(n,e,t){const i=n.getShaderParameter(e,n.COMPILE_STATUS),r=n.getShaderInfoLog(e).trim();if(i&&""===r)return"";const s=/ERROR: 0:(\d+)/.exec(r);if(s){const o=parseInt(s[1]);return t.toUpperCase()+"\n\n"+r+"\n\n"+function tSe(n,e){const t=n.split("\n"),i=[],r=Math.max(e-6,0),s=Math.min(e+6,t.length);for(let o=r;o<s;o++){const a=o+1;i.push(`${a===e?">":" "} ${a}: ${t[o]}`)}return i.join("\n")}(n.getShaderSource(e),o)}return r}function iSe(n,e){const t=function nSe(n){Li._getMatrix(w7,Li.workingColorSpace,n);const e=`mat3( ${w7.elements.map(t=>t.toFixed(4))} )`;switch(Li.getTransfer(n)){case AA:return[e,"LinearTransferOETF"];case ir:return[e,"sRGBTransferOETF"];default:return console.warn("THREE.WebGLProgram: Unsupported color space: ",n),[e,"LinearTransferOETF"]}}(e);return[`vec4 ${n}( vec4 value ) {`,`\treturn ${t[1]}( vec4( value.rgb * ${t[0]}, value.a ) );`,"}"].join("\n")}function rSe(n,e){let t;switch(e){case Lye:t="Linear";break;case Vye:t="Reinhard";break;case Uye:t="Cineon";break;case Bye:t="ACESFilmic";break;case Hye:t="AgX";break;case Gye:t="Neutral";break;case zye:t="Custom";break;default:console.warn("THREE.WebGLProgram: Unsupported toneMapping:",e),t="Linear"}return"vec3 "+n+"( vec3 color ) { return "+t+"ToneMapping( color ); }"}const LI=new j;function dx(n){return""!==n}function T7(n,e){const t=e.numSpotLightShadows+e.numSpotLightMaps-e.numSpotLightShadowsWithMaps;return n.replace(/NUM_DIR_LIGHTS/g,e.numDirLights).replace(/NUM_SPOT_LIGHTS/g,e.numSpotLights).replace(/NUM_SPOT_LIGHT_MAPS/g,e.numSpotLightMaps).replace(/NUM_SPOT_LIGHT_COORDS/g,t).replace(/NUM_RECT_AREA_LIGHTS/g,e.numRectAreaLights).replace(/NUM_POINT_LIGHTS/g,e.numPointLights).replace(/NUM_HEMI_LIGHTS/g,e.numHemiLights).replace(/NUM_DIR_LIGHT_SHADOWS/g,e.numDirLightShadows).replace(/NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS/g,e.numSpotLightShadowsWithMaps).replace(/NUM_SPOT_LIGHT_SHADOWS/g,e.numSpotLightShadows).replace(/NUM_POINT_LIGHT_SHADOWS/g,e.numPointLightShadows)}function S7(n,e){return n.replace(/NUM_CLIPPING_PLANES/g,e.numClippingPlanes).replace(/UNION_CLIPPING_PLANES/g,e.numClippingPlanes-e.numClipIntersection)}const cSe=/^[ \t]*#include +<([\w\d./]+)>/gm;function oL(n){return n.replace(cSe,dSe)}const uSe=new Map;function dSe(n,e){let t=ai[e];if(void 0===t){const i=uSe.get(e);if(void 0===i)throw new Error("Can not resolve #include <"+e+">");t=ai[i],console.warn('THREE.WebGLRenderer: Shader chunk "%s" has been deprecated. Use "%s" instead.',e,i)}return oL(t)}const hSe=/#pragma unroll_loop_start\s+for\s*\(\s*int\s+i\s*=\s*(\d+)\s*;\s*i\s*<\s*(\d+)\s*;\s*i\s*\+\+\s*\)\s*{([\s\S]+?)}\s+#pragma unroll_loop_end/g;function A7(n){return n.replace(hSe,fSe)}function fSe(n,e,t,i){let r="";for(let s=parseInt(e);s<parseInt(t);s++)r+=i.replace(/\[\s*i\s*\]/g,"[ "+s+" ]").replace(/UNROLLED_LOOP_INDEX/g,s);return r}function I7(n){let e=`precision ${n.precision} float;\n\tprecision ${n.precision} int;\n\tprecision ${n.precision} sampler2D;\n\tprecision ${n.precision} samplerCube;\n\tprecision ${n.precision} sampler3D;\n\tprecision ${n.precision} sampler2DArray;\n\tprecision ${n.precision} sampler2DShadow;\n\tprecision ${n.precision} samplerCubeShadow;\n\tprecision ${n.precision} sampler2DArrayShadow;\n\tprecision ${n.precision} isampler2D;\n\tprecision ${n.precision} isampler3D;\n\tprecision ${n.precision} isamplerCube;\n\tprecision ${n.precision} isampler2DArray;\n\tprecision ${n.precision} usampler2D;\n\tprecision ${n.precision} usampler3D;\n\tprecision ${n.precision} usamplerCube;\n\tprecision ${n.precision} usampler2DArray;\n\t`;return"highp"===n.precision?e+="\n#define HIGH_PRECISION":"mediump"===n.precision?e+="\n#define MEDIUM_PRECISION":"lowp"===n.precision&&(e+="\n#define LOW_PRECISION"),e}function ySe(n,e,t,i){const r=n.getContext(),s=t.defines;let o=t.vertexShader,a=t.fragmentShader;const l=function pSe(n){let e="SHADOWMAP_TYPE_BASIC";return n.shadowMapType===Q$?e="SHADOWMAP_TYPE_PCF":n.shadowMapType===gye?e="SHADOWMAP_TYPE_PCF_SOFT":n.shadowMapType===Ru&&(e="SHADOWMAP_TYPE_VSM"),e}(t),c=function mSe(n){let e="ENVMAP_TYPE_CUBE";if(n.envMap)switch(n.envMapMode){case oh:case Yf:e="ENVMAP_TYPE_CUBE";break;case Nb:e="ENVMAP_TYPE_CUBE_UV"}return e}(t),u=function gSe(n){let e="ENVMAP_MODE_REFLECTION";return n.envMap&&n.envMapMode===Yf&&(e="ENVMAP_MODE_REFRACTION"),e}(t),d=function _Se(n){let e="ENVMAP_BLENDING_NONE";if(n.envMap)switch(n.combine){case hA:e="ENVMAP_BLENDING_MULTIPLY";break;case Nye:e="ENVMAP_BLENDING_MIX";break;case Fye:e="ENVMAP_BLENDING_ADD"}return e}(t),p=function vSe(n){const e=n.envMapCubeUVHeight;if(null===e)return null;const t=Math.log2(e)-2,i=1/e;return{texelWidth:1/(3*Math.max(Math.pow(2,t),112)),texelHeight:i,maxMip:t}}(t),m=function oSe(n){return[n.extensionClipCullDistance?"#extension GL_ANGLE_clip_cull_distance : require":"",n.extensionMultiDraw?"#extension GL_ANGLE_multi_draw : require":""].filter(dx).join("\n")}(t),v=function aSe(n){const e=[];for(const t in n){const i=n[t];!1!==i&&e.push("#define "+t+" "+i)}return e.join("\n")}(s),x=r.createProgram();let b,w,T=t.glslVersion?"#version "+t.glslVersion+"\n":"";t.isRawShaderMaterial?(b=["#define SHADER_TYPE "+t.shaderType,"#define SHADER_NAME "+t.shaderName,v].filter(dx).join("\n"),b.length>0&&(b+="\n"),w=["#define SHADER_TYPE "+t.shaderType,"#define SHADER_NAME "+t.shaderName,v].filter(dx).join("\n"),w.length>0&&(w+="\n")):(b=[I7(t),"#define SHADER_TYPE "+t.shaderType,"#define SHADER_NAME "+t.shaderName,v,t.extensionClipCullDistance?"#define USE_CLIP_DISTANCE":"",t.batching?"#define USE_BATCHING":"",t.batchingColor?"#define USE_BATCHING_COLOR":"",t.instancing?"#define USE_INSTANCING":"",t.instancingColor?"#define USE_INSTANCING_COLOR":"",t.instancingMorph?"#define USE_INSTANCING_MORPH":"",t.useFog&&t.fog?"#define USE_FOG":"",t.useFog&&t.fogExp2?"#define FOG_EXP2":"",t.map?"#define USE_MAP":"",t.envMap?"#define USE_ENVMAP":"",t.envMap?"#define "+u:"",t.lightMap?"#define USE_LIGHTMAP":"",t.aoMap?"#define USE_AOMAP":"",t.bumpMap?"#define USE_BUMPMAP":"",t.normalMap?"#define USE_NORMALMAP":"",t.normalMapObjectSpace?"#define USE_NORMALMAP_OBJECTSPACE":"",t.normalMapTangentSpace?"#define USE_NORMALMAP_TANGENTSPACE":"",t.displacementMap?"#define USE_DISPLACEMENTMAP":"",t.emissiveMap?"#define USE_EMISSIVEMAP":"",t.anisotropy?"#define USE_ANISOTROPY":"",t.anisotropyMap?"#define USE_ANISOTROPYMAP":"",t.clearcoatMap?"#define USE_CLEARCOATMAP":"",t.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",t.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",t.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",t.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",t.specularMap?"#define USE_SPECULARMAP":"",t.specularColorMap?"#define USE_SPECULAR_COLORMAP":"",t.specularIntensityMap?"#define USE_SPECULAR_INTENSITYMAP":"",t.roughnessMap?"#define USE_ROUGHNESSMAP":"",t.metalnessMap?"#define USE_METALNESSMAP":"",t.alphaMap?"#define USE_ALPHAMAP":"",t.alphaHash?"#define USE_ALPHAHASH":"",t.transmission?"#define USE_TRANSMISSION":"",t.transmissionMap?"#define USE_TRANSMISSIONMAP":"",t.thicknessMap?"#define USE_THICKNESSMAP":"",t.sheenColorMap?"#define USE_SHEEN_COLORMAP":"",t.sheenRoughnessMap?"#define USE_SHEEN_ROUGHNESSMAP":"",t.mapUv?"#define MAP_UV "+t.mapUv:"",t.alphaMapUv?"#define ALPHAMAP_UV "+t.alphaMapUv:"",t.lightMapUv?"#define LIGHTMAP_UV "+t.lightMapUv:"",t.aoMapUv?"#define AOMAP_UV "+t.aoMapUv:"",t.emissiveMapUv?"#define EMISSIVEMAP_UV "+t.emissiveMapUv:"",t.bumpMapUv?"#define BUMPMAP_UV "+t.bumpMapUv:"",t.normalMapUv?"#define NORMALMAP_UV "+t.normalMapUv:"",t.displacementMapUv?"#define DISPLACEMENTMAP_UV "+t.displacementMapUv:"",t.metalnessMapUv?"#define METALNESSMAP_UV "+t.metalnessMapUv:"",t.roughnessMapUv?"#define ROUGHNESSMAP_UV "+t.roughnessMapUv:"",t.anisotropyMapUv?"#define ANISOTROPYMAP_UV "+t.anisotropyMapUv:"",t.clearcoatMapUv?"#define CLEARCOATMAP_UV "+t.clearcoatMapUv:"",t.clearcoatNormalMapUv?"#define CLEARCOAT_NORMALMAP_UV "+t.clearcoatNormalMapUv:"",t.clearcoatRoughnessMapUv?"#define CLEARCOAT_ROUGHNESSMAP_UV "+t.clearcoatRoughnessMapUv:"",t.iridescenceMapUv?"#define IRIDESCENCEMAP_UV "+t.iridescenceMapUv:"",t.iridescenceThicknessMapUv?"#define IRIDESCENCE_THICKNESSMAP_UV "+t.iridescenceThicknessMapUv:"",t.sheenColorMapUv?"#define SHEEN_COLORMAP_UV "+t.sheenColorMapUv:"",t.sheenRoughnessMapUv?"#define SHEEN_ROUGHNESSMAP_UV "+t.sheenRoughnessMapUv:"",t.specularMapUv?"#define SPECULARMAP_UV "+t.specularMapUv:"",t.specularColorMapUv?"#define SPECULAR_COLORMAP_UV "+t.specularColorMapUv:"",t.specularIntensityMapUv?"#define SPECULAR_INTENSITYMAP_UV "+t.specularIntensityMapUv:"",t.transmissionMapUv?"#define TRANSMISSIONMAP_UV "+t.transmissionMapUv:"",t.thicknessMapUv?"#define THICKNESSMAP_UV "+t.thicknessMapUv:"",t.vertexTangents&&!1===t.flatShading?"#define USE_TANGENT":"",t.vertexColors?"#define USE_COLOR":"",t.vertexAlphas?"#define USE_COLOR_ALPHA":"",t.vertexUv1s?"#define USE_UV1":"",t.vertexUv2s?"#define USE_UV2":"",t.vertexUv3s?"#define USE_UV3":"",t.pointsUvs?"#define USE_POINTS_UV":"",t.flatShading?"#define FLAT_SHADED":"",t.skinning?"#define USE_SKINNING":"",t.morphTargets?"#define USE_MORPHTARGETS":"",t.morphNormals&&!1===t.flatShading?"#define USE_MORPHNORMALS":"",t.morphColors?"#define USE_MORPHCOLORS":"",t.morphTargetsCount>0?"#define MORPHTARGETS_TEXTURE_STRIDE "+t.morphTextureStride:"",t.morphTargetsCount>0?"#define MORPHTARGETS_COUNT "+t.morphTargetsCount:"",t.doubleSided?"#define DOUBLE_SIDED":"",t.flipSided?"#define FLIP_SIDED":"",t.shadowMapEnabled?"#define USE_SHADOWMAP":"",t.shadowMapEnabled?"#define "+l:"",t.sizeAttenuation?"#define USE_SIZEATTENUATION":"",t.numLightProbes>0?"#define USE_LIGHT_PROBES":"",t.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",t.reverseDepthBuffer?"#define USE_REVERSEDEPTHBUF":"","uniform mat4 modelMatrix;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform mat4 viewMatrix;","uniform mat3 normalMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;","#ifdef USE_INSTANCING","\tattribute mat4 instanceMatrix;","#endif","#ifdef USE_INSTANCING_COLOR","\tattribute vec3 instanceColor;","#endif","#ifdef USE_INSTANCING_MORPH","\tuniform sampler2D morphTexture;","#endif","attribute vec3 position;","attribute vec3 normal;","attribute vec2 uv;","#ifdef USE_UV1","\tattribute vec2 uv1;","#endif","#ifdef USE_UV2","\tattribute vec2 uv2;","#endif","#ifdef USE_UV3","\tattribute vec2 uv3;","#endif","#ifdef USE_TANGENT","\tattribute vec4 tangent;","#endif","#if defined( USE_COLOR_ALPHA )","\tattribute vec4 color;","#elif defined( USE_COLOR )","\tattribute vec3 color;","#endif","#ifdef USE_SKINNING","\tattribute vec4 skinIndex;","\tattribute vec4 skinWeight;","#endif","\n"].filter(dx).join("\n"),w=[I7(t),"#define SHADER_TYPE "+t.shaderType,"#define SHADER_NAME "+t.shaderName,v,t.useFog&&t.fog?"#define USE_FOG":"",t.useFog&&t.fogExp2?"#define FOG_EXP2":"",t.alphaToCoverage?"#define ALPHA_TO_COVERAGE":"",t.map?"#define USE_MAP":"",t.matcap?"#define USE_MATCAP":"",t.envMap?"#define USE_ENVMAP":"",t.envMap?"#define "+c:"",t.envMap?"#define "+u:"",t.envMap?"#define "+d:"",p?"#define CUBEUV_TEXEL_WIDTH "+p.texelWidth:"",p?"#define CUBEUV_TEXEL_HEIGHT "+p.texelHeight:"",p?"#define CUBEUV_MAX_MIP "+p.maxMip+".0":"",t.lightMap?"#define USE_LIGHTMAP":"",t.aoMap?"#define USE_AOMAP":"",t.bumpMap?"#define USE_BUMPMAP":"",t.normalMap?"#define USE_NORMALMAP":"",t.normalMapObjectSpace?"#define USE_NORMALMAP_OBJECTSPACE":"",t.normalMapTangentSpace?"#define USE_NORMALMAP_TANGENTSPACE":"",t.emissiveMap?"#define USE_EMISSIVEMAP":"",t.anisotropy?"#define USE_ANISOTROPY":"",t.anisotropyMap?"#define USE_ANISOTROPYMAP":"",t.clearcoat?"#define USE_CLEARCOAT":"",t.clearcoatMap?"#define USE_CLEARCOATMAP":"",t.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",t.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",t.dispersion?"#define USE_DISPERSION":"",t.iridescence?"#define USE_IRIDESCENCE":"",t.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",t.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",t.specularMap?"#define USE_SPECULARMAP":"",t.specularColorMap?"#define USE_SPECULAR_COLORMAP":"",t.specularIntensityMap?"#define USE_SPECULAR_INTENSITYMAP":"",t.roughnessMap?"#define USE_ROUGHNESSMAP":"",t.metalnessMap?"#define USE_METALNESSMAP":"",t.alphaMap?"#define USE_ALPHAMAP":"",t.alphaTest?"#define USE_ALPHATEST":"",t.alphaHash?"#define USE_ALPHAHASH":"",t.sheen?"#define USE_SHEEN":"",t.sheenColorMap?"#define USE_SHEEN_COLORMAP":"",t.sheenRoughnessMap?"#define USE_SHEEN_ROUGHNESSMAP":"",t.transmission?"#define USE_TRANSMISSION":"",t.transmissionMap?"#define USE_TRANSMISSIONMAP":"",t.thicknessMap?"#define USE_THICKNESSMAP":"",t.vertexTangents&&!1===t.flatShading?"#define USE_TANGENT":"",t.vertexColors||t.instancingColor||t.batchingColor?"#define USE_COLOR":"",t.vertexAlphas?"#define USE_COLOR_ALPHA":"",t.vertexUv1s?"#define USE_UV1":"",t.vertexUv2s?"#define USE_UV2":"",t.vertexUv3s?"#define USE_UV3":"",t.pointsUvs?"#define USE_POINTS_UV":"",t.gradientMap?"#define USE_GRADIENTMAP":"",t.flatShading?"#define FLAT_SHADED":"",t.doubleSided?"#define DOUBLE_SIDED":"",t.flipSided?"#define FLIP_SIDED":"",t.shadowMapEnabled?"#define USE_SHADOWMAP":"",t.shadowMapEnabled?"#define "+l:"",t.premultipliedAlpha?"#define PREMULTIPLIED_ALPHA":"",t.numLightProbes>0?"#define USE_LIGHT_PROBES":"",t.decodeVideoTexture?"#define DECODE_VIDEO_TEXTURE":"",t.decodeVideoTextureEmissive?"#define DECODE_VIDEO_TEXTURE_EMISSIVE":"",t.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",t.reverseDepthBuffer?"#define USE_REVERSEDEPTHBUF":"","uniform mat4 viewMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;",t.toneMapping!==sh?"#define TONE_MAPPING":"",t.toneMapping!==sh?ai.tonemapping_pars_fragment:"",t.toneMapping!==sh?rSe("toneMapping",t.toneMapping):"",t.dithering?"#define DITHERING":"",t.opaque?"#define OPAQUE":"",ai.colorspace_pars_fragment,iSe("linearToOutputTexel",t.outputColorSpace),(Li.getLuminanceCoefficients(LI),["float luminance( const in vec3 rgb ) {",`\tconst vec3 weights = vec3( ${LI.x.toFixed(4)}, ${LI.y.toFixed(4)}, ${LI.z.toFixed(4)} );`,"\treturn dot( weights, rgb );","}"].join("\n")),t.useDepthPacking?"#define DEPTH_PACKING "+t.depthPacking:"","\n"].filter(dx).join("\n")),o=oL(o),o=T7(o,t),o=S7(o,t),a=oL(a),a=T7(a,t),a=S7(a,t),o=A7(o),a=A7(a),!0!==t.isRawShaderMaterial&&(T="#version 300 es\n",b=[m,"#define attribute in","#define varying out","#define texture2D texture"].join("\n")+"\n"+b,w=["#define varying in",t.glslVersion===m9?"":"layout(location = 0) out highp vec4 pc_fragColor;",t.glslVersion===m9?"":"#define gl_FragColor pc_fragColor","#define gl_FragDepthEXT gl_FragDepth","#define texture2D texture","#define textureCube texture","#define texture2DProj textureProj","#define texture2DLodEXT textureLod","#define texture2DProjLodEXT textureProjLod","#define textureCubeLodEXT textureLod","#define texture2DGradEXT textureGrad","#define texture2DProjGradEXT textureProjGrad","#define textureCubeGradEXT textureGrad"].join("\n")+"\n"+w);const A=T+w+a,V=x7(r,r.VERTEX_SHADER,T+b+o),F=x7(r,r.FRAGMENT_SHADER,A);function P(O){if(n.debug.checkShaderErrors){const z=r.getProgramInfoLog(x).trim(),N=r.getShaderInfoLog(V).trim(),Ee=r.getShaderInfoLog(F).trim();let je=!0,ee=!0;if(!1===r.getProgramParameter(x,r.LINK_STATUS))if(je=!1,"function"==typeof n.debug.onShaderError)n.debug.onShaderError(r,x,V,F);else{const we=E7(r,V,"vertex"),oe=E7(r,F,"fragment");console.error("THREE.WebGLProgram: Shader Error "+r.getError()+" - VALIDATE_STATUS "+r.getProgramParameter(x,r.VALIDATE_STATUS)+"\n\nMaterial Name: "+O.name+"\nMaterial Type: "+O.type+"\n\nProgram Info Log: "+z+"\n"+we+"\n"+oe)}else""!==z?console.warn("THREE.WebGLProgram: Program Info Log:",z):(""===N||""===Ee)&&(ee=!1);ee&&(O.diagnostics={runnable:je,programLog:z,vertexShader:{log:N,prefix:b},fragmentShader:{log:Ee,prefix:w}})}r.deleteShader(V),r.deleteShader(F),D=new FI(r,x),I=function lSe(n,e){const t={},i=n.getProgramParameter(e,n.ACTIVE_ATTRIBUTES);for(let r=0;r<i;r++){const s=n.getActiveAttrib(e,r),o=s.name;let a=1;s.type===n.FLOAT_MAT2&&(a=2),s.type===n.FLOAT_MAT3&&(a=3),s.type===n.FLOAT_MAT4&&(a=4),t[o]={type:s.type,location:n.getAttribLocation(e,o),locationSize:a}}return t}(r,x)}let D,I;r.attachShader(x,V),r.attachShader(x,F),void 0!==t.index0AttributeName?r.bindAttribLocation(x,0,t.index0AttributeName):!0===t.morphTargets&&r.bindAttribLocation(x,0,"position"),r.linkProgram(x),this.getUniforms=function(){return void 0===D&&P(this),D},this.getAttributes=function(){return void 0===I&&P(this),I};let M=!1===t.rendererExtensionParallelShaderCompile;return this.isReady=function(){return!1===M&&(M=r.getProgramParameter(x,JTe)),M},this.destroy=function(){i.releaseStatesOfProgram(this),r.deleteProgram(x),this.program=void 0},this.type=t.shaderType,this.name=t.shaderName,this.id=eSe++,this.cacheKey=e,this.usedTimes=1,this.program=x,this.vertexShader=V,this.fragmentShader=F,this}let bSe=0;class xSe{constructor(){this.shaderCache=new Map,this.materialCache=new Map}update(e){const i=e.fragmentShader,r=this._getShaderStage(e.vertexShader),s=this._getShaderStage(i),o=this._getShaderCacheForMaterial(e);return!1===o.has(r)&&(o.add(r),r.usedTimes++),!1===o.has(s)&&(o.add(s),s.usedTimes++),this}remove(e){const t=this.materialCache.get(e);for(const i of t)i.usedTimes--,0===i.usedTimes&&this.shaderCache.delete(i.code);return this.materialCache.delete(e),this}getVertexShaderID(e){return this._getShaderStage(e.vertexShader).id}getFragmentShaderID(e){return this._getShaderStage(e.fragmentShader).id}dispose(){this.shaderCache.clear(),this.materialCache.clear()}_getShaderCacheForMaterial(e){const t=this.materialCache;let i=t.get(e);return void 0===i&&(i=new Set,t.set(e,i)),i}_getShaderStage(e){const t=this.shaderCache;let i=t.get(e);return void 0===i&&(i=new wSe(e),t.set(e,i)),i}}class wSe{constructor(e){this.id=bSe++,this.code=e,this.usedTimes=0}}function ESe(n,e,t,i,r,s,o){const a=new jN,l=new xSe,c=new Set,u=[],d=r.logarithmicDepthBuffer,p=r.vertexTextures;let m=r.precision;const v={MeshDepthMaterial:"depth",MeshDistanceMaterial:"distanceRGBA",MeshNormalMaterial:"normal",MeshBasicMaterial:"basic",MeshLambertMaterial:"lambert",MeshPhongMaterial:"phong",MeshToonMaterial:"toon",MeshStandardMaterial:"physical",MeshPhysicalMaterial:"physical",MeshMatcapMaterial:"matcap",LineBasicMaterial:"basic",LineDashedMaterial:"dashed",PointsMaterial:"points",ShadowMaterial:"shadow",SpriteMaterial:"sprite"};function x(I){return c.add(I),0===I?"uv":`uv${I}`}return{getParameters:function b(I,M,O,z,N){const Ee=z.fog,je=N.geometry,we=(I.isMeshStandardMaterial?t:e).get(I.envMap||(I.isMeshStandardMaterial?z.environment:null)),oe=we&&we.mapping===Nb?we.image.height:null,$e=v[I.type];null!==I.precision&&(m=r.getMaxPrecision(I.precision),m!==I.precision&&console.warn("THREE.WebGLProgram.getParameters:",I.precision,"not supported, using",m,"instead."));const vt=je.morphAttributes.position||je.morphAttributes.normal||je.morphAttributes.color,Ft=void 0!==vt?vt.length:0;let gn,Re,pt,cn,rn=0;if(void 0!==je.morphAttributes.position&&(rn=1),void 0!==je.morphAttributes.normal&&(rn=2),void 0!==je.morphAttributes.color&&(rn=3),$e){const Hi=Dc[$e];gn=Hi.vertexShader,Re=Hi.fragmentShader}else gn=I.vertexShader,Re=I.fragmentShader,l.update(I),pt=l.getVertexShaderID(I),cn=l.getFragmentShaderID(I);const Ze=n.getRenderTarget(),ln=n.state.buffers.depth.getReversed(),Mn=!0===N.isInstancedMesh,Jt=!0===N.isBatchedMesh,li=!!I.map,it=!!we,W=!!I.aoMap,dn=!!I.lightMap,ut=!!I.bumpMap,en=!!I.normalMap,Et=!!I.displacementMap,In=!!I.emissiveMap,Bt=!!I.metalnessMap,G=!!I.roughnessMap,L=I.anisotropy>0,pe=I.clearcoat>0,tt=I.iridescence>0,He=I.sheen>0,Ot=I.transmission>0,yt=L&&!!I.anisotropyMap,jt=pe&&!!I.clearcoatMap,hi=pe&&!!I.clearcoatNormalMap,mt=pe&&!!I.clearcoatRoughnessMap,sn=tt&&!!I.iridescenceMap,bn=tt&&!!I.iridescenceThicknessMap,On=He&&!!I.sheenColorMap,nn=He&&!!I.sheenRoughnessMap,yi=!!I.specularMap,ei=!!I.specularColorMap,rr=!!I.specularIntensityMap,ie=Ot&&!!I.transmissionMap,Lt=Ot&&!!I.thicknessMap,Xe=!!I.alphaMap,Dn=!!I.extensions;let Rr=sh;I.toneMapped&&(null===Ze||!0===Ze.isXRRenderTarget)&&(Rr=n.toneMapping);const hs={shaderID:$e,shaderType:I.type,shaderName:I.name,vertexShader:gn,fragmentShader:Re,defines:I.defines,customVertexShaderID:pt,customFragmentShaderID:cn,isRawShaderMaterial:!0===I.isRawShaderMaterial,glslVersion:I.glslVersion,precision:m,batching:Jt,batchingColor:Jt&&null!==N._colorsTexture,instancing:Mn,instancingColor:Mn&&null!==N.instanceColor,instancingMorph:Mn&&null!==N.morphTexture,supportsVertexTextures:p,outputColorSpace:null===Ze?n.outputColorSpace:!0===Ze.isXRRenderTarget?Ze.texture.colorSpace:m_,alphaToCoverage:!!I.alphaToCoverage,map:li,matcap:!!I.matcap,envMap:it,envMapMode:it&&we.mapping,envMapCubeUVHeight:oe,aoMap:W,lightMap:dn,bumpMap:ut,normalMap:en,displacementMap:p&&Et,emissiveMap:In,normalMapObjectSpace:en&&1===I.normalMapType,normalMapTangentSpace:en&&0===I.normalMapType,metalnessMap:Bt,roughnessMap:G,anisotropy:L,anisotropyMap:yt,clearcoat:pe,clearcoatMap:jt,clearcoatNormalMap:hi,clearcoatRoughnessMap:mt,dispersion:I.dispersion>0,iridescence:tt,iridescenceMap:sn,iridescenceThicknessMap:bn,sheen:He,sheenColorMap:On,sheenRoughnessMap:nn,specularMap:yi,specularColorMap:ei,specularIntensityMap:rr,transmission:Ot,transmissionMap:ie,thicknessMap:Lt,gradientMap:!!I.gradientMap,opaque:!1===I.transparent&&1===I.blending&&!1===I.alphaToCoverage,alphaMap:Xe,alphaTest:I.alphaTest>0,alphaHash:!!I.alphaHash,combine:I.combine,mapUv:li&&x(I.map.channel),aoMapUv:W&&x(I.aoMap.channel),lightMapUv:dn&&x(I.lightMap.channel),bumpMapUv:ut&&x(I.bumpMap.channel),normalMapUv:en&&x(I.normalMap.channel),displacementMapUv:Et&&x(I.displacementMap.channel),emissiveMapUv:In&&x(I.emissiveMap.channel),metalnessMapUv:Bt&&x(I.metalnessMap.channel),roughnessMapUv:G&&x(I.roughnessMap.channel),anisotropyMapUv:yt&&x(I.anisotropyMap.channel),clearcoatMapUv:jt&&x(I.clearcoatMap.channel),clearcoatNormalMapUv:hi&&x(I.clearcoatNormalMap.channel),clearcoatRoughnessMapUv:mt&&x(I.clearcoatRoughnessMap.channel),iridescenceMapUv:sn&&x(I.iridescenceMap.channel),iridescenceThicknessMapUv:bn&&x(I.iridescenceThicknessMap.channel),sheenColorMapUv:On&&x(I.sheenColorMap.channel),sheenRoughnessMapUv:nn&&x(I.sheenRoughnessMap.channel),specularMapUv:yi&&x(I.specularMap.channel),specularColorMapUv:ei&&x(I.specularColorMap.channel),specularIntensityMapUv:rr&&x(I.specularIntensityMap.channel),transmissionMapUv:ie&&x(I.transmissionMap.channel),thicknessMapUv:Lt&&x(I.thicknessMap.channel),alphaMapUv:Xe&&x(I.alphaMap.channel),vertexTangents:!!je.attributes.tangent&&(en||L),vertexColors:I.vertexColors,vertexAlphas:!0===I.vertexColors&&!!je.attributes.color&&4===je.attributes.color.itemSize,pointsUvs:!0===N.isPoints&&!!je.attributes.uv&&(li||Xe),fog:!!Ee,useFog:!0===I.fog,fogExp2:!!Ee&&Ee.isFogExp2,flatShading:!0===I.flatShading,sizeAttenuation:!0===I.sizeAttenuation,logarithmicDepthBuffer:d,reverseDepthBuffer:ln,skinning:!0===N.isSkinnedMesh,morphTargets:void 0!==je.morphAttributes.position,morphNormals:void 0!==je.morphAttributes.normal,morphColors:void 0!==je.morphAttributes.color,morphTargetsCount:Ft,morphTextureStride:rn,numDirLights:M.directional.length,numPointLights:M.point.length,numSpotLights:M.spot.length,numSpotLightMaps:M.spotLightMap.length,numRectAreaLights:M.rectArea.length,numHemiLights:M.hemi.length,numDirLightShadows:M.directionalShadowMap.length,numPointLightShadows:M.pointShadowMap.length,numSpotLightShadows:M.spotShadowMap.length,numSpotLightShadowsWithMaps:M.numSpotLightShadowsWithMaps,numLightProbes:M.numLightProbes,numClippingPlanes:o.numPlanes,numClipIntersection:o.numIntersection,dithering:I.dithering,shadowMapEnabled:n.shadowMap.enabled&&O.length>0,shadowMapType:n.shadowMap.type,toneMapping:Rr,decodeVideoTexture:li&&!0===I.map.isVideoTexture&&Li.getTransfer(I.map.colorSpace)===ir,decodeVideoTextureEmissive:In&&!0===I.emissiveMap.isVideoTexture&&Li.getTransfer(I.emissiveMap.colorSpace)===ir,premultipliedAlpha:I.premultipliedAlpha,doubleSided:2===I.side,flipSided:1===I.side,useDepthPacking:I.depthPacking>=0,depthPacking:I.depthPacking||0,index0AttributeName:I.index0AttributeName,extensionClipCullDistance:Dn&&!0===I.extensions.clipCullDistance&&i.has("WEBGL_clip_cull_distance"),extensionMultiDraw:(Dn&&!0===I.extensions.multiDraw||Jt)&&i.has("WEBGL_multi_draw"),rendererExtensionParallelShaderCompile:i.has("KHR_parallel_shader_compile"),customProgramCacheKey:I.customProgramCacheKey()};return hs.vertexUv1s=c.has(1),hs.vertexUv2s=c.has(2),hs.vertexUv3s=c.has(3),c.clear(),hs},getProgramCacheKey:function w(I){const M=[];if(I.shaderID?M.push(I.shaderID):(M.push(I.customVertexShaderID),M.push(I.customFragmentShaderID)),void 0!==I.defines)for(const O in I.defines)M.push(O),M.push(I.defines[O]);return!1===I.isRawShaderMaterial&&(function T(I,M){I.push(M.precision),I.push(M.outputColorSpace),I.push(M.envMapMode),I.push(M.envMapCubeUVHeight),I.push(M.mapUv),I.push(M.alphaMapUv),I.push(M.lightMapUv),I.push(M.aoMapUv),I.push(M.bumpMapUv),I.push(M.normalMapUv),I.push(M.displacementMapUv),I.push(M.emissiveMapUv),I.push(M.metalnessMapUv),I.push(M.roughnessMapUv),I.push(M.anisotropyMapUv),I.push(M.clearcoatMapUv),I.push(M.clearcoatNormalMapUv),I.push(M.clearcoatRoughnessMapUv),I.push(M.iridescenceMapUv),I.push(M.iridescenceThicknessMapUv),I.push(M.sheenColorMapUv),I.push(M.sheenRoughnessMapUv),I.push(M.specularMapUv),I.push(M.specularColorMapUv),I.push(M.specularIntensityMapUv),I.push(M.transmissionMapUv),I.push(M.thicknessMapUv),I.push(M.combine),I.push(M.fogExp2),I.push(M.sizeAttenuation),I.push(M.morphTargetsCount),I.push(M.morphAttributeCount),I.push(M.numDirLights),I.push(M.numPointLights),I.push(M.numSpotLights),I.push(M.numSpotLightMaps),I.push(M.numHemiLights),I.push(M.numRectAreaLights),I.push(M.numDirLightShadows),I.push(M.numPointLightShadows),I.push(M.numSpotLightShadows),I.push(M.numSpotLightShadowsWithMaps),I.push(M.numLightProbes),I.push(M.shadowMapType),I.push(M.toneMapping),I.push(M.numClippingPlanes),I.push(M.numClipIntersection),I.push(M.depthPacking)}(M,I),function S(I,M){a.disableAll(),M.supportsVertexTextures&&a.enable(0),M.instancing&&a.enable(1),M.instancingColor&&a.enable(2),M.instancingMorph&&a.enable(3),M.matcap&&a.enable(4),M.envMap&&a.enable(5),M.normalMapObjectSpace&&a.enable(6),M.normalMapTangentSpace&&a.enable(7),M.clearcoat&&a.enable(8),M.iridescence&&a.enable(9),M.alphaTest&&a.enable(10),M.vertexColors&&a.enable(11),M.vertexAlphas&&a.enable(12),M.vertexUv1s&&a.enable(13),M.vertexUv2s&&a.enable(14),M.vertexUv3s&&a.enable(15),M.vertexTangents&&a.enable(16),M.anisotropy&&a.enable(17),M.alphaHash&&a.enable(18),M.batching&&a.enable(19),M.dispersion&&a.enable(20),M.batchingColor&&a.enable(21),I.push(a.mask),a.disableAll(),M.fog&&a.enable(0),M.useFog&&a.enable(1),M.flatShading&&a.enable(2),M.logarithmicDepthBuffer&&a.enable(3),M.reverseDepthBuffer&&a.enable(4),M.skinning&&a.enable(5),M.morphTargets&&a.enable(6),M.morphNormals&&a.enable(7),M.morphColors&&a.enable(8),M.premultipliedAlpha&&a.enable(9),M.shadowMapEnabled&&a.enable(10),M.doubleSided&&a.enable(11),M.flipSided&&a.enable(12),M.useDepthPacking&&a.enable(13),M.dithering&&a.enable(14),M.transmission&&a.enable(15),M.sheen&&a.enable(16),M.opaque&&a.enable(17),M.pointsUvs&&a.enable(18),M.decodeVideoTexture&&a.enable(19),M.decodeVideoTextureEmissive&&a.enable(20),M.alphaToCoverage&&a.enable(21),I.push(a.mask)}(M,I),M.push(n.outputColorSpace)),M.push(I.customProgramCacheKey),M.join()},getUniforms:function A(I){const M=v[I.type];let O;return O=M?H0e.clone(Dc[M].uniforms):I.uniforms,O},acquireProgram:function V(I,M){let O;for(let z=0,N=u.length;z<N;z++){const Ee=u[z];if(Ee.cacheKey===M){O=Ee,++O.usedTimes;break}}return void 0===O&&(O=new ySe(n,M,I,s),u.push(O)),O},releaseProgram:function F(I){if(0==--I.usedTimes){const M=u.indexOf(I);u[M]=u[u.length-1],u.pop(),I.destroy()}},releaseShaderCache:function P(I){l.remove(I)},programs:u,dispose:function D(){l.dispose()}}}function TSe(){let n=new WeakMap;return{has:function e(o){return n.has(o)},get:function t(o){let a=n.get(o);return void 0===a&&(a={},n.set(o,a)),a},remove:function i(o){n.delete(o)},update:function r(o,a,l){n.get(o)[a]=l},dispose:function s(){n=new WeakMap}}}function SSe(n,e){return n.groupOrder!==e.groupOrder?n.groupOrder-e.groupOrder:n.renderOrder!==e.renderOrder?n.renderOrder-e.renderOrder:n.material.id!==e.material.id?n.material.id-e.material.id:n.z!==e.z?n.z-e.z:n.id-e.id}function C7(n,e){return n.groupOrder!==e.groupOrder?n.groupOrder-e.groupOrder:n.renderOrder!==e.renderOrder?n.renderOrder-e.renderOrder:n.z!==e.z?e.z-n.z:n.id-e.id}function M7(){const n=[];let e=0;const t=[],i=[],r=[];function o(d,p,m,v,x,b){let w=n[e];return void 0===w?(w={id:d.id,object:d,geometry:p,material:m,groupOrder:v,renderOrder:d.renderOrder,z:x,group:b},n[e]=w):(w.id=d.id,w.object=d,w.geometry=p,w.material=m,w.groupOrder=v,w.renderOrder=d.renderOrder,w.z=x,w.group=b),e++,w}return{opaque:t,transmissive:i,transparent:r,init:function s(){e=0,t.length=0,i.length=0,r.length=0},push:function a(d,p,m,v,x,b){const w=o(d,p,m,v,x,b);m.transmission>0?i.push(w):!0===m.transparent?r.push(w):t.push(w)},unshift:function l(d,p,m,v,x,b){const w=o(d,p,m,v,x,b);m.transmission>0?i.unshift(w):!0===m.transparent?r.unshift(w):t.unshift(w)},finish:function u(){for(let d=e,p=n.length;d<p;d++){const m=n[d];if(null===m.id)break;m.id=null,m.object=null,m.geometry=null,m.material=null,m.group=null}},sort:function c(d,p){t.length>1&&t.sort(d||SSe),i.length>1&&i.sort(p||C7),r.length>1&&r.sort(p||C7)}}}function ASe(){let n=new WeakMap;return{get:function e(i,r){const s=n.get(i);let o;return void 0===s?(o=new M7,n.set(i,[o])):r>=s.length?(o=new M7,s.push(o)):o=s[r],o},dispose:function t(){n=new WeakMap}}}function ISe(){const n={};return{get:function(e){if(void 0!==n[e.id])return n[e.id];let t;switch(e.type){case"DirectionalLight":t={direction:new j,color:new Zt};break;case"SpotLight":t={position:new j,direction:new j,color:new Zt,distance:0,coneCos:0,penumbraCos:0,decay:0};break;case"PointLight":t={position:new j,color:new Zt,distance:0,decay:0};break;case"HemisphereLight":t={direction:new j,skyColor:new Zt,groundColor:new Zt};break;case"RectAreaLight":t={color:new Zt,position:new j,halfWidth:new j,halfHeight:new j}}return n[e.id]=t,t}}}let MSe=0;function DSe(n,e){return(e.castShadow?2:0)-(n.castShadow?2:0)+(e.map?1:0)-(n.map?1:0)}function RSe(n){const e=new ISe,t=function CSe(){const n={};return{get:function(e){if(void 0!==n[e.id])return n[e.id];let t;switch(e.type){case"DirectionalLight":case"SpotLight":t={shadowIntensity:1,shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new et};break;case"PointLight":t={shadowIntensity:1,shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new et,shadowCameraNear:1,shadowCameraFar:1e3}}return n[e.id]=t,t}}}(),i={version:0,hash:{directionalLength:-1,pointLength:-1,spotLength:-1,rectAreaLength:-1,hemiLength:-1,numDirectionalShadows:-1,numPointShadows:-1,numSpotShadows:-1,numSpotMaps:-1,numLightProbes:-1},ambient:[0,0,0],probe:[],directional:[],directionalShadow:[],directionalShadowMap:[],directionalShadowMatrix:[],spot:[],spotLightMap:[],spotShadow:[],spotShadowMap:[],spotLightMatrix:[],rectArea:[],rectAreaLTC1:null,rectAreaLTC2:null,point:[],pointShadow:[],pointShadowMap:[],pointShadowMatrix:[],hemi:[],numSpotLightShadowsWithMaps:0,numLightProbes:0};for(let c=0;c<9;c++)i.probe.push(new j);const r=new j,s=new Un,o=new Un;return{setup:function a(c){let u=0,d=0,p=0;for(let I=0;I<9;I++)i.probe[I].set(0,0,0);let m=0,v=0,x=0,b=0,w=0,T=0,S=0,A=0,V=0,F=0,P=0;c.sort(DSe);for(let I=0,M=c.length;I<M;I++){const O=c[I],z=O.color,N=O.intensity,Ee=O.distance,je=O.shadow&&O.shadow.map?O.shadow.map.texture:null;if(O.isAmbientLight)u+=z.r*N,d+=z.g*N,p+=z.b*N;else if(O.isLightProbe){for(let ee=0;ee<9;ee++)i.probe[ee].addScaledVector(O.sh.coefficients[ee],N);P++}else if(O.isDirectionalLight){const ee=e.get(O);if(ee.color.copy(O.color).multiplyScalar(O.intensity),O.castShadow){const we=O.shadow,oe=t.get(O);oe.shadowIntensity=we.intensity,oe.shadowBias=we.bias,oe.shadowNormalBias=we.normalBias,oe.shadowRadius=we.radius,oe.shadowMapSize=we.mapSize,i.directionalShadow[m]=oe,i.directionalShadowMap[m]=je,i.directionalShadowMatrix[m]=O.shadow.matrix,T++}i.directional[m]=ee,m++}else if(O.isSpotLight){const ee=e.get(O);ee.position.setFromMatrixPosition(O.matrixWorld),ee.color.copy(z).multiplyScalar(N),ee.distance=Ee,ee.coneCos=Math.cos(O.angle),ee.penumbraCos=Math.cos(O.angle*(1-O.penumbra)),ee.decay=O.decay,i.spot[x]=ee;const we=O.shadow;if(O.map&&(i.spotLightMap[V]=O.map,V++,we.updateMatrices(O),O.castShadow&&F++),i.spotLightMatrix[x]=we.matrix,O.castShadow){const oe=t.get(O);oe.shadowIntensity=we.intensity,oe.shadowBias=we.bias,oe.shadowNormalBias=we.normalBias,oe.shadowRadius=we.radius,oe.shadowMapSize=we.mapSize,i.spotShadow[x]=oe,i.spotShadowMap[x]=je,A++}x++}else if(O.isRectAreaLight){const ee=e.get(O);ee.color.copy(z).multiplyScalar(N),ee.halfWidth.set(.5*O.width,0,0),ee.halfHeight.set(0,.5*O.height,0),i.rectArea[b]=ee,b++}else if(O.isPointLight){const ee=e.get(O);if(ee.color.copy(O.color).multiplyScalar(O.intensity),ee.distance=O.distance,ee.decay=O.decay,O.castShadow){const we=O.shadow,oe=t.get(O);oe.shadowIntensity=we.intensity,oe.shadowBias=we.bias,oe.shadowNormalBias=we.normalBias,oe.shadowRadius=we.radius,oe.shadowMapSize=we.mapSize,oe.shadowCameraNear=we.camera.near,oe.shadowCameraFar=we.camera.far,i.pointShadow[v]=oe,i.pointShadowMap[v]=je,i.pointShadowMatrix[v]=O.shadow.matrix,S++}i.point[v]=ee,v++}else if(O.isHemisphereLight){const ee=e.get(O);ee.skyColor.copy(O.color).multiplyScalar(N),ee.groundColor.copy(O.groundColor).multiplyScalar(N),i.hemi[w]=ee,w++}}b>0&&(!0===n.has("OES_texture_float_linear")?(i.rectAreaLTC1=Nt.LTC_FLOAT_1,i.rectAreaLTC2=Nt.LTC_FLOAT_2):(i.rectAreaLTC1=Nt.LTC_HALF_1,i.rectAreaLTC2=Nt.LTC_HALF_2)),i.ambient[0]=u,i.ambient[1]=d,i.ambient[2]=p;const D=i.hash;(D.directionalLength!==m||D.pointLength!==v||D.spotLength!==x||D.rectAreaLength!==b||D.hemiLength!==w||D.numDirectionalShadows!==T||D.numPointShadows!==S||D.numSpotShadows!==A||D.numSpotMaps!==V||D.numLightProbes!==P)&&(i.directional.length=m,i.spot.length=x,i.rectArea.length=b,i.point.length=v,i.hemi.length=w,i.directionalShadow.length=T,i.directionalShadowMap.length=T,i.pointShadow.length=S,i.pointShadowMap.length=S,i.spotShadow.length=A,i.spotShadowMap.length=A,i.directionalShadowMatrix.length=T,i.pointShadowMatrix.length=S,i.spotLightMatrix.length=A+V-F,i.spotLightMap.length=V,i.numSpotLightShadowsWithMaps=F,i.numLightProbes=P,D.directionalLength=m,D.pointLength=v,D.spotLength=x,D.rectAreaLength=b,D.hemiLength=w,D.numDirectionalShadows=T,D.numPointShadows=S,D.numSpotShadows=A,D.numSpotMaps=V,D.numLightProbes=P,i.version=MSe++)},setupView:function l(c,u){let d=0,p=0,m=0,v=0,x=0;const b=u.matrixWorldInverse;for(let w=0,T=c.length;w<T;w++){const S=c[w];if(S.isDirectionalLight){const A=i.directional[d];A.direction.setFromMatrixPosition(S.matrixWorld),r.setFromMatrixPosition(S.target.matrixWorld),A.direction.sub(r),A.direction.transformDirection(b),d++}else if(S.isSpotLight){const A=i.spot[m];A.position.setFromMatrixPosition(S.matrixWorld),A.position.applyMatrix4(b),A.direction.setFromMatrixPosition(S.matrixWorld),r.setFromMatrixPosition(S.target.matrixWorld),A.direction.sub(r),A.direction.transformDirection(b),m++}else if(S.isRectAreaLight){const A=i.rectArea[v];A.position.setFromMatrixPosition(S.matrixWorld),A.position.applyMatrix4(b),o.identity(),s.copy(S.matrixWorld),s.premultiply(b),o.extractRotation(s),A.halfWidth.set(.5*S.width,0,0),A.halfHeight.set(0,.5*S.height,0),A.halfWidth.applyMatrix4(o),A.halfHeight.applyMatrix4(o),v++}else if(S.isPointLight){const A=i.point[p];A.position.setFromMatrixPosition(S.matrixWorld),A.position.applyMatrix4(b),p++}else if(S.isHemisphereLight){const A=i.hemi[x];A.direction.setFromMatrixPosition(S.matrixWorld),A.direction.transformDirection(b),x++}}},state:i}}function D7(n){const e=new RSe(n),t=[],i=[],c={lightsArray:t,shadowsArray:i,camera:null,lights:e,transmissionRenderTarget:{}};return{init:function r(u){c.camera=u,t.length=0,i.length=0},state:c,setupLights:function a(){e.setup(t)},setupLightsView:function l(u){e.setupView(t,u)},pushLight:function s(u){t.push(u)},pushShadow:function o(u){i.push(u)}}}function PSe(n){let e=new WeakMap;return{get:function t(r,s=0){const o=e.get(r);let a;return void 0===o?(a=new D7(n),e.set(r,[a])):s>=o.length?(a=new D7(n),o.push(a)):a=o[s],a},dispose:function i(){e=new WeakMap}}}function NSe(n,e,t){let i=new eI;const r=new et,s=new et,o=new zi,a=new Eq({depthPacking:3201}),l=new Tq,c={},u=t.maxTextureSize,d={0:1,1:0,2:2},p=new Ic({defines:{VSM_SAMPLES:8},uniforms:{shadow_pass:{value:null},resolution:{value:new et},radius:{value:4}},vertexShader:"void main() {\n\tgl_Position = vec4( position, 1.0 );\n}",fragmentShader:"uniform sampler2D shadow_pass;\nuniform vec2 resolution;\nuniform float radius;\n#include <packing>\nvoid main() {\n\tconst float samples = float( VSM_SAMPLES );\n\tfloat mean = 0.0;\n\tfloat squared_mean = 0.0;\n\tfloat uvStride = samples <= 1.0 ? 0.0 : 2.0 / ( samples - 1.0 );\n\tfloat uvStart = samples <= 1.0 ? 0.0 : - 1.0;\n\tfor ( float i = 0.0; i < samples; i ++ ) {\n\t\tfloat uvOffset = uvStart + i * uvStride;\n\t\t#ifdef HORIZONTAL_PASS\n\t\t\tvec2 distribution = unpackRGBATo2Half( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( uvOffset, 0.0 ) * radius ) / resolution ) );\n\t\t\tmean += distribution.x;\n\t\t\tsquared_mean += distribution.y * distribution.y + distribution.x * distribution.x;\n\t\t#else\n\t\t\tfloat depth = unpackRGBAToDepth( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( 0.0, uvOffset ) * radius ) / resolution ) );\n\t\t\tmean += depth;\n\t\t\tsquared_mean += depth * depth;\n\t\t#endif\n\t}\n\tmean = mean / samples;\n\tsquared_mean = squared_mean / samples;\n\tfloat std_dev = sqrt( squared_mean - mean * mean );\n\tgl_FragColor = pack2HalfToRGBA( vec2( mean, std_dev ) );\n}"}),m=p.clone();m.defines.HORIZONTAL_PASS=1;const v=new oi;v.setAttribute("position",new cr(new Float32Array([-1,-1,.5,3,-1,.5,-1,3,.5]),3));const x=new xs(v,p),b=this;this.enabled=!1,this.autoUpdate=!0,this.needsUpdate=!1,this.type=Q$;let w=this.type;function T(F,P){const D=e.update(x);p.defines.VSM_SAMPLES!==F.blurSamples&&(p.defines.VSM_SAMPLES=F.blurSamples,m.defines.VSM_SAMPLES=F.blurSamples,p.needsUpdate=!0,m.needsUpdate=!0),null===F.mapPass&&(F.mapPass=new Lu(r.x,r.y)),p.uniforms.shadow_pass.value=F.map.texture,p.uniforms.resolution.value=F.mapSize,p.uniforms.radius.value=F.radius,n.setRenderTarget(F.mapPass),n.clear(),n.renderBufferDirect(P,null,D,p,x,null),m.uniforms.shadow_pass.value=F.mapPass.texture,m.uniforms.resolution.value=F.mapSize,m.uniforms.radius.value=F.radius,n.setRenderTarget(F.map),n.clear(),n.renderBufferDirect(P,null,D,m,x,null)}function S(F,P,D,I){let M=null;const O=!0===D.isPointLight?F.customDistanceMaterial:F.customDepthMaterial;if(void 0!==O)M=O;else if(M=!0===D.isPointLight?l:a,n.localClippingEnabled&&!0===P.clipShadows&&Array.isArray(P.clippingPlanes)&&0!==P.clippingPlanes.length||P.displacementMap&&0!==P.displacementScale||P.alphaMap&&P.alphaTest>0||P.map&&P.alphaTest>0){const z=M.uuid,N=P.uuid;let Ee=c[z];void 0===Ee&&(Ee={},c[z]=Ee);let je=Ee[N];void 0===je&&(je=M.clone(),Ee[N]=je,P.addEventListener("dispose",V)),M=je}return M.visible=P.visible,M.wireframe=P.wireframe,M.side=I===Ru?null!==P.shadowSide?P.shadowSide:P.side:null!==P.shadowSide?P.shadowSide:d[P.side],M.alphaMap=P.alphaMap,M.alphaTest=P.alphaTest,M.map=P.map,M.clipShadows=P.clipShadows,M.clippingPlanes=P.clippingPlanes,M.clipIntersection=P.clipIntersection,M.displacementMap=P.displacementMap,M.displacementScale=P.displacementScale,M.displacementBias=P.displacementBias,M.wireframeLinewidth=P.wireframeLinewidth,M.linewidth=P.linewidth,!0===D.isPointLight&&!0===M.isMeshDistanceMaterial&&(n.properties.get(M).light=D),M}function A(F,P,D,I,M){if(!1===F.visible)return;if(F.layers.test(P.layers)&&(F.isMesh||F.isLine||F.isPoints)&&(F.castShadow||F.receiveShadow&&M===Ru)&&(!F.frustumCulled||i.intersectsObject(F))){F.modelViewMatrix.multiplyMatrices(D.matrixWorldInverse,F.matrixWorld);const N=e.update(F),Ee=F.material;if(Array.isArray(Ee)){const je=N.groups;for(let ee=0,we=je.length;ee<we;ee++){const oe=je[ee],$e=Ee[oe.materialIndex];if($e&&$e.visible){const vt=S(F,$e,I,M);F.onBeforeShadow(n,F,P,D,N,vt,oe),n.renderBufferDirect(D,null,N,vt,F,oe),F.onAfterShadow(n,F,P,D,N,vt,oe)}}}else if(Ee.visible){const je=S(F,Ee,I,M);F.onBeforeShadow(n,F,P,D,N,je,null),n.renderBufferDirect(D,null,N,je,F,null),F.onAfterShadow(n,F,P,D,N,je,null)}}const z=F.children;for(let N=0,Ee=z.length;N<Ee;N++)A(z[N],P,D,I,M)}function V(F){F.target.removeEventListener("dispose",V);for(const D in c){const I=c[D],M=F.target.uuid;M in I&&(I[M].dispose(),delete I[M])}}this.render=function(F,P,D){if(!1===b.enabled||!1===b.autoUpdate&&!1===b.needsUpdate||0===F.length)return;const I=n.getRenderTarget(),M=n.getActiveCubeFace(),O=n.getActiveMipmapLevel(),z=n.state;z.setBlending(0),z.buffers.color.setClear(1,1,1,1),z.buffers.depth.setTest(!0),z.setScissorTest(!1);const N=w!==Ru&&this.type===Ru,Ee=w===Ru&&this.type!==Ru;for(let je=0,ee=F.length;je<ee;je++){const we=F[je],oe=we.shadow;if(void 0===oe){console.warn("THREE.WebGLShadowMap:",we,"has no shadow.");continue}if(!1===oe.autoUpdate&&!1===oe.needsUpdate)continue;r.copy(oe.mapSize);const $e=oe.getFrameExtents();if(r.multiply($e),s.copy(oe.mapSize),(r.x>u||r.y>u)&&(r.x>u&&(s.x=Math.floor(u/$e.x),r.x=s.x*$e.x,oe.mapSize.x=s.x),r.y>u&&(s.y=Math.floor(u/$e.y),r.y=s.y*$e.y,oe.mapSize.y=s.y)),null===oe.map||!0===N||!0===Ee){const Ft=this.type!==Ru?{minFilter:To,magFilter:To}:{};null!==oe.map&&oe.map.dispose(),oe.map=new Lu(r.x,r.y,Ft),oe.map.texture.name=we.name+".shadowMap",oe.camera.updateProjectionMatrix()}n.setRenderTarget(oe.map),n.clear();const vt=oe.getViewportCount();for(let Ft=0;Ft<vt;Ft++){const rn=oe.getViewport(Ft);o.set(s.x*rn.x,s.y*rn.y,s.x*rn.z,s.y*rn.w),z.viewport(o),oe.updateMatrices(we,Ft),i=oe.getFrustum(),A(P,D,oe.camera,we,this.type)}!0!==oe.isPointLightShadow&&this.type===Ru&&T(oe,D),oe.needsUpdate=!1}w=this.type,b.needsUpdate=!1,n.setRenderTarget(I,M,O)}}const FSe={0:1,2:6,4:7,3:5,1:0,6:2,7:4,5:3};function LSe(n,e){const s=new function t(){let ie=!1;const Lt=new zi;let Le=null;const Xe=new zi(0,0,0,0);return{setMask:function(zt){Le!==zt&&!ie&&(n.colorMask(zt,zt,zt,zt),Le=zt)},setLocked:function(zt){ie=zt},setClear:function(zt,Ut,Dn,Rr,hs){!0===hs&&(zt*=Rr,Ut*=Rr,Dn*=Rr),Lt.set(zt,Ut,Dn,Rr),!1===Xe.equals(Lt)&&(n.clearColor(zt,Ut,Dn,Rr),Xe.copy(Lt))},reset:function(){ie=!1,Le=null,Xe.set(-1,0,0,0)}}},o=new function i(){let ie=!1,Lt=!1,Le=null,Xe=null,zt=null;return{setReversed:function(Ut){if(Lt!==Ut){const Dn=e.get("EXT_clip_control");Dn.clipControlEXT(Dn.LOWER_LEFT_EXT,Lt?Dn.ZERO_TO_ONE_EXT:Dn.NEGATIVE_ONE_TO_ONE_EXT);const Rr=zt;zt=null,this.setClear(Rr)}Lt=Ut},getReversed:function(){return Lt},setTest:function(Ut){Ut?Ze(n.DEPTH_TEST):ln(n.DEPTH_TEST)},setMask:function(Ut){Le!==Ut&&!ie&&(n.depthMask(Ut),Le=Ut)},setFunc:function(Ut){if(Lt&&(Ut=FSe[Ut]),Xe!==Ut){switch(Ut){case 0:n.depthFunc(n.NEVER);break;case 1:n.depthFunc(n.ALWAYS);break;case 2:n.depthFunc(n.LESS);break;case 3:default:n.depthFunc(n.LEQUAL);break;case 4:n.depthFunc(n.EQUAL);break;case 5:n.depthFunc(n.GEQUAL);break;case 6:n.depthFunc(n.GREATER);break;case 7:n.depthFunc(n.NOTEQUAL)}Xe=Ut}},setLocked:function(Ut){ie=Ut},setClear:function(Ut){zt!==Ut&&(Lt&&(Ut=1-Ut),n.clearDepth(Ut),zt=Ut)},reset:function(){ie=!1,Le=null,Xe=null,zt=null,Lt=!1}}},a=new function r(){let ie=!1,Lt=null,Le=null,Xe=null,zt=null,Ut=null,Dn=null,Rr=null,hs=null;return{setTest:function(Hi){ie||(Hi?Ze(n.STENCIL_TEST):ln(n.STENCIL_TEST))},setMask:function(Hi){Lt!==Hi&&!ie&&(n.stencilMask(Hi),Lt=Hi)},setFunc:function(Hi,io,xl){(Le!==Hi||Xe!==io||zt!==xl)&&(n.stencilFunc(Hi,io,xl),Le=Hi,Xe=io,zt=xl)},setOp:function(Hi,io,xl){(Ut!==Hi||Dn!==io||Rr!==xl)&&(n.stencilOp(Hi,io,xl),Ut=Hi,Dn=io,Rr=xl)},setLocked:function(Hi){ie=Hi},setClear:function(Hi){hs!==Hi&&(n.clearStencil(Hi),hs=Hi)},reset:function(){ie=!1,Lt=null,Le=null,Xe=null,zt=null,Ut=null,Dn=null,Rr=null,hs=null}}},l=new WeakMap,c=new WeakMap;let u={},d={},p=new WeakMap,m=[],v=null,x=!1,b=null,w=null,T=null,S=null,A=null,V=null,F=null,P=new Zt(0,0,0),D=0,I=!1,M=null,O=null,z=null,N=null,Ee=null;const je=n.getParameter(n.MAX_COMBINED_TEXTURE_IMAGE_UNITS);let ee=!1,we=0;const oe=n.getParameter(n.VERSION);-1!==oe.indexOf("WebGL")?(we=parseFloat(/^WebGL (\d)/.exec(oe)[1]),ee=we>=1):-1!==oe.indexOf("OpenGL ES")&&(we=parseFloat(/^OpenGL ES (\d)/.exec(oe)[1]),ee=we>=2);let $e=null,vt={};const Ft=n.getParameter(n.SCISSOR_BOX),rn=n.getParameter(n.VIEWPORT),gn=(new zi).fromArray(Ft),Re=(new zi).fromArray(rn);function pt(ie,Lt,Le,Xe){const zt=new Uint8Array(4),Ut=n.createTexture();n.bindTexture(ie,Ut),n.texParameteri(ie,n.TEXTURE_MIN_FILTER,n.NEAREST),n.texParameteri(ie,n.TEXTURE_MAG_FILTER,n.NEAREST);for(let Dn=0;Dn<Le;Dn++)ie===n.TEXTURE_3D||ie===n.TEXTURE_2D_ARRAY?n.texImage3D(Lt,0,n.RGBA,1,1,Xe,0,n.RGBA,n.UNSIGNED_BYTE,zt):n.texImage2D(Lt+Dn,0,n.RGBA,1,1,0,n.RGBA,n.UNSIGNED_BYTE,zt);return Ut}const cn={};function Ze(ie){!0!==u[ie]&&(n.enable(ie),u[ie]=!0)}function ln(ie){!1!==u[ie]&&(n.disable(ie),u[ie]=!1)}cn[n.TEXTURE_2D]=pt(n.TEXTURE_2D,n.TEXTURE_2D,1),cn[n.TEXTURE_CUBE_MAP]=pt(n.TEXTURE_CUBE_MAP,n.TEXTURE_CUBE_MAP_POSITIVE_X,6),cn[n.TEXTURE_2D_ARRAY]=pt(n.TEXTURE_2D_ARRAY,n.TEXTURE_2D_ARRAY,1,1),cn[n.TEXTURE_3D]=pt(n.TEXTURE_3D,n.TEXTURE_3D,1,1),s.setClear(0,0,0,1),o.setClear(1),a.setClear(0),Ze(n.DEPTH_TEST),o.setFunc(3),ut(!1),en(1),Ze(n.CULL_FACE),W(0);const lt={100:n.FUNC_ADD,101:n.FUNC_SUBTRACT,102:n.FUNC_REVERSE_SUBTRACT};lt[103]=n.MIN,lt[104]=n.MAX;const it={200:n.ZERO,201:n.ONE,202:n.SRC_COLOR,204:n.SRC_ALPHA,210:n.SRC_ALPHA_SATURATE,208:n.DST_COLOR,206:n.DST_ALPHA,203:n.ONE_MINUS_SRC_COLOR,205:n.ONE_MINUS_SRC_ALPHA,209:n.ONE_MINUS_DST_COLOR,207:n.ONE_MINUS_DST_ALPHA,211:n.CONSTANT_COLOR,212:n.ONE_MINUS_CONSTANT_COLOR,213:n.CONSTANT_ALPHA,214:n.ONE_MINUS_CONSTANT_ALPHA};function W(ie,Lt,Le,Xe,zt,Ut,Dn,Rr,hs,Hi){if(0!==ie){if(!1===x&&(Ze(n.BLEND),x=!0),5===ie)zt=zt||Lt,Ut=Ut||Le,Dn=Dn||Xe,(Lt!==w||zt!==A)&&(n.blendEquationSeparate(lt[Lt],lt[zt]),w=Lt,A=zt),(Le!==T||Xe!==S||Ut!==V||Dn!==F)&&(n.blendFuncSeparate(it[Le],it[Xe],it[Ut],it[Dn]),T=Le,S=Xe,V=Ut,F=Dn),(!1===Rr.equals(P)||hs!==D)&&(n.blendColor(Rr.r,Rr.g,Rr.b,hs),P.copy(Rr),D=hs),b=ie,I=!1;else if(ie!==b||Hi!==I){if((100!==w||100!==A)&&(n.blendEquation(n.FUNC_ADD),w=100,A=100),Hi)switch(ie){case 1:n.blendFuncSeparate(n.ONE,n.ONE_MINUS_SRC_ALPHA,n.ONE,n.ONE_MINUS_SRC_ALPHA);break;case 2:n.blendFunc(n.ONE,n.ONE);break;case 3:n.blendFuncSeparate(n.ZERO,n.ONE_MINUS_SRC_COLOR,n.ZERO,n.ONE);break;case 4:n.blendFuncSeparate(n.ZERO,n.SRC_COLOR,n.ZERO,n.SRC_ALPHA);break;default:console.error("THREE.WebGLState: Invalid blending: ",ie)}else switch(ie){case 1:n.blendFuncSeparate(n.SRC_ALPHA,n.ONE_MINUS_SRC_ALPHA,n.ONE,n.ONE_MINUS_SRC_ALPHA);break;case 2:n.blendFunc(n.SRC_ALPHA,n.ONE);break;case 3:n.blendFuncSeparate(n.ZERO,n.ONE_MINUS_SRC_COLOR,n.ZERO,n.ONE);break;case 4:n.blendFunc(n.ZERO,n.SRC_COLOR);break;default:console.error("THREE.WebGLState: Invalid blending: ",ie)}T=null,S=null,V=null,F=null,P.set(0,0,0),D=0,b=ie,I=Hi}}else!0===x&&(ln(n.BLEND),x=!1)}function ut(ie){M!==ie&&(n.frontFace(ie?n.CW:n.CCW),M=ie)}function en(ie){0!==ie?(Ze(n.CULL_FACE),ie!==O&&n.cullFace(1===ie?n.BACK:2===ie?n.FRONT:n.FRONT_AND_BACK)):ln(n.CULL_FACE),O=ie}function In(ie,Lt,Le){ie?(Ze(n.POLYGON_OFFSET_FILL),(N!==Lt||Ee!==Le)&&(n.polygonOffset(Lt,Le),N=Lt,Ee=Le)):ln(n.POLYGON_OFFSET_FILL)}return{buffers:{color:s,depth:o,stencil:a},enable:Ze,disable:ln,bindFramebuffer:function Mn(ie,Lt){return d[ie]!==Lt&&(n.bindFramebuffer(ie,Lt),d[ie]=Lt,ie===n.DRAW_FRAMEBUFFER&&(d[n.FRAMEBUFFER]=Lt),ie===n.FRAMEBUFFER&&(d[n.DRAW_FRAMEBUFFER]=Lt),!0)},drawBuffers:function Jt(ie,Lt){let Le=m,Xe=!1;if(ie){Le=p.get(Lt),void 0===Le&&(Le=[],p.set(Lt,Le));const zt=ie.textures;if(Le.length!==zt.length||Le[0]!==n.COLOR_ATTACHMENT0){for(let Ut=0,Dn=zt.length;Ut<Dn;Ut++)Le[Ut]=n.COLOR_ATTACHMENT0+Ut;Le.length=zt.length,Xe=!0}}else Le[0]!==n.BACK&&(Le[0]=n.BACK,Xe=!0);Xe&&n.drawBuffers(Le)},useProgram:function li(ie){return v!==ie&&(n.useProgram(ie),v=ie,!0)},setBlending:W,setMaterial:function dn(ie,Lt){2===ie.side?ln(n.CULL_FACE):Ze(n.CULL_FACE);let Le=1===ie.side;Lt&&(Le=!Le),ut(Le),1===ie.blending&&!1===ie.transparent?W(0):W(ie.blending,ie.blendEquation,ie.blendSrc,ie.blendDst,ie.blendEquationAlpha,ie.blendSrcAlpha,ie.blendDstAlpha,ie.blendColor,ie.blendAlpha,ie.premultipliedAlpha),o.setFunc(ie.depthFunc),o.setTest(ie.depthTest),o.setMask(ie.depthWrite),s.setMask(ie.colorWrite);const Xe=ie.stencilWrite;a.setTest(Xe),Xe&&(a.setMask(ie.stencilWriteMask),a.setFunc(ie.stencilFunc,ie.stencilRef,ie.stencilFuncMask),a.setOp(ie.stencilFail,ie.stencilZFail,ie.stencilZPass)),In(ie.polygonOffset,ie.polygonOffsetFactor,ie.polygonOffsetUnits),!0===ie.alphaToCoverage?Ze(n.SAMPLE_ALPHA_TO_COVERAGE):ln(n.SAMPLE_ALPHA_TO_COVERAGE)},setFlipSided:ut,setCullFace:en,setLineWidth:function Et(ie){ie!==z&&(ee&&n.lineWidth(ie),z=ie)},setPolygonOffset:In,setScissorTest:function Bt(ie){ie?Ze(n.SCISSOR_TEST):ln(n.SCISSOR_TEST)},activeTexture:function G(ie){void 0===ie&&(ie=n.TEXTURE0+je-1),$e!==ie&&(n.activeTexture(ie),$e=ie)},bindTexture:function L(ie,Lt,Le){void 0===Le&&(Le=null===$e?n.TEXTURE0+je-1:$e);let Xe=vt[Le];void 0===Xe&&(Xe={type:void 0,texture:void 0},vt[Le]=Xe),(Xe.type!==ie||Xe.texture!==Lt)&&($e!==Le&&(n.activeTexture(Le),$e=Le),n.bindTexture(ie,Lt||cn[ie]),Xe.type=ie,Xe.texture=Lt)},unbindTexture:function pe(){const ie=vt[$e];void 0!==ie&&void 0!==ie.type&&(n.bindTexture(ie.type,null),ie.type=void 0,ie.texture=void 0)},compressedTexImage2D:function ze(){try{n.compressedTexImage2D.apply(n,arguments)}catch(ie){console.error("THREE.WebGLState:",ie)}},compressedTexImage3D:function tt(){try{n.compressedTexImage3D.apply(n,arguments)}catch(ie){console.error("THREE.WebGLState:",ie)}},texImage2D:function sn(){try{n.texImage2D.apply(n,arguments)}catch(ie){console.error("THREE.WebGLState:",ie)}},texImage3D:function bn(){try{n.texImage3D.apply(n,arguments)}catch(ie){console.error("THREE.WebGLState:",ie)}},updateUBOMapping:function yi(ie,Lt){let Le=c.get(Lt);void 0===Le&&(Le=new WeakMap,c.set(Lt,Le));let Xe=Le.get(ie);void 0===Xe&&(Xe=n.getUniformBlockIndex(Lt,ie.name),Le.set(ie,Xe))},uniformBlockBinding:function ei(ie,Lt){const Xe=c.get(Lt).get(ie);l.get(Lt)!==Xe&&(n.uniformBlockBinding(Lt,Xe,ie.__bindingPointIndex),l.set(Lt,Xe))},texStorage2D:function hi(){try{n.texStorage2D.apply(n,arguments)}catch(ie){console.error("THREE.WebGLState:",ie)}},texStorage3D:function mt(){try{n.texStorage3D.apply(n,arguments)}catch(ie){console.error("THREE.WebGLState:",ie)}},texSubImage2D:function He(){try{n.texSubImage2D.apply(n,arguments)}catch(ie){console.error("THREE.WebGLState:",ie)}},texSubImage3D:function Ot(){try{n.texSubImage3D.apply(n,arguments)}catch(ie){console.error("THREE.WebGLState:",ie)}},compressedTexSubImage2D:function yt(){try{n.compressedTexSubImage2D.apply(n,arguments)}catch(ie){console.error("THREE.WebGLState:",ie)}},compressedTexSubImage3D:function jt(){try{n.compressedTexSubImage3D.apply(n,arguments)}catch(ie){console.error("THREE.WebGLState:",ie)}},scissor:function On(ie){!1===gn.equals(ie)&&(n.scissor(ie.x,ie.y,ie.z,ie.w),gn.copy(ie))},viewport:function nn(ie){!1===Re.equals(ie)&&(n.viewport(ie.x,ie.y,ie.z,ie.w),Re.copy(ie))},reset:function rr(){n.disable(n.BLEND),n.disable(n.CULL_FACE),n.disable(n.DEPTH_TEST),n.disable(n.POLYGON_OFFSET_FILL),n.disable(n.SCISSOR_TEST),n.disable(n.STENCIL_TEST),n.disable(n.SAMPLE_ALPHA_TO_COVERAGE),n.blendEquation(n.FUNC_ADD),n.blendFunc(n.ONE,n.ZERO),n.blendFuncSeparate(n.ONE,n.ZERO,n.ONE,n.ZERO),n.blendColor(0,0,0,0),n.colorMask(!0,!0,!0,!0),n.clearColor(0,0,0,0),n.depthMask(!0),n.depthFunc(n.LESS),o.setReversed(!1),n.clearDepth(1),n.stencilMask(4294967295),n.stencilFunc(n.ALWAYS,0,4294967295),n.stencilOp(n.KEEP,n.KEEP,n.KEEP),n.clearStencil(0),n.cullFace(n.BACK),n.frontFace(n.CCW),n.polygonOffset(0,0),n.activeTexture(n.TEXTURE0),n.bindFramebuffer(n.FRAMEBUFFER,null),n.bindFramebuffer(n.DRAW_FRAMEBUFFER,null),n.bindFramebuffer(n.READ_FRAMEBUFFER,null),n.useProgram(null),n.lineWidth(1),n.scissor(0,0,n.canvas.width,n.canvas.height),n.viewport(0,0,n.canvas.width,n.canvas.height),u={},$e=null,vt={},d={},p=new WeakMap,m=[],v=null,x=!1,b=null,w=null,T=null,S=null,A=null,V=null,F=null,P=new Zt(0,0,0),D=0,I=!1,M=null,O=null,z=null,N=null,Ee=null,gn.set(0,0,n.canvas.width,n.canvas.height),Re.set(0,0,n.canvas.width,n.canvas.height),s.reset(),o.reset(),a.reset()}}}function VSe(n,e,t,i,r,s,o){const a=e.has("WEBGL_multisampled_render_to_texture")?e.get("WEBGL_multisampled_render_to_texture"):null,l=!(typeof navigator>"u")&&/OculusBrowser/g.test(navigator.userAgent),c=new et,u=new WeakMap;let d;const p=new WeakMap;let m=!1;try{m=typeof OffscreenCanvas<"u"&&null!==new OffscreenCanvas(1,1).getContext("2d")}catch{}function v(G,L){return m?new OffscreenCanvas(G,L):Bb("canvas")}function x(G,L,pe){let ze=1;const tt=Bt(G);if((tt.width>pe||tt.height>pe)&&(ze=pe/Math.max(tt.width,tt.height)),ze<1){if(typeof HTMLImageElement<"u"&&G instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&G instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&G instanceof ImageBitmap||typeof VideoFrame<"u"&&G instanceof VideoFrame){const He=Math.floor(ze*tt.width),Ot=Math.floor(ze*tt.height);void 0===d&&(d=v(He,Ot));const yt=L?v(He,Ot):d;return yt.width=He,yt.height=Ot,yt.getContext("2d").drawImage(G,0,0,He,Ot),console.warn("THREE.WebGLRenderer: Texture has been resized from ("+tt.width+"x"+tt.height+") to ("+He+"x"+Ot+")."),yt}return"data"in G&&console.warn("THREE.WebGLRenderer: Image in DataTexture is too big ("+tt.width+"x"+tt.height+")."),G}return G}function b(G){return G.generateMipmaps}function w(G){n.generateMipmap(G)}function T(G){return G.isWebGLCubeRenderTarget?n.TEXTURE_CUBE_MAP:G.isWebGL3DRenderTarget?n.TEXTURE_3D:G.isWebGLArrayRenderTarget||G.isCompressedArrayTexture?n.TEXTURE_2D_ARRAY:n.TEXTURE_2D}function S(G,L,pe,ze,tt=!1){if(null!==G){if(void 0!==n[G])return n[G];console.warn("THREE.WebGLRenderer: Attempt to use non-existing WebGL internal format '"+G+"'")}let He=L;if(L===n.RED&&(pe===n.FLOAT&&(He=n.R32F),pe===n.HALF_FLOAT&&(He=n.R16F),pe===n.UNSIGNED_BYTE&&(He=n.R8)),L===n.RED_INTEGER&&(pe===n.UNSIGNED_BYTE&&(He=n.R8UI),pe===n.UNSIGNED_SHORT&&(He=n.R16UI),pe===n.UNSIGNED_INT&&(He=n.R32UI),pe===n.BYTE&&(He=n.R8I),pe===n.SHORT&&(He=n.R16I),pe===n.INT&&(He=n.R32I)),L===n.RG&&(pe===n.FLOAT&&(He=n.RG32F),pe===n.HALF_FLOAT&&(He=n.RG16F),pe===n.UNSIGNED_BYTE&&(He=n.RG8)),L===n.RG_INTEGER&&(pe===n.UNSIGNED_BYTE&&(He=n.RG8UI),pe===n.UNSIGNED_SHORT&&(He=n.RG16UI),pe===n.UNSIGNED_INT&&(He=n.RG32UI),pe===n.BYTE&&(He=n.RG8I),pe===n.SHORT&&(He=n.RG16I),pe===n.INT&&(He=n.RG32I)),L===n.RGB_INTEGER&&(pe===n.UNSIGNED_BYTE&&(He=n.RGB8UI),pe===n.UNSIGNED_SHORT&&(He=n.RGB16UI),pe===n.UNSIGNED_INT&&(He=n.RGB32UI),pe===n.BYTE&&(He=n.RGB8I),pe===n.SHORT&&(He=n.RGB16I),pe===n.INT&&(He=n.RGB32I)),L===n.RGBA_INTEGER&&(pe===n.UNSIGNED_BYTE&&(He=n.RGBA8UI),pe===n.UNSIGNED_SHORT&&(He=n.RGBA16UI),pe===n.UNSIGNED_INT&&(He=n.RGBA32UI),pe===n.BYTE&&(He=n.RGBA8I),pe===n.SHORT&&(He=n.RGBA16I),pe===n.INT&&(He=n.RGBA32I)),L===n.RGB&&pe===n.UNSIGNED_INT_5_9_9_9_REV&&(He=n.RGB9_E5),L===n.RGBA){const Ot=tt?AA:Li.getTransfer(ze);pe===n.FLOAT&&(He=n.RGBA32F),pe===n.HALF_FLOAT&&(He=n.RGBA16F),pe===n.UNSIGNED_BYTE&&(He=Ot===ir?n.SRGB8_ALPHA8:n.RGBA8),pe===n.UNSIGNED_SHORT_4_4_4_4&&(He=n.RGBA4),pe===n.UNSIGNED_SHORT_5_5_5_1&&(He=n.RGB5_A1)}return(He===n.R16F||He===n.R32F||He===n.RG16F||He===n.RG32F||He===n.RGBA16F||He===n.RGBA32F)&&e.get("EXT_color_buffer_float"),He}function A(G,L){let pe;return G?null===L||L===ah||L===u_?pe=n.DEPTH24_STENCIL8:L===Fa?pe=n.DEPTH32F_STENCIL8:L===Lb&&(pe=n.DEPTH24_STENCIL8,console.warn("DepthTexture: 16 bit depth attachment is not supported with stencil. Using 24-bit attachment.")):null===L||L===ah||L===u_?pe=n.DEPTH_COMPONENT24:L===Fa?pe=n.DEPTH_COMPONENT32F:L===Lb&&(pe=n.DEPTH_COMPONENT16),pe}function V(G,L){return!0===b(G)||G.isFramebufferTexture&&G.minFilter!==To&&G.minFilter!==Hs?Math.log2(Math.max(L.width,L.height))+1:void 0!==G.mipmaps&&G.mipmaps.length>0?G.mipmaps.length:G.isCompressedTexture&&Array.isArray(G.image)?L.mipmaps.length:1}function F(G){const L=G.target;L.removeEventListener("dispose",F),function D(G){const L=i.get(G);if(void 0===L.__webglInit)return;const pe=G.source,ze=p.get(pe);if(ze){const tt=ze[L.__cacheKey];tt.usedTimes--,0===tt.usedTimes&&I(G),0===Object.keys(ze).length&&p.delete(pe)}i.remove(G)}(L),L.isVideoTexture&&u.delete(L)}function P(G){const L=G.target;L.removeEventListener("dispose",P),function M(G){const L=i.get(G);if(G.depthTexture&&(G.depthTexture.dispose(),i.remove(G.depthTexture)),G.isWebGLCubeRenderTarget)for(let ze=0;ze<6;ze++){if(Array.isArray(L.__webglFramebuffer[ze]))for(let tt=0;tt<L.__webglFramebuffer[ze].length;tt++)n.deleteFramebuffer(L.__webglFramebuffer[ze][tt]);else n.deleteFramebuffer(L.__webglFramebuffer[ze]);L.__webglDepthbuffer&&n.deleteRenderbuffer(L.__webglDepthbuffer[ze])}else{if(Array.isArray(L.__webglFramebuffer))for(let ze=0;ze<L.__webglFramebuffer.length;ze++)n.deleteFramebuffer(L.__webglFramebuffer[ze]);else n.deleteFramebuffer(L.__webglFramebuffer);if(L.__webglDepthbuffer&&n.deleteRenderbuffer(L.__webglDepthbuffer),L.__webglMultisampledFramebuffer&&n.deleteFramebuffer(L.__webglMultisampledFramebuffer),L.__webglColorRenderbuffer)for(let ze=0;ze<L.__webglColorRenderbuffer.length;ze++)L.__webglColorRenderbuffer[ze]&&n.deleteRenderbuffer(L.__webglColorRenderbuffer[ze]);L.__webglDepthRenderbuffer&&n.deleteRenderbuffer(L.__webglDepthRenderbuffer)}const pe=G.textures;for(let ze=0,tt=pe.length;ze<tt;ze++){const He=i.get(pe[ze]);He.__webglTexture&&(n.deleteTexture(He.__webglTexture),o.memory.textures--),i.remove(pe[ze])}i.remove(G)}(L)}function I(G){const L=i.get(G);n.deleteTexture(L.__webglTexture),delete p.get(G.source)[L.__cacheKey],o.memory.textures--}let O=0;function je(G,L){const pe=i.get(G);if(G.isVideoTexture&&function Et(G){const L=o.render.frame;u.get(G)!==L&&(u.set(G,L),G.update())}(G),!1===G.isRenderTargetTexture&&G.version>0&&pe.__version!==G.version){const ze=G.image;if(null===ze)console.warn("THREE.WebGLRenderer: Texture marked for update but no image data found.");else{if(!1!==ze.complete)return void Re(pe,G,L);console.warn("THREE.WebGLRenderer: Texture marked for update but image is incomplete")}}t.bindTexture(n.TEXTURE_2D,pe.__webglTexture,n.TEXTURE0+L)}const $e={1e3:n.REPEAT,[Ll]:n.CLAMP_TO_EDGE,1002:n.MIRRORED_REPEAT},vt={[To]:n.NEAREST,1004:n.NEAREST_MIPMAP_NEAREST,1005:n.NEAREST_MIPMAP_LINEAR,[Hs]:n.LINEAR,1007:n.LINEAR_MIPMAP_NEAREST,[ku]:n.LINEAR_MIPMAP_LINEAR},Ft={512:n.NEVER,519:n.ALWAYS,513:n.LESS,515:n.LEQUAL,514:n.EQUAL,518:n.GEQUAL,516:n.GREATER,517:n.NOTEQUAL};function rn(G,L){if(L.type===Fa&&!1===e.has("OES_texture_float_linear")&&(L.magFilter===Hs||1007===L.magFilter||1005===L.magFilter||L.magFilter===ku||L.minFilter===Hs||1007===L.minFilter||1005===L.minFilter||L.minFilter===ku)&&console.warn("THREE.WebGLRenderer: Unable to use linear filtering with floating point textures. OES_texture_float_linear not supported on this device."),n.texParameteri(G,n.TEXTURE_WRAP_S,$e[L.wrapS]),n.texParameteri(G,n.TEXTURE_WRAP_T,$e[L.wrapT]),(G===n.TEXTURE_3D||G===n.TEXTURE_2D_ARRAY)&&n.texParameteri(G,n.TEXTURE_WRAP_R,$e[L.wrapR]),n.texParameteri(G,n.TEXTURE_MAG_FILTER,vt[L.magFilter]),n.texParameteri(G,n.TEXTURE_MIN_FILTER,vt[L.minFilter]),L.compareFunction&&(n.texParameteri(G,n.TEXTURE_COMPARE_MODE,n.COMPARE_REF_TO_TEXTURE),n.texParameteri(G,n.TEXTURE_COMPARE_FUNC,Ft[L.compareFunction])),!0===e.has("EXT_texture_filter_anisotropic")){if(L.magFilter===To||1005!==L.minFilter&&L.minFilter!==ku||L.type===Fa&&!1===e.has("OES_texture_float_linear"))return;if(L.anisotropy>1||i.get(L).__currentAnisotropy){const pe=e.get("EXT_texture_filter_anisotropic");n.texParameterf(G,pe.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(L.anisotropy,r.getMaxAnisotropy())),i.get(L).__currentAnisotropy=L.anisotropy}}}function gn(G,L){let pe=!1;void 0===G.__webglInit&&(G.__webglInit=!0,L.addEventListener("dispose",F));const ze=L.source;let tt=p.get(ze);void 0===tt&&(tt={},p.set(ze,tt));const He=function Ee(G){const L=[];return L.push(G.wrapS),L.push(G.wrapT),L.push(G.wrapR||0),L.push(G.magFilter),L.push(G.minFilter),L.push(G.anisotropy),L.push(G.internalFormat),L.push(G.format),L.push(G.type),L.push(G.generateMipmaps),L.push(G.premultiplyAlpha),L.push(G.flipY),L.push(G.unpackAlignment),L.push(G.colorSpace),L.join()}(L);if(He!==G.__cacheKey){void 0===tt[He]&&(tt[He]={texture:n.createTexture(),usedTimes:0},o.memory.textures++,pe=!0),tt[He].usedTimes++;const Ot=tt[G.__cacheKey];void 0!==Ot&&(tt[G.__cacheKey].usedTimes--,0===Ot.usedTimes&&I(L)),G.__cacheKey=He,G.__webglTexture=tt[He].texture}return pe}function Re(G,L,pe){let ze=n.TEXTURE_2D;(L.isDataArrayTexture||L.isCompressedArrayTexture)&&(ze=n.TEXTURE_2D_ARRAY),L.isData3DTexture&&(ze=n.TEXTURE_3D);const tt=gn(G,L),He=L.source;t.bindTexture(ze,G.__webglTexture,n.TEXTURE0+pe);const Ot=i.get(He);if(He.version!==Ot.__version||!0===tt){t.activeTexture(n.TEXTURE0+pe);const yt=Li.getPrimaries(Li.workingColorSpace),jt=""===L.colorSpace?null:Li.getPrimaries(L.colorSpace),hi=""===L.colorSpace||yt===jt?n.NONE:n.BROWSER_DEFAULT_WEBGL;n.pixelStorei(n.UNPACK_FLIP_Y_WEBGL,L.flipY),n.pixelStorei(n.UNPACK_PREMULTIPLY_ALPHA_WEBGL,L.premultiplyAlpha),n.pixelStorei(n.UNPACK_ALIGNMENT,L.unpackAlignment),n.pixelStorei(n.UNPACK_COLORSPACE_CONVERSION_WEBGL,hi);let mt=x(L.image,!1,r.maxTextureSize);mt=In(L,mt);const sn=s.convert(L.format,L.colorSpace),bn=s.convert(L.type);let nn,On=S(L.internalFormat,sn,bn,L.colorSpace,L.isVideoTexture);rn(ze,L);const yi=L.mipmaps,ei=!0!==L.isVideoTexture,rr=void 0===Ot.__version||!0===tt,ie=He.dataReady,Lt=V(L,mt);if(L.isDepthTexture)On=A(L.format===h_,L.type),rr&&(ei?t.texStorage2D(n.TEXTURE_2D,1,On,mt.width,mt.height):t.texImage2D(n.TEXTURE_2D,0,On,mt.width,mt.height,0,sn,bn,null));else if(L.isDataTexture)if(yi.length>0){ei&&rr&&t.texStorage2D(n.TEXTURE_2D,Lt,On,yi[0].width,yi[0].height);for(let Le=0,Xe=yi.length;Le<Xe;Le++)nn=yi[Le],ei?ie&&t.texSubImage2D(n.TEXTURE_2D,Le,0,0,nn.width,nn.height,sn,bn,nn.data):t.texImage2D(n.TEXTURE_2D,Le,On,nn.width,nn.height,0,sn,bn,nn.data);L.generateMipmaps=!1}else ei?(rr&&t.texStorage2D(n.TEXTURE_2D,Lt,On,mt.width,mt.height),ie&&t.texSubImage2D(n.TEXTURE_2D,0,0,0,mt.width,mt.height,sn,bn,mt.data)):t.texImage2D(n.TEXTURE_2D,0,On,mt.width,mt.height,0,sn,bn,mt.data);else if(L.isCompressedTexture)if(L.isCompressedArrayTexture){ei&&rr&&t.texStorage3D(n.TEXTURE_2D_ARRAY,Lt,On,yi[0].width,yi[0].height,mt.depth);for(let Le=0,Xe=yi.length;Le<Xe;Le++)if(nn=yi[Le],L.format!==ma)if(null!==sn)if(ei){if(ie)if(L.layerUpdates.size>0){const zt=ZF(nn.width,nn.height,L.format,L.type);for(const Ut of L.layerUpdates){const Dn=nn.data.subarray(Ut*zt/nn.data.BYTES_PER_ELEMENT,(Ut+1)*zt/nn.data.BYTES_PER_ELEMENT);t.compressedTexSubImage3D(n.TEXTURE_2D_ARRAY,Le,0,0,Ut,nn.width,nn.height,1,sn,Dn)}L.clearLayerUpdates()}else t.compressedTexSubImage3D(n.TEXTURE_2D_ARRAY,Le,0,0,0,nn.width,nn.height,mt.depth,sn,nn.data)}else t.compressedTexImage3D(n.TEXTURE_2D_ARRAY,Le,On,nn.width,nn.height,mt.depth,0,nn.data,0,0);else console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()");else ei?ie&&t.texSubImage3D(n.TEXTURE_2D_ARRAY,Le,0,0,0,nn.width,nn.height,mt.depth,sn,bn,nn.data):t.texImage3D(n.TEXTURE_2D_ARRAY,Le,On,nn.width,nn.height,mt.depth,0,sn,bn,nn.data)}else{ei&&rr&&t.texStorage2D(n.TEXTURE_2D,Lt,On,yi[0].width,yi[0].height);for(let Le=0,Xe=yi.length;Le<Xe;Le++)nn=yi[Le],L.format!==ma?null!==sn?ei?ie&&t.compressedTexSubImage2D(n.TEXTURE_2D,Le,0,0,nn.width,nn.height,sn,nn.data):t.compressedTexImage2D(n.TEXTURE_2D,Le,On,nn.width,nn.height,0,nn.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):ei?ie&&t.texSubImage2D(n.TEXTURE_2D,Le,0,0,nn.width,nn.height,sn,bn,nn.data):t.texImage2D(n.TEXTURE_2D,Le,On,nn.width,nn.height,0,sn,bn,nn.data)}else if(L.isDataArrayTexture)if(ei){if(rr&&t.texStorage3D(n.TEXTURE_2D_ARRAY,Lt,On,mt.width,mt.height,mt.depth),ie)if(L.layerUpdates.size>0){const Le=ZF(mt.width,mt.height,L.format,L.type);for(const Xe of L.layerUpdates){const zt=mt.data.subarray(Xe*Le/mt.data.BYTES_PER_ELEMENT,(Xe+1)*Le/mt.data.BYTES_PER_ELEMENT);t.texSubImage3D(n.TEXTURE_2D_ARRAY,0,0,0,Xe,mt.width,mt.height,1,sn,bn,zt)}L.clearLayerUpdates()}else t.texSubImage3D(n.TEXTURE_2D_ARRAY,0,0,0,0,mt.width,mt.height,mt.depth,sn,bn,mt.data)}else t.texImage3D(n.TEXTURE_2D_ARRAY,0,On,mt.width,mt.height,mt.depth,0,sn,bn,mt.data);else if(L.isData3DTexture)ei?(rr&&t.texStorage3D(n.TEXTURE_3D,Lt,On,mt.width,mt.height,mt.depth),ie&&t.texSubImage3D(n.TEXTURE_3D,0,0,0,0,mt.width,mt.height,mt.depth,sn,bn,mt.data)):t.texImage3D(n.TEXTURE_3D,0,On,mt.width,mt.height,mt.depth,0,sn,bn,mt.data);else if(L.isFramebufferTexture){if(rr)if(ei)t.texStorage2D(n.TEXTURE_2D,Lt,On,mt.width,mt.height);else{let Le=mt.width,Xe=mt.height;for(let zt=0;zt<Lt;zt++)t.texImage2D(n.TEXTURE_2D,zt,On,Le,Xe,0,sn,bn,null),Le>>=1,Xe>>=1}}else if(yi.length>0){if(ei&&rr){const Le=Bt(yi[0]);t.texStorage2D(n.TEXTURE_2D,Lt,On,Le.width,Le.height)}for(let Le=0,Xe=yi.length;Le<Xe;Le++)nn=yi[Le],ei?ie&&t.texSubImage2D(n.TEXTURE_2D,Le,0,0,sn,bn,nn):t.texImage2D(n.TEXTURE_2D,Le,On,sn,bn,nn);L.generateMipmaps=!1}else if(ei){if(rr){const Le=Bt(mt);t.texStorage2D(n.TEXTURE_2D,Lt,On,Le.width,Le.height)}ie&&t.texSubImage2D(n.TEXTURE_2D,0,0,0,sn,bn,mt)}else t.texImage2D(n.TEXTURE_2D,0,On,sn,bn,mt);b(L)&&w(ze),Ot.__version=He.version,L.onUpdate&&L.onUpdate(L)}G.__version=L.version}function cn(G,L,pe,ze,tt,He){const Ot=s.convert(pe.format,pe.colorSpace),yt=s.convert(pe.type),jt=S(pe.internalFormat,Ot,yt,pe.colorSpace),hi=i.get(L),mt=i.get(pe);if(mt.__renderTarget=L,!hi.__hasExternalTextures){const sn=Math.max(1,L.width>>He),bn=Math.max(1,L.height>>He);tt===n.TEXTURE_3D||tt===n.TEXTURE_2D_ARRAY?t.texImage3D(tt,He,jt,sn,bn,L.depth,0,Ot,yt,null):t.texImage2D(tt,He,jt,sn,bn,0,Ot,yt,null)}t.bindFramebuffer(n.FRAMEBUFFER,G),en(L)?a.framebufferTexture2DMultisampleEXT(n.FRAMEBUFFER,ze,tt,mt.__webglTexture,0,ut(L)):(tt===n.TEXTURE_2D||tt>=n.TEXTURE_CUBE_MAP_POSITIVE_X&&tt<=n.TEXTURE_CUBE_MAP_NEGATIVE_Z)&&n.framebufferTexture2D(n.FRAMEBUFFER,ze,tt,mt.__webglTexture,He),t.bindFramebuffer(n.FRAMEBUFFER,null)}function Ze(G,L,pe){if(n.bindRenderbuffer(n.RENDERBUFFER,G),L.depthBuffer){const ze=L.depthTexture,He=A(L.stencilBuffer,ze&&ze.isDepthTexture?ze.type:null),Ot=L.stencilBuffer?n.DEPTH_STENCIL_ATTACHMENT:n.DEPTH_ATTACHMENT,yt=ut(L);en(L)?a.renderbufferStorageMultisampleEXT(n.RENDERBUFFER,yt,He,L.width,L.height):pe?n.renderbufferStorageMultisample(n.RENDERBUFFER,yt,He,L.width,L.height):n.renderbufferStorage(n.RENDERBUFFER,He,L.width,L.height),n.framebufferRenderbuffer(n.FRAMEBUFFER,Ot,n.RENDERBUFFER,G)}else{const ze=L.textures;for(let tt=0;tt<ze.length;tt++){const He=ze[tt],Ot=s.convert(He.format,He.colorSpace),yt=s.convert(He.type),jt=S(He.internalFormat,Ot,yt,He.colorSpace),hi=ut(L);pe&&!1===en(L)?n.renderbufferStorageMultisample(n.RENDERBUFFER,hi,jt,L.width,L.height):en(L)?a.renderbufferStorageMultisampleEXT(n.RENDERBUFFER,hi,jt,L.width,L.height):n.renderbufferStorage(n.RENDERBUFFER,jt,L.width,L.height)}}n.bindRenderbuffer(n.RENDERBUFFER,null)}function Mn(G){const L=i.get(G),pe=!0===G.isWebGLCubeRenderTarget;if(L.__boundDepthTexture!==G.depthTexture){const ze=G.depthTexture;if(L.__depthDisposeCallback&&L.__depthDisposeCallback(),ze){const tt=()=>{delete L.__boundDepthTexture,delete L.__depthDisposeCallback,ze.removeEventListener("dispose",tt)};ze.addEventListener("dispose",tt),L.__depthDisposeCallback=tt}L.__boundDepthTexture=ze}if(G.depthTexture&&!L.__autoAllocateDepthBuffer){if(pe)throw new Error("target.depthTexture not supported in Cube render targets");!function ln(G,L){if(L&&L.isWebGLCubeRenderTarget)throw new Error("Depth Texture with cube render targets is not supported");if(t.bindFramebuffer(n.FRAMEBUFFER,G),!L.depthTexture||!L.depthTexture.isDepthTexture)throw new Error("renderTarget.depthTexture must be an instance of THREE.DepthTexture");const ze=i.get(L.depthTexture);ze.__renderTarget=L,(!ze.__webglTexture||L.depthTexture.image.width!==L.width||L.depthTexture.image.height!==L.height)&&(L.depthTexture.image.width=L.width,L.depthTexture.image.height=L.height,L.depthTexture.needsUpdate=!0),je(L.depthTexture,0);const tt=ze.__webglTexture,He=ut(L);if(L.depthTexture.format===d_)en(L)?a.framebufferTexture2DMultisampleEXT(n.FRAMEBUFFER,n.DEPTH_ATTACHMENT,n.TEXTURE_2D,tt,0,He):n.framebufferTexture2D(n.FRAMEBUFFER,n.DEPTH_ATTACHMENT,n.TEXTURE_2D,tt,0);else{if(L.depthTexture.format!==h_)throw new Error("Unknown depthTexture format");en(L)?a.framebufferTexture2DMultisampleEXT(n.FRAMEBUFFER,n.DEPTH_STENCIL_ATTACHMENT,n.TEXTURE_2D,tt,0,He):n.framebufferTexture2D(n.FRAMEBUFFER,n.DEPTH_STENCIL_ATTACHMENT,n.TEXTURE_2D,tt,0)}}(L.__webglFramebuffer,G)}else if(pe){L.__webglDepthbuffer=[];for(let ze=0;ze<6;ze++)if(t.bindFramebuffer(n.FRAMEBUFFER,L.__webglFramebuffer[ze]),void 0===L.__webglDepthbuffer[ze])L.__webglDepthbuffer[ze]=n.createRenderbuffer(),Ze(L.__webglDepthbuffer[ze],G,!1);else{const tt=G.stencilBuffer?n.DEPTH_STENCIL_ATTACHMENT:n.DEPTH_ATTACHMENT,He=L.__webglDepthbuffer[ze];n.bindRenderbuffer(n.RENDERBUFFER,He),n.framebufferRenderbuffer(n.FRAMEBUFFER,tt,n.RENDERBUFFER,He)}}else if(t.bindFramebuffer(n.FRAMEBUFFER,L.__webglFramebuffer),void 0===L.__webglDepthbuffer)L.__webglDepthbuffer=n.createRenderbuffer(),Ze(L.__webglDepthbuffer,G,!1);else{const ze=G.stencilBuffer?n.DEPTH_STENCIL_ATTACHMENT:n.DEPTH_ATTACHMENT,tt=L.__webglDepthbuffer;n.bindRenderbuffer(n.RENDERBUFFER,tt),n.framebufferRenderbuffer(n.FRAMEBUFFER,ze,n.RENDERBUFFER,tt)}t.bindFramebuffer(n.FRAMEBUFFER,null)}const it=[],W=[];function ut(G){return Math.min(r.maxSamples,G.samples)}function en(G){const L=i.get(G);return G.samples>0&&!0===e.has("WEBGL_multisampled_render_to_texture")&&!1!==L.__useRenderToTexture}function In(G,L){const pe=G.colorSpace,ze=G.format,tt=G.type;return!0===G.isCompressedTexture||!0===G.isVideoTexture||pe!==m_&&""!==pe&&(Li.getTransfer(pe)===ir?(ze!==ma||tt!==Ou)&&console.warn("THREE.WebGLTextures: sRGB encoded textures have to use RGBAFormat and UnsignedByteType."):console.error("THREE.WebGLTextures: Unsupported texture color space:",pe)),L}function Bt(G){return typeof HTMLImageElement<"u"&&G instanceof HTMLImageElement?(c.width=G.naturalWidth||G.width,c.height=G.naturalHeight||G.height):typeof VideoFrame<"u"&&G instanceof VideoFrame?(c.width=G.displayWidth,c.height=G.displayHeight):(c.width=G.width,c.height=G.height),c}this.allocateTextureUnit=function N(){const G=O;return G>=r.maxTextures&&console.warn("THREE.WebGLTextures: Trying to use "+G+" texture units while this GPU supports only "+r.maxTextures),O+=1,G},this.resetTextureUnits=function z(){O=0},this.setTexture2D=je,this.setTexture2DArray=function ee(G,L){const pe=i.get(G);G.version>0&&pe.__version!==G.version?Re(pe,G,L):t.bindTexture(n.TEXTURE_2D_ARRAY,pe.__webglTexture,n.TEXTURE0+L)},this.setTexture3D=function we(G,L){const pe=i.get(G);G.version>0&&pe.__version!==G.version?Re(pe,G,L):t.bindTexture(n.TEXTURE_3D,pe.__webglTexture,n.TEXTURE0+L)},this.setTextureCube=function oe(G,L){const pe=i.get(G);G.version>0&&pe.__version!==G.version?function pt(G,L,pe){if(6!==L.image.length)return;const ze=gn(G,L),tt=L.source;t.bindTexture(n.TEXTURE_CUBE_MAP,G.__webglTexture,n.TEXTURE0+pe);const He=i.get(tt);if(tt.version!==He.__version||!0===ze){t.activeTexture(n.TEXTURE0+pe);const Ot=Li.getPrimaries(Li.workingColorSpace),yt=""===L.colorSpace?null:Li.getPrimaries(L.colorSpace),jt=""===L.colorSpace||Ot===yt?n.NONE:n.BROWSER_DEFAULT_WEBGL;n.pixelStorei(n.UNPACK_FLIP_Y_WEBGL,L.flipY),n.pixelStorei(n.UNPACK_PREMULTIPLY_ALPHA_WEBGL,L.premultiplyAlpha),n.pixelStorei(n.UNPACK_ALIGNMENT,L.unpackAlignment),n.pixelStorei(n.UNPACK_COLORSPACE_CONVERSION_WEBGL,jt);const hi=L.isCompressedTexture||L.image[0].isCompressedTexture,mt=L.image[0]&&L.image[0].isDataTexture,sn=[];for(let Xe=0;Xe<6;Xe++)sn[Xe]=hi||mt?mt?L.image[Xe].image:L.image[Xe]:x(L.image[Xe],!0,r.maxCubemapSize),sn[Xe]=In(L,sn[Xe]);const bn=sn[0],On=s.convert(L.format,L.colorSpace),nn=s.convert(L.type),yi=S(L.internalFormat,On,nn,L.colorSpace),ei=!0!==L.isVideoTexture,rr=void 0===He.__version||!0===ze,ie=tt.dataReady;let Le,Lt=V(L,bn);if(rn(n.TEXTURE_CUBE_MAP,L),hi){ei&&rr&&t.texStorage2D(n.TEXTURE_CUBE_MAP,Lt,yi,bn.width,bn.height);for(let Xe=0;Xe<6;Xe++){Le=sn[Xe].mipmaps;for(let zt=0;zt<Le.length;zt++){const Ut=Le[zt];L.format!==ma?null!==On?ei?ie&&t.compressedTexSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+Xe,zt,0,0,Ut.width,Ut.height,On,Ut.data):t.compressedTexImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+Xe,zt,yi,Ut.width,Ut.height,0,Ut.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .setTextureCube()"):ei?ie&&t.texSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+Xe,zt,0,0,Ut.width,Ut.height,On,nn,Ut.data):t.texImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+Xe,zt,yi,Ut.width,Ut.height,0,On,nn,Ut.data)}}}else{if(Le=L.mipmaps,ei&&rr){Le.length>0&&Lt++;const Xe=Bt(sn[0]);t.texStorage2D(n.TEXTURE_CUBE_MAP,Lt,yi,Xe.width,Xe.height)}for(let Xe=0;Xe<6;Xe++)if(mt){ei?ie&&t.texSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+Xe,0,0,0,sn[Xe].width,sn[Xe].height,On,nn,sn[Xe].data):t.texImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+Xe,0,yi,sn[Xe].width,sn[Xe].height,0,On,nn,sn[Xe].data);for(let zt=0;zt<Le.length;zt++){const Dn=Le[zt].image[Xe].image;ei?ie&&t.texSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+Xe,zt+1,0,0,Dn.width,Dn.height,On,nn,Dn.data):t.texImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+Xe,zt+1,yi,Dn.width,Dn.height,0,On,nn,Dn.data)}}else{ei?ie&&t.texSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+Xe,0,0,0,On,nn,sn[Xe]):t.texImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+Xe,0,yi,On,nn,sn[Xe]);for(let zt=0;zt<Le.length;zt++){const Ut=Le[zt];ei?ie&&t.texSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+Xe,zt+1,0,0,On,nn,Ut.image[Xe]):t.texImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+Xe,zt+1,yi,On,nn,Ut.image[Xe])}}}b(L)&&w(n.TEXTURE_CUBE_MAP),He.__version=tt.version,L.onUpdate&&L.onUpdate(L)}G.__version=L.version}(pe,G,L):t.bindTexture(n.TEXTURE_CUBE_MAP,pe.__webglTexture,n.TEXTURE0+L)},this.rebindTextures=function Jt(G,L,pe){const ze=i.get(G);void 0!==L&&cn(ze.__webglFramebuffer,G,G.texture,n.COLOR_ATTACHMENT0,n.TEXTURE_2D,0),void 0!==pe&&Mn(G)},this.setupRenderTarget=function li(G){const L=G.texture,pe=i.get(G),ze=i.get(L);G.addEventListener("dispose",P);const tt=G.textures,He=!0===G.isWebGLCubeRenderTarget,Ot=tt.length>1;if(Ot||(void 0===ze.__webglTexture&&(ze.__webglTexture=n.createTexture()),ze.__version=L.version,o.memory.textures++),He){pe.__webglFramebuffer=[];for(let yt=0;yt<6;yt++)if(L.mipmaps&&L.mipmaps.length>0){pe.__webglFramebuffer[yt]=[];for(let jt=0;jt<L.mipmaps.length;jt++)pe.__webglFramebuffer[yt][jt]=n.createFramebuffer()}else pe.__webglFramebuffer[yt]=n.createFramebuffer()}else{if(L.mipmaps&&L.mipmaps.length>0){pe.__webglFramebuffer=[];for(let yt=0;yt<L.mipmaps.length;yt++)pe.__webglFramebuffer[yt]=n.createFramebuffer()}else pe.__webglFramebuffer=n.createFramebuffer();if(Ot)for(let yt=0,jt=tt.length;yt<jt;yt++){const hi=i.get(tt[yt]);void 0===hi.__webglTexture&&(hi.__webglTexture=n.createTexture(),o.memory.textures++)}if(G.samples>0&&!1===en(G)){pe.__webglMultisampledFramebuffer=n.createFramebuffer(),pe.__webglColorRenderbuffer=[],t.bindFramebuffer(n.FRAMEBUFFER,pe.__webglMultisampledFramebuffer);for(let yt=0;yt<tt.length;yt++){const jt=tt[yt];pe.__webglColorRenderbuffer[yt]=n.createRenderbuffer(),n.bindRenderbuffer(n.RENDERBUFFER,pe.__webglColorRenderbuffer[yt]);const hi=s.convert(jt.format,jt.colorSpace),mt=s.convert(jt.type),sn=S(jt.internalFormat,hi,mt,jt.colorSpace,!0===G.isXRRenderTarget),bn=ut(G);n.renderbufferStorageMultisample(n.RENDERBUFFER,bn,sn,G.width,G.height),n.framebufferRenderbuffer(n.FRAMEBUFFER,n.COLOR_ATTACHMENT0+yt,n.RENDERBUFFER,pe.__webglColorRenderbuffer[yt])}n.bindRenderbuffer(n.RENDERBUFFER,null),G.depthBuffer&&(pe.__webglDepthRenderbuffer=n.createRenderbuffer(),Ze(pe.__webglDepthRenderbuffer,G,!0)),t.bindFramebuffer(n.FRAMEBUFFER,null)}}if(He){t.bindTexture(n.TEXTURE_CUBE_MAP,ze.__webglTexture),rn(n.TEXTURE_CUBE_MAP,L);for(let yt=0;yt<6;yt++)if(L.mipmaps&&L.mipmaps.length>0)for(let jt=0;jt<L.mipmaps.length;jt++)cn(pe.__webglFramebuffer[yt][jt],G,L,n.COLOR_ATTACHMENT0,n.TEXTURE_CUBE_MAP_POSITIVE_X+yt,jt);else cn(pe.__webglFramebuffer[yt],G,L,n.COLOR_ATTACHMENT0,n.TEXTURE_CUBE_MAP_POSITIVE_X+yt,0);b(L)&&w(n.TEXTURE_CUBE_MAP),t.unbindTexture()}else if(Ot){for(let yt=0,jt=tt.length;yt<jt;yt++){const hi=tt[yt],mt=i.get(hi);t.bindTexture(n.TEXTURE_2D,mt.__webglTexture),rn(n.TEXTURE_2D,hi),cn(pe.__webglFramebuffer,G,hi,n.COLOR_ATTACHMENT0+yt,n.TEXTURE_2D,0),b(hi)&&w(n.TEXTURE_2D)}t.unbindTexture()}else{let yt=n.TEXTURE_2D;if((G.isWebGL3DRenderTarget||G.isWebGLArrayRenderTarget)&&(yt=G.isWebGL3DRenderTarget?n.TEXTURE_3D:n.TEXTURE_2D_ARRAY),t.bindTexture(yt,ze.__webglTexture),rn(yt,L),L.mipmaps&&L.mipmaps.length>0)for(let jt=0;jt<L.mipmaps.length;jt++)cn(pe.__webglFramebuffer[jt],G,L,n.COLOR_ATTACHMENT0,yt,jt);else cn(pe.__webglFramebuffer,G,L,n.COLOR_ATTACHMENT0,yt,0);b(L)&&w(yt),t.unbindTexture()}G.depthBuffer&&Mn(G)},this.updateRenderTargetMipmap=function lt(G){const L=G.textures;for(let pe=0,ze=L.length;pe<ze;pe++){const tt=L[pe];if(b(tt)){const He=T(G),Ot=i.get(tt).__webglTexture;t.bindTexture(He,Ot),w(He),t.unbindTexture()}}},this.updateMultisampleRenderTarget=function dn(G){if(G.samples>0)if(!1===en(G)){const L=G.textures,pe=G.width,ze=G.height;let tt=n.COLOR_BUFFER_BIT;const He=G.stencilBuffer?n.DEPTH_STENCIL_ATTACHMENT:n.DEPTH_ATTACHMENT,Ot=i.get(G),yt=L.length>1;if(yt)for(let jt=0;jt<L.length;jt++)t.bindFramebuffer(n.FRAMEBUFFER,Ot.__webglMultisampledFramebuffer),n.framebufferRenderbuffer(n.FRAMEBUFFER,n.COLOR_ATTACHMENT0+jt,n.RENDERBUFFER,null),t.bindFramebuffer(n.FRAMEBUFFER,Ot.__webglFramebuffer),n.framebufferTexture2D(n.DRAW_FRAMEBUFFER,n.COLOR_ATTACHMENT0+jt,n.TEXTURE_2D,null,0);t.bindFramebuffer(n.READ_FRAMEBUFFER,Ot.__webglMultisampledFramebuffer),t.bindFramebuffer(n.DRAW_FRAMEBUFFER,Ot.__webglFramebuffer);for(let jt=0;jt<L.length;jt++){if(G.resolveDepthBuffer&&(G.depthBuffer&&(tt|=n.DEPTH_BUFFER_BIT),G.stencilBuffer&&G.resolveStencilBuffer&&(tt|=n.STENCIL_BUFFER_BIT)),yt){n.framebufferRenderbuffer(n.READ_FRAMEBUFFER,n.COLOR_ATTACHMENT0,n.RENDERBUFFER,Ot.__webglColorRenderbuffer[jt]);const hi=i.get(L[jt]).__webglTexture;n.framebufferTexture2D(n.DRAW_FRAMEBUFFER,n.COLOR_ATTACHMENT0,n.TEXTURE_2D,hi,0)}n.blitFramebuffer(0,0,pe,ze,0,0,pe,ze,tt,n.NEAREST),!0===l&&(it.length=0,W.length=0,it.push(n.COLOR_ATTACHMENT0+jt),G.depthBuffer&&!1===G.resolveDepthBuffer&&(it.push(He),W.push(He),n.invalidateFramebuffer(n.DRAW_FRAMEBUFFER,W)),n.invalidateFramebuffer(n.READ_FRAMEBUFFER,it))}if(t.bindFramebuffer(n.READ_FRAMEBUFFER,null),t.bindFramebuffer(n.DRAW_FRAMEBUFFER,null),yt)for(let jt=0;jt<L.length;jt++){t.bindFramebuffer(n.FRAMEBUFFER,Ot.__webglMultisampledFramebuffer),n.framebufferRenderbuffer(n.FRAMEBUFFER,n.COLOR_ATTACHMENT0+jt,n.RENDERBUFFER,Ot.__webglColorRenderbuffer[jt]);const hi=i.get(L[jt]).__webglTexture;t.bindFramebuffer(n.FRAMEBUFFER,Ot.__webglFramebuffer),n.framebufferTexture2D(n.DRAW_FRAMEBUFFER,n.COLOR_ATTACHMENT0+jt,n.TEXTURE_2D,hi,0)}t.bindFramebuffer(n.DRAW_FRAMEBUFFER,Ot.__webglMultisampledFramebuffer)}else G.depthBuffer&&!1===G.resolveDepthBuffer&&l&&n.invalidateFramebuffer(n.DRAW_FRAMEBUFFER,[G.stencilBuffer?n.DEPTH_STENCIL_ATTACHMENT:n.DEPTH_ATTACHMENT])},this.setupDepthRenderbuffer=Mn,this.setupFrameBufferTexture=cn,this.useMultisampledRTT=en}function USe(n,e){return{convert:function t(i,r=""){let s;const o=Li.getTransfer(r);if(i===Ou)return n.UNSIGNED_BYTE;if(i===eN)return n.UNSIGNED_SHORT_4_4_4_4;if(i===tN)return n.UNSIGNED_SHORT_5_5_5_1;if(i===s9)return n.UNSIGNED_INT_5_9_9_9_REV;if(i===i9)return n.BYTE;if(i===r9)return n.SHORT;if(i===Lb)return n.UNSIGNED_SHORT;if(i===JO)return n.INT;if(i===ah)return n.UNSIGNED_INT;if(i===Fa)return n.FLOAT;if(i===Vb)return n.HALF_FLOAT;if(i===o9)return n.ALPHA;if(i===a9)return n.RGB;if(i===ma)return n.RGBA;if(i===l9)return n.LUMINANCE;if(i===c9)return n.LUMINANCE_ALPHA;if(i===d_)return n.DEPTH_COMPONENT;if(i===h_)return n.DEPTH_STENCIL;if(i===nN)return n.RED;if(i===vA)return n.RED_INTEGER;if(i===u9)return n.RG;if(i===iN)return n.RG_INTEGER;if(i===rN)return n.RGBA_INTEGER;if(i===yA||i===bA||i===xA||i===wA)if(o===ir){if(s=e.get("WEBGL_compressed_texture_s3tc_srgb"),null===s)return null;if(i===yA)return s.COMPRESSED_SRGB_S3TC_DXT1_EXT;if(i===bA)return s.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT;if(i===xA)return s.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT;if(i===wA)return s.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT}else{if(s=e.get("WEBGL_compressed_texture_s3tc"),null===s)return null;if(i===yA)return s.COMPRESSED_RGB_S3TC_DXT1_EXT;if(i===bA)return s.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(i===xA)return s.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(i===wA)return s.COMPRESSED_RGBA_S3TC_DXT5_EXT}if(i===sN||i===oN||i===aN||i===lN){if(s=e.get("WEBGL_compressed_texture_pvrtc"),null===s)return null;if(i===sN)return s.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;if(i===oN)return s.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;if(i===aN)return s.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;if(i===lN)return s.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}if(i===cN||i===uN||i===dN){if(s=e.get("WEBGL_compressed_texture_etc"),null===s)return null;if(i===cN||i===uN)return o===ir?s.COMPRESSED_SRGB8_ETC2:s.COMPRESSED_RGB8_ETC2;if(i===dN)return o===ir?s.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC:s.COMPRESSED_RGBA8_ETC2_EAC}if(i===hN||i===fN||i===pN||i===mN||i===gN||i===_N||i===vN||i===yN||i===bN||i===xN||i===wN||i===EN||i===TN||i===SN){if(s=e.get("WEBGL_compressed_texture_astc"),null===s)return null;if(i===hN)return o===ir?s.COMPRESSED_SRGB8_ALPHA8_ASTC_4x4_KHR:s.COMPRESSED_RGBA_ASTC_4x4_KHR;if(i===fN)return o===ir?s.COMPRESSED_SRGB8_ALPHA8_ASTC_5x4_KHR:s.COMPRESSED_RGBA_ASTC_5x4_KHR;if(i===pN)return o===ir?s.COMPRESSED_SRGB8_ALPHA8_ASTC_5x5_KHR:s.COMPRESSED_RGBA_ASTC_5x5_KHR;if(i===mN)return o===ir?s.COMPRESSED_SRGB8_ALPHA8_ASTC_6x5_KHR:s.COMPRESSED_RGBA_ASTC_6x5_KHR;if(i===gN)return o===ir?s.COMPRESSED_SRGB8_ALPHA8_ASTC_6x6_KHR:s.COMPRESSED_RGBA_ASTC_6x6_KHR;if(i===_N)return o===ir?s.COMPRESSED_SRGB8_ALPHA8_ASTC_8x5_KHR:s.COMPRESSED_RGBA_ASTC_8x5_KHR;if(i===vN)return o===ir?s.COMPRESSED_SRGB8_ALPHA8_ASTC_8x6_KHR:s.COMPRESSED_RGBA_ASTC_8x6_KHR;if(i===yN)return o===ir?s.COMPRESSED_SRGB8_ALPHA8_ASTC_8x8_KHR:s.COMPRESSED_RGBA_ASTC_8x8_KHR;if(i===bN)return o===ir?s.COMPRESSED_SRGB8_ALPHA8_ASTC_10x5_KHR:s.COMPRESSED_RGBA_ASTC_10x5_KHR;if(i===xN)return o===ir?s.COMPRESSED_SRGB8_ALPHA8_ASTC_10x6_KHR:s.COMPRESSED_RGBA_ASTC_10x6_KHR;if(i===wN)return o===ir?s.COMPRESSED_SRGB8_ALPHA8_ASTC_10x8_KHR:s.COMPRESSED_RGBA_ASTC_10x8_KHR;if(i===EN)return o===ir?s.COMPRESSED_SRGB8_ALPHA8_ASTC_10x10_KHR:s.COMPRESSED_RGBA_ASTC_10x10_KHR;if(i===TN)return o===ir?s.COMPRESSED_SRGB8_ALPHA8_ASTC_12x10_KHR:s.COMPRESSED_RGBA_ASTC_12x10_KHR;if(i===SN)return o===ir?s.COMPRESSED_SRGB8_ALPHA8_ASTC_12x12_KHR:s.COMPRESSED_RGBA_ASTC_12x12_KHR}if(i===EA||i===AN||i===IN){if(s=e.get("EXT_texture_compression_bptc"),null===s)return null;if(i===EA)return o===ir?s.COMPRESSED_SRGB_ALPHA_BPTC_UNORM_EXT:s.COMPRESSED_RGBA_BPTC_UNORM_EXT;if(i===AN)return s.COMPRESSED_RGB_BPTC_SIGNED_FLOAT_EXT;if(i===IN)return s.COMPRESSED_RGB_BPTC_UNSIGNED_FLOAT_EXT}if(i===d9||i===CN||i===MN||i===DN){if(s=e.get("EXT_texture_compression_rgtc"),null===s)return null;if(i===EA)return s.COMPRESSED_RED_RGTC1_EXT;if(i===CN)return s.COMPRESSED_SIGNED_RED_RGTC1_EXT;if(i===MN)return s.COMPRESSED_RED_GREEN_RGTC2_EXT;if(i===DN)return s.COMPRESSED_SIGNED_RED_GREEN_RGTC2_EXT}return i===u_?n.UNSIGNED_INT_24_8:void 0!==n[i]?n[i]:null}}}class HSe{constructor(){this.texture=null,this.mesh=null,this.depthNear=0,this.depthFar=0}init(e,t,i){if(null===this.texture){const r=new ga;e.properties.get(r).__webglTexture=t.texture,(t.depthNear!==i.depthNear||t.depthFar!==i.depthFar)&&(this.depthNear=t.depthNear,this.depthFar=t.depthFar),this.texture=r}}getMesh(e){if(null!==this.texture&&null===this.mesh){const t=e.cameras[0].viewport,i=new Ic({vertexShader:"\nvoid main() {\n\n\tgl_Position = vec4( position, 1.0 );\n\n}",fragmentShader:"\nuniform sampler2DArray depthColor;\nuniform float depthWidth;\nuniform float depthHeight;\n\nvoid main() {\n\n\tvec2 coord = vec2( gl_FragCoord.x / depthWidth, gl_FragCoord.y / depthHeight );\n\n\tif ( coord.x >= 1.0 ) {\n\n\t\tgl_FragDepth = texture( depthColor, vec3( coord.x - 1.0, coord.y, 1 ) ).r;\n\n\t} else {\n\n\t\tgl_FragDepth = texture( depthColor, vec3( coord.x, coord.y, 0 ) ).r;\n\n\t}\n\n}",uniforms:{depthColor:{value:this.texture},depthWidth:{value:t.z},depthHeight:{value:t.w}}});this.mesh=new xs(new lx(20,20),i)}return this.mesh}reset(){this.texture=null,this.mesh=null}getDepthTexture(){return this.texture}}class GSe extends Nu{constructor(e,t){super();const i=this;let r=null,s=1,o=null,a="local-floor",l=1,c=null,u=null,d=null,p=null,m=null,v=null;const x=new HSe,b=t.getContextAttributes();let w=null,T=null;const S=[],A=[],V=new et;let F=null;const P=new no;P.viewport=new zi;const D=new no;D.viewport=new zi;const I=[P,D],M=new Txe;let O=null,z=null;function N(Re){const pt=A.indexOf(Re.inputSource);if(-1===pt)return;const cn=S[pt];void 0!==cn&&(cn.update(Re.inputSource,Re.frame,c||o),cn.dispatchEvent({type:Re.type,data:Re.inputSource}))}function Ee(){r.removeEventListener("select",N),r.removeEventListener("selectstart",N),r.removeEventListener("selectend",N),r.removeEventListener("squeeze",N),r.removeEventListener("squeezestart",N),r.removeEventListener("squeezeend",N),r.removeEventListener("end",Ee),r.removeEventListener("inputsourceschange",je);for(let Re=0;Re<S.length;Re++){const pt=A[Re];null!==pt&&(A[Re]=null,S[Re].disconnect(pt))}O=null,z=null,x.reset(),e.setRenderTarget(w),m=null,p=null,d=null,r=null,T=null,gn.stop(),i.isPresenting=!1,e.setPixelRatio(F),e.setSize(V.width,V.height,!1),i.dispatchEvent({type:"sessionend"})}function je(Re){for(let pt=0;pt<Re.removed.length;pt++){const cn=Re.removed[pt],Ze=A.indexOf(cn);Ze>=0&&(A[Ze]=null,S[Ze].disconnect(cn))}for(let pt=0;pt<Re.added.length;pt++){const cn=Re.added[pt];let Ze=A.indexOf(cn);if(-1===Ze){for(let Mn=0;Mn<S.length;Mn++){if(Mn>=A.length){A.push(cn),Ze=Mn;break}if(null===A[Mn]){A[Mn]=cn,Ze=Mn;break}}if(-1===Ze)break}const ln=S[Ze];ln&&ln.connect(cn)}}this.cameraAutoUpdate=!0,this.enabled=!1,this.isPresenting=!1,this.getController=function(Re){let pt=S[Re];return void 0===pt&&(pt=new rF,S[Re]=pt),pt.getTargetRaySpace()},this.getControllerGrip=function(Re){let pt=S[Re];return void 0===pt&&(pt=new rF,S[Re]=pt),pt.getGripSpace()},this.getHand=function(Re){let pt=S[Re];return void 0===pt&&(pt=new rF,S[Re]=pt),pt.getHandSpace()},this.setFramebufferScaleFactor=function(Re){s=Re,!0===i.isPresenting&&console.warn("THREE.WebXRManager: Cannot change framebuffer scale while presenting.")},this.setReferenceSpaceType=function(Re){a=Re,!0===i.isPresenting&&console.warn("THREE.WebXRManager: Cannot change reference space type while presenting.")},this.getReferenceSpace=function(){return c||o},this.setReferenceSpace=function(Re){c=Re},this.getBaseLayer=function(){return null!==p?p:m},this.getBinding=function(){return d},this.getFrame=function(){return v},this.getSession=function(){return r},this.setSession=function(){var Re=(0,Me.A)(function*(pt){if(r=pt,null!==r){if(w=e.getRenderTarget(),r.addEventListener("select",N),r.addEventListener("selectstart",N),r.addEventListener("selectend",N),r.addEventListener("squeeze",N),r.addEventListener("squeezestart",N),r.addEventListener("squeezeend",N),r.addEventListener("end",Ee),r.addEventListener("inputsourceschange",je),!0!==b.xrCompatible&&(yield t.makeXRCompatible()),F=e.getPixelRatio(),e.getSize(V),typeof XRWebGLBinding<"u"&&"createProjectionLayer"in XRWebGLBinding.prototype){let Ze=null,ln=null,Mn=null;b.depth&&(Mn=b.stencil?t.DEPTH24_STENCIL8:t.DEPTH_COMPONENT24,Ze=b.stencil?h_:d_,ln=b.stencil?u_:ah);const Jt={colorFormat:t.RGBA8,depthFormat:Mn,scaleFactor:s};d=new XRWebGLBinding(r,t),p=d.createProjectionLayer(Jt),r.updateRenderState({layers:[p]}),e.setPixelRatio(1),e.setSize(p.textureWidth,p.textureHeight,!1),T=new Lu(p.textureWidth,p.textureHeight,{format:ma,type:Ou,depthTexture:new lq(p.textureWidth,p.textureHeight,ln,void 0,void 0,void 0,void 0,void 0,void 0,Ze),stencilBuffer:b.stencil,colorSpace:e.outputColorSpace,samples:b.antialias?4:0,resolveDepthBuffer:!1===p.ignoreDepthValues})}else m=new XRWebGLLayer(r,t,{antialias:b.antialias,alpha:!0,depth:b.depth,stencil:b.stencil,framebufferScaleFactor:s}),r.updateRenderState({baseLayer:m}),e.setPixelRatio(1),e.setSize(m.framebufferWidth,m.framebufferHeight,!1),T=new Lu(m.framebufferWidth,m.framebufferHeight,{format:ma,type:Ou,colorSpace:e.outputColorSpace,stencilBuffer:b.stencil});T.isXRRenderTarget=!0,this.setFoveation(l),c=null,o=yield r.requestReferenceSpace(a),gn.setContext(r),gn.start(),i.isPresenting=!0,i.dispatchEvent({type:"sessionstart"})}});return function(pt){return Re.apply(this,arguments)}}(),this.getEnvironmentBlendMode=function(){if(null!==r)return r.environmentBlendMode},this.getDepthTexture=function(){return x.getDepthTexture()};const ee=new j,we=new j;function $e(Re,pt){null===pt?Re.matrixWorld.copy(Re.matrix):Re.matrixWorld.multiplyMatrices(pt.matrixWorld,Re.matrix),Re.matrixWorldInverse.copy(Re.matrixWorld).invert()}this.updateCamera=function(Re){if(null===r)return;let pt=Re.near,cn=Re.far;null!==x.texture&&(x.depthNear>0&&(pt=x.depthNear),x.depthFar>0&&(cn=x.depthFar)),M.near=D.near=P.near=pt,M.far=D.far=P.far=cn,(O!==M.near||z!==M.far)&&(r.updateRenderState({depthNear:M.near,depthFar:M.far}),O=M.near,z=M.far),P.layers.mask=2|Re.layers.mask,D.layers.mask=4|Re.layers.mask,M.layers.mask=P.layers.mask|D.layers.mask;const Ze=Re.parent,ln=M.cameras;$e(M,Ze);for(let Mn=0;Mn<ln.length;Mn++)$e(ln[Mn],Ze);2===ln.length?function oe(Re,pt,cn){ee.setFromMatrixPosition(pt.matrixWorld),we.setFromMatrixPosition(cn.matrixWorld);const Ze=ee.distanceTo(we),ln=pt.projectionMatrix.elements,Mn=cn.projectionMatrix.elements,Jt=ln[14]/(ln[10]-1),li=ln[14]/(ln[10]+1),lt=(ln[9]+1)/ln[5],it=(ln[9]-1)/ln[5],W=(ln[8]-1)/ln[0],dn=(Mn[8]+1)/Mn[0],ut=Jt*W,en=Jt*dn,Et=Ze/(-W+dn),In=Et*-W;if(pt.matrixWorld.decompose(Re.position,Re.quaternion,Re.scale),Re.translateX(In),Re.translateZ(Et),Re.matrixWorld.compose(Re.position,Re.quaternion,Re.scale),Re.matrixWorldInverse.copy(Re.matrixWorld).invert(),-1===ln[10])Re.projectionMatrix.copy(pt.projectionMatrix),Re.projectionMatrixInverse.copy(pt.projectionMatrixInverse);else{const Bt=Jt+Et,G=li+Et;Re.projectionMatrix.makePerspective(ut-In,en+(Ze-In),lt*li/G*Bt,it*li/G*Bt,Bt,G),Re.projectionMatrixInverse.copy(Re.projectionMatrix).invert()}}(M,P,D):M.projectionMatrix.copy(P.projectionMatrix),function vt(Re,pt,cn){null===cn?Re.matrix.copy(pt.matrixWorld):(Re.matrix.copy(cn.matrixWorld),Re.matrix.invert(),Re.matrix.multiply(pt.matrixWorld)),Re.matrix.decompose(Re.position,Re.quaternion,Re.scale),Re.updateMatrixWorld(!0),Re.projectionMatrix.copy(pt.projectionMatrix),Re.projectionMatrixInverse.copy(pt.projectionMatrixInverse),Re.isPerspectiveCamera&&(Re.fov=2*__*Math.atan(1/Re.projectionMatrix.elements[5]),Re.zoom=1)}(Re,M,Ze)},this.getCamera=function(){return M},this.getFoveation=function(){if(null!==p||null!==m)return l},this.setFoveation=function(Re){l=Re,null!==p&&(p.fixedFoveation=Re),null!==m&&void 0!==m.fixedFoveation&&(m.fixedFoveation=Re)},this.hasDepthSensing=function(){return null!==x.texture},this.getDepthSensingMesh=function(){return x.getMesh(M)};let Ft=null;const gn=new n7;gn.setAnimationLoop(function rn(Re,pt){if(u=pt.getViewerPose(c||o),v=pt,null!==u){const cn=u.views;null!==m&&(e.setRenderTargetFramebuffer(T,m.framebuffer),e.setRenderTarget(T));let Ze=!1;cn.length!==M.cameras.length&&(M.cameras.length=0,Ze=!0);for(let Jt=0;Jt<cn.length;Jt++){const li=cn[Jt];let lt=null;if(null!==m)lt=m.getViewport(li);else{const W=d.getViewSubImage(p,li);lt=W.viewport,0===Jt&&(e.setRenderTargetTextures(T,W.colorTexture,p.ignoreDepthValues?void 0:W.depthStencilTexture),e.setRenderTarget(T))}let it=I[Jt];void 0===it&&(it=new no,it.layers.enable(Jt),it.viewport=new zi,I[Jt]=it),it.matrix.fromArray(li.transform.matrix),it.matrix.decompose(it.position,it.quaternion,it.scale),it.projectionMatrix.fromArray(li.projectionMatrix),it.projectionMatrixInverse.copy(it.projectionMatrix).invert(),it.viewport.set(lt.x,lt.y,lt.width,lt.height),0===Jt&&(M.matrix.copy(it.matrix),M.matrix.decompose(M.position,M.quaternion,M.scale)),!0===Ze&&M.cameras.push(it)}const ln=r.enabledFeatures;if(ln&&ln.includes("depth-sensing")&&"gpu-optimized"==r.depthUsage&&d){const Jt=d.getDepthInformation(cn[0]);Jt&&Jt.isValid&&Jt.texture&&x.init(e,Jt,r.renderState)}}for(let cn=0;cn<S.length;cn++){const Ze=A[cn],ln=S[cn];null!==Ze&&void 0!==ln&&ln.update(Ze,pt,c||o)}Ft&&Ft(Re,pt),pt.detectedPlanes&&i.dispatchEvent({type:"planesdetected",data:pt}),v=null}),this.setAnimationLoop=function(Re){Ft=Re},this.dispose=function(){}}}const bp=new Bu,WSe=new Un;function jSe(n,e){function t(b,w){!0===b.matrixAutoUpdate&&b.updateMatrix(),w.value.copy(b.matrix)}function s(b,w){b.opacity.value=w.opacity,w.color&&b.diffuse.value.copy(w.color),w.emissive&&b.emissive.value.copy(w.emissive).multiplyScalar(w.emissiveIntensity),w.map&&(b.map.value=w.map,t(w.map,b.mapTransform)),w.alphaMap&&(b.alphaMap.value=w.alphaMap,t(w.alphaMap,b.alphaMapTransform)),w.bumpMap&&(b.bumpMap.value=w.bumpMap,t(w.bumpMap,b.bumpMapTransform),b.bumpScale.value=w.bumpScale,1===w.side&&(b.bumpScale.value*=-1)),w.normalMap&&(b.normalMap.value=w.normalMap,t(w.normalMap,b.normalMapTransform),b.normalScale.value.copy(w.normalScale),1===w.side&&b.normalScale.value.negate()),w.displacementMap&&(b.displacementMap.value=w.displacementMap,t(w.displacementMap,b.displacementMapTransform),b.displacementScale.value=w.displacementScale,b.displacementBias.value=w.displacementBias),w.emissiveMap&&(b.emissiveMap.value=w.emissiveMap,t(w.emissiveMap,b.emissiveMapTransform)),w.specularMap&&(b.specularMap.value=w.specularMap,t(w.specularMap,b.specularMapTransform)),w.alphaTest>0&&(b.alphaTest.value=w.alphaTest);const T=e.get(w),S=T.envMap,A=T.envMapRotation;S&&(b.envMap.value=S,bp.copy(A),bp.x*=-1,bp.y*=-1,bp.z*=-1,S.isCubeTexture&&!1===S.isRenderTargetTexture&&(bp.y*=-1,bp.z*=-1),b.envMapRotation.value.setFromMatrix4(WSe.makeRotationFromEuler(bp)),b.flipEnvMap.value=S.isCubeTexture&&!1===S.isRenderTargetTexture?-1:1,b.reflectivity.value=w.reflectivity,b.ior.value=w.ior,b.refractionRatio.value=w.refractionRatio),w.lightMap&&(b.lightMap.value=w.lightMap,b.lightMapIntensity.value=w.lightMapIntensity,t(w.lightMap,b.lightMapTransform)),w.aoMap&&(b.aoMap.value=w.aoMap,b.aoMapIntensity.value=w.aoMapIntensity,t(w.aoMap,b.aoMapTransform))}return{refreshFogUniforms:function i(b,w){w.color.getRGB(b.fogColor.value,F9(n)),w.isFog?(b.fogNear.value=w.near,b.fogFar.value=w.far):w.isFogExp2&&(b.fogDensity.value=w.density)},refreshMaterialUniforms:function r(b,w,T,S,A){w.isMeshBasicMaterial||w.isMeshLambertMaterial?s(b,w):w.isMeshToonMaterial?(s(b,w),function d(b,w){w.gradientMap&&(b.gradientMap.value=w.gradientMap)}(b,w)):w.isMeshPhongMaterial?(s(b,w),function u(b,w){b.specular.value.copy(w.specular),b.shininess.value=Math.max(w.shininess,1e-4)}(b,w)):w.isMeshStandardMaterial?(s(b,w),function p(b,w){b.metalness.value=w.metalness,w.metalnessMap&&(b.metalnessMap.value=w.metalnessMap,t(w.metalnessMap,b.metalnessMapTransform)),b.roughness.value=w.roughness,w.roughnessMap&&(b.roughnessMap.value=w.roughnessMap,t(w.roughnessMap,b.roughnessMapTransform)),w.envMap&&(b.envMapIntensity.value=w.envMapIntensity)}(b,w),w.isMeshPhysicalMaterial&&function m(b,w,T){b.ior.value=w.ior,w.sheen>0&&(b.sheenColor.value.copy(w.sheenColor).multiplyScalar(w.sheen),b.sheenRoughness.value=w.sheenRoughness,w.sheenColorMap&&(b.sheenColorMap.value=w.sheenColorMap,t(w.sheenColorMap,b.sheenColorMapTransform)),w.sheenRoughnessMap&&(b.sheenRoughnessMap.value=w.sheenRoughnessMap,t(w.sheenRoughnessMap,b.sheenRoughnessMapTransform))),w.clearcoat>0&&(b.clearcoat.value=w.clearcoat,b.clearcoatRoughness.value=w.clearcoatRoughness,w.clearcoatMap&&(b.clearcoatMap.value=w.clearcoatMap,t(w.clearcoatMap,b.clearcoatMapTransform)),w.clearcoatRoughnessMap&&(b.clearcoatRoughnessMap.value=w.clearcoatRoughnessMap,t(w.clearcoatRoughnessMap,b.clearcoatRoughnessMapTransform)),w.clearcoatNormalMap&&(b.clearcoatNormalMap.value=w.clearcoatNormalMap,t(w.clearcoatNormalMap,b.clearcoatNormalMapTransform),b.clearcoatNormalScale.value.copy(w.clearcoatNormalScale),1===w.side&&b.clearcoatNormalScale.value.negate())),w.dispersion>0&&(b.dispersion.value=w.dispersion),w.iridescence>0&&(b.iridescence.value=w.iridescence,b.iridescenceIOR.value=w.iridescenceIOR,b.iridescenceThicknessMinimum.value=w.iridescenceThicknessRange[0],b.iridescenceThicknessMaximum.value=w.iridescenceThicknessRange[1],w.iridescenceMap&&(b.iridescenceMap.value=w.iridescenceMap,t(w.iridescenceMap,b.iridescenceMapTransform)),w.iridescenceThicknessMap&&(b.iridescenceThicknessMap.value=w.iridescenceThicknessMap,t(w.iridescenceThicknessMap,b.iridescenceThicknessMapTransform))),w.transmission>0&&(b.transmission.value=w.transmission,b.transmissionSamplerMap.value=T.texture,b.transmissionSamplerSize.value.set(T.width,T.height),w.transmissionMap&&(b.transmissionMap.value=w.transmissionMap,t(w.transmissionMap,b.transmissionMapTransform)),b.thickness.value=w.thickness,w.thicknessMap&&(b.thicknessMap.value=w.thicknessMap,t(w.thicknessMap,b.thicknessMapTransform)),b.attenuationDistance.value=w.attenuationDistance,b.attenuationColor.value.copy(w.attenuationColor)),w.anisotropy>0&&(b.anisotropyVector.value.set(w.anisotropy*Math.cos(w.anisotropyRotation),w.anisotropy*Math.sin(w.anisotropyRotation)),w.anisotropyMap&&(b.anisotropyMap.value=w.anisotropyMap,t(w.anisotropyMap,b.anisotropyMapTransform))),b.specularIntensity.value=w.specularIntensity,b.specularColor.value.copy(w.specularColor),w.specularColorMap&&(b.specularColorMap.value=w.specularColorMap,t(w.specularColorMap,b.specularColorMapTransform)),w.specularIntensityMap&&(b.specularIntensityMap.value=w.specularIntensityMap,t(w.specularIntensityMap,b.specularIntensityMapTransform))}(b,w,A)):w.isMeshMatcapMaterial?(s(b,w),function v(b,w){w.matcap&&(b.matcap.value=w.matcap)}(b,w)):w.isMeshDepthMaterial?s(b,w):w.isMeshDistanceMaterial?(s(b,w),function x(b,w){const T=e.get(w).light;b.referencePosition.value.setFromMatrixPosition(T.matrixWorld),b.nearDistance.value=T.shadow.camera.near,b.farDistance.value=T.shadow.camera.far}(b,w)):w.isMeshNormalMaterial?s(b,w):w.isLineBasicMaterial?(function o(b,w){b.diffuse.value.copy(w.color),b.opacity.value=w.opacity,w.map&&(b.map.value=w.map,t(w.map,b.mapTransform))}(b,w),w.isLineDashedMaterial&&function a(b,w){b.dashSize.value=w.dashSize,b.totalSize.value=w.dashSize+w.gapSize,b.scale.value=w.scale}(b,w)):w.isPointsMaterial?function l(b,w,T,S){b.diffuse.value.copy(w.color),b.opacity.value=w.opacity,b.size.value=w.size*T,b.scale.value=.5*S,w.map&&(b.map.value=w.map,t(w.map,b.uvTransform)),w.alphaMap&&(b.alphaMap.value=w.alphaMap,t(w.alphaMap,b.alphaMapTransform)),w.alphaTest>0&&(b.alphaTest.value=w.alphaTest)}(b,w,T,S):w.isSpriteMaterial?function c(b,w){b.diffuse.value.copy(w.color),b.opacity.value=w.opacity,b.rotation.value=w.rotation,w.map&&(b.map.value=w.map,t(w.map,b.mapTransform)),w.alphaMap&&(b.alphaMap.value=w.alphaMap,t(w.alphaMap,b.alphaMapTransform)),w.alphaTest>0&&(b.alphaTest.value=w.alphaTest)}(b,w):w.isShadowMaterial?(b.color.value.copy(w.color),b.opacity.value=w.opacity):w.isShaderMaterial&&(w.uniformsNeedUpdate=!1)}}}function $Se(n,e,t,i){let r={},s={},o=[];const a=n.getParameter(n.MAX_UNIFORM_BUFFER_BINDINGS);function m(T,S,A,V){const F=T.value,P=S+"_"+A;if(void 0===V[P])return V[P]="number"==typeof F||"boolean"==typeof F?F:F.clone(),!0;{const D=V[P];if("number"==typeof F||"boolean"==typeof F){if(D!==F)return V[P]=F,!0}else if(!1===D.equals(F))return D.copy(F),!0}return!1}function x(T){const S={boundary:0,storage:0};return"number"==typeof T||"boolean"==typeof T?(S.boundary=4,S.storage=4):T.isVector2?(S.boundary=8,S.storage=8):T.isVector3||T.isColor?(S.boundary=16,S.storage=12):T.isVector4?(S.boundary=16,S.storage=16):T.isMatrix3?(S.boundary=48,S.storage=48):T.isMatrix4?(S.boundary=64,S.storage=64):T.isTexture?console.warn("THREE.WebGLRenderer: Texture samplers can not be part of an uniforms group."):console.warn("THREE.WebGLRenderer: Unsupported uniform value type.",T),S}function b(T){const S=T.target;S.removeEventListener("dispose",b);const A=o.indexOf(S.__bindingPointIndex);o.splice(A,1),n.deleteBuffer(r[S.id]),delete r[S.id],delete s[S.id]}return{bind:function l(T,S){i.uniformBlockBinding(T,S.program)},update:function c(T,S){let A=r[T.id];void 0===A&&(function v(T){const S=T.uniforms;let A=0;for(let P=0,D=S.length;P<D;P++){const I=Array.isArray(S[P])?S[P]:[S[P]];for(let M=0,O=I.length;M<O;M++){const z=I[M],N=Array.isArray(z.value)?z.value:[z.value];for(let Ee=0,je=N.length;Ee<je;Ee++){const we=x(N[Ee]),oe=A%16,$e=oe%we.boundary,vt=oe+$e;A+=$e,0!==vt&&16-vt<we.storage&&(A+=16-vt),z.__data=new Float32Array(we.storage/Float32Array.BYTES_PER_ELEMENT),z.__offset=A,A+=we.storage}}}const F=A%16;F>0&&(A+=16-F),T.__size=A,T.__cache={}}(T),A=function u(T){const S=function d(){for(let T=0;T<a;T++)if(-1===o.indexOf(T))return o.push(T),T;return console.error("THREE.WebGLRenderer: Maximum number of simultaneously usable uniforms groups reached."),0}();T.__bindingPointIndex=S;const A=n.createBuffer(),V=T.__size,F=T.usage;return n.bindBuffer(n.UNIFORM_BUFFER,A),n.bufferData(n.UNIFORM_BUFFER,V,F),n.bindBuffer(n.UNIFORM_BUFFER,null),n.bindBufferBase(n.UNIFORM_BUFFER,S,A),A}(T),r[T.id]=A,T.addEventListener("dispose",b)),i.updateUBOMapping(T,S.program);const F=e.render.frame;s[T.id]!==F&&(function p(T){const A=T.uniforms,V=T.__cache;n.bindBuffer(n.UNIFORM_BUFFER,r[T.id]);for(let F=0,P=A.length;F<P;F++){const D=Array.isArray(A[F])?A[F]:[A[F]];for(let I=0,M=D.length;I<M;I++){const O=D[I];if(!0===m(O,F,I,V)){const z=O.__offset,N=Array.isArray(O.value)?O.value:[O.value];let Ee=0;for(let je=0;je<N.length;je++){const ee=N[je],we=x(ee);"number"==typeof ee||"boolean"==typeof ee?(O.__data[0]=ee,n.bufferSubData(n.UNIFORM_BUFFER,z+Ee,O.__data)):ee.isMatrix3?(O.__data[0]=ee.elements[0],O.__data[1]=ee.elements[1],O.__data[2]=ee.elements[2],O.__data[3]=0,O.__data[4]=ee.elements[3],O.__data[5]=ee.elements[4],O.__data[6]=ee.elements[5],O.__data[7]=0,O.__data[8]=ee.elements[6],O.__data[9]=ee.elements[7],O.__data[10]=ee.elements[8],O.__data[11]=0):(ee.toArray(O.__data,Ee),Ee+=we.storage/Float32Array.BYTES_PER_ELEMENT)}n.bufferSubData(n.UNIFORM_BUFFER,z,O.__data)}}}n.bindBuffer(n.UNIFORM_BUFFER,null)}(T),s[T.id]=F)},dispose:function w(){for(const T in r)n.deleteBuffer(r[T]);o=[],r={},s={}}}}class qSe{constructor(e={}){const{canvas:t=x0e(),context:i=null,depth:r=!0,stencil:s=!1,alpha:o=!1,antialias:a=!1,premultipliedAlpha:l=!0,preserveDrawingBuffer:c=!1,powerPreference:u="default",failIfMajorPerformanceCaveat:d=!1,reverseDepthBuffer:p=!1}=e;let m;if(this.isWebGLRenderer=!0,null!==i){if(typeof WebGLRenderingContext<"u"&&i instanceof WebGLRenderingContext)throw new Error("THREE.WebGLRenderer: WebGL 1 is not supported since r163.");m=i.getContextAttributes().alpha}else m=o;const v=new Uint32Array(4),x=new Int32Array(4);let b=null,w=null;const T=[],S=[];this.domElement=t,this.debug={checkShaderErrors:!0,onShaderError:null},this.autoClear=!0,this.autoClearColor=!0,this.autoClearDepth=!0,this.autoClearStencil=!0,this.sortObjects=!0,this.clippingPlanes=[],this.localClippingEnabled=!1,this._outputColorSpace=La,this.toneMapping=sh,this.toneMappingExposure=1;const A=this;let V=!1,F=0,P=0,D=null,I=-1,M=null;const O=new zi,z=new zi;let N=null;const Ee=new Zt(0);let je=0,ee=t.width,we=t.height,oe=1,$e=null,vt=null;const Ft=new zi(0,0,ee,we),rn=new zi(0,0,ee,we);let gn=!1;const Re=new eI;let pt=!1,cn=!1;this.transmissionResolutionScale=1;const Ze=new Un,ln=new Un,Mn=new j,Jt=new zi,li={background:null,fog:null,environment:null,overrideMaterial:null,isScene:!0};let lt=!1;function it(){return null===D?oe:1}let ut,en,Et,In,Bt,G,L,pe,ze,tt,He,Ot,yt,jt,hi,mt,sn,bn,On,nn,yi,ei,rr,ie,W=i;function dn(B,se){return t.getContext(B,se)}try{const B={alpha:!0,depth:r,stencil:s,antialias:a,premultipliedAlpha:l,preserveDrawingBuffer:c,powerPreference:u,failIfMajorPerformanceCaveat:d};if("setAttribute"in t&&t.setAttribute("data-engine","three.js r173"),t.addEventListener("webglcontextlost",Xe,!1),t.addEventListener("webglcontextrestored",zt,!1),t.addEventListener("webglcontextcreationerror",Ut,!1),null===W){const se="webgl2";if(W=dn(se,B),null===W)throw dn(se)?new Error("Error creating WebGL context with your selected attributes."):new Error("Error creating WebGL context.")}}catch(B){throw console.error("THREE.WebGLRenderer: "+B.message),B}function Lt(){ut=new iTe(W),ut.init(),ei=new USe(W,ut),en=new QEe(W,ut,e,ei),Et=new LSe(W,ut),en.reverseDepthBuffer&&p&&Et.buffers.depth.setReversed(!0),In=new oTe(W),Bt=new TSe,G=new VSe(W,ut,Et,Bt,en,ei,In),L=new JEe(A),pe=new nTe(A),ze=new qxe(W),rr=new KEe(W,ze),tt=new rTe(W,ze,In,rr),He=new lTe(W,tt,ze,In),On=new aTe(W,en,G),mt=new ZEe(Bt),Ot=new ESe(A,L,pe,ut,en,rr,mt),yt=new jSe(A,Bt),jt=new ASe,hi=new PSe(ut),bn=new XEe(A,L,pe,Et,He,m,l),sn=new NSe(A,He,en),ie=new $Se(W,In,en,Et),nn=new YEe(W,ut,In),yi=new sTe(W,ut,In),In.programs=Ot.programs,A.capabilities=en,A.extensions=ut,A.properties=Bt,A.renderLists=jt,A.shadowMap=sn,A.state=Et,A.info=In}Lt();const Le=new GSe(A,W);function Xe(B){B.preventDefault(),console.log("THREE.WebGLRenderer: Context Lost."),V=!0}function zt(){console.log("THREE.WebGLRenderer: Context Restored."),V=!1;const B=In.autoReset,se=sn.enabled,be=sn.autoUpdate,Se=sn.needsUpdate,ce=sn.type;Lt(),In.autoReset=B,sn.enabled=se,sn.autoUpdate=be,sn.needsUpdate=Se,sn.type=ce}function Ut(B){console.error("THREE.WebGLRenderer: A WebGL context could not be created. Reason: ",B.statusMessage)}function Dn(B){const se=B.target;se.removeEventListener("dispose",Dn),function Rr(B){(function hs(B){const se=Bt.get(B).programs;void 0!==se&&(se.forEach(function(be){Ot.releaseProgram(be)}),B.isShaderMaterial&&Ot.releaseShaderCache(B))})(B),Bt.remove(B)}(se)}function Hi(B,se,be){!0===B.transparent&&2===B.side&&!1===B.forceSinglePass?(B.side=1,B.needsUpdate=!0,ev(B,se,be),B.side=0,B.needsUpdate=!0,ev(B,se,be),B.side=2):ev(B,se,be)}this.xr=Le,this.getContext=function(){return W},this.getContextAttributes=function(){return W.getContextAttributes()},this.forceContextLoss=function(){const B=ut.get("WEBGL_lose_context");B&&B.loseContext()},this.forceContextRestore=function(){const B=ut.get("WEBGL_lose_context");B&&B.restoreContext()},this.getPixelRatio=function(){return oe},this.setPixelRatio=function(B){void 0!==B&&(oe=B,this.setSize(ee,we,!1))},this.getSize=function(B){return B.set(ee,we)},this.setSize=function(B,se,be=!0){Le.isPresenting?console.warn("THREE.WebGLRenderer: Can't change size while VR device is presenting."):(ee=B,we=se,t.width=Math.floor(B*oe),t.height=Math.floor(se*oe),!0===be&&(t.style.width=B+"px",t.style.height=se+"px"),this.setViewport(0,0,B,se))},this.getDrawingBufferSize=function(B){return B.set(ee*oe,we*oe).floor()},this.setDrawingBufferSize=function(B,se,be){ee=B,we=se,oe=be,t.width=Math.floor(B*be),t.height=Math.floor(se*be),this.setViewport(0,0,B,se)},this.getCurrentViewport=function(B){return B.copy(O)},this.getViewport=function(B){return B.copy(Ft)},this.setViewport=function(B,se,be,Se){B.isVector4?Ft.set(B.x,B.y,B.z,B.w):Ft.set(B,se,be,Se),Et.viewport(O.copy(Ft).multiplyScalar(oe).round())},this.getScissor=function(B){return B.copy(rn)},this.setScissor=function(B,se,be,Se){B.isVector4?rn.set(B.x,B.y,B.z,B.w):rn.set(B,se,be,Se),Et.scissor(z.copy(rn).multiplyScalar(oe).round())},this.getScissorTest=function(){return gn},this.setScissorTest=function(B){Et.setScissorTest(gn=B)},this.setOpaqueSort=function(B){$e=B},this.setTransparentSort=function(B){vt=B},this.getClearColor=function(B){return B.copy(bn.getClearColor())},this.setClearColor=function(){bn.setClearColor.apply(bn,arguments)},this.getClearAlpha=function(){return bn.getClearAlpha()},this.setClearAlpha=function(){bn.setClearAlpha.apply(bn,arguments)},this.clear=function(B=!0,se=!0,be=!0){let Se=0;if(B){let ce=!1;if(null!==D){const ht=D.texture.format;ce=ht===rN||ht===iN||ht===vA}if(ce){const ht=D.texture.type,Pt=ht===Ou||ht===ah||ht===Lb||ht===u_||ht===eN||ht===tN,qt=bn.getClearColor(),Ht=bn.getClearAlpha(),Rn=qt.r,Hn=qt.g,wn=qt.b;Pt?(v[0]=Rn,v[1]=Hn,v[2]=wn,v[3]=Ht,W.clearBufferuiv(W.COLOR,0,v)):(x[0]=Rn,x[1]=Hn,x[2]=wn,x[3]=Ht,W.clearBufferiv(W.COLOR,0,x))}else Se|=W.COLOR_BUFFER_BIT}se&&(Se|=W.DEPTH_BUFFER_BIT),be&&(Se|=W.STENCIL_BUFFER_BIT,this.state.buffers.stencil.setMask(4294967295)),W.clear(Se)},this.clearColor=function(){this.clear(!0,!1,!1)},this.clearDepth=function(){this.clear(!1,!0,!1)},this.clearStencil=function(){this.clear(!1,!1,!0)},this.dispose=function(){t.removeEventListener("webglcontextlost",Xe,!1),t.removeEventListener("webglcontextrestored",zt,!1),t.removeEventListener("webglcontextcreationerror",Ut,!1),bn.dispose(),jt.dispose(),hi.dispose(),Bt.dispose(),L.dispose(),pe.dispose(),He.dispose(),rr.dispose(),ie.dispose(),Ot.dispose(),Le.dispose(),Le.removeEventListener("sessionstart",Ws),Le.removeEventListener("sessionend",bx),$a.stop()},this.renderBufferDirect=function(B,se,be,Se,ce,ht){null===se&&(se=li);const Pt=ce.isMesh&&ce.matrixWorld.determinant()<0,qt=function wx(B,se,be,Se,ce){!0!==se.isScene&&(se=li),G.resetTextureUnits();const ht=se.fog,qt=null===D?A.outputColorSpace:!0===D.isXRRenderTarget?D.texture.colorSpace:m_,Ht=(Se.isMeshStandardMaterial?pe:L).get(Se.envMap||(Se.isMeshStandardMaterial?se.environment:null)),Rn=!0===Se.vertexColors&&!!be.attributes.color&&4===be.attributes.color.itemSize,Hn=!!be.attributes.tangent&&(!!Se.normalMap||Se.anisotropy>0),wn=!!be.morphAttributes.position,bi=!!be.morphAttributes.normal,Gi=!!be.morphAttributes.color;let ur=sh;Se.toneMapped&&(null===D||!0===D.isXRRenderTarget)&&(ur=A.toneMapping);const wr=be.morphAttributes.position||be.morphAttributes.normal||be.morphAttributes.color,Pi=void 0!==wr?wr.length:0,En=Bt.get(Se),Rs=w.state.lights;!0!==pt||!0!==cn&&B===M||mt.setState(Se,B,B===M&&Se.id===I);let Wi=!1;Se.version===En.__version?(En.needsLights&&En.lightsStateVersion!==Rs.state.version||En.outputColorSpace!==qt||ce.isBatchedMesh&&!1===En.batching||!ce.isBatchedMesh&&!0===En.batching||ce.isBatchedMesh&&!0===En.batchingColor&&null===ce.colorTexture||ce.isBatchedMesh&&!1===En.batchingColor&&null!==ce.colorTexture||ce.isInstancedMesh&&!1===En.instancing||!ce.isInstancedMesh&&!0===En.instancing||ce.isSkinnedMesh&&!1===En.skinning||!ce.isSkinnedMesh&&!0===En.skinning||ce.isInstancedMesh&&!0===En.instancingColor&&null===ce.instanceColor||ce.isInstancedMesh&&!1===En.instancingColor&&null!==ce.instanceColor||ce.isInstancedMesh&&!0===En.instancingMorph&&null===ce.morphTexture||ce.isInstancedMesh&&!1===En.instancingMorph&&null!==ce.morphTexture||En.envMap!==Ht||!0===Se.fog&&En.fog!==ht||void 0!==En.numClippingPlanes&&(En.numClippingPlanes!==mt.numPlanes||En.numIntersection!==mt.numIntersection)||En.vertexAlphas!==Rn||En.vertexTangents!==Hn||En.morphTargets!==wn||En.morphNormals!==bi||En.morphColors!==Gi||En.toneMapping!==ur||En.morphTargetsCount!==Pi)&&(Wi=!0):(Wi=!0,En.__version=Se.version);let xa=En.currentProgram;!0===Wi&&(xa=ev(Se,se,ce));let Ju=!1,Jo=!1,qa=!1;const Ni=xa.getUniforms(),ro=En.uniforms;if(Et.useProgram(xa.program)&&(Ju=!0,Jo=!0,qa=!0),Se.id!==I&&(I=Se.id,Jo=!0),Ju||M!==B){Et.buffers.depth.getReversed()?(Ze.copy(B.projectionMatrix),function E0e(n){const e=n.elements;e[2]=.5*e[2]+.5*e[3],e[6]=.5*e[6]+.5*e[7],e[10]=.5*e[10]+.5*e[11],e[14]=.5*e[14]+.5*e[15]}(Ze),function T0e(n){const e=n.elements;-1===e[11]?(e[10]=-e[10]-1,e[14]=-e[14]):(e[10]=-e[10],e[14]=1-e[14])}(Ze),Ni.setValue(W,"projectionMatrix",Ze)):Ni.setValue(W,"projectionMatrix",B.projectionMatrix),Ni.setValue(W,"viewMatrix",B.matrixWorldInverse);const ci=Ni.map.cameraPosition;void 0!==ci&&ci.setValue(W,Mn.setFromMatrixPosition(B.matrixWorld)),en.logarithmicDepthBuffer&&Ni.setValue(W,"logDepthBufFC",2/(Math.log(B.far+1)/Math.LN2)),(Se.isMeshPhongMaterial||Se.isMeshToonMaterial||Se.isMeshLambertMaterial||Se.isMeshBasicMaterial||Se.isMeshStandardMaterial||Se.isShaderMaterial)&&Ni.setValue(W,"isOrthographic",!0===B.isOrthographicCamera),M!==B&&(M=B,Jo=!0,qa=!0)}if(ce.isSkinnedMesh){Ni.setOptional(W,ce,"bindMatrix"),Ni.setOptional(W,ce,"bindMatrixInverse");const js=ce.skeleton;js&&(null===js.boneTexture&&js.computeBoneTexture(),Ni.setValue(W,"boneTexture",js.boneTexture,G))}ce.isBatchedMesh&&(Ni.setOptional(W,ce,"batchingTexture"),Ni.setValue(W,"batchingTexture",ce._matricesTexture,G),Ni.setOptional(W,ce,"batchingIdTexture"),Ni.setValue(W,"batchingIdTexture",ce._indirectTexture,G),Ni.setOptional(W,ce,"batchingColorTexture"),null!==ce._colorsTexture&&Ni.setValue(W,"batchingColorTexture",ce._colorsTexture,G));const so=be.morphAttributes;if((void 0!==so.position||void 0!==so.normal||void 0!==so.color)&&On.update(ce,be,xa),(Jo||En.receiveShadow!==ce.receiveShadow)&&(En.receiveShadow=ce.receiveShadow,Ni.setValue(W,"receiveShadow",ce.receiveShadow)),Se.isMeshGouraudMaterial&&null!==Se.envMap&&(ro.envMap.value=Ht,ro.flipEnvMap.value=Ht.isCubeTexture&&!1===Ht.isRenderTargetTexture?-1:1),Se.isMeshStandardMaterial&&null===Se.envMap&&null!==se.environment&&(ro.envMapIntensity.value=se.environmentIntensity),Jo&&(Ni.setValue(W,"toneMappingExposure",A.toneMappingExposure),En.needsLights&&function tv(B,se){B.ambientLightColor.needsUpdate=se,B.lightProbe.needsUpdate=se,B.directionalLights.needsUpdate=se,B.directionalLightShadows.needsUpdate=se,B.pointLights.needsUpdate=se,B.pointLightShadows.needsUpdate=se,B.spotLights.needsUpdate=se,B.spotLightShadows.needsUpdate=se,B.rectAreaLights.needsUpdate=se,B.hemisphereLights.needsUpdate=se}(ro,qa),ht&&!0===Se.fog&&yt.refreshFogUniforms(ro,ht),yt.refreshMaterialUniforms(ro,Se,oe,we,w.state.transmissionRenderTarget[B.id]),FI.upload(W,Sp(En),ro,G)),Se.isShaderMaterial&&!0===Se.uniformsNeedUpdate&&(FI.upload(W,Sp(En),ro,G),Se.uniformsNeedUpdate=!1),Se.isSpriteMaterial&&Ni.setValue(W,"center",ce.center),Ni.setValue(W,"modelViewMatrix",ce.modelViewMatrix),Ni.setValue(W,"normalMatrix",ce.normalMatrix),Ni.setValue(W,"modelMatrix",ce.matrixWorld),Se.isShaderMaterial||Se.isRawShaderMaterial){const js=Se.uniformsGroups;for(let ci=0,bh=js.length;ci<bh;ci++){const Xa=js[ci];ie.update(Xa,xa),ie.bind(Xa,xa)}}return xa}(B,se,be,Se,ce);Et.setMaterial(Se,Pt);let Ht=be.index,Rn=1;if(!0===Se.wireframe){if(Ht=tt.getWireframeAttribute(be),void 0===Ht)return;Rn=2}const Hn=be.drawRange,wn=be.attributes.position;let bi=Hn.start*Rn,Gi=(Hn.start+Hn.count)*Rn;null!==ht&&(bi=Math.max(bi,ht.start*Rn),Gi=Math.min(Gi,(ht.start+ht.count)*Rn)),null!==Ht?(bi=Math.max(bi,0),Gi=Math.min(Gi,Ht.count)):null!=wn&&(bi=Math.max(bi,0),Gi=Math.min(Gi,wn.count));const ur=Gi-bi;if(ur<0||ur===1/0)return;rr.setup(ce,Se,qt,be,Ht);let wr,Pi=nn;if(null!==Ht&&(wr=ze.get(Ht),Pi=yi,Pi.setIndex(wr)),ce.isMesh)!0===Se.wireframe?(Et.setLineWidth(Se.wireframeLinewidth*it()),Pi.setMode(W.LINES)):Pi.setMode(W.TRIANGLES);else if(ce.isLine){let En=Se.linewidth;void 0===En&&(En=1),Et.setLineWidth(En*it()),Pi.setMode(ce.isLineSegments?W.LINES:ce.isLineLoop?W.LINE_LOOP:W.LINE_STRIP)}else ce.isPoints?Pi.setMode(W.POINTS):ce.isSprite&&Pi.setMode(W.TRIANGLES);if(ce.isBatchedMesh)if(null!==ce._multiDrawInstances)Pi.renderMultiDrawInstances(ce._multiDrawStarts,ce._multiDrawCounts,ce._multiDrawCount,ce._multiDrawInstances);else if(ut.get("WEBGL_multi_draw"))Pi.renderMultiDraw(ce._multiDrawStarts,ce._multiDrawCounts,ce._multiDrawCount);else{const En=ce._multiDrawStarts,Rs=ce._multiDrawCounts,Wi=ce._multiDrawCount,xa=Ht?ze.get(Ht).bytesPerElement:1,Ju=Bt.get(Se).currentProgram.getUniforms();for(let Jo=0;Jo<Wi;Jo++)Ju.setValue(W,"_gl_DrawID",Jo),Pi.render(En[Jo]/xa,Rs[Jo])}else if(ce.isInstancedMesh)Pi.renderInstances(bi,ur,ce.count);else if(be.isInstancedBufferGeometry){const Rs=Math.min(be.instanceCount,void 0!==be._maxInstanceCount?be._maxInstanceCount:1/0);Pi.renderInstances(bi,ur,Rs)}else Pi.render(bi,ur)},this.compile=function(B,se,be=null){null===be&&(be=B),w=hi.get(be),w.init(se),S.push(w),be.traverseVisible(function(ce){ce.isLight&&ce.layers.test(se.layers)&&(w.pushLight(ce),ce.castShadow&&w.pushShadow(ce))}),B!==be&&B.traverseVisible(function(ce){ce.isLight&&ce.layers.test(se.layers)&&(w.pushLight(ce),ce.castShadow&&w.pushShadow(ce))}),w.setupLights();const Se=new Set;return B.traverse(function(ce){if(!(ce.isMesh||ce.isPoints||ce.isLine||ce.isSprite))return;const ht=ce.material;if(ht)if(Array.isArray(ht))for(let Pt=0;Pt<ht.length;Pt++){const qt=ht[Pt];Hi(qt,be,ce),Se.add(qt)}else Hi(ht,be,ce),Se.add(ht)}),S.pop(),w=null,Se},this.compileAsync=function(B,se,be=null){const Se=this.compile(B,se,be);return new Promise(ce=>{function ht(){Se.forEach(function(Pt){Bt.get(Pt).currentProgram.isReady()&&Se.delete(Pt)}),0!==Se.size?setTimeout(ht,10):ce(B)}null!==ut.get("KHR_parallel_shader_compile")?ht():setTimeout(ht,10)})};let io=null;function Ws(){$a.stop()}function bx(){$a.start()}const $a=new n7;function Zu(B,se,be,Se){if(!1===B.visible)return;if(B.layers.test(se.layers))if(B.isGroup)be=B.renderOrder;else if(B.isLOD)!0===B.autoUpdate&&B.update(se);else if(B.isLight)w.pushLight(B),B.castShadow&&w.pushShadow(B);else if(B.isSprite){if(!B.frustumCulled||Re.intersectsSprite(B)){Se&&Jt.setFromMatrixPosition(B.matrixWorld).applyMatrix4(ln);const Pt=He.update(B),qt=B.material;qt.visible&&b.push(B,Pt,qt,be,Jt.z,null)}}else if((B.isMesh||B.isLine||B.isPoints)&&(!B.frustumCulled||Re.intersectsObject(B))){const Pt=He.update(B),qt=B.material;if(Se&&(void 0!==B.boundingSphere?(null===B.boundingSphere&&B.computeBoundingSphere(),Jt.copy(B.boundingSphere.center)):(null===Pt.boundingSphere&&Pt.computeBoundingSphere(),Jt.copy(Pt.boundingSphere.center)),Jt.applyMatrix4(B.matrixWorld).applyMatrix4(ln)),Array.isArray(qt)){const Ht=Pt.groups;for(let Rn=0,Hn=Ht.length;Rn<Hn;Rn++){const wn=Ht[Rn],bi=qt[wn.materialIndex];bi&&bi.visible&&b.push(B,Pt,bi,be,Jt.z,wn)}}else qt.visible&&b.push(B,Pt,qt,be,Jt.z,null)}const ht=B.children;for(let Pt=0,qt=ht.length;Pt<qt;Pt++)Zu(ht[Pt],se,be,Se)}function sC(B,se,be,Se){const ce=B.opaque,ht=B.transmissive,Pt=B.transparent;w.setupLightsView(be),!0===pt&&mt.setGlobalState(A.clippingPlanes,be),Se&&Et.viewport(O.copy(Se)),ce.length>0&&Gl(ce,se,be),ht.length>0&&Gl(ht,se,be),Pt.length>0&&Gl(Pt,se,be),Et.buffers.depth.setTest(!0),Et.buffers.depth.setMask(!0),Et.buffers.color.setMask(!0),Et.setPolygonOffset(!1)}function oC(B,se,be,Se){if(null!==(!0===be.isScene?be.overrideMaterial:null))return;void 0===w.state.transmissionRenderTarget[Se.id]&&(w.state.transmissionRenderTarget[Se.id]=new Lu(1,1,{generateMipmaps:!0,type:ut.has("EXT_color_buffer_half_float")||ut.has("EXT_color_buffer_float")?Vb:Ou,minFilter:ku,samples:4,stencilBuffer:s,resolveDepthBuffer:!1,resolveStencilBuffer:!1,colorSpace:Li.workingColorSpace}));const ht=w.state.transmissionRenderTarget[Se.id],Pt=Se.viewport||O;ht.setSize(Pt.z*A.transmissionResolutionScale,Pt.w*A.transmissionResolutionScale);const qt=A.getRenderTarget();A.setRenderTarget(ht),A.getClearColor(Ee),je=A.getClearAlpha(),je<1&&A.setClearColor(16777215,.5),A.clear(),lt&&bn.render(be);const Ht=A.toneMapping;A.toneMapping=sh;const Rn=Se.viewport;if(void 0!==Se.viewport&&(Se.viewport=void 0),w.setupLightsView(Se),!0===pt&&mt.setGlobalState(A.clippingPlanes,Se),Gl(B,be,Se),G.updateMultisampleRenderTarget(ht),G.updateRenderTargetMipmap(ht),!1===ut.has("WEBGL_multisampled_render_to_texture")){let Hn=!1;for(let wn=0,bi=se.length;wn<bi;wn++){const Gi=se[wn],ur=Gi.object,wr=Gi.geometry,Pi=Gi.material,En=Gi.group;if(2===Pi.side&&ur.layers.test(Se.layers)){const Rs=Pi.side;Pi.side=1,Pi.needsUpdate=!0,aC(ur,be,Se,wr,Pi,En),Pi.side=Rs,Pi.needsUpdate=!0,Hn=!0}}!0===Hn&&(G.updateMultisampleRenderTarget(ht),G.updateRenderTargetMipmap(ht))}A.setRenderTarget(qt),A.setClearColor(Ee,je),void 0!==Rn&&(Se.viewport=Rn),A.toneMapping=Ht}function Gl(B,se,be){const Se=!0===se.isScene?se.overrideMaterial:null;for(let ce=0,ht=B.length;ce<ht;ce++){const Pt=B[ce],qt=Pt.object,Ht=Pt.geometry,Rn=null===Se?Pt.material:Se,Hn=Pt.group;qt.layers.test(be.layers)&&aC(qt,se,be,Ht,Rn,Hn)}}function aC(B,se,be,Se,ce,ht){B.onBeforeRender(A,se,be,Se,ce,ht),B.modelViewMatrix.multiplyMatrices(be.matrixWorldInverse,B.matrixWorld),B.normalMatrix.getNormalMatrix(B.modelViewMatrix),ce.onBeforeRender(A,se,be,Se,B,ht),!0===ce.transparent&&2===ce.side&&!1===ce.forceSinglePass?(ce.side=1,ce.needsUpdate=!0,A.renderBufferDirect(be,se,Se,ce,B,ht),ce.side=0,ce.needsUpdate=!0,A.renderBufferDirect(be,se,Se,ce,B,ht),ce.side=2):A.renderBufferDirect(be,se,Se,ce,B,ht),B.onAfterRender(A,se,be,Se,ce,ht)}function ev(B,se,be){!0!==se.isScene&&(se=li);const Se=Bt.get(B),ce=w.state.lights,Pt=ce.state.version,qt=Ot.getParameters(B,ce.state,w.state.shadowsArray,se,be),Ht=Ot.getProgramCacheKey(qt);let Rn=Se.programs;Se.environment=B.isMeshStandardMaterial?se.environment:null,Se.fog=se.fog,Se.envMap=(B.isMeshStandardMaterial?pe:L).get(B.envMap||Se.environment),Se.envMapRotation=null!==Se.environment&&null===B.envMap?se.environmentRotation:B.envMapRotation,void 0===Rn&&(B.addEventListener("dispose",Dn),Rn=new Map,Se.programs=Rn);let Hn=Rn.get(Ht);if(void 0!==Hn){if(Se.currentProgram===Hn&&Se.lightsStateVersion===Pt)return xx(B,qt),Hn}else qt.uniforms=Ot.getUniforms(B),B.onBeforeCompile(qt,A),Hn=Ot.acquireProgram(qt,Ht),Rn.set(Ht,Hn),Se.uniforms=qt.uniforms;const wn=Se.uniforms;return(!B.isShaderMaterial&&!B.isRawShaderMaterial||!0===B.clipping)&&(wn.clippingPlanes=mt.uniform),xx(B,qt),Se.needsLights=function Nc(B){return B.isMeshLambertMaterial||B.isMeshToonMaterial||B.isMeshPhongMaterial||B.isMeshStandardMaterial||B.isShadowMaterial||B.isShaderMaterial&&!0===B.lights}(B),Se.lightsStateVersion=Pt,Se.needsLights&&(wn.ambientLightColor.value=ce.state.ambient,wn.lightProbe.value=ce.state.probe,wn.directionalLights.value=ce.state.directional,wn.directionalLightShadows.value=ce.state.directionalShadow,wn.spotLights.value=ce.state.spot,wn.spotLightShadows.value=ce.state.spotShadow,wn.rectAreaLights.value=ce.state.rectArea,wn.ltc_1.value=ce.state.rectAreaLTC1,wn.ltc_2.value=ce.state.rectAreaLTC2,wn.pointLights.value=ce.state.point,wn.pointLightShadows.value=ce.state.pointShadow,wn.hemisphereLights.value=ce.state.hemi,wn.directionalShadowMap.value=ce.state.directionalShadowMap,wn.directionalShadowMatrix.value=ce.state.directionalShadowMatrix,wn.spotShadowMap.value=ce.state.spotShadowMap,wn.spotLightMatrix.value=ce.state.spotLightMatrix,wn.spotLightMap.value=ce.state.spotLightMap,wn.pointShadowMap.value=ce.state.pointShadowMap,wn.pointShadowMatrix.value=ce.state.pointShadowMatrix),Se.currentProgram=Hn,Se.uniformsList=null,Hn}function Sp(B){if(null===B.uniformsList){const se=B.currentProgram.getUniforms();B.uniformsList=FI.seqWithValue(se.seq,B.uniforms)}return B.uniformsList}function xx(B,se){const be=Bt.get(B);be.outputColorSpace=se.outputColorSpace,be.batching=se.batching,be.batchingColor=se.batchingColor,be.instancing=se.instancing,be.instancingColor=se.instancingColor,be.instancingMorph=se.instancingMorph,be.skinning=se.skinning,be.morphTargets=se.morphTargets,be.morphNormals=se.morphNormals,be.morphColors=se.morphColors,be.morphTargetsCount=se.morphTargetsCount,be.numClippingPlanes=se.numClippingPlanes,be.numIntersection=se.numClipIntersection,be.vertexAlphas=se.vertexAlphas,be.vertexTangents=se.vertexTangents,be.toneMapping=se.toneMapping}$a.setAnimationLoop(function xl(B){io&&io(B)}),typeof self<"u"&&$a.setContext(self),this.setAnimationLoop=function(B){io=B,Le.setAnimationLoop(B),null===B?$a.stop():$a.start()},Le.addEventListener("sessionstart",Ws),Le.addEventListener("sessionend",bx),this.render=function(B,se){if(void 0!==se&&!0!==se.isCamera)return void console.error("THREE.WebGLRenderer.render: camera is not an instance of THREE.Camera.");if(!0===V)return;if(!0===B.matrixWorldAutoUpdate&&B.updateMatrixWorld(),null===se.parent&&!0===se.matrixWorldAutoUpdate&&se.updateMatrixWorld(),!0===Le.enabled&&!0===Le.isPresenting&&(!0===Le.cameraAutoUpdate&&Le.updateCamera(se),se=Le.getCamera()),!0===B.isScene&&B.onBeforeRender(A,B,se,D),w=hi.get(B,S.length),w.init(se),S.push(w),ln.multiplyMatrices(se.projectionMatrix,se.matrixWorldInverse),Re.setFromProjectionMatrix(ln),cn=this.localClippingEnabled,pt=mt.init(this.clippingPlanes,cn),b=jt.get(B,T.length),b.init(),T.push(b),!0===Le.enabled&&!0===Le.isPresenting){const ht=A.xr.getDepthSensingMesh();null!==ht&&Zu(ht,se,-1/0,A.sortObjects)}Zu(B,se,0,A.sortObjects),b.finish(),!0===A.sortObjects&&b.sort($e,vt),lt=!1===Le.enabled||!1===Le.isPresenting||!1===Le.hasDepthSensing(),lt&&bn.addToRenderList(b,B),this.info.render.frame++,!0===pt&&mt.beginShadows(),sn.render(w.state.shadowsArray,B,se),!0===pt&&mt.endShadows(),!0===this.info.autoReset&&this.info.reset();const Se=b.opaque,ce=b.transmissive;if(w.setupLights(),se.isArrayCamera){const ht=se.cameras;if(ce.length>0)for(let Pt=0,qt=ht.length;Pt<qt;Pt++)oC(Se,ce,B,ht[Pt]);lt&&bn.render(B);for(let Pt=0,qt=ht.length;Pt<qt;Pt++){const Ht=ht[Pt];sC(b,B,Ht,Ht.viewport)}}else ce.length>0&&oC(Se,ce,B,se),lt&&bn.render(B),sC(b,B,se);null!==D&&0===P&&(G.updateMultisampleRenderTarget(D),G.updateRenderTargetMipmap(D)),!0===B.isScene&&B.onAfterRender(A,B,se),rr.resetDefaultState(),I=-1,M=null,S.pop(),S.length>0?(w=S[S.length-1],!0===pt&&mt.setGlobalState(A.clippingPlanes,w.state.camera)):w=null,T.pop(),b=T.length>0?T[T.length-1]:null},this.getActiveCubeFace=function(){return F},this.getActiveMipmapLevel=function(){return P},this.getRenderTarget=function(){return D},this.setRenderTargetTextures=function(B,se,be){Bt.get(B.texture).__webglTexture=se,Bt.get(B.depthTexture).__webglTexture=be;const Se=Bt.get(B);Se.__hasExternalTextures=!0,Se.__autoAllocateDepthBuffer=void 0===be,Se.__autoAllocateDepthBuffer||!0===ut.has("WEBGL_multisampled_render_to_texture")&&(console.warn("THREE.WebGLRenderer: Render-to-texture extension was disabled because an external texture was provided"),Se.__useRenderToTexture=!1)},this.setRenderTargetFramebuffer=function(B,se){const be=Bt.get(B);be.__webglFramebuffer=se,be.__useDefaultFramebuffer=void 0===se};const lC=W.createFramebuffer();this.setRenderTarget=function(B,se=0,be=0){D=B,F=se,P=be;let Se=!0,ce=null,ht=!1,Pt=!1;if(B){const Ht=Bt.get(B);if(void 0!==Ht.__useDefaultFramebuffer)Et.bindFramebuffer(W.FRAMEBUFFER,null),Se=!1;else if(void 0===Ht.__webglFramebuffer)G.setupRenderTarget(B);else if(Ht.__hasExternalTextures)G.rebindTextures(B,Bt.get(B.texture).__webglTexture,Bt.get(B.depthTexture).__webglTexture);else if(B.depthBuffer){const wn=B.depthTexture;if(Ht.__boundDepthTexture!==wn){if(null!==wn&&Bt.has(wn)&&(B.width!==wn.image.width||B.height!==wn.image.height))throw new Error("WebGLRenderTarget: Attached DepthTexture is initialized to the incorrect size.");G.setupDepthRenderbuffer(B)}}const Rn=B.texture;(Rn.isData3DTexture||Rn.isDataArrayTexture||Rn.isCompressedArrayTexture)&&(Pt=!0);const Hn=Bt.get(B).__webglFramebuffer;B.isWebGLCubeRenderTarget?(ce=Array.isArray(Hn[se])?Hn[se][be]:Hn[se],ht=!0):ce=B.samples>0&&!1===G.useMultisampledRTT(B)?Bt.get(B).__webglMultisampledFramebuffer:Array.isArray(Hn)?Hn[be]:Hn,O.copy(B.viewport),z.copy(B.scissor),N=B.scissorTest}else O.copy(Ft).multiplyScalar(oe).floor(),z.copy(rn).multiplyScalar(oe).floor(),N=gn;if(0!==be&&(ce=lC),Et.bindFramebuffer(W.FRAMEBUFFER,ce)&&Se&&Et.drawBuffers(B,ce),Et.viewport(O),Et.scissor(z),Et.setScissorTest(N),ht){const Ht=Bt.get(B.texture);W.framebufferTexture2D(W.FRAMEBUFFER,W.COLOR_ATTACHMENT0,W.TEXTURE_CUBE_MAP_POSITIVE_X+se,Ht.__webglTexture,be)}else if(Pt){const Ht=Bt.get(B.texture);W.framebufferTextureLayer(W.FRAMEBUFFER,W.COLOR_ATTACHMENT0,Ht.__webglTexture,be,se)}else if(null!==B&&0!==be){const Ht=Bt.get(B.texture);W.framebufferTexture2D(W.FRAMEBUFFER,W.COLOR_ATTACHMENT0,W.TEXTURE_2D,Ht.__webglTexture,be)}I=-1},this.readRenderTargetPixels=function(B,se,be,Se,ce,ht,Pt){if(!B||!B.isWebGLRenderTarget)return void console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");let qt=Bt.get(B).__webglFramebuffer;if(B.isWebGLCubeRenderTarget&&void 0!==Pt&&(qt=qt[Pt]),qt){Et.bindFramebuffer(W.FRAMEBUFFER,qt);try{const Ht=B.texture,Rn=Ht.format,Hn=Ht.type;if(!en.textureFormatReadable(Rn))return void console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in RGBA or implementation defined format.");if(!en.textureTypeReadable(Hn))return void console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in UnsignedByteType or implementation defined type.");se>=0&&se<=B.width-Se&&be>=0&&be<=B.height-ce&&W.readPixels(se,be,Se,ce,ei.convert(Rn),ei.convert(Hn),ht)}finally{const Ht=null!==D?Bt.get(D).__webglFramebuffer:null;Et.bindFramebuffer(W.FRAMEBUFFER,Ht)}}},this.readRenderTargetPixelsAsync=function(){var B=(0,Me.A)(function*(se,be,Se,ce,ht,Pt,qt){if(!se||!se.isWebGLRenderTarget)throw new Error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");let Ht=Bt.get(se).__webglFramebuffer;if(se.isWebGLCubeRenderTarget&&void 0!==qt&&(Ht=Ht[qt]),Ht){const Rn=se.texture,Hn=Rn.format,wn=Rn.type;if(!en.textureFormatReadable(Hn))throw new Error("THREE.WebGLRenderer.readRenderTargetPixelsAsync: renderTarget is not in RGBA or implementation defined format.");if(!en.textureTypeReadable(wn))throw new Error("THREE.WebGLRenderer.readRenderTargetPixelsAsync: renderTarget is not in UnsignedByteType or implementation defined type.");if(be>=0&&be<=se.width-ce&&Se>=0&&Se<=se.height-ht){Et.bindFramebuffer(W.FRAMEBUFFER,Ht);const bi=W.createBuffer();W.bindBuffer(W.PIXEL_PACK_BUFFER,bi),W.bufferData(W.PIXEL_PACK_BUFFER,Pt.byteLength,W.STREAM_READ),W.readPixels(be,Se,ce,ht,ei.convert(Hn),ei.convert(wn),0);const Gi=null!==D?Bt.get(D).__webglFramebuffer:null;Et.bindFramebuffer(W.FRAMEBUFFER,Gi);const ur=W.fenceSync(W.SYNC_GPU_COMMANDS_COMPLETE,0);return W.flush(),yield function w0e(n,e,t){return new Promise(function(i,r){setTimeout(function s(){switch(n.clientWaitSync(e,n.SYNC_FLUSH_COMMANDS_BIT,0)){case n.WAIT_FAILED:r();break;case n.TIMEOUT_EXPIRED:setTimeout(s,t);break;default:i()}},t)})}(W,ur,4),W.bindBuffer(W.PIXEL_PACK_BUFFER,bi),W.getBufferSubData(W.PIXEL_PACK_BUFFER,0,Pt),W.deleteBuffer(bi),W.deleteSync(ur),Pt}throw new Error("THREE.WebGLRenderer.readRenderTargetPixelsAsync: requested read bounds are out of range.")}});return function(se,be,Se,ce,ht,Pt,qt){return B.apply(this,arguments)}}(),this.copyFramebufferToTexture=function(B,se=null,be=0){!0!==B.isTexture&&(y_("WebGLRenderer: copyFramebufferToTexture function signature has changed."),se=arguments[0]||null,B=arguments[1]);const Se=Math.pow(2,-be),ce=Math.floor(B.image.width*Se),ht=Math.floor(B.image.height*Se),Pt=null!==se?se.x:0,qt=null!==se?se.y:0;G.setTexture2D(B,0),W.copyTexSubImage2D(W.TEXTURE_2D,be,0,0,Pt,qt,ce,ht),Et.unbindTexture()};const cC=W.createFramebuffer(),Ex=W.createFramebuffer();this.copyTextureToTexture=function(B,se,be=null,Se=null,ce=0,ht=null){let Pt,qt,Ht,Rn,Hn,wn,bi,Gi,ur;!0!==B.isTexture&&(y_("WebGLRenderer: copyTextureToTexture function signature has changed."),Se=arguments[0]||null,B=arguments[1],se=arguments[2],ht=arguments[3]||0,be=null),null===ht&&(0!==ce?(y_("WebGLRenderer: copyTextureToTexture function signature has changed to support src and dst mipmap levels."),ht=ce,ce=0):ht=0);const wr=B.isCompressedTexture?B.mipmaps[ht]:B.image;if(null!==be)Pt=be.max.x-be.min.x,qt=be.max.y-be.min.y,Ht=be.isBox3?be.max.z-be.min.z:1,Rn=be.min.x,Hn=be.min.y,wn=be.isBox3?be.min.z:0;else{const so=Math.pow(2,-ce);Pt=Math.floor(wr.width*so),qt=Math.floor(wr.height*so),Ht=B.isDataArrayTexture?wr.depth:B.isData3DTexture?Math.floor(wr.depth*so):1,Rn=0,Hn=0,wn=0}null!==Se?(bi=Se.x,Gi=Se.y,ur=Se.z):(bi=0,Gi=0,ur=0);const Pi=ei.convert(se.format),En=ei.convert(se.type);let Rs;se.isData3DTexture?(G.setTexture3D(se,0),Rs=W.TEXTURE_3D):se.isDataArrayTexture||se.isCompressedArrayTexture?(G.setTexture2DArray(se,0),Rs=W.TEXTURE_2D_ARRAY):(G.setTexture2D(se,0),Rs=W.TEXTURE_2D),W.pixelStorei(W.UNPACK_FLIP_Y_WEBGL,se.flipY),W.pixelStorei(W.UNPACK_PREMULTIPLY_ALPHA_WEBGL,se.premultiplyAlpha),W.pixelStorei(W.UNPACK_ALIGNMENT,se.unpackAlignment);const Wi=W.getParameter(W.UNPACK_ROW_LENGTH),xa=W.getParameter(W.UNPACK_IMAGE_HEIGHT),Ju=W.getParameter(W.UNPACK_SKIP_PIXELS),Jo=W.getParameter(W.UNPACK_SKIP_ROWS),qa=W.getParameter(W.UNPACK_SKIP_IMAGES);W.pixelStorei(W.UNPACK_ROW_LENGTH,wr.width),W.pixelStorei(W.UNPACK_IMAGE_HEIGHT,wr.height),W.pixelStorei(W.UNPACK_SKIP_PIXELS,Rn),W.pixelStorei(W.UNPACK_SKIP_ROWS,Hn),W.pixelStorei(W.UNPACK_SKIP_IMAGES,wn);const Ni=B.isDataArrayTexture||B.isData3DTexture,ro=se.isDataArrayTexture||se.isData3DTexture;if(B.isDepthTexture){const so=Bt.get(B),js=Bt.get(se),ci=Bt.get(so.__renderTarget),bh=Bt.get(js.__renderTarget);Et.bindFramebuffer(W.READ_FRAMEBUFFER,ci.__webglFramebuffer),Et.bindFramebuffer(W.DRAW_FRAMEBUFFER,bh.__webglFramebuffer);for(let Xa=0;Xa<Ht;Xa++)Ni&&(W.framebufferTextureLayer(W.READ_FRAMEBUFFER,W.COLOR_ATTACHMENT0,Bt.get(B).__webglTexture,ce,wn+Xa),W.framebufferTextureLayer(W.DRAW_FRAMEBUFFER,W.COLOR_ATTACHMENT0,Bt.get(se).__webglTexture,ht,ur+Xa)),W.blitFramebuffer(Rn,Hn,Pt,qt,bi,Gi,Pt,qt,W.DEPTH_BUFFER_BIT,W.NEAREST);Et.bindFramebuffer(W.READ_FRAMEBUFFER,null),Et.bindFramebuffer(W.DRAW_FRAMEBUFFER,null)}else if(0!==ce||B.isRenderTargetTexture||Bt.has(B)){const so=Bt.get(B),js=Bt.get(se);Et.bindFramebuffer(W.READ_FRAMEBUFFER,cC),Et.bindFramebuffer(W.DRAW_FRAMEBUFFER,Ex);for(let ci=0;ci<Ht;ci++)Ni?W.framebufferTextureLayer(W.READ_FRAMEBUFFER,W.COLOR_ATTACHMENT0,so.__webglTexture,ce,wn+ci):W.framebufferTexture2D(W.READ_FRAMEBUFFER,W.COLOR_ATTACHMENT0,W.TEXTURE_2D,so.__webglTexture,ce),ro?W.framebufferTextureLayer(W.DRAW_FRAMEBUFFER,W.COLOR_ATTACHMENT0,js.__webglTexture,ht,ur+ci):W.framebufferTexture2D(W.DRAW_FRAMEBUFFER,W.COLOR_ATTACHMENT0,W.TEXTURE_2D,js.__webglTexture,ht),0!==ce?W.blitFramebuffer(Rn,Hn,Pt,qt,bi,Gi,Pt,qt,W.COLOR_BUFFER_BIT,W.NEAREST):ro?W.copyTexSubImage3D(Rs,ht,bi,Gi,ur+ci,Rn,Hn,Pt,qt):W.copyTexSubImage2D(Rs,ht,bi,Gi,Rn,Hn,Pt,qt);Et.bindFramebuffer(W.READ_FRAMEBUFFER,null),Et.bindFramebuffer(W.DRAW_FRAMEBUFFER,null)}else ro?B.isDataTexture||B.isData3DTexture?W.texSubImage3D(Rs,ht,bi,Gi,ur,Pt,qt,Ht,Pi,En,wr.data):se.isCompressedArrayTexture?W.compressedTexSubImage3D(Rs,ht,bi,Gi,ur,Pt,qt,Ht,Pi,wr.data):W.texSubImage3D(Rs,ht,bi,Gi,ur,Pt,qt,Ht,Pi,En,wr):B.isDataTexture?W.texSubImage2D(W.TEXTURE_2D,ht,bi,Gi,Pt,qt,Pi,En,wr.data):B.isCompressedTexture?W.compressedTexSubImage2D(W.TEXTURE_2D,ht,bi,Gi,wr.width,wr.height,Pi,wr.data):W.texSubImage2D(W.TEXTURE_2D,ht,bi,Gi,Pt,qt,Pi,En,wr);W.pixelStorei(W.UNPACK_ROW_LENGTH,Wi),W.pixelStorei(W.UNPACK_IMAGE_HEIGHT,xa),W.pixelStorei(W.UNPACK_SKIP_PIXELS,Ju),W.pixelStorei(W.UNPACK_SKIP_ROWS,Jo),W.pixelStorei(W.UNPACK_SKIP_IMAGES,qa),0===ht&&se.generateMipmaps&&W.generateMipmap(Rs),Et.unbindTexture()},this.copyTextureToTexture3D=function(B,se,be=null,Se=null,ce=0){return!0!==B.isTexture&&(y_("WebGLRenderer: copyTextureToTexture3D function signature has changed."),be=arguments[0]||null,Se=arguments[1]||null,B=arguments[2],se=arguments[3],ce=arguments[4]||0),y_('WebGLRenderer: copyTextureToTexture3D function has been deprecated. Use "copyTextureToTexture" instead.'),this.copyTextureToTexture(B,se,be,Se,ce)},this.initRenderTarget=function(B){void 0===Bt.get(B).__webglFramebuffer&&G.setupRenderTarget(B)},this.initTexture=function(B){B.isCubeTexture?G.setTextureCube(B,0):B.isData3DTexture?G.setTexture3D(B,0):B.isDataArrayTexture||B.isCompressedArrayTexture?G.setTexture2DArray(B,0):G.setTexture2D(B,0),Et.unbindTexture()},this.resetState=function(){F=0,P=0,D=null,Et.reset(),rr.reset()},typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}get coordinateSystem(){return Ac}get outputColorSpace(){return this._outputColorSpace}set outputColorSpace(e){this._outputColorSpace=e;const t=this.getContext();t.drawingBufferColorspace=Li._getDrawingBufferColorSpace(e),t.unpackColorSpace=Li._getUnpackColorSpace()}}const XSe=[{path:"",component:cye},{path:"file/:id",component:fye},{path:"three",component:(()=>{class n{constructor(t){this.el=t,this.balls=[],this.velocities=[],this.colors=[16734003,3407703,3364863,15990579,16724904,3407861],this.theme="light",this.animate=()=>{requestAnimationFrame(this.animate),this.balls.forEach((i,r)=>{i.position.add(this.velocities[r]),(i.position.x>10||i.position.x<-10)&&(this.velocities[r].x*=-1),(i.position.y>5||i.position.y<-5)&&(this.velocities[r].y*=-1),(i.position.z>5||i.position.z<-5)&&(this.velocities[r].z*=-1)}),this.renderer.render(this.scene,this.camera)}}ngAfterViewInit(){this.initScene(),this.createBalls(),this.animate()}initScene(){this.scene=new U9,this.camera=new no(75,window.innerWidth/window.innerHeight,.1,1e3),this.renderer=new qSe({alpha:!0}),this.renderer.setSize(window.innerWidth,window.innerHeight),this.el.nativeElement.appendChild(this.renderer.domElement),this.camera.position.z=15;const t=new kq(16777215,1.2);this.scene.add(t)}createBalls(){const t=new cx(1,64,64);for(let i=0;i<25;i++){const r=this.colors[Math.floor(Math.random()*this.colors.length)],s=new UF({color:r,roughness:.5,metalness:.3}),o=new xs(t,s);o.position.set(20*Math.random()-10,10*Math.random()-5,10*Math.random()-5),this.scene.add(o),this.balls.push(o),this.velocities.push(new j(.2*(Math.random()-.5),.2*(Math.random()-.5),.2*(Math.random()-.5)))}}onResize(){this.camera.aspect=window.innerWidth/window.innerHeight,this.camera.updateProjectionMatrix(),this.renderer.setSize(window.innerWidth,window.innerHeight)}changeTheme(t){this.theme=t,this.balls.forEach(i=>{const r=this.colors[Math.floor(Math.random()*this.colors.length)];i.material.color.setHex(r)})}static{this.\u0275fac=function(i){return new(i||n)(J(Di))}}static{this.\u0275cmp=hr({type:n,selectors:[["app-three-dbackground"]],hostBindings:function(i,r){1&i&&qn("resize",function(o){return r.onResize(o)},0,HV)},decls:2,vars:0,consts:[["canvas",""]],template:function(i,r){1&i&&Ri(0,"canvas",null,0)},styles:["canvas[_ngcontent-%COMP%]{width:100%;height:100vh}"]})}}return n})()}];let KSe=(()=>{class n{static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275mod=ni({type:n})}static{this.\u0275inj=jn({imports:[UH.forRoot(XSe,{enableTracing:!1,useHash:!0}),UH]})}}return n})();const YSe=["*",[["mat-toolbar-row"]]],QSe=["*","mat-toolbar-row"],ZSe=dO(class{constructor(n){this._elementRef=n}});let JSe=(()=>{class n{static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275dir=St({type:n,selectors:[["mat-toolbar-row"]],hostAttrs:[1,"mat-toolbar-row"],exportAs:["matToolbarRow"]})}}return n})(),eAe=(()=>{class n extends ZSe{constructor(t,i,r){super(t),this._platform=i,this._document=r}ngAfterViewInit(){this._platform.isBrowser&&(this._checkToolbarMixedModes(),this._toolbarRows.changes.subscribe(()=>this._checkToolbarMixedModes()))}_checkToolbarMixedModes(){}static{this.\u0275fac=function(i){return new(i||n)(J(Di),J(fa),J(_i))}}static{this.\u0275cmp=hr({type:n,selectors:[["mat-toolbar"]],contentQueries:function(i,r,s){if(1&i&&Vs(s,JSe,5),2&i){let o;Ui(o=Bi())&&(r._toolbarRows=o)}},hostAttrs:[1,"mat-toolbar"],hostVars:4,hostBindings:function(i,r){2&i&&_r("mat-toolbar-multiple-rows",r._toolbarRows.length>0)("mat-toolbar-single-row",0===r._toolbarRows.length)},inputs:{color:"color"},exportAs:["matToolbar"],features:[si],ngContentSelectors:QSe,decls:2,vars:0,template:function(i,r){1&i&&(dl(YSe),qi(0),qi(1,1))},styles:[".mat-toolbar{background:var(--mat-toolbar-container-background-color);color:var(--mat-toolbar-container-text-color)}.mat-toolbar,.mat-toolbar h1,.mat-toolbar h2,.mat-toolbar h3,.mat-toolbar h4,.mat-toolbar h5,.mat-toolbar h6{font-family:var(--mat-toolbar-title-text-font);font-size:var(--mat-toolbar-title-text-size);line-height:var(--mat-toolbar-title-text-line-height);font-weight:var(--mat-toolbar-title-text-weight);letter-spacing:var(--mat-toolbar-title-text-tracking);margin:0}.cdk-high-contrast-active .mat-toolbar{outline:solid 1px}.mat-toolbar .mat-form-field-underline,.mat-toolbar .mat-form-field-ripple,.mat-toolbar .mat-focused .mat-form-field-ripple{background-color:currentColor}.mat-toolbar .mat-form-field-label,.mat-toolbar .mat-focused .mat-form-field-label,.mat-toolbar .mat-select-value,.mat-toolbar .mat-select-arrow,.mat-toolbar .mat-form-field.mat-focused .mat-select-arrow{color:inherit}.mat-toolbar .mat-input-element{caret-color:currentColor}.mat-toolbar .mat-mdc-button-base.mat-mdc-button-base.mat-unthemed{--mdc-text-button-label-text-color: inherit;--mdc-outlined-button-label-text-color: inherit}.mat-toolbar-row,.mat-toolbar-single-row{display:flex;box-sizing:border-box;padding:0 16px;width:100%;flex-direction:row;align-items:center;white-space:nowrap;height:var(--mat-toolbar-standard-height)}@media(max-width: 599px){.mat-toolbar-row,.mat-toolbar-single-row{height:var(--mat-toolbar-mobile-height)}}.mat-toolbar-multiple-rows{display:flex;box-sizing:border-box;flex-direction:column;width:100%;min-height:var(--mat-toolbar-standard-height)}@media(max-width: 599px){.mat-toolbar-multiple-rows{min-height:var(--mat-toolbar-mobile-height)}}"],encapsulation:2,changeDetection:0})}}return n})(),R7=(()=>{class n{static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275mod=ni({type:n})}static{this.\u0275inj=jn({imports:[us,us]})}}return n})();const tAe=["threeBubbles"];let nAe=(()=>{class n{constructor(t,i,r){this.fileService=t,this.router=i,this.renderer=r,this.title="quickshare"}ngOnInit(){this.fileService.cleanupExpiredFiles(),setInterval(()=>{this.fileService.cleanupExpiredFiles()},36e5);const t=localStorage.getItem("theme");this.isDarkMode="dark"===t,this.updateTheme()}toggleDarkMode(){this.isDarkMode=!this.isDarkMode,localStorage.setItem("theme",this.isDarkMode?"dark":"light"),this.updateTheme(),this.threeBubbles.changeTheme(this.isDarkMode?"dark":"light")}updateTheme(){this.isDarkMode?this.renderer.addClass(document.body,"dark-mode"):this.renderer.removeClass(document.body,"dark-mode")}navigation(){this.router.navigate([""])}static{this.\u0275fac=function(i){return new(i||n)(J(nW),J(ua),J(rc))}}static{this.\u0275cmp=hr({type:n,selectors:[["app-root"]],viewQuery:function(i,r){if(1&i&&Vo(tAe,5),2&i){let s;Ui(s=Bi())&&(r.threeBubbles=s.first)}},decls:9,vars:1,consts:[["color","primary",1,"toolbar"],[1,"logo",3,"click"],[1,"spacer"],["mat-icon-button","","aria-label","Toggle Dark Mode",3,"click"],[1,"container"]],template:function(i,r){1&i&&(at(0,"mat-toolbar",0)(1,"span",1),qn("click",function(){return r.navigation()}),zn(2,"QuickTransfer"),ct(),Ri(3,"span",2),at(4,"button",3),qn("click",function(){return r.toggleDarkMode()}),at(5,"mat-icon"),zn(6),ct()()(),at(7,"div",4),Ri(8,"router-outlet"),ct()),2&i&&(_t(6),hu(r.isDarkMode?"dark_mode":"light_mode"))},dependencies:[lR,$$,eAe],styles:[".toolbar[_ngcontent-%COMP%]{display:flex;align-items:center}.toolbar[_ngcontent-%COMP%]   .logo[_ngcontent-%COMP%]{font-size:24px;font-weight:700}.toolbar[_ngcontent-%COMP%]   .spacer[_ngcontent-%COMP%]{flex:1 1 auto}button[_ngcontent-%COMP%]{transition:transform .2s ease,box-shadow .2s ease}button[_ngcontent-%COMP%]:hover{transform:translateY(-2px);box-shadow:0 4px 8px #0003}app-three-dbackground[_ngcontent-%COMP%]{position:absolute}"]})}}return n})();function P7(n){return new Ce(3e3,!1)}function vh(n){switch(n.length){case 0:return new bb;case 1:return n[0];default:return new xW(n)}}function k7(n,e,t=new Map,i=new Map){const r=[],s=[];let o=-1,a=null;if(e.forEach(l=>{const c=l.get("offset"),u=c==o,d=u&&a||new Map;l.forEach((p,m)=>{let v=m,x=p;if("offset"!==m)switch(v=n.normalizePropertyName(v,r),x){case"!":x=t.get(m);break;case Du:x=i.get(m);break;default:x=n.normalizeStyleValue(m,v,x,r)}d.set(v,x)}),u||s.push(d),a=d,o=c}),r.length)throw function SAe(n){return new Ce(3502,!1)}();return s}function aL(n,e,t,i){switch(e){case"start":n.onStart(()=>i(t&&lL(t,"start",n)));break;case"done":n.onDone(()=>i(t&&lL(t,"done",n)));break;case"destroy":n.onDestroy(()=>i(t&&lL(t,"destroy",n)))}}function lL(n,e,t){const s=cL(n.element,n.triggerName,n.fromState,n.toState,e||n.phaseName,t.totalTime??n.totalTime,!!t.disabled),o=n._data;return null!=o&&(s._data=o),s}function cL(n,e,t,i,r="",s=0,o){return{element:n,triggerName:e,fromState:t,toState:i,phaseName:r,totalTime:s,disabled:!!o}}function Ga(n,e,t){let i=n.get(e);return i||n.set(e,i=t),i}function O7(n){const e=n.indexOf(":");return[n.substring(1,e),n.slice(e+1)]}const LAe=(()=>typeof document>"u"?null:document.documentElement)();function uL(n){const e=n.parentNode||n.host||null;return e===LAe?null:e}let xp=null,N7=!1;function F7(n,e){for(;e;){if(e===n)return!0;e=uL(e)}return!1}function L7(n,e,t){if(t)return Array.from(n.querySelectorAll(e));const i=n.querySelector(e);return i?[i]:[]}let V7=(()=>{class n{validateStyleProperty(t){return function UAe(n){xp||(xp=function BAe(){return typeof document<"u"?document.body:null}()||{},N7=!!xp.style&&"WebkitAppearance"in xp.style);let e=!0;return xp.style&&!function VAe(n){return"ebkit"==n.substring(1,6)}(n)&&(e=n in xp.style,!e&&N7&&(e="Webkit"+n.charAt(0).toUpperCase()+n.slice(1)in xp.style)),e}(t)}matchesElement(t,i){return!1}containsElement(t,i){return F7(t,i)}getParentElement(t){return uL(t)}query(t,i,r){return L7(t,i,r)}computeStyle(t,i,r){return r||""}animate(t,i,r,s,o,a=[],l){return new bb(r,s)}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275prov=dt({token:n,factory:n.\u0275fac})}}return n})(),dL=(()=>{class n{static{this.NOOP=new V7}}return n})();const zAe=1e3,hL="ng-enter",VI="ng-leave",UI="ng-trigger",BI=".ng-trigger",B7="ng-animating",fL=".ng-animating";function Ku(n){if("number"==typeof n)return n;const e=n.match(/^(-?[\.\d]+)(m?s)/);return!e||e.length<2?0:pL(parseFloat(e[1]),e[2])}function pL(n,e){return"s"===e?n*zAe:n}function zI(n,e,t){return n.hasOwnProperty("duration")?n:function GAe(n,e,t){let r,s=0,o="";if("string"==typeof n){const a=n.match(/^(-?[\.\d]+)(m?s)(?:\s+(-?[\.\d]+)(m?s))?(?:\s+([-a-z]+(?:\(.+?\))?))?$/i);if(null===a)return e.push(P7()),{duration:0,delay:0,easing:""};r=pL(parseFloat(a[1]),a[2]);const l=a[3];null!=l&&(s=pL(parseFloat(l),a[4]));const c=a[5];c&&(o=c)}else r=n;if(!t){let a=!1,l=e.length;r<0&&(e.push(function iAe(){return new Ce(3100,!1)}()),a=!0),s<0&&(e.push(function rAe(){return new Ce(3101,!1)}()),a=!0),a&&e.splice(l,0,P7())}return{duration:r,delay:s,easing:o}}(n,e,t)}function hx(n,e={}){return Object.keys(n).forEach(t=>{e[t]=n[t]}),e}function z7(n){const e=new Map;return Object.keys(n).forEach(t=>{e.set(t,n[t])}),e}function yh(n,e=new Map,t){if(t)for(let[i,r]of t)e.set(i,r);for(let[i,r]of n)e.set(i,r);return e}function Rc(n,e,t){e.forEach((i,r)=>{const s=gL(r);t&&!t.has(r)&&t.set(r,n.style[s]),n.style[s]=i})}function wp(n,e){e.forEach((t,i)=>{const r=gL(i);n.style[r]=""})}function fx(n){return Array.isArray(n)?1==n.length?n[0]:bW(n):n}const mL=new RegExp("{{\\s*(.+?)\\s*}}","g");function G7(n){let e=[];if("string"==typeof n){let t;for(;t=mL.exec(n);)e.push(t[1]);mL.lastIndex=0}return e}function px(n,e,t){const i=n.toString(),r=i.replace(mL,(s,o)=>{let a=e[o];return null==a&&(t.push(function oAe(n){return new Ce(3003,!1)}()),a=""),a.toString()});return r==i?n:r}function HI(n){const e=[];let t=n.next();for(;!t.done;)e.push(t.value),t=n.next();return e}const $Ae=/-+([a-z0-9])/g;function gL(n){return n.replace($Ae,(...e)=>e[1].toUpperCase())}function Wa(n,e,t){switch(e.type){case 7:return n.visitTrigger(e,t);case 0:return n.visitState(e,t);case 1:return n.visitTransition(e,t);case 2:return n.visitSequence(e,t);case 3:return n.visitGroup(e,t);case 4:return n.visitAnimate(e,t);case 5:return n.visitKeyframes(e,t);case 6:return n.visitStyle(e,t);case 8:return n.visitReference(e,t);case 9:return n.visitAnimateChild(e,t);case 10:return n.visitAnimateRef(e,t);case 11:return n.visitQuery(e,t);case 12:return n.visitStagger(e,t);default:throw function aAe(n){return new Ce(3004,!1)}()}}function W7(n,e){return window.getComputedStyle(n)[e]}const GI="*";function KAe(n,e){const t=[];return"string"==typeof n?n.split(/\s*,\s*/).forEach(i=>function YAe(n,e,t){if(":"==n[0]){const l=function QAe(n,e){switch(n){case":enter":return"void => *";case":leave":return"* => void";case":increment":return(t,i)=>parseFloat(i)>parseFloat(t);case":decrement":return(t,i)=>parseFloat(i)<parseFloat(t);default:return e.push(function xAe(n){return new Ce(3016,!1)}()),"* => *"}}(n,t);if("function"==typeof l)return void e.push(l);n=l}const i=n.match(/^(\*|[-\w]+)\s*(<?[=-]>)\s*(\*|[-\w]+)$/);if(null==i||i.length<4)return t.push(function bAe(n){return new Ce(3015,!1)}()),e;const r=i[1],s=i[2],o=i[3];e.push(j7(r,o));"<"==s[0]&&!(r==GI&&o==GI)&&e.push(j7(o,r))}(i,t,e)):t.push(n),t}const WI=new Set(["true","1"]),jI=new Set(["false","0"]);function j7(n,e){const t=WI.has(n)||jI.has(n),i=WI.has(e)||jI.has(e);return(r,s)=>{let o=n==GI||n==r,a=e==GI||e==s;return!o&&t&&"boolean"==typeof r&&(o=r?WI.has(n):jI.has(n)),!a&&i&&"boolean"==typeof s&&(a=s?WI.has(e):jI.has(e)),o&&a}}const ZAe=new RegExp("s*:selfs*,?","g");function _L(n,e,t,i){return new JAe(n).build(e,t,i)}class JAe{constructor(e){this._driver=e}build(e,t,i){const r=new nIe(t);return this._resetContextStyleTimingState(r),Wa(this,fx(e),r)}_resetContextStyleTimingState(e){e.currentQuerySelector="",e.collectedStyles=new Map,e.collectedStyles.set("",new Map),e.currentTime=0}visitTrigger(e,t){let i=t.queryCount=0,r=t.depCount=0;const s=[],o=[];return"@"==e.name.charAt(0)&&t.errors.push(function cAe(){return new Ce(3006,!1)}()),e.definitions.forEach(a=>{if(this._resetContextStyleTimingState(t),0==a.type){const l=a,c=l.name;c.toString().split(/\s*,\s*/).forEach(u=>{l.name=u,s.push(this.visitState(l,t))}),l.name=c}else if(1==a.type){const l=this.visitTransition(a,t);i+=l.queryCount,r+=l.depCount,o.push(l)}else t.errors.push(function uAe(){return new Ce(3007,!1)}())}),{type:7,name:e.name,states:s,transitions:o,queryCount:i,depCount:r,options:null}}visitState(e,t){const i=this.visitStyle(e.styles,t),r=e.options&&e.options.params||null;if(i.containsDynamicStyles){const s=new Set,o=r||{};i.styles.forEach(a=>{a instanceof Map&&a.forEach(l=>{G7(l).forEach(c=>{o.hasOwnProperty(c)||s.add(c)})})}),s.size&&(HI(s.values()),t.errors.push(function dAe(n,e){return new Ce(3008,!1)}()))}return{type:0,name:e.name,style:i,options:r?{params:r}:null}}visitTransition(e,t){t.queryCount=0,t.depCount=0;const i=Wa(this,fx(e.animation),t);return{type:1,matchers:KAe(e.expr,t.errors),animation:i,queryCount:t.queryCount,depCount:t.depCount,options:Ep(e.options)}}visitSequence(e,t){return{type:2,steps:e.steps.map(i=>Wa(this,i,t)),options:Ep(e.options)}}visitGroup(e,t){const i=t.currentTime;let r=0;const s=e.steps.map(o=>{t.currentTime=i;const a=Wa(this,o,t);return r=Math.max(r,t.currentTime),a});return t.currentTime=r,{type:3,steps:s,options:Ep(e.options)}}visitAnimate(e,t){const i=function rIe(n,e){if(n.hasOwnProperty("duration"))return n;if("number"==typeof n)return vL(zI(n,e).duration,0,"");const t=n;if(t.split(/\s+/).some(s=>"{"==s.charAt(0)&&"{"==s.charAt(1))){const s=vL(0,0,"");return s.dynamic=!0,s.strValue=t,s}const r=zI(t,e);return vL(r.duration,r.delay,r.easing)}(e.timings,t.errors);t.currentAnimateTimings=i;let r,s=e.styles?e.styles:_l({});if(5==s.type)r=this.visitKeyframes(s,t);else{let o=e.styles,a=!1;if(!o){a=!0;const c={};i.easing&&(c.easing=i.easing),o=_l(c)}t.currentTime+=i.duration+i.delay;const l=this.visitStyle(o,t);l.isEmptyStep=a,r=l}return t.currentAnimateTimings=null,{type:4,timings:i,style:r,options:null}}visitStyle(e,t){const i=this._makeStyleAst(e,t);return this._validateStyleAst(i,t),i}_makeStyleAst(e,t){const i=[],r=Array.isArray(e.styles)?e.styles:[e.styles];for(let a of r)"string"==typeof a?a===Du?i.push(a):t.errors.push(new Ce(3002,!1)):i.push(z7(a));let s=!1,o=null;return i.forEach(a=>{if(a instanceof Map&&(a.has("easing")&&(o=a.get("easing"),a.delete("easing")),!s))for(let l of a.values())if(l.toString().indexOf("{{")>=0){s=!0;break}}),{type:6,styles:i,easing:o,offset:e.offset,containsDynamicStyles:s,options:null}}_validateStyleAst(e,t){const i=t.currentAnimateTimings;let r=t.currentTime,s=t.currentTime;i&&s>0&&(s-=i.duration+i.delay),e.styles.forEach(o=>{"string"!=typeof o&&o.forEach((a,l)=>{const c=t.collectedStyles.get(t.currentQuerySelector),u=c.get(l);let d=!0;u&&(s!=r&&s>=u.startTime&&r<=u.endTime&&(t.errors.push(function fAe(n,e,t,i,r){return new Ce(3010,!1)}()),d=!1),s=u.startTime),d&&c.set(l,{startTime:s,endTime:r}),t.options&&function jAe(n,e,t){const i=e.params||{},r=G7(n);r.length&&r.forEach(s=>{i.hasOwnProperty(s)||t.push(function sAe(n){return new Ce(3001,!1)}())})}(a,t.options,t.errors)})})}visitKeyframes(e,t){const i={type:5,styles:[],options:null};if(!t.currentAnimateTimings)return t.errors.push(function pAe(){return new Ce(3011,!1)}()),i;let s=0;const o=[];let a=!1,l=!1,c=0;const u=e.steps.map(w=>{const T=this._makeStyleAst(w,t);let S=null!=T.offset?T.offset:function iIe(n){if("string"==typeof n)return null;let e=null;if(Array.isArray(n))n.forEach(t=>{if(t instanceof Map&&t.has("offset")){const i=t;e=parseFloat(i.get("offset")),i.delete("offset")}});else if(n instanceof Map&&n.has("offset")){const t=n;e=parseFloat(t.get("offset")),t.delete("offset")}return e}(T.styles),A=0;return null!=S&&(s++,A=T.offset=S),l=l||A<0||A>1,a=a||A<c,c=A,o.push(A),T});l&&t.errors.push(function mAe(){return new Ce(3012,!1)}()),a&&t.errors.push(function gAe(){return new Ce(3200,!1)}());const d=e.steps.length;let p=0;s>0&&s<d?t.errors.push(function _Ae(){return new Ce(3202,!1)}()):0==s&&(p=1/(d-1));const m=d-1,v=t.currentTime,x=t.currentAnimateTimings,b=x.duration;return u.forEach((w,T)=>{const S=p>0?T==m?1:p*T:o[T],A=S*b;t.currentTime=v+x.delay+A,x.duration=A,this._validateStyleAst(w,t),w.offset=S,i.styles.push(w)}),i}visitReference(e,t){return{type:8,animation:Wa(this,fx(e.animation),t),options:Ep(e.options)}}visitAnimateChild(e,t){return t.depCount++,{type:9,options:Ep(e.options)}}visitAnimateRef(e,t){return{type:10,animation:this.visitReference(e.animation,t),options:Ep(e.options)}}visitQuery(e,t){const i=t.currentQuerySelector,r=e.options||{};t.queryCount++,t.currentQuery=e;const[s,o]=function eIe(n){const e=!!n.split(/\s*,\s*/).find(t=>":self"==t);return e&&(n=n.replace(ZAe,"")),n=n.replace(/@\*/g,BI).replace(/@\w+/g,t=>BI+"-"+t.slice(1)).replace(/:animating/g,fL),[n,e]}(e.selector);t.currentQuerySelector=i.length?i+" "+s:s,Ga(t.collectedStyles,t.currentQuerySelector,new Map);const a=Wa(this,fx(e.animation),t);return t.currentQuery=null,t.currentQuerySelector=i,{type:11,selector:s,limit:r.limit||0,optional:!!r.optional,includeSelf:o,animation:a,originalSelector:e.selector,options:Ep(e.options)}}visitStagger(e,t){t.currentQuery||t.errors.push(function vAe(){return new Ce(3013,!1)}());const i="full"===e.timings?{duration:0,delay:0,easing:"full"}:zI(e.timings,t.errors,!0);return{type:12,animation:Wa(this,fx(e.animation),t),timings:i,options:null}}}class nIe{constructor(e){this.errors=e,this.queryCount=0,this.depCount=0,this.currentTransition=null,this.currentQuery=null,this.currentQuerySelector=null,this.currentAnimateTimings=null,this.currentTime=0,this.collectedStyles=new Map,this.options=null,this.unsupportedCSSPropertiesFound=new Set}}function Ep(n){return n?(n=hx(n)).params&&(n.params=function tIe(n){return n?hx(n):null}(n.params)):n={},n}function vL(n,e,t){return{duration:n,delay:e,easing:t}}function yL(n,e,t,i,r,s,o=null,a=!1){return{type:1,element:n,keyframes:e,preStyleProps:t,postStyleProps:i,duration:r,delay:s,totalTime:r+s,easing:o,subTimeline:a}}class $I{constructor(){this._map=new Map}get(e){return this._map.get(e)||[]}append(e,t){let i=this._map.get(e);i||this._map.set(e,i=[]),i.push(...t)}has(e){return this._map.has(e)}clear(){this._map.clear()}}const aIe=new RegExp(":enter","g"),cIe=new RegExp(":leave","g");function bL(n,e,t,i,r,s=new Map,o=new Map,a,l,c=[]){return(new uIe).buildKeyframes(n,e,t,i,r,s,o,a,l,c)}class uIe{buildKeyframes(e,t,i,r,s,o,a,l,c,u=[]){c=c||new $I;const d=new xL(e,t,c,r,s,u,[]);d.options=l;const p=l.delay?Ku(l.delay):0;d.currentTimeline.delayNextStep(p),d.currentTimeline.setStyles([o],null,d.errors,l),Wa(this,i,d);const m=d.timelines.filter(v=>v.containsAnimation());if(m.length&&a.size){let v;for(let x=m.length-1;x>=0;x--){const b=m[x];if(b.element===t){v=b;break}}v&&!v.allowOnlyTimelineStyles()&&v.setStyles([a],null,d.errors,l)}return m.length?m.map(v=>v.buildKeyframes()):[yL(t,[],[],[],0,p,"",!1)]}visitTrigger(e,t){}visitState(e,t){}visitTransition(e,t){}visitAnimateChild(e,t){const i=t.subInstructions.get(t.element);if(i){const r=t.createSubContext(e.options),s=t.currentTimeline.currentTime,o=this._visitSubInstructions(i,r,r.options);s!=o&&t.transformIntoNewTimeline(o)}t.previousNode=e}visitAnimateRef(e,t){const i=t.createSubContext(e.options);i.transformIntoNewTimeline(),this._applyAnimationRefDelays([e.options,e.animation.options],t,i),this.visitReference(e.animation,i),t.transformIntoNewTimeline(i.currentTimeline.currentTime),t.previousNode=e}_applyAnimationRefDelays(e,t,i){for(const r of e){const s=r?.delay;if(s){const o="number"==typeof s?s:Ku(px(s,r?.params??{},t.errors));i.delayNextStep(o)}}}_visitSubInstructions(e,t,i){let s=t.currentTimeline.currentTime;const o=null!=i.duration?Ku(i.duration):null,a=null!=i.delay?Ku(i.delay):null;return 0!==o&&e.forEach(l=>{const c=t.appendInstructionToTimeline(l,o,a);s=Math.max(s,c.duration+c.delay)}),s}visitReference(e,t){t.updateOptions(e.options,!0),Wa(this,e.animation,t),t.previousNode=e}visitSequence(e,t){const i=t.subContextCount;let r=t;const s=e.options;if(s&&(s.params||s.delay)&&(r=t.createSubContext(s),r.transformIntoNewTimeline(),null!=s.delay)){6==r.previousNode.type&&(r.currentTimeline.snapshotCurrentStyles(),r.previousNode=qI);const o=Ku(s.delay);r.delayNextStep(o)}e.steps.length&&(e.steps.forEach(o=>Wa(this,o,r)),r.currentTimeline.applyStylesToKeyframe(),r.subContextCount>i&&r.transformIntoNewTimeline()),t.previousNode=e}visitGroup(e,t){const i=[];let r=t.currentTimeline.currentTime;const s=e.options&&e.options.delay?Ku(e.options.delay):0;e.steps.forEach(o=>{const a=t.createSubContext(e.options);s&&a.delayNextStep(s),Wa(this,o,a),r=Math.max(r,a.currentTimeline.currentTime),i.push(a.currentTimeline)}),i.forEach(o=>t.currentTimeline.mergeTimelineCollectedStyles(o)),t.transformIntoNewTimeline(r),t.previousNode=e}_visitTiming(e,t){if(e.dynamic){const i=e.strValue;return zI(t.params?px(i,t.params,t.errors):i,t.errors)}return{duration:e.duration,delay:e.delay,easing:e.easing}}visitAnimate(e,t){const i=t.currentAnimateTimings=this._visitTiming(e.timings,t),r=t.currentTimeline;i.delay&&(t.incrementTime(i.delay),r.snapshotCurrentStyles());const s=e.style;5==s.type?this.visitKeyframes(s,t):(t.incrementTime(i.duration),this.visitStyle(s,t),r.applyStylesToKeyframe()),t.currentAnimateTimings=null,t.previousNode=e}visitStyle(e,t){const i=t.currentTimeline,r=t.currentAnimateTimings;!r&&i.hasCurrentStyleProperties()&&i.forwardFrame();const s=r&&r.easing||e.easing;e.isEmptyStep?i.applyEmptyStep(s):i.setStyles(e.styles,s,t.errors,t.options),t.previousNode=e}visitKeyframes(e,t){const i=t.currentAnimateTimings,r=t.currentTimeline.duration,s=i.duration,a=t.createSubContext().currentTimeline;a.easing=i.easing,e.styles.forEach(l=>{a.forwardTime((l.offset||0)*s),a.setStyles(l.styles,l.easing,t.errors,t.options),a.applyStylesToKeyframe()}),t.currentTimeline.mergeTimelineCollectedStyles(a),t.transformIntoNewTimeline(r+s),t.previousNode=e}visitQuery(e,t){const i=t.currentTimeline.currentTime,r=e.options||{},s=r.delay?Ku(r.delay):0;s&&(6===t.previousNode.type||0==i&&t.currentTimeline.hasCurrentStyleProperties())&&(t.currentTimeline.snapshotCurrentStyles(),t.previousNode=qI);let o=i;const a=t.invokeQuery(e.selector,e.originalSelector,e.limit,e.includeSelf,!!r.optional,t.errors);t.currentQueryTotal=a.length;let l=null;a.forEach((c,u)=>{t.currentQueryIndex=u;const d=t.createSubContext(e.options,c);s&&d.delayNextStep(s),c===t.element&&(l=d.currentTimeline),Wa(this,e.animation,d),d.currentTimeline.applyStylesToKeyframe(),o=Math.max(o,d.currentTimeline.currentTime)}),t.currentQueryIndex=0,t.currentQueryTotal=0,t.transformIntoNewTimeline(o),l&&(t.currentTimeline.mergeTimelineCollectedStyles(l),t.currentTimeline.snapshotCurrentStyles()),t.previousNode=e}visitStagger(e,t){const i=t.parentContext,r=t.currentTimeline,s=e.timings,o=Math.abs(s.duration),a=o*(t.currentQueryTotal-1);let l=o*t.currentQueryIndex;switch(s.duration<0?"reverse":s.easing){case"reverse":l=a-l;break;case"full":l=i.currentStaggerTime}const u=t.currentTimeline;l&&u.delayNextStep(l);const d=u.currentTime;Wa(this,e.animation,t),t.previousNode=e,i.currentStaggerTime=r.currentTime-d+(r.startTime-i.currentTimeline.startTime)}}const qI={};class xL{constructor(e,t,i,r,s,o,a,l){this._driver=e,this.element=t,this.subInstructions=i,this._enterClassName=r,this._leaveClassName=s,this.errors=o,this.timelines=a,this.parentContext=null,this.currentAnimateTimings=null,this.previousNode=qI,this.subContextCount=0,this.options={},this.currentQueryIndex=0,this.currentQueryTotal=0,this.currentStaggerTime=0,this.currentTimeline=l||new XI(this._driver,t,0),a.push(this.currentTimeline)}get params(){return this.options.params}updateOptions(e,t){if(!e)return;const i=e;let r=this.options;null!=i.duration&&(r.duration=Ku(i.duration)),null!=i.delay&&(r.delay=Ku(i.delay));const s=i.params;if(s){let o=r.params;o||(o=this.options.params={}),Object.keys(s).forEach(a=>{(!t||!o.hasOwnProperty(a))&&(o[a]=px(s[a],o,this.errors))})}}_copyOptions(){const e={};if(this.options){const t=this.options.params;if(t){const i=e.params={};Object.keys(t).forEach(r=>{i[r]=t[r]})}}return e}createSubContext(e=null,t,i){const r=t||this.element,s=new xL(this._driver,r,this.subInstructions,this._enterClassName,this._leaveClassName,this.errors,this.timelines,this.currentTimeline.fork(r,i||0));return s.previousNode=this.previousNode,s.currentAnimateTimings=this.currentAnimateTimings,s.options=this._copyOptions(),s.updateOptions(e),s.currentQueryIndex=this.currentQueryIndex,s.currentQueryTotal=this.currentQueryTotal,s.parentContext=this,this.subContextCount++,s}transformIntoNewTimeline(e){return this.previousNode=qI,this.currentTimeline=this.currentTimeline.fork(this.element,e),this.timelines.push(this.currentTimeline),this.currentTimeline}appendInstructionToTimeline(e,t,i){const r={duration:t??e.duration,delay:this.currentTimeline.currentTime+(i??0)+e.delay,easing:""},s=new dIe(this._driver,e.element,e.keyframes,e.preStyleProps,e.postStyleProps,r,e.stretchStartingKeyframe);return this.timelines.push(s),r}incrementTime(e){this.currentTimeline.forwardTime(this.currentTimeline.duration+e)}delayNextStep(e){e>0&&this.currentTimeline.delayNextStep(e)}invokeQuery(e,t,i,r,s,o){let a=[];if(r&&a.push(this.element),e.length>0){e=(e=e.replace(aIe,"."+this._enterClassName)).replace(cIe,"."+this._leaveClassName);let c=this._driver.query(this.element,e,1!=i);0!==i&&(c=i<0?c.slice(c.length+i,c.length):c.slice(0,i)),a.push(...c)}return!s&&0==a.length&&o.push(function yAe(n){return new Ce(3014,!1)}()),a}}class XI{constructor(e,t,i,r){this._driver=e,this.element=t,this.startTime=i,this._elementTimelineStylesLookup=r,this.duration=0,this.easing=null,this._previousKeyframe=new Map,this._currentKeyframe=new Map,this._keyframes=new Map,this._styleSummary=new Map,this._localTimelineStyles=new Map,this._pendingStyles=new Map,this._backFill=new Map,this._currentEmptyStepKeyframe=null,this._elementTimelineStylesLookup||(this._elementTimelineStylesLookup=new Map),this._globalTimelineStyles=this._elementTimelineStylesLookup.get(t),this._globalTimelineStyles||(this._globalTimelineStyles=this._localTimelineStyles,this._elementTimelineStylesLookup.set(t,this._localTimelineStyles)),this._loadKeyframe()}containsAnimation(){switch(this._keyframes.size){case 0:return!1;case 1:return this.hasCurrentStyleProperties();default:return!0}}hasCurrentStyleProperties(){return this._currentKeyframe.size>0}get currentTime(){return this.startTime+this.duration}delayNextStep(e){const t=1===this._keyframes.size&&this._pendingStyles.size;this.duration||t?(this.forwardTime(this.currentTime+e),t&&this.snapshotCurrentStyles()):this.startTime+=e}fork(e,t){return this.applyStylesToKeyframe(),new XI(this._driver,e,t||this.currentTime,this._elementTimelineStylesLookup)}_loadKeyframe(){this._currentKeyframe&&(this._previousKeyframe=this._currentKeyframe),this._currentKeyframe=this._keyframes.get(this.duration),this._currentKeyframe||(this._currentKeyframe=new Map,this._keyframes.set(this.duration,this._currentKeyframe))}forwardFrame(){this.duration+=1,this._loadKeyframe()}forwardTime(e){this.applyStylesToKeyframe(),this.duration=e,this._loadKeyframe()}_updateStyle(e,t){this._localTimelineStyles.set(e,t),this._globalTimelineStyles.set(e,t),this._styleSummary.set(e,{time:this.currentTime,value:t})}allowOnlyTimelineStyles(){return this._currentEmptyStepKeyframe!==this._currentKeyframe}applyEmptyStep(e){e&&this._previousKeyframe.set("easing",e);for(let[t,i]of this._globalTimelineStyles)this._backFill.set(t,i||Du),this._currentKeyframe.set(t,Du);this._currentEmptyStepKeyframe=this._currentKeyframe}setStyles(e,t,i,r){t&&this._previousKeyframe.set("easing",t);const s=r&&r.params||{},o=function hIe(n,e){const t=new Map;let i;return n.forEach(r=>{if("*"===r){i=i||e.keys();for(let s of i)t.set(s,Du)}else yh(r,t)}),t}(e,this._globalTimelineStyles);for(let[a,l]of o){const c=px(l,s,i);this._pendingStyles.set(a,c),this._localTimelineStyles.has(a)||this._backFill.set(a,this._globalTimelineStyles.get(a)??Du),this._updateStyle(a,c)}}applyStylesToKeyframe(){0!=this._pendingStyles.size&&(this._pendingStyles.forEach((e,t)=>{this._currentKeyframe.set(t,e)}),this._pendingStyles.clear(),this._localTimelineStyles.forEach((e,t)=>{this._currentKeyframe.has(t)||this._currentKeyframe.set(t,e)}))}snapshotCurrentStyles(){for(let[e,t]of this._localTimelineStyles)this._pendingStyles.set(e,t),this._updateStyle(e,t)}getFinalKeyframe(){return this._keyframes.get(this.duration)}get properties(){const e=[];for(let t in this._currentKeyframe)e.push(t);return e}mergeTimelineCollectedStyles(e){e._styleSummary.forEach((t,i)=>{const r=this._styleSummary.get(i);(!r||t.time>r.time)&&this._updateStyle(i,t.value)})}buildKeyframes(){this.applyStylesToKeyframe();const e=new Set,t=new Set,i=1===this._keyframes.size&&0===this.duration;let r=[];this._keyframes.forEach((a,l)=>{const c=yh(a,new Map,this._backFill);c.forEach((u,d)=>{"!"===u?e.add(d):u===Du&&t.add(d)}),i||c.set("offset",l/this.duration),r.push(c)});const s=e.size?HI(e.values()):[],o=t.size?HI(t.values()):[];if(i){const a=r[0],l=new Map(a);a.set("offset",0),l.set("offset",1),r=[a,l]}return yL(this.element,r,s,o,this.duration,this.startTime,this.easing,!1)}}class dIe extends XI{constructor(e,t,i,r,s,o,a=!1){super(e,t,o.delay),this.keyframes=i,this.preStyleProps=r,this.postStyleProps=s,this._stretchStartingKeyframe=a,this.timings={duration:o.duration,delay:o.delay,easing:o.easing}}containsAnimation(){return this.keyframes.length>1}buildKeyframes(){let e=this.keyframes,{delay:t,duration:i,easing:r}=this.timings;if(this._stretchStartingKeyframe&&t){const s=[],o=i+t,a=t/o,l=yh(e[0]);l.set("offset",0),s.push(l);const c=yh(e[0]);c.set("offset",X7(a)),s.push(c);const u=e.length-1;for(let d=1;d<=u;d++){let p=yh(e[d]);const m=p.get("offset");p.set("offset",X7((t+m*i)/o)),s.push(p)}i=o,t=0,r="",e=s}return yL(this.element,e,this.preStyleProps,this.postStyleProps,i,t,r,!0)}}function X7(n,e=3){const t=Math.pow(10,e-1);return Math.round(n*t)/t}class wL{}const fIe=new Set(["width","height","minWidth","minHeight","maxWidth","maxHeight","left","top","bottom","right","fontSize","outlineWidth","outlineOffset","paddingTop","paddingLeft","paddingBottom","paddingRight","marginTop","marginLeft","marginBottom","marginRight","borderRadius","borderWidth","borderTopWidth","borderLeftWidth","borderRightWidth","borderBottomWidth","textIndent","perspective"]);class pIe extends wL{normalizePropertyName(e,t){return gL(e)}normalizeStyleValue(e,t,i,r){let s="";const o=i.toString().trim();if(fIe.has(t)&&0!==i&&"0"!==i)if("number"==typeof i)s="px";else{const a=i.match(/^[+-]?[\d\.]+([a-z]*)$/);a&&0==a[1].length&&r.push(function lAe(n,e){return new Ce(3005,!1)}())}return o+s}}function K7(n,e,t,i,r,s,o,a,l,c,u,d,p){return{type:0,element:n,triggerName:e,isRemovalTransition:r,fromState:t,fromStyles:s,toState:i,toStyles:o,timelines:a,queriedElements:l,preStyleProps:c,postStyleProps:u,totalTime:d,errors:p}}const EL={};class Y7{constructor(e,t,i){this._triggerName=e,this.ast=t,this._stateStyles=i}match(e,t,i,r){return function mIe(n,e,t,i,r){return n.some(s=>s(e,t,i,r))}(this.ast.matchers,e,t,i,r)}buildStyles(e,t,i){let r=this._stateStyles.get("*");return void 0!==e&&(r=this._stateStyles.get(e?.toString())||r),r?r.buildStyles(t,i):new Map}build(e,t,i,r,s,o,a,l,c,u){const d=[],p=this.ast.options&&this.ast.options.params||EL,v=this.buildStyles(i,a&&a.params||EL,d),x=l&&l.params||EL,b=this.buildStyles(r,x,d),w=new Set,T=new Map,S=new Map,A="void"===r,V={params:gIe(x,p),delay:this.ast.options?.delay},F=u?[]:bL(e,t,this.ast.animation,s,o,v,b,V,c,d);let P=0;if(F.forEach(I=>{P=Math.max(I.duration+I.delay,P)}),d.length)return K7(t,this._triggerName,i,r,A,v,b,[],[],T,S,P,d);F.forEach(I=>{const M=I.element,O=Ga(T,M,new Set);I.preStyleProps.forEach(N=>O.add(N));const z=Ga(S,M,new Set);I.postStyleProps.forEach(N=>z.add(N)),M!==t&&w.add(M)});const D=HI(w.values());return K7(t,this._triggerName,i,r,A,v,b,F,D,T,S,P)}}function gIe(n,e){const t=hx(e);for(const i in n)n.hasOwnProperty(i)&&null!=n[i]&&(t[i]=n[i]);return t}class _Ie{constructor(e,t,i){this.styles=e,this.defaultParams=t,this.normalizer=i}buildStyles(e,t){const i=new Map,r=hx(this.defaultParams);return Object.keys(e).forEach(s=>{const o=e[s];null!==o&&(r[s]=o)}),this.styles.styles.forEach(s=>{"string"!=typeof s&&s.forEach((o,a)=>{o&&(o=px(o,r,t));const l=this.normalizer.normalizePropertyName(a,t);o=this.normalizer.normalizeStyleValue(a,l,o,t),i.set(a,o)})}),i}}class yIe{constructor(e,t,i){this.name=e,this.ast=t,this._normalizer=i,this.transitionFactories=[],this.states=new Map,t.states.forEach(r=>{this.states.set(r.name,new _Ie(r.style,r.options&&r.options.params||{},i))}),Q7(this.states,"true","1"),Q7(this.states,"false","0"),t.transitions.forEach(r=>{this.transitionFactories.push(new Y7(e,r,this.states))}),this.fallbackTransition=function bIe(n,e,t){return new Y7(n,{type:1,animation:{type:2,steps:[],options:null},matchers:[(o,a)=>!0],options:null,queryCount:0,depCount:0},e)}(e,this.states)}get containsQueries(){return this.ast.queryCount>0}matchTransition(e,t,i,r){return this.transitionFactories.find(o=>o.match(e,t,i,r))||null}matchStyles(e,t,i){return this.fallbackTransition.buildStyles(e,t,i)}}function Q7(n,e,t){n.has(e)?n.has(t)||n.set(t,n.get(e)):n.has(t)&&n.set(e,n.get(t))}const xIe=new $I;class wIe{constructor(e,t,i){this.bodyNode=e,this._driver=t,this._normalizer=i,this._animations=new Map,this._playersById=new Map,this.players=[]}register(e,t){const i=[],s=_L(this._driver,t,i,[]);if(i.length)throw function AAe(n){return new Ce(3503,!1)}();this._animations.set(e,s)}_buildPlayer(e,t,i){const r=e.element,s=k7(this._normalizer,e.keyframes,t,i);return this._driver.animate(r,s,e.duration,e.delay,e.easing,[],!0)}create(e,t,i={}){const r=[],s=this._animations.get(e);let o;const a=new Map;if(s?(o=bL(this._driver,t,s,hL,VI,new Map,new Map,i,xIe,r),o.forEach(u=>{const d=Ga(a,u.element,new Map);u.postStyleProps.forEach(p=>d.set(p,null))})):(r.push(function IAe(){return new Ce(3300,!1)}()),o=[]),r.length)throw function CAe(n){return new Ce(3504,!1)}();a.forEach((u,d)=>{u.forEach((p,m)=>{u.set(m,this._driver.computeStyle(d,m,Du))})});const c=vh(o.map(u=>{const d=a.get(u.element);return this._buildPlayer(u,new Map,d)}));return this._playersById.set(e,c),c.onDestroy(()=>this.destroy(e)),this.players.push(c),c}destroy(e){const t=this._getPlayer(e);t.destroy(),this._playersById.delete(e);const i=this.players.indexOf(t);i>=0&&this.players.splice(i,1)}_getPlayer(e){const t=this._playersById.get(e);if(!t)throw function MAe(n){return new Ce(3301,!1)}();return t}listen(e,t,i,r){const s=cL(t,"","","");return aL(this._getPlayer(e),i,s,r),()=>{}}command(e,t,i,r){if("register"==i)return void this.register(e,r[0]);if("create"==i)return void this.create(e,t,r[0]||{});const s=this._getPlayer(e);switch(i){case"play":s.play();break;case"pause":s.pause();break;case"reset":s.reset();break;case"restart":s.restart();break;case"finish":s.finish();break;case"init":s.init();break;case"setPosition":s.setPosition(parseFloat(r[0]));break;case"destroy":this.destroy(e)}}}const Z7="ng-animate-queued",TL="ng-animate-disabled",IIe=[],J7={namespaceId:"",setForRemoval:!1,setForMove:!1,hasAnimation:!1,removedBeforeQueried:!1},CIe={namespaceId:"",setForMove:!1,setForRemoval:!1,hasAnimation:!1,removedBeforeQueried:!0},zl="__ng_removed";class SL{get params(){return this.options.params}constructor(e,t=""){this.namespaceId=t;const i=e&&e.hasOwnProperty("value");if(this.value=function PIe(n){return n??null}(i?e.value:e),i){const s=hx(e);delete s.value,this.options=s}else this.options={};this.options.params||(this.options.params={})}absorbOptions(e){const t=e.params;if(t){const i=this.options.params;Object.keys(t).forEach(r=>{null==i[r]&&(i[r]=t[r])})}}}const mx="void",AL=new SL(mx);class MIe{constructor(e,t,i){this.id=e,this.hostElement=t,this._engine=i,this.players=[],this._triggers=new Map,this._queue=[],this._elementListeners=new Map,this._hostClassName="ng-tns-"+e,bl(t,this._hostClassName)}listen(e,t,i,r){if(!this._triggers.has(t))throw function DAe(n,e){return new Ce(3302,!1)}();if(null==i||0==i.length)throw function RAe(n){return new Ce(3303,!1)}();if(!function kIe(n){return"start"==n||"done"==n}(i))throw function PAe(n,e){return new Ce(3400,!1)}();const s=Ga(this._elementListeners,e,[]),o={name:t,phase:i,callback:r};s.push(o);const a=Ga(this._engine.statesByElement,e,new Map);return a.has(t)||(bl(e,UI),bl(e,UI+"-"+t),a.set(t,AL)),()=>{this._engine.afterFlush(()=>{const l=s.indexOf(o);l>=0&&s.splice(l,1),this._triggers.has(t)||a.delete(t)})}}register(e,t){return!this._triggers.has(e)&&(this._triggers.set(e,t),!0)}_getTrigger(e){const t=this._triggers.get(e);if(!t)throw function kAe(n){return new Ce(3401,!1)}();return t}trigger(e,t,i,r=!0){const s=this._getTrigger(t),o=new IL(this.id,t,e);let a=this._engine.statesByElement.get(e);a||(bl(e,UI),bl(e,UI+"-"+t),this._engine.statesByElement.set(e,a=new Map));let l=a.get(t);const c=new SL(i,this.id);if(!(i&&i.hasOwnProperty("value"))&&l&&c.absorbOptions(l.options),a.set(t,c),l||(l=AL),c.value!==mx&&l.value===c.value){if(!function FIe(n,e){const t=Object.keys(n),i=Object.keys(e);if(t.length!=i.length)return!1;for(let r=0;r<t.length;r++){const s=t[r];if(!e.hasOwnProperty(s)||n[s]!==e[s])return!1}return!0}(l.params,c.params)){const x=[],b=s.matchStyles(l.value,l.params,x),w=s.matchStyles(c.value,c.params,x);x.length?this._engine.reportError(x):this._engine.afterFlush(()=>{wp(e,b),Rc(e,w)})}return}const p=Ga(this._engine.playersByElement,e,[]);p.forEach(x=>{x.namespaceId==this.id&&x.triggerName==t&&x.queued&&x.destroy()});let m=s.matchTransition(l.value,c.value,e,c.params),v=!1;if(!m){if(!r)return;m=s.fallbackTransition,v=!0}return this._engine.totalQueuedPlayers++,this._queue.push({element:e,triggerName:t,transition:m,fromState:l,toState:c,player:o,isFallbackTransition:v}),v||(bl(e,Z7),o.onStart(()=>{K_(e,Z7)})),o.onDone(()=>{let x=this.players.indexOf(o);x>=0&&this.players.splice(x,1);const b=this._engine.playersByElement.get(e);if(b){let w=b.indexOf(o);w>=0&&b.splice(w,1)}}),this.players.push(o),p.push(o),o}deregister(e){this._triggers.delete(e),this._engine.statesByElement.forEach(t=>t.delete(e)),this._elementListeners.forEach((t,i)=>{this._elementListeners.set(i,t.filter(r=>r.name!=e))})}clearElementCache(e){this._engine.statesByElement.delete(e),this._elementListeners.delete(e);const t=this._engine.playersByElement.get(e);t&&(t.forEach(i=>i.destroy()),this._engine.playersByElement.delete(e))}_signalRemovalForInnerTriggers(e,t){const i=this._engine.driver.query(e,BI,!0);i.forEach(r=>{if(r[zl])return;const s=this._engine.fetchNamespacesByElement(r);s.size?s.forEach(o=>o.triggerLeaveAnimation(r,t,!1,!0)):this.clearElementCache(r)}),this._engine.afterFlushAnimationsDone(()=>i.forEach(r=>this.clearElementCache(r)))}triggerLeaveAnimation(e,t,i,r){const s=this._engine.statesByElement.get(e),o=new Map;if(s){const a=[];if(s.forEach((l,c)=>{if(o.set(c,l.value),this._triggers.has(c)){const u=this.trigger(e,c,mx,r);u&&a.push(u)}}),a.length)return this._engine.markElementAsRemoved(this.id,e,!0,t,o),i&&vh(a).onDone(()=>this._engine.processLeaveNode(e)),!0}return!1}prepareLeaveAnimationListeners(e){const t=this._elementListeners.get(e),i=this._engine.statesByElement.get(e);if(t&&i){const r=new Set;t.forEach(s=>{const o=s.name;if(r.has(o))return;r.add(o);const l=this._triggers.get(o).fallbackTransition,c=i.get(o)||AL,u=new SL(mx),d=new IL(this.id,o,e);this._engine.totalQueuedPlayers++,this._queue.push({element:e,triggerName:o,transition:l,fromState:c,toState:u,player:d,isFallbackTransition:!0})})}}removeNode(e,t){const i=this._engine;if(e.childElementCount&&this._signalRemovalForInnerTriggers(e,t),this.triggerLeaveAnimation(e,t,!0))return;let r=!1;if(i.totalAnimations){const s=i.players.length?i.playersByQueriedElement.get(e):[];if(s&&s.length)r=!0;else{let o=e;for(;o=o.parentNode;)if(i.statesByElement.get(o)){r=!0;break}}}if(this.prepareLeaveAnimationListeners(e),r)i.markElementAsRemoved(this.id,e,!1,t);else{const s=e[zl];(!s||s===J7)&&(i.afterFlush(()=>this.clearElementCache(e)),i.destroyInnerAnimations(e),i._onRemovalComplete(e,t))}}insertNode(e,t){bl(e,this._hostClassName)}drainQueuedTransitions(e){const t=[];return this._queue.forEach(i=>{const r=i.player;if(r.destroyed)return;const s=i.element,o=this._elementListeners.get(s);o&&o.forEach(a=>{if(a.name==i.triggerName){const l=cL(s,i.triggerName,i.fromState.value,i.toState.value);l._data=e,aL(i.player,a.phase,l,a.callback)}}),r.markedForDestroy?this._engine.afterFlush(()=>{r.destroy()}):t.push(i)}),this._queue=[],t.sort((i,r)=>{const s=i.transition.ast.depCount,o=r.transition.ast.depCount;return 0==s||0==o?s-o:this._engine.driver.containsElement(i.element,r.element)?1:-1})}destroy(e){this.players.forEach(t=>t.destroy()),this._signalRemovalForInnerTriggers(this.hostElement,e)}}class DIe{_onRemovalComplete(e,t){this.onRemovalComplete(e,t)}constructor(e,t,i){this.bodyNode=e,this.driver=t,this._normalizer=i,this.players=[],this.newHostElements=new Map,this.playersByElement=new Map,this.playersByQueriedElement=new Map,this.statesByElement=new Map,this.disabledNodes=new Set,this.totalAnimations=0,this.totalQueuedPlayers=0,this._namespaceLookup={},this._namespaceList=[],this._flushFns=[],this._whenQuietFns=[],this.namespacesByHostElement=new Map,this.collectedEnterElements=[],this.collectedLeaveElements=[],this.onRemovalComplete=(r,s)=>{}}get queuedPlayers(){const e=[];return this._namespaceList.forEach(t=>{t.players.forEach(i=>{i.queued&&e.push(i)})}),e}createNamespace(e,t){const i=new MIe(e,t,this);return this.bodyNode&&this.driver.containsElement(this.bodyNode,t)?this._balanceNamespaceList(i,t):(this.newHostElements.set(t,i),this.collectEnterElement(t)),this._namespaceLookup[e]=i}_balanceNamespaceList(e,t){const i=this._namespaceList,r=this.namespacesByHostElement;if(i.length-1>=0){let o=!1,a=this.driver.getParentElement(t);for(;a;){const l=r.get(a);if(l){const c=i.indexOf(l);i.splice(c+1,0,e),o=!0;break}a=this.driver.getParentElement(a)}o||i.unshift(e)}else i.push(e);return r.set(t,e),e}register(e,t){let i=this._namespaceLookup[e];return i||(i=this.createNamespace(e,t)),i}registerTrigger(e,t,i){let r=this._namespaceLookup[e];r&&r.register(t,i)&&this.totalAnimations++}destroy(e,t){e&&(this.afterFlush(()=>{}),this.afterFlushAnimationsDone(()=>{const i=this._fetchNamespace(e);this.namespacesByHostElement.delete(i.hostElement);const r=this._namespaceList.indexOf(i);r>=0&&this._namespaceList.splice(r,1),i.destroy(t),delete this._namespaceLookup[e]}))}_fetchNamespace(e){return this._namespaceLookup[e]}fetchNamespacesByElement(e){const t=new Set,i=this.statesByElement.get(e);if(i)for(let r of i.values())if(r.namespaceId){const s=this._fetchNamespace(r.namespaceId);s&&t.add(s)}return t}trigger(e,t,i,r){if(KI(t)){const s=this._fetchNamespace(e);if(s)return s.trigger(t,i,r),!0}return!1}insertNode(e,t,i,r){if(!KI(t))return;const s=t[zl];if(s&&s.setForRemoval){s.setForRemoval=!1,s.setForMove=!0;const o=this.collectedLeaveElements.indexOf(t);o>=0&&this.collectedLeaveElements.splice(o,1)}if(e){const o=this._fetchNamespace(e);o&&o.insertNode(t,i)}r&&this.collectEnterElement(t)}collectEnterElement(e){this.collectedEnterElements.push(e)}markElementAsDisabled(e,t){t?this.disabledNodes.has(e)||(this.disabledNodes.add(e),bl(e,TL)):this.disabledNodes.has(e)&&(this.disabledNodes.delete(e),K_(e,TL))}removeNode(e,t,i){if(KI(t)){const r=e?this._fetchNamespace(e):null;r?r.removeNode(t,i):this.markElementAsRemoved(e,t,!1,i);const s=this.namespacesByHostElement.get(t);s&&s.id!==e&&s.removeNode(t,i)}else this._onRemovalComplete(t,i)}markElementAsRemoved(e,t,i,r,s){this.collectedLeaveElements.push(t),t[zl]={namespaceId:e,setForRemoval:r,hasAnimation:i,removedBeforeQueried:!1,previousTriggersValues:s}}listen(e,t,i,r,s){return KI(t)?this._fetchNamespace(e).listen(t,i,r,s):()=>{}}_buildInstruction(e,t,i,r,s){return e.transition.build(this.driver,e.element,e.fromState.value,e.toState.value,i,r,e.fromState.options,e.toState.options,t,s)}destroyInnerAnimations(e){let t=this.driver.query(e,BI,!0);t.forEach(i=>this.destroyActiveAnimationsForElement(i)),0!=this.playersByQueriedElement.size&&(t=this.driver.query(e,fL,!0),t.forEach(i=>this.finishActiveQueriedAnimationOnElement(i)))}destroyActiveAnimationsForElement(e){const t=this.playersByElement.get(e);t&&t.forEach(i=>{i.queued?i.markedForDestroy=!0:i.destroy()})}finishActiveQueriedAnimationOnElement(e){const t=this.playersByQueriedElement.get(e);t&&t.forEach(i=>i.finish())}whenRenderingDone(){return new Promise(e=>{if(this.players.length)return vh(this.players).onDone(()=>e());e()})}processLeaveNode(e){const t=e[zl];if(t&&t.setForRemoval){if(e[zl]=J7,t.namespaceId){this.destroyInnerAnimations(e);const i=this._fetchNamespace(t.namespaceId);i&&i.clearElementCache(e)}this._onRemovalComplete(e,t.setForRemoval)}e.classList?.contains(TL)&&this.markElementAsDisabled(e,!1),this.driver.query(e,".ng-animate-disabled",!0).forEach(i=>{this.markElementAsDisabled(i,!1)})}flush(e=-1){let t=[];if(this.newHostElements.size&&(this.newHostElements.forEach((i,r)=>this._balanceNamespaceList(i,r)),this.newHostElements.clear()),this.totalAnimations&&this.collectedEnterElements.length)for(let i=0;i<this.collectedEnterElements.length;i++)bl(this.collectedEnterElements[i],"ng-star-inserted");if(this._namespaceList.length&&(this.totalQueuedPlayers||this.collectedLeaveElements.length)){const i=[];try{t=this._flushAnimations(i,e)}finally{for(let r=0;r<i.length;r++)i[r]()}}else for(let i=0;i<this.collectedLeaveElements.length;i++)this.processLeaveNode(this.collectedLeaveElements[i]);if(this.totalQueuedPlayers=0,this.collectedEnterElements.length=0,this.collectedLeaveElements.length=0,this._flushFns.forEach(i=>i()),this._flushFns=[],this._whenQuietFns.length){const i=this._whenQuietFns;this._whenQuietFns=[],t.length?vh(t).onDone(()=>{i.forEach(r=>r())}):i.forEach(r=>r())}}reportError(e){throw function OAe(n){return new Ce(3402,!1)}()}_flushAnimations(e,t){const i=new $I,r=[],s=new Map,o=[],a=new Map,l=new Map,c=new Map,u=new Set;this.disabledNodes.forEach(ee=>{u.add(ee);const we=this.driver.query(ee,".ng-animate-queued",!0);for(let oe=0;oe<we.length;oe++)u.add(we[oe])});const d=this.bodyNode,p=Array.from(this.statesByElement.keys()),m=nX(p,this.collectedEnterElements),v=new Map;let x=0;m.forEach((ee,we)=>{const oe=hL+x++;v.set(we,oe),ee.forEach($e=>bl($e,oe))});const b=[],w=new Set,T=new Set;for(let ee=0;ee<this.collectedLeaveElements.length;ee++){const we=this.collectedLeaveElements[ee],oe=we[zl];oe&&oe.setForRemoval&&(b.push(we),w.add(we),oe.hasAnimation?this.driver.query(we,".ng-star-inserted",!0).forEach($e=>w.add($e)):T.add(we))}const S=new Map,A=nX(p,Array.from(w));A.forEach((ee,we)=>{const oe=VI+x++;S.set(we,oe),ee.forEach($e=>bl($e,oe))}),e.push(()=>{m.forEach((ee,we)=>{const oe=v.get(we);ee.forEach($e=>K_($e,oe))}),A.forEach((ee,we)=>{const oe=S.get(we);ee.forEach($e=>K_($e,oe))}),b.forEach(ee=>{this.processLeaveNode(ee)})});const V=[],F=[];for(let ee=this._namespaceList.length-1;ee>=0;ee--)this._namespaceList[ee].drainQueuedTransitions(t).forEach(oe=>{const $e=oe.player,vt=oe.element;if(V.push($e),this.collectedEnterElements.length){const Ze=vt[zl];if(Ze&&Ze.setForMove){if(Ze.previousTriggersValues&&Ze.previousTriggersValues.has(oe.triggerName)){const ln=Ze.previousTriggersValues.get(oe.triggerName),Mn=this.statesByElement.get(oe.element);if(Mn&&Mn.has(oe.triggerName)){const Jt=Mn.get(oe.triggerName);Jt.value=ln,Mn.set(oe.triggerName,Jt)}}return void $e.destroy()}}const Ft=!d||!this.driver.containsElement(d,vt),rn=S.get(vt),gn=v.get(vt),Re=this._buildInstruction(oe,i,gn,rn,Ft);if(Re.errors&&Re.errors.length)return void F.push(Re);if(Ft)return $e.onStart(()=>wp(vt,Re.fromStyles)),$e.onDestroy(()=>Rc(vt,Re.toStyles)),void r.push($e);if(oe.isFallbackTransition)return $e.onStart(()=>wp(vt,Re.fromStyles)),$e.onDestroy(()=>Rc(vt,Re.toStyles)),void r.push($e);const pt=[];Re.timelines.forEach(Ze=>{Ze.stretchStartingKeyframe=!0,this.disabledNodes.has(Ze.element)||pt.push(Ze)}),Re.timelines=pt,i.append(vt,Re.timelines),o.push({instruction:Re,player:$e,element:vt}),Re.queriedElements.forEach(Ze=>Ga(a,Ze,[]).push($e)),Re.preStyleProps.forEach((Ze,ln)=>{if(Ze.size){let Mn=l.get(ln);Mn||l.set(ln,Mn=new Set),Ze.forEach((Jt,li)=>Mn.add(li))}}),Re.postStyleProps.forEach((Ze,ln)=>{let Mn=c.get(ln);Mn||c.set(ln,Mn=new Set),Ze.forEach((Jt,li)=>Mn.add(li))})});if(F.length){const ee=[];F.forEach(we=>{ee.push(function NAe(n,e){return new Ce(3505,!1)}())}),V.forEach(we=>we.destroy()),this.reportError(ee)}const P=new Map,D=new Map;o.forEach(ee=>{const we=ee.element;i.has(we)&&(D.set(we,we),this._beforeAnimationBuild(ee.player.namespaceId,ee.instruction,P))}),r.forEach(ee=>{const we=ee.element;this._getPreviousPlayers(we,!1,ee.namespaceId,ee.triggerName,null).forEach($e=>{Ga(P,we,[]).push($e),$e.destroy()})});const I=b.filter(ee=>rX(ee,l,c)),M=new Map;tX(M,this.driver,T,c,Du).forEach(ee=>{rX(ee,l,c)&&I.push(ee)});const z=new Map;m.forEach((ee,we)=>{tX(z,this.driver,new Set(ee),l,"!")}),I.forEach(ee=>{const we=M.get(ee),oe=z.get(ee);M.set(ee,new Map([...we?.entries()??[],...oe?.entries()??[]]))});const N=[],Ee=[],je={};o.forEach(ee=>{const{element:we,player:oe,instruction:$e}=ee;if(i.has(we)){if(u.has(we))return oe.onDestroy(()=>Rc(we,$e.toStyles)),oe.disabled=!0,oe.overrideTotalTime($e.totalTime),void r.push(oe);let vt=je;if(D.size>1){let rn=we;const gn=[];for(;rn=rn.parentNode;){const Re=D.get(rn);if(Re){vt=Re;break}gn.push(rn)}gn.forEach(Re=>D.set(Re,vt))}const Ft=this._buildAnimation(oe.namespaceId,$e,P,s,z,M);if(oe.setRealPlayer(Ft),vt===je)N.push(oe);else{const rn=this.playersByElement.get(vt);rn&&rn.length&&(oe.parentPlayer=vh(rn)),r.push(oe)}}else wp(we,$e.fromStyles),oe.onDestroy(()=>Rc(we,$e.toStyles)),Ee.push(oe),u.has(we)&&r.push(oe)}),Ee.forEach(ee=>{const we=s.get(ee.element);if(we&&we.length){const oe=vh(we);ee.setRealPlayer(oe)}}),r.forEach(ee=>{ee.parentPlayer?ee.syncPlayerEvents(ee.parentPlayer):ee.destroy()});for(let ee=0;ee<b.length;ee++){const we=b[ee],oe=we[zl];if(K_(we,VI),oe&&oe.hasAnimation)continue;let $e=[];if(a.size){let Ft=a.get(we);Ft&&Ft.length&&$e.push(...Ft);let rn=this.driver.query(we,fL,!0);for(let gn=0;gn<rn.length;gn++){let Re=a.get(rn[gn]);Re&&Re.length&&$e.push(...Re)}}const vt=$e.filter(Ft=>!Ft.destroyed);vt.length?OIe(this,we,vt):this.processLeaveNode(we)}return b.length=0,N.forEach(ee=>{this.players.push(ee),ee.onDone(()=>{ee.destroy();const we=this.players.indexOf(ee);this.players.splice(we,1)}),ee.play()}),N}afterFlush(e){this._flushFns.push(e)}afterFlushAnimationsDone(e){this._whenQuietFns.push(e)}_getPreviousPlayers(e,t,i,r,s){let o=[];if(t){const a=this.playersByQueriedElement.get(e);a&&(o=a)}else{const a=this.playersByElement.get(e);if(a){const l=!s||s==mx;a.forEach(c=>{c.queued||!l&&c.triggerName!=r||o.push(c)})}}return(i||r)&&(o=o.filter(a=>!(i&&i!=a.namespaceId||r&&r!=a.triggerName))),o}_beforeAnimationBuild(e,t,i){const s=t.element,o=t.isRemovalTransition?void 0:e,a=t.isRemovalTransition?void 0:t.triggerName;for(const l of t.timelines){const c=l.element,u=c!==s,d=Ga(i,c,[]);this._getPreviousPlayers(c,u,o,a,t.toState).forEach(m=>{const v=m.getRealPlayer();v.beforeDestroy&&v.beforeDestroy(),m.destroy(),d.push(m)})}wp(s,t.fromStyles)}_buildAnimation(e,t,i,r,s,o){const a=t.triggerName,l=t.element,c=[],u=new Set,d=new Set,p=t.timelines.map(v=>{const x=v.element;u.add(x);const b=x[zl];if(b&&b.removedBeforeQueried)return new bb(v.duration,v.delay);const w=x!==l,T=function NIe(n){const e=[];return iX(n,e),e}((i.get(x)||IIe).map(P=>P.getRealPlayer())).filter(P=>!!P.element&&P.element===x),S=s.get(x),A=o.get(x),V=k7(this._normalizer,v.keyframes,S,A),F=this._buildPlayer(v,V,T);if(v.subTimeline&&r&&d.add(x),w){const P=new IL(e,a,x);P.setRealPlayer(F),c.push(P)}return F});c.forEach(v=>{Ga(this.playersByQueriedElement,v.element,[]).push(v),v.onDone(()=>function RIe(n,e,t){let i=n.get(e);if(i){if(i.length){const r=i.indexOf(t);i.splice(r,1)}0==i.length&&n.delete(e)}return i}(this.playersByQueriedElement,v.element,v))}),u.forEach(v=>bl(v,B7));const m=vh(p);return m.onDestroy(()=>{u.forEach(v=>K_(v,B7)),Rc(l,t.toStyles)}),d.forEach(v=>{Ga(r,v,[]).push(m)}),m}_buildPlayer(e,t,i){return t.length>0?this.driver.animate(e.element,t,e.duration,e.delay,e.easing,i):new bb(e.duration,e.delay)}}class IL{constructor(e,t,i){this.namespaceId=e,this.triggerName=t,this.element=i,this._player=new bb,this._containsRealPlayer=!1,this._queuedCallbacks=new Map,this.destroyed=!1,this.parentPlayer=null,this.markedForDestroy=!1,this.disabled=!1,this.queued=!0,this.totalTime=0}setRealPlayer(e){this._containsRealPlayer||(this._player=e,this._queuedCallbacks.forEach((t,i)=>{t.forEach(r=>aL(e,i,void 0,r))}),this._queuedCallbacks.clear(),this._containsRealPlayer=!0,this.overrideTotalTime(e.totalTime),this.queued=!1)}getRealPlayer(){return this._player}overrideTotalTime(e){this.totalTime=e}syncPlayerEvents(e){const t=this._player;t.triggerCallback&&e.onStart(()=>t.triggerCallback("start")),e.onDone(()=>this.finish()),e.onDestroy(()=>this.destroy())}_queueEvent(e,t){Ga(this._queuedCallbacks,e,[]).push(t)}onDone(e){this.queued&&this._queueEvent("done",e),this._player.onDone(e)}onStart(e){this.queued&&this._queueEvent("start",e),this._player.onStart(e)}onDestroy(e){this.queued&&this._queueEvent("destroy",e),this._player.onDestroy(e)}init(){this._player.init()}hasStarted(){return!this.queued&&this._player.hasStarted()}play(){!this.queued&&this._player.play()}pause(){!this.queued&&this._player.pause()}restart(){!this.queued&&this._player.restart()}finish(){this._player.finish()}destroy(){this.destroyed=!0,this._player.destroy()}reset(){!this.queued&&this._player.reset()}setPosition(e){this.queued||this._player.setPosition(e)}getPosition(){return this.queued?0:this._player.getPosition()}triggerCallback(e){const t=this._player;t.triggerCallback&&t.triggerCallback(e)}}function KI(n){return n&&1===n.nodeType}function eX(n,e){const t=n.style.display;return n.style.display=e??"none",t}function tX(n,e,t,i,r){const s=[];t.forEach(l=>s.push(eX(l)));const o=[];i.forEach((l,c)=>{const u=new Map;l.forEach(d=>{const p=e.computeStyle(c,d,r);u.set(d,p),(!p||0==p.length)&&(c[zl]=CIe,o.push(c))}),n.set(c,u)});let a=0;return t.forEach(l=>eX(l,s[a++])),o}function nX(n,e){const t=new Map;if(n.forEach(a=>t.set(a,[])),0==e.length)return t;const r=new Set(e),s=new Map;function o(a){if(!a)return 1;let l=s.get(a);if(l)return l;const c=a.parentNode;return l=t.has(c)?c:r.has(c)?1:o(c),s.set(a,l),l}return e.forEach(a=>{const l=o(a);1!==l&&t.get(l).push(a)}),t}function bl(n,e){n.classList?.add(e)}function K_(n,e){n.classList?.remove(e)}function OIe(n,e,t){vh(t).onDone(()=>n.processLeaveNode(e))}function iX(n,e){for(let t=0;t<n.length;t++){const i=n[t];i instanceof xW?iX(i.players,e):e.push(i)}}function rX(n,e,t){const i=t.get(n);if(!i)return!1;let r=e.get(n);return r?i.forEach(s=>r.add(s)):e.set(n,i),t.delete(n),!0}class YI{constructor(e,t,i){this.bodyNode=e,this._driver=t,this._normalizer=i,this._triggerCache={},this.onRemovalComplete=(r,s)=>{},this._transitionEngine=new DIe(e,t,i),this._timelineEngine=new wIe(e,t,i),this._transitionEngine.onRemovalComplete=(r,s)=>this.onRemovalComplete(r,s)}registerTrigger(e,t,i,r,s){const o=e+"-"+r;let a=this._triggerCache[o];if(!a){const l=[],u=_L(this._driver,s,l,[]);if(l.length)throw function TAe(n,e){return new Ce(3404,!1)}();a=function vIe(n,e,t){return new yIe(n,e,t)}(r,u,this._normalizer),this._triggerCache[o]=a}this._transitionEngine.registerTrigger(t,r,a)}register(e,t){this._transitionEngine.register(e,t)}destroy(e,t){this._transitionEngine.destroy(e,t)}onInsert(e,t,i,r){this._transitionEngine.insertNode(e,t,i,r)}onRemove(e,t,i){this._transitionEngine.removeNode(e,t,i)}disableAnimations(e,t){this._transitionEngine.markElementAsDisabled(e,t)}process(e,t,i,r){if("@"==i.charAt(0)){const[s,o]=O7(i);this._timelineEngine.command(s,t,o,r)}else this._transitionEngine.trigger(e,t,i,r)}listen(e,t,i,r,s){if("@"==i.charAt(0)){const[o,a]=O7(i);return this._timelineEngine.listen(o,t,a,s)}return this._transitionEngine.listen(e,t,i,r,s)}flush(e=-1){this._transitionEngine.flush(e)}get players(){return[...this._transitionEngine.players,...this._timelineEngine.players]}whenRenderingDone(){return this._transitionEngine.whenRenderingDone()}afterFlushAnimationsDone(e){this._transitionEngine.afterFlushAnimationsDone(e)}}let VIe=(()=>{class n{static{this.initialStylesByElement=new WeakMap}constructor(t,i,r){this._element=t,this._startStyles=i,this._endStyles=r,this._state=0;let s=n.initialStylesByElement.get(t);s||n.initialStylesByElement.set(t,s=new Map),this._initialStyles=s}start(){this._state<1&&(this._startStyles&&Rc(this._element,this._startStyles,this._initialStyles),this._state=1)}finish(){this.start(),this._state<2&&(Rc(this._element,this._initialStyles),this._endStyles&&(Rc(this._element,this._endStyles),this._endStyles=null),this._state=1)}destroy(){this.finish(),this._state<3&&(n.initialStylesByElement.delete(this._element),this._startStyles&&(wp(this._element,this._startStyles),this._endStyles=null),this._endStyles&&(wp(this._element,this._endStyles),this._endStyles=null),Rc(this._element,this._initialStyles),this._state=3)}}return n})();function CL(n){let e=null;return n.forEach((t,i)=>{(function UIe(n){return"display"===n||"position"===n})(i)&&(e=e||new Map,e.set(i,t))}),e}class sX{constructor(e,t,i,r){this.element=e,this.keyframes=t,this.options=i,this._specialStyles=r,this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._initialized=!1,this._finished=!1,this._started=!1,this._destroyed=!1,this._originalOnDoneFns=[],this._originalOnStartFns=[],this.time=0,this.parentPlayer=null,this.currentSnapshot=new Map,this._duration=i.duration,this._delay=i.delay||0,this.time=this._duration+this._delay}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(e=>e()),this._onDoneFns=[])}init(){this._buildPlayer(),this._preparePlayerBeforeStart()}_buildPlayer(){if(this._initialized)return;this._initialized=!0;const e=this.keyframes;this.domPlayer=this._triggerWebAnimation(this.element,e,this.options),this._finalKeyframe=e.length?e[e.length-1]:new Map;const t=()=>this._onFinish();this.domPlayer.addEventListener("finish",t),this.onDestroy(()=>{this.domPlayer.removeEventListener("finish",t)})}_preparePlayerBeforeStart(){this._delay?this._resetDomPlayerState():this.domPlayer.pause()}_convertKeyframesToObject(e){const t=[];return e.forEach(i=>{t.push(Object.fromEntries(i))}),t}_triggerWebAnimation(e,t,i){return e.animate(this._convertKeyframesToObject(t),i)}onStart(e){this._originalOnStartFns.push(e),this._onStartFns.push(e)}onDone(e){this._originalOnDoneFns.push(e),this._onDoneFns.push(e)}onDestroy(e){this._onDestroyFns.push(e)}play(){this._buildPlayer(),this.hasStarted()||(this._onStartFns.forEach(e=>e()),this._onStartFns=[],this._started=!0,this._specialStyles&&this._specialStyles.start()),this.domPlayer.play()}pause(){this.init(),this.domPlayer.pause()}finish(){this.init(),this._specialStyles&&this._specialStyles.finish(),this._onFinish(),this.domPlayer.finish()}reset(){this._resetDomPlayerState(),this._destroyed=!1,this._finished=!1,this._started=!1,this._onStartFns=this._originalOnStartFns,this._onDoneFns=this._originalOnDoneFns}_resetDomPlayerState(){this.domPlayer&&this.domPlayer.cancel()}restart(){this.reset(),this.play()}hasStarted(){return this._started}destroy(){this._destroyed||(this._destroyed=!0,this._resetDomPlayerState(),this._onFinish(),this._specialStyles&&this._specialStyles.destroy(),this._onDestroyFns.forEach(e=>e()),this._onDestroyFns=[])}setPosition(e){void 0===this.domPlayer&&this.init(),this.domPlayer.currentTime=e*this.time}getPosition(){return+(this.domPlayer.currentTime??0)/this.time}get totalTime(){return this._delay+this._duration}beforeDestroy(){const e=new Map;this.hasStarted()&&this._finalKeyframe.forEach((i,r)=>{"offset"!==r&&e.set(r,this._finished?i:W7(this.element,r))}),this.currentSnapshot=e}triggerCallback(e){const t="start"===e?this._onStartFns:this._onDoneFns;t.forEach(i=>i()),t.length=0}}class BIe{validateStyleProperty(e){return!0}validateAnimatableStyleProperty(e){return!0}matchesElement(e,t){return!1}containsElement(e,t){return F7(e,t)}getParentElement(e){return uL(e)}query(e,t,i){return L7(e,t,i)}computeStyle(e,t,i){return window.getComputedStyle(e)[t]}animate(e,t,i,r,s,o=[]){const l={duration:i,delay:r,fill:0==r?"both":"forwards"};s&&(l.easing=s);const c=new Map,u=o.filter(m=>m instanceof sX);(function qAe(n,e){return 0===n||0===e})(i,r)&&u.forEach(m=>{m.currentSnapshot.forEach((v,x)=>c.set(x,v))});let d=function WAe(n){return n.length?n[0]instanceof Map?n:n.map(e=>z7(e)):[]}(t).map(m=>yh(m));d=function XAe(n,e,t){if(t.size&&e.length){let i=e[0],r=[];if(t.forEach((s,o)=>{i.has(o)||r.push(o),i.set(o,s)}),r.length)for(let s=1;s<e.length;s++){let o=e[s];r.forEach(a=>o.set(a,W7(n,a)))}}return e}(e,d,c);const p=function LIe(n,e){let t=null,i=null;return Array.isArray(e)&&e.length?(t=CL(e[0]),e.length>1&&(i=CL(e[e.length-1]))):e instanceof Map&&(t=CL(e)),t||i?new VIe(n,t,i):null}(e,d);return new sX(e,d,l,p)}}let zIe=(()=>{class n extends yW{constructor(t,i){super(),this._nextAnimationId=0,this._renderer=t.createRenderer(i.body,{id:"0",encapsulation:Kr.None,styles:[],data:{animation:[]}})}build(t){const i=this._nextAnimationId.toString();this._nextAnimationId++;const r=Array.isArray(t)?bW(t):t;return oX(this._renderer,null,i,"register",[r]),new HIe(i,this._renderer)}static{this.\u0275fac=function(i){return new(i||n)(ue(Cy),ue(_i))}}static{this.\u0275prov=dt({token:n,factory:n.\u0275fac})}}return n})();class HIe extends Ufe{constructor(e,t){super(),this._id=e,this._renderer=t}create(e,t){return new GIe(this._id,e,t||{},this._renderer)}}class GIe{constructor(e,t,i,r){this.id=e,this.element=t,this._renderer=r,this.parentPlayer=null,this._started=!1,this.totalTime=0,this._command("create",i)}_listen(e,t){return this._renderer.listen(this.element,`@@${this.id}:${e}`,t)}_command(e,...t){return oX(this._renderer,this.element,this.id,e,t)}onDone(e){this._listen("done",e)}onStart(e){this._listen("start",e)}onDestroy(e){this._listen("destroy",e)}init(){this._command("init")}hasStarted(){return this._started}play(){this._command("play"),this._started=!0}pause(){this._command("pause")}restart(){this._command("restart")}finish(){this._command("finish")}destroy(){this._command("destroy")}reset(){this._command("reset"),this._started=!1}setPosition(e){this._command("setPosition",e)}getPosition(){return this._renderer.engine.players[+this.id]?.getPosition()??0}}function oX(n,e,t,i,r){return n.setProperty(e,`@@${t}:${i}`,r)}const aX="@.disabled";let WIe=(()=>{class n{constructor(t,i,r){this.delegate=t,this.engine=i,this._zone=r,this._currentId=0,this._microtaskId=1,this._animationCallbacksBuffer=[],this._rendererCache=new Map,this._cdRecurDepth=0,i.onRemovalComplete=(s,o)=>{const a=o?.parentNode(s);a&&o.removeChild(a,s)}}createRenderer(t,i){const s=this.delegate.createRenderer(t,i);if(!(t&&i&&i.data&&i.data.animation)){let u=this._rendererCache.get(s);return u||(u=new lX("",s,this.engine,()=>this._rendererCache.delete(s)),this._rendererCache.set(s,u)),u}const o=i.id,a=i.id+"-"+this._currentId;this._currentId++,this.engine.register(a,t);const l=u=>{Array.isArray(u)?u.forEach(l):this.engine.registerTrigger(o,a,t,u.name,u)};return i.data.animation.forEach(l),new jIe(this,a,s,this.engine)}begin(){this._cdRecurDepth++,this.delegate.begin&&this.delegate.begin()}_scheduleCountTask(){queueMicrotask(()=>{this._microtaskId++})}scheduleListenerCallback(t,i,r){t>=0&&t<this._microtaskId?this._zone.run(()=>i(r)):(0==this._animationCallbacksBuffer.length&&queueMicrotask(()=>{this._zone.run(()=>{this._animationCallbacksBuffer.forEach(s=>{const[o,a]=s;o(a)}),this._animationCallbacksBuffer=[]})}),this._animationCallbacksBuffer.push([i,r]))}end(){this._cdRecurDepth--,0==this._cdRecurDepth&&this._zone.runOutsideAngular(()=>{this._scheduleCountTask(),this.engine.flush(this._microtaskId)}),this.delegate.end&&this.delegate.end()}whenRenderingDone(){return this.engine.whenRenderingDone()}static{this.\u0275fac=function(i){return new(i||n)(ue(Cy),ue(YI),ue(mn))}}static{this.\u0275prov=dt({token:n,factory:n.\u0275fac})}}return n})();class lX{constructor(e,t,i,r){this.namespaceId=e,this.delegate=t,this.engine=i,this._onDestroy=r}get data(){return this.delegate.data}destroyNode(e){this.delegate.destroyNode?.(e)}destroy(){this.engine.destroy(this.namespaceId,this.delegate),this.engine.afterFlushAnimationsDone(()=>{queueMicrotask(()=>{this.delegate.destroy()})}),this._onDestroy?.()}createElement(e,t){return this.delegate.createElement(e,t)}createComment(e){return this.delegate.createComment(e)}createText(e){return this.delegate.createText(e)}appendChild(e,t){this.delegate.appendChild(e,t),this.engine.onInsert(this.namespaceId,t,e,!1)}insertBefore(e,t,i,r=!0){this.delegate.insertBefore(e,t,i),this.engine.onInsert(this.namespaceId,t,e,r)}removeChild(e,t,i){this.engine.onRemove(this.namespaceId,t,this.delegate)}selectRootElement(e,t){return this.delegate.selectRootElement(e,t)}parentNode(e){return this.delegate.parentNode(e)}nextSibling(e){return this.delegate.nextSibling(e)}setAttribute(e,t,i,r){this.delegate.setAttribute(e,t,i,r)}removeAttribute(e,t,i){this.delegate.removeAttribute(e,t,i)}addClass(e,t){this.delegate.addClass(e,t)}removeClass(e,t){this.delegate.removeClass(e,t)}setStyle(e,t,i,r){this.delegate.setStyle(e,t,i,r)}removeStyle(e,t,i){this.delegate.removeStyle(e,t,i)}setProperty(e,t,i){"@"==t.charAt(0)&&t==aX?this.disableAnimations(e,!!i):this.delegate.setProperty(e,t,i)}setValue(e,t){this.delegate.setValue(e,t)}listen(e,t,i){return this.delegate.listen(e,t,i)}disableAnimations(e,t){this.engine.disableAnimations(e,t)}}class jIe extends lX{constructor(e,t,i,r,s){super(t,i,r,s),this.factory=e,this.namespaceId=t}setProperty(e,t,i){"@"==t.charAt(0)?"."==t.charAt(1)&&t==aX?this.disableAnimations(e,i=void 0===i||!!i):this.engine.process(this.namespaceId,e,t.slice(1),i):this.delegate.setProperty(e,t,i)}listen(e,t,i){if("@"==t.charAt(0)){const r=function $Ie(n){switch(n){case"body":return document.body;case"document":return document;case"window":return window;default:return n}}(e);let s=t.slice(1),o="";return"@"!=s.charAt(0)&&([s,o]=function qIe(n){const e=n.indexOf(".");return[n.substring(0,e),n.slice(e+1)]}(s)),this.engine.listen(this.namespaceId,r,s,o,a=>{this.factory.scheduleListenerCallback(a._data||-1,i,a)})}return this.delegate.listen(e,t,i)}}const cX=[{provide:yW,useClass:zIe},{provide:wL,useFactory:function KIe(){return new pIe}},{provide:YI,useClass:(()=>{class n extends YI{constructor(t,i,r,s){super(t.body,i,r)}ngOnDestroy(){this.flush()}static{this.\u0275fac=function(i){return new(i||n)(ue(_i),ue(dL),ue(wL),ue(dc))}}static{this.\u0275prov=dt({token:n,factory:n.\u0275fac})}}return n})()},{provide:Cy,useFactory:function YIe(n,e,t){return new WIe(n,e,t)},deps:[H1,YI,mn]}],ML=[{provide:dL,useFactory:()=>new BIe},{provide:lu,useValue:"BrowserAnimations"},...cX],uX=[{provide:dL,useClass:V7},{provide:lu,useValue:"NoopAnimations"},...cX];let QIe=(()=>{class n{static withConfig(t){return{ngModule:n,providers:t.disableAnimations?uX:ML}}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275mod=ni({type:n})}static{this.\u0275inj=jn({providers:ML,imports:[Iz]})}}return n})(),ZIe=(()=>{class n{static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275mod=ni({type:n})}static{this.\u0275inj=jn({imports:[us,us]})}}return n})(),mX=(()=>{class n{static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275mod=ni({type:n})}static{this.\u0275inj=jn({imports:[nj,ff,us,XW,KW,ZIe]})}}return n})(),gX=(()=>{class n{static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275mod=ni({type:n})}static{this.\u0275inj=jn({imports:[ff,us]})}}return n})();const DCe=[ej,Ab,gX,mj,q$,mX,B$,R7,K$];let RCe=(()=>{class n{static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275mod=ni({type:n})}static{this.\u0275inj=jn({imports:[DCe,ej,Ab,gX,mj,q$,mX,B$,R7,K$]})}}return n})();const _X="firebasestorage.googleapis.com",vX="storageBucket";class jr extends ii.g{constructor(e,t,i=0){super(RL(e),`Firebase Storage: ${t} (${RL(e)})`),this.status_=i,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,jr.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return RL(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.message=this.customData.serverResponse?`${this._baseMessage}\n${this.customData.serverResponse}`:this._baseMessage}}var Ur=function(n){return n.UNKNOWN="unknown",n.OBJECT_NOT_FOUND="object-not-found",n.BUCKET_NOT_FOUND="bucket-not-found",n.PROJECT_NOT_FOUND="project-not-found",n.QUOTA_EXCEEDED="quota-exceeded",n.UNAUTHENTICATED="unauthenticated",n.UNAUTHORIZED="unauthorized",n.UNAUTHORIZED_APP="unauthorized-app",n.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",n.INVALID_CHECKSUM="invalid-checksum",n.CANCELED="canceled",n.INVALID_EVENT_NAME="invalid-event-name",n.INVALID_URL="invalid-url",n.INVALID_DEFAULT_BUCKET="invalid-default-bucket",n.NO_DEFAULT_BUCKET="no-default-bucket",n.CANNOT_SLICE_BLOB="cannot-slice-blob",n.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",n.NO_DOWNLOAD_URL="no-download-url",n.INVALID_ARGUMENT="invalid-argument",n.INVALID_ARGUMENT_COUNT="invalid-argument-count",n.APP_DELETED="app-deleted",n.INVALID_ROOT_OPERATION="invalid-root-operation",n.INVALID_FORMAT="invalid-format",n.INTERNAL_ERROR="internal-error",n.UNSUPPORTED_ENVIRONMENT="unsupported-environment",n}(Ur||{});function RL(n){return"storage/"+n}function PL(){return new jr(Ur.UNKNOWN,"An unknown error occurred, please check the error payload for server response.")}function yX(){return new jr(Ur.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function bX(){return new jr(Ur.CANCELED,"User canceled the upload/download.")}function xX(){return new jr(Ur.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function Y_(n){return new jr(Ur.INVALID_ARGUMENT,n)}function wX(){return new jr(Ur.APP_DELETED,"The Firebase app was deleted.")}function EX(n){return new jr(Ur.INVALID_ROOT_OPERATION,"The operation '"+n+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function gx(n,e){return new jr(Ur.INVALID_FORMAT,"String does not match format '"+n+"': "+e)}function _x(n){throw new jr(Ur.INTERNAL_ERROR,"Internal error: "+n)}class Co{constructor(e,t){this.bucket=e,this.path_=t}get path(){return this.path_}get isRoot(){return 0===this.path.length}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,t){let i;try{i=Co.makeFromUrl(e,t)}catch{return new Co(e,"")}if(""===i.path)return i;throw function zCe(n){return new jr(Ur.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+n+"'.")}(e)}static makeFromUrl(e,t){let i=null;const r="([A-Za-z0-9.\\-_]+)",a=new RegExp("^gs://"+r+"(/(.*))?$","i");function c(A){A.path_=decodeURIComponent(A.path)}const d=t.replace(/[.]/g,"\\."),S=[{regex:a,indices:{bucket:1,path:3},postModify:function s(A){"/"===A.path.charAt(A.path.length-1)&&(A.path_=A.path_.slice(0,-1))}},{regex:new RegExp(`^https?://${d}/v[A-Za-z0-9_]+/b/${r}/o(/([^?#]*).*)?$`,"i"),indices:{bucket:1,path:3},postModify:c},{regex:new RegExp(`^https?://${t===_X?"(?:storage.googleapis.com|storage.cloud.google.com)":t}/${r}/([^?#]*)`,"i"),indices:{bucket:1,path:2},postModify:c}];for(let A=0;A<S.length;A++){const V=S[A],F=V.regex.exec(e);if(F){let D=F[V.indices.path];D||(D=""),i=new Co(F[V.indices.bucket],D),V.postModify(i);break}}if(null==i)throw function BCe(n){return new jr(Ur.INVALID_URL,"Invalid URL '"+n+"'.")}(e);return i}}class $Ce{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}function ZI(n){return"string"==typeof n||n instanceof String}function TX(n){return kL()&&n instanceof Blob}function kL(){return typeof Blob<"u"}function OL(n,e,t,i){if(i<e)throw Y_(`Invalid value for '${n}'. Expected ${e} or greater.`);if(i>t)throw Y_(`Invalid value for '${n}'. Expected ${t} or less.`)}function Yu(n,e,t){let i=e;return null==t&&(i=`https://${e}`),`${t}://${i}/v0${n}`}function SX(n){const e=encodeURIComponent;let t="?";for(const i in n)n.hasOwnProperty(i)&&(t=t+(e(i)+"=")+e(n[i])+"&");return t=t.slice(0,-1),t}var Q_=function(n){return n[n.NO_ERROR=0]="NO_ERROR",n[n.NETWORK_ERROR=1]="NETWORK_ERROR",n[n.ABORT=2]="ABORT",n}(Q_||{});function AX(n,e){const t=n>=500&&n<600,r=-1!==[408,429].indexOf(n),s=-1!==e.indexOf(n);return t||r||s}class ZCe{constructor(e,t,i,r,s,o,a,l,c,u,d,p=!0){this.url_=e,this.method_=t,this.headers_=i,this.body_=r,this.successCodes_=s,this.additionalRetryCodes_=o,this.callback_=a,this.errorCallback_=l,this.timeout_=c,this.progressCallback_=u,this.connectionFactory_=d,this.retry=p,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((m,v)=>{this.resolve_=m,this.reject_=v,this.start_()})}start_(){const t=(i,r)=>{const s=this.resolve_,o=this.reject_,a=r.connection;if(r.wasSuccessCode)try{const l=this.callback_(a,a.getResponse());!function KCe(n){return void 0!==n}(l)?s():s(l)}catch(l){o(l)}else if(null!==a){const l=PL();l.serverResponse=a.getErrorText(),o(this.errorCallback_?this.errorCallback_(a,l):l)}else o(r.canceled?this.appDelete_?wX():bX():yX())};this.canceled_?t(0,new JI(!1,null,!0)):this.backoffId_=function qCe(n,e,t){let i=1,r=null,s=null,o=!1,a=0;function l(){return 2===a}let c=!1;function u(...b){c||(c=!0,e.apply(null,b))}function d(b){r=setTimeout(()=>{r=null,n(m,l())},b)}function p(){s&&clearTimeout(s)}function m(b,...w){if(c)return void p();if(b)return p(),void u.call(null,b,...w);if(l()||o)return p(),void u.call(null,b,...w);let S;i<64&&(i*=2),1===a?(a=2,S=0):S=1e3*(i+Math.random()),d(S)}let v=!1;function x(b){v||(v=!0,p(),!c&&(null!==r?(b||(a=2),clearTimeout(r),d(0)):b||(a=1)))}return d(0),s=setTimeout(()=>{o=!0,x(!0)},t),x}((i,r)=>{if(r)return void i(!1,new JI(!1,null,!0));const s=this.connectionFactory_();this.pendingConnection_=s;const o=a=>{null!==this.progressCallback_&&this.progressCallback_(a.loaded,a.lengthComputable?a.total:-1)};null!==this.progressCallback_&&s.addUploadProgressListener(o),s.send(this.url_,this.method_,this.body_,this.headers_).then(()=>{null!==this.progressCallback_&&s.removeUploadProgressListener(o),this.pendingConnection_=null;const a=s.getErrorCode()===Q_.NO_ERROR,l=s.getStatus();if(!a||AX(l,this.additionalRetryCodes_)&&this.retry){const u=s.getErrorCode()===Q_.ABORT;return void i(!1,new JI(!1,null,u))}const c=-1!==this.successCodes_.indexOf(l);i(!0,new JI(c,s))})},t,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,null!==this.backoffId_&&function XCe(n){n(!1)}(this.backoffId_),null!==this.pendingConnection_&&this.pendingConnection_.abort()}}class JI{constructor(e,t,i){this.wasSuccessCode=e,this.connection=t,this.canceled=!!i}}function sMe(...n){const e=function rMe(){return typeof BlobBuilder<"u"?BlobBuilder:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:void 0}();if(void 0!==e){const t=new e;for(let i=0;i<n.length;i++)t.append(n[i]);return t.getBlob()}if(kL())return new Blob(n);throw new jr(Ur.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}const ja={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class NL{constructor(e,t){this.data=e,this.contentType=t||null}}function FL(n,e){switch(n){case ja.RAW:return new NL(IX(e));case ja.BASE64:case ja.BASE64URL:return new NL(CX(n,e));case ja.DATA_URL:return new NL(function cMe(n){const e=new MX(n);return e.base64?CX(ja.BASE64,e.rest):function lMe(n){let e;try{e=decodeURIComponent(n)}catch{throw gx(ja.DATA_URL,"Malformed data URL.")}return IX(e)}(e.rest)}(e),function uMe(n){return new MX(n).contentType}(e))}throw PL()}function IX(n){const e=[];for(let t=0;t<n.length;t++){let i=n.charCodeAt(t);i<=127?e.push(i):i<=2047?e.push(192|i>>6,128|63&i):55296==(64512&i)?t<n.length-1&&56320==(64512&n.charCodeAt(t+1))?(i=65536|(1023&i)<<10|1023&n.charCodeAt(++t),e.push(240|i>>18,128|i>>12&63,128|i>>6&63,128|63&i)):e.push(239,191,189):56320==(64512&i)?e.push(239,191,189):e.push(224|i>>12,128|i>>6&63,128|63&i)}return new Uint8Array(e)}function CX(n,e){switch(n){case ja.BASE64:{const r=-1!==e.indexOf("-"),s=-1!==e.indexOf("_");if(r||s)throw gx(n,"Invalid character '"+(r?"-":"_")+"' found: is it base64url encoded?");break}case ja.BASE64URL:{const r=-1!==e.indexOf("+"),s=-1!==e.indexOf("/");if(r||s)throw gx(n,"Invalid character '"+(r?"+":"/")+"' found: is it base64 encoded?");e=e.replace(/-/g,"+").replace(/_/g,"/");break}}let t;try{t=function aMe(n){if(typeof atob>"u")throw function jCe(n){return new jr(Ur.UNSUPPORTED_ENVIRONMENT,`${n} is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information.`)}("base-64");return atob(n)}(e)}catch(r){throw r.message.includes("polyfill")?r:gx(n,"Invalid character found")}const i=new Uint8Array(t.length);for(let r=0;r<t.length;r++)i[r]=t.charCodeAt(r);return i}class MX{constructor(e){this.base64=!1,this.contentType=null;const t=e.match(/^data:([^,]+)?,/);if(null===t)throw gx(ja.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const i=t[1]||null;null!=i&&(this.base64=function dMe(n,e){return n.length>=e.length&&n.substring(n.length-e.length)===e}(i,";base64"),this.contentType=this.base64?i.substring(0,i.length-7):i),this.rest=e.substring(e.indexOf(",")+1)}}class Pc{constructor(e,t){let i=0,r="";TX(e)?(this.data_=e,i=e.size,r=e.type):e instanceof ArrayBuffer?(t?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),i=this.data_.length):e instanceof Uint8Array&&(t?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),i=e.length),this.size_=i,this.type_=r}size(){return this.size_}type(){return this.type_}slice(e,t){if(TX(this.data_)){const r=function oMe(n,e,t){return n.webkitSlice?n.webkitSlice(e,t):n.mozSlice?n.mozSlice(e,t):n.slice?n.slice(e,t):null}(this.data_,e,t);return null===r?null:new Pc(r)}{const i=new Uint8Array(this.data_.buffer,e,t-e);return new Pc(i,!0)}}static getBlob(...e){if(kL()){const t=e.map(i=>i instanceof Pc?i.data_:i);return new Pc(sMe.apply(null,t))}{const t=e.map(o=>ZI(o)?FL(ja.RAW,o).data:o.data_);let i=0;t.forEach(o=>{i+=o.byteLength});const r=new Uint8Array(i);let s=0;return t.forEach(o=>{for(let a=0;a<o.length;a++)r[s++]=o[a]}),new Pc(r,!0)}}uploadData(){return this.data_}}function LL(n){let e;try{e=JSON.parse(n)}catch{return null}return function QCe(n){return"object"==typeof n&&!Array.isArray(n)}(e)?e:null}function DX(n){const e=n.lastIndexOf("/",n.length-2);return-1===e?n:n.slice(e+1)}function pMe(n,e){return e}class Qo{constructor(e,t,i,r){this.server=e,this.local=t||e,this.writable=!!i,this.xform=r||pMe}}let eC=null;function vx(){if(eC)return eC;const n=[];n.push(new Qo("bucket")),n.push(new Qo("generation")),n.push(new Qo("metageneration")),n.push(new Qo("name","fullPath",!0));const t=new Qo("name");t.xform=function e(s,o){return function mMe(n){return!ZI(n)||n.length<2?n:DX(n)}(o)},n.push(t);const r=new Qo("size");return r.xform=function i(s,o){return void 0!==o?Number(o):o},n.push(r),n.push(new Qo("timeCreated")),n.push(new Qo("updated")),n.push(new Qo("md5Hash",null,!0)),n.push(new Qo("cacheControl",null,!0)),n.push(new Qo("contentDisposition",null,!0)),n.push(new Qo("contentEncoding",null,!0)),n.push(new Qo("contentLanguage",null,!0)),n.push(new Qo("contentType",null,!0)),n.push(new Qo("metadata","customMetadata",!0)),eC=n,eC}function RX(n,e,t){const i=LL(e);return null===i?null:function _Me(n,e,t){const i={type:"file"},r=t.length;for(let s=0;s<r;s++){const o=t[s];i[o.local]=o.xform(i,e[o.server])}return function gMe(n,e){Object.defineProperty(n,"ref",{get:function t(){const s=new Co(n.bucket,n.fullPath);return e._makeStorageReference(s)}})}(i,n),i}(n,i,t)}function VL(n,e){const t={},i=e.length;for(let r=0;r<i;r++){const s=e[r];s.writable&&(t[s.server]=n[s.local])}return JSON.stringify(t)}const PX="prefixes",kX="items";class kc{constructor(e,t,i,r){this.url=e,this.method=t,this.handler=i,this.timeout=r,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}function Oc(n){if(!n)throw PL()}function tC(n,e){return function t(i,r){const s=RX(n,r,e);return Oc(null!==s),s}}function Z_(n){return function e(t,i){let r;return r=401===t.getStatus()?t.getErrorText().includes("Firebase App Check token is invalid")?function VCe(){return new jr(Ur.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project.")}():function LCe(){return new jr(Ur.UNAUTHENTICATED,"User is not authenticated, please authenticate using Firebase Authentication and try again.")}():402===t.getStatus()?function FCe(n){return new jr(Ur.QUOTA_EXCEEDED,"Quota for bucket '"+n+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}(n.bucket):403===t.getStatus()?function UCe(n){return new jr(Ur.UNAUTHORIZED,"User does not have permission to access '"+n+"'.")}(n.path):i,r.status=t.getStatus(),r.serverResponse=i.serverResponse,r}}function yx(n){const e=Z_(n);return function t(i,r){let s=e(i,r);return 404===i.getStatus()&&(s=function NCe(n){return new jr(Ur.OBJECT_NOT_FOUND,"Object '"+n+"' does not exist.")}(n.path)),s.serverResponse=r.serverResponse,s}}function OX(n,e,t){const r=Yu(e.fullServerUrl(),n.host,n._protocol),o=n.maxOperationRetryTime,a=new kc(r,"GET",tC(n,t),o);return a.errorHandler=yx(e),a}function EMe(n,e,t,i,r){const s={};s.prefix=e.isRoot?"":e.path+"/",t&&t.length>0&&(s.delimiter=t),i&&(s.pageToken=i),r&&(s.maxResults=r);const a=Yu(e.bucketOnlyServerUrl(),n.host,n._protocol),c=n.maxOperationRetryTime,u=new kc(a,"GET",function xMe(n,e){return function t(i,r){const s=function bMe(n,e,t){const i=LL(t);return null===i?null:function yMe(n,e,t){const i={prefixes:[],items:[],nextPageToken:t.nextPageToken};if(t[PX])for(const r of t[PX]){const s=r.replace(/\/$/,""),o=n._makeStorageReference(new Co(e,s));i.prefixes.push(o)}if(t[kX])for(const r of t[kX]){const s=n._makeStorageReference(new Co(e,r.name));i.items.push(s)}return i}(n,e,i)}(n,e,r);return Oc(null!==s),s}}(n,e.bucket),c);return u.urlParams=s,u.errorHandler=Z_(e),u}function FX(n,e,t){const i=Object.assign({},t);return i.fullPath=n.path,i.size=e.size(),i.contentType||(i.contentType=function IMe(n,e){return n&&n.contentType||e&&e.type()||"application/octet-stream"}(null,e)),i}class nC{constructor(e,t,i,r){this.current=e,this.total=t,this.finalized=!!i,this.metadata=r||null}}function UL(n,e){let t=null;try{t=n.getResponseHeader("X-Goog-Upload-Status")}catch{Oc(!1)}return Oc(!!t&&-1!==(e||["active"]).indexOf(t)),t}const RMe={STATE_CHANGED:"state_changed"},Zo={RUNNING:"running",PAUSED:"paused",SUCCESS:"success",CANCELED:"canceled",ERROR:"error"};function BL(n){switch(n){case"running":case"pausing":case"canceling":return Zo.RUNNING;case"paused":return Zo.PAUSED;case"success":return Zo.SUCCESS;case"canceled":return Zo.CANCELED;default:return Zo.ERROR}}class PMe{constructor(e,t,i){if(function YCe(n){return"function"==typeof n}(e)||null!=t||null!=i)this.next=e,this.error=t??void 0,this.complete=i??void 0;else{const s=e;this.next=s.next,this.error=s.error,this.complete=s.complete}}}function J_(n){return(...e)=>{Promise.resolve().then(()=>n(...e))}}let UX=null;class kMe{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=Q_.NO_ERROR,this.sendPromise_=new Promise(e=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=Q_.ABORT,e()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=Q_.NETWORK_ERROR,e()}),this.xhr_.addEventListener("load",()=>{e()})})}send(e,t,i,r){if(this.sent_)throw _x("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(t,e,!0),void 0!==r)for(const s in r)r.hasOwnProperty(s)&&this.xhr_.setRequestHeader(s,r[s].toString());return void 0!==i?this.xhr_.send(i):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw _x("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw _x("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw _x("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw _x("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(e){return this.xhr_.getResponseHeader(e)}addUploadProgressListener(e){null!=this.xhr_.upload&&this.xhr_.upload.addEventListener("progress",e)}removeUploadProgressListener(e){null!=this.xhr_.upload&&this.xhr_.upload.removeEventListener("progress",e)}}class OMe extends kMe{initXhr(){this.xhr_.responseType="text"}}function Hl(){return UX?UX():new OMe}class BX{constructor(e,t,i=null){this._transferred=0,this._needToFetchStatus=!1,this._needToFetchMetadata=!1,this._observers=[],this._error=void 0,this._uploadUrl=void 0,this._request=void 0,this._chunkMultiplier=1,this._resolve=void 0,this._reject=void 0,this._ref=e,this._blob=t,this._metadata=i,this._mappings=vx(),this._resumable=this._shouldDoResumable(this._blob),this._state="running",this._errorHandler=r=>{if(this._request=void 0,this._chunkMultiplier=1,r._codeEquals(Ur.CANCELED))this._needToFetchStatus=!0,this.completeTransitions_();else{const s=this.isExponentialBackoffExpired();if(AX(r.status,[])){if(!s)return this.sleepTime=Math.max(2*this.sleepTime,1e3),this._needToFetchStatus=!0,void this.completeTransitions_();r=yX()}this._error=r,this._transition("error")}},this._metadataErrorHandler=r=>{this._request=void 0,r._codeEquals(Ur.CANCELED)?this.completeTransitions_():(this._error=r,this._transition("error"))},this.sleepTime=0,this.maxSleepTime=this._ref.storage.maxUploadRetryTime,this._promise=new Promise((r,s)=>{this._resolve=r,this._reject=s,this._start()}),this._promise.then(null,()=>{})}isExponentialBackoffExpired(){return this.sleepTime>this.maxSleepTime}_makeProgressCallback(){const e=this._transferred;return t=>this._updateProgress(e+t)}_shouldDoResumable(e){return e.size()>262144}_start(){"running"===this._state&&void 0===this._request&&(this._resumable?void 0===this._uploadUrl?this._createResumable():this._needToFetchStatus?this._fetchStatus():this._needToFetchMetadata?this._fetchMetadata():this.pendingTimeout=setTimeout(()=>{this.pendingTimeout=void 0,this._continueUpload()},this.sleepTime):this._oneShotUpload())}_resolveToken(e){Promise.all([this._ref.storage._getAuthToken(),this._ref.storage._getAppCheckToken()]).then(([t,i])=>{switch(this._state){case"running":e(t,i);break;case"canceling":this._transition("canceled");break;case"pausing":this._transition("paused")}})}_createResumable(){this._resolveToken((e,t)=>{const i=function CMe(n,e,t,i,r){const s=e.bucketOnlyServerUrl(),o=FX(e,i,r),a={name:o.fullPath},l=Yu(s,n.host,n._protocol),u={"X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${i.size()}`,"X-Goog-Upload-Header-Content-Type":o.contentType,"Content-Type":"application/json; charset=utf-8"},d=VL(o,t),v=new kc(l,"POST",function m(x){let b;UL(x);try{b=x.getResponseHeader("X-Goog-Upload-URL")}catch{Oc(!1)}return Oc(ZI(b)),b},n.maxUploadRetryTime);return v.urlParams=a,v.headers=u,v.body=d,v.errorHandler=Z_(e),v}(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),r=this._ref.storage._makeRequest(i,Hl,e,t);this._request=r,r.getPromise().then(s=>{this._request=void 0,this._uploadUrl=s,this._needToFetchStatus=!1,this.completeTransitions_()},this._errorHandler)})}_fetchStatus(){const e=this._uploadUrl;this._resolveToken((t,i)=>{const r=function MMe(n,e,t,i){const l=new kc(t,"POST",function s(c){const u=UL(c,["active","final"]);let d=null;try{d=c.getResponseHeader("X-Goog-Upload-Size-Received")}catch{Oc(!1)}d||Oc(!1);const p=Number(d);return Oc(!isNaN(p)),new nC(p,i.size(),"final"===u)},n.maxUploadRetryTime);return l.headers={"X-Goog-Upload-Command":"query"},l.errorHandler=Z_(e),l}(this._ref.storage,this._ref._location,e,this._blob),s=this._ref.storage._makeRequest(r,Hl,t,i);this._request=s,s.getPromise().then(o=>{this._request=void 0,this._updateProgress(o.current),this._needToFetchStatus=!1,o.finalized&&(this._needToFetchMetadata=!0),this.completeTransitions_()},this._errorHandler)})}_continueUpload(){const e=262144*this._chunkMultiplier,t=new nC(this._transferred,this._blob.size()),i=this._uploadUrl;this._resolveToken((r,s)=>{let o;try{o=function DMe(n,e,t,i,r,s,o,a){const l=new nC(0,0);if(o?(l.current=o.current,l.total=o.total):(l.current=0,l.total=i.size()),i.size()!==l.total)throw function GCe(){return new jr(Ur.SERVER_FILE_WRONG_SIZE,"Server recorded incorrect upload file size, please retry the upload.")}();const c=l.total-l.current;let u=c;r>0&&(u=Math.min(u,r));const d=l.current;let m="";m=0===u?"finalize":c===u?"upload, finalize":"upload";const v={"X-Goog-Upload-Command":m,"X-Goog-Upload-Offset":`${l.current}`},x=i.slice(d,d+u);if(null===x)throw xX();const S=new kc(t,"POST",function b(A,V){const F=UL(A,["active","final"]),P=l.current+u,D=i.size();let I;return I="final"===F?tC(e,s)(A,V):null,new nC(P,D,"final"===F,I)},e.maxUploadRetryTime);return S.headers=v,S.body=x.uploadData(),S.progressCallback=a||null,S.errorHandler=Z_(n),S}(this._ref._location,this._ref.storage,i,this._blob,e,this._mappings,t,this._makeProgressCallback())}catch(l){return this._error=l,void this._transition("error")}const a=this._ref.storage._makeRequest(o,Hl,r,s,!1);this._request=a,a.getPromise().then(l=>{this._increaseMultiplier(),this._request=void 0,this._updateProgress(l.current),l.finalized?(this._metadata=l.metadata,this._transition("success")):this.completeTransitions_()},this._errorHandler)})}_increaseMultiplier(){262144*this._chunkMultiplier*2<33554432&&(this._chunkMultiplier*=2)}_fetchMetadata(){this._resolveToken((e,t)=>{const i=OX(this._ref.storage,this._ref._location,this._mappings),r=this._ref.storage._makeRequest(i,Hl,e,t);this._request=r,r.getPromise().then(s=>{this._request=void 0,this._metadata=s,this._transition("success")},this._metadataErrorHandler)})}_oneShotUpload(){this._resolveToken((e,t)=>{const i=function LX(n,e,t,i,r){const s=e.bucketOnlyServerUrl(),o={"X-Goog-Upload-Protocol":"multipart"},l=function a(){let S="";for(let A=0;A<2;A++)S+=Math.random().toString().slice(2);return S}();o["Content-Type"]="multipart/related; boundary="+l;const c=FX(e,i,r),u=VL(c,t),m=Pc.getBlob("--"+l+"\r\nContent-Type: application/json; charset=utf-8\r\n\r\n"+u+"\r\n--"+l+"\r\nContent-Type: "+c.contentType+"\r\n\r\n",i,"\r\n--"+l+"--");if(null===m)throw xX();const v={name:c.fullPath},x=Yu(s,n.host,n._protocol),w=n.maxUploadRetryTime,T=new kc(x,"POST",tC(n,t),w);return T.urlParams=v,T.headers=o,T.body=m.uploadData(),T.errorHandler=Z_(e),T}(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),r=this._ref.storage._makeRequest(i,Hl,e,t);this._request=r,r.getPromise().then(s=>{this._request=void 0,this._metadata=s,this._updateProgress(this._blob.size()),this._transition("success")},this._errorHandler)})}_updateProgress(e){const t=this._transferred;this._transferred=e,this._transferred!==t&&this._notifyObservers()}_transition(e){if(this._state!==e)switch(e){case"canceling":case"pausing":this._state=e,void 0!==this._request?this._request.cancel():this.pendingTimeout&&(clearTimeout(this.pendingTimeout),this.pendingTimeout=void 0,this.completeTransitions_());break;case"running":const t="paused"===this._state;this._state=e,t&&(this._notifyObservers(),this._start());break;case"paused":case"error":case"success":this._state=e,this._notifyObservers();break;case"canceled":this._error=bX(),this._state=e,this._notifyObservers()}}completeTransitions_(){switch(this._state){case"pausing":this._transition("paused");break;case"canceling":this._transition("canceled");break;case"running":this._start()}}get snapshot(){const e=BL(this._state);return{bytesTransferred:this._transferred,totalBytes:this._blob.size(),state:e,metadata:this._metadata,task:this,ref:this._ref}}on(e,t,i,r){const s=new PMe(t||void 0,i||void 0,r||void 0);return this._addObserver(s),()=>{this._removeObserver(s)}}then(e,t){return this._promise.then(e,t)}catch(e){return this.then(null,e)}_addObserver(e){this._observers.push(e),this._notifyObserver(e)}_removeObserver(e){const t=this._observers.indexOf(e);-1!==t&&this._observers.splice(t,1)}_notifyObservers(){this._finishPromise(),this._observers.slice().forEach(t=>{this._notifyObserver(t)})}_finishPromise(){if(void 0!==this._resolve){let e=!0;switch(BL(this._state)){case Zo.SUCCESS:J_(this._resolve.bind(null,this.snapshot))();break;case Zo.CANCELED:case Zo.ERROR:J_(this._reject.bind(null,this._error))();break;default:e=!1}e&&(this._resolve=void 0,this._reject=void 0)}}_notifyObserver(e){switch(BL(this._state)){case Zo.RUNNING:case Zo.PAUSED:e.next&&J_(e.next.bind(e,this.snapshot))();break;case Zo.SUCCESS:e.complete&&J_(e.complete.bind(e))();break;default:e.error&&J_(e.error.bind(e,this._error))()}}resume(){const e="paused"===this._state||"pausing"===this._state;return e&&this._transition("running"),e}pause(){const e="running"===this._state;return e&&this._transition("pausing"),e}cancel(){const e="running"===this._state||"pausing"===this._state;return e&&this._transition("canceling"),e}}class Tp{constructor(e,t){this._service=e,this._location=t instanceof Co?t:Co.makeFromUrl(t,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,t){return new Tp(e,t)}get root(){const e=new Co(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return DX(this._location.path)}get storage(){return this._service}get parent(){const e=function hMe(n){if(0===n.length)return null;const e=n.lastIndexOf("/");return-1===e?"":n.slice(0,e)}(this._location.path);if(null===e)return null;const t=new Co(this._location.bucket,e);return new Tp(this._service,t)}_throwIfRoot(e){if(""===this._location.path)throw EX(e)}}function HX(n,e,t){return zL.apply(this,arguments)}function zL(){return(zL=(0,Me.A)(function*(n,e,t){const r=yield GX(n,{pageToken:t});e.prefixes.push(...r.prefixes),e.items.push(...r.items),null!=r.nextPageToken&&(yield HX(n,e,r.nextPageToken))})).apply(this,arguments)}function GX(n,e){null!=e&&"number"==typeof e.maxResults&&OL("options.maxResults",1,1e3,e.maxResults);const t=e||{},i=EMe(n.storage,n._location,"/",t.pageToken,t.maxResults);return n.storage.makeRequestWithTokens(i,Hl)}function $Me(n){n._throwIfRoot("getDownloadURL");const e=function TMe(n,e,t){const r=Yu(e.fullServerUrl(),n.host,n._protocol),o=n.maxOperationRetryTime,a=new kc(r,"GET",function wMe(n,e){return function t(i,r){const s=RX(n,r,e);return Oc(null!==s),function vMe(n,e,t,i){const r=LL(e);if(null===r||!ZI(r.downloadTokens))return null;const s=r.downloadTokens;if(0===s.length)return null;const o=encodeURIComponent;return s.split(",").map(c=>{const d=n.fullPath;return Yu("/b/"+o(n.bucket)+"/o/"+o(d),t,i)+SX({alt:"media",token:c})})[0]}(s,r,n.host,n._protocol)}}(n,t),o);return a.errorHandler=yx(e),a}(n.storage,n._location,vx());return n.storage.makeRequestWithTokens(e,Hl).then(t=>{if(null===t)throw function WCe(){return new jr(Ur.NO_DOWNLOAD_URL,"The given file does not have any download URLs.")}();return t})}function WX(n,e){const t=function fMe(n,e){const t=e.split("/").filter(i=>i.length>0).join("/");return 0===n.length?t:n+"/"+t}(n._location.path,e),i=new Co(n._location.bucket,t);return new Tp(n.storage,i)}function jX(n,e){if(n instanceof HL){const t=n;if(null==t._bucket)throw function HCe(){return new jr(Ur.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+vX+"' property when initializing the app?")}();const i=new Tp(t,t._bucket);return null!=e?jX(i,e):i}return void 0!==e?WX(n,e):n}function YMe(n,e){if(e&&function XMe(n){return/^[A-Za-z]+:\/\//.test(n)}(e)){if(n instanceof HL)return function KMe(n,e){return new Tp(n,e)}(n,e);throw Y_("To use ref(service, url), the first argument must be a Storage instance.")}return jX(n,e)}function $X(n,e){const t=e?.[vX];return null==t?null:Co.makeFromBucketSpec(t,n)}class HL{constructor(e,t,i,r,s){this.app=e,this._authProvider=t,this._appCheckProvider=i,this._url=r,this._firebaseVersion=s,this._bucket=null,this._host=_X,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=12e4,this._maxUploadRetryTime=6e5,this._requests=new Set,this._bucket=null!=r?Co.makeFromBucketSpec(r,this._host):$X(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._bucket=null!=this._url?Co.makeFromBucketSpec(this._url,e):$X(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){OL("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){OL("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}_getAuthToken(){var e=this;return(0,Me.A)(function*(){if(e._overrideAuthToken)return e._overrideAuthToken;const t=e._authProvider.getImmediate({optional:!0});if(t){const i=yield t.getToken();if(null!==i)return i.accessToken}return null})()}_getAppCheckToken(){var e=this;return(0,Me.A)(function*(){const t=e._appCheckProvider.getImmediate({optional:!0});return t?(yield t.getToken()).token:null})()}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new Tp(this,e)}_makeRequest(e,t,i,r,s=!0){if(this._deleted)return new $Ce(wX());{const o=function iMe(n,e,t,i,r,s,o=!0){const a=SX(n.urlParams),l=n.url+a,c=Object.assign({},n.headers);return function tMe(n,e){e&&(n["X-Firebase-GMPID"]=e)}(c,e),function JCe(n,e){null!==e&&e.length>0&&(n.Authorization="Firebase "+e)}(c,t),function eMe(n,e){n["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}(c,s),function nMe(n,e){null!==e&&(n["X-Firebase-AppCheck"]=e)}(c,i),new ZCe(l,n.method,c,n.body,n.successCodes,n.additionalRetryCodes,n.handler,n.errorHandler,n.timeout,n.progressCallback,r,o)}(e,this._appId,i,r,t,this._firebaseVersion,s);return this._requests.add(o),o.getPromise().then(()=>this._requests.delete(o),()=>this._requests.delete(o)),o}}makeRequestWithTokens(e,t){var i=this;return(0,Me.A)(function*(){const[r,s]=yield Promise.all([i._getAuthToken(),i._getAppCheckToken()]);return i._makeRequest(e,t,r,s).getPromise()})()}}const qX="@firebase/storage";function YX(n,e){return YMe(n=(0,ii.Ku)(n),e)}function oDe(n,{instanceIdentifier:e}){const t=n.getProvider("app").getImmediate(),i=n.getProvider("auth-internal"),r=n.getProvider("app-check-internal");return new HL(t,i,r,e,pc.SDK_VERSION)}!function aDe(){(0,pc._registerComponent)(new PT.uA("storage",oDe,"PUBLIC").setMultipleInstances(!0)),(0,pc.registerVersion)(qX,"0.13.2",""),(0,pc.registerVersion)(qX,"0.13.2","esm2017")}();class iC{constructor(e,t,i){this._delegate=e,this.task=t,this.ref=i}get bytesTransferred(){return this._delegate.bytesTransferred}get metadata(){return this._delegate.metadata}get state(){return this._delegate.state}get totalBytes(){return this._delegate.totalBytes}}class ZX{constructor(e,t){this._delegate=e,this._ref=t,this.cancel=this._delegate.cancel.bind(this._delegate),this.catch=this._delegate.catch.bind(this._delegate),this.pause=this._delegate.pause.bind(this._delegate),this.resume=this._delegate.resume.bind(this._delegate)}get snapshot(){return new iC(this._delegate.snapshot,this,this._ref)}then(e,t){return this._delegate.then(i=>{if(e)return e(new iC(i,this,this._ref))},t)}on(e,t,i,r){let s;return t&&(s="function"==typeof t?o=>t(new iC(o,this,this._ref)):{next:t.next?o=>t.next(new iC(o,this,this._ref)):void 0,complete:t.complete||void 0,error:t.error||void 0}),this._delegate.on(e,s,i||void 0,r||void 0)}}class JX{constructor(e,t){this._delegate=e,this._service=t}get prefixes(){return this._delegate.prefixes.map(e=>new Qu(e,this._service))}get items(){return this._delegate.items.map(e=>new Qu(e,this._service))}get nextPageToken(){return this._delegate.nextPageToken||null}}class Qu{constructor(e,t){this._delegate=e,this.storage=t}get name(){return this._delegate.name}get bucket(){return this._delegate.bucket}get fullPath(){return this._delegate.fullPath}toString(){return this._delegate.toString()}child(e){const t=function sDe(n,e){return WX(n,e)}(this._delegate,e);return new Qu(t,this.storage)}get root(){return new Qu(this._delegate.root,this.storage)}get parent(){const e=this._delegate.parent;return null==e?null:new Qu(e,this.storage)}put(e,t){return this._throwIfRoot("put"),new ZX(function ZMe(n,e,t){return function zMe(n,e,t){return n._throwIfRoot("uploadBytesResumable"),new BX(n,new Pc(e),t)}(n=(0,ii.Ku)(n),e,t)}(this._delegate,e,t),this)}putString(e,t=ja.RAW,i){this._throwIfRoot("putString");const r=FL(t,e),s=Object.assign({},i);return null==s.contentType&&null!=r.contentType&&(s.contentType=r.contentType),new ZX(new BX(this._delegate,new Pc(r.data,!0),s),this)}listAll(){return function nDe(n){return function GMe(n){const e={prefixes:[],items:[]};return HX(n,e).then(()=>e)}(n=(0,ii.Ku)(n))}(this._delegate).then(e=>new JX(e,this.storage))}list(e){return function tDe(n,e){return GX(n=(0,ii.Ku)(n),e)}(this._delegate,e||void 0).then(t=>new JX(t,this.storage))}getMetadata(){return function JMe(n){return function WMe(n){n._throwIfRoot("getMetadata");const e=OX(n.storage,n._location,vx());return n.storage.makeRequestWithTokens(e,Hl)}(n=(0,ii.Ku)(n))}(this._delegate)}updateMetadata(e){return function eDe(n,e){return function jMe(n,e){n._throwIfRoot("updateMetadata");const t=function SMe(n,e,t,i){const s=Yu(e.fullServerUrl(),n.host,n._protocol),a=VL(t,i),c=n.maxOperationRetryTime,u=new kc(s,"PATCH",tC(n,i),c);return u.headers={"Content-Type":"application/json; charset=utf-8"},u.body=a,u.errorHandler=yx(e),u}(n.storage,n._location,e,vx());return n.storage.makeRequestWithTokens(t,Hl)}(n=(0,ii.Ku)(n),e)}(this._delegate,e)}getDownloadURL(){return function iDe(n){return $Me(n=(0,ii.Ku)(n))}(this._delegate)}delete(){return this._throwIfRoot("delete"),function rDe(n){return function qMe(n){n._throwIfRoot("deleteObject");const e=function AMe(n,e){const i=Yu(e.fullServerUrl(),n.host,n._protocol),a=new kc(i,"DELETE",function o(l,c){},n.maxOperationRetryTime);return a.successCodes=[200,204],a.errorHandler=yx(e),a}(n.storage,n._location);return n.storage.makeRequestWithTokens(e,Hl)}(n=(0,ii.Ku)(n))}(this._delegate)}_throwIfRoot(e){if(""===this._delegate._location.path)throw EX(e)}}class eK{constructor(e,t){this.app=e,this._delegate=t}get maxOperationRetryTime(){return this._delegate.maxOperationRetryTime}get maxUploadRetryTime(){return this._delegate.maxUploadRetryTime}ref(e){if(tK(e))throw Y_("ref() expected a child path but got a URL, use refFromURL instead.");return new Qu(YX(this._delegate,e),this)}refFromURL(e){if(!tK(e))throw Y_("refFromURL() expected a full URL but got a child path, use ref() instead.");try{Co.makeFromUrl(e,this._delegate.host)}catch{throw Y_("refFromUrl() expected a valid full URL but got an invalid one.")}return new Qu(YX(this._delegate,e),this)}setMaxUploadRetryTime(e){this._delegate.maxUploadRetryTime=e}setMaxOperationRetryTime(e){this._delegate.maxOperationRetryTime=e}useEmulator(e,t,i={}){!function QX(n,e,t,i={}){!function QMe(n,e,t,i={}){n.host=`${e}:${t}`,n._protocol="http";const{mockUserToken:r}=i;r&&(n._overrideAuthToken="string"==typeof r?r:(0,ii.Fy)(r,n.app.options.projectId))}(n,e,t,i)}(this._delegate,e,t,i)}}function tK(n){return/^[A-Za-z]+:\/\//.test(n)}function dDe(n,{instanceIdentifier:e}){const t=n.getProvider("app-compat").getImmediate(),i=n.getProvider("storage").getImmediate({identifier:e});return new eK(t,i)}function nK(n){const e=function fDe(n){return new xt(e=>{const t=o=>e.next(o);t(n.snapshot);const s=n.on("state_changed",t);return n.then(o=>{t(o),e.complete()},o=>{t(n.snapshot),(o=>{e.error(o)})(o)}),function(){s()}}).pipe(GS(0))}(n);return{task:n,then:n.then.bind(n),catch:n.catch.bind(n),pause:n.pause.bind(n),cancel:n.cancel.bind(n),resume:n.resume.bind(n),snapshotChanges:()=>e,percentageChanges:()=>e.pipe(Ge(t=>t.bytesTransferred/t.totalBytes*100))}}function rC(n){return{getDownloadURL:()=>ne(void 0).pipe(HH,Mt(()=>n.getDownloadURL()),Ho),getMetadata:()=>ne(void 0).pipe(HH,Mt(()=>n.getMetadata()),Ho),delete:()=>q(n.delete()),child:e=>rC(n.child(e)),updateMetadata:e=>q(n.updateMetadata(e)),put:(e,t)=>nK(n.put(e,t)),putString:(e,t,i)=>nK(n.putString(e,t,i)),list:e=>q(n.list(e)),listAll:()=>q(n.listAll())}}!function hDe(n){const e={TaskState:Zo,TaskEvent:RMe,StringFormat:ja,Storage:eK,Reference:Qu};n.INTERNAL.registerComponent(new PT.uA("storage-compat",dDe,"PUBLIC").setServiceProps(e).setMultipleInstances(!0)),n.registerVersion("@firebase/storage-compat","0.3.12")}(mc.A);const pDe=new Fe("angularfire2.storageBucket"),mDe=new Fe("angularfire2.storage.maxUploadRetryTime"),gDe=new Fe("angularfire2.storage.maxOperationRetryTime"),_De=new Fe("angularfire2.storage.use-emulator");let vDe=(()=>{class n{storage;constructor(t,i,r,s,o,a,l,c,u,d){const p=RT(t,o,i);this.storage=xR(`${p.name}.storage.${r}`,"AngularFireStorage",p.name,()=>{const m=o.runOutsideAngular(()=>p.storage(r||void 0)),v=u;return v&&m.useEmulator(...v),l&&m.setMaxUploadRetryTime(l),c&&m.setMaxOperationRetryTime(c),m},[l,c])}ref(t){return rC(this.storage.ref(t))}refFromURL(t){return rC(this.storage.refFromURL(t))}upload(t,i,r){return rC(this.storage.ref(t)).put(i,r)}static \u0275fac=function(i){return new(i||n)(ue(T0),ue(S0,8),ue(pDe,8),ue(al),ue(mn),ue(bR),ue(mDe,8),ue(gDe,8),ue(_De,8),ue(yR,8))};static \u0275prov=dt({token:n,factory:n.\u0275fac,providedIn:"any"})}return n})(),yDe=(()=>{class n{static \u0275fac=function(i){return new(i||n)};static \u0275mod=ni({type:n});static \u0275inj=jn({})}return n})(),bDe=(()=>{class n{constructor(){mc.A.registerVersion("angularfire",DT.full,"gcs-compat")}static \u0275fac=function(i){return new(i||n)};static \u0275mod=ni({type:n});static \u0275inj=jn({providers:[vDe],imports:[yDe]})}return n})();const xDe_firebaseConfig={apiKey:"AIzaSyDElSh3vud80KLWufNHTdq3iYN0ajg8SJE",authDomain:"file-transfer-35211.firebaseapp.com",projectId:"file-transfer-35211",storageBucket:"file-transfer-35211.firebasestorage.app",messagingSenderId:"830182675622",appId:"1:830182675622:web:7b52c4060e8b6079169067",measurementId:"G-34LMV2Z6GN"};let wDe=(()=>{class n{static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275mod=ni({type:n,bootstrap:[nAe]})}static{this.\u0275inj=jn({imports:[Iz,KSe,cve,QIe,RCe,Rle.initializeApp(xDe_firebaseConfig),bDe,cfe,kfe,cpe.forRoot({positionClass:"toast-top-right",preventDuplicates:!0,timeOut:2e3})]})}}return n})();Mse().bootstrapModule(wDe).catch(n=>console.error(n))},110:(wa,fs)=>{var Cn,_n,Gt=function(){var ve=function(ot,ft){var ke=ot,We=Ii[ft],$=null,te=0,qe=null,Be=[],nt={},xt=function(ge,Ie){$=function(ae){for(var De=new Array(ae),Ve=0;Ve<ae;Ve+=1){De[Ve]=new Array(ae);for(var At=0;At<ae;At+=1)De[Ve][At]=null}return De}(te=4*ke+17),Pn(0,0),Pn(te-7,0),Pn(0,te-7),sr(),Fi(),me(ge,Ie),ke>=7&&Q(ge),null==qe&&(qe=ye(ke,We,Be)),Ae(qe,Ie)},Pn=function(ge,Ie){for(var ae=-1;ae<=7;ae+=1)if(!(ge+ae<=-1||te<=ge+ae))for(var De=-1;De<=7;De+=1)Ie+De<=-1||te<=Ie+De||($[ge+ae][Ie+De]=0<=ae&&ae<=6&&(0==De||6==De)||0<=De&&De<=6&&(0==ae||6==ae)||2<=ae&&ae<=4&&2<=De&&De<=4)},Fi=function(){for(var ge=8;ge<te-8;ge+=1)null==$[ge][6]&&($[ge][6]=ge%2==0);for(var Ie=8;Ie<te-8;Ie+=1)null==$[6][Ie]&&($[6][Ie]=Ie%2==0)},sr=function(){for(var ge=Ci.getPatternPosition(ke),Ie=0;Ie<ge.length;Ie+=1)for(var ae=0;ae<ge.length;ae+=1){var De=ge[Ie],Ve=ge[ae];if(null==$[De][Ve])for(var At=-2;At<=2;At+=1)for(var Tt=-2;Tt<=2;Tt+=1)$[De+At][Ve+Tt]=-2==At||2==At||-2==Tt||2==Tt||0==At&&0==Tt}},Q=function(ge){for(var Ie=Ci.getBCHTypeNumber(ke),ae=0;ae<18;ae+=1){var De=!ge&&1==(Ie>>ae&1);$[Math.floor(ae/3)][ae%3+te-8-3]=De}for(ae=0;ae<18;ae+=1)De=!ge&&1==(Ie>>ae&1),$[ae%3+te-8-3][Math.floor(ae/3)]=De},me=function(ge,Ie){for(var De=Ci.getBCHTypeInfo(We<<3|Ie),Ve=0;Ve<15;Ve+=1){var At=!ge&&1==(De>>Ve&1);Ve<6?$[Ve][8]=At:Ve<8?$[Ve+1][8]=At:$[te-15+Ve][8]=At}for(Ve=0;Ve<15;Ve+=1)At=!ge&&1==(De>>Ve&1),Ve<8?$[8][te-Ve-1]=At:Ve<9?$[8][15-Ve-1+1]=At:$[8][15-Ve-1]=At;$[te-8][8]=!ge},Ae=function(ge,Ie){for(var ae=-1,De=te-1,Ve=7,At=0,Tt=Ci.getMaskFunction(Ie),Vt=te-1;Vt>0;Vt-=2)for(6==Vt&&(Vt-=1);;){for(var Nn=0;Nn<2;Nn+=1)if(null==$[De][Vt-Nn]){var fi=!1;At<ge.length&&(fi=1==(ge[At]>>>Ve&1)),Tt(De,Vt-Nn)&&(fi=!fi),$[De][Vt-Nn]=fi,-1==(Ve-=1)&&(At+=1,Ve=7)}if((De+=ae)<0||te<=De){De-=ae,ae=-ae;break}}},ye=function(ge,Ie,ae){for(var De=rt.getRSBlocks(ge,Ie),Ve=Xt(),At=0;At<ae.length;At+=1){var Tt=ae[At];Ve.put(Tt.getMode(),4),Ve.put(Tt.getLength(),Ci.getLengthInBits(Tt.getMode(),ge)),Tt.write(Ve)}var Vt=0;for(At=0;At<De.length;At+=1)Vt+=De[At].dataCount;if(Ve.getLengthInBits()>8*Vt)throw"code length overflow. ("+Ve.getLengthInBits()+">"+8*Vt+")";for(Ve.getLengthInBits()+4<=8*Vt&&Ve.put(0,4);Ve.getLengthInBits()%8!=0;)Ve.putBit(!1);for(;!(Ve.getLengthInBits()>=8*Vt||(Ve.put(236,8),Ve.getLengthInBits()>=8*Vt));)Ve.put(17,8);return function(ge,Ie){for(var ae=0,De=0,Ve=0,At=new Array(Ie.length),Tt=new Array(Ie.length),Vt=0;Vt<Ie.length;Vt+=1){var Nn=Ie[Vt].dataCount,fi=Ie[Vt].totalCount-Nn;De=Math.max(De,Nn),Ve=Math.max(Ve,fi),At[Vt]=new Array(Nn);for(var un=0;un<At[Vt].length;un+=1)At[Vt][un]=255&ge.getBuffer()[un+ae];ae+=Nn;var Mi=Ci.getErrorCorrectPolynomial(fi),Ea=Ue(At[Vt],Mi.getLength()-1).mod(Mi);for(Tt[Vt]=new Array(Mi.getLength()-1),un=0;un<Tt[Vt].length;un+=1){var Fc=un+Ea.getLength()-Tt[Vt].length;Tt[Vt][un]=Fc>=0?Ea.getAt(Fc):0}}var Ya=0;for(un=0;un<Ie.length;un+=1)Ya+=Ie[un].totalCount;var ao=new Array(Ya),ea=0;for(un=0;un<De;un+=1)for(Vt=0;Vt<Ie.length;Vt+=1)un<At[Vt].length&&(ao[ea]=At[Vt][un],ea+=1);for(un=0;un<Ve;un+=1)for(Vt=0;Vt<Ie.length;Vt+=1)un<Tt[Vt].length&&(ao[ea]=Tt[Vt][un],ea+=1);return ao}(Ve,De)};nt.addData=function(ge,Ie){var ae=null;switch(Ie=Ie||"Byte"){case"Numeric":ae=Kn(ge);break;case"Alphanumeric":ae=xi(ge);break;case"Byte":ae=ns(ge);break;case"Kanji":ae=wi(ge);break;default:throw"mode:"+Ie}Be.push(ae),qe=null},nt.isDark=function(ge,Ie){if(ge<0||te<=ge||Ie<0||te<=Ie)throw ge+","+Ie;return $[ge][Ie]},nt.getModuleCount=function(){return te},nt.make=function(){if(ke<1){for(var ge=1;ge<40;ge++){for(var Ie=rt.getRSBlocks(ge,We),ae=Xt(),De=0;De<Be.length;De++){var Ve=Be[De];ae.put(Ve.getMode(),4),ae.put(Ve.getLength(),Ci.getLengthInBits(Ve.getMode(),ge)),Ve.write(ae)}var At=0;for(De=0;De<Ie.length;De++)At+=Ie[De].dataCount;if(ae.getLengthInBits()<=8*At)break}ke=ge}xt(!1,function(){for(var ge=0,Ie=0,ae=0;ae<8;ae+=1){xt(!0,ae);var De=Ci.getLostPoint(nt);(0==ae||ge>De)&&(ge=De,Ie=ae)}return Ie}())},nt.createTableTag=function(ge,Ie){ge=ge||2;var ae="";ae+='<table style="',ae+=" border-width: 0px; border-style: none;",ae+=" border-collapse: collapse;",ae+=" padding: 0px; margin: "+(Ie=typeof Ie>"u"?4*ge:Ie)+"px;",ae+='">',ae+="<tbody>";for(var De=0;De<nt.getModuleCount();De+=1){ae+="<tr>";for(var Ve=0;Ve<nt.getModuleCount();Ve+=1)ae+='<td style="',ae+=" border-width: 0px; border-style: none;",ae+=" border-collapse: collapse;",ae+=" padding: 0px; margin: 0px;",ae+=" width: "+ge+"px;",ae+=" height: "+ge+"px;",ae+=" background-color: ",ae+=nt.isDark(De,Ve)?"#000000":"#ffffff",ae+=";",ae+='"/>';ae+="</tr>"}return(ae+="</tbody>")+"</table>"},nt.createSvgTag=function(ge,Ie,ae,De){var Ve={};"object"==typeof arguments[0]&&(ge=(Ve=arguments[0]).cellSize,Ie=Ve.margin,ae=Ve.alt,De=Ve.title),ge=ge||2,Ie=typeof Ie>"u"?4*ge:Ie,(ae="string"==typeof ae?{text:ae}:ae||{}).text=ae.text||null,ae.id=ae.text?ae.id||"qrcode-description":null,(De="string"==typeof De?{text:De}:De||{}).text=De.text||null,De.id=De.text?De.id||"qrcode-title":null;var Tt,Nn,fi,Mi,At=nt.getModuleCount()*ge+2*Ie,un="";for(Mi="l"+ge+",0 0,"+ge+" -"+ge+",0 0,-"+ge+"z ",un+='<svg version="1.1" xmlns="http://www.w3.org/2000/svg"',un+=Ve.scalable?"":' width="'+At+'px" height="'+At+'px"',un+=' viewBox="0 0 '+At+" "+At+'" ',un+=' preserveAspectRatio="xMinYMin meet"',un+=De.text||ae.text?' role="img" aria-labelledby="'+Qe([De.id,ae.id].join(" ").trim())+'"':"",un+=">",un+=De.text?'<title id="'+Qe(De.id)+'">'+Qe(De.text)+"</title>":"",un+=ae.text?'<description id="'+Qe(ae.id)+'">'+Qe(ae.text)+"</description>":"",un+='<rect width="100%" height="100%" fill="white" cx="0" cy="0"/>',un+='<path d="',Nn=0;Nn<nt.getModuleCount();Nn+=1)for(fi=Nn*ge+Ie,Tt=0;Tt<nt.getModuleCount();Tt+=1)nt.isDark(Nn,Tt)&&(un+="M"+(Tt*ge+Ie)+","+fi+Mi);return(un+='" stroke="transparent" fill="black"/>')+"</svg>"},nt.createDataURL=function(ge,Ie){ge=ge||2,Ie=typeof Ie>"u"?4*ge:Ie;var ae=nt.getModuleCount()*ge+2*Ie,De=Ie,Ve=ae-Ie;return tr(ae,ae,function(At,Tt){if(De<=At&&At<Ve&&De<=Tt&&Tt<Ve){var Vt=Math.floor((At-De)/ge),Nn=Math.floor((Tt-De)/ge);return nt.isDark(Nn,Vt)?0:1}return 1})},nt.createImgTag=function(ge,Ie,ae){ge=ge||2,Ie=typeof Ie>"u"?4*ge:Ie;var De=nt.getModuleCount()*ge+2*Ie,Ve="";return Ve+="<img",Ve+=' src="',Ve+=nt.createDataURL(ge,Ie),Ve+='"',Ve+=' width="',Ve+=De,Ve+='"',Ve+=' height="',Ve+=De,Ve+='"',ae&&(Ve+=' alt="',Ve+=Qe(ae),Ve+='"'),Ve+"/>"};var Qe=function(ge){for(var Ie="",ae=0;ae<ge.length;ae+=1){var De=ge.charAt(ae);switch(De){case"<":Ie+="&lt;";break;case">":Ie+="&gt;";break;case"&":Ie+="&amp;";break;case'"':Ie+="&quot;";break;default:Ie+=De}}return Ie};return nt.createASCII=function(ge,Ie){if((ge=ge||1)<2)return function(ge){ge=typeof ge>"u"?2:ge;var At,Tt,Vt,Nn,fi,ae=1*nt.getModuleCount()+2*ge,De=ge,Ve=ae-ge,un={"\u2588\u2588":"\u2588","\u2588 ":"\u2580"," \u2588":"\u2584","  ":" "},Mi={"\u2588\u2588":"\u2580","\u2588 ":"\u2580"," \u2588":" ","  ":" "},$r="";for(At=0;At<ae;At+=2){for(Vt=Math.floor((At-De)/1),Nn=Math.floor((At+1-De)/1),Tt=0;Tt<ae;Tt+=1)fi="\u2588",De<=Tt&&Tt<Ve&&De<=At&&At<Ve&&nt.isDark(Vt,Math.floor((Tt-De)/1))&&(fi=" "),De<=Tt&&Tt<Ve&&De<=At+1&&At+1<Ve&&nt.isDark(Nn,Math.floor((Tt-De)/1))?fi+=" ":fi+="\u2588",$r+=ge<1&&At+1>=Ve?Mi[fi]:un[fi];$r+="\n"}return ae%2&&ge>0?$r.substring(0,$r.length-ae-1)+Array(ae+1).join("\u2580"):$r.substring(0,$r.length-1)}(Ie);ge-=1,Ie=typeof Ie>"u"?2*ge:Ie;var At,Tt,Vt,Nn,ae=nt.getModuleCount()*ge+2*Ie,De=Ie,Ve=ae-Ie,fi=Array(ge+1).join("\u2588\u2588"),un=Array(ge+1).join("  "),Mi="",$r="";for(At=0;At<ae;At+=1){for(Vt=Math.floor((At-De)/ge),$r="",Tt=0;Tt<ae;Tt+=1)Nn=1,De<=Tt&&Tt<Ve&&De<=At&&At<Ve&&nt.isDark(Vt,Math.floor((Tt-De)/ge))&&(Nn=0),$r+=Nn?fi:un;for(Vt=0;Vt<ge;Vt+=1)Mi+=$r+"\n"}return Mi.substring(0,Mi.length-1)},nt.renderTo2dContext=function(ge,Ie){Ie=Ie||2;for(var ae=nt.getModuleCount(),De=0;De<ae;De++)for(var Ve=0;Ve<ae;Ve++)ge.fillStyle=nt.isDark(De,Ve)?"black":"white",ge.fillRect(De*Ie,Ve*Ie,Ie,Ie)},nt};ve.stringToBytesFuncs={default:function(ot){for(var ft=[],st=0;st<ot.length;st+=1){var Oe=ot.charCodeAt(st);ft.push(255&Oe)}return ft}},ve.stringToBytes=ve.stringToBytesFuncs.default,ve.createStringToBytes=function(ot,ft){var st=function(){for(var ke=is(ot),We=function(){var Fi=ke.read();if(-1==Fi)throw"eof";return Fi},$=0,te={};;){var qe=ke.read();if(-1==qe)break;var Be=We(),nt=We(),xt=We();te[String.fromCharCode(qe<<8|Be)]=nt<<8|xt,$+=1}if($!=ft)throw $+" != "+ft;return te}(),Oe="?".charCodeAt(0);return function(ke){for(var We=[],$=0;$<ke.length;$+=1){var te=ke.charCodeAt($);if(te<128)We.push(te);else{var qe=st[ke.charAt($)];"number"==typeof qe?(255&qe)==qe?We.push(qe):(We.push(qe>>>8),We.push(255&qe)):We.push(Oe)}}return We}};var ot,ke,We,Ii={L:1,M:0,Q:3,H:2},Ci=(ot=[[],[6,18],[6,22],[6,26],[6,30],[6,34],[6,22,38],[6,24,42],[6,26,46],[6,28,50],[6,30,54],[6,32,58],[6,34,62],[6,26,46,66],[6,26,48,70],[6,26,50,74],[6,30,54,78],[6,30,56,82],[6,30,58,86],[6,34,62,90],[6,28,50,72,94],[6,26,50,74,98],[6,30,54,78,102],[6,28,54,80,106],[6,32,58,84,110],[6,30,58,86,114],[6,34,62,90,118],[6,26,50,74,98,122],[6,30,54,78,102,126],[6,26,52,78,104,130],[6,30,56,82,108,134],[6,34,60,86,112,138],[6,30,58,86,114,142],[6,34,62,90,118,146],[6,30,54,78,102,126,150],[6,24,50,76,102,128,154],[6,28,54,80,106,132,158],[6,32,58,84,110,136,162],[6,26,54,82,110,138,166],[6,30,58,86,114,142,170]],We=function($){for(var te=0;0!=$;)te+=1,$>>>=1;return te},(ke={}).getBCHTypeInfo=function($){for(var te=$<<10;We(te)-We(1335)>=0;)te^=1335<<We(te)-We(1335);return 21522^($<<10|te)},ke.getBCHTypeNumber=function($){for(var te=$<<12;We(te)-We(7973)>=0;)te^=7973<<We(te)-We(7973);return $<<12|te},ke.getPatternPosition=function($){return ot[$-1]},ke.getMaskFunction=function($){switch($){case 0:return function(te,qe){return(te+qe)%2==0};case 1:return function(te,qe){return te%2==0};case 2:return function(te,qe){return qe%3==0};case 3:return function(te,qe){return(te+qe)%3==0};case 4:return function(te,qe){return(Math.floor(te/2)+Math.floor(qe/3))%2==0};case 5:return function(te,qe){return te*qe%2+te*qe%3==0};case 6:return function(te,qe){return(te*qe%2+te*qe%3)%2==0};case 7:return function(te,qe){return(te*qe%3+(te+qe)%2)%2==0};default:throw"bad maskPattern:"+$}},ke.getErrorCorrectPolynomial=function($){for(var te=Ue([1],0),qe=0;qe<$;qe+=1)te=te.multiply(Ue([1,tn.gexp(qe)],0));return te},ke.getLengthInBits=function($,te){if(1<=te&&te<10)switch($){case 1:return 10;case 2:return 9;case 4:case 8:return 8;default:throw"mode:"+$}else if(te<27)switch($){case 1:return 12;case 2:return 11;case 4:return 16;case 8:return 10;default:throw"mode:"+$}else{if(!(te<41))throw"type:"+te;switch($){case 1:return 14;case 2:return 13;case 4:return 16;case 8:return 12;default:throw"mode:"+$}}},ke.getLostPoint=function($){for(var te=$.getModuleCount(),qe=0,Be=0;Be<te;Be+=1)for(var nt=0;nt<te;nt+=1){for(var xt=0,Pn=$.isDark(Be,nt),Ei=-1;Ei<=1;Ei+=1)if(!(Be+Ei<0||te<=Be+Ei))for(var Fi=-1;Fi<=1;Fi+=1)nt+Fi<0||te<=nt+Fi||0==Ei&&0==Fi||Pn==$.isDark(Be+Ei,nt+Fi)&&(xt+=1);xt>5&&(qe+=3+xt-5)}for(Be=0;Be<te-1;Be+=1)for(nt=0;nt<te-1;nt+=1){var sr=0;$.isDark(Be,nt)&&(sr+=1),$.isDark(Be+1,nt)&&(sr+=1),$.isDark(Be,nt+1)&&(sr+=1),$.isDark(Be+1,nt+1)&&(sr+=1),(0==sr||4==sr)&&(qe+=3)}for(Be=0;Be<te;Be+=1)for(nt=0;nt<te-6;nt+=1)$.isDark(Be,nt)&&!$.isDark(Be,nt+1)&&$.isDark(Be,nt+2)&&$.isDark(Be,nt+3)&&$.isDark(Be,nt+4)&&!$.isDark(Be,nt+5)&&$.isDark(Be,nt+6)&&(qe+=40);for(nt=0;nt<te;nt+=1)for(Be=0;Be<te-6;Be+=1)$.isDark(Be,nt)&&!$.isDark(Be+1,nt)&&$.isDark(Be+2,nt)&&$.isDark(Be+3,nt)&&$.isDark(Be+4,nt)&&!$.isDark(Be+5,nt)&&$.isDark(Be+6,nt)&&(qe+=40);var Q=0;for(nt=0;nt<te;nt+=1)for(Be=0;Be<te;Be+=1)$.isDark(Be,nt)&&(Q+=1);return qe+Math.abs(100*Q/te/te-50)/5*10},ke),tn=function(){for(var ot=new Array(256),ft=new Array(256),st=0;st<8;st+=1)ot[st]=1<<st;for(st=8;st<256;st+=1)ot[st]=ot[st-4]^ot[st-5]^ot[st-6]^ot[st-8];for(st=0;st<255;st+=1)ft[ot[st]]=st;var Oe={glog:function(ke){if(ke<1)throw"glog("+ke+")";return ft[ke]},gexp:function(ke){for(;ke<0;)ke+=255;for(;ke>=256;)ke-=255;return ot[ke]}};return Oe}();function Ue(ot,ft){if(typeof ot.length>"u")throw ot.length+"/"+ft;var st=function(){for(var ke=0;ke<ot.length&&0==ot[ke];)ke+=1;for(var We=new Array(ot.length-ke+ft),$=0;$<ot.length-ke;$+=1)We[$]=ot[$+ke];return We}(),Oe={getAt:function(ke){return st[ke]},getLength:function(){return st.length},multiply:function(ke){for(var We=new Array(Oe.getLength()+ke.getLength()-1),$=0;$<Oe.getLength();$+=1)for(var te=0;te<ke.getLength();te+=1)We[$+te]^=tn.gexp(tn.glog(Oe.getAt($))+tn.glog(ke.getAt(te)));return Ue(We,0)},mod:function(ke){if(Oe.getLength()-ke.getLength()<0)return Oe;for(var We=tn.glog(Oe.getAt(0))-tn.glog(ke.getAt(0)),$=new Array(Oe.getLength()),te=0;te<Oe.getLength();te+=1)$[te]=Oe.getAt(te);for(te=0;te<ke.getLength();te+=1)$[te]^=tn.gexp(tn.glog(ke.getAt(te))+We);return Ue($,0).mod(ke)}};return Oe}var rt=function(){var ot=[[1,26,19],[1,26,16],[1,26,13],[1,26,9],[1,44,34],[1,44,28],[1,44,22],[1,44,16],[1,70,55],[1,70,44],[2,35,17],[2,35,13],[1,100,80],[2,50,32],[2,50,24],[4,25,9],[1,134,108],[2,67,43],[2,33,15,2,34,16],[2,33,11,2,34,12],[2,86,68],[4,43,27],[4,43,19],[4,43,15],[2,98,78],[4,49,31],[2,32,14,4,33,15],[4,39,13,1,40,14],[2,121,97],[2,60,38,2,61,39],[4,40,18,2,41,19],[4,40,14,2,41,15],[2,146,116],[3,58,36,2,59,37],[4,36,16,4,37,17],[4,36,12,4,37,13],[2,86,68,2,87,69],[4,69,43,1,70,44],[6,43,19,2,44,20],[6,43,15,2,44,16],[4,101,81],[1,80,50,4,81,51],[4,50,22,4,51,23],[3,36,12,8,37,13],[2,116,92,2,117,93],[6,58,36,2,59,37],[4,46,20,6,47,21],[7,42,14,4,43,15],[4,133,107],[8,59,37,1,60,38],[8,44,20,4,45,21],[12,33,11,4,34,12],[3,145,115,1,146,116],[4,64,40,5,65,41],[11,36,16,5,37,17],[11,36,12,5,37,13],[5,109,87,1,110,88],[5,65,41,5,66,42],[5,54,24,7,55,25],[11,36,12,7,37,13],[5,122,98,1,123,99],[7,73,45,3,74,46],[15,43,19,2,44,20],[3,45,15,13,46,16],[1,135,107,5,136,108],[10,74,46,1,75,47],[1,50,22,15,51,23],[2,42,14,17,43,15],[5,150,120,1,151,121],[9,69,43,4,70,44],[17,50,22,1,51,23],[2,42,14,19,43,15],[3,141,113,4,142,114],[3,70,44,11,71,45],[17,47,21,4,48,22],[9,39,13,16,40,14],[3,135,107,5,136,108],[3,67,41,13,68,42],[15,54,24,5,55,25],[15,43,15,10,44,16],[4,144,116,4,145,117],[17,68,42],[17,50,22,6,51,23],[19,46,16,6,47,17],[2,139,111,7,140,112],[17,74,46],[7,54,24,16,55,25],[34,37,13],[4,151,121,5,152,122],[4,75,47,14,76,48],[11,54,24,14,55,25],[16,45,15,14,46,16],[6,147,117,4,148,118],[6,73,45,14,74,46],[11,54,24,16,55,25],[30,46,16,2,47,17],[8,132,106,4,133,107],[8,75,47,13,76,48],[7,54,24,22,55,25],[22,45,15,13,46,16],[10,142,114,2,143,115],[19,74,46,4,75,47],[28,50,22,6,51,23],[33,46,16,4,47,17],[8,152,122,4,153,123],[22,73,45,3,74,46],[8,53,23,26,54,24],[12,45,15,28,46,16],[3,147,117,10,148,118],[3,73,45,23,74,46],[4,54,24,31,55,25],[11,45,15,31,46,16],[7,146,116,7,147,117],[21,73,45,7,74,46],[1,53,23,37,54,24],[19,45,15,26,46,16],[5,145,115,10,146,116],[19,75,47,10,76,48],[15,54,24,25,55,25],[23,45,15,25,46,16],[13,145,115,3,146,116],[2,74,46,29,75,47],[42,54,24,1,55,25],[23,45,15,28,46,16],[17,145,115],[10,74,46,23,75,47],[10,54,24,35,55,25],[19,45,15,35,46,16],[17,145,115,1,146,116],[14,74,46,21,75,47],[29,54,24,19,55,25],[11,45,15,46,46,16],[13,145,115,6,146,116],[14,74,46,23,75,47],[44,54,24,7,55,25],[59,46,16,1,47,17],[12,151,121,7,152,122],[12,75,47,26,76,48],[39,54,24,14,55,25],[22,45,15,41,46,16],[6,151,121,14,152,122],[6,75,47,34,76,48],[46,54,24,10,55,25],[2,45,15,64,46,16],[17,152,122,4,153,123],[29,74,46,14,75,47],[49,54,24,10,55,25],[24,45,15,46,46,16],[4,152,122,18,153,123],[13,74,46,32,75,47],[48,54,24,14,55,25],[42,45,15,32,46,16],[20,147,117,4,148,118],[40,75,47,7,76,48],[43,54,24,22,55,25],[10,45,15,67,46,16],[19,148,118,6,149,119],[18,75,47,31,76,48],[34,54,24,34,55,25],[20,45,15,61,46,16]],ft=function(ke,We){var $={};return $.totalCount=ke,$.dataCount=We,$},st={getRSBlocks:function(ke,We){var $=function(ke,We){switch(We){case Ii.L:return ot[4*(ke-1)+0];case Ii.M:return ot[4*(ke-1)+1];case Ii.Q:return ot[4*(ke-1)+2];case Ii.H:return ot[4*(ke-1)+3];default:return}}(ke,We);if(typeof $>"u")throw"bad rs block @ typeNumber:"+ke+"/errorCorrectionLevel:"+We;for(var te=$.length/3,qe=[],Be=0;Be<te;Be+=1)for(var nt=$[3*Be+0],xt=$[3*Be+1],Pn=$[3*Be+2],Ei=0;Ei<nt;Ei+=1)qe.push(ft(xt,Pn));return qe}};return st}(),Xt=function(){var ot=[],ft=0,st={getBuffer:function(){return ot},getAt:function(Oe){var ke=Math.floor(Oe/8);return 1==(ot[ke]>>>7-Oe%8&1)},put:function(Oe,ke){for(var We=0;We<ke;We+=1)st.putBit(1==(Oe>>>ke-We-1&1))},getLengthInBits:function(){return ft},putBit:function(Oe){var ke=Math.floor(ft/8);ot.length<=ke&&ot.push(0),Oe&&(ot[ke]|=128>>>ft%8),ft+=1}};return st},Kn=function(ot){var st=ot,Oe={getMode:function(){return 1},getLength:function($){return st.length},write:function($){for(var te=st,qe=0;qe+2<te.length;)$.put(ke(te.substring(qe,qe+3)),10),qe+=3;qe<te.length&&(te.length-qe==1?$.put(ke(te.substring(qe,qe+1)),4):te.length-qe==2&&$.put(ke(te.substring(qe,qe+2)),7))}},ke=function($){for(var te=0,qe=0;qe<$.length;qe+=1)te=10*te+We($.charAt(qe));return te},We=function($){if("0"<=$&&$<="9")return $.charCodeAt(0)-"0".charCodeAt(0);throw"illegal char :"+$};return Oe},xi=function(ot){var st=ot,Oe={getMode:function(){return 2},getLength:function(We){return st.length},write:function(We){for(var $=st,te=0;te+1<$.length;)We.put(45*ke($.charAt(te))+ke($.charAt(te+1)),11),te+=2;te<$.length&&We.put(ke($.charAt(te)),6)}},ke=function(We){if("0"<=We&&We<="9")return We.charCodeAt(0)-"0".charCodeAt(0);if("A"<=We&&We<="Z")return We.charCodeAt(0)-"A".charCodeAt(0)+10;switch(We){case" ":return 36;case"$":return 37;case"%":return 38;case"*":return 39;case"+":return 40;case"-":return 41;case".":return 42;case"/":return 43;case":":return 44;default:throw"illegal char :"+We}};return Oe},ns=function(ot){var Oe=ve.stringToBytes(ot),ke={getMode:function(){return 4},getLength:function(We){return Oe.length},write:function(We){for(var $=0;$<Oe.length;$+=1)We.put(Oe[$],8)}};return ke},wi=function(ot){var Oe=ve.stringToBytesFuncs.SJIS;if(!Oe)throw"sjis not supported.";!function($,te){var qe=Oe("\u53cb");if(2!=qe.length||38726!=(qe[0]<<8|qe[1]))throw"sjis not supported."}();var ke=Oe(ot);return{getMode:function(){return 8},getLength:function($){return~~(ke.length/2)},write:function($){for(var te=ke,qe=0;qe+1<te.length;){var Be=(255&te[qe])<<8|255&te[qe+1];if(33088<=Be&&Be<=40956)Be-=33088;else{if(!(57408<=Be&&Be<=60351))throw"illegal char at "+(qe+1)+"/"+Be;Be-=49472}$.put(Be=192*(Be>>>8&255)+(255&Be),13),qe+=2}if(qe<te.length)throw"illegal char at "+(qe+1)}}},xn=function(){var ot=[],ft={writeByte:function(st){ot.push(255&st)},writeShort:function(st){ft.writeByte(st),ft.writeByte(st>>>8)},writeBytes:function(st,Oe,ke){Oe=Oe||0,ke=ke||st.length;for(var We=0;We<ke;We+=1)ft.writeByte(st[We+Oe])},writeString:function(st){for(var Oe=0;Oe<st.length;Oe+=1)ft.writeByte(st.charCodeAt(Oe))},toByteArray:function(){return ot},toString:function(){var st="";st+="[";for(var Oe=0;Oe<ot.length;Oe+=1)Oe>0&&(st+=","),st+=ot[Oe];return st+"]"}};return ft},is=function(ot){var ft=ot,st=0,Oe=0,ke=0,We={read:function(){for(;ke<8;){if(st>=ft.length){if(0==ke)return-1;throw"unexpected end of file./"+ke}var te=ft.charAt(st);if(st+=1,"="==te)return ke=0,-1;te.match(/^\s$/)||(Oe=Oe<<6|$(te.charCodeAt(0)),ke+=6)}var qe=Oe>>>ke-8&255;return ke-=8,qe}},$=function(te){if(65<=te&&te<=90)return te-65;if(97<=te&&te<=122)return te-97+26;if(48<=te&&te<=57)return te-48+52;if(43==te)return 62;if(47==te)return 63;throw"c:"+te};return We},tr=function(ot,ft,st){for(var Oe=function(ot,ft){var st=ot,Oe=ft,ke=new Array(ot*ft),We={setPixel:function(Be,nt,xt){ke[nt*st+Be]=xt},write:function(Be){Be.writeString("GIF87a"),Be.writeShort(st),Be.writeShort(Oe),Be.writeByte(128),Be.writeByte(0),Be.writeByte(0),Be.writeByte(0),Be.writeByte(0),Be.writeByte(0),Be.writeByte(255),Be.writeByte(255),Be.writeByte(255),Be.writeString(","),Be.writeShort(0),Be.writeShort(0),Be.writeShort(st),Be.writeShort(Oe),Be.writeByte(0);var xt=te(2);Be.writeByte(2);for(var Pn=0;xt.length-Pn>255;)Be.writeByte(255),Be.writeBytes(xt,Pn,255),Pn+=255;Be.writeByte(xt.length-Pn),Be.writeBytes(xt,Pn,xt.length-Pn),Be.writeByte(0),Be.writeString(";")}},te=function(Be){for(var nt=1<<Be,xt=1+(1<<Be),Pn=Be+1,Ei=qe(),Fi=0;Fi<nt;Fi+=1)Ei.add(String.fromCharCode(Fi));Ei.add(String.fromCharCode(nt)),Ei.add(String.fromCharCode(xt));var sr=xn(),Q=function(Be){var nt=Be,xt=0,Pn=0,Ei={write:function(Fi,sr){if(Fi>>>sr)throw"length over";for(;xt+sr>=8;)nt.writeByte(255&(Fi<<xt|Pn)),sr-=8-xt,Fi>>>=8-xt,Pn=0,xt=0;Pn|=Fi<<xt,xt+=sr},flush:function(){xt>0&&nt.writeByte(Pn)}};return Ei}(sr);Q.write(nt,Pn);var me=0,Ae=String.fromCharCode(ke[me]);for(me+=1;me<ke.length;){var re=String.fromCharCode(ke[me]);me+=1,Ei.contains(Ae+re)?Ae+=re:(Q.write(Ei.indexOf(Ae),Pn),Ei.size()<4095&&(Ei.size()==1<<Pn&&(Pn+=1),Ei.add(Ae+re)),Ae=re)}return Q.write(Ei.indexOf(Ae),Pn),Q.write(xt,Pn),Q.flush(),sr.toByteArray()},qe=function(){var Be={},nt=0,xt={add:function(Pn){if(xt.contains(Pn))throw"dup key:"+Pn;Be[Pn]=nt,nt+=1},size:function(){return nt},indexOf:function(Pn){return Be[Pn]},contains:function(Pn){return typeof Be[Pn]<"u"}};return xt};return We}(ot,ft),ke=0;ke<ft;ke+=1)for(var We=0;We<ot;We+=1)Oe.setPixel(We,ke,st(We,ke));var $=xn();Oe.write($);for(var te=function(){var ot=0,ft=0,st=0,Oe="",ke={},We=function(te){Oe+=String.fromCharCode($(63&te))},$=function(te){if(!(te<0)){if(te<26)return 65+te;if(te<52)return te-26+97;if(te<62)return te-52+48;if(62==te)return 43;if(63==te)return 47}throw"n:"+te};return ke.writeByte=function(te){for(ot=ot<<8|255&te,ft+=8,st+=1;ft>=6;)We(ot>>>ft-6),ft-=6},ke.flush=function(){if(ft>0&&(We(ot<<6-ft),ot=0,ft=0),st%3!=0)for(var te=3-st%3,qe=0;qe<te;qe+=1)Oe+="="},ke.toString=function(){return Oe},ke}(),qe=$.toByteArray(),Be=0;Be<qe.length;Be+=1)te.writeByte(qe[Be]);return te.flush(),"data:image/gif;base64,"+te};return ve}();Gt.stringToBytesFuncs["UTF-8"]=function(ve){return function on(Ii){for(var ri=[],Ci=0;Ci<Ii.length;Ci++){var tn=Ii.charCodeAt(Ci);tn<128?ri.push(tn):tn<2048?ri.push(192|tn>>6,128|63&tn):tn<55296||tn>=57344?ri.push(224|tn>>12,128|tn>>6&63,128|63&tn):(Ci++,tn=65536+((1023&tn)<<10|1023&Ii.charCodeAt(Ci)),ri.push(240|tn>>18,128|tn>>12&63,128|tn>>6&63,128|63&tn))}return ri}(ve)},void 0!==(_n="function"==typeof(Cn=function(){return Gt})?Cn.apply(fs,[]):Cn)&&(wa.exports=_n)},345:(wa,fs,Cn)=>{"use strict";Cn.d(fs,{A:()=>ns});var H=Cn(76),_n=Cn(362),Gt=Cn(852),ve=Cn(41);class on{constructor(xn,Wn){this._delegate=xn,this.firebase=Wn,(0,Gt._addComponent)(xn,new _n.uA("app-compat",()=>this,"PUBLIC")),this.container=xn.container}get automaticDataCollectionEnabled(){return this._delegate.automaticDataCollectionEnabled}set automaticDataCollectionEnabled(xn){this._delegate.automaticDataCollectionEnabled=xn}get name(){return this._delegate.name}get options(){return this._delegate.options}delete(){return new Promise(xn=>{this._delegate.checkDestroyed(),xn()}).then(()=>(this.firebase.INTERNAL.removeApp(this.name),(0,Gt.deleteApp)(this._delegate)))}_getService(xn,Wn=Gt._DEFAULT_ENTRY_NAME){var is;this._delegate.checkDestroyed();const rs=this._delegate.container.getProvider(xn);return!rs.isInitialized()&&"EXPLICIT"===(null===(is=rs.getComponent())||void 0===is?void 0:is.instantiationMode)&&rs.initialize(),rs.getImmediate({identifier:Wn})}_removeServiceInstance(xn,Wn=Gt._DEFAULT_ENTRY_NAME){this._delegate.container.getProvider(xn).clearInstance(Wn)}_addComponent(xn){(0,Gt._addComponent)(this._delegate,xn)}_addOrOverwriteComponent(xn){(0,Gt._addOrOverwriteComponent)(this._delegate,xn)}toJSON(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}const ri=new H.FA("app-compat","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance."}),Ue=function tn(){const wi=function Ci(wi){const xn={},Wn={__esModule:!0,initializeApp:function tr(Oe,ke={}){const We=Gt.initializeApp(Oe,ke);if((0,H.gR)(xn,We.name))return xn[We.name];const $=new wi(We,Wn);return xn[We.name]=$,$},app:rs,registerVersion:Gt.registerVersion,setLogLevel:Gt.setLogLevel,onLog:Gt.onLog,apps:null,SDK_VERSION:Gt.SDK_VERSION,INTERNAL:{registerComponent:function ft(Oe){const ke=Oe.name,We=ke.replace("-compat","");if(Gt._registerComponent(Oe)&&"PUBLIC"===Oe.type){const $=(te=rs())=>{if("function"!=typeof te[We])throw ri.create("invalid-app-argument",{appName:ke});return te[We]()};void 0!==Oe.serviceProps&&(0,H.zw)($,Oe.serviceProps),Wn[We]=$,wi.prototype[We]=function(...te){return this._getService.bind(this,ke).apply(this,Oe.multipleInstances?te:[])}}return"PUBLIC"===Oe.type?Wn[We]:null},removeApp:function is(Oe){delete xn[Oe]},useAsService:function st(Oe,ke){return"serverAuth"===ke?null:ke},modularAPIs:Gt}};function rs(Oe){if(!(0,H.gR)(xn,Oe=Oe||Gt._DEFAULT_ENTRY_NAME))throw ri.create("no-app",{appName:Oe});return xn[Oe]}return Wn.default=Wn,Object.defineProperty(Wn,"apps",{get:function ot(){return Object.keys(xn).map(Oe=>xn[Oe])}}),rs.App=wi,Wn}(on);return wi.INTERNAL=Object.assign(Object.assign({},wi.INTERNAL),{createFirebaseNamespace:tn,extendNamespace:function xn(Wn){(0,H.zw)(wi,Wn)},createSubscribe:H.tD,ErrorFactory:H.FA,deepExtend:H.zw}),wi}(),rt=new ve.Vy("@firebase/app-compat");try{const wi=(0,H.mS)();if(void 0!==wi.firebase){rt.warn("\n      Warning: Firebase is already defined in the global scope. Please make sure\n      Firebase library is only loaded once.\n    ");const xn=wi.firebase.SDK_VERSION;xn&&xn.indexOf("LITE")>=0&&rt.warn("\n        Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n        You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n        ")}}catch{}const ns=Ue;!function xi(wi){(0,Gt.registerVersion)("@firebase/app-compat","0.2.43",wi)}()},852:(wa,fs,Cn)=>{"use strict";Cn.r(fs),Cn.d(fs,{FirebaseError:()=>ve.g,SDK_VERSION:()=>Uc,_DEFAULT_ENTRY_NAME:()=>ao,_addComponent:()=>Pr,_addOrOverwriteComponent:()=>Qa,_apps:()=>ta,_clearComponents:()=>Vc,_components:()=>lo,_getProvider:()=>td,_isFirebaseApp:()=>Lc,_isFirebaseServerApp:()=>co,_registerComponent:()=>kr,_removeServiceInstance:()=>Za,_serverApps:()=>qr,deleteApp:()=>rd,getApp:()=>Ip,getApps:()=>id,initializeApp:()=>nd,initializeServerApp:()=>Bc,onLog:()=>X,registerVersion:()=>q,setLogLevel:()=>Z});var H=Cn(467),_n=Cn(362),Gt=Cn(41),ve=Cn(76);const on=(xe,Y)=>Y.some(_e=>xe instanceof _e);let Ii,ri;const Ue=new WeakMap,rt=new WeakMap,Xt=new WeakMap,Kn=new WeakMap,xi=new WeakMap;let xn={get(xe,Y,_e){if(xe instanceof IDBTransaction){if("done"===Y)return rt.get(xe);if("objectStoreNames"===Y)return xe.objectStoreNames||Xt.get(xe);if("store"===Y)return _e.objectStoreNames[1]?void 0:_e.objectStore(_e.objectStoreNames[0])}return tr(xe[Y])},set:(xe,Y,_e)=>(xe[Y]=_e,!0),has:(xe,Y)=>xe instanceof IDBTransaction&&("done"===Y||"store"===Y)||Y in xe};function rs(xe){return"function"==typeof xe?function is(xe){return xe!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?function tn(){return ri||(ri=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}().includes(xe)?function(...Y){return xe.apply(ot(this),Y),tr(Ue.get(this))}:function(...Y){return tr(xe.apply(ot(this),Y))}:function(Y,..._e){const Dt=xe.call(ot(this),Y,..._e);return Xt.set(Dt,Y.sort?Y.sort():[Y]),tr(Dt)}}(xe):(xe instanceof IDBTransaction&&function wi(xe){if(rt.has(xe))return;const Y=new Promise((_e,Dt)=>{const kn=()=>{xe.removeEventListener("complete",Bn),xe.removeEventListener("error",Gn),xe.removeEventListener("abort",Gn)},Bn=()=>{_e(),kn()},Gn=()=>{Dt(xe.error||new DOMException("AbortError","AbortError")),kn()};xe.addEventListener("complete",Bn),xe.addEventListener("error",Gn),xe.addEventListener("abort",Gn)});rt.set(xe,Y)}(xe),on(xe,function Ci(){return Ii||(Ii=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}())?new Proxy(xe,xn):xe)}function tr(xe){if(xe instanceof IDBRequest)return function ns(xe){const Y=new Promise((_e,Dt)=>{const kn=()=>{xe.removeEventListener("success",Bn),xe.removeEventListener("error",Gn)},Bn=()=>{_e(tr(xe.result)),kn()},Gn=()=>{Dt(xe.error),kn()};xe.addEventListener("success",Bn),xe.addEventListener("error",Gn)});return Y.then(_e=>{_e instanceof IDBCursor&&Ue.set(_e,xe)}).catch(()=>{}),xi.set(Y,xe),Y}(xe);if(Kn.has(xe))return Kn.get(xe);const Y=rs(xe);return Y!==xe&&(Kn.set(xe,Y),xi.set(Y,xe)),Y}const ot=xe=>xi.get(xe),Oe=["get","getKey","getAll","getAllKeys","count"],ke=["put","add","delete","clear"],We=new Map;function $(xe,Y){if(!(xe instanceof IDBDatabase)||Y in xe||"string"!=typeof Y)return;if(We.get(Y))return We.get(Y);const _e=Y.replace(/FromIndex$/,""),Dt=Y!==_e,kn=ke.includes(_e);if(!(_e in(Dt?IDBIndex:IDBObjectStore).prototype)||!kn&&!Oe.includes(_e))return;const Bn=function(){var Gn=(0,H.A)(function*(pi,...Er){const Ro=this.transaction(pi,kn?"readwrite":"readonly");let Vi=Ro.store;return Dt&&(Vi=Vi.index(Er.shift())),(yield Promise.all([Vi[_e](...Er),kn&&Ro.done]))[0]});return function(Er){return Gn.apply(this,arguments)}}();return We.set(Y,Bn),Bn}!function Wn(xe){xn=xe(xn)}(xe=>({...xe,get:(Y,_e,Dt)=>$(Y,_e)||xe.get(Y,_e,Dt),has:(Y,_e)=>!!$(Y,_e)||xe.has(Y,_e)}));class te{constructor(Y){this.container=Y}getPlatformInfoString(){return this.container.getProviders().map(_e=>{if(function qe(xe){const Y=xe.getComponent();return"VERSION"===Y?.type}(_e)){const Dt=_e.getImmediate();return`${Dt.library}/${Dt.version}`}return null}).filter(_e=>_e).join(" ")}}const Be="@firebase/app",nt="0.10.13",xt=new Gt.Vy("@firebase/app"),ao="[DEFAULT]",ea={[Be]:"fire-core","@firebase/app-compat":"fire-core-compat","@firebase/analytics":"fire-analytics","@firebase/analytics-compat":"fire-analytics-compat","@firebase/app-check":"fire-app-check","@firebase/app-check-compat":"fire-app-check-compat","@firebase/auth":"fire-auth","@firebase/auth-compat":"fire-auth-compat","@firebase/database":"fire-rtdb","@firebase/data-connect":"fire-data-connect","@firebase/database-compat":"fire-rtdb-compat","@firebase/functions":"fire-fn","@firebase/functions-compat":"fire-fn-compat","@firebase/installations":"fire-iid","@firebase/installations-compat":"fire-iid-compat","@firebase/messaging":"fire-fcm","@firebase/messaging-compat":"fire-fcm-compat","@firebase/performance":"fire-perf","@firebase/performance-compat":"fire-perf-compat","@firebase/remote-config":"fire-rc","@firebase/remote-config-compat":"fire-rc-compat","@firebase/storage":"fire-gcs","@firebase/storage-compat":"fire-gcs-compat","@firebase/firestore":"fire-fst","@firebase/firestore-compat":"fire-fst-compat","@firebase/vertexai-preview":"fire-vertex","fire-js":"fire-js",firebase:"fire-js-all"},ta=new Map,qr=new Map,lo=new Map;function Pr(xe,Y){try{xe.container.addComponent(Y)}catch(_e){xt.debug(`Component ${Y.name} failed to register with FirebaseApp ${xe.name}`,_e)}}function Qa(xe,Y){xe.container.addOrOverwriteComponent(Y)}function kr(xe){const Y=xe.name;if(lo.has(Y))return xt.debug(`There were multiple attempts to register component ${Y}.`),!1;lo.set(Y,xe);for(const _e of ta.values())Pr(_e,xe);for(const _e of qr.values())Pr(_e,xe);return!0}function td(xe,Y){const _e=xe.container.getProvider("heartbeat").getImmediate({optional:!0});return _e&&_e.triggerHeartbeat(),xe.container.getProvider(Y)}function Za(xe,Y,_e=ao){td(xe,Y).clearInstance(_e)}function Lc(xe){return void 0!==xe.options}function co(xe){return void 0!==xe.settings}function Vc(){lo.clear()}const $s=new ve.FA("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."});class uo{constructor(Y,_e,Dt){this._isDeleted=!1,this._options=Object.assign({},Y),this._config=Object.assign({},_e),this._name=_e.name,this._automaticDataCollectionEnabled=_e.automaticDataCollectionEnabled,this._container=Dt,this.container.addComponent(new _n.uA("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(Y){this.checkDestroyed(),this._automaticDataCollectionEnabled=Y}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(Y){this._isDeleted=Y}checkDestroyed(){if(this.isDeleted)throw $s.create("app-deleted",{appName:this._name})}}class ho extends uo{constructor(Y,_e,Dt,kn){const Bn=void 0!==_e.automaticDataCollectionEnabled&&_e.automaticDataCollectionEnabled,Gn={name:Dt,automaticDataCollectionEnabled:Bn};super(void 0!==Y.apiKey?Y:Y.options,Gn,kn),this._serverConfig=Object.assign({automaticDataCollectionEnabled:Bn},_e),this._finalizationRegistry=null,typeof FinalizationRegistry<"u"&&(this._finalizationRegistry=new FinalizationRegistry(()=>{this.automaticCleanup()})),this._refCount=0,this.incRefCount(this._serverConfig.releaseOnDeref),this._serverConfig.releaseOnDeref=void 0,_e.releaseOnDeref=void 0,q(Be,nt,"serverapp")}toJSON(){}get refCount(){return this._refCount}incRefCount(Y){this.isDeleted||(this._refCount++,void 0!==Y&&null!==this._finalizationRegistry&&this._finalizationRegistry.register(Y,this))}decRefCount(){return this.isDeleted?0:--this._refCount}automaticCleanup(){rd(this)}get settings(){return this.checkDestroyed(),this._serverConfig}checkDestroyed(){if(this.isDeleted)throw $s.create("server-app-deleted")}}const Uc="10.14.1";function nd(xe,Y={}){let _e=xe;"object"!=typeof Y&&(Y={name:Y});const Dt=Object.assign({name:ao,automaticDataCollectionEnabled:!1},Y),kn=Dt.name;if("string"!=typeof kn||!kn)throw $s.create("bad-app-name",{appName:String(kn)});if(_e||(_e=(0,ve.T9)()),!_e)throw $s.create("no-options");const Bn=ta.get(kn);if(Bn){if((0,ve.bD)(_e,Bn.options)&&(0,ve.bD)(Dt,Bn.config))return Bn;throw $s.create("duplicate-app",{appName:kn})}const Gn=new _n.h1(kn);for(const Er of lo.values())Gn.addComponent(Er);const pi=new uo(_e,Dt,Gn);return ta.set(kn,pi),pi}function Bc(xe,Y){if((0,ve.Bd)()&&!(0,ve.p7)())throw $s.create("invalid-server-app-environment");let _e;void 0===Y.automaticDataCollectionEnabled&&(Y.automaticDataCollectionEnabled=!1),_e=Lc(xe)?xe.options:xe;const Dt=Object.assign(Object.assign({},Y),_e);if(void 0!==Dt.releaseOnDeref&&delete Dt.releaseOnDeref,void 0!==Y.releaseOnDeref&&typeof FinalizationRegistry>"u")throw $s.create("finalization-registry-not-supported",{});const Bn=""+(Ro=JSON.stringify(Dt),[...Ro].reduce((Vi,el)=>Math.imul(31,Vi)+el.charCodeAt(0)|0,0)),Gn=qr.get(Bn);var Ro;if(Gn)return Gn.incRefCount(Y.releaseOnDeref),Gn;const pi=new _n.h1(Bn);for(const Ro of lo.values())pi.addComponent(Ro);const Er=new ho(_e,Y,Bn,pi);return qr.set(Bn,Er),Er}function Ip(xe=ao){const Y=ta.get(xe);if(!Y&&xe===ao&&(0,ve.T9)())return nd();if(!Y)throw $s.create("no-app",{appName:xe});return Y}function id(){return Array.from(ta.values())}function rd(xe){return wl.apply(this,arguments)}function wl(){return(wl=(0,H.A)(function*(xe){let Y=!1;const _e=xe.name;ta.has(_e)?(Y=!0,ta.delete(_e)):qr.has(_e)&&xe.decRefCount()<=0&&(qr.delete(_e),Y=!0),Y&&(yield Promise.all(xe.container.getProviders().map(Dt=>Dt.delete())),xe.isDeleted=!0)})).apply(this,arguments)}function q(xe,Y,_e){var Dt;let kn=null!==(Dt=ea[xe])&&void 0!==Dt?Dt:xe;_e&&(kn+=`-${_e}`);const Bn=kn.match(/\s|\//),Gn=Y.match(/\s|\//);if(Bn||Gn){const pi=[`Unable to register library "${kn}" with version "${Y}":`];return Bn&&pi.push(`library name "${kn}" contains illegal characters (whitespace or "/")`),Bn&&Gn&&pi.push("and"),Gn&&pi.push(`version name "${Y}" contains illegal characters (whitespace or "/")`),void xt.warn(pi.join(" "))}kr(new _n.uA(`${kn}-version`,()=>({library:kn,version:Y}),"VERSION"))}function X(xe,Y){if(null!==xe&&"function"!=typeof xe)throw $s.create("invalid-log-argument");(0,Gt.Ey)(xe,Y)}function Z(xe){(0,Gt.He)(xe)}const ne="firebase-heartbeat-database",fe=1,Wt="firebase-heartbeat-store";let Mt=null;function Zi(){return Mt||(Mt=function ft(xe,Y,{blocked:_e,upgrade:Dt,blocking:kn,terminated:Bn}={}){const Gn=indexedDB.open(xe,Y),pi=tr(Gn);return Dt&&Gn.addEventListener("upgradeneeded",Er=>{Dt(tr(Gn.result),Er.oldVersion,Er.newVersion,tr(Gn.transaction),Er)}),_e&&Gn.addEventListener("blocked",Er=>_e(Er.oldVersion,Er.newVersion,Er)),pi.then(Er=>{Bn&&Er.addEventListener("close",()=>Bn()),kn&&Er.addEventListener("versionchange",Ro=>kn(Ro.oldVersion,Ro.newVersion,Ro))}).catch(()=>{}),pi}(ne,fe,{upgrade:(xe,Y)=>{if(0===Y)try{xe.createObjectStore(Wt)}catch(_e){console.warn(_e)}}}).catch(xe=>{throw $s.create("idb-open",{originalErrorMessage:xe.message})})),Mt}function vn(){return(vn=(0,H.A)(function*(xe){try{const _e=(yield Zi()).transaction(Wt),Dt=yield _e.objectStore(Wt).get(ws(xe));return yield _e.done,Dt}catch(Y){if(Y instanceof ve.g)xt.warn(Y.message);else{const _e=$s.create("idb-get",{originalErrorMessage:Y?.message});xt.warn(_e.message)}}})).apply(this,arguments)}function Br(xe,Y){return yn.apply(this,arguments)}function yn(){return(yn=(0,H.A)(function*(xe,Y){try{const Dt=(yield Zi()).transaction(Wt,"readwrite");yield Dt.objectStore(Wt).put(Y,ws(xe)),yield Dt.done}catch(_e){if(_e instanceof ve.g)xt.warn(_e.message);else{const Dt=$s.create("idb-set",{originalErrorMessage:_e?.message});xt.warn(Dt.message)}}})).apply(this,arguments)}function ws(xe){return`${xe.name}!${xe.options.appId}`}class Tn{constructor(Y){this.container=Y,this._heartbeatsCache=null;const _e=this.container.getProvider("app").getImmediate();this._storage=new sv(_e),this._heartbeatsCachePromise=this._storage.read().then(Dt=>(this._heartbeatsCache=Dt,Dt))}triggerHeartbeat(){var Y=this;return(0,H.A)(function*(){var _e,Dt;try{const Bn=Y.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),Gn=Ja();return null==(null===(_e=Y._heartbeatsCache)||void 0===_e?void 0:_e.heartbeats)&&(Y._heartbeatsCache=yield Y._heartbeatsCachePromise,null==(null===(Dt=Y._heartbeatsCache)||void 0===Dt?void 0:Dt.heartbeats))||Y._heartbeatsCache.lastSentHeartbeatDate===Gn||Y._heartbeatsCache.heartbeats.some(pi=>pi.date===Gn)?void 0:(Y._heartbeatsCache.heartbeats.push({date:Gn,agent:Bn}),Y._heartbeatsCache.heartbeats=Y._heartbeatsCache.heartbeats.filter(pi=>{const Er=new Date(pi.date).valueOf();return Date.now()-Er<=2592e6}),Y._storage.overwrite(Y._heartbeatsCache))}catch(kn){xt.warn(kn)}})()}getHeartbeatsHeader(){var Y=this;return(0,H.A)(function*(){var _e;try{if(null===Y._heartbeatsCache&&(yield Y._heartbeatsCachePromise),null==(null===(_e=Y._heartbeatsCache)||void 0===_e?void 0:_e.heartbeats)||0===Y._heartbeatsCache.heartbeats.length)return"";const Dt=Ja(),{heartbeatsToSend:kn,unsentEntries:Bn}=function sd(xe,Y=1024){const _e=[];let Dt=xe.slice();for(const kn of xe){const Bn=_e.find(Gn=>Gn.agent===kn.agent);if(Bn){if(Bn.dates.push(kn.date),Tl(_e)>Y){Bn.dates.pop();break}}else if(_e.push({agent:kn.agent,dates:[kn.date]}),Tl(_e)>Y){_e.pop();break}Dt=Dt.slice(1)}return{heartbeatsToSend:_e,unsentEntries:Dt}}(Y._heartbeatsCache.heartbeats),Gn=(0,ve.Uj)(JSON.stringify({version:2,heartbeats:kn}));return Y._heartbeatsCache.lastSentHeartbeatDate=Dt,Bn.length>0?(Y._heartbeatsCache.heartbeats=Bn,yield Y._storage.overwrite(Y._heartbeatsCache)):(Y._heartbeatsCache.heartbeats=[],Y._storage.overwrite(Y._heartbeatsCache)),Gn}catch(Dt){return xt.warn(Dt),""}})()}}function Ja(){return(new Date).toISOString().substring(0,10)}class sv{constructor(Y){this.app=Y,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return(0,H.A)(function*(){return!!(0,ve.zW)()&&(0,ve.eX)().then(()=>!0).catch(()=>!1)})()}read(){var Y=this;return(0,H.A)(function*(){if(yield Y._canUseIndexedDBPromise){const Dt=yield function Xr(xe){return vn.apply(this,arguments)}(Y.app);return Dt?.heartbeats?Dt:{heartbeats:[]}}return{heartbeats:[]}})()}overwrite(Y){var _e=this;return(0,H.A)(function*(){var Dt;if(yield _e._canUseIndexedDBPromise){const Bn=yield _e.read();return Br(_e.app,{lastSentHeartbeatDate:null!==(Dt=Y.lastSentHeartbeatDate)&&void 0!==Dt?Dt:Bn.lastSentHeartbeatDate,heartbeats:Y.heartbeats})}})()}add(Y){var _e=this;return(0,H.A)(function*(){var Dt;if(yield _e._canUseIndexedDBPromise){const Bn=yield _e.read();return Br(_e.app,{lastSentHeartbeatDate:null!==(Dt=Y.lastSentHeartbeatDate)&&void 0!==Dt?Dt:Bn.lastSentHeartbeatDate,heartbeats:[...Bn.heartbeats,...Y.heartbeats]})}})()}}function Tl(xe){return(0,ve.Uj)(JSON.stringify({version:2,heartbeats:xe})).length}!function Ce(xe){kr(new _n.uA("platform-logger",Y=>new te(Y),"PRIVATE")),kr(new _n.uA("heartbeat",Y=>new Tn(Y),"PRIVATE")),q(Be,nt,xe),q(Be,nt,"esm2017"),q("fire-js","")}("")},362:(wa,fs,Cn)=>{"use strict";Cn.d(fs,{h1:()=>Ci,uA:()=>Gt});var H=Cn(467),_n=Cn(76);class Gt{constructor(Ue,rt,Xt){this.name=Ue,this.instanceFactory=rt,this.type=Xt,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(Ue){return this.instantiationMode=Ue,this}setMultipleInstances(Ue){return this.multipleInstances=Ue,this}setServiceProps(Ue){return this.serviceProps=Ue,this}setInstanceCreatedCallback(Ue){return this.onInstanceCreated=Ue,this}}const ve="[DEFAULT]";class on{constructor(Ue,rt){this.name=Ue,this.container=rt,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(Ue){const rt=this.normalizeInstanceIdentifier(Ue);if(!this.instancesDeferred.has(rt)){const Xt=new _n.cY;if(this.instancesDeferred.set(rt,Xt),this.isInitialized(rt)||this.shouldAutoInitialize())try{const Kn=this.getOrInitializeService({instanceIdentifier:rt});Kn&&Xt.resolve(Kn)}catch{}}return this.instancesDeferred.get(rt).promise}getImmediate(Ue){var rt;const Xt=this.normalizeInstanceIdentifier(Ue?.identifier),Kn=null!==(rt=Ue?.optional)&&void 0!==rt&&rt;if(!this.isInitialized(Xt)&&!this.shouldAutoInitialize()){if(Kn)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:Xt})}catch(xi){if(Kn)return null;throw xi}}getComponent(){return this.component}setComponent(Ue){if(Ue.name!==this.name)throw Error(`Mismatching Component ${Ue.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=Ue,this.shouldAutoInitialize()){if(function ri(tn){return"EAGER"===tn.instantiationMode}(Ue))try{this.getOrInitializeService({instanceIdentifier:ve})}catch{}for(const[rt,Xt]of this.instancesDeferred.entries()){const Kn=this.normalizeInstanceIdentifier(rt);try{const xi=this.getOrInitializeService({instanceIdentifier:Kn});Xt.resolve(xi)}catch{}}}}clearInstance(Ue=ve){this.instancesDeferred.delete(Ue),this.instancesOptions.delete(Ue),this.instances.delete(Ue)}delete(){var Ue=this;return(0,H.A)(function*(){const rt=Array.from(Ue.instances.values());yield Promise.all([...rt.filter(Xt=>"INTERNAL"in Xt).map(Xt=>Xt.INTERNAL.delete()),...rt.filter(Xt=>"_delete"in Xt).map(Xt=>Xt._delete())])})()}isComponentSet(){return null!=this.component}isInitialized(Ue=ve){return this.instances.has(Ue)}getOptions(Ue=ve){return this.instancesOptions.get(Ue)||{}}initialize(Ue={}){const{options:rt={}}=Ue,Xt=this.normalizeInstanceIdentifier(Ue.instanceIdentifier);if(this.isInitialized(Xt))throw Error(`${this.name}(${Xt}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const Kn=this.getOrInitializeService({instanceIdentifier:Xt,options:rt});for(const[xi,ns]of this.instancesDeferred.entries())Xt===this.normalizeInstanceIdentifier(xi)&&ns.resolve(Kn);return Kn}onInit(Ue,rt){var Xt;const Kn=this.normalizeInstanceIdentifier(rt),xi=null!==(Xt=this.onInitCallbacks.get(Kn))&&void 0!==Xt?Xt:new Set;xi.add(Ue),this.onInitCallbacks.set(Kn,xi);const ns=this.instances.get(Kn);return ns&&Ue(ns,Kn),()=>{xi.delete(Ue)}}invokeOnInitCallbacks(Ue,rt){const Xt=this.onInitCallbacks.get(rt);if(Xt)for(const Kn of Xt)try{Kn(Ue,rt)}catch{}}getOrInitializeService({instanceIdentifier:Ue,options:rt={}}){let Xt=this.instances.get(Ue);if(!Xt&&this.component&&(Xt=this.component.instanceFactory(this.container,{instanceIdentifier:(tn=Ue,tn===ve?void 0:tn),options:rt}),this.instances.set(Ue,Xt),this.instancesOptions.set(Ue,rt),this.invokeOnInitCallbacks(Xt,Ue),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,Ue,Xt)}catch{}var tn;return Xt||null}normalizeInstanceIdentifier(Ue=ve){return this.component?this.component.multipleInstances?Ue:ve:Ue}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class Ci{constructor(Ue){this.name=Ue,this.providers=new Map}addComponent(Ue){const rt=this.getProvider(Ue.name);if(rt.isComponentSet())throw new Error(`Component ${Ue.name} has already been registered with ${this.name}`);rt.setComponent(Ue)}addOrOverwriteComponent(Ue){this.getProvider(Ue.name).isComponentSet()&&this.providers.delete(Ue.name),this.addComponent(Ue)}getProvider(Ue){if(this.providers.has(Ue))return this.providers.get(Ue);const rt=new on(Ue,this);return this.providers.set(Ue,rt),rt}getProviders(){return Array.from(this.providers.values())}}},41:(wa,fs,Cn)=>{"use strict";Cn.d(fs,{$b:()=>_n,Ey:()=>tn,He:()=>Ci,Vy:()=>ri});const H=[];var _n=function(Ue){return Ue[Ue.DEBUG=0]="DEBUG",Ue[Ue.VERBOSE=1]="VERBOSE",Ue[Ue.INFO=2]="INFO",Ue[Ue.WARN=3]="WARN",Ue[Ue.ERROR=4]="ERROR",Ue[Ue.SILENT=5]="SILENT",Ue}(_n||{});const Gt={debug:_n.DEBUG,verbose:_n.VERBOSE,info:_n.INFO,warn:_n.WARN,error:_n.ERROR,silent:_n.SILENT},ve=_n.INFO,on={[_n.DEBUG]:"log",[_n.VERBOSE]:"log",[_n.INFO]:"info",[_n.WARN]:"warn",[_n.ERROR]:"error"},Ii=(Ue,rt,...Xt)=>{if(rt<Ue.logLevel)return;const Kn=(new Date).toISOString(),xi=on[rt];if(!xi)throw new Error(`Attempted to log a message with an invalid logType (value: ${rt})`);console[xi](`[${Kn}]  ${Ue.name}:`,...Xt)};class ri{constructor(rt){this.name=rt,this._logLevel=ve,this._logHandler=Ii,this._userLogHandler=null,H.push(this)}get logLevel(){return this._logLevel}set logLevel(rt){if(!(rt in _n))throw new TypeError(`Invalid value "${rt}" assigned to \`logLevel\``);this._logLevel=rt}setLogLevel(rt){this._logLevel="string"==typeof rt?Gt[rt]:rt}get logHandler(){return this._logHandler}set logHandler(rt){if("function"!=typeof rt)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=rt}get userLogHandler(){return this._userLogHandler}set userLogHandler(rt){this._userLogHandler=rt}debug(...rt){this._userLogHandler&&this._userLogHandler(this,_n.DEBUG,...rt),this._logHandler(this,_n.DEBUG,...rt)}log(...rt){this._userLogHandler&&this._userLogHandler(this,_n.VERBOSE,...rt),this._logHandler(this,_n.VERBOSE,...rt)}info(...rt){this._userLogHandler&&this._userLogHandler(this,_n.INFO,...rt),this._logHandler(this,_n.INFO,...rt)}warn(...rt){this._userLogHandler&&this._userLogHandler(this,_n.WARN,...rt),this._logHandler(this,_n.WARN,...rt)}error(...rt){this._userLogHandler&&this._userLogHandler(this,_n.ERROR,...rt),this._logHandler(this,_n.ERROR,...rt)}}function Ci(Ue){H.forEach(rt=>{rt.setLogLevel(Ue)})}function tn(Ue,rt){for(const Xt of H){let Kn=null;rt&&rt.level&&(Kn=Gt[rt.level]),Xt.userLogHandler=null===Ue?null:(xi,ns,...wi)=>{const xn=wi.map(Wn=>{if(null==Wn)return null;if("string"==typeof Wn)return Wn;if("number"==typeof Wn||"boolean"==typeof Wn)return Wn.toString();if(Wn instanceof Error)return Wn.message;try{return JSON.stringify(Wn)}catch{return null}}).filter(Wn=>Wn).join(" ");ns>=(Kn??xi.logLevel)&&Ue({level:_n[ns].toLowerCase(),message:xn,args:wi,type:xi.name})}}}},955:(wa,fs,Cn)=>{"use strict";var H=Cn(467),_n=Cn(345),Gt=Cn(852),ve=Cn(76),on=Cn(41),Ii=Cn(635),ri=Cn(362);const tn={FACEBOOK:"facebook.com",GITHUB:"github.com",GOOGLE:"google.com",PASSWORD:"password",PHONE:"phone",TWITTER:"twitter.com"};const ns=function Kn(){return{"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","emulator-config-failed":'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.',"expired-action-code":"The action code has expired.","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal AuthError has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registered for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal AuthError has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-emulator-scheme":"Emulator URL must start with a valid scheme (http:// or https://).","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is incorrect, malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","login-blocked":"Login blocked by user-provided method: {$originalMessage}","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal AuthError has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-password":"A non-empty password must be provided","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal AuthError has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled.","already-initialized":"initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance.","missing-recaptcha-token":"The reCAPTCHA token is missing when sending request to the backend.","invalid-recaptcha-token":"The reCAPTCHA token is invalid when sending request to the backend.","invalid-recaptcha-action":"The reCAPTCHA action is invalid when sending request to the backend.","recaptcha-not-enabled":"reCAPTCHA Enterprise integration is not enabled for this project.","missing-client-type":"The reCAPTCHA client type is missing when sending request to the backend.","missing-recaptcha-version":"The reCAPTCHA version is missing when sending request to the backend.","invalid-req-type":"Invalid request parameters.","invalid-recaptcha-version":"The reCAPTCHA version is invalid when sending request to the backend.","unsupported-password-policy-schema-version":"The password policy received from the backend uses a schema version that is not supported by this version of the Firebase SDK.","password-does-not-meet-requirements":"The password does not meet the requirements."}},wi=function xi(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}},xn=new ve.FA("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),is=new on.Vy("@firebase/auth");function tr(_,...h){is.logLevel<=on.$b.ERROR&&is.error(`Auth (${Gt.SDK_VERSION}): ${_}`,...h)}function ot(_,...h){throw We(_,...h)}function ft(_,...h){return We(_,...h)}function st(_,h,f){const y=Object.assign(Object.assign({},wi()),{[h]:f});return new ve.FA("auth","Firebase",y).create(h,{appName:_.name})}function Oe(_){return st(_,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function ke(_,h,f){if(!(h instanceof f))throw f.name!==h.constructor.name&&ot(_,"argument-error"),st(_,"argument-error",`Type of ${h.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function We(_,...h){if("string"!=typeof _){const f=h[0],y=[...h.slice(1)];return y[0]&&(y[0].appName=_.name),_._errorFactory.create(f,...y)}return xn.create(_,...h)}function $(_,h,...f){if(!_)throw We(h,...f)}function te(_){const h="INTERNAL ASSERTION FAILED: "+_;throw tr(h),new Error(h)}function qe(_,h){_||te(h)}function Be(){var _;return typeof self<"u"&&(null===(_=self.location)||void 0===_?void 0:_.href)||""}function nt(){return"http:"===xt()||"https:"===xt()}function xt(){var _;return typeof self<"u"&&(null===(_=self.location)||void 0===_?void 0:_.protocol)||null}class Fi{constructor(h,f){this.shortDelay=h,this.longDelay=f,qe(f>h,"Short delay should be less than long delay!"),this.isMobile=(0,ve.jZ)()||(0,ve.lV)()}get(){return function Pn(){return!(typeof navigator<"u"&&navigator&&"onLine"in navigator&&"boolean"==typeof navigator.onLine&&(nt()||(0,ve.sr)()||"connection"in navigator))||navigator.onLine}()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function sr(_,h){qe(_.emulator,"Emulator should always be set here");const{url:f}=_.emulator;return h?`${f}${h.startsWith("/")?h.slice(1):h}`:f}class Q{static initialize(h,f,y){this.fetchImpl=h,f&&(this.headersImpl=f),y&&(this.responseImpl=y)}static fetch(){return this.fetchImpl?this.fetchImpl:typeof self<"u"&&"fetch"in self?self.fetch:typeof globalThis<"u"&&globalThis.fetch?globalThis.fetch:typeof fetch<"u"?fetch:void te("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:typeof self<"u"&&"Headers"in self?self.Headers:typeof globalThis<"u"&&globalThis.Headers?globalThis.Headers:typeof Headers<"u"?Headers:void te("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:typeof self<"u"&&"Response"in self?self.Response:typeof globalThis<"u"&&globalThis.Response?globalThis.Response:typeof Response<"u"?Response:void te("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const me={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"},Ae=new Fi(3e4,6e4);function re(_,h){return _.tenantId&&!h.tenantId?Object.assign(Object.assign({},h),{tenantId:_.tenantId}):h}function ye(_,h,f,y){return Qe.apply(this,arguments)}function Qe(){return(Qe=(0,H.A)(function*(_,h,f,y,C={}){return Ge(_,C,(0,H.A)(function*(){let k={},K={};y&&("GET"===h?K=y:k={body:JSON.stringify(y)});const le=(0,ve.Am)(Object.assign({key:_.config.apiKey},K)).slice(1),Ne=yield _._getAdditionalHeaders();Ne["Content-Type"]="application/json",_.languageCode&&(Ne["X-Firebase-Locale"]=_.languageCode);const wt=Object.assign({method:h,headers:Ne},k);return(0,ve.c1)()||(wt.referrerPolicy="no-referrer"),Q.fetch()(De(_,_.config.apiHost,f,le),wt)}))})).apply(this,arguments)}function Ge(_,h,f){return ge.apply(this,arguments)}function ge(){return(ge=(0,H.A)(function*(_,h,f){_._canInitEmulator=!1;const y=Object.assign(Object.assign({},me),h);try{const C=new At(_),k=yield Promise.race([f(),C.promise]);C.clearNetworkTimeout();const K=yield k.json();if("needConfirmation"in K)throw Tt(_,"account-exists-with-different-credential",K);if(k.ok&&!("errorMessage"in K))return K;{const le=k.ok?K.errorMessage:K.error.message,[Ne,wt]=le.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===Ne)throw Tt(_,"credential-already-in-use",K);if("EMAIL_EXISTS"===Ne)throw Tt(_,"email-already-in-use",K);if("USER_DISABLED"===Ne)throw Tt(_,"user-disabled",K);const Kt=y[Ne]||Ne.toLowerCase().replace(/[_\s]+/g,"-");if(wt)throw st(_,Kt,wt);ot(_,Kt)}}catch(C){if(C instanceof ve.g)throw C;ot(_,"network-request-failed",{message:String(C)})}})).apply(this,arguments)}function Ie(_,h,f,y){return ae.apply(this,arguments)}function ae(){return(ae=(0,H.A)(function*(_,h,f,y,C={}){const k=yield ye(_,h,f,y,C);return"mfaPendingCredential"in k&&ot(_,"multi-factor-auth-required",{_serverResponse:k}),k})).apply(this,arguments)}function De(_,h,f,y){const C=`${h}${f}?${y}`;return _.config.emulator?sr(_.config,C):`${_.config.apiScheme}://${C}`}function Ve(_){switch(_){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class At{constructor(h){this.auth=h,this.timer=null,this.promise=new Promise((f,y)=>{this.timer=setTimeout(()=>y(ft(this.auth,"network-request-failed")),Ae.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function Tt(_,h,f){const y={appName:_.name};f.email&&(y.email=f.email),f.phoneNumber&&(y.phoneNumber=f.phoneNumber);const C=ft(_,h,y);return C.customData._tokenResponse=f,C}function Vt(_){return void 0!==_&&void 0!==_.getResponse}function Nn(_){return void 0!==_&&void 0!==_.enterprise}class fi{constructor(h){if(this.siteKey="",this.recaptchaEnforcementState=[],void 0===h.recaptchaKey)throw new Error("recaptchaKey undefined");this.siteKey=h.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=h.recaptchaEnforcementState}getProviderEnforcementState(h){if(!this.recaptchaEnforcementState||0===this.recaptchaEnforcementState.length)return null;for(const f of this.recaptchaEnforcementState)if(f.provider&&f.provider===h)return Ve(f.enforcementState);return null}isProviderEnabled(h){return"ENFORCE"===this.getProviderEnforcementState(h)||"AUDIT"===this.getProviderEnforcementState(h)}}function Mi(){return(Mi=(0,H.A)(function*(_){return(yield ye(_,"GET","/v1/recaptchaParams")).recaptchaSiteKey||""})).apply(this,arguments)}function $r(_,h){return Ea.apply(this,arguments)}function Ea(){return(Ea=(0,H.A)(function*(_,h){return ye(_,"GET","/v2/recaptchaConfig",re(_,h))})).apply(this,arguments)}function Ya(){return(Ya=(0,H.A)(function*(_,h){return ye(_,"POST","/v1/accounts:delete",h)})).apply(this,arguments)}function ea(){return(ea=(0,H.A)(function*(_,h){return ye(_,"POST","/v1/accounts:update",h)})).apply(this,arguments)}function ta(_,h){return qr.apply(this,arguments)}function qr(){return(qr=(0,H.A)(function*(_,h){return ye(_,"POST","/v1/accounts:lookup",h)})).apply(this,arguments)}function lo(_){if(_)try{const h=new Date(Number(_));if(!isNaN(h.getTime()))return h.toUTCString()}catch{}}function kr(){return(kr=(0,H.A)(function*(_,h=!1){const f=(0,ve.Ku)(_),y=yield f.getIdToken(h),C=Za(y);$(C&&C.exp&&C.auth_time&&C.iat,f.auth,"internal-error");const k="object"==typeof C.firebase?C.firebase:void 0,K=k?.sign_in_provider;return{claims:C,token:y,authTime:lo(td(C.auth_time)),issuedAtTime:lo(td(C.iat)),expirationTime:lo(td(C.exp)),signInProvider:K||null,signInSecondFactor:k?.sign_in_second_factor||null}})).apply(this,arguments)}function td(_){return 1e3*Number(_)}function Za(_){const[h,f,y]=_.split(".");if(void 0===h||void 0===f||void 0===y)return tr("JWT malformed, contained fewer than 3 sections"),null;try{const C=(0,ve.u)(f);return C?JSON.parse(C):(tr("Failed to decode base64 JWT payload"),null)}catch(C){return tr("Caught error parsing JWT payload as JSON",C?.toString()),null}}function Lc(_){const h=Za(_);return $(h,"internal-error"),$(typeof h.exp<"u","internal-error"),$(typeof h.iat<"u","internal-error"),Number(h.exp)-Number(h.iat)}function co(_,h){return Vc.apply(this,arguments)}function Vc(){return(Vc=(0,H.A)(function*(_,h,f=!1){if(f)return h;try{return yield h}catch(y){throw y instanceof ve.g&&function jl({code:_}){return"auth/user-disabled"===_||"auth/user-token-expired"===_}(y)&&_.auth.currentUser===_&&(yield _.auth.signOut()),y}})).apply(this,arguments)}class $s{constructor(h){this.user=h,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(h){var f;if(h){const y=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),y}{this.errorBackoff=3e4;const C=(null!==(f=this.user.stsTokenManager.expirationTime)&&void 0!==f?f:0)-Date.now()-3e5;return Math.max(0,C)}}schedule(h=!1){var f=this;if(!this.isRunning)return;const y=this.getInterval(h);this.timerId=setTimeout((0,H.A)(function*(){yield f.iteration()}),y)}iteration(){var h=this;return(0,H.A)(function*(){try{yield h.user.getIdToken(!0)}catch(f){return void("auth/network-request-failed"===f?.code&&h.schedule(!0))}h.schedule()})()}}class uo{constructor(h,f){this.createdAt=h,this.lastLoginAt=f,this._initializeTime()}_initializeTime(){this.lastSignInTime=lo(this.lastLoginAt),this.creationTime=lo(this.createdAt)}_copy(h){this.createdAt=h.createdAt,this.lastLoginAt=h.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}function ho(_){return Uc.apply(this,arguments)}function Uc(){return(Uc=(0,H.A)(function*(_){var h;const f=_.auth,y=yield _.getIdToken(),C=yield co(_,ta(f,{idToken:y}));$(C?.users.length,f,"internal-error");const k=C.users[0];_._notifyReloadListener(k);const K=null!==(h=k.providerUserInfo)&&void 0!==h&&h.length?id(k.providerUserInfo):[],le=function Ip(_,h){return[..._.filter(y=>!h.some(C=>C.providerId===y.providerId)),...h]}(_.providerData,K),Kt=!!_.isAnonymous&&!(_.email&&k.passwordHash||le?.length),$t={uid:k.localId,displayName:k.displayName||null,photoURL:k.photoUrl||null,email:k.email||null,emailVerified:k.emailVerified||!1,phoneNumber:k.phoneNumber||null,tenantId:k.tenantId||null,providerData:le,metadata:new uo(k.createdAt,k.lastLoginAt),isAnonymous:Kt};Object.assign(_,$t)})).apply(this,arguments)}function Bc(){return(Bc=(0,H.A)(function*(_){const h=(0,ve.Ku)(_);yield ho(h),yield h.auth._persistUserIfCurrent(h),h.auth._notifyListenersIfCurrent(h)})).apply(this,arguments)}function id(_){return _.map(h=>{var{providerId:f}=h,y=(0,Ii.Tt)(h,["providerId"]);return{providerId:f,uid:y.rawId||"",displayName:y.displayName||null,email:y.email||null,phoneNumber:y.phoneNumber||null,photoURL:y.photoUrl||null}})}function wl(){return(wl=(0,H.A)(function*(_,h){const f=yield Ge(_,{},(0,H.A)(function*(){const y=(0,ve.Am)({grant_type:"refresh_token",refresh_token:h}).slice(1),{tokenApiHost:C,apiKey:k}=_.config,K=De(_,C,"/v1/token",`key=${k}`),le=yield _._getAdditionalHeaders();return le["Content-Type"]="application/x-www-form-urlencoded",Q.fetch()(K,{method:"POST",headers:le,body:y})}));return{accessToken:f.access_token,expiresIn:f.expires_in,refreshToken:f.refresh_token}})).apply(this,arguments)}function X(){return(X=(0,H.A)(function*(_,h){return ye(_,"POST","/v2/accounts:revokeToken",re(_,h))})).apply(this,arguments)}class Z{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(h){$(h.idToken,"internal-error"),$(typeof h.idToken<"u","internal-error"),$(typeof h.refreshToken<"u","internal-error");const f="expiresIn"in h&&typeof h.expiresIn<"u"?Number(h.expiresIn):Lc(h.idToken);this.updateTokensAndExpiration(h.idToken,h.refreshToken,f)}updateFromIdToken(h){$(0!==h.length,"internal-error");const f=Lc(h);this.updateTokensAndExpiration(h,null,f)}getToken(h,f=!1){var y=this;return(0,H.A)(function*(){return f||!y.accessToken||y.isExpired?($(y.refreshToken,h,"user-token-expired"),y.refreshToken?(yield y.refresh(h,y.refreshToken),y.accessToken):null):y.accessToken})()}clearRefreshToken(){this.refreshToken=null}refresh(h,f){var y=this;return(0,H.A)(function*(){const{accessToken:C,refreshToken:k,expiresIn:K}=yield function rd(_,h){return wl.apply(this,arguments)}(h,f);y.updateTokensAndExpiration(C,k,Number(K))})()}updateTokensAndExpiration(h,f,y){this.refreshToken=f||null,this.accessToken=h||null,this.expirationTime=Date.now()+1e3*y}static fromJSON(h,f){const{refreshToken:y,accessToken:C,expirationTime:k}=f,K=new Z;return y&&($("string"==typeof y,"internal-error",{appName:h}),K.refreshToken=y),C&&($("string"==typeof C,"internal-error",{appName:h}),K.accessToken=C),k&&($("number"==typeof k,"internal-error",{appName:h}),K.expirationTime=k),K}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(h){this.accessToken=h.accessToken,this.refreshToken=h.refreshToken,this.expirationTime=h.expirationTime}_clone(){return Object.assign(new Z,this.toJSON())}_performRefresh(){return te("not implemented")}}function ne(_,h){$("string"==typeof _||typeof _>"u","internal-error",{appName:h})}class fe{constructor(h){var{uid:f,auth:y,stsTokenManager:C}=h,k=(0,Ii.Tt)(h,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new $s(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=f,this.auth=y,this.stsTokenManager=C,this.accessToken=C.accessToken,this.displayName=k.displayName||null,this.email=k.email||null,this.emailVerified=k.emailVerified||!1,this.phoneNumber=k.phoneNumber||null,this.photoURL=k.photoURL||null,this.isAnonymous=k.isAnonymous||!1,this.tenantId=k.tenantId||null,this.providerData=k.providerData?[...k.providerData]:[],this.metadata=new uo(k.createdAt||void 0,k.lastLoginAt||void 0)}getIdToken(h){var f=this;return(0,H.A)(function*(){const y=yield co(f,f.stsTokenManager.getToken(f.auth,h));return $(y,f.auth,"internal-error"),f.accessToken!==y&&(f.accessToken=y,yield f.auth._persistUserIfCurrent(f),f.auth._notifyListenersIfCurrent(f)),y})()}getIdTokenResult(h){return function Qa(_){return kr.apply(this,arguments)}(this,h)}reload(){return function nd(_){return Bc.apply(this,arguments)}(this)}_assign(h){this!==h&&($(this.uid===h.uid,this.auth,"internal-error"),this.displayName=h.displayName,this.photoURL=h.photoURL,this.email=h.email,this.emailVerified=h.emailVerified,this.phoneNumber=h.phoneNumber,this.isAnonymous=h.isAnonymous,this.tenantId=h.tenantId,this.providerData=h.providerData.map(f=>Object.assign({},f)),this.metadata._copy(h.metadata),this.stsTokenManager._assign(h.stsTokenManager))}_clone(h){const f=new fe(Object.assign(Object.assign({},this),{auth:h,stsTokenManager:this.stsTokenManager._clone()}));return f.metadata._copy(this.metadata),f}_onReload(h){$(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=h,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(h){this.reloadListener?this.reloadListener(h):this.reloadUserInfo=h}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(h,f=!1){var y=this;return(0,H.A)(function*(){let C=!1;h.idToken&&h.idToken!==y.stsTokenManager.accessToken&&(y.stsTokenManager.updateFromServerResponse(h),C=!0),f&&(yield ho(y)),yield y.auth._persistUserIfCurrent(y),C&&y.auth._notifyListenersIfCurrent(y)})()}delete(){var h=this;return(0,H.A)(function*(){if((0,Gt._isFirebaseServerApp)(h.auth.app))return Promise.reject(Oe(h.auth));const f=yield h.getIdToken();return yield co(h,function Fc(_,h){return Ya.apply(this,arguments)}(h.auth,{idToken:f})),h.stsTokenManager.clearRefreshToken(),h.auth.signOut()})()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(h=>Object.assign({},h)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(h,f){var y,C,k,K,le,Ne,wt,Kt;const $t=null!==(y=f.displayName)&&void 0!==y?y:void 0,Sr=null!==(C=f.email)&&void 0!==C?C:void 0,Ca=null!==(k=f.phoneNumber)&&void 0!==k?k:void 0,ou=null!==(K=f.photoURL)&&void 0!==K?K:void 0,fy=null!==(le=f.tenantId)&&void 0!==le?le:void 0,py=null!==(Ne=f._redirectEventId)&&void 0!==Ne?Ne:void 0,my=null!==(wt=f.createdAt)&&void 0!==wt?wt:void 0,mM=null!==(Kt=f.lastLoginAt)&&void 0!==Kt?Kt:void 0,{uid:Tm,emailVerified:gM,isAnonymous:zw,providerData:gy,stsTokenManager:Sm}=f;$(Tm&&Sm,h,"internal-error");const M2=Z.fromJSON(this.name,Sm);$("string"==typeof Tm,h,"internal-error"),ne($t,h.name),ne(Sr,h.name),$("boolean"==typeof gM,h,"internal-error"),$("boolean"==typeof zw,h,"internal-error"),ne(Ca,h.name),ne(ou,h.name),ne(fy,h.name),ne(py,h.name),ne(my,h.name),ne(mM,h.name);const Hw=new fe({uid:Tm,auth:h,email:Sr,emailVerified:gM,displayName:$t,isAnonymous:zw,photoURL:ou,phoneNumber:Ca,tenantId:fy,stsTokenManager:M2,createdAt:my,lastLoginAt:mM});return gy&&Array.isArray(gy)&&(Hw.providerData=gy.map(_y=>Object.assign({},_y))),py&&(Hw._redirectEventId=py),Hw}static _fromIdTokenResponse(h,f,y=!1){return(0,H.A)(function*(){const C=new Z;C.updateFromServerResponse(f);const k=new fe({uid:f.localId,auth:h,stsTokenManager:C,isAnonymous:y});return yield ho(k),k})()}static _fromGetAccountInfoResponse(h,f,y){return(0,H.A)(function*(){const C=f.users[0];$(void 0!==C.localId,"internal-error");const k=void 0!==C.providerUserInfo?id(C.providerUserInfo):[],K=!(C.email&&C.passwordHash||k?.length),le=new Z;le.updateFromIdToken(y);const Ne=new fe({uid:C.localId,auth:h,stsTokenManager:le,isAnonymous:K}),wt={uid:C.localId,displayName:C.displayName||null,photoURL:C.photoUrl||null,email:C.email||null,emailVerified:C.emailVerified||!1,phoneNumber:C.phoneNumber||null,tenantId:C.tenantId||null,providerData:k,metadata:new uo(C.createdAt,C.lastLoginAt),isAnonymous:!(C.email&&C.passwordHash||k?.length)};return Object.assign(Ne,wt),Ne})()}}const Wt=new Map;function Mt(_){qe(_ instanceof Function,"Expected a class definition");let h=Wt.get(_);return h?(qe(h instanceof _,"Instance stored in cache mismatched with class"),h):(h=new _,Wt.set(_,h),h)}const Xr=(()=>{class _{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return(0,H.A)(function*(){return!0})()}_set(f,y){var C=this;return(0,H.A)(function*(){C.storage[f]=y})()}_get(f){var y=this;return(0,H.A)(function*(){const C=y.storage[f];return void 0===C?null:C})()}_remove(f){var y=this;return(0,H.A)(function*(){delete y.storage[f]})()}_addListener(f,y){}_removeListener(f,y){}}return _.type="NONE",_})();function vn(_,h,f){return`firebase:${_}:${h}:${f}`}class Br{constructor(h,f,y){this.persistence=h,this.auth=f,this.userKey=y;const{config:C,name:k}=this.auth;this.fullUserKey=vn(this.userKey,C.apiKey,k),this.fullPersistenceKey=vn("persistence",C.apiKey,k),this.boundEventHandler=f._onStorageEvent.bind(f),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(h){return this.persistence._set(this.fullUserKey,h.toJSON())}getCurrentUser(){var h=this;return(0,H.A)(function*(){const f=yield h.persistence._get(h.fullUserKey);return f?fe._fromJSON(h.auth,f):null})()}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(h){var f=this;return(0,H.A)(function*(){if(f.persistence===h)return;const y=yield f.getCurrentUser();return yield f.removeCurrentUser(),f.persistence=h,y?f.setCurrentUser(y):void 0})()}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(h,f,y="authUser"){return(0,H.A)(function*(){if(!f.length)return new Br(Mt(Xr),h,y);const C=(yield Promise.all(f.map(function(){var wt=(0,H.A)(function*(Kt){if(yield Kt._isAvailable())return Kt});return function(Kt){return wt.apply(this,arguments)}}()))).filter(wt=>wt);let k=C[0]||Mt(Xr);const K=vn(y,h.config.apiKey,h.name);let le=null;for(const wt of f)try{const Kt=yield wt._get(K);if(Kt){const $t=fe._fromJSON(h,Kt);wt!==k&&(le=$t),k=wt;break}}catch{}const Ne=C.filter(wt=>wt._shouldAllowMigration);return k._shouldAllowMigration&&Ne.length?(k=Ne[0],le&&(yield k._set(K,le.toJSON())),yield Promise.all(f.map(function(){var wt=(0,H.A)(function*(Kt){if(Kt!==k)try{yield Kt._remove(K)}catch{}});return function(Kt){return wt.apply(this,arguments)}}())),new Br(k,h,y)):new Br(k,h,y)})()}}function yn(_){const h=_.toLowerCase();if(h.includes("opera/")||h.includes("opr/")||h.includes("opios/"))return"Opera";if(Tn(h))return"IEMobile";if(h.includes("msie")||h.includes("trident/"))return"IE";if(h.includes("edge/"))return"Edge";if(ws(h))return"Firefox";if(h.includes("silk/"))return"Silk";if(sd(h))return"Blackberry";if(sv(h))return"Webos";if(El(h))return"Safari";if((h.includes("chrome/")||ki(h))&&!h.includes("edge/"))return"Chrome";if(Ja(h))return"Android";{const y=_.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/);if(2===y?.length)return y[1]}return"Other"}function ws(_=(0,ve.ZQ)()){return/firefox\//i.test(_)}function El(_=(0,ve.ZQ)()){const h=_.toLowerCase();return h.includes("safari/")&&!h.includes("chrome/")&&!h.includes("crios/")&&!h.includes("android")}function ki(_=(0,ve.ZQ)()){return/crios\//i.test(_)}function Tn(_=(0,ve.ZQ)()){return/iemobile/i.test(_)}function Ja(_=(0,ve.ZQ)()){return/android/i.test(_)}function sd(_=(0,ve.ZQ)()){return/blackberry/i.test(_)}function sv(_=(0,ve.ZQ)()){return/webos/i.test(_)}function Tl(_=(0,ve.ZQ)()){return/iphone|ipad|ipod/i.test(_)||/macintosh/i.test(_)&&/mobile/i.test(_)}function _e(_=(0,ve.ZQ)()){return Tl(_)||Ja(_)||sv(_)||sd(_)||/windows phone/i.test(_)||Tn(_)}function Dt(_,h=[]){let f;switch(_){case"Browser":f=yn((0,ve.ZQ)());break;case"Worker":f=`${yn((0,ve.ZQ)())}-${_}`;break;default:f=_}const y=h.length?h.join(","):"FirebaseCore-web";return`${f}/JsCore/${Gt.SDK_VERSION}/${y}`}class kn{constructor(h){this.auth=h,this.queue=[]}pushCallback(h,f){const y=k=>new Promise((K,le)=>{try{K(h(k))}catch(Ne){le(Ne)}});y.onAbort=f,this.queue.push(y);const C=this.queue.length-1;return()=>{this.queue[C]=()=>Promise.resolve()}}runMiddleware(h){var f=this;return(0,H.A)(function*(){if(f.auth.currentUser===h)return;const y=[];try{for(const C of f.queue)yield C(h),C.onAbort&&y.push(C.onAbort)}catch(C){y.reverse();for(const k of y)try{k()}catch{}throw f.auth._errorFactory.create("login-blocked",{originalMessage:C?.message})}})()}}function Gn(){return(Gn=(0,H.A)(function*(_,h={}){return ye(_,"GET","/v2/passwordPolicy",re(_,h))})).apply(this,arguments)}class Er{constructor(h){var f,y,C,k;const K=h.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=null!==(f=K.minPasswordLength)&&void 0!==f?f:6,K.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=K.maxPasswordLength),void 0!==K.containsLowercaseCharacter&&(this.customStrengthOptions.containsLowercaseLetter=K.containsLowercaseCharacter),void 0!==K.containsUppercaseCharacter&&(this.customStrengthOptions.containsUppercaseLetter=K.containsUppercaseCharacter),void 0!==K.containsNumericCharacter&&(this.customStrengthOptions.containsNumericCharacter=K.containsNumericCharacter),void 0!==K.containsNonAlphanumericCharacter&&(this.customStrengthOptions.containsNonAlphanumericCharacter=K.containsNonAlphanumericCharacter),this.enforcementState=h.enforcementState,"ENFORCEMENT_STATE_UNSPECIFIED"===this.enforcementState&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=null!==(C=null===(y=h.allowedNonAlphanumericCharacters)||void 0===y?void 0:y.join(""))&&void 0!==C?C:"",this.forceUpgradeOnSignin=null!==(k=h.forceUpgradeOnSignin)&&void 0!==k&&k,this.schemaVersion=h.schemaVersion}validatePassword(h){var f,y,C,k,K,le;const Ne={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(h,Ne),this.validatePasswordCharacterOptions(h,Ne),Ne.isValid&&(Ne.isValid=null===(f=Ne.meetsMinPasswordLength)||void 0===f||f),Ne.isValid&&(Ne.isValid=null===(y=Ne.meetsMaxPasswordLength)||void 0===y||y),Ne.isValid&&(Ne.isValid=null===(C=Ne.containsLowercaseLetter)||void 0===C||C),Ne.isValid&&(Ne.isValid=null===(k=Ne.containsUppercaseLetter)||void 0===k||k),Ne.isValid&&(Ne.isValid=null===(K=Ne.containsNumericCharacter)||void 0===K||K),Ne.isValid&&(Ne.isValid=null===(le=Ne.containsNonAlphanumericCharacter)||void 0===le||le),Ne}validatePasswordLengthOptions(h,f){const y=this.customStrengthOptions.minPasswordLength,C=this.customStrengthOptions.maxPasswordLength;y&&(f.meetsMinPasswordLength=h.length>=y),C&&(f.meetsMaxPasswordLength=h.length<=C)}validatePasswordCharacterOptions(h,f){let y;this.updatePasswordCharacterOptionsStatuses(f,!1,!1,!1,!1);for(let C=0;C<h.length;C++)y=h.charAt(C),this.updatePasswordCharacterOptionsStatuses(f,y>="a"&&y<="z",y>="A"&&y<="Z",y>="0"&&y<="9",this.allowedNonAlphanumericCharacters.includes(y))}updatePasswordCharacterOptionsStatuses(h,f,y,C,k){this.customStrengthOptions.containsLowercaseLetter&&(h.containsLowercaseLetter||(h.containsLowercaseLetter=f)),this.customStrengthOptions.containsUppercaseLetter&&(h.containsUppercaseLetter||(h.containsUppercaseLetter=y)),this.customStrengthOptions.containsNumericCharacter&&(h.containsNumericCharacter||(h.containsNumericCharacter=C)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(h.containsNonAlphanumericCharacter||(h.containsNonAlphanumericCharacter=k))}}class Ro{constructor(h,f,y,C){this.app=h,this.heartbeatServiceProvider=f,this.appCheckServiceProvider=y,this.config=C,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new el(this),this.idTokenSubscription=new el(this),this.beforeStateQueue=new kn(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=xn,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=h.name,this.clientVersion=C.sdkClientVersion}_initializeWithPersistence(h,f){var y=this;return f&&(this._popupRedirectResolver=Mt(f)),this._initializationPromise=this.queue((0,H.A)(function*(){var C,k;if(!y._deleted&&(y.persistenceManager=yield Br.create(y,h),!y._deleted)){if(null!==(C=y._popupRedirectResolver)&&void 0!==C&&C._shouldInitProactively)try{yield y._popupRedirectResolver._initialize(y)}catch{}yield y.initializeCurrentUser(f),y.lastNotifiedUid=(null===(k=y.currentUser)||void 0===k?void 0:k.uid)||null,!y._deleted&&(y._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){var h=this;return(0,H.A)(function*(){if(h._deleted)return;const f=yield h.assertedPersistence.getCurrentUser();if(h.currentUser||f){if(h.currentUser&&f&&h.currentUser.uid===f.uid)return h._currentUser._assign(f),void(yield h.currentUser.getIdToken());yield h._updateCurrentUser(f,!0)}})()}initializeCurrentUserFromIdToken(h){var f=this;return(0,H.A)(function*(){try{const y=yield ta(f,{idToken:h}),C=yield fe._fromGetAccountInfoResponse(f,y,h);yield f.directlySetCurrentUser(C)}catch(y){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",y),yield f.directlySetCurrentUser(null)}})()}initializeCurrentUser(h){var f=this;return(0,H.A)(function*(){var y;if((0,Gt._isFirebaseServerApp)(f.app)){const le=f.app.settings.authIdToken;return le?new Promise(Ne=>{setTimeout(()=>f.initializeCurrentUserFromIdToken(le).then(Ne,Ne))}):f.directlySetCurrentUser(null)}const C=yield f.assertedPersistence.getCurrentUser();let k=C,K=!1;if(h&&f.config.authDomain){yield f.getOrInitRedirectPersistenceManager();const le=null===(y=f.redirectUser)||void 0===y?void 0:y._redirectEventId,Ne=k?._redirectEventId,wt=yield f.tryRedirectSignIn(h);(!le||le===Ne)&&wt?.user&&(k=wt.user,K=!0)}if(!k)return f.directlySetCurrentUser(null);if(!k._redirectEventId){if(K)try{yield f.beforeStateQueue.runMiddleware(k)}catch(le){k=C,f._popupRedirectResolver._overrideRedirectResult(f,()=>Promise.reject(le))}return k?f.reloadAndSetCurrentUserOrClear(k):f.directlySetCurrentUser(null)}return $(f._popupRedirectResolver,f,"argument-error"),yield f.getOrInitRedirectPersistenceManager(),f.redirectUser&&f.redirectUser._redirectEventId===k._redirectEventId?f.directlySetCurrentUser(k):f.reloadAndSetCurrentUserOrClear(k)})()}tryRedirectSignIn(h){var f=this;return(0,H.A)(function*(){let y=null;try{y=yield f._popupRedirectResolver._completeRedirectFn(f,h,!0)}catch{yield f._setRedirectUser(null)}return y})()}reloadAndSetCurrentUserOrClear(h){var f=this;return(0,H.A)(function*(){try{yield ho(h)}catch(y){if("auth/network-request-failed"!==y?.code)return f.directlySetCurrentUser(null)}return f.directlySetCurrentUser(h)})()}useDeviceLanguage(){this.languageCode=function Ei(){if(typeof navigator>"u")return null;const _=navigator;return _.languages&&_.languages[0]||_.language||null}()}_delete(){var h=this;return(0,H.A)(function*(){h._deleted=!0})()}updateCurrentUser(h){var f=this;return(0,H.A)(function*(){if((0,Gt._isFirebaseServerApp)(f.app))return Promise.reject(Oe(f));const y=h?(0,ve.Ku)(h):null;return y&&$(y.auth.config.apiKey===f.config.apiKey,f,"invalid-user-token"),f._updateCurrentUser(y&&y._clone(f))})()}_updateCurrentUser(h,f=!1){var y=this;return(0,H.A)(function*(){if(!y._deleted)return h&&$(y.tenantId===h.tenantId,y,"tenant-id-mismatch"),f||(yield y.beforeStateQueue.runMiddleware(h)),y.queue((0,H.A)(function*(){yield y.directlySetCurrentUser(h),y.notifyAuthListeners()}))})()}signOut(){var h=this;return(0,H.A)(function*(){return(0,Gt._isFirebaseServerApp)(h.app)?Promise.reject(Oe(h)):(yield h.beforeStateQueue.runMiddleware(null),(h.redirectPersistenceManager||h._popupRedirectResolver)&&(yield h._setRedirectUser(null)),h._updateCurrentUser(null,!0))})()}setPersistence(h){var f=this;return(0,Gt._isFirebaseServerApp)(this.app)?Promise.reject(Oe(this)):this.queue((0,H.A)(function*(){yield f.assertedPersistence.setPersistence(Mt(h))}))}_getRecaptchaConfig(){return null==this.tenantId?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}validatePassword(h){var f=this;return(0,H.A)(function*(){f._getPasswordPolicyInternal()||(yield f._updatePasswordPolicy());const y=f._getPasswordPolicyInternal();return y.schemaVersion!==f.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(f._errorFactory.create("unsupported-password-policy-schema-version",{})):y.validatePassword(h)})()}_getPasswordPolicyInternal(){return null===this.tenantId?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}_updatePasswordPolicy(){var h=this;return(0,H.A)(function*(){const f=yield function Bn(_){return Gn.apply(this,arguments)}(h),y=new Er(f);null===h.tenantId?h._projectPasswordPolicy=y:h._tenantPasswordPolicies[h.tenantId]=y})()}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(h){this._errorFactory=new ve.FA("auth","Firebase",h())}onAuthStateChanged(h,f,y){return this.registerStateListener(this.authStateSubscription,h,f,y)}beforeAuthStateChanged(h,f){return this.beforeStateQueue.pushCallback(h,f)}onIdTokenChanged(h,f,y){return this.registerStateListener(this.idTokenSubscription,h,f,y)}authStateReady(){return new Promise((h,f)=>{if(this.currentUser)h();else{const y=this.onAuthStateChanged(()=>{y(),h()},f)}})}revokeAccessToken(h){var f=this;return(0,H.A)(function*(){if(f.currentUser){const y=yield f.currentUser.getIdToken(),C={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:h,idToken:y};null!=f.tenantId&&(C.tenantId=f.tenantId),yield function q(_,h){return X.apply(this,arguments)}(f,C)}})()}toJSON(){var h;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(h=this._currentUser)||void 0===h?void 0:h.toJSON()}}_setRedirectUser(h,f){var y=this;return(0,H.A)(function*(){const C=yield y.getOrInitRedirectPersistenceManager(f);return null===h?C.removeCurrentUser():C.setCurrentUser(h)})()}getOrInitRedirectPersistenceManager(h){var f=this;return(0,H.A)(function*(){if(!f.redirectPersistenceManager){const y=h&&Mt(h)||f._popupRedirectResolver;$(y,f,"argument-error"),f.redirectPersistenceManager=yield Br.create(f,[Mt(y._redirectPersistence)],"redirectUser"),f.redirectUser=yield f.redirectPersistenceManager.getCurrentUser()}return f.redirectPersistenceManager})()}_redirectUserForId(h){var f=this;return(0,H.A)(function*(){var y,C;return f._isInitialized&&(yield f.queue((0,H.A)(function*(){}))),(null===(y=f._currentUser)||void 0===y?void 0:y._redirectEventId)===h?f._currentUser:(null===(C=f.redirectUser)||void 0===C?void 0:C._redirectEventId)===h?f.redirectUser:null})()}_persistUserIfCurrent(h){var f=this;return(0,H.A)(function*(){if(h===f.currentUser)return f.queue((0,H.A)(function*(){return f.directlySetCurrentUser(h)}))})()}_notifyListenersIfCurrent(h){h===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var h,f;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const y=null!==(f=null===(h=this.currentUser)||void 0===h?void 0:h.uid)&&void 0!==f?f:null;this.lastNotifiedUid!==y&&(this.lastNotifiedUid=y,this.authStateSubscription.next(this.currentUser))}registerStateListener(h,f,y,C){if(this._deleted)return()=>{};const k="function"==typeof f?f:f.next.bind(f);let K=!1;const le=this._isInitialized?Promise.resolve():this._initializationPromise;if($(le,this,"internal-error"),le.then(()=>{K||k(this.currentUser)}),"function"==typeof f){const Ne=h.addObserver(f,y,C);return()=>{K=!0,Ne()}}{const Ne=h.addObserver(f);return()=>{K=!0,Ne()}}}directlySetCurrentUser(h){var f=this;return(0,H.A)(function*(){f.currentUser&&f.currentUser!==h&&f._currentUser._stopProactiveRefresh(),h&&f.isProactiveRefreshEnabled&&h._startProactiveRefresh(),f.currentUser=h,h?yield f.assertedPersistence.setCurrentUser(h):yield f.assertedPersistence.removeCurrentUser()})()}queue(h){return this.operations=this.operations.then(h,h),this.operations}get assertedPersistence(){return $(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(h){!h||this.frameworks.includes(h)||(this.frameworks.push(h),this.frameworks.sort(),this.clientVersion=Dt(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){var h=this;return(0,H.A)(function*(){var f;const y={"X-Client-Version":h.clientVersion};h.app.options.appId&&(y["X-Firebase-gmpid"]=h.app.options.appId);const C=yield null===(f=h.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===f?void 0:f.getHeartbeatsHeader();C&&(y["X-Firebase-Client"]=C);const k=yield h._getAppCheckToken();return k&&(y["X-Firebase-AppCheck"]=k),y})()}_getAppCheckToken(){var h=this;return(0,H.A)(function*(){var f;const y=yield null===(f=h.appCheckServiceProvider.getImmediate({optional:!0}))||void 0===f?void 0:f.getToken();return y?.error&&function rs(_,...h){is.logLevel<=on.$b.WARN&&is.warn(`Auth (${Gt.SDK_VERSION}): ${_}`,...h)}(`Error while retrieving App Check token: ${y.error}`),y?.token})()}}function Vi(_){return(0,ve.Ku)(_)}class el{constructor(h){this.auth=h,this.observer=null,this.addObserver=(0,ve.tD)(f=>this.observer=f)}get next(){return $(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}let Cp={loadJS:()=>(0,H.A)(function*(){throw new Error("Unable to load external scripts")})(),recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function Rx(_){return Cp.loadJS(_)}function Px(_){return`__${_}${Math.floor(1e6*Math.random())}`}class An{constructor(h){this.type="recaptcha-enterprise",this.auth=Vi(h)}verify(h="verify",f=!1){var y=this;return(0,H.A)(function*(){function k(){return k=(0,H.A)(function*(le){if(!f){if(null==le.tenantId&&null!=le._agentRecaptchaConfig)return le._agentRecaptchaConfig.siteKey;if(null!=le.tenantId&&void 0!==le._tenantRecaptchaConfigs[le.tenantId])return le._tenantRecaptchaConfigs[le.tenantId].siteKey}return new Promise(function(){var Ne=(0,H.A)(function*(wt,Kt){$r(le,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then($t=>{if(void 0!==$t.recaptchaKey){const Sr=new fi($t);return null==le.tenantId?le._agentRecaptchaConfig=Sr:le._tenantRecaptchaConfigs[le.tenantId]=Sr,wt(Sr.siteKey)}Kt(new Error("recaptcha Enterprise site key undefined"))}).catch($t=>{Kt($t)})});return function(wt,Kt){return Ne.apply(this,arguments)}}())}),k.apply(this,arguments)}function K(le,Ne,wt){const Kt=window.grecaptcha;Nn(Kt)?Kt.enterprise.ready(()=>{Kt.enterprise.execute(le,{action:h}).then($t=>{Ne($t)}).catch(()=>{Ne("NO_RECAPTCHA")})}):wt(Error("No reCAPTCHA enterprise script loaded."))}return new Promise((le,Ne)=>{(function C(le){return k.apply(this,arguments)})(y.auth).then(wt=>{if(!f&&Nn(window.grecaptcha))K(wt,le,Ne);else{if(typeof window>"u")return void Ne(new Error("RecaptchaVerifier is only supported in browser"));let Kt=function _C(){return Cp.recaptchaEnterpriseScript}();0!==Kt.length&&(Kt+=wt),Rx(Kt).then(()=>{K(wt,le,Ne)}).catch($t=>{Ne($t)})}}).catch(wt=>{Ne(wt)})})})()}}function vC(_,h,f){return kx.apply(this,arguments)}function kx(){return(kx=(0,H.A)(function*(_,h,f,y=!1){const C=new An(_);let k;try{k=yield C.verify(f)}catch{k=yield C.verify(f,!0)}const K=Object.assign({},h);return Object.assign(K,y?{captchaResp:k}:{captchaResponse:k}),Object.assign(K,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(K,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),K})).apply(this,arguments)}function Mp(_,h,f,y){return dt.apply(this,arguments)}function dt(){return dt=(0,H.A)(function*(_,h,f,y){var C;if(null!==(C=_._getRecaptchaConfig())&&void 0!==C&&C.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const k=yield vC(_,h,f,"getOobCode"===f);return y(_,k)}return y(_,h).catch(function(){var k=(0,H.A)(function*(K){if("auth/missing-recaptcha-token"===K.code){console.log(`${f} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const le=yield vC(_,h,f,"getOobCode"===f);return y(_,le)}return Promise.reject(K)});return function(K){return k.apply(this,arguments)}}())}),dt.apply(this,arguments)}function Ox(_){const h=_.indexOf(":");return h<0?"":_.substr(0,h+1)}function Eh(_){if(!_)return null;const h=Number(_);return isNaN(h)?null:h}class zc{constructor(h,f){this.providerId=h,this.signInMethod=f}toJSON(){return te("not implemented")}_getIdTokenResponse(h){return te("not implemented")}_linkToIdToken(h,f){return te("not implemented")}_getReauthenticationResolver(h){return te("not implemented")}}function Nx(_,h){return ti.apply(this,arguments)}function ti(){return(ti=(0,H.A)(function*(_,h){return ye(_,"POST","/v1/accounts:resetPassword",re(_,h))})).apply(this,arguments)}function Pp(){return(Pp=(0,H.A)(function*(_,h){return ye(_,"POST","/v1/accounts:update",h)})).apply(this,arguments)}function fo(_,h){return kp.apply(this,arguments)}function kp(){return(kp=(0,H.A)(function*(_,h){return ye(_,"POST","/v1/accounts:signUp",h)})).apply(this,arguments)}function Yi(){return(Yi=(0,H.A)(function*(_,h){return ye(_,"POST","/v1/accounts:update",re(_,h))})).apply(this,arguments)}function e2(_,h){return Fx.apply(this,arguments)}function Fx(){return(Fx=(0,H.A)(function*(_,h){return Ie(_,"POST","/v1/accounts:signInWithPassword",re(_,h))})).apply(this,arguments)}function Fe(_,h){return Th.apply(this,arguments)}function Th(){return(Th=(0,H.A)(function*(_,h){return ye(_,"POST","/v1/accounts:sendOobCode",re(_,h))})).apply(this,arguments)}function Op(){return(Op=(0,H.A)(function*(_,h){return Fe(_,h)})).apply(this,arguments)}function uv(_,h){return dv.apply(this,arguments)}function dv(){return(dv=(0,H.A)(function*(_,h){return Fe(_,h)})).apply(this,arguments)}function hv(_,h){return Lx.apply(this,arguments)}function Lx(){return(Lx=(0,H.A)(function*(_,h){return Fe(_,h)})).apply(this,arguments)}function Vx(){return(Vx=(0,H.A)(function*(_,h){return Fe(_,h)})).apply(this,arguments)}function Ux(){return(Ux=(0,H.A)(function*(_,h){return Ie(_,"POST","/v1/accounts:signInWithEmailLink",re(_,h))})).apply(this,arguments)}function Ah(){return(Ah=(0,H.A)(function*(_,h){return Ie(_,"POST","/v1/accounts:signInWithEmailLink",re(_,h))})).apply(this,arguments)}class $l extends zc{constructor(h,f,y,C=null){super("password",y),this._email=h,this._password=f,this._tenantId=C}static _fromEmailAndPassword(h,f){return new $l(h,f,"password")}static _fromEmailAndCode(h,f,y=null){return new $l(h,f,"emailLink",y)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(h){const f="string"==typeof h?JSON.parse(h):h;if(f?.email&&f?.password){if("password"===f.signInMethod)return this._fromEmailAndPassword(f.email,f.password);if("emailLink"===f.signInMethod)return this._fromEmailAndCode(f.email,f.password,f.tenantId)}return null}_getIdTokenResponse(h){var f=this;return(0,H.A)(function*(){switch(f.signInMethod){case"password":return Mp(h,{returnSecureToken:!0,email:f._email,password:f._password,clientType:"CLIENT_TYPE_WEB"},"signInWithPassword",e2);case"emailLink":return function n2(_,h){return Ux.apply(this,arguments)}(h,{email:f._email,oobCode:f._password});default:ot(h,"internal-error")}})()}_linkToIdToken(h,f){var y=this;return(0,H.A)(function*(){switch(y.signInMethod){case"password":return Mp(h,{idToken:f,returnSecureToken:!0,email:y._email,password:y._password,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",fo);case"emailLink":return function Sh(_,h){return Ah.apply(this,arguments)}(h,{idToken:f,email:y._email,oobCode:y._password});default:ot(h,"internal-error")}})()}_getReauthenticationResolver(h){return this._getIdTokenResponse(h)}}function Sl(_,h){return fv.apply(this,arguments)}function fv(){return(fv=(0,H.A)(function*(_,h){return Ie(_,"POST","/v1/accounts:signInWithIdp",re(_,h))})).apply(this,arguments)}class Ta extends zc{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(h){const f=new Ta(h.providerId,h.signInMethod);return h.idToken||h.accessToken?(h.idToken&&(f.idToken=h.idToken),h.accessToken&&(f.accessToken=h.accessToken),h.nonce&&!h.pendingToken&&(f.nonce=h.nonce),h.pendingToken&&(f.pendingToken=h.pendingToken)):h.oauthToken&&h.oauthTokenSecret?(f.accessToken=h.oauthToken,f.secret=h.oauthTokenSecret):ot("argument-error"),f}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(h){const f="string"==typeof h?JSON.parse(h):h,{providerId:y,signInMethod:C}=f,k=(0,Ii.Tt)(f,["providerId","signInMethod"]);if(!y||!C)return null;const K=new Ta(y,C);return K.idToken=k.idToken||void 0,K.accessToken=k.accessToken||void 0,K.secret=k.secret,K.nonce=k.nonce,K.pendingToken=k.pendingToken||null,K}_getIdTokenResponse(h){return Sl(h,this.buildRequest())}_linkToIdToken(h,f){const y=this.buildRequest();return y.idToken=f,Sl(h,y)}_getReauthenticationResolver(h){const f=this.buildRequest();return f.autoCreate=!1,Sl(h,f)}buildRequest(){const h={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)h.pendingToken=this.pendingToken;else{const f={};this.idToken&&(f.id_token=this.idToken),this.accessToken&&(f.access_token=this.accessToken),this.secret&&(f.oauth_token_secret=this.secret),f.providerId=this.providerId,this.nonce&&!this.pendingToken&&(f.nonce=this.nonce),h.postBody=(0,ve.Am)(f)}return h}}function pv(){return(pv=(0,H.A)(function*(_,h){return ye(_,"POST","/v1/accounts:sendVerificationCode",re(_,h))})).apply(this,arguments)}function mv(){return(mv=(0,H.A)(function*(_,h){return Ie(_,"POST","/v1/accounts:signInWithPhoneNumber",re(_,h))})).apply(this,arguments)}function Np(){return(Np=(0,H.A)(function*(_,h){const f=yield Ie(_,"POST","/v1/accounts:signInWithPhoneNumber",re(_,h));if(f.temporaryProof)throw Tt(_,"account-exists-with-different-credential",f);return f})).apply(this,arguments)}const bt={USER_NOT_FOUND:"user-not-found"};function Ih(){return(Ih=(0,H.A)(function*(_,h){return Ie(_,"POST","/v1/accounts:signInWithPhoneNumber",re(_,Object.assign(Object.assign({},h),{operation:"REAUTH"})),bt)})).apply(this,arguments)}class Sa extends zc{constructor(h){super("phone","phone"),this.params=h}static _fromVerification(h,f){return new Sa({verificationId:h,verificationCode:f})}static _fromTokenResponse(h,f){return new Sa({phoneNumber:h,temporaryProof:f})}_getIdTokenResponse(h){return function ql(_,h){return mv.apply(this,arguments)}(h,this._makeVerificationRequest())}_linkToIdToken(h,f){return function ue(_,h){return Np.apply(this,arguments)}(h,Object.assign({idToken:f},this._makeVerificationRequest()))}_getReauthenticationResolver(h){return function Fp(_,h){return Ih.apply(this,arguments)}(h,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:h,phoneNumber:f,verificationId:y,verificationCode:C}=this.params;return h&&f?{temporaryProof:h,phoneNumber:f}:{sessionInfo:y,code:C}}toJSON(){const h={providerId:this.providerId};return this.params.phoneNumber&&(h.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(h.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(h.verificationCode=this.params.verificationCode),this.params.verificationId&&(h.verificationId=this.params.verificationId),h}static fromJSON(h){"string"==typeof h&&(h=JSON.parse(h));const{verificationId:f,verificationCode:y,phoneNumber:C,temporaryProof:k}=h;return y||f||C||k?new Sa({verificationId:f,verificationCode:y,phoneNumber:C,temporaryProof:k}):null}}class Ch{constructor(h){var f,y,C,k,K,le;const Ne=(0,ve.I9)((0,ve.hp)(h)),wt=null!==(f=Ne.apiKey)&&void 0!==f?f:null,Kt=null!==(y=Ne.oobCode)&&void 0!==y?y:null,$t=function xC(_){switch(_){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(C=Ne.mode)&&void 0!==C?C:null);$(wt&&Kt&&$t,"argument-error"),this.apiKey=wt,this.operation=$t,this.code=Kt,this.continueUrl=null!==(k=Ne.continueUrl)&&void 0!==k?k:null,this.languageCode=null!==(K=Ne.languageCode)&&void 0!==K?K:null,this.tenantId=null!==(le=Ne.tenantId)&&void 0!==le?le:null}static parseLink(h){const f=function wC(_){const h=(0,ve.I9)((0,ve.hp)(_)).link,f=h?(0,ve.I9)((0,ve.hp)(h)).deep_link_id:null,y=(0,ve.I9)((0,ve.hp)(_)).deep_link_id;return(y?(0,ve.I9)((0,ve.hp)(y)).link:null)||y||f||h||_}(h);try{return new Ch(f)}catch{return null}}}let ad=(()=>{class _{constructor(){this.providerId=_.PROVIDER_ID}static credential(f,y){return $l._fromEmailAndPassword(f,y)}static credentialWithLink(f,y){const C=Ch.parseLink(y);return $(C,"argument-error"),$l._fromEmailAndCode(f,C.code,C.tenantId)}}return _.PROVIDER_ID="password",_.EMAIL_PASSWORD_SIGN_IN_METHOD="password",_.EMAIL_LINK_SIGN_IN_METHOD="emailLink",_})();class Kr{constructor(h){this.providerId=h,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(h){this.defaultLanguageCode=h}setCustomParameters(h){return this.customParameters=h,this}getCustomParameters(){return this.customParameters}}class qs extends Kr{constructor(){super(...arguments),this.scopes=[]}addScope(h){return this.scopes.includes(h)||this.scopes.push(h),this}getScopes(){return[...this.scopes]}}class ui extends qs{static credentialFromJSON(h){const f="string"==typeof h?JSON.parse(h):h;return $("providerId"in f&&"signInMethod"in f,"argument-error"),Ta._fromParams(f)}credential(h){return this._credential(Object.assign(Object.assign({},h),{nonce:h.rawNonce}))}_credential(h){return $(h.idToken||h.accessToken,"argument-error"),Ta._fromParams(Object.assign(Object.assign({},h),{providerId:this.providerId,signInMethod:this.providerId}))}static credentialFromResult(h){return ui.oauthCredentialFromTaggedObject(h)}static credentialFromError(h){return ui.oauthCredentialFromTaggedObject(h.customData||{})}static oauthCredentialFromTaggedObject({_tokenResponse:h}){if(!h)return null;const{oauthIdToken:f,oauthAccessToken:y,oauthTokenSecret:C,pendingToken:k,nonce:K,providerId:le}=h;if(!y&&!C&&!f&&!k||!le)return null;try{return new ui(le)._credential({idToken:f,accessToken:y,nonce:K,pendingToken:k})}catch{return null}}}let Mh=(()=>{class _ extends qs{constructor(){super("facebook.com")}static credential(f){return Ta._fromParams({providerId:_.PROVIDER_ID,signInMethod:_.FACEBOOK_SIGN_IN_METHOD,accessToken:f})}static credentialFromResult(f){return _.credentialFromTaggedObject(f)}static credentialFromError(f){return _.credentialFromTaggedObject(f.customData||{})}static credentialFromTaggedObject({_tokenResponse:f}){if(!f||!("oauthAccessToken"in f)||!f.oauthAccessToken)return null;try{return _.credential(f.oauthAccessToken)}catch{return null}}}return _.FACEBOOK_SIGN_IN_METHOD="facebook.com",_.PROVIDER_ID="facebook.com",_})(),Lp=(()=>{class _ extends qs{constructor(){super("google.com"),this.addScope("profile")}static credential(f,y){return Ta._fromParams({providerId:_.PROVIDER_ID,signInMethod:_.GOOGLE_SIGN_IN_METHOD,idToken:f,accessToken:y})}static credentialFromResult(f){return _.credentialFromTaggedObject(f)}static credentialFromError(f){return _.credentialFromTaggedObject(f.customData||{})}static credentialFromTaggedObject({_tokenResponse:f}){if(!f)return null;const{oauthIdToken:y,oauthAccessToken:C}=f;if(!y&&!C)return null;try{return _.credential(y,C)}catch{return null}}}return _.GOOGLE_SIGN_IN_METHOD="google.com",_.PROVIDER_ID="google.com",_})(),Vp=(()=>{class _ extends qs{constructor(){super("github.com")}static credential(f){return Ta._fromParams({providerId:_.PROVIDER_ID,signInMethod:_.GITHUB_SIGN_IN_METHOD,accessToken:f})}static credentialFromResult(f){return _.credentialFromTaggedObject(f)}static credentialFromError(f){return _.credentialFromTaggedObject(f.customData||{})}static credentialFromTaggedObject({_tokenResponse:f}){if(!f||!("oauthAccessToken"in f)||!f.oauthAccessToken)return null;try{return _.credential(f.oauthAccessToken)}catch{return null}}}return _.GITHUB_SIGN_IN_METHOD="github.com",_.PROVIDER_ID="github.com",_})();class po extends zc{constructor(h,f){super(h,h),this.pendingToken=f}_getIdTokenResponse(h){return Sl(h,this.buildRequest())}_linkToIdToken(h,f){const y=this.buildRequest();return y.idToken=f,Sl(h,y)}_getReauthenticationResolver(h){const f=this.buildRequest();return f.autoCreate=!1,Sl(h,f)}toJSON(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}static fromJSON(h){const f="string"==typeof h?JSON.parse(h):h,{providerId:y,signInMethod:C,pendingToken:k}=f;return y&&C&&k&&y===C?new po(y,k):null}static _create(h,f){return new po(h,f)}buildRequest(){return{requestUri:"http://localhost",returnSecureToken:!0,pendingToken:this.pendingToken}}}class Rh extends Kr{constructor(h){$(h.startsWith("saml."),"argument-error"),super(h)}static credentialFromResult(h){return Rh.samlCredentialFromTaggedObject(h)}static credentialFromError(h){return Rh.samlCredentialFromTaggedObject(h.customData||{})}static credentialFromJSON(h){const f=po.fromJSON(h);return $(f,"argument-error"),f}static samlCredentialFromTaggedObject({_tokenResponse:h}){if(!h)return null;const{pendingToken:f,providerId:y}=h;if(!f||!y)return null;try{return po._create(y,f)}catch{return null}}}let gv=(()=>{class _ extends qs{constructor(){super("twitter.com")}static credential(f,y){return Ta._fromParams({providerId:_.PROVIDER_ID,signInMethod:_.TWITTER_SIGN_IN_METHOD,oauthToken:f,oauthTokenSecret:y})}static credentialFromResult(f){return _.credentialFromTaggedObject(f)}static credentialFromError(f){return _.credentialFromTaggedObject(f.customData||{})}static credentialFromTaggedObject({_tokenResponse:f}){if(!f)return null;const{oauthAccessToken:y,oauthTokenSecret:C}=f;if(!y||!C)return null;try{return _.credential(y,C)}catch{return null}}}return _.TWITTER_SIGN_IN_METHOD="twitter.com",_.PROVIDER_ID="twitter.com",_})();function Up(_,h){return Bp.apply(this,arguments)}function Bp(){return(Bp=(0,H.A)(function*(_,h){return Ie(_,"POST","/v1/accounts:signUp",re(_,h))})).apply(this,arguments)}class Po{constructor(h){this.user=h.user,this.providerId=h.providerId,this._tokenResponse=h._tokenResponse,this.operationType=h.operationType}static _fromIdTokenResponse(h,f,y,C=!1){return(0,H.A)(function*(){const k=yield fe._fromIdTokenResponse(h,y,C),K=ld(y);return new Po({user:k,providerId:K,_tokenResponse:y,operationType:f})})()}static _forOperation(h,f,y){return(0,H.A)(function*(){yield h._updateTokensIfNecessary(y,!0);const C=ld(y);return new Po({user:h,providerId:C,_tokenResponse:y,operationType:f})})()}}function ld(_){return _.providerId?_.providerId:"phoneNumber"in _?"phone":null}function zp(){return(zp=(0,H.A)(function*(_){var h;if((0,Gt._isFirebaseServerApp)(_.app))return Promise.reject(Oe(_));const f=Vi(_);if(yield f._initializationPromise,null!==(h=f.currentUser)&&void 0!==h&&h.isAnonymous)return new Po({user:f.currentUser,providerId:null,operationType:"signIn"});const y=yield Up(f,{returnSecureToken:!0}),C=yield Po._fromIdTokenResponse(f,"signIn",y,!0);return yield f._updateCurrentUser(C.user),C})).apply(this,arguments)}class Hp extends ve.g{constructor(h,f,y,C){var k;super(f.code,f.message),this.operationType=y,this.user=C,Object.setPrototypeOf(this,Hp.prototype),this.customData={appName:h.name,tenantId:null!==(k=h.tenantId)&&void 0!==k?k:void 0,_serverResponse:f.customData._serverResponse,operationType:y}}static _fromErrorAndOperation(h,f,y,C){return new Hp(h,f,y,C)}}function _v(_,h,f,y){return("reauthenticate"===h?f._getReauthenticationResolver(_):f._getIdTokenResponse(_)).catch(k=>{throw"auth/multi-factor-auth-required"===k.code?Hp._fromErrorAndOperation(_,k,h,y):k})}function Hx(_){return new Set(_.map(({providerId:h})=>h).filter(h=>!!h))}function ko(){return ko=(0,H.A)(function*(_,h){const f=(0,ve.Ku)(_);yield Wp(!0,f,h);const{providerUserInfo:y}=yield function ao(_,h){return ea.apply(this,arguments)}(f.auth,{idToken:yield f.getIdToken(),deleteProvider:[h]}),C=Hx(y||[]);return f.providerData=f.providerData.filter(k=>C.has(k.providerId)),C.has("phone")||(f.phoneNumber=null),yield f.auth._persistUserIfCurrent(f),f}),ko.apply(this,arguments)}function vv(_,h){return Gp.apply(this,arguments)}function Gp(){return(Gp=(0,H.A)(function*(_,h,f=!1){const y=yield co(_,h._linkToIdToken(_.auth,yield _.getIdToken()),f);return Po._forOperation(_,"link",y)})).apply(this,arguments)}function Wp(_,h,f){return yv.apply(this,arguments)}function yv(){return(yv=(0,H.A)(function*(_,h,f){yield ho(h);const C=!1===_?"provider-already-linked":"no-such-provider";$(Hx(h.providerData).has(f)===_,h.auth,C)})).apply(this,arguments)}function Gx(_,h){return bv.apply(this,arguments)}function bv(){return(bv=(0,H.A)(function*(_,h,f=!1){const{auth:y}=_;if((0,Gt._isFirebaseServerApp)(y.app))return Promise.reject(Oe(y));const C="reauthenticate";try{const k=yield co(_,_v(y,C,h,_),f);$(k.idToken,y,"internal-error");const K=Za(k.idToken);$(K,y,"internal-error");const{sub:le}=K;return $(_.uid===le,y,"user-mismatch"),Po._forOperation(_,C,k)}catch(k){throw"auth/user-not-found"===k?.code&&ot(y,"user-mismatch"),k}})).apply(this,arguments)}function xv(_,h){return wv.apply(this,arguments)}function wv(){return(wv=(0,H.A)(function*(_,h,f=!1){if((0,Gt._isFirebaseServerApp)(_.app))return Promise.reject(Oe(_));const y="signIn",C=yield _v(_,y,h),k=yield Po._fromIdTokenResponse(_,y,C);return f||(yield _._updateCurrentUser(k.user)),k})).apply(this,arguments)}function jp(_,h){return Ev.apply(this,arguments)}function Ev(){return(Ev=(0,H.A)(function*(_,h){return xv(Vi(_),h)})).apply(this,arguments)}function hr(_,h){return Tv.apply(this,arguments)}function Tv(){return(Tv=(0,H.A)(function*(_,h){const f=(0,ve.Ku)(_);return yield Wp(!1,f,h.providerId),vv(f,h)})).apply(this,arguments)}function Wx(_,h){return Sv.apply(this,arguments)}function Sv(){return(Sv=(0,H.A)(function*(_,h){return Gx((0,ve.Ku)(_),h)})).apply(this,arguments)}function Av(){return(Av=(0,H.A)(function*(_,h){return Ie(_,"POST","/v1/accounts:signInWithCustomToken",re(_,h))})).apply(this,arguments)}function St(){return St=(0,H.A)(function*(_,h){if((0,Gt._isFirebaseServerApp)(_.app))return Promise.reject(Oe(_));const f=Vi(_),y=yield function ni(_,h){return Av.apply(this,arguments)}(f,{token:h,returnSecureToken:!0}),C=yield Po._fromIdTokenResponse(f,"signIn",y);return yield f._updateCurrentUser(C.user),C}),St.apply(this,arguments)}class ps{constructor(h,f){this.factorId=h,this.uid=f.mfaEnrollmentId,this.enrollmentTime=new Date(f.enrolledAt).toUTCString(),this.displayName=f.displayName}static _fromServerResponse(h,f){return"phoneInfo"in f?mi._fromServerResponse(h,f):"totpInfo"in f?ss._fromServerResponse(h,f):ot(h,"internal-error")}}class mi extends ps{constructor(h){super("phone",h),this.phoneNumber=h.phoneInfo}static _fromServerResponse(h,f){return new mi(f)}}class ss extends ps{constructor(h){super("totp",h)}static _fromServerResponse(h,f){return new ss(f)}}function ms(_,h,f){var y;$((null===(y=f.url)||void 0===y?void 0:y.length)>0,_,"invalid-continue-uri"),$(typeof f.dynamicLinkDomain>"u"||f.dynamicLinkDomain.length>0,_,"invalid-dynamic-link-domain"),h.continueUrl=f.url,h.dynamicLinkDomain=f.dynamicLinkDomain,h.canHandleCodeInApp=f.handleCodeInApp,f.iOS&&($(f.iOS.bundleId.length>0,_,"missing-ios-bundle-id"),h.iOSBundleId=f.iOS.bundleId),f.android&&($(f.android.packageName.length>0,_,"missing-android-pkg-name"),h.androidInstallApp=f.android.installApp,h.androidMinimumVersionCode=f.android.minimumVersion,h.androidPackageName=f.android.packageName)}function Kl(_){return Xs.apply(this,arguments)}function Xs(){return(Xs=(0,H.A)(function*(_){const h=Vi(_);h._getPasswordPolicyInternal()&&(yield h._updatePasswordPolicy())})).apply(this,arguments)}function $p(){return($p=(0,H.A)(function*(_,h,f){const y=Vi(_),C={requestType:"PASSWORD_RESET",email:h,clientType:"CLIENT_TYPE_WEB"};f&&ms(y,C,f),yield Mp(y,C,"getOobCode",uv)})).apply(this,arguments)}function Iv(){return Iv=(0,H.A)(function*(_,h,f){yield Nx((0,ve.Ku)(_),{oobCode:h,newPassword:f}).catch(function(){var y=(0,H.A)(function*(C){throw"auth/password-does-not-meet-requirements"===C.code&&Kl(_),C});return function(C){return y.apply(this,arguments)}}())}),Iv.apply(this,arguments)}function fr(){return fr=(0,H.A)(function*(_,h){yield function JL(_,h){return Yi.apply(this,arguments)}((0,ve.Ku)(_),{oobCode:h})}),fr.apply(this,arguments)}function kt(_,h){return Fn.apply(this,arguments)}function Fn(){return(Fn=(0,H.A)(function*(_,h){const f=(0,ve.Ku)(_),y=yield Nx(f,{oobCode:h}),C=y.requestType;switch($(C,f,"internal-error"),C){case"EMAIL_SIGNIN":break;case"VERIFY_AND_CHANGE_EMAIL":$(y.newEmail,f,"internal-error");break;case"REVERT_SECOND_FACTOR_ADDITION":$(y.mfaInfo,f,"internal-error");default:$(y.email,f,"internal-error")}let k=null;return y.mfaInfo&&(k=ps._fromServerResponse(Vi(f),y.mfaInfo)),{data:{email:("VERIFY_AND_CHANGE_EMAIL"===y.requestType?y.newEmail:y.email)||null,previousEmail:("VERIFY_AND_CHANGE_EMAIL"===y.requestType?y.email:y.newEmail)||null,multiFactorInfo:k},operation:C}})).apply(this,arguments)}function Oo(){return(Oo=(0,H.A)(function*(_,h){const{data:f}=yield kt((0,ve.Ku)(_),h);return f.email})).apply(this,arguments)}function gs(){return(gs=(0,H.A)(function*(_,h,f){if((0,Gt._isFirebaseServerApp)(_.app))return Promise.reject(Oe(_));const y=Vi(_),K=yield Mp(y,{returnSecureToken:!0,email:h,password:f,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",Up).catch(Ne=>{throw"auth/password-does-not-meet-requirements"===Ne.code&&Kl(_),Ne}),le=yield Po._fromIdTokenResponse(y,"signIn",K);return yield y._updateCurrentUser(le.user),le})).apply(this,arguments)}function tl(){return(tl=(0,H.A)(function*(_,h,f){const y=Vi(_),C={requestType:"EMAIL_SIGNIN",email:h,clientType:"CLIENT_TYPE_WEB"};(function k(K,le){$(le.handleCodeInApp,y,"argument-error"),le&&ms(y,K,le)})(C,f),yield Mp(y,C,"getOobCode",hv)})).apply(this,arguments)}function Hc(){return(Hc=(0,H.A)(function*(_,h,f){if((0,Gt._isFirebaseServerApp)(_.app))return Promise.reject(Oe(_));const y=(0,ve.Ku)(_),C=ad.credentialWithLink(h,f||Be());return $(C._tenantId===(y.tenantId||null),y,"tenant-id-mismatch"),jp(y,C)})).apply(this,arguments)}function Yl(){return(Yl=(0,H.A)(function*(_,h){return ye(_,"POST","/v1/accounts:createAuthUri",re(_,h))})).apply(this,arguments)}function Gc(){return Gc=(0,H.A)(function*(_,h){const y={identifier:h,continueUri:nt()?Be():"http://localhost"},{signinMethods:C}=yield function qx(_,h){return Yl.apply(this,arguments)}((0,ve.Ku)(_),y);return C||[]}),Gc.apply(this,arguments)}function ia(){return ia=(0,H.A)(function*(_,h){const f=(0,ve.Ku)(_),C={requestType:"VERIFY_EMAIL",idToken:yield _.getIdToken()};h&&ms(f.auth,C,h);const{email:k}=yield function cv(_,h){return Op.apply(this,arguments)}(f.auth,C);k!==_.email&&(yield _.reload())}),ia.apply(this,arguments)}function Xp(){return Xp=(0,H.A)(function*(_,h,f){const y=(0,ve.Ku)(_),k={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:yield _.getIdToken(),newEmail:h};f&&ms(y.auth,k,f);const{email:K}=yield function t2(_,h){return Vx.apply(this,arguments)}(y.auth,k);K!==_.email&&(yield _.reload())}),Xp.apply(this,arguments)}function Aa(){return(Aa=(0,H.A)(function*(_,h){return ye(_,"POST","/v1/accounts:update",h)})).apply(this,arguments)}function Wc(){return Wc=(0,H.A)(function*(_,{displayName:h,photoURL:f}){if(void 0===h&&void 0===f)return;const y=(0,ve.Ku)(_),k={idToken:yield y.getIdToken(),displayName:h,photoUrl:f,returnSecureToken:!0},K=yield co(y,function Ql(_,h){return Aa.apply(this,arguments)}(y.auth,k));y.displayName=K.displayName||null,y.photoURL=K.photoUrl||null;const le=y.providerData.find(({providerId:Ne})=>"password"===Ne);le&&(le.displayName=y.displayName,le.photoURL=y.photoURL),yield y._updateTokensIfNecessary(K)}),Wc.apply(this,arguments)}function Kp(_,h,f){return Yp.apply(this,arguments)}function Yp(){return Yp=(0,H.A)(function*(_,h,f){const{auth:y}=_,k={idToken:yield _.getIdToken(),returnSecureToken:!0};h&&(k.email=h),f&&(k.password=f);const K=yield co(_,function lv(_,h){return Pp.apply(this,arguments)}(y,k));yield _._updateTokensIfNecessary(K,!0)}),Yp.apply(this,arguments)}class Al{constructor(h,f,y={}){this.isNewUser=h,this.providerId=f,this.profile=y}}class jc extends Al{constructor(h,f,y,C){super(h,f,y),this.username=C}}class Nh extends Al{constructor(h,f){super(h,"facebook.com",f)}}class Es extends jc{constructor(h,f){super(h,"github.com",f,"string"==typeof f?.login?f?.login:null)}}class s2 extends Al{constructor(h,f){super(h,"google.com",f)}}class mo extends jc{constructor(h,f,y){super(h,"twitter.com",f,y)}}function Ks(_){const{user:h,_tokenResponse:f}=_;return h.isAnonymous&&!f?{providerId:null,isNewUser:!1,profile:null}:function nl(_){var h,f;if(!_)return null;const{providerId:y}=_,C=_.rawUserInfo?JSON.parse(_.rawUserInfo):{},k=_.isNewUser||"identitytoolkit#SignupNewUserResponse"===_.kind;if(!y&&_?.idToken){const K=null===(f=null===(h=Za(_.idToken))||void 0===h?void 0:h.firebase)||void 0===f?void 0:f.sign_in_provider;if(K)return new Al(k,"anonymous"!==K&&"custom"!==K?K:null)}if(!y)return null;switch(y){case"facebook.com":return new Nh(k,C);case"github.com":return new Es(k,C);case"google.com":return new s2(k,C);case"twitter.com":return new mo(k,C,_.screenName||null);case"custom":case"anonymous":return new Al(k,null);default:return new Al(k,y,C)}}(f)}class fd{constructor(h,f,y){this.type=h,this.credential=f,this.user=y}static _fromIdtoken(h,f){return new fd("enroll",h,f)}static _fromMfaPendingCredential(h){return new fd("signin",h)}toJSON(){return{multiFactorSession:{["enroll"===this.type?"idToken":"pendingCredential"]:this.credential}}}static fromJSON(h){var f,y;if(h?.multiFactorSession){if(null!==(f=h.multiFactorSession)&&void 0!==f&&f.pendingCredential)return fd._fromMfaPendingCredential(h.multiFactorSession.pendingCredential);if(null!==(y=h.multiFactorSession)&&void 0!==y&&y.idToken)return fd._fromIdtoken(h.multiFactorSession.idToken)}return null}}class Yx{constructor(h,f,y){this.session=h,this.hints=f,this.signInResolver=y}static _fromError(h,f){const y=Vi(h),C=f.customData._serverResponse,k=(C.mfaInfo||[]).map(le=>ps._fromServerResponse(y,le));$(C.mfaPendingCredential,y,"internal-error");const K=fd._fromMfaPendingCredential(C.mfaPendingCredential);return new Yx(K,k,function(){var le=(0,H.A)(function*(Ne){const wt=yield Ne._process(y,K);delete C.mfaInfo,delete C.mfaPendingCredential;const Kt=Object.assign(Object.assign({},C),{idToken:wt.idToken,refreshToken:wt.refreshToken});switch(f.operationType){case"signIn":const $t=yield Po._fromIdTokenResponse(y,f.operationType,Kt);return yield y._updateCurrentUser($t.user),$t;case"reauthenticate":return $(f.user,y,"internal-error"),Po._forOperation(f.user,f.operationType,Kt);default:ot(y,"internal-error")}});return function(Ne){return le.apply(this,arguments)}}())}resolveSignIn(h){var f=this;return(0,H.A)(function*(){return f.signInResolver(h)})()}}class Qx{constructor(h){this.user=h,this.enrolledFactors=[],h._onReload(f=>{f.mfaInfo&&(this.enrolledFactors=f.mfaInfo.map(y=>ps._fromServerResponse(h.auth,y)))})}static _fromUser(h){return new Qx(h)}getSession(){var h=this;return(0,H.A)(function*(){return fd._fromIdtoken(yield h.user.getIdToken(),h.user)})()}enroll(h,f){var y=this;return(0,H.A)(function*(){const C=h,k=yield y.getSession(),K=yield co(y.user,C._process(y.user.auth,k,f));return yield y.user._updateTokensIfNecessary(K),y.user.reload()})()}unenroll(h){var f=this;return(0,H.A)(function*(){const y="string"==typeof h?h:h.uid,C=yield f.user.getIdToken();try{const k=yield co(f.user,function f2(_,h){return ye(_,"POST","/v2/accounts/mfaEnrollment:withdraw",re(_,h))}(f.user.auth,{idToken:C,mfaEnrollmentId:y}));f.enrolledFactors=f.enrolledFactors.filter(({uid:K})=>K!==y),yield f.user._updateTokensIfNecessary(k),yield f.user.reload()}catch(k){throw k}})()}}const Qp=new WeakMap,Dv="__sak";class AC{constructor(h,f){this.storageRetriever=h,this.type=f}_isAvailable(){try{return this.storage?(this.storage.setItem(Dv,"1"),this.storage.removeItem(Dv),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(h,f){return this.storage.setItem(h,JSON.stringify(f)),Promise.resolve()}_get(h){const f=this.storage.getItem(h);return Promise.resolve(f?JSON.parse(f):null)}_remove(h){return this.storage.removeItem(h),Promise.resolve()}get storage(){return this.storageRetriever()}}const Rv=(()=>{class _ extends AC{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(f,y)=>this.onStorageEvent(f,y),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=_e(),this._shouldAllowMigration=!0}forAllChangedKeys(f){for(const y of Object.keys(this.listeners)){const C=this.storage.getItem(y),k=this.localCache[y];C!==k&&f(y,k,C)}}onStorageEvent(f,y=!1){if(!f.key)return void this.forAllChangedKeys((le,Ne,wt)=>{this.notifyListeners(le,wt)});const C=f.key;y?this.detachListener():this.stopPolling();const k=()=>{const le=this.storage.getItem(C);!y&&this.localCache[C]===le||this.notifyListeners(C,le)},K=this.storage.getItem(C);!function Y(){return(0,ve.lT)()&&10===document.documentMode}()||K===f.newValue||f.newValue===f.oldValue?k():setTimeout(k,10)}notifyListeners(f,y){this.localCache[f]=y;const C=this.listeners[f];if(C)for(const k of Array.from(C))k(y&&JSON.parse(y))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((f,y,C)=>{this.onStorageEvent(new StorageEvent("storage",{key:f,oldValue:y,newValue:C}),!0)})},1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(f,y){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[f]||(this.listeners[f]=new Set,this.localCache[f]=this.storage.getItem(f)),this.listeners[f].add(y)}_removeListener(f,y){this.listeners[f]&&(this.listeners[f].delete(y),0===this.listeners[f].size&&delete this.listeners[f]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}_set(f,y){var C=()=>super._set,k=this;return(0,H.A)(function*(){yield C().call(k,f,y),k.localCache[f]=JSON.stringify(y)})()}_get(f){var y=()=>super._get,C=this;return(0,H.A)(function*(){const k=yield y().call(C,f);return C.localCache[f]=JSON.stringify(k),k})()}_remove(f){var y=()=>super._remove,C=this;return(0,H.A)(function*(){yield y().call(C,f),delete C.localCache[f]})()}}return _.type="LOCAL",_})(),mr=(()=>{class _ extends AC{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(f,y){}_removeListener(f,y){}}return _.type="SESSION",_})();let ra=(()=>{class _{constructor(f){this.eventTarget=f,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(f){const y=this.receivers.find(k=>k.isListeningto(f));if(y)return y;const C=new _(f);return this.receivers.push(C),C}isListeningto(f){return this.eventTarget===f}handleEvent(f){var y=this;return(0,H.A)(function*(){const C=f,{eventId:k,eventType:K,data:le}=C.data,Ne=y.handlersMap[K];if(!Ne?.size)return;C.ports[0].postMessage({status:"ack",eventId:k,eventType:K});const wt=Array.from(Ne).map(function(){var $t=(0,H.A)(function*(Sr){return Sr(C.origin,le)});return function(Sr){return $t.apply(this,arguments)}}()),Kt=yield function Zp(_){return Promise.all(_.map(function(){var h=(0,H.A)(function*(f){try{return{fulfilled:!0,value:yield f}}catch(y){return{fulfilled:!1,reason:y}}});return function(f){return h.apply(this,arguments)}}()))}(wt);C.ports[0].postMessage({status:"done",eventId:k,eventType:K,response:Kt})})()}_subscribe(f,y){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[f]||(this.handlersMap[f]=new Set),this.handlersMap[f].add(y)}_unsubscribe(f,y){this.handlersMap[f]&&y&&this.handlersMap[f].delete(y),(!y||0===this.handlersMap[f].size)&&delete this.handlersMap[f],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}return _.receivers=[],_})();function Xc(_="",h=10){let f="";for(let y=0;y<h;y++)f+=Math.floor(10*Math.random());return _+f}class Jx{constructor(h){this.target=h,this.handlers=new Set}removeMessageHandler(h){h.messageChannel&&(h.messageChannel.port1.removeEventListener("message",h.onMessage),h.messageChannel.port1.close()),this.handlers.delete(h)}_send(h,f,y=50){var C=this;return(0,H.A)(function*(){const k=typeof MessageChannel<"u"?new MessageChannel:null;if(!k)throw new Error("connection_unavailable");let K,le;return new Promise((Ne,wt)=>{const Kt=Xc("",20);k.port1.start();const $t=setTimeout(()=>{wt(new Error("unsupported_event"))},y);le={messageChannel:k,onMessage(Sr){const Ca=Sr;if(Ca.data.eventId===Kt)switch(Ca.data.status){case"ack":clearTimeout($t),K=setTimeout(()=>{wt(new Error("timeout"))},3e3);break;case"done":clearTimeout(K),Ne(Ca.data.response);break;default:clearTimeout($t),clearTimeout(K),wt(new Error("invalid_response"))}}},C.handlers.add(le),k.port1.addEventListener("message",le.onMessage),C.target.postMessage({eventType:h,eventId:Kt,data:f},[k.port2])}).finally(()=>{le&&C.removeMessageHandler(le)})})()}}function Gr(){return window}function Fh(){return typeof Gr().WorkerGlobalScope<"u"&&"function"==typeof Gr().importScripts}function Lh(){return(Lh=(0,H.A)(function*(){if(!navigator?.serviceWorker)return null;try{return(yield navigator.serviceWorker.ready).active}catch{return null}})).apply(this,arguments)}const kv="firebaseLocalStorageDb",Kc="firebaseLocalStorage",pd="fbase_key";class il{constructor(h){this.request=h}toPromise(){return new Promise((h,f)=>{this.request.addEventListener("success",()=>{h(this.request.result)}),this.request.addEventListener("error",()=>{f(this.request.error)})})}}function Vh(_,h){return _.transaction([Kc],h?"readwrite":"readonly").objectStore(Kc)}function rw(){const _=indexedDB.open(kv,1);return new Promise((h,f)=>{_.addEventListener("error",()=>{f(_.error)}),_.addEventListener("upgradeneeded",()=>{const y=_.result;try{y.createObjectStore(Kc,{keyPath:pd})}catch(C){f(C)}}),_.addEventListener("success",(0,H.A)(function*(){const y=_.result;y.objectStoreNames.contains(Kc)?h(y):(y.close(),yield function g2(){const _=indexedDB.deleteDatabase(kv);return new il(_).toPromise()}(),h(yield rw()))}))})}function IC(_,h,f){return Ov.apply(this,arguments)}function Ov(){return(Ov=(0,H.A)(function*(_,h,f){const y=Vh(_,!0).put({[pd]:h,value:f});return new il(y).toPromise()})).apply(this,arguments)}function Nv(){return(Nv=(0,H.A)(function*(_,h){const f=Vh(_,!1).get(h),y=yield new il(f).toPromise();return void 0===y?null:y.value})).apply(this,arguments)}function Fv(_,h){const f=Vh(_,!0).delete(h);return new il(f).toPromise()}const Il=(()=>{class _{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){var f=this;return(0,H.A)(function*(){return f.db||(f.db=yield rw()),f.db})()}_withRetries(f){var y=this;return(0,H.A)(function*(){let C=0;for(;;)try{const k=yield y._openDb();return yield f(k)}catch(k){if(C++>3)throw k;y.db&&(y.db.close(),y.db=void 0)}})()}initializeServiceWorkerMessaging(){var f=this;return(0,H.A)(function*(){return Fh()?f.initializeReceiver():f.initializeSender()})()}initializeReceiver(){var f=this;return(0,H.A)(function*(){f.receiver=ra._getInstance(function nw(){return Fh()?self:null}()),f.receiver._subscribe("keyChanged",function(){var y=(0,H.A)(function*(C,k){return{keyProcessed:(yield f._poll()).includes(k.key)}});return function(C,k){return y.apply(this,arguments)}}()),f.receiver._subscribe("ping",function(){var y=(0,H.A)(function*(C,k){return["keyChanged"]});return function(C,k){return y.apply(this,arguments)}}())})()}initializeSender(){var f=this;return(0,H.A)(function*(){var y,C;if(f.activeServiceWorker=yield function tw(){return Lh.apply(this,arguments)}(),!f.activeServiceWorker)return;f.sender=new Jx(f.activeServiceWorker);const k=yield f.sender._send("ping",{},800);k&&null!==(y=k[0])&&void 0!==y&&y.fulfilled&&null!==(C=k[0])&&void 0!==C&&C.value.includes("keyChanged")&&(f.serviceWorkerReceiverAvailable=!0)})()}notifyServiceWorker(f){var y=this;return(0,H.A)(function*(){if(y.sender&&y.activeServiceWorker&&function Pv(){var _;return(null===(_=navigator?.serviceWorker)||void 0===_?void 0:_.controller)||null}()===y.activeServiceWorker)try{yield y.sender._send("keyChanged",{key:f},y.serviceWorkerReceiverAvailable?800:50)}catch{}})()}_isAvailable(){return(0,H.A)(function*(){try{if(!indexedDB)return!1;const f=yield rw();return yield IC(f,Dv,"1"),yield Fv(f,Dv),!0}catch{}return!1})()}_withPendingWrite(f){var y=this;return(0,H.A)(function*(){y.pendingWrites++;try{yield f()}finally{y.pendingWrites--}})()}_set(f,y){var C=this;return(0,H.A)(function*(){return C._withPendingWrite((0,H.A)(function*(){return yield C._withRetries(k=>IC(k,f,y)),C.localCache[f]=y,C.notifyServiceWorker(f)}))})()}_get(f){var y=this;return(0,H.A)(function*(){const C=yield y._withRetries(k=>function CC(_,h){return Nv.apply(this,arguments)}(k,f));return y.localCache[f]=C,C})()}_remove(f){var y=this;return(0,H.A)(function*(){return y._withPendingWrite((0,H.A)(function*(){return yield y._withRetries(C=>Fv(C,f)),delete y.localCache[f],y.notifyServiceWorker(f)}))})()}_poll(){var f=this;return(0,H.A)(function*(){const y=yield f._withRetries(K=>{const le=Vh(K,!1).getAll();return new il(le).toPromise()});if(!y)return[];if(0!==f.pendingWrites)return[];const C=[],k=new Set;if(0!==y.length)for(const{fbase_key:K,value:le}of y)k.add(K),JSON.stringify(f.localCache[K])!==JSON.stringify(le)&&(f.notifyListeners(K,le),C.push(K));for(const K of Object.keys(f.localCache))f.localCache[K]&&!k.has(K)&&(f.notifyListeners(K,null),C.push(K));return C})()}notifyListeners(f,y){this.localCache[f]=y;const C=this.listeners[f];if(C)for(const k of Array.from(C))k(y)}startPolling(){var f=this;this.stopPolling(),this.pollTimer=setInterval((0,H.A)(function*(){return f._poll()}),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(f,y){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[f]||(this.listeners[f]=new Set,this._get(f)),this.listeners[f].add(y)}_removeListener(f,y){this.listeners[f]&&(this.listeners[f].delete(y),0===this.listeners[f].size&&delete this.listeners[f]),0===Object.keys(this.listeners).length&&this.stopPolling()}}return _.type="LOCAL",_})(),Jp=1e12;class PC{constructor(h){this.auth=h,this.counter=Jp,this._widgets=new Map}render(h,f){const y=this.counter;return this._widgets.set(y,new lw(h,this.auth.name,f||{})),this.counter++,y}reset(h){var f;const y=h||Jp;null===(f=this._widgets.get(y))||void 0===f||f.delete(),this._widgets.delete(y)}getResponse(h){var f;return(null===(f=this._widgets.get(h||Jp))||void 0===f?void 0:f.getResponse())||""}execute(h){var f=this;return(0,H.A)(function*(){var y;return null===(y=f._widgets.get(h||Jp))||void 0===y||y.execute(),""})()}}class lw{constructor(h,f,y){this.params=y,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=()=>{this.execute()};const C="string"==typeof h?document.getElementById(h):h;$(C,"argument-error",{appName:f}),this.container=C,this.isVisible="invisible"!==this.params.size,this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}getResponse(){return this.checkIfDeleted(),this.responseToken}delete(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}execute(){this.checkIfDeleted(),!this.timerId&&(this.timerId=window.setTimeout(()=>{this.responseToken=function kC(_){const h=[],f="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let y=0;y<_;y++)h.push(f.charAt(Math.floor(62*Math.random())));return h.join("")}(50);const{callback:h,"expired-callback":f}=this.params;if(h)try{h(this.responseToken)}catch{}this.timerId=window.setTimeout(()=>{if(this.timerId=null,this.responseToken=null,f)try{f()}catch{}this.isVisible&&this.execute()},6e4)},500))}checkIfDeleted(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}const em=Px("rcb"),OC=new Fi(3e4,6e4);class v2{constructor(){var h;this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!(null===(h=Gr().grecaptcha)||void 0===h||!h.render)}load(h,f=""){return $(function NC(_){return _.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(_)}(f),h,"argument-error"),this.shouldResolveImmediately(f)&&Vt(Gr().grecaptcha)?Promise.resolve(Gr().grecaptcha):new Promise((y,C)=>{const k=Gr().setTimeout(()=>{C(ft(h,"network-request-failed"))},OC.get());Gr()[em]=()=>{Gr().clearTimeout(k),delete Gr()[em];const le=Gr().grecaptcha;if(!le||!Vt(le))return void C(ft(h,"internal-error"));const Ne=le.render;le.render=(wt,Kt)=>{const $t=Ne(wt,Kt);return this.counter++,$t},this.hostLanguage=f,y(le)},Rx(`${function KL(){return Cp.recaptchaV2Script}()}?${(0,ve.Am)({onload:em,render:"explicit",hl:f})}`).catch(()=>{clearTimeout(k),C(ft(h,"internal-error"))})})}clearedOneInstance(){this.counter--}shouldResolveImmediately(h){var f;return!(null===(f=Gr().grecaptcha)||void 0===f||!f.render)&&(h===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}class Ps{load(h){return(0,H.A)(function*(){return new PC(h)})()}clearedOneInstance(){}}const Vv="recaptcha",FC={theme:"light",type:"image"};class LC{constructor(h,f,y=Object.assign({},FC)){this.parameters=y,this.type=Vv,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=Vi(h),this.isInvisible="invisible"===this.parameters.size,$(typeof document<"u",this.auth,"operation-not-supported-in-this-environment");const C="string"==typeof f?document.getElementById(f):f;$(C,this.auth,"argument-error"),this.container=C,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new Ps:new v2,this.validateStartingState()}verify(){var h=this;return(0,H.A)(function*(){h.assertNotDestroyed();const f=yield h.render(),y=h.getAssertedRecaptcha();return y.getResponse(f)||new Promise(k=>{const K=le=>{le&&(h.tokenChangeListeners.delete(K),k(le))};h.tokenChangeListeners.add(K),h.isInvisible&&y.execute(f)})})()}render(){try{this.assertNotDestroyed()}catch(h){return Promise.reject(h)}return this.renderPromise||(this.renderPromise=this.makeRenderPromise().catch(h=>{throw this.renderPromise=null,h})),this.renderPromise}_reset(){this.assertNotDestroyed(),null!==this.widgetId&&this.getAssertedRecaptcha().reset(this.widgetId)}clear(){this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach(h=>{this.container.removeChild(h)})}validateStartingState(){$(!this.parameters.sitekey,this.auth,"argument-error"),$(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),$(typeof document<"u",this.auth,"operation-not-supported-in-this-environment")}makeTokenCallback(h){return f=>{if(this.tokenChangeListeners.forEach(y=>y(f)),"function"==typeof h)h(f);else if("string"==typeof h){const y=Gr()[h];"function"==typeof y&&y(f)}}}assertNotDestroyed(){$(!this.destroyed,this.auth,"internal-error")}makeRenderPromise(){var h=this;return(0,H.A)(function*(){if(yield h.init(),!h.widgetId){let f=h.container;if(!h.isInvisible){const y=document.createElement("div");f.appendChild(y),f=y}h.widgetId=h.getAssertedRecaptcha().render(f,h.parameters)}return h.widgetId})()}init(){var h=this;return(0,H.A)(function*(){$(nt()&&!Fh(),h.auth,"internal-error"),yield function cw(){let _=null;return new Promise(h=>{"complete"!==document.readyState?(_=()=>h(),window.addEventListener("load",_)):h()}).catch(h=>{throw _&&window.removeEventListener("load",_),h})}(),h.recaptcha=yield h._recaptchaLoader.load(h.auth,h.auth.languageCode||void 0);const f=yield function un(_){return Mi.apply(this,arguments)}(h.auth);$(f,h.auth,"internal-error"),h.parameters.sitekey=f})()}getAssertedRecaptcha(){return $(this.recaptcha,this.auth,"internal-error"),this.recaptcha}}class tm{constructor(h,f){this.verificationId=h,this.onConfirmation=f}confirm(h){const f=Sa._fromVerification(this.verificationId,h);return this.onConfirmation(f)}}function Uh(){return(Uh=(0,H.A)(function*(_,h,f){if((0,Gt._isFirebaseServerApp)(_.app))return Promise.reject(Oe(_));const y=Vi(_),C=yield $i(y,h,(0,ve.Ku)(f));return new tm(C,k=>jp(y,k))})).apply(this,arguments)}function sa(){return(sa=(0,H.A)(function*(_,h,f){const y=(0,ve.Ku)(_);yield Wp(!1,y,"phone");const C=yield $i(y.auth,h,(0,ve.Ku)(f));return new tm(C,k=>hr(y,k))})).apply(this,arguments)}function nm(){return(nm=(0,H.A)(function*(_,h,f){const y=(0,ve.Ku)(_);if((0,Gt._isFirebaseServerApp)(y.auth.app))return Promise.reject(Oe(y.auth));const C=yield $i(y.auth,h,(0,ve.Ku)(f));return new tm(C,k=>Wx(y,k))})).apply(this,arguments)}function $i(_,h,f){return Bh.apply(this,arguments)}function Bh(){return Bh=(0,H.A)(function*(_,h,f){var y;const C=yield f.verify();try{let k;if($("string"==typeof C,_,"argument-error"),$(f.type===Vv,_,"argument-error"),k="string"==typeof h?{phoneNumber:h}:h,"session"in k){const K=k.session;if("phoneNumber"in k)return $("enroll"===K.type,_,"internal-error"),(yield function u2(_,h){return ye(_,"POST","/v2/accounts/mfaEnrollment:start",re(_,h))}(_,{idToken:K.credential,phoneEnrollmentInfo:{phoneNumber:k.phoneNumber,recaptchaToken:C}})).phoneSessionInfo.sessionInfo;{$("signin"===K.type,_,"internal-error");const le=(null===(y=k.multiFactorHint)||void 0===y?void 0:y.uid)||k.multiFactorUid;return $(le,_,"missing-multi-factor-info"),(yield function _2(_,h){return ye(_,"POST","/v2/accounts/mfaSignIn:start",re(_,h))}(_,{mfaPendingCredential:K.credential,mfaEnrollmentId:le,phoneSignInInfo:{recaptchaToken:C}})).phoneResponseInfo.sessionInfo}}{const{sessionInfo:K}=yield function od(_,h){return pv.apply(this,arguments)}(_,{phoneNumber:k.phoneNumber,recaptchaToken:C});return K}}finally{f._reset()}}),Bh.apply(this,arguments)}function ks(){return(ks=(0,H.A)(function*(_,h){const f=(0,ve.Ku)(_);if((0,Gt._isFirebaseServerApp)(f.auth.app))return Promise.reject(Oe(f.auth));yield vv(f,h)})).apply(this,arguments)}let zh=(()=>{class _{constructor(f){this.providerId=_.PROVIDER_ID,this.auth=Vi(f)}verifyPhoneNumber(f,y){return $i(this.auth,f,(0,ve.Ku)(y))}static credential(f,y){return Sa._fromVerification(f,y)}static credentialFromResult(f){return _.credentialFromTaggedObject(f)}static credentialFromError(f){return _.credentialFromTaggedObject(f.customData||{})}static credentialFromTaggedObject({_tokenResponse:f}){if(!f)return null;const{phoneNumber:y,temporaryProof:C}=f;return y&&C?Sa._fromTokenResponse(y,C):null}}return _.PROVIDER_ID="phone",_.PHONE_SIGN_IN_METHOD="phone",_})();function Zl(_,h){return h?Mt(h):($(_._popupRedirectResolver,_,"argument-error"),_._popupRedirectResolver)}class Jl extends zc{constructor(h){super("custom","custom"),this.params=h}_getIdTokenResponse(h){return Sl(h,this._buildIdpRequest())}_linkToIdToken(h,f){return Sl(h,this._buildIdpRequest(f))}_getReauthenticationResolver(h){return Sl(h,this._buildIdpRequest())}_buildIdpRequest(h){const f={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return h&&(f.idToken=h),f}}function Fo(_){return xv(_.auth,new Jl(_),_.bypassAuthState)}function BC(_){const{auth:h,user:f}=_;return $(f,h,"internal-error"),Gx(f,new Jl(_),_.bypassAuthState)}function zC(_){return Uv.apply(this,arguments)}function Uv(){return(Uv=(0,H.A)(function*(_){const{auth:h,user:f}=_;return $(f,h,"internal-error"),vv(f,new Jl(_),_.bypassAuthState)})).apply(this,arguments)}class Cl{constructor(h,f,y,C,k=!1){this.auth=h,this.resolver=y,this.user=C,this.bypassAuthState=k,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(f)?f:[f]}execute(){var h=this;return new Promise(function(){var f=(0,H.A)(function*(y,C){h.pendingPromise={resolve:y,reject:C};try{h.eventManager=yield h.resolver._initialize(h.auth),yield h.onExecution(),h.eventManager.registerConsumer(h)}catch(k){h.reject(k)}});return function(y,C){return f.apply(this,arguments)}}())}onAuthEvent(h){var f=this;return(0,H.A)(function*(){const{urlResponse:y,sessionId:C,postBody:k,tenantId:K,error:le,type:Ne}=h;if(le)return void f.reject(le);const wt={auth:f.auth,requestUri:y,sessionId:C,tenantId:K||void 0,postBody:k||void 0,user:f.user,bypassAuthState:f.bypassAuthState};try{f.resolve(yield f.getIdpTask(Ne)(wt))}catch(Kt){f.reject(Kt)}})()}onError(h){this.reject(h)}getIdpTask(h){switch(h){case"signInViaPopup":case"signInViaRedirect":return Fo;case"linkViaPopup":case"linkViaRedirect":return zC;case"reauthViaPopup":case"reauthViaRedirect":return BC;default:ot(this.auth,"internal-error")}}resolve(h){qe(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(h),this.unregisterAndCleanUp()}reject(h){qe(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(h),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const dw=new Fi(2e3,1e4);function rm(){return(rm=(0,H.A)(function*(_,h,f){if((0,Gt._isFirebaseServerApp)(_.app))return Promise.reject(ft(_,"operation-not-supported-in-this-environment"));const y=Vi(_);ke(_,h,Kr);const C=Zl(y,f);return new om(y,"signInViaPopup",h,C).executeNotNull()})).apply(this,arguments)}function sm(){return(sm=(0,H.A)(function*(_,h,f){const y=(0,ve.Ku)(_);if((0,Gt._isFirebaseServerApp)(y.auth.app))return Promise.reject(ft(y.auth,"operation-not-supported-in-this-environment"));ke(y.auth,h,Kr);const C=Zl(y.auth,f);return new om(y.auth,"reauthViaPopup",h,C,y).executeNotNull()})).apply(this,arguments)}function Sn(){return(Sn=(0,H.A)(function*(_,h,f){const y=(0,ve.Ku)(_);ke(y.auth,h,Kr);const C=Zl(y.auth,f);return new om(y.auth,"linkViaPopup",h,C,y).executeNotNull()})).apply(this,arguments)}let om=(()=>{class _ extends Cl{constructor(f,y,C,k,K){super(f,y,k,K),this.provider=C,this.authWindow=null,this.pollId=null,_.currentPopupAction&&_.currentPopupAction.cancel(),_.currentPopupAction=this}executeNotNull(){var f=this;return(0,H.A)(function*(){const y=yield f.execute();return $(y,f.auth,"internal-error"),y})()}onExecution(){var f=this;return(0,H.A)(function*(){qe(1===f.filter.length,"Popup operations only handle one event");const y=Xc();f.authWindow=yield f.resolver._openPopup(f.auth,f.provider,f.filter[0],y),f.authWindow.associatedEvent=y,f.resolver._originValidation(f.auth).catch(C=>{f.reject(C)}),f.resolver._isIframeWebStorageSupported(f.auth,C=>{C||f.reject(ft(f.auth,"web-storage-unsupported"))}),f.pollUserCancellation()})()}get eventId(){var f;return(null===(f=this.authWindow)||void 0===f?void 0:f.associatedEvent)||null}cancel(){this.reject(ft(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,_.currentPopupAction=null}pollUserCancellation(){const f=()=>{var y,C;this.pollId=null!==(C=null===(y=this.authWindow)||void 0===y?void 0:y.window)&&void 0!==C&&C.closed?window.setTimeout(()=>{this.pollId=null,this.reject(ft(this.auth,"popup-closed-by-user"))},8e3):window.setTimeout(f,dw.get())};f()}}return _.currentPopupAction=null,_})();const y2="pendingRedirect",Hh=new Map;class WC extends Cl{constructor(h,f,y=!1){super(h,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],f,void 0,y),this.eventId=null}execute(){var h=()=>super.execute,f=this;return(0,H.A)(function*(){let y=Hh.get(f.auth._key());if(!y){try{const k=(yield function jC(_,h){return am.apply(this,arguments)}(f.resolver,f.auth))?yield h().call(f):null;y=()=>Promise.resolve(k)}catch(C){y=()=>Promise.reject(C)}Hh.set(f.auth._key(),y)}return f.bypassAuthState||Hh.set(f.auth._key(),()=>Promise.resolve(null)),y()})()}onAuthEvent(h){var f=()=>super.onAuthEvent,y=this;return(0,H.A)(function*(){if("signInViaRedirect"===h.type)return f().call(y,h);if("unknown"!==h.type){if(h.eventId){const C=yield y.auth._redirectUserForId(h.eventId);if(C)return y.user=C,f().call(y,h);y.resolve(null)}}else y.resolve(null)})()}onExecution(){return(0,H.A)(function*(){})()}cleanUp(){}}function am(){return(am=(0,H.A)(function*(_,h){const f=pw(h),y=fw(_);if(!(yield y._isAvailable()))return!1;const C="true"===(yield y._get(f));return yield y._remove(f),C})).apply(this,arguments)}function ec(_,h){return Bv.apply(this,arguments)}function Bv(){return(Bv=(0,H.A)(function*(_,h){return fw(_)._set(pw(h),"true")})).apply(this,arguments)}function zv(_,h){Hh.set(_._key(),h)}function fw(_){return Mt(_._redirectPersistence)}function pw(_){return vn(y2,_.config.apiKey,_.name)}function Ke(_,h,f){return function Ti(_,h,f){return Ts.apply(this,arguments)}(_,h,f)}function Ts(){return(Ts=(0,H.A)(function*(_,h,f){if((0,Gt._isFirebaseServerApp)(_.app))return Promise.reject(Oe(_));const y=Vi(_);ke(_,h,Kr),yield y._initializationPromise;const C=Zl(y,f);return yield ec(C,y),C._openRedirect(y,h,"signInViaRedirect")})).apply(this,arguments)}function Ys(_,h,f){return function Ss(_,h,f){return lm.apply(this,arguments)}(_,h,f)}function lm(){return(lm=(0,H.A)(function*(_,h,f){const y=(0,ve.Ku)(_);if(ke(y.auth,h,Kr),(0,Gt._isFirebaseServerApp)(y.auth.app))return Promise.reject(Oe(y.auth));yield y.auth._initializationPromise;const C=Zl(y.auth,f);yield ec(C,y.auth);const k=yield Os(y);return C._openRedirect(y.auth,h,"reauthViaRedirect",k)})).apply(this,arguments)}function Gh(_,h,f){return function rl(_,h,f){return Wh.apply(this,arguments)}(_,h,f)}function Wh(){return(Wh=(0,H.A)(function*(_,h,f){const y=(0,ve.Ku)(_);ke(y.auth,h,Kr),yield y.auth._initializationPromise;const C=Zl(y.auth,f);yield Wp(!1,y,h.providerId),yield ec(C,y.auth);const k=yield Os(y);return C._openRedirect(y.auth,h,"linkViaRedirect",k)})).apply(this,arguments)}function Gv(){return(Gv=(0,H.A)(function*(_,h){return yield Vi(_)._initializationPromise,Wv(_,h,!1)})).apply(this,arguments)}function Wv(_,h){return cm.apply(this,arguments)}function cm(){return(cm=(0,H.A)(function*(_,h,f=!1){if((0,Gt._isFirebaseServerApp)(_.app))return Promise.reject(Oe(_));const y=Vi(_),C=Zl(y,h),K=yield new WC(y,C,f).execute();return K&&!f&&(delete K.user._redirectEventId,yield y._persistUserIfCurrent(K.user),yield y._setRedirectUser(null,h)),K})).apply(this,arguments)}function Os(_){return Ia.apply(this,arguments)}function Ia(){return(Ia=(0,H.A)(function*(_){const h=Xc(`${_.uid}:::`);return _._redirectEventId=h,yield _.auth._setRedirectUser(_),yield _.auth._persistUserIfCurrent(_),h})).apply(this,arguments)}class Yc{constructor(h){this.auth=h,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(h){this.consumers.add(h),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,h)&&(this.sendToConsumer(this.queuedRedirectEvent,h),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(h){this.consumers.delete(h)}onEvent(h){if(this.hasEventBeenHandled(h))return!1;let f=!1;return this.consumers.forEach(y=>{this.isEventForConsumer(h,y)&&(f=!0,this.sendToConsumer(h,y),this.saveEventToCache(h))}),this.hasHandledPotentialRedirect||!function _w(_){switch(_.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return gw(_);default:return!1}}(h)||(this.hasHandledPotentialRedirect=!0,f||(this.queuedRedirectEvent=h,f=!0)),f}sendToConsumer(h,f){var y;if(h.error&&!gw(h)){const C=(null===(y=h.error.code)||void 0===y?void 0:y.split("auth/")[1])||"internal-error";f.onError(ft(this.auth,C))}else f.onAuthEvent(h)}isEventForConsumer(h,f){const y=null===f.eventId||!!h.eventId&&h.eventId===f.eventId;return f.filter.includes(h.type)&&y}hasEventBeenHandled(h){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(sl(h))}saveEventToCache(h){this.cachedEventUids.add(sl(h)),this.lastProcessedEventTime=Date.now()}}function sl(_){return[_.type,_.eventId,_.sessionId,_.tenantId].filter(h=>h).join("-")}function gw({type:_,error:h}){return"unknown"===_&&"auth/no-auth-event"===h?.code}function vw(_){return jv.apply(this,arguments)}function jv(){return(jv=(0,H.A)(function*(_,h={}){return ye(_,"GET","/v1/projects",h)})).apply(this,arguments)}const $v=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,qv=/^https?/;function jh(){return(jh=(0,H.A)(function*(_){if(_.config.emulator)return;const{authorizedDomains:h}=yield vw(_);for(const f of h)try{if(qC(f))return}catch{}ot(_,"unauthorized-domain")})).apply(this,arguments)}function qC(_){const h=Be(),{protocol:f,hostname:y}=new URL(h);if(_.startsWith("chrome-extension://")){const K=new URL(_);return""===K.hostname&&""===y?"chrome-extension:"===f&&_.replace("chrome-extension://","")===h.replace("chrome-extension://",""):"chrome-extension:"===f&&K.hostname===y}if(!qv.test(f))return!1;if($v.test(_))return y===_;const C=_.replace(/\./g,"\\.");return new RegExp("^(.+\\."+C+"|"+C+")$","i").test(y)}const bw=new Fi(3e4,6e4);function um(){const _=Gr().___jsl;if(_?.H)for(const h of Object.keys(_.H))if(_.H[h].r=_.H[h].r||[],_.H[h].L=_.H[h].L||[],_.H[h].r=[..._.H[h].L],_.CP)for(let f=0;f<_.CP.length;f++)_.CP[f]=null}let $h=null;const Ew=new Fi(5e3,15e3),Xv="__/auth/iframe",XC="emulator/auth/iframe",KC={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},Qs=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function Qc(_){const h=_.config;$(h.authDomain,_,"auth-domain-config-required");const f=h.emulator?sr(h,XC):`https://${_.config.authDomain}/${Xv}`,y={apiKey:h.apiKey,appName:_.name,v:Gt.SDK_VERSION},C=Qs.get(_.config.apiHost);C&&(y.eid=C);const k=_._getFrameworks();return k.length&&(y.fw=k.join(",")),`${f}?${(0,ve.Am)(y).slice(1)}`}function Zc(){return Zc=(0,H.A)(function*(_){const h=yield function ww(_){return $h=$h||function xw(_){return new Promise((h,f)=>{var y,C,k;function K(){um(),gapi.load("gapi.iframes",{callback:()=>{h(gapi.iframes.getContext())},ontimeout:()=>{um(),f(ft(_,"network-request-failed"))},timeout:bw.get()})}if(null!==(C=null===(y=Gr().gapi)||void 0===y?void 0:y.iframes)&&void 0!==C&&C.Iframe)h(gapi.iframes.getContext());else{if(null===(k=Gr().gapi)||void 0===k||!k.load){const le=Px("iframefcb");return Gr()[le]=()=>{gapi.load?K():f(ft(_,"network-request-failed"))},Rx(`${function YL(){return Cp.gapiScript}()}?onload=${le}`).catch(Ne=>f(Ne))}K()}}).catch(h=>{throw $h=null,h})}(_),$h}(_),f=Gr().gapi;return $(f,_,"internal-error"),h.open({where:document.body,url:Qc(_),messageHandlersFilter:f.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:KC,dontclear:!0},y=>new Promise(function(){var C=(0,H.A)(function*(k,K){yield y.restyle({setHideOnLeave:!1});const le=ft(_,"network-request-failed"),Ne=Gr().setTimeout(()=>{K(le)},Ew.get());function wt(){Gr().clearTimeout(Ne),k(y)}y.ping(wt).then(wt,()=>{K(le)})});return function(k,K){return C.apply(this,arguments)}}()))}),Zc.apply(this,arguments)}const YC={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};class qh{constructor(h){this.window=h,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}const hm="__/auth/handler",fm="emulator/auth/handler",pm=encodeURIComponent("fac");function Xh(_,h,f,y,C,k){return mm.apply(this,arguments)}function mm(){return(mm=(0,H.A)(function*(_,h,f,y,C,k){$(_.config.authDomain,_,"auth-domain-config-required"),$(_.config.apiKey,_,"invalid-api-key");const K={apiKey:_.config.apiKey,appName:_.name,authType:f,redirectUrl:y,v:Gt.SDK_VERSION,eventId:C};if(h instanceof Kr){h.setDefaultLanguage(_.languageCode),K.providerId=h.providerId||"",(0,ve.Im)(h.getCustomParameters())||(K.customParameters=JSON.stringify(h.getCustomParameters()));for(const[Kt,$t]of Object.entries(k||{}))K[Kt]=$t}if(h instanceof qs){const Kt=h.getScopes().filter($t=>""!==$t);Kt.length>0&&(K.scopes=Kt.join(","))}_.tenantId&&(K.tid=_.tenantId);const le=K;for(const Kt of Object.keys(le))void 0===le[Kt]&&delete le[Kt];const Ne=yield _._getAppCheckToken(),wt=Ne?`#${pm}=${encodeURIComponent(Ne)}`:"";return`${function Aw({config:_}){return _.emulator?sr(_,fm):`https://${_.authDomain}/${hm}`}(_)}?${(0,ve.Am)(le).slice(1)}${wt}`})).apply(this,arguments)}const Kv="webStorageSupport",gd=class md{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=mr,this._completeRedirectFn=Wv,this._overrideRedirectResult=zv}_openPopup(h,f,y,C){var k=this;return(0,H.A)(function*(){var K;qe(null===(K=k.eventManagers[h._key()])||void 0===K?void 0:K.manager,"_initialize() not called before _openPopup()");const le=yield Xh(h,f,y,Be(),C);return function tc(_,h,f,y=500,C=600){const k=Math.max((window.screen.availHeight-C)/2,0).toString(),K=Math.max((window.screen.availWidth-y)/2,0).toString();let le="";const Ne=Object.assign(Object.assign({},YC),{width:y.toString(),height:C.toString(),top:k,left:K}),wt=(0,ve.ZQ)().toLowerCase();f&&(le=ki(wt)?"_blank":f),ws(wt)&&(h=h||"http://localhost",Ne.scrollbars="yes");const Kt=Object.entries(Ne).reduce((Sr,[Ca,ou])=>`${Sr}${Ca}=${ou},`,"");if(function xe(_=(0,ve.ZQ)()){var h;return Tl(_)&&!(null===(h=window.navigator)||void 0===h||!h.standalone)}(wt)&&"_self"!==le)return function ZC(_,h){const f=document.createElement("a");f.href=_,f.target=h;const y=document.createEvent("MouseEvent");y.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),f.dispatchEvent(y)}(h||"",le),new qh(null);const $t=window.open(h||"",le,Kt);$($t,_,"popup-blocked");try{$t.focus()}catch{}return new qh($t)}(h,le,Xc())})()}_openRedirect(h,f,y,C){var k=this;return(0,H.A)(function*(){return yield k._originValidation(h),function ew(_){Gr().location.href=_}(yield Xh(h,f,y,Be(),C)),new Promise(()=>{})})()}_initialize(h){const f=h._key();if(this.eventManagers[f]){const{manager:C,promise:k}=this.eventManagers[f];return C?Promise.resolve(C):(qe(k,"If manager is not set, promise should be"),k)}const y=this.initAndGetManager(h);return this.eventManagers[f]={promise:y},y.catch(()=>{delete this.eventManagers[f]}),y}initAndGetManager(h){var f=this;return(0,H.A)(function*(){const y=yield function Tr(_){return Zc.apply(this,arguments)}(h),C=new Yc(h);return y.register("authEvent",k=>($(k?.authEvent,h,"invalid-auth-event"),{status:C.onEvent(k.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),f.eventManagers[h._key()]={manager:C},f.iframes[h._key()]=y,C})()}_isIframeWebStorageSupported(h,f){this.iframes[h._key()].send(Kv,{type:Kv},C=>{var k;const K=null===(k=C?.[0])||void 0===k?void 0:k[Kv];void 0!==K&&f(!!K),ot(h,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(h){const f=h._key();return this.originValidationPromises[f]||(this.originValidationPromises[f]=function yw(_){return jh.apply(this,arguments)}(h)),this.originValidationPromises[f]}get _shouldInitProactively(){return _e()||El()||Tl()}};class Iw{constructor(h){this.factorId=h}_process(h,f,y){switch(f.type){case"enroll":return this._finalizeEnroll(h,f.credential,y);case"signin":return this._finalizeSignIn(h,f.credential);default:return te("unexpected MultiFactorSessionType")}}}class Cw extends Iw{constructor(h){super("phone"),this.credential=h}static _fromCredential(h){return new Cw(h)}_finalizeEnroll(h,f,y){return function d2(_,h){return ye(_,"POST","/v2/accounts/mfaEnrollment:finalize",re(_,h))}(h,{idToken:f,displayName:y,phoneVerificationInfo:this.credential._makeVerificationRequest()})}_finalizeSignIn(h,f){return function DC(_,h){return ye(_,"POST","/v2/accounts/mfaSignIn:finalize",re(_,h))}(h,{mfaPendingCredential:f,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}let Yv=(()=>{class _{constructor(){}static assertion(f){return Cw._fromCredential(f)}}return _.FACTOR_ID="phone",_})();var JC="@firebase/auth";class Kh{constructor(h){this.auth=h,this.internalListeners=new Map}getUid(){var h;return this.assertAuthConfigured(),(null===(h=this.auth.currentUser)||void 0===h?void 0:h.uid)||null}getToken(h){var f=this;return(0,H.A)(function*(){return f.assertAuthConfigured(),yield f.auth._initializationPromise,f.auth.currentUser?{accessToken:yield f.auth.currentUser.getIdToken(h)}:null})()}addAuthTokenListener(h){if(this.assertAuthConfigured(),this.internalListeners.has(h))return;const f=this.auth.onIdTokenChanged(y=>{h(y?.stsTokenManager.accessToken||null)});this.internalListeners.set(h,f),this.updateProactiveRefresh()}removeAuthTokenListener(h){this.assertAuthConfigured();const f=this.internalListeners.get(h);f&&(this.internalListeners.delete(h),f(),this.updateProactiveRefresh())}assertAuthConfigured(){$(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}function Ns(){return window}(0,ve.XA)("authIdTokenMaxAge"),function XL(_){Cp=_}({loadJS:_=>new Promise((h,f)=>{const y=document.createElement("script");y.setAttribute("src",_),y.onload=h,y.onerror=C=>{const k=ft("internal-error");k.customData=C,f(k)},y.type="text/javascript",y.charset="UTF-8",function iM(){var _,h;return null!==(h=null===(_=document.getElementsByTagName("head"))||void 0===_?void 0:_[0])&&void 0!==h?h:document}().appendChild(y)}),gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="}),function Yh(_){(0,Gt._registerComponent)(new ri.uA("auth",(h,{options:f})=>{const y=h.getProvider("app").getImmediate(),C=h.getProvider("heartbeat"),k=h.getProvider("app-check-internal"),{apiKey:K,authDomain:le}=y.options;$(K&&!K.includes(":"),"invalid-api-key",{appName:y.name});const Ne={apiKey:K,authDomain:le,clientPlatform:_,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:Dt(_)},wt=new Ro(y,C,k,Ne);return function yC(_,h){const f=h?.persistence||[],y=(Array.isArray(f)?f:[f]).map(Mt);h?.errorMap&&_._updateErrorMap(h.errorMap),_._initializeWithPersistence(y,h?.popupRedirectResolver)}(wt,f),wt},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((h,f,y)=>{h.getProvider("auth-internal").initialize()})),(0,Gt._registerComponent)(new ri.uA("auth-internal",h=>{const f=Vi(h.getProvider("auth").getImmediate());return new Kh(f)},"PRIVATE").setInstantiationMode("EXPLICIT")),(0,Gt.registerVersion)(JC,"1.7.9",function eM(_){switch(_){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}(_)),(0,Gt.registerVersion)(JC,"1.7.9","esm2017")}("Browser");function Qh(){return Qh=(0,H.A)(function*(_,h,f){var y;const{BuildInfo:C}=Ns();qe(h.sessionId,"AuthEvent did not contain a session ID");const k=yield function kw(_){return bm.apply(this,arguments)}(h.sessionId),K={};return Tl()?K.ibi=C.packageName:Ja()?K.apn=C.packageName:ot(_,"operation-not-supported-in-this-environment"),C.displayName&&(K.appDisplayName=C.displayName),K.sessionId=k,Xh(_,f,h.type,void 0,null!==(y=h.eventId)&&void 0!==y?y:void 0,K)}),Qh.apply(this,arguments)}function _d(){return(_d=(0,H.A)(function*(_){const{BuildInfo:h}=Ns(),f={};Tl()?f.iosBundleId=h.packageName:Ja()?f.androidPackageName=h.packageName:ot(_,"operation-not-supported-in-this-environment"),yield vw(_,f)})).apply(this,arguments)}function ym(){return(ym=(0,H.A)(function*(_,h,f){const{cordova:y}=Ns();let C=()=>{};try{yield new Promise((k,K)=>{let le=null;function Ne(){var $t;k();const Sr=null===($t=y.plugins.browsertab)||void 0===$t?void 0:$t.close;"function"==typeof Sr&&Sr(),"function"==typeof f?.close&&f.close()}function wt(){le||(le=window.setTimeout(()=>{K(ft(_,"redirect-cancelled-by-user"))},2e3))}function Kt(){"visible"===document?.visibilityState&&wt()}h.addPassiveListener(Ne),document.addEventListener("resume",wt,!1),Ja()&&document.addEventListener("visibilitychange",Kt,!1),C=()=>{h.removePassiveListener(Ne),document.removeEventListener("resume",wt,!1),document.removeEventListener("visibilitychange",Kt,!1),le&&window.clearTimeout(le)}})}finally{C()}})).apply(this,arguments)}function bm(){return(bm=(0,H.A)(function*(_){const h=function oM(_){if(qe(/[0-9a-zA-Z]+/.test(_),"Can only convert alpha-numeric strings"),typeof TextEncoder<"u")return(new TextEncoder).encode(_);const h=new ArrayBuffer(_.length),f=new Uint8Array(h);for(let y=0;y<_.length;y++)f[y]=_.charCodeAt(y);return f}(_),f=yield crypto.subtle.digest("SHA-256",h);return Array.from(new Uint8Array(f)).map(C=>C.toString(16).padStart(2,"0")).join("")})).apply(this,arguments)}class Jc extends Yc{constructor(){super(...arguments),this.passiveListeners=new Set,this.initPromise=new Promise(h=>{this.resolveInitialized=h})}addPassiveListener(h){this.passiveListeners.add(h)}removePassiveListener(h){this.passiveListeners.delete(h)}resetRedirect(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}onEvent(h){return this.resolveInitialized(),this.passiveListeners.forEach(f=>f(h)),super.onEvent(h)}initialized(){var h=this;return(0,H.A)(function*(){yield h.initPromise})()}}function ty(_){return eu.apply(this,arguments)}function eu(){return(eu=(0,H.A)(function*(_){const h=yield ny()._get(Or(_));return h&&(yield ny()._remove(Or(_))),h})).apply(this,arguments)}function Zs(){const _=[];for(let f=0;f<20;f++){const y=Math.floor(62*Math.random());_.push("1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ".charAt(y))}return _.join("")}function ny(){return Mt(Rv)}function Or(_){return vn("authEvent",_.config.apiKey,_.name)}function Zh(_){if(!_?.includes("?"))return{};const[h,...f]=_.split("?");return(0,ve.I9)(f.join("?"))}const bd=class yd{constructor(){this._redirectPersistence=mr,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=Wv,this._overrideRedirectResult=zv}_initialize(h){var f=this;return(0,H.A)(function*(){const y=h._key();let C=f.eventManagers.get(y);return C||(C=new Jc(h),f.eventManagers.set(y,C),f.attachCallbackListeners(h,C)),C})()}_openPopup(h){ot(h,"operation-not-supported-in-this-environment")}_openRedirect(h,f,y,C){var k=this;return(0,H.A)(function*(){!function Pw(_){var h,f,y,C,k,K,le,Ne,wt,Kt;const $t=Ns();$("function"==typeof(null===(h=$t?.universalLinks)||void 0===h?void 0:h.subscribe),_,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),$(typeof(null===(f=$t?.BuildInfo)||void 0===f?void 0:f.packageName)<"u",_,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),$("function"==typeof(null===(k=null===(C=null===(y=$t?.cordova)||void 0===y?void 0:y.plugins)||void 0===C?void 0:C.browsertab)||void 0===k?void 0:k.openUrl),_,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),$("function"==typeof(null===(Ne=null===(le=null===(K=$t?.cordova)||void 0===K?void 0:K.plugins)||void 0===le?void 0:le.browsertab)||void 0===Ne?void 0:Ne.isAvailable),_,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),$("function"==typeof(null===(Kt=null===(wt=$t?.cordova)||void 0===wt?void 0:wt.InAppBrowser)||void 0===Kt?void 0:Kt.open),_,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}(h);const K=yield k._initialize(h);yield K.initialized(),K.resetRedirect(),function $C(){Hh.clear()}(),yield k._originValidation(h);const le=function aM(_,h,f=null){return{type:h,eventId:f,urlResponse:null,sessionId:Zs(),postBody:null,tenantId:_.tenantId,error:ft(_,"no-auth-event")}}(h,y,C);yield function Ow(_,h){return ny()._set(Or(_),h)}(h,le);const Ne=yield function vm(_,h,f){return Qh.apply(this,arguments)}(h,le,f),wt=yield function ey(_){const{cordova:h}=Ns();return new Promise(f=>{h.plugins.browsertab.isAvailable(y=>{let C=null;y?h.plugins.browsertab.openUrl(_):C=h.InAppBrowser.open(_,function Ce(_=(0,ve.ZQ)()){return/(iPad|iPhone|iPod).*OS 7_\d/i.test(_)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(_)}()?"_blank":"_system","location=yes"),f(C)})})}(Ne);return function sM(_,h,f){return ym.apply(this,arguments)}(h,K,wt)})()}_isIframeWebStorageSupported(h,f){throw new Error("Method not implemented.")}_originValidation(h){const f=h._key();return this.originValidationPromises[f]||(this.originValidationPromises[f]=function Rw(_){return _d.apply(this,arguments)}(h)),this.originValidationPromises[f]}attachCallbackListeners(h,f){const{universalLinks:y,handleOpenURL:C,BuildInfo:k}=Ns(),K=setTimeout((0,H.A)(function*(){yield ty(h),f.onEvent(tu())}),500),le=function(){var Kt=(0,H.A)(function*($t){clearTimeout(K);const Sr=yield ty(h);let Ca=null;Sr&&$t?.url&&(Ca=function lM(_,h){var f,y;const C=function cM(_){const h=Zh(_),f=h.link?decodeURIComponent(h.link):void 0,y=Zh(f).link,C=h.deep_link_id?decodeURIComponent(h.deep_link_id):void 0;return Zh(C).link||C||y||f||_}(h);if(C.includes("/__/auth/callback")){const k=Zh(C),K=k.firebaseError?function iy(_){try{return JSON.parse(_)}catch{return null}}(decodeURIComponent(k.firebaseError)):null,le=null===(y=null===(f=K?.code)||void 0===f?void 0:f.split("auth/"))||void 0===y?void 0:y[1],Ne=le?ft(le):null;return Ne?{type:_.type,eventId:_.eventId,tenantId:_.tenantId,error:Ne,urlResponse:null,sessionId:null,postBody:null}:{type:_.type,eventId:_.eventId,tenantId:_.tenantId,sessionId:_.sessionId,urlResponse:C,postBody:null}}return null}(Sr,$t.url)),f.onEvent(Ca||tu())});return function(Sr){return Kt.apply(this,arguments)}}();typeof y<"u"&&"function"==typeof y.subscribe&&y.subscribe(null,le);const Ne=C,wt=`${k.packageName.toLowerCase()}://`;Ns().handleOpenURL=function(){var Kt=(0,H.A)(function*($t){if($t.toLowerCase().startsWith(wt)&&le({url:$t}),"function"==typeof Ne)try{Ne($t)}catch(Sr){console.error(Sr)}});return function($t){return Kt.apply(this,arguments)}}()}};function tu(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:ft("no-auth-event")}}function Jh(){var _;return(null===(_=self?.location)||void 0===_?void 0:_.protocol)||null}function uM(_=(0,ve.ZQ)()){return!("file:"!==Jh()&&"ionic:"!==Jh()&&"capacitor:"!==Jh()||!_.toLowerCase().match(/iphone|ipad|ipod|android/))}function nu(){try{const _=self.localStorage,h=Xc();if(_)return _.setItem(h,"1"),_.removeItem(h),!function S2(_=(0,ve.ZQ)()){return function E2(){return(0,ve.lT)()&&11===document?.documentMode}()||function T2(_=(0,ve.ZQ)()){return/Edge\/\d+/.test(_)}(_)}()||(0,ve.zW)()}catch{return sy()&&(0,ve.zW)()}return!1}function sy(){return typeof global<"u"&&"WorkerGlobalScope"in global&&"importScripts"in global}function oy(){return(function x2(){return"http:"===Jh()||"https:"===Jh()}()||(0,ve.sr)()||uM())&&!function w2(){return(0,ve.lV)()||(0,ve.Ll)()}()&&nu()&&!sy()}function Yr(){return uM()&&typeof document<"u"}function iu(){return(iu=(0,H.A)(function*(){return!!Yr()&&new Promise(_=>{const h=setTimeout(()=>{_(!1)},1e3);document.addEventListener("deviceready",()=>{clearTimeout(h),_(!0)})})})).apply(this,arguments)}const gr={LOCAL:"local",NONE:"none",SESSION:"session"},ol=$,ay="persistence";function ru(_){return ly.apply(this,arguments)}function ly(){return(ly=(0,H.A)(function*(_){yield _._initializationPromise;const h=Fw(),f=vn(ay,_.config.apiKey,_.name);h&&h.setItem(f,_._getPersistence())})).apply(this,arguments)}function Fw(){var _;try{return(null===(_=function hM(){return typeof window<"u"?window:null}())||void 0===_?void 0:_.sessionStorage)||null}catch{return null}}const I2=$;class Qr{constructor(){this.browserResolver=Mt(gd),this.cordovaResolver=Mt(bd),this.underlyingResolver=null,this._redirectPersistence=mr,this._completeRedirectFn=Wv,this._overrideRedirectResult=zv}_initialize(h){var f=this;return(0,H.A)(function*(){return yield f.selectUnderlyingResolver(),f.assertedUnderlyingResolver._initialize(h)})()}_openPopup(h,f,y,C){var k=this;return(0,H.A)(function*(){return yield k.selectUnderlyingResolver(),k.assertedUnderlyingResolver._openPopup(h,f,y,C)})()}_openRedirect(h,f,y,C){var k=this;return(0,H.A)(function*(){return yield k.selectUnderlyingResolver(),k.assertedUnderlyingResolver._openRedirect(h,f,y,C)})()}_isIframeWebStorageSupported(h,f){this.assertedUnderlyingResolver._isIframeWebStorageSupported(h,f)}_originValidation(h){return this.assertedUnderlyingResolver._originValidation(h)}get _shouldInitProactively(){return Yr()||this.browserResolver._shouldInitProactively}get assertedUnderlyingResolver(){return I2(this.underlyingResolver,"internal-error"),this.underlyingResolver}selectUnderlyingResolver(){var h=this;return(0,H.A)(function*(){if(h.underlyingResolver)return;const f=yield function dM(){return iu.apply(this,arguments)}();h.underlyingResolver=f?h.cordovaResolver:h.browserResolver})()}}function Em(_){return _.unwrap()}function C2(_){return Vw(_)}function Vw(_){const{_tokenResponse:h}=_ instanceof ve.g?_.customData:_;if(!h)return null;if(!(_ instanceof ve.g)&&"temporaryProof"in h&&"phoneNumber"in h)return zh.credentialFromResult(_);const f=h.providerId;if(!f||f===tn.PASSWORD)return null;let y;switch(f){case tn.GOOGLE:y=Lp;break;case tn.FACEBOOK:y=Mh;break;case tn.GITHUB:y=Vp;break;case tn.TWITTER:y=gv;break;default:const{oauthIdToken:C,oauthAccessToken:k,oauthTokenSecret:K,pendingToken:le,nonce:Ne}=h;return k||K||C||le?le?f.startsWith("saml.")?po._create(f,le):Ta._fromParams({providerId:f,signInMethod:f,pendingToken:le,idToken:C,accessToken:k}):new ui(f).credential({idToken:C,accessToken:k,rawNonce:Ne}):null}return _ instanceof ve.g?y.credentialFromError(_):y.credentialFromResult(_)}function go(_,h){return h.catch(f=>{throw f instanceof ve.g&&function Lw(_,h){var f;const y=null===(f=h.customData)||void 0===f?void 0:f._tokenResponse;if("auth/multi-factor-auth-required"===h?.code)h.resolver=new fM(_,function c2(_,h){var f;const y=(0,ve.Ku)(_),C=h;return $(h.customData.operationType,y,"argument-error"),$(null===(f=C.customData._serverResponse)||void 0===f?void 0:f.mfaPendingCredential,y,"argument-error"),Yx._fromError(y,C)}(_,h));else if(y){const C=Vw(h),k=h;C&&(k.credential=C,k.tenantId=y.tenantId||void 0,k.email=y.email||void 0,k.phoneNumber=y.phoneNumber||void 0)}}(_,f),f}).then(f=>{const C=f.user;return{operationType:f.operationType,credential:C2(f),additionalUserInfo:Ks(f),user:Ml.getOrCreate(C)}})}function cy(_,h){return uy.apply(this,arguments)}function uy(){return(uy=(0,H.A)(function*(_,h){const f=yield h;return{verificationId:f.verificationId,confirm:y=>go(_,f.confirm(y))}})).apply(this,arguments)}class fM{constructor(h,f){this.resolver=f,this.auth=function wd(_){return _.wrapped()}(h)}get session(){return this.resolver.session}get hints(){return this.resolver.hints}resolveSignIn(h){return go(Em(this.auth),this.resolver.resolveSignIn(h))}}class Ml{constructor(h){this._delegate=h,this.multiFactor=function Zx(_){const h=(0,ve.Ku)(_);return Qp.has(h)||Qp.set(h,Qx._fromUser(h)),Qp.get(h)}(h)}static getOrCreate(h){return Ml.USER_MAP.has(h)||Ml.USER_MAP.set(h,new Ml(h)),Ml.USER_MAP.get(h)}delete(){return this._delegate.delete()}reload(){return this._delegate.reload()}toJSON(){return this._delegate.toJSON()}getIdTokenResult(h){return this._delegate.getIdTokenResult(h)}getIdToken(h){return this._delegate.getIdToken(h)}linkAndRetrieveDataWithCredential(h){return this.linkWithCredential(h)}linkWithCredential(h){var f=this;return(0,H.A)(function*(){return go(f.auth,hr(f._delegate,h))})()}linkWithPhoneNumber(h,f){var y=this;return(0,H.A)(function*(){return cy(y.auth,function UC(_,h,f){return sa.apply(this,arguments)}(y._delegate,h,f))})()}linkWithPopup(h){var f=this;return(0,H.A)(function*(){return go(f.auth,function GC(_,h,f){return Sn.apply(this,arguments)}(f._delegate,h,Qr))})()}linkWithRedirect(h){var f=this;return(0,H.A)(function*(){return yield ru(Vi(f.auth)),Gh(f._delegate,h,Qr)})()}reauthenticateAndRetrieveDataWithCredential(h){return this.reauthenticateWithCredential(h)}reauthenticateWithCredential(h){var f=this;return(0,H.A)(function*(){return go(f.auth,Wx(f._delegate,h))})()}reauthenticateWithPhoneNumber(h,f){return cy(this.auth,function uw(_,h,f){return nm.apply(this,arguments)}(this._delegate,h,f))}reauthenticateWithPopup(h){return go(this.auth,function hw(_,h,f){return sm.apply(this,arguments)}(this._delegate,h,Qr))}reauthenticateWithRedirect(h){var f=this;return(0,H.A)(function*(){return yield ru(Vi(f.auth)),Ys(f._delegate,h,Qr)})()}sendEmailVerification(h){return function dd(_,h){return ia.apply(this,arguments)}(this._delegate,h)}unlink(h){var f=this;return(0,H.A)(function*(){return yield function EC(_,h){return ko.apply(this,arguments)}(f._delegate,h),f})()}updateEmail(h){return function di(_,h){const f=(0,ve.Ku)(_);return(0,Gt._isFirebaseServerApp)(f.auth.app)?Promise.reject(Oe(f.auth)):Kp(f,h,null)}(this._delegate,h)}updatePassword(h){return function r2(_,h){return Kp((0,ve.Ku)(_),null,h)}(this._delegate,h)}updatePhoneNumber(h){return function im(_,h){return ks.apply(this,arguments)}(this._delegate,h)}updateProfile(h){return function Oh(_,h){return Wc.apply(this,arguments)}(this._delegate,h)}verifyBeforeUpdateEmail(h,f){return function kh(_,h,f){return Xp.apply(this,arguments)}(this._delegate,h,f)}get emailVerified(){return this._delegate.emailVerified}get isAnonymous(){return this._delegate.isAnonymous}get metadata(){return this._delegate.metadata}get phoneNumber(){return this._delegate.phoneNumber}get providerData(){return this._delegate.providerData}get refreshToken(){return this._delegate.refreshToken}get tenantId(){return this._delegate.tenantId}get displayName(){return this._delegate.displayName}get email(){return this._delegate.email}get photoURL(){return this._delegate.photoURL}get providerId(){return this._delegate.providerId}get uid(){return this._delegate.uid}get auth(){return this._delegate.auth}}Ml.USER_MAP=new WeakMap;const su=$;let ef=(()=>{class _{constructor(f,y){if(this.app=f,y.isInitialized())return this._delegate=y.getImmediate(),void this.linkUnderlyingAuth();const{apiKey:C}=f.options;su(C,"invalid-api-key",{appName:f.name}),su(C,"invalid-api-key",{appName:f.name});const k=typeof window<"u"?Qr:void 0;this._delegate=y.initialize({options:{persistence:nc(C,f.name),popupRedirectResolver:k}}),this._delegate._updateErrorMap(ns),this.linkUnderlyingAuth()}get emulatorConfig(){return this._delegate.emulatorConfig}get currentUser(){return this._delegate.currentUser?Ml.getOrCreate(this._delegate.currentUser):null}get languageCode(){return this._delegate.languageCode}set languageCode(f){this._delegate.languageCode=f}get settings(){return this._delegate.settings}get tenantId(){return this._delegate.tenantId}set tenantId(f){this._delegate.tenantId=f}useDeviceLanguage(){this._delegate.useDeviceLanguage()}signOut(){return this._delegate.signOut()}useEmulator(f,y){!function ov(_,h,f){const y=Vi(_);$(y._canInitEmulator,y,"emulator-config-failed"),$(/^https?:\/\//.test(h),y,"invalid-emulator-scheme");const C=!!f?.disableWarnings,k=Ox(h),{host:K,port:le}=function Rp(_){const h=Ox(_),f=/(\/\/)?([^?#/]+)/.exec(_.substr(h.length));if(!f)return{host:"",port:null};const y=f[2].split("@").pop()||"",C=/^(\[[^\]]+\])(:|$)/.exec(y);if(C){const k=C[1];return{host:k,port:Eh(y.substr(k.length+1))}}{const[k,K]=y.split(":");return{host:k,port:Eh(K)}}}(h);y.config.emulator={url:`${k}//${K}${null===le?"":`:${le}`}/`},y.settings.appVerificationDisabledForTesting=!0,y.emulatorConfig=Object.freeze({host:K,port:le,protocol:k.replace(":",""),options:Object.freeze({disableWarnings:C})}),C||function av(){function _(){const h=document.createElement("p"),f=h.style;h.innerText="Running in emulator mode. Do not use with production credentials.",f.position="fixed",f.width="100%",f.backgroundColor="#ffffff",f.border=".1em solid #000000",f.color="#b50000",f.bottom="0px",f.left="0px",f.margin="0px",f.zIndex="10000",f.textAlign="center",h.classList.add("firebase-emulator-warning"),document.body.appendChild(h)}typeof console<"u"&&"function"==typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",_):_())}()}(this._delegate,f,y)}applyActionCode(f){return function TC(_,h){return fr.apply(this,arguments)}(this._delegate,f)}checkActionCode(f){return kt(this._delegate,f)}confirmPasswordReset(f,y){return function qp(_,h,f){return Iv.apply(this,arguments)}(this._delegate,f,y)}createUserWithEmailAndPassword(f,y){var C=this;return(0,H.A)(function*(){return go(C._delegate,function Ph(_,h,f){return gs.apply(this,arguments)}(C._delegate,f,y))})()}fetchProvidersForEmail(f){return this.fetchSignInMethodsForEmail(f)}fetchSignInMethodsForEmail(f){return function Hr(_,h){return Gc.apply(this,arguments)}(this._delegate,f)}isSignInWithEmailLink(f){return function ud(_,h){const f=Ch.parseLink(h);return"EMAIL_SIGNIN"===f?.operation}(0,f)}getRedirectResult(){var f=this;return(0,H.A)(function*(){su(oy(),f._delegate,"operation-not-supported-in-this-environment");const y=yield function Hv(_,h){return Gv.apply(this,arguments)}(f._delegate,Qr);return y?go(f._delegate,Promise.resolve(y)):{credential:null,user:null}})()}addFrameworkForLogging(f){!function Nw(_,h){Vi(_)._logFramework(h)}(this._delegate,f)}onAuthStateChanged(f,y,C){const{next:k,error:K,complete:le}=Uw(f,y,C);return this._delegate.onAuthStateChanged(k,K,le)}onIdTokenChanged(f,y,C){const{next:k,error:K,complete:le}=Uw(f,y,C);return this._delegate.onIdTokenChanged(k,K,le)}sendSignInLinkToEmail(f,y){return function zr(_,h,f){return tl.apply(this,arguments)}(this._delegate,f,y)}sendPasswordResetEmail(f,y){return function $x(_,h,f){return $p.apply(this,arguments)}(this._delegate,f,y||void 0)}setPersistence(f){var y=this;return(0,H.A)(function*(){let C;switch(function wm(_,h){ol(Object.values(gr).includes(h),_,"invalid-persistence-type"),(0,ve.lV)()?ol(h!==gr.SESSION,_,"unsupported-persistence-type"):(0,ve.Ll)()?ol(h===gr.NONE,_,"unsupported-persistence-type"):sy()?ol(h===gr.NONE||h===gr.LOCAL&&(0,ve.zW)(),_,"unsupported-persistence-type"):ol(h===gr.NONE||nu(),_,"unsupported-persistence-type")}(y._delegate,f),f){case gr.SESSION:C=mr;break;case gr.LOCAL:C=(yield Mt(Il)._isAvailable())?Il:Rv;break;case gr.NONE:C=Xr;break;default:return ot("argument-error",{appName:y._delegate.name})}return y._delegate.setPersistence(C)})()}signInAndRetrieveDataWithCredential(f){return this.signInWithCredential(f)}signInAnonymously(){return go(this._delegate,function zx(_){return zp.apply(this,arguments)}(this._delegate))}signInWithCredential(f){return go(this._delegate,jp(this._delegate,f))}signInWithCustomToken(f){return go(this._delegate,function jx(_,h){return St.apply(this,arguments)}(this._delegate,f))}signInWithEmailAndPassword(f,y){return go(this._delegate,function cd(_,h,f){return(0,Gt._isFirebaseServerApp)(_.app)?Promise.reject(Oe(_)):jp((0,ve.Ku)(_),ad.credential(h,f)).catch(function(){var y=(0,H.A)(function*(C){throw"auth/password-does-not-meet-requirements"===C.code&&Kl(_),C});return function(C){return y.apply(this,arguments)}}())}(this._delegate,f,y))}signInWithEmailLink(f,y){return go(this._delegate,function Ln(_,h,f){return Hc.apply(this,arguments)}(this._delegate,f,y))}signInWithPhoneNumber(f,y){return cy(this._delegate,function VC(_,h,f){return Uh.apply(this,arguments)}(this._delegate,f,y))}signInWithPopup(f){var y=this;return(0,H.A)(function*(){return su(oy(),y._delegate,"operation-not-supported-in-this-environment"),go(y._delegate,function HC(_,h,f){return rm.apply(this,arguments)}(y._delegate,f,Qr))})()}signInWithRedirect(f){var y=this;return(0,H.A)(function*(){return su(oy(),y._delegate,"operation-not-supported-in-this-environment"),yield ru(y._delegate),Ke(y._delegate,f,Qr)})()}updateCurrentUser(f){return this._delegate.updateCurrentUser(f)}verifyPasswordResetCode(f){return function pr(_,h){return Oo.apply(this,arguments)}(this._delegate,f)}unwrap(){return this._delegate}_delete(){return this._delegate._delete()}linkUnderlyingAuth(){this._delegate.wrapped=()=>this}}return _.Persistence=gr,_})();function Uw(_,h,f){let y=_;"function"!=typeof _&&({next:y,error:h,complete:f}=_);const C=y;return{next:K=>C(K&&Ml.getOrCreate(K)),error:h,complete:f}}function nc(_,h){const f=function A2(_,h){const f=Fw();if(!f)return[];const y=vn(ay,_,h);switch(f.getItem(y)){case gr.NONE:return[Xr];case gr.LOCAL:return[Il,mr];case gr.SESSION:return[mr];default:return[]}}(_,h);if(typeof self<"u"&&!f.includes(Il)&&f.push(Il),typeof window<"u")for(const y of[Rv,mr])f.includes(y)||f.push(y);return f.includes(Xr)||f.push(Xr),f}class dy{constructor(){this.providerId="phone",this._delegate=new zh(Em(_n.A.auth()))}static credential(h,f){return zh.credential(h,f)}verifyPhoneNumber(h,f){return this._delegate.verifyPhoneNumber(h,f)}unwrap(){return this._delegate}}dy.PHONE_SIGN_IN_METHOD=zh.PHONE_SIGN_IN_METHOD,dy.PROVIDER_ID=zh.PROVIDER_ID;const tf=$;class pM{constructor(h,f,y=_n.A.app()){var C;tf(null===(C=y.options)||void 0===C?void 0:C.apiKey,"invalid-api-key",{appName:y.name}),this._delegate=new LC(y.auth(),h,f),this.type=this._delegate.type}clear(){this._delegate.clear()}render(){return this._delegate.render()}verify(){return this._delegate.verify()}}!function hy(_){_.INTERNAL.registerComponent(new ri.uA("auth-compat",h=>{const f=h.getProvider("app-compat").getImmediate(),y=h.getProvider("auth");return new ef(f,y)},"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:"EMAIL_SIGNIN",PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",REVERT_SECOND_FACTOR_ADDITION:"REVERT_SECOND_FACTOR_ADDITION",VERIFY_AND_CHANGE_EMAIL:"VERIFY_AND_CHANGE_EMAIL",VERIFY_EMAIL:"VERIFY_EMAIL"}},EmailAuthProvider:ad,FacebookAuthProvider:Mh,GithubAuthProvider:Vp,GoogleAuthProvider:Lp,OAuthProvider:ui,SAMLAuthProvider:Rh,PhoneAuthProvider:dy,PhoneMultiFactorGenerator:Yv,RecaptchaVerifier:pM,TwitterAuthProvider:gv,Auth:ef,AuthCredential:zc,Error:ve.g}).setInstantiationMode("LAZY").setMultipleInstances(!1)),_.registerVersion("@firebase/auth-compat","0.5.14")}(_n.A)},467:(wa,fs,Cn)=>{"use strict";function H(Gt,ve,on,Ii,ri,Ci,tn){try{var Ue=Gt[Ci](tn),rt=Ue.value}catch(Xt){return void on(Xt)}Ue.done?ve(rt):Promise.resolve(rt).then(Ii,ri)}function _n(Gt){return function(){var ve=this,on=arguments;return new Promise(function(Ii,ri){var Ci=Gt.apply(ve,on);function tn(rt){H(Ci,Ii,ri,tn,Ue,"next",rt)}function Ue(rt){H(Ci,Ii,ri,tn,Ue,"throw",rt)}tn(void 0)})}}Cn.d(fs,{A:()=>_n})},635:(wa,fs,Cn)=>{"use strict";function ve(Q,me){var Ae={};for(var re in Q)Object.prototype.hasOwnProperty.call(Q,re)&&me.indexOf(re)<0&&(Ae[re]=Q[re]);if(null!=Q&&"function"==typeof Object.getOwnPropertySymbols){var ye=0;for(re=Object.getOwnPropertySymbols(Q);ye<re.length;ye++)me.indexOf(re[ye])<0&&Object.prototype.propertyIsEnumerable.call(Q,re[ye])&&(Ae[re[ye]]=Q[re[ye]])}return Ae}function Xt(Q,me,Ae,re){return new(Ae||(Ae=Promise))(function(Qe,Ge){function ge(De){try{ae(re.next(De))}catch(Ve){Ge(Ve)}}function Ie(De){try{ae(re.throw(De))}catch(Ve){Ge(Ve)}}function ae(De){De.done?Qe(De.value):function ye(Qe){return Qe instanceof Ae?Qe:new Ae(function(Ge){Ge(Qe)})}(De.value).then(ge,Ie)}ae((re=re.apply(Q,me||[])).next())})}function tr(Q){return this instanceof tr?(this.v=Q,this):new tr(Q)}function ot(Q,me,Ae){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var ye,re=Ae.apply(Q,me||[]),Qe=[];return ye=Object.create(("function"==typeof AsyncIterator?AsyncIterator:Object).prototype),ge("next"),ge("throw"),ge("return",function Ge(Tt){return function(Vt){return Promise.resolve(Vt).then(Tt,Ve)}}),ye[Symbol.asyncIterator]=function(){return this},ye;function ge(Tt,Vt){re[Tt]&&(ye[Tt]=function(Nn){return new Promise(function(fi,un){Qe.push([Tt,Nn,fi,un])>1||Ie(Tt,Nn)})},Vt&&(ye[Tt]=Vt(ye[Tt])))}function Ie(Tt,Vt){try{!function ae(Tt){Tt.value instanceof tr?Promise.resolve(Tt.value.v).then(De,Ve):At(Qe[0][2],Tt)}(re[Tt](Vt))}catch(Nn){At(Qe[0][3],Nn)}}function De(Tt){Ie("next",Tt)}function Ve(Tt){Ie("throw",Tt)}function At(Tt,Vt){Tt(Vt),Qe.shift(),Qe.length&&Ie(Qe[0][0],Qe[0][1])}}function st(Q){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var Ae,me=Q[Symbol.asyncIterator];return me?me.call(Q):(Q=function wi(Q){var me="function"==typeof Symbol&&Symbol.iterator,Ae=me&&Q[me],re=0;if(Ae)return Ae.call(Q);if(Q&&"number"==typeof Q.length)return{next:function(){return Q&&re>=Q.length&&(Q=void 0),{value:Q&&Q[re++],done:!Q}}};throw new TypeError(me?"Object is not iterable.":"Symbol.iterator is not defined.")}(Q),Ae={},re("next"),re("throw"),re("return"),Ae[Symbol.asyncIterator]=function(){return this},Ae);function re(Qe){Ae[Qe]=Q[Qe]&&function(Ge){return new Promise(function(ge,Ie){!function ye(Qe,Ge,ge,Ie){Promise.resolve(Ie).then(function(ae){Qe({value:ae,done:ge})},Ge)}(ge,Ie,(Ge=Q[Qe](Ge)).done,Ge.value)})}}}Cn.d(fs,{AQ:()=>ot,N3:()=>tr,Tt:()=>ve,sH:()=>Xt,xN:()=>st}),"function"==typeof SuppressedError&&SuppressedError}},wa=>{wa(wa.s=292)}]);